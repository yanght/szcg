/*
 COPYRIGHT 2009 ESRI

 TRADE SECRETS: ESRI PROPRIETARY AND CONFIDENTIAL
 Unpublished material - all rights reserved under the
 Copyright Laws of the United States and applicable international
 laws, treaties, and conventions.

 For additional information, contact:
 Environmental Systems Research Institute, Inc.
 Attn: Contracts and Legal Services Department
 380 New York Street
 Redlands, California, 92373
 USA

 email: contracts@esri.com
 */
//>>built
require({cache:{"dijit/_editor/html":function(){define("dijit/_editor/html",["dojo/_base/array","dojo/_base/lang","dojo/sniff"],function(_1,_2,_3){var _4={};_2.setObject("dijit._editor.html",_4);var _5=_4.escapeXml=function(_6,_7){_6=_6.replace(/&/gm,"&amp;").replace(/</gm,"&lt;").replace(/>/gm,"&gt;").replace(/"/gm,"&quot;");if(!_7){_6=_6.replace(/'/gm,"&#39;");}return _6;};_4.getNodeHtml=function(_8){var _9=[];_4.getNodeHtmlHelper(_8,_9);return _9.join("");};_4.getNodeHtmlHelper=function(_a,_b){switch(_a.nodeType){case 1:var _c=_a.nodeName.toLowerCase();if(!_c||_c.charAt(0)=="/"){return "";}_b.push("<",_c);var _d=[],_e={};var _f;if(_3("dom-attributes-explicit")||_3("dom-attributes-specified-flag")){var i=0;while((_f=_a.attributes[i++])){var n=_f.name;if(n.substr(0,3)!=="_dj"&&(!_3("dom-attributes-specified-flag")||_f.specified)&&!(n in _e)){var v=_f.value;if(n=="src"||n=="href"){if(_a.getAttribute("_djrealurl")){v=_a.getAttribute("_djrealurl");}}if(_3("ie")===8&&n==="style"){v=v.replace("HEIGHT:","height:").replace("WIDTH:","width:");}_d.push([n,v]);_e[n]=v;}}}else{var _10=/^input$|^img$/i.test(_a.nodeName)?_a:_a.cloneNode(false);var s=_10.outerHTML;var _11=/[\w-]+=("[^"]*"|'[^']*'|\S*)/gi;var _12=s.match(_11);s=s.substr(0,s.indexOf(">"));_1.forEach(_12,function(_13){if(_13){var idx=_13.indexOf("=");if(idx>0){var key=_13.substring(0,idx);if(key.substr(0,3)!="_dj"){if(key=="src"||key=="href"){if(_a.getAttribute("_djrealurl")){_d.push([key,_a.getAttribute("_djrealurl")]);return;}}var val,_14;switch(key){case "style":val=_a.style.cssText.toLowerCase();break;case "class":val=_a.className;break;case "width":if(_c==="img"){_14=/width=(\S+)/i.exec(s);if(_14){val=_14[1];}break;}case "height":if(_c==="img"){_14=/height=(\S+)/i.exec(s);if(_14){val=_14[1];}break;}default:val=_a.getAttribute(key);}if(val!=null){_d.push([key,val.toString()]);}}}}},this);}_d.sort(function(a,b){return a[0]<b[0]?-1:(a[0]==b[0]?0:1);});var j=0;while((_f=_d[j++])){_b.push(" ",_f[0],"=\"",(typeof _f[1]==="string"?_5(_f[1],true):_f[1]),"\"");}switch(_c){case "br":case "hr":case "img":case "input":case "base":case "meta":case "area":case "basefont":_b.push(" />");break;case "script":_b.push(">",_a.innerHTML,"</",_c,">");break;default:_b.push(">");if(_a.hasChildNodes()){_4.getChildrenHtmlHelper(_a,_b);}_b.push("</",_c,">");}break;case 4:case 3:_b.push(_5(_a.nodeValue,true));break;case 8:_b.push("<!--",_5(_a.nodeValue,true),"-->");break;default:_b.push("<!-- Element not recognized - Type: ",_a.nodeType," Name: ",_a.nodeName,"-->");}};_4.getChildrenHtml=function(_15){var _16=[];_4.getChildrenHtmlHelper(_15,_16);return _16.join("");};_4.getChildrenHtmlHelper=function(dom,_17){if(!dom){return;}var _18=dom["childNodes"]||dom;var _19=!_3("ie")||_18!==dom;var _1a,i=0;while((_1a=_18[i++])){if(!_19||_1a.parentNode==dom){_4.getNodeHtmlHelper(_1a,_17);}}};return _4;});},"dijit/_editor/plugins/EnterKeyHandling":function(){define("dijit/_editor/plugins/EnterKeyHandling",["dojo/_base/declare","dojo/dom-construct","dojo/_base/event","dojo/keys","dojo/_base/lang","dojo/sniff","dojo/_base/window","dojo/window","../_Plugin","../RichText","../range","../../_base/focus"],function(_1b,_1c,_1d,_1e,_1f,has,win,_20,_21,_22,_23,_24){return _1b("dijit._editor.plugins.EnterKeyHandling",_21,{blockNodeForEnter:"BR",constructor:function(_25){if(_25){if("blockNodeForEnter" in _25){_25.blockNodeForEnter=_25.blockNodeForEnter.toUpperCase();}_1f.mixin(this,_25);}},setEditor:function(_26){if(this.editor===_26){return;}this.editor=_26;if(this.blockNodeForEnter=="BR"){this.editor.customUndo=true;_26.onLoadDeferred.then(_1f.hitch(this,function(d){this.connect(_26.document,"onkeypress",function(e){if(e.charOrCode==_1e.ENTER){var ne=_1f.mixin({},e);ne.shiftKey=true;if(!this.handleEnterKey(ne)){_1d.stop(e);}}});if(has("ie")==9){this.connect(_26.document,"onpaste",function(e){setTimeout(dojo.hitch(this,function(){var r=this.editor.document.selection.createRange();r.move("character",-1);r.select();r.move("character",1);r.select();}),0);});}return d;}));}else{if(this.blockNodeForEnter){var h=_1f.hitch(this,this.handleEnterKey);_26.addKeyHandler(13,0,0,h);_26.addKeyHandler(13,0,1,h);this.connect(this.editor,"onKeyPressed","onKeyPressed");}}},onKeyPressed:function(){if(this._checkListLater){if(win.withGlobal(this.editor.window,"isCollapsed",_24)){var _27=this.editor._sCall("getAncestorElement",["LI"]);if(!_27){_22.prototype.execCommand.call(this.editor,"formatblock",this.blockNodeForEnter);var _28=this.editor._sCall("getAncestorElement",[this.blockNodeForEnter]);if(_28){_28.innerHTML=this.bogusHtmlContent;if(has("ie")){var r=this.editor.document.selection.createRange();r.move("character",-1);r.select();}}else{console.error("onKeyPressed: Cannot find the new block node");}}else{if(has("mozilla")){if(_27.parentNode.parentNode.nodeName=="LI"){_27=_27.parentNode.parentNode;}}var fc=_27.firstChild;if(fc&&fc.nodeType==1&&(fc.nodeName=="UL"||fc.nodeName=="OL")){_27.insertBefore(fc.ownerDocument.createTextNode(" "),fc);var _29=_23.create(this.editor.window);_29.setStart(_27.firstChild,0);var _2a=_23.getSelection(this.editor.window,true);_2a.removeAllRanges();_2a.addRange(_29);}}}this._checkListLater=false;}if(this._pressedEnterInBlock){if(this._pressedEnterInBlock.previousSibling){this.removeTrailingBr(this._pressedEnterInBlock.previousSibling);}delete this._pressedEnterInBlock;}},bogusHtmlContent:"&#160;",blockNodes:/^(?:P|H1|H2|H3|H4|H5|H6|LI)$/,handleEnterKey:function(e){var _2b,_2c,_2d,_2e,_2f,_30,doc=this.editor.document,br,rs,txt;if(e.shiftKey){var _31=this.editor._sCall("getParentElement",[]);var _32=_23.getAncestor(_31,this.blockNodes);if(_32){if(_32.tagName=="LI"){return true;}_2b=_23.getSelection(this.editor.window);_2c=_2b.getRangeAt(0);if(!_2c.collapsed){_2c.deleteContents();_2b=_23.getSelection(this.editor.window);_2c=_2b.getRangeAt(0);}if(_23.atBeginningOfContainer(_32,_2c.startContainer,_2c.startOffset)){br=doc.createElement("br");_2d=_23.create(this.editor.window);_32.insertBefore(br,_32.firstChild);_2d.setStartAfter(br);_2b.removeAllRanges();_2b.addRange(_2d);}else{if(_23.atEndOfContainer(_32,_2c.startContainer,_2c.startOffset)){_2d=_23.create(this.editor.window);br=doc.createElement("br");_32.appendChild(br);_32.appendChild(doc.createTextNode(" "));_2d.setStart(_32.lastChild,0);_2b.removeAllRanges();_2b.addRange(_2d);}else{rs=_2c.startContainer;if(rs&&rs.nodeType==3){txt=rs.nodeValue;_2e=doc.createTextNode(txt.substring(0,_2c.startOffset));_2f=doc.createTextNode(txt.substring(_2c.startOffset));_30=doc.createElement("br");if(_2f.nodeValue==""&&has("webkit")){_2f=doc.createTextNode(" ");}_1c.place(_2e,rs,"after");_1c.place(_30,_2e,"after");_1c.place(_2f,_30,"after");_1c.destroy(rs);_2d=_23.create(this.editor.window);_2d.setStart(_2f,0);_2b.removeAllRanges();_2b.addRange(_2d);return false;}return true;}}}else{_2b=_23.getSelection(this.editor.window);if(_2b.rangeCount){_2c=_2b.getRangeAt(0);if(_2c&&_2c.startContainer){if(!_2c.collapsed){_2c.deleteContents();_2b=_23.getSelection(this.editor.window);_2c=_2b.getRangeAt(0);}rs=_2c.startContainer;if(rs&&rs.nodeType==3){var _33=false;var _34=_2c.startOffset;if(rs.length<_34){ret=this._adjustNodeAndOffset(rs,_34);rs=ret.node;_34=ret.offset;}txt=rs.nodeValue;_2e=doc.createTextNode(txt.substring(0,_34));_2f=doc.createTextNode(txt.substring(_34));_30=doc.createElement("br");if(!_2f.length){_2f=doc.createTextNode(" ");_33=true;}if(_2e.length){_1c.place(_2e,rs,"after");}else{_2e=rs;}_1c.place(_30,_2e,"after");_1c.place(_2f,_30,"after");_1c.destroy(rs);_2d=_23.create(this.editor.window);_2d.setStart(_2f,0);_2d.setEnd(_2f,_2f.length);_2b.removeAllRanges();_2b.addRange(_2d);if(_33&&!has("webkit")){this.editor._sCall("remove",[]);}else{this.editor._sCall("collapse",[true]);}}else{var _35;if(_2c.startOffset>=0){_35=rs.childNodes[_2c.startOffset];}var _30=doc.createElement("br");var _2f=doc.createTextNode(" ");if(!_35){rs.appendChild(_30);rs.appendChild(_2f);}else{_1c.place(_30,_35,"before");_1c.place(_2f,_30,"after");}_2d=_23.create(this.editor.window);_2d.setStart(_2f,0);_2d.setEnd(_2f,_2f.length);_2b.removeAllRanges();_2b.addRange(_2d);this.editor._sCall("collapse",[true]);}}}else{_22.prototype.execCommand.call(this.editor,"inserthtml","<br>");}}return false;}var _36=true;_2b=_23.getSelection(this.editor.window);_2c=_2b.getRangeAt(0);if(!_2c.collapsed){_2c.deleteContents();_2b=_23.getSelection(this.editor.window);_2c=_2b.getRangeAt(0);}var _37=_23.getBlockAncestor(_2c.endContainer,null,this.editor.editNode);var _38=_37.blockNode;if((this._checkListLater=(_38&&(_38.nodeName=="LI"||_38.parentNode.nodeName=="LI")))){if(has("mozilla")){this._pressedEnterInBlock=_38;}if(/^(\s|&nbsp;|&#160;|\xA0|<span\b[^>]*\bclass=['"]Apple-style-span['"][^>]*>(\s|&nbsp;|&#160;|\xA0)<\/span>)?(<br>)?$/.test(_38.innerHTML)){_38.innerHTML="";if(has("webkit")){_2d=_23.create(this.editor.window);_2d.setStart(_38,0);_2b.removeAllRanges();_2b.addRange(_2d);}this._checkListLater=false;}return true;}if(!_37.blockNode||_37.blockNode===this.editor.editNode){try{_22.prototype.execCommand.call(this.editor,"formatblock",this.blockNodeForEnter);}catch(e2){}_37={blockNode:this.editor._sCall("getAncestorElement",[this.blockNodeForEnter]),blockContainer:this.editor.editNode};if(_37.blockNode){if(_37.blockNode!=this.editor.editNode&&(!(_37.blockNode.textContent||_37.blockNode.innerHTML).replace(/^\s+|\s+$/g,"").length)){this.removeTrailingBr(_37.blockNode);return false;}}else{_37.blockNode=this.editor.editNode;}_2b=_23.getSelection(this.editor.window);_2c=_2b.getRangeAt(0);}var _39=doc.createElement(this.blockNodeForEnter);_39.innerHTML=this.bogusHtmlContent;this.removeTrailingBr(_37.blockNode);var _3a=_2c.endOffset;var _3b=_2c.endContainer;if(_3b.length<_3a){var ret=this._adjustNodeAndOffset(_3b,_3a);_3b=ret.node;_3a=ret.offset;}if(_23.atEndOfContainer(_37.blockNode,_3b,_3a)){if(_37.blockNode===_37.blockContainer){_37.blockNode.appendChild(_39);}else{_1c.place(_39,_37.blockNode,"after");}_36=false;_2d=_23.create(this.editor.window);_2d.setStart(_39,0);_2b.removeAllRanges();_2b.addRange(_2d);if(this.editor.height){_20.scrollIntoView(_39);}}else{if(_23.atBeginningOfContainer(_37.blockNode,_2c.startContainer,_2c.startOffset)){_1c.place(_39,_37.blockNode,_37.blockNode===_37.blockContainer?"first":"before");if(_39.nextSibling&&this.editor.height){_2d=_23.create(this.editor.window);_2d.setStart(_39.nextSibling,0);_2b.removeAllRanges();_2b.addRange(_2d);_20.scrollIntoView(_39.nextSibling);}_36=false;}else{if(_37.blockNode===_37.blockContainer){_37.blockNode.appendChild(_39);}else{_1c.place(_39,_37.blockNode,"after");}_36=false;if(_37.blockNode.style){if(_39.style){if(_37.blockNode.style.cssText){_39.style.cssText=_37.blockNode.style.cssText;}}}rs=_2c.startContainer;var _3c;if(rs&&rs.nodeType==3){var _3d,_3e;_3a=_2c.endOffset;if(rs.length<_3a){ret=this._adjustNodeAndOffset(rs,_3a);rs=ret.node;_3a=ret.offset;}txt=rs.nodeValue;_2e=doc.createTextNode(txt.substring(0,_3a));_2f=doc.createTextNode(txt.substring(_3a,txt.length));_1c.place(_2e,rs,"before");_1c.place(_2f,rs,"after");_1c.destroy(rs);var _3f=_2e.parentNode;while(_3f!==_37.blockNode){var tg=_3f.tagName;var _40=doc.createElement(tg);if(_3f.style){if(_40.style){if(_3f.style.cssText){_40.style.cssText=_3f.style.cssText;}}}if(_3f.tagName==="FONT"){if(_3f.color){_40.color=_3f.color;}if(_3f.face){_40.face=_3f.face;}if(_3f.size){_40.size=_3f.size;}}_3d=_2f;while(_3d){_3e=_3d.nextSibling;_40.appendChild(_3d);_3d=_3e;}_1c.place(_40,_3f,"after");_2e=_3f;_2f=_40;_3f=_3f.parentNode;}_3d=_2f;if(_3d.nodeType==1||(_3d.nodeType==3&&_3d.nodeValue)){_39.innerHTML="";}_3c=_3d;while(_3d){_3e=_3d.nextSibling;_39.appendChild(_3d);_3d=_3e;}}_2d=_23.create(this.editor.window);var _41;var _42=_3c;if(this.blockNodeForEnter!=="BR"){while(_42){_41=_42;_3e=_42.firstChild;_42=_3e;}if(_41&&_41.parentNode){_39=_41.parentNode;_2d.setStart(_39,0);_2b.removeAllRanges();_2b.addRange(_2d);if(this.editor.height){_20.scrollIntoView(_39);}if(has("mozilla")){this._pressedEnterInBlock=_37.blockNode;}}else{_36=true;}}else{_2d.setStart(_39,0);_2b.removeAllRanges();_2b.addRange(_2d);if(this.editor.height){_20.scrollIntoView(_39);}if(has("mozilla")){this._pressedEnterInBlock=_37.blockNode;}}}}return _36;},_adjustNodeAndOffset:function(_43,_44){while(_43.length<_44&&_43.nextSibling&&_43.nextSibling.nodeType==3){_44=_44-_43.length;_43=_43.nextSibling;}return {"node":_43,"offset":_44};},removeTrailingBr:function(_45){var _46=/P|DIV|LI/i.test(_45.tagName)?_45:this.editor._sCall("getParentOfType",[_45,["P","DIV","LI"]]);if(!_46){return;}if(_46.lastChild){if((_46.childNodes.length>1&&_46.lastChild.nodeType==3&&/^[\s\xAD]*$/.test(_46.lastChild.nodeValue))||_46.lastChild.tagName=="BR"){_1c.destroy(_46.lastChild);}}if(!_46.childNodes.length){_46.innerHTML=this.bogusHtmlContent;}}});});},"dijit/form/_ComboBoxMenuMixin":function(){define("dijit/form/_ComboBoxMenuMixin",["dojo/_base/array","dojo/_base/declare","dojo/dom-attr","dojo/i18n","dojo/i18n!./nls/ComboBox"],function(_47,_48,_49,_4a){return _48("dijit.form._ComboBoxMenuMixin",null,{_messages:null,postMixInProperties:function(){this.inherited(arguments);this._messages=_4a.getLocalization("dijit.form","ComboBox",this.lang);},buildRendering:function(){this.inherited(arguments);this.previousButton.innerHTML=this._messages["previousMessage"];this.nextButton.innerHTML=this._messages["nextMessage"];},_setValueAttr:function(_4b){this.value=_4b;this.onChange(_4b);},onClick:function(_4c){if(_4c==this.previousButton){this._setSelectedAttr(null);this.onPage(-1);}else{if(_4c==this.nextButton){this._setSelectedAttr(null);this.onPage(1);}else{this.onChange(_4c);}}},onChange:function(){},onPage:function(){},onClose:function(){this._setSelectedAttr(null);},_createOption:function(_4d,_4e){var _4f=this._createMenuItem();var _50=_4e(_4d);if(_50.html){_4f.innerHTML=_50.label;}else{_4f.appendChild(_4f.ownerDocument.createTextNode(_50.label));}if(_4f.innerHTML==""){_4f.innerHTML="&#160;";}this.applyTextDir(_4f,(_4f.innerText||_4f.textContent||""));return _4f;},createOptions:function(_51,_52,_53){this.items=_51;this.previousButton.style.display=(_52.start==0)?"none":"";_49.set(this.previousButton,"id",this.id+"_prev");_47.forEach(_51,function(_54,i){var _55=this._createOption(_54,_53);_55.setAttribute("item",i);_49.set(_55,"id",this.id+i);this.nextButton.parentNode.insertBefore(_55,this.nextButton);},this);var _56=false;if(_51.total&&!_51.total.then&&_51.total!=-1){if((_52.start+_52.count)<_51.total){_56=true;}else{if((_52.start+_52.count)>_51.total&&_52.count==_51.length){_56=true;}}}else{if(_52.count==_51.length){_56=true;}}this.nextButton.style.display=_56?"":"none";_49.set(this.nextButton,"id",this.id+"_next");},clearResultList:function(){var _57=this.containerNode;while(_57.childNodes.length>2){_57.removeChild(_57.childNodes[_57.childNodes.length-2]);}this._setSelectedAttr(null);},highlightFirstOption:function(){this.selectFirstNode();},highlightLastOption:function(){this.selectLastNode();},selectFirstNode:function(){this.inherited(arguments);if(this.getHighlightedOption()==this.previousButton){this.selectNextNode();}},selectLastNode:function(){this.inherited(arguments);if(this.getHighlightedOption()==this.nextButton){this.selectPreviousNode();}},getHighlightedOption:function(){return this.selected;}});});},"dijit/form/_SearchMixin":function(){define("dijit/form/_SearchMixin",["dojo/data/util/filter","dojo/_base/declare","dojo/_base/event","dojo/keys","dojo/_base/lang","dojo/query","dojo/sniff","dojo/string","dojo/when","../registry"],function(_58,_59,_5a,_5b,_5c,_5d,has,_5e,_5f,_60){return _59("dijit.form._SearchMixin",null,{pageSize:Infinity,store:null,fetchProperties:{},query:{},searchDelay:200,searchAttr:"name",queryExpr:"${0}*",ignoreCase:true,_abortQuery:function(){if(this.searchTimer){this.searchTimer=this.searchTimer.remove();}if(this._queryDeferHandle){this._queryDeferHandle=this._queryDeferHandle.remove();}if(this._fetchHandle){if(this._fetchHandle.abort){this._cancelingQuery=true;this._fetchHandle.abort();this._cancelingQuery=false;}if(this._fetchHandle.cancel){this._cancelingQuery=true;this._fetchHandle.cancel();this._cancelingQuery=false;}this._fetchHandle=null;}},_processInput:function(evt){if(this.disabled||this.readOnly){return;}var key=evt.charOrCode;if(evt.altKey||((evt.ctrlKey||evt.metaKey)&&(key!="x"&&key!="v"))||key==_5b.SHIFT){return;}var _61=false;this._prev_key_backspace=false;switch(key){case _5b.DELETE:case _5b.BACKSPACE:this._prev_key_backspace=true;this._maskValidSubsetError=true;_61=true;break;default:_61=typeof key=="string"||key==229;}if(_61){if(!this.store){this.onSearch();}else{this.searchTimer=this.defer("_startSearchFromInput",1);}}},onSearch:function(){},_startSearchFromInput:function(){this._startSearch(this.focusNode.value.replace(/([\\\*\?])/g,"\\$1"));},_startSearch:function(_62){this._abortQuery();var _63=this,_5d=_5c.clone(this.query),_64={start:0,count:this.pageSize,queryOptions:{ignoreCase:this.ignoreCase,deep:true}},qs=_5e.substitute(this.queryExpr,[_62]),q,_65=function(){var _66=_63._fetchHandle=_63.store.query(_5d,_64);if(_63.disabled||_63.readOnly||(q!==_63._lastQuery)){return;}_5f(_66,function(res){_63._fetchHandle=null;if(!_63.disabled&&!_63.readOnly&&(q===_63._lastQuery)){_5f(_66.total,function(_67){res.total=_67;var _68=_63.pageSize;if(isNaN(_68)||_68>res.total){_68=res.total;}res.nextPage=function(_69){_64.direction=_69=_69!==false;_64.count=_68;if(_69){_64.start+=res.length;if(_64.start>=res.total){_64.count=0;}}else{_64.start-=_68;if(_64.start<0){_64.count=Math.max(_68+_64.start,0);_64.start=0;}}if(_64.count<=0){res.length=0;_63.onSearch(res,_5d,_64);}else{_65();}};_63.onSearch(res,_5d,_64);});}},function(err){_63._fetchHandle=null;if(!_63._cancelingQuery){console.error(_63.declaredClass+" "+err.toString());}});};_5c.mixin(_64,this.fetchProperties);if(this.store._oldAPI){q=qs;}else{q=_58.patternToRegExp(qs,this.ignoreCase);q.toString=function(){return qs;};}this._lastQuery=_5d[this.searchAttr]=q;this._queryDeferHandle=this.defer(_65,this.searchDelay);},constructor:function(){this.query={};this.fetchProperties={};},postMixInProperties:function(){if(!this.store){var _6a=this.list;if(_6a){this.store=_60.byId(_6a);}}this.inherited(arguments);}});});},"dijit/form/NumberSpinner":function(){define("dijit/form/NumberSpinner",["dojo/_base/declare","dojo/_base/event","dojo/keys","./_Spinner","./NumberTextBox"],function(_6b,_6c,_6d,_6e,_6f){return _6b("dijit.form.NumberSpinner",[_6e,_6f.Mixin],{adjust:function(val,_70){var tc=this.constraints,v=isNaN(val),_71=!isNaN(tc.max),_72=!isNaN(tc.min);if(v&&_70!=0){val=(_70>0)?_72?tc.min:_71?tc.max:0:_71?this.constraints.max:_72?tc.min:0;}var _73=val+_70;if(v||isNaN(_73)){return val;}if(_71&&(_73>tc.max)){_73=tc.max;}if(_72&&(_73<tc.min)){_73=tc.min;}return _73;},_onKeyPress:function(e){if((e.charOrCode==_6d.HOME||e.charOrCode==_6d.END)&&!(e.ctrlKey||e.altKey||e.metaKey)&&typeof this.get("value")!="undefined"){var _74=this.constraints[(e.charOrCode==_6d.HOME?"min":"max")];if(typeof _74=="number"){this._setValueAttr(_74,false);}_6c.stop(e);}}});});},"dijit/form/DateTextBox":function(){define("dijit/form/DateTextBox",["dojo/_base/declare","../Calendar","./_DateTimeTextBox"],function(_75,_76,_77){return _75("dijit.form.DateTextBox",_77,{baseClass:"dijitTextBox dijitComboBox dijitDateTextBox",popupClass:_76,_selector:"date",value:new Date("")});});},"url:dijit/templates/Calendar.html":"<table cellspacing=\"0\" cellpadding=\"0\" class=\"dijitCalendarContainer\" role=\"grid\" aria-labelledby=\"${id}_mddb ${id}_year\">\n\t<thead>\n\t\t<tr class=\"dijitReset dijitCalendarMonthContainer\" valign=\"top\">\n\t\t\t<th class='dijitReset dijitCalendarArrow' data-dojo-attach-point=\"decrementMonth\">\n\t\t\t\t<img src=\"${_blankGif}\" alt=\"\" class=\"dijitCalendarIncrementControl dijitCalendarDecrease\" role=\"presentation\"/>\n\t\t\t\t<span data-dojo-attach-point=\"decreaseArrowNode\" class=\"dijitA11ySideArrow\">-</span>\n\t\t\t</th>\n\t\t\t<th class='dijitReset' colspan=\"5\">\n\t\t\t\t<div data-dojo-attach-point=\"monthNode\">\n\t\t\t\t</div>\n\t\t\t</th>\n\t\t\t<th class='dijitReset dijitCalendarArrow' data-dojo-attach-point=\"incrementMonth\">\n\t\t\t\t<img src=\"${_blankGif}\" alt=\"\" class=\"dijitCalendarIncrementControl dijitCalendarIncrease\" role=\"presentation\"/>\n\t\t\t\t<span data-dojo-attach-point=\"increaseArrowNode\" class=\"dijitA11ySideArrow\">+</span>\n\t\t\t</th>\n\t\t</tr>\n\t\t<tr role=\"row\">\n\t\t\t${!dayCellsHtml}\n\t\t</tr>\n\t</thead>\n\t<tbody data-dojo-attach-point=\"dateRowsNode\" data-dojo-attach-event=\"onclick: _onDayClick\" class=\"dijitReset dijitCalendarBodyContainer\">\n\t\t\t${!dateRowsHtml}\n\t</tbody>\n\t<tfoot class=\"dijitReset dijitCalendarYearContainer\">\n\t\t<tr>\n\t\t\t<td class='dijitReset' valign=\"top\" colspan=\"7\" role=\"presentation\">\n\t\t\t\t<div class=\"dijitCalendarYearLabel\">\n\t\t\t\t\t<span data-dojo-attach-point=\"previousYearLabelNode\" class=\"dijitInline dijitCalendarPreviousYear\" role=\"button\"></span>\n\t\t\t\t\t<span data-dojo-attach-point=\"currentYearLabelNode\" class=\"dijitInline dijitCalendarSelectedYear\" role=\"button\" id=\"${id}_year\"></span>\n\t\t\t\t\t<span data-dojo-attach-point=\"nextYearLabelNode\" class=\"dijitInline dijitCalendarNextYear\" role=\"button\"></span>\n\t\t\t\t</div>\n\t\t\t</td>\n\t\t</tr>\n\t</tfoot>\n</table>\n","dijit/form/_AutoCompleterMixin":function(){define("dijit/form/_AutoCompleterMixin",["dojo/data/util/filter","dojo/_base/declare","dojo/dom-attr","dojo/_base/event","dojo/keys","dojo/_base/lang","dojo/query","dojo/regexp","dojo/sniff","dojo/string","./DataList","../registry","./_TextBoxMixin","./_SearchMixin"],function(_78,_79,_7a,_7b,_7c,_7d,_7e,_7f,has,_80,_81,_82,_83,_84){return _79("dijit.form._AutoCompleterMixin",_84,{item:null,autoComplete:true,highlightMatch:"first",labelAttr:"",labelType:"text",maxHeight:-1,_stopClickEvents:false,_getCaretPos:function(_85){var pos=0;if(typeof (_85.selectionStart)=="number"){pos=_85.selectionStart;}else{if(has("ie")){var tr=_85.ownerDocument.selection.createRange().duplicate();var ntr=_85.createTextRange();tr.move("character",0);ntr.move("character",0);try{ntr.setEndPoint("EndToEnd",tr);pos=String(ntr.text).replace(/\r/g,"").length;}catch(e){}}}return pos;},_setCaretPos:function(_86,_87){_87=parseInt(_87);_83.selectInputText(_86,_87,_87);},_setDisabledAttr:function(_88){this.inherited(arguments);this.domNode.setAttribute("aria-disabled",_88?"true":"false");},_onKey:function(evt){if(evt.charCode>=32){return;}var key=evt.charCode||evt.keyCode;if(key==_7c.ALT||key==_7c.CTRL||key==_7c.META||key==_7c.SHIFT){return;}var pw=this.dropDown;var _89=null;this._abortQuery();this.inherited(arguments);if(evt.altKey||evt.ctrlKey||evt.metaKey){return;}if(this._opened){_89=pw.getHighlightedOption();}switch(key){case _7c.PAGE_DOWN:case _7c.DOWN_ARROW:case _7c.PAGE_UP:case _7c.UP_ARROW:if(this._opened){this._announceOption(_89);}_7b.stop(evt);break;case _7c.ENTER:if(_89){if(_89==pw.nextButton){this._nextSearch(1);_7b.stop(evt);break;}else{if(_89==pw.previousButton){this._nextSearch(-1);_7b.stop(evt);break;}}_7b.stop(evt);}else{this._setBlurValue();this._setCaretPos(this.focusNode,this.focusNode.value.length);}case _7c.TAB:var _8a=this.get("displayedValue");if(pw&&(_8a==pw._messages["previousMessage"]||_8a==pw._messages["nextMessage"])){break;}if(_89){this._selectOption(_89);}case _7c.ESCAPE:if(this._opened){this._lastQuery=null;this.closeDropDown();}break;}},_autoCompleteText:function(_8b){var fn=this.focusNode;_83.selectInputText(fn,fn.value.length);var _8c=this.ignoreCase?"toLowerCase":"substr";if(_8b[_8c](0).indexOf(this.focusNode.value[_8c](0))==0){var _8d=this.autoComplete?this._getCaretPos(fn):fn.value.length;if((_8d+1)>fn.value.length){fn.value=_8b;_83.selectInputText(fn,_8d);}}else{fn.value=_8b;_83.selectInputText(fn);}},_openResultList:function(_8e,_8f,_90){var _91=this.dropDown.getHighlightedOption();this.dropDown.clearResultList();if(!_8e.length&&_90.start==0){this.closeDropDown();return;}this._nextSearch=this.dropDown.onPage=_7d.hitch(this,function(_92){_8e.nextPage(_92!==-1);this.focus();});this.dropDown.createOptions(_8e,_90,_7d.hitch(this,"_getMenuLabelFromItem"));this._showResultList();if("direction" in _90){if(_90.direction){this.dropDown.highlightFirstOption();}else{if(!_90.direction){this.dropDown.highlightLastOption();}}if(_91){this._announceOption(this.dropDown.getHighlightedOption());}}else{if(this.autoComplete&&!this._prev_key_backspace&&!/^[*]+$/.test(_8f[this.searchAttr].toString())){this._announceOption(this.dropDown.containerNode.firstChild.nextSibling);}}},_showResultList:function(){this.closeDropDown(true);this.openDropDown();this.domNode.setAttribute("aria-expanded","true");},loadDropDown:function(){this._startSearchAll();},isLoaded:function(){return false;},closeDropDown:function(){this._abortQuery();if(this._opened){this.inherited(arguments);this.domNode.setAttribute("aria-expanded","false");this.focusNode.removeAttribute("aria-activedescendant");}},_setBlurValue:function(){var _93=this.get("displayedValue");var pw=this.dropDown;if(pw&&(_93==pw._messages["previousMessage"]||_93==pw._messages["nextMessage"])){this._setValueAttr(this._lastValueReported,true);}else{if(typeof this.item=="undefined"){this.item=null;this.set("displayedValue",_93);}else{if(this.value!=this._lastValueReported){this._handleOnChange(this.value,true);}this._refreshState();}}},_setItemAttr:function(_94,_95,_96){var _97="";if(_94){if(!_96){_96=this.store._oldAPI?this.store.getValue(_94,this.searchAttr):_94[this.searchAttr];}_97=this._getValueField()!=this.searchAttr?this.store.getIdentity(_94):_96;}this.set("value",_97,_95,_96,_94);},_announceOption:function(_98){if(!_98){return;}var _99;if(_98==this.dropDown.nextButton||_98==this.dropDown.previousButton){_99=_98.innerHTML;this.item=undefined;this.value="";}else{var _9a=this.dropDown.items[_98.getAttribute("item")];_99=(this.store._oldAPI?this.store.getValue(_9a,this.searchAttr):_9a[this.searchAttr]).toString();this.set("item",_9a,false,_99);}this.focusNode.value=this.focusNode.value.substring(0,this._lastInput.length);this.focusNode.setAttribute("aria-activedescendant",_7a.get(_98,"id"));this._autoCompleteText(_99);},_selectOption:function(_9b){this.closeDropDown();if(_9b){this._announceOption(_9b);}this._setCaretPos(this.focusNode,this.focusNode.value.length);this._handleOnChange(this.value,true);},_startSearchAll:function(){this._startSearch("");},_startSearchFromInput:function(){this.item=undefined;this.inherited(arguments);},_startSearch:function(key){if(!this.dropDown){var _9c=this.id+"_popup",_9d=_7d.isString(this.dropDownClass)?_7d.getObject(this.dropDownClass,false):this.dropDownClass;this.dropDown=new _9d({onChange:_7d.hitch(this,this._selectOption),id:_9c,dir:this.dir,textDir:this.textDir});this.focusNode.removeAttribute("aria-activedescendant");this.textbox.setAttribute("aria-owns",_9c);}this._lastInput=key;this.inherited(arguments);},_getValueField:function(){return this.searchAttr;},postMixInProperties:function(){this.inherited(arguments);if(!this.store){var _9e=this.srcNodeRef;this.store=new _81({},_9e);if(!("value" in this.params)){var _9f=(this.item=this.store.fetchSelectedItem());if(_9f){var _a0=this._getValueField();this.value=this.store._oldAPI?this.store.getValue(_9f,_a0):_9f[_a0];}}}},postCreate:function(){var _a1=_7e("label[for=\""+this.id+"\"]");if(_a1.length){if(!_a1[0].id){_a1[0].id=this.id+"_label";}this.domNode.setAttribute("aria-labelledby",_a1[0].id);}this.inherited(arguments);this.connect(this,"onSearch","_openResultList");},_getMenuLabelFromItem:function(_a2){var _a3=this.labelFunc(_a2,this.store),_a4=this.labelType;if(this.highlightMatch!="none"&&this.labelType=="text"&&this._lastInput){_a3=this.doHighlight(_a3,this._lastInput);_a4="html";}return {html:_a4=="html",label:_a3};},doHighlight:function(_a5,_a6){var _a7=(this.ignoreCase?"i":"")+(this.highlightMatch=="all"?"g":""),i=this.queryExpr.indexOf("${0}");_a6=_7f.escapeString(_a6);return this._escapeHtml(_a5.replace(new RegExp((i==0?"^":"")+"("+_a6+")"+(i==(this.queryExpr.length-4)?"$":""),_a7),"￿$1￿")).replace(/\uFFFF([^\uFFFF]+)\uFFFF/g,"<span class=\"dijitComboBoxHighlightMatch\">$1</span>");},_escapeHtml:function(str){str=String(str).replace(/&/gm,"&amp;").replace(/</gm,"&lt;").replace(/>/gm,"&gt;").replace(/"/gm,"&quot;");return str;},reset:function(){this.item=null;this.inherited(arguments);},labelFunc:function(_a8,_a9){return (_a9._oldAPI?_a9.getValue(_a8,this.labelAttr||this.searchAttr):_a8[this.labelAttr||this.searchAttr]).toString();},_setValueAttr:function(_aa,_ab,_ac,_ad){this._set("item",_ad||null);if(_aa==null){_aa="";}this.inherited(arguments);},_setTextDirAttr:function(_ae){this.inherited(arguments);if(this.dropDown){this.dropDown._set("textDir",_ae);}}});});},"dijit/form/MappedTextBox":function(){define("dijit/form/MappedTextBox",["dojo/_base/declare","dojo/dom-construct","./ValidationTextBox"],function(_af,_b0,_b1){return _af("dijit.form.MappedTextBox",_b1,{postMixInProperties:function(){this.inherited(arguments);this.nameAttrSetting="";},_setNameAttr:null,serialize:function(val){return val.toString?val.toString():"";},toString:function(){var val=this.filter(this.get("value"));return val!=null?(typeof val=="string"?val:this.serialize(val,this.constraints)):"";},validate:function(){this.valueNode.value=this.toString();return this.inherited(arguments);},buildRendering:function(){this.inherited(arguments);this.valueNode=_b0.place("<input type='hidden'"+(this.name?" name=\""+this.name.replace(/"/g,"&quot;")+"\"":"")+"/>",this.textbox,"after");},reset:function(){this.valueNode.value="";this.inherited(arguments);}});});},"dijit/form/ComboBoxMixin":function(){require({cache:{"url:dijit/form/templates/DropDownBox.html":"<div class=\"dijit dijitReset dijitInline dijitLeft\"\n\tid=\"widget_${id}\"\n\trole=\"combobox\"\n\t><div class='dijitReset dijitRight dijitButtonNode dijitArrowButton dijitDownArrowButton dijitArrowButtonContainer'\n\t\tdata-dojo-attach-point=\"_buttonNode, _popupStateNode\" role=\"presentation\"\n\t\t><input class=\"dijitReset dijitInputField dijitArrowButtonInner\" value=\"&#9660; \" type=\"text\" tabIndex=\"-1\" readonly=\"readonly\" role=\"presentation\"\n\t\t\t${_buttonInputDisabled}\n\t/></div\n\t><div class='dijitReset dijitValidationContainer'\n\t\t><input class=\"dijitReset dijitInputField dijitValidationIcon dijitValidationInner\" value=\"&#935; \" type=\"text\" tabIndex=\"-1\" readonly=\"readonly\" role=\"presentation\"\n\t/></div\n\t><div class=\"dijitReset dijitInputField dijitInputContainer\"\n\t\t><input class='dijitReset dijitInputInner' ${!nameAttrSetting} type=\"text\" autocomplete=\"off\"\n\t\t\tdata-dojo-attach-point=\"textbox,focusNode\" role=\"textbox\" aria-haspopup=\"true\"\n\t/></div\n></div>\n"}});define("dijit/form/ComboBoxMixin",["dojo/_base/declare","dojo/_base/Deferred","dojo/_base/kernel","dojo/_base/lang","dojo/store/util/QueryResults","./_AutoCompleterMixin","./_ComboBoxMenu","../_HasDropDown","dojo/text!./templates/DropDownBox.html"],function(_b2,_b3,_b4,_b5,_b6,_b7,_b8,_b9,_ba){return _b2("dijit.form.ComboBoxMixin",[_b9,_b7],{dropDownClass:_b8,hasDownArrow:true,templateString:_ba,baseClass:"dijitTextBox dijitComboBox",cssStateNodes:{"_buttonNode":"dijitDownArrowButton"},_setHasDownArrowAttr:function(val){this._set("hasDownArrow",val);this._buttonNode.style.display=val?"":"none";},_showResultList:function(){this.displayMessage("");this.inherited(arguments);},_setStoreAttr:function(_bb){if(!_bb.get){_b5.mixin(_bb,{_oldAPI:true,get:function(id){var _bc=new _b3();this.fetchItemByIdentity({identity:id,onItem:function(_bd){_bc.resolve(_bd);},onError:function(_be){_bc.reject(_be);}});return _bc.promise;},query:function(_bf,_c0){var _c1=new _b3(function(){_c2.abort&&_c2.abort();});_c1.total=new _b3();var _c2=this.fetch(_b5.mixin({query:_bf,onBegin:function(_c3){_c1.total.resolve(_c3);},onComplete:function(_c4){_c1.resolve(_c4);},onError:function(_c5){_c1.reject(_c5);}},_c0));return _b6(_c1);}});}this._set("store",_bb);},postMixInProperties:function(){var _c6=this.params.store||this.store;if(_c6){this._setStoreAttr(_c6);}this.inherited(arguments);if(!this.params.store&&!this.store._oldAPI){var _c7=this.declaredClass;_b5.mixin(this.store,{getValue:function(_c8,_c9){_b4.deprecated(_c7+".store.getValue(item, attr) is deprecated for builtin store.  Use item.attr directly","","2.0");return _c8[_c9];},getLabel:function(_ca){_b4.deprecated(_c7+".store.getLabel(item) is deprecated for builtin store.  Use item.label directly","","2.0");return _ca.name;},fetch:function(_cb){_b4.deprecated(_c7+".store.fetch() is deprecated for builtin store.","Use store.query()","2.0");var _cc=["dojo/data/ObjectStore"];require(_cc,_b5.hitch(this,function(_cd){new _cd({objectStore:this}).fetch(_cb);}));}});}}});});},"dojo/_base/query":function(){define(["../query","./NodeList"],function(_ce){return _ce;});},"dijit/form/SimpleTextarea":function(){define("dijit/form/SimpleTextarea",["dojo/_base/declare","dojo/dom-class","dojo/sniff","./TextBox"],function(_cf,_d0,has,_d1){return _cf("dijit.form.SimpleTextarea",_d1,{baseClass:"dijitTextBox dijitTextArea",rows:"3",cols:"20",templateString:"<textarea ${!nameAttrSetting} data-dojo-attach-point='focusNode,containerNode,textbox' autocomplete='off'></textarea>",postMixInProperties:function(){if(!this.value&&this.srcNodeRef){this.value=this.srcNodeRef.value;}this.inherited(arguments);},buildRendering:function(){this.inherited(arguments);if(has("ie")&&this.cols){_d0.add(this.textbox,"dijitTextAreaCols");}},filter:function(_d2){if(_d2){_d2=_d2.replace(/\r/g,"");}return this.inherited(arguments);},_onInput:function(e){if(this.maxLength){var _d3=parseInt(this.maxLength);var _d4=this.textbox.value.replace(/\r/g,"");var _d5=_d4.length-_d3;if(_d5>0){var _d6=this.textbox;if(_d6.selectionStart){var pos=_d6.selectionStart;var cr=0;if(has("opera")){cr=(this.textbox.value.substring(0,pos).match(/\r/g)||[]).length;}this.textbox.value=_d4.substring(0,pos-_d5-cr)+_d4.substring(pos-cr);_d6.setSelectionRange(pos-_d5,pos-_d5);}else{if(this.ownerDocument.selection){_d6.focus();var _d7=this.ownerDocument.selection.createRange();_d7.moveStart("character",-_d5);_d7.text="";_d7.select();}}}}this.inherited(arguments);}});});},"dijit/_editor/plugins/TextColor":function(){define("dijit/_editor/plugins/TextColor",["require","dojo/colors","dojo/_base/declare","dojo/_base/lang","../_Plugin","../../form/DropDownButton"],function(_d8,_d9,_da,_db,_dc,_dd){var _de=_da("dijit._editor.plugins.TextColor",_dc,{buttonClass:_dd,useDefaultCommand:false,_initButton:function(){this.inherited(arguments);var _df=this;this.button.loadDropDown=function(_e0){_d8(["../../ColorPalette"],_db.hitch(this,function(_e1){this.dropDown=new _e1({ownerDocument:_df.editor.ownerDocument,value:_df.value,onChange:function(_e2){_df.editor.execCommand(_df.command,_e2);}});_e0();}));};},updateState:function(){var _e3=this.editor;var _e4=this.command;if(!_e3||!_e3.isLoaded||!_e4.length){return;}if(this.button){var _e5=this.get("disabled");this.button.set("disabled",_e5);if(_e5){return;}var _e6;try{_e6=_e3.queryCommandValue(_e4)||"";}catch(e){_e6="";}}if(_e6==""){_e6="#000000";}if(_e6=="transparent"){_e6="#ffffff";}if(typeof _e6=="string"){if(_e6.indexOf("rgb")>-1){_e6=_d9.fromRgb(_e6).toHex();}}else{_e6=((_e6&255)<<16)|(_e6&65280)|((_e6&16711680)>>>16);_e6=_e6.toString(16);_e6="#000000".slice(0,7-_e6.length)+_e6;}this.value=_e6;var _e7=this.button.dropDown;if(_e7&&_e6!==_e7.get("value")){_e7.set("value",_e6,false);}}});_dc.registry["foreColor"]=function(){return new _de({command:"foreColor"});};_dc.registry["hiliteColor"]=function(){return new _de({command:"hiliteColor"});};return _de;});},"esri/dijit/AttributeInspector":function(){define("esri/dijit/AttributeInspector",["dijit","dojo","dojox","dojo/require!dojo/fx,dojox/gfx,dijit/_Widget,dijit/_Templated,dijit/Editor,dijit/_editor/plugins/LinkDialog,dijit/_editor/plugins/TextColor,esri/dijit/editing/AttachmentEditor,esri/dijit/editing/Util,esri/tasks/query,dijit/form/DateTextBox,dijit/form/TextBox,dijit/form/NumberTextBox,dijit/form/FilteringSelect,dijit/form/NumberSpinner,dijit/form/Button,dijit/form/SimpleTextarea,dijit/Tooltip,dojo/data/ItemFileReadStore,dojox/date/islamic,dojox/date/islamic/Date,dojox/date/islamic/locale"],function(_e8,_e9,_ea){_e9.provide("esri.dijit.AttributeInspector");_e9.require("dojo.fx");_e9.require("dojox.gfx");_e9.require("dijit._Widget");_e9.require("dijit._Templated");_e9.require("dijit.Editor");_e9.require("dijit._editor.plugins.LinkDialog");_e9.require("dijit._editor.plugins.TextColor");_e9.require("esri.dijit.editing.AttachmentEditor");_e9.require("esri.dijit.editing.Util");_e9.require("esri.tasks.query");_e9.require("dijit.form.DateTextBox");_e9.require("dijit.form.TextBox");_e9.require("dijit.form.NumberTextBox");_e9.require("dijit.form.FilteringSelect");_e9.require("dijit.form.NumberSpinner");_e9.require("dijit.form.Button");_e9.require("dijit.form.SimpleTextarea");_e9.require("dijit.Tooltip");_e9.require("dojo.data.ItemFileReadStore");_e9.require("dojox.date.islamic");_e9.require("dojox.date.islamic.Date");_e9.require("dojox.date.islamic.locale");_e9.declare("esri.dijit.AttributeInspector",[_e8._Widget,_e8._Templated],{widgetsInTemplate:true,templateString:"<div class=\"esriAttributeInspector\">\r\n    <div class=\"atiLayerName\" dojoAttachPoint=\"layerName\"></div>\r\n    <div class=\"atiAttributes\" dojoAttachPoint=\"attributeTable\"></div>\r\n    <div dojoAttachPoint=\"attachmentEditor\"></div>\r\n    <div class=\"atiEditorTrackingInfo\" dojoAttachPoint=\"editorTrackingInfoDiv\"></div>\r\n    <div class=\"atiButtons\" dojoAttachPoint=\"editButtons\">\r\n        <button  dojoType=\"dijit.form.Button\" class=\"atiButton atiDeleteButton\"  dojoAttachPoint=\"deleteBtn\" dojoAttachEvent=\"onClick: onDeleteBtn\" showLabel=\"true\" type=\"button\">${NLS_deleteFeature}</button>\r\n        <div class=\"atiNavButtons\" dojoAttachPoint=\"navButtons\">\r\n            <div class=\"atiNavMessage\" dojoAttachPoint=\"navMessage\"></div>\r\n            <button  dojoType=\"dijit.form.Button\" iconClass=\"atiButton atiFirstIcon\" dojoAttachPoint=\"firstFeatureButton\" dojoAttachEvent=\"onClick: onFirstFeature\" showLabel=\"false\" type=\"button\">${NLS_first}</button>\r\n            <button  dojoType=\"dijit.form.Button\" iconClass=\"atiButton atiPrevIcon\" dojoAttachPoint=\"prevFeatureButton\" dojoAttachEvent=\"onClick: onPreviousFeature\" showLabel=\"false\" type=\"button\">${NLS_previous}</button>\r\n            <button  dojoType=\"dijit.form.Button\" iconClass=\"atiButton atiNextIcon\" dojoAttachPoint=\"nextFeatureButton\" dojoAttachEvent=\"onClick: onNextFeature\" showLabel=\"false\" type=\"button\">${NLS_next}</button>\r\n            <button  dojoType=\"dijit.form.Button\" iconClass=\"atiButton atiLastIcon\" dojoAttachPoint=\"lastFeatureButton\" dojoAttachEvent=\"onClick: onLastFeature\" showLabel=\"false\" type=\"button\">${NLS_last}</button>\r\n        </div>\r\n    </div>\r\n</div>\r\n",_navMessage:"( ${idx} ${of} ${numFeatures} )",onUpdate:function(){},onDelete:function(){},onAttributeChange:function(){},onNext:function(){},onReset:function(){},onCancel:function(){},constructor:function(_eb,_ec){_e9.mixin(this,esri.bundle.widgets.attributeInspector);_eb=_eb||{};if(!_eb.featureLayer&&!_eb.layerInfos){console.error("esri.AttributeInspector: please provide correct parameter in the constructor");}this._userIds={};if(_eb.featureLayer&&_eb.featureLayer.credential){var _ed=_eb.featureLayer.id;this._userIds[_ed]=_eb.featureLayer.credential.userId;}else{if(_eb.layerInfos){var _ee=_eb.layerInfos;_e9.forEach(_ee,function(_ef){if(_ef.featureLayer){var _f0=_ef.featureLayer.id;if(_ef.featureLayer.credential){this._userIds[_f0]=_ef.featureLayer.credential.userId;}if(_ef.userId){this._userIds[_f0]=_ef.userId;}}},this);}}this._datePackage=this._getDatePackage(_eb);this._layerInfos=_eb.layerInfos||[{featureLayer:_eb.featureLayer,options:_eb.options||[]}];this._aiConnects=[];this._selection=[];this._toolTips=[];this._numFeatures=0;this._featureIdx=0;this._currentLInfo=null;this._currentFeature=null;this._hideNavButtons=_eb.hideNavButtons||false;},postCreate:function(){this._initLayerInfos();this._createAttachmentEditor();this.onFirstFeature();},destroy:function(){this._destroyAttributeTable();_e9.forEach(this._aiConnects,_e9.disconnect);delete this._aiConnects;if(this._attachmentEditor){this._attachmentEditor.destroy();delete this._attachmentEditor;}delete this._layerInfos;this._selection=this._currentFeature=this._currentLInfo=this._attributes=this._layerInfos=null;this.inherited(arguments);},refresh:function(){this._updateSelection();},first:function(){this.onFirstFeature();},last:function(){this.onLastFeature();},next:function(){this.onNextFeature();},previous:function(){this.onPreviousFeature();},showFeature:function(_f1,_f2){if(_f2){this._createOnlyFirstTime=true;}this._updateSelection([_f1],_f2);this._updateUI();},onLayerSelectionChange:function(_f3,_f4,_f5){this._createOnlyFirstTime=false;this._featureIdx=(_f5===esri.layers.FeatureLayer.SELECTION_NEW)?0:this._featureIdx;this._updateSelection();this._updateUI();},onLayerSelectionClear:function(){if(!this._selection||this._selection.length<=0){return;}this._numFeatures=0;this._featureIdx=0;this._selection=[];this._currentFeature=null;this._currentLInfo=null;this._updateUI();},onLayerEditsComplete:function(_f6,_f7,_f8,_f9){_f9=_f9||[];if(_f9.length){var _fa=this._selection;var _fb=_f6.featureLayer.objectIdField;_e9.forEach(_f9,_e9.hitch(this,function(del){_e9.some(_fa,_e9.hitch(this,function(_fc,idx){if(_fc.attributes[_fb]!==del.objectId){return false;}this._selection.splice(idx,1);return true;}));}));}_f7=_f7||[];if(_f7.length){this._selection=esri.dijit.editing.Util.LayerHelper.findFeatures(_f7,_f6.featureLayer);this._featureIdx=0;}var _fd=this._numFeatures=this._selection?this._selection.length:0;if(_f7.length){var _fe=_fd?this._selection[this._featureIdx]:null;if(_fe){var _ff=_fe.getLayer();var _100=_ff.getEditCapabilities();if(!(_100.canCreate&&!_100.canUpdate)){this._showFeature(_fe);}}}this._updateUI();},onFieldValueChange:function(_101,_102){_102=(typeof _102==="undefined")?null:_102;var _103=_101.field;if(_103.type==="esriFieldTypeDate"){_102=(_102&&_102.getTime)?_102.getTime():(_102&&_102.toGregorian?_102.toGregorian().getTime():_102);}if(this._currentFeature.attributes[_103.name]===_102){return;}var _104=this._currentLInfo;var _105=this._currentFeature;var _106=_103.name;if(_106===_104.typeIdField){var type=this._findFirst(_104.types,"id",_102);var _107=_104.fieldInfos;_e9.forEach(_107,function(_108){_103=_108.field;if(!_103||_103.name===_104.typeIdField){return;}var node=_108.dijit;var _109=this._setFieldDomain(node,type,_103);if(_109&&node){this._setValue(node,_105.attributes[_103.name]+"");if(node.isValid()===false){this._setValue(node,null);}}},this);}this.onAttributeChange(_105,_106,_102);},onDeleteBtn:function(evt){this._deleteFeature();},onNextFeature:function(evt){this._onNextFeature(1);},onPreviousFeature:function(evt){this._onNextFeature(-1);},onFirstFeature:function(evt){this._onNextFeature(this._featureIdx*-1);},onLastFeature:function(evt){this._onNextFeature((this._numFeatures-1)-this._featureIdx);},_initLayerInfos:function(){var _10a=this._layerInfos;this._editorTrackingInfos={};_e9.forEach(_10a,this._initLayerInfo,this);},_initLayerInfo:function(_10b){var _10c=_10b.featureLayer;this._connect(_10c,"onSelectionComplete",_e9.hitch(this,"onLayerSelectionChange",_10b));this._connect(_10c,"onSelectionClear",_e9.hitch(this,"onLayerSelectionClear",_10b));this._connect(_10c,"onEditsComplete",_e9.hitch(this,"onLayerEditsComplete",_10b));_10b.showAttachments=_10c.hasAttachments?(esri._isDefined(_10b.showAttachments)?_10b.showAttachments:true):false;_10b.hideFields=_10b.hideFields||[];_10b.htmlFields=_10b.htmlFields||[];_10b.isEditable=_10c.isEditable()?(esri._isDefined(_10b.isEditable)?_10b.isEditable:true):false;_10b.typeIdField=_10c.typeIdField;_10b.layerId=_10c.id;_10b.types=_10c.types;if(!_10b.showGlobalID&&_10c.globalIdField){_10b.hideFields.push(_10c.globalIdField);}if(!_10b.showObjectID){_10b.hideFields.push(_10c.objectIdField);}var _10d=this._getFields(_10b.featureLayer);if(!_10d){return;}var _10e=_10b.fieldInfos||[];_10e=_e9.map(_10e,function(_10f){return _e9.mixin({},_10f);});if(!_10e.length){_10d=_e9.filter(_10d,_e9.hitch(this,function(_110){return !this._isInFields(_110.name,_10b.hideFields);}));_10b.fieldInfos=_e9.map(_10d,_e9.hitch(this,function(_111){var _112=(this._isInFields(_111.name,_10b.htmlFields)?esri.dijit.AttributeInspector.STRING_FIELD_OPTION_RICHTEXT:esri.dijit.AttributeInspector.STRING_FIELD_OPTION_TEXTBOX);return {"fieldName":_111.name,"field":_111,"stringFieldOption":_112};}));}else{_10b.fieldInfos=_e9.filter(_e9.map(_10e,_e9.hitch(this,function(_113){var _114=_113.stringFieldOption||(this._isInFields(_113.fieldName,_10b.htmlFields)?esri.dijit.AttributeInspector.STRING_FIELD_OPTION_RICHTEXT:esri.dijit.AttributeInspector.STRING_FIELD_OPTION_TEXTBOX);return _e9.mixin(_113,{"field":this._findFirst(_10d,"name",_113.fieldName),"stringFieldOption":_114});})),"return item.field;");}var _115=[];if(_10c.editFieldsInfo){if(_10c.editFieldsInfo.creatorField){_115.push(_10c.editFieldsInfo.creatorField);}if(_10c.editFieldsInfo.creationDateField){_115.push(_10c.editFieldsInfo.creationDateField);}if(_10c.editFieldsInfo.editorField){_115.push(_10c.editFieldsInfo.editorField);}if(_10c.editFieldsInfo.editDateField){_115.push(_10c.editFieldsInfo.editDateField);}}this._editorTrackingInfos[_10c.id]=_115;},_createAttachmentEditor:function(){this._attachmentEditor=null;var _116=this._layerInfos;var _117=_e9.filter(_116,"return item.showAttachments");if(!_117||!_117.length){return;}this._attachmentEditor=new esri.dijit.editing.AttachmentEditor({"class":"atiAttachmentEditor"},this.attachmentEditor);this._attachmentEditor.startup();},_setCurrentLInfo:function(_118){var _119=this._currentLInfo?this._currentLInfo.featureLayer:null;var _11a=_118.featureLayer;if(_119&&_119.id===_11a.id&&!_119.ownershipBasedAccessControlForFeatures){var _11b=_11a.getEditCapabilities();if(!(_11b.canCreate&&!_11b.canUpdate)){return;}}this._currentLInfo=_118;this._createTable();},_updateSelection:function(_11c,_11d){this._selection=_11c||[];var _11e=this._layerInfos;_e9.forEach(_11e,this._getSelection,this);var _11f=this._numFeatures=this._selection.length;var _120=_11f?this._selection[this._featureIdx]:null;this._showFeature(_120,_11d);},_getSelection:function(_121){var _122=_121.featureLayer.getSelectedFeatures();this._selection=this._selection.concat(_122);},_updateUI:function(){var _123=this._numFeatures;var _124=this._currentLInfo;this.layerName.innerHTML=(!_124||_123===0)?this.NLS_noFeaturesSelected:(_124.featureLayer?_124.featureLayer.name:"");_e9.style(this.attributeTable,"display",_123?"":"none");_e9.style(this.editButtons,"display",_123?"":"none");_e9.style(this.navButtons,"display",(!this._hideNavButtons&&(_123>1)?"":"none"));this.navMessage.innerHTML=esri.substitute({idx:this._featureIdx+1,of:this.NLS_of,numFeatures:this._numFeatures},this._navMessage);if(this._attachmentEditor){_e9.style(this._attachmentEditor.domNode,"display",((_124&&_124.showAttachments)&&_123)?"":"none");}var _125=((_124&&_124.showDeleteButton===false)||!this._canDelete)?false:true;_e9.style(this.deleteBtn.domNode,"display",_125?"":"none");if(this.domNode.parentNode&&this.domNode.parentNode.scrollTop>0){this.domNode.parentNode.scrollTop=0;}},_onNextFeature:function(_126){this._featureIdx+=_126;if(this._featureIdx<0){this._featureIdx=this._numFeatures-1;}else{if(this._featureIdx>=this._numFeatures){this._featureIdx=0;}}var _127=this._selection.length?this._selection[this._featureIdx]:null;this._showFeature(_127);this._updateUI();this.onNext(_127);},_deleteFeature:function(){this.onDelete(this._currentFeature);},_showFeature:function(_128,_129){if(!_128){return;}this._currentFeature=_128;var _12a=_129?_129:_128.getLayer();var _12b=_12a.getEditCapabilities({feature:_128,userId:this._userIds[_12a.id]});this._canUpdate=_12b.canUpdate;this._canDelete=_12b.canDelete;var _12c=this._getLInfoFromFeatureLayer(_12a);if(!_12c){return;}this._setCurrentLInfo(_12c);var _12d=_128.attributes;var type=this._findFirst(_12c.types,"id",_12d[_12c.typeIdField]);var node,_12e=null;var _12f=_12c.fieldInfos;_e9.forEach(_12f,function(_130){_12e=_130.field;node=_130.dijit||null;if(!node){return;}var _131=this._setFieldDomain(node,type,_12e);var _132=_12d[_12e.name];_132=(_132&&_131&&_131.codedValues&&_131.codedValues.length)?(_131.codedValues[_132]?_131.codedValues[_132].name:_132):_132;if(!esri._isDefined(_132)){_132="";}if(node.declaredClass==="dijit.form.DateTextBox"){_132=(_132==="")?null:new Date(_132);}else{if(node.declaredClass==="dijit.form.FilteringSelect"){node._lastValueReported=null;_132=_12d[_12e.name]+"";}}try{this._setValue(node,_132);if(node.declaredClass==="dijit.form.FilteringSelect"&&node.isValid()===false){this._setValue(node,null);}}catch(error){node.set("displayedValue",this.NLS_errorInvalid,false);}},this);if(this._attachmentEditor&&_12c.showAttachments){this._attachmentEditor.showAttachments(this._currentFeature);}var _133=_12a.getEditSummary(_128);if(_133){this.editorTrackingInfoDiv.innerHTML=_133;esri.show(this.editorTrackingInfoDiv);}else{esri.hide(this.editorTrackingInfoDiv);}},_setFieldDomain:function(node,type,_134){if(!node){return null;}var _135=_134.domain;if(type&&type.domains){if(type.domains[_134.name]&&type.domains[_134.name] instanceof esri.layers.InheritedDomain===false){_135=type.domains[_134.name];}}if(!_135){return null;}if(_135.codedValues&&_135.codedValues.length>0){node.set("store",this._toStore(_e9.map(_135.codedValues,"return { id: item.code += '', name: item.name };")));this._setValue(node,_135.codedValues[0].code);}else{node.constraints={min:esri._isDefined(_135.minValue)?_135.minValue:Number.MIN_VALUE,max:esri._isDefined(_135.maxValue)?_135.maxValue:Number.MAX_VALUE};this._setValue(node,node.constraints.min);}return _135;},_setValue:function(node,_136){if(!node.set){return;}node._onChangeActive=false;node.set("value",_136,true);node._onChangeActive=true;},_getFields:function(_137){var _138=_137._getOutFields();if(!_138){return null;}var _139=_137.fields;return (_138=="*")?_139:_e9.filter(_e9.map(_138,_e9.hitch(this,"_findFirst",_139,"name")),esri._isDefined);},_isInFields:function(_13a,_13b){if(!_13a||!_13b&&!_13b.length){return false;}return _e9.some(_13b,function(name){return name.toLowerCase()===_13a.toLowerCase();});},_findFirst:function(_13c,_13d,_13e){var _13f=_e9.filter(_13c,function(item){return item.hasOwnProperty(_13d)&&item[_13d]===_13e;});return (_13f&&_13f.length)?_13f[0]:null;},_getLInfoFromFeatureLayer:function(_140){var _141=_140?_140.id:null;return this._findFirst(this._layerInfos,"layerId",_141);},_createTable:function(){this._destroyAttributeTable();this.attributeTable.innerHTML="";this._attributes=_e9.create("table",{cellspacing:"0",cellpadding:"0"},this.attributeTable);var _142=_e9.create("tbody",null,this._attributes);var _143=this._currentFeature;var _144=this._currentLInfo;var type=this._findFirst(_144.types,"id",_143.attributes[_144.typeIdField]);var _145=_144.fieldInfos;_e9.forEach(_145,_e9.hitch(this,"_createField",type,_142),this);this._createOnlyFirstTime=false;},_createField:function(type,_146,_147){var _148=this._currentLInfo;var _149=_147.field;if(this._isInFields(_149.name,_148.hideFields)){return;}if(this._isInFields(_149.name,this._editorTrackingInfos[_148.featureLayer.id])){return;}var node=_e9.create("tr",null,_146);var td=_e9.create("td",{innerHTML:_147.label||_149.alias||_149.name,"class":"atiLabel"},node);td=_e9.create("td",null,node);var _14a=null;var _14b=false;if(_147.customField){_e9.place(_147.customField.domNode||_147.customField,_e9.create("div",null,td),"first");_14a=_147.customField;}else{if(_148.isEditable===false||_149.editable===false||_147.isEditable===false||_149.type==="esriFieldTypeOID"||_149.type==="esriFieldTypeGlobalID"||(!this._canUpdate&&!this._createOnlyFirstTime)){_14b=true;}}if(!_14a&&(_148.typeIdField&&_149.name.toLowerCase()==_148.typeIdField.toLowerCase())){_14a=this._createTypeField(_149,_147,td);}else{if(!_14a){_14a=this._createDomainField(_149,_147,type,td);}}if(!_14a){switch(_149.type){case "esriFieldTypeString":_14a=this._createStringField(_149,_147,td);break;case "esriFieldTypeDate":_14a=this._createDateField(_149,_147,td);break;case "esriFieldTypeInteger":case "esriFieldTypeSmallInteger":_14a=this._createIntField(_149,_147,td);break;case "esriFieldTypeSingle":case "esriFieldTypeDouble":_14a=this._createFltField(_149,_147,td);break;default:_14a=this._createStringField(_149,_147,td);break;}}if(_147.tooltip&&_147.tooltip.length){this._toolTips.push(new _e8.Tooltip({connectId:[_14a.id],label:_147.tooltip}));}_14a.onChange=_e9.hitch(this,"onFieldValueChange",_147);_14a.set("disabled",_14b);_147.dijit=_14a;},_createTypeField:function(_14c,_14d,node){return new _e8.form.FilteringSelect({"class":"atiField",name:_14c.alias||_14c.name,store:this._toStore(_e9.map(this._currentLInfo.types,"return { id: item.id, name: item.name };")),searchAttr:"name"},_e9.create("div",null,node));},_createDomainField:function(_14e,_14f,type,node){var _150=_14e.domain;if(type&&type.domains){if(type.domains[_14e.name]&&type.domains[_14e.name] instanceof esri.layers.InheritedDomain===false){_150=type.domains[_14e.name];}}if(!_150){return null;}if(_150.codedValues){return new _e8.form.FilteringSelect({"class":"atiField",name:_14e.alias||_14e.name,searchAttr:"name",required:_14e.nullable||false},_e9.create("div",null,node));}else{return new _e8.form.NumberSpinner({"class":"atiField"},_e9.create("div",null,node));}},_createStringField:function(_151,_152,node){var _153={"class":"atiField",trim:true,maxLength:_151.length};if(_152.stringFieldOption===esri.dijit.AttributeInspector.STRING_FIELD_OPTION_TEXTAREA){_153["class"]+=" atiTextAreaField";return new _e8.form.SimpleTextarea(_153,_e9.create("div",null,node));}else{if(_152.stringFieldOption===esri.dijit.AttributeInspector.STRING_FIELD_OPTION_RICHTEXT){_153["class"]+=" atiRichTextField";_153.height="100%";_153.width="100%";_153.plugins=_152.richTextPlugins||["bold","italic","underline","foreColor","hiliteColor","|","justifyLeft","justifyCenter","justifyRight","justifyFull","|","insertOrderedList","insertUnorderedList","indent","outdent","|","createLink"];return new _e8.Editor(_153,_e9.create("div",null,node));}else{return new _e8.form.TextBox(_153,_e9.create("div",null,node));}}},_createDateField:function(_154,_155,node){var _156={"class":"atiField","trim":true};if(this._datePackage){_156.datePackage=this._datePackage;}return new _e8.form.DateTextBox(_156,_e9.create("div",null,node));},_createIntField:function(_157,_158,node){return new _e8.form.NumberTextBox({"class":"atiField",constraints:{places:0},invalidMessage:this.NLS_validationInt,trim:true},_e9.create("div",null,node));},_createFltField:function(_159,_15a,node){return new _e8.form.NumberTextBox({"class":"atiField",trim:true,invalidMessage:this.NLS_validationFlt},_e9.create("div",null,node));},_toStore:function(_15b){return new _e9.data.ItemFileReadStore({data:{identifier:"id",label:"name",items:_15b}});},_connect:function(node,evt,func){this._aiConnects.push(_e9.connect(node,evt,func));},_getDatePackage:function(_15c){if(_15c.datePackage===null){return null;}else{if(_15c.datePackage){return _15c.datePackage;}else{if(_e9.locale==="ar"){return "dojox.date.islamic";}}}return null;},_destroyAttributeTable:function(){var _15d=this._layerInfos;_e9.forEach(_15d,function(_15e){var _15f=_15e.fieldInfos;_e9.forEach(_15f,function(_160){var _161=_160.dijit;if(_161){_161._onChangeHandle=null;if(_160.customField){return;}if(_161.destroyRecursive){_161.destroyRecursive();}else{if(_161.destroy){_161.destroy();}}}_160.dijit=null;},this);},this);var _162=this._toolTips;_e9.forEach(_162,"item.destroy(); delete item;");this._toolTips=[];if(this._attributes){_e9.destroy(this._attributes);}}});_e9.mixin(esri.dijit.AttributeInspector,{STRING_FIELD_OPTION_RICHTEXT:"richtext",STRING_FIELD_OPTION_TEXTAREA:"textarea",STRING_FIELD_OPTION_TEXTBOX:"textbox"});});},"dijit/form/_ListMouseMixin":function(){define("dijit/form/_ListMouseMixin",["dojo/_base/declare","dojo/mouse","dojo/on","dojo/touch","./_ListBase"],function(_163,_164,on,_165,_166){return _163("dijit.form._ListMouseMixin",_166,{postCreate:function(){this.inherited(arguments);this.own(on(this.domNode,_165.press,function(evt){evt.preventDefault();}));this._listConnect(_165.press,"_onMouseDown");this._listConnect(_165.release,"_onMouseUp");this._listConnect(_164.enter,"_onMouseOver");this._listConnect(_164.leave,"_onMouseOut");},_onMouseDown:function(evt,_167){if(this._hoveredNode){this.onUnhover(this._hoveredNode);this._hoveredNode=null;}this._isDragging=true;this._setSelectedAttr(_167);},_onMouseUp:function(evt,_168){this._isDragging=false;var _169=this.selected;var _16a=this._hoveredNode;if(_169&&_168==_169){this.onClick(_169);}else{if(_16a&&_168==_16a){this._setSelectedAttr(_16a);this.onClick(_16a);}}},_onMouseOut:function(evt,_16b){if(this._hoveredNode){this.onUnhover(this._hoveredNode);this._hoveredNode=null;}if(this._isDragging){this._cancelDrag=(new Date()).getTime()+1000;}},_onMouseOver:function(evt,_16c){if(this._cancelDrag){var time=(new Date()).getTime();if(time>this._cancelDrag){this._isDragging=false;}this._cancelDrag=null;}this._hoveredNode=_16c;this.onHover(_16c);if(this._isDragging){this._setSelectedAttr(_16c);}}});});},"url:dijit/form/templates/DropDownBox.html":"<div class=\"dijit dijitReset dijitInline dijitLeft\"\n\tid=\"widget_${id}\"\n\trole=\"combobox\"\n\t><div class='dijitReset dijitRight dijitButtonNode dijitArrowButton dijitDownArrowButton dijitArrowButtonContainer'\n\t\tdata-dojo-attach-point=\"_buttonNode, _popupStateNode\" role=\"presentation\"\n\t\t><input class=\"dijitReset dijitInputField dijitArrowButtonInner\" value=\"&#9660; \" type=\"text\" tabIndex=\"-1\" readonly=\"readonly\" role=\"presentation\"\n\t\t\t${_buttonInputDisabled}\n\t/></div\n\t><div class='dijitReset dijitValidationContainer'\n\t\t><input class=\"dijitReset dijitInputField dijitValidationIcon dijitValidationInner\" value=\"&#935; \" type=\"text\" tabIndex=\"-1\" readonly=\"readonly\" role=\"presentation\"\n\t/></div\n\t><div class=\"dijitReset dijitInputField dijitInputContainer\"\n\t\t><input class='dijitReset dijitInputInner' ${!nameAttrSetting} type=\"text\" autocomplete=\"off\"\n\t\t\tdata-dojo-attach-point=\"textbox,focusNode\" role=\"textbox\" aria-haspopup=\"true\"\n\t/></div\n></div>\n","dijit/form/NumberTextBox":function(){define("dijit/form/NumberTextBox",["dojo/_base/declare","dojo/_base/lang","dojo/number","./RangeBoundTextBox"],function(_16d,lang,_16e,_16f){var _170=_16d("dijit.form.NumberTextBoxMixin",null,{pattern:_16e.regexp,value:NaN,editOptions:{pattern:"#.######"},_formatter:_16e.format,postMixInProperties:function(){this.inherited(arguments);this._set("type","text");},_setConstraintsAttr:function(_171){var _172=typeof _171.places=="number"?_171.places:0;if(_172){_172++;}if(typeof _171.max!="number"){_171.max=9*Math.pow(10,15-_172);}if(typeof _171.min!="number"){_171.min=-9*Math.pow(10,15-_172);}this.inherited(arguments,[_171]);if(this.focusNode&&this.focusNode.value&&!isNaN(this.value)){this.set("value",this.value);}},_onFocus:function(){if(this.disabled){return;}var val=this.get("value");if(typeof val=="number"&&!isNaN(val)){var _173=this.format(val,this.constraints);if(_173!==undefined){this.textbox.value=_173;}}this.inherited(arguments);},format:function(_174,_175){var _176=String(_174);if(typeof _174!="number"){return _176;}if(isNaN(_174)){return "";}if(!("rangeCheck" in this&&this.rangeCheck(_174,_175))&&_175.exponent!==false&&/\de[-+]?\d/i.test(_176)){return _176;}if(this.editOptions&&this.focused){_175=lang.mixin({},_175,this.editOptions);}return this._formatter(_174,_175);},_parser:_16e.parse,parse:function(_177,_178){var v=this._parser(_177,lang.mixin({},_178,(this.editOptions&&this.focused)?this.editOptions:{}));if(this.editOptions&&this.focused&&isNaN(v)){v=this._parser(_177,_178);}return v;},_getDisplayedValueAttr:function(){var v=this.inherited(arguments);return isNaN(v)?this.textbox.value:v;},filter:function(_179){return (_179==null||_179==="")?NaN:this.inherited(arguments);},serialize:function(_17a,_17b){return (typeof _17a!="number"||isNaN(_17a))?"":this.inherited(arguments);},_setBlurValue:function(){var val=lang.hitch(lang.mixin({},this,{focused:true}),"get")("value");this._setValueAttr(val,true);},_setValueAttr:function(_17c,_17d,_17e){if(_17c!==undefined&&_17e===undefined){_17e=String(_17c);if(typeof _17c=="number"){if(isNaN(_17c)){_17e="";}else{if(("rangeCheck" in this&&this.rangeCheck(_17c,this.constraints))||this.constraints.exponent===false||!/\de[-+]?\d/i.test(_17e)){_17e=undefined;}}}else{if(!_17c){_17e="";_17c=NaN;}else{_17c=undefined;}}}this.inherited(arguments,[_17c,_17d,_17e]);},_getValueAttr:function(){var v=this.inherited(arguments);if(isNaN(v)&&this.textbox.value!==""){if(this.constraints.exponent!==false&&/\de[-+]?\d/i.test(this.textbox.value)&&(new RegExp("^"+_16e._realNumberRegexp(lang.mixin({},this.constraints))+"$").test(this.textbox.value))){var n=Number(this.textbox.value);return isNaN(n)?undefined:n;}else{return undefined;}}else{return v;}},isValid:function(_17f){if(!this.focused||this._isEmpty(this.textbox.value)){return this.inherited(arguments);}else{var v=this.get("value");if(!isNaN(v)&&this.rangeCheck(v,this.constraints)){if(this.constraints.exponent!==false&&/\de[-+]?\d/i.test(this.textbox.value)){return true;}else{return this.inherited(arguments);}}else{return false;}}}});var _180=_16d("dijit.form.NumberTextBox",[_16f,_170],{baseClass:"dijitTextBox dijitNumberTextBox"});_180.Mixin=_170;return _180;});},"esri/dijit/editing/Util":function(){define("esri/dijit/editing/Util",["dijit","dojo","dojox","dojo/require!dojo/DeferredList"],function(_181,dojo,_182){dojo.provide("esri.dijit.editing.Util");dojo.require("dojo.DeferredList");esri.dijit.editing.Util.LayerHelper={findFeatures:function(ids,_183,_184){var _185=_183.objectIdField;var _186=_183.graphics;var _187=dojo.filter(_186,function(_188){return dojo.some(ids,function(id){return _188.attributes[_185]===id.objectId;});});if(_184){_184(_187);}else{return _187;}},getSelection:function(_189){var _18a=[];dojo.forEach(_189,function(_18b){var _18c=_18b.getSelectedFeatures();dojo.forEach(_18c,function(_18d){_18a.push(_18d);});});return _18a;}};});},"dojox/date/islamic/locale":function(){define("dojox/date/islamic/locale",["../..","dojo/_base/lang","dojo/_base/array","dojo/date","dojo/i18n","dojo/regexp","dojo/string","./Date","dojo/i18n!dojo/cldr/nls/islamic"],function(_18e,lang,arr,dd,i18n,_18f,_190,_191,_192){var _193=lang.getObject("date.islamic.locale",true,_18e);function _194(_195,_196,_197,_198,_199){return _199.replace(/([a-z])\1*/ig,function(_19a){var s,pad;var c=_19a.charAt(0);var l=_19a.length;var _19b=["abbr","wide","narrow"];switch(c){case "G":s=_196["eraAbbr"][0];break;case "y":s=String(_195.getFullYear());break;case "M":var m=_195.getMonth();if(l<3){s=m+1;pad=true;}else{var _19c=["months","format",_19b[l-3]].join("-");s=_196[_19c][m];}break;case "d":s=_195.getDate(true);pad=true;break;case "E":var d=_195.getDay();if(l<3){s=d+1;pad=true;}else{var _19d=["days","format",_19b[l-3]].join("-");s=_196[_19d][d];}break;case "a":var _19e=(_195.getHours()<12)?"am":"pm";s=_196["dayPeriods-format-wide-"+_19e];break;case "h":case "H":case "K":case "k":var h=_195.getHours();switch(c){case "h":s=(h%12)||12;break;case "H":s=h;break;case "K":s=(h%12);break;case "k":s=h||24;break;}pad=true;break;case "m":s=_195.getMinutes();pad=true;break;case "s":s=_195.getSeconds();pad=true;break;case "S":s=Math.round(_195.getMilliseconds()*Math.pow(10,l-3));pad=true;break;case "z":s=dd.getTimezoneName(_195.toGregorian());if(s){break;}l=4;case "Z":var _19f=_195.toGregorian().getTimezoneOffset();var tz=[(_19f<=0?"+":"-"),_190.pad(Math.floor(Math.abs(_19f)/60),2),_190.pad(Math.abs(_19f)%60,2)];if(l==4){tz.splice(0,0,"GMT");tz.splice(3,0,":");}s=tz.join("");break;default:throw new Error("dojox.date.islamic.locale.formatPattern: invalid pattern char: "+_199);}if(pad){s=_190.pad(s,l);}return s;});};_193.format=function(_1a0,_1a1){_1a1=_1a1||{};var _1a2=i18n.normalizeLocale(_1a1.locale);var _1a3=_1a1.formatLength||"short";var _1a4=_193._getIslamicBundle(_1a2);var str=[];var _1a5=lang.hitch(this,_194,_1a0,_1a4,_1a2,_1a1.fullYear);if(_1a1.selector=="year"){var year=_1a0.getFullYear();return year;}if(_1a1.selector!="time"){var _1a6=_1a1.datePattern||_1a4["dateFormat-"+_1a3];if(_1a6){str.push(_1a7(_1a6,_1a5));}}if(_1a1.selector!="date"){var _1a8=_1a1.timePattern||_1a4["timeFormat-"+_1a3];if(_1a8){str.push(_1a7(_1a8,_1a5));}}var _1a9=str.join(" ");return _1a9;};_193.regexp=function(_1aa){return _193._parseInfo(_1aa).regexp;};_193._parseInfo=function(_1ab){_1ab=_1ab||{};var _1ac=i18n.normalizeLocale(_1ab.locale);var _1ad=_193._getIslamicBundle(_1ac);var _1ae=_1ab.formatLength||"short";var _1af=_1ab.datePattern||_1ad["dateFormat-"+_1ae];var _1b0=_1ab.timePattern||_1ad["timeFormat-"+_1ae];var _1b1;if(_1ab.selector=="date"){_1b1=_1af;}else{if(_1ab.selector=="time"){_1b1=_1b0;}else{_1b1=(typeof (_1b0)=="undefined")?_1af:_1af+" "+_1b0;}}var _1b2=[];var re=_1a7(_1b1,lang.hitch(this,_1b3,_1b2,_1ad,_1ab));return {regexp:re,tokens:_1b2,bundle:_1ad};};_193.parse=function(_1b4,_1b5){_1b4=_1b4.replace(/[\u200E\u200F\u202A\u202E]/g,"");if(!_1b5){_1b5={};}var info=_193._parseInfo(_1b5);var _1b6=info.tokens,_192=info.bundle;var _1b7=info.regexp.replace(/[\u200E\u200F\u202A\u202E]/g,"");var re=new RegExp("^"+_1b7+"$");var _1b8=re.exec(_1b4);var _1b9=i18n.normalizeLocale(_1b5.locale);if(!_1b8){return null;}var date,_1ba;var _1bb=[1389,0,1,0,0,0,0];var amPm="";var _1bc=0;var _1bd=["abbr","wide","narrow"];var _1be=arr.every(_1b8,function(v,i){if(!i){return true;}var _1bf=_1b6[i-1];var l=_1bf.length;switch(_1bf.charAt(0)){case "y":_1bb[0]=Number(v);break;case "M":if(l>2){var _1c0=_192["months-format-"+_1bd[l-3]].concat();if(!_1b5.strict){v=v.replace(".","").toLowerCase();_1c0=arr.map(_1c0,function(s){return s?s.replace(".","").toLowerCase():s;});}v=arr.indexOf(_1c0,v);if(v==-1){return false;}_1bc=l;}else{v--;}_1bb[1]=Number(v);break;case "D":_1bb[1]=0;case "d":_1bb[2]=Number(v);break;case "a":var am=_1b5.am||_192["dayPeriods-format-wide-am"],pm=_1b5.pm||_192["dayPeriods-format-wide-pm"];if(!_1b5.strict){var _1c1=/\./g;v=v.replace(_1c1,"").toLowerCase();am=am.replace(_1c1,"").toLowerCase();pm=pm.replace(_1c1,"").toLowerCase();}if(_1b5.strict&&v!=am&&v!=pm){return false;}amPm=(v==pm)?"p":(v==am)?"a":"";break;case "K":if(v==24){v=0;}case "h":case "H":case "k":_1bb[3]=Number(v);break;case "m":_1bb[4]=Number(v);break;case "s":_1bb[5]=Number(v);break;case "S":_1bb[6]=Number(v);}return true;});var _1c2=+_1bb[3];if(amPm==="p"&&_1c2<12){_1bb[3]=_1c2+12;}else{if(amPm==="a"&&_1c2==12){_1bb[3]=0;}}var _1c3=new _191(_1bb[0],_1bb[1],_1bb[2],_1bb[3],_1bb[4],_1bb[5],_1bb[6]);return _1c3;};function _1a7(_1c4,_1c5,_1c6,_1c7){var _1c8=function(x){return x;};_1c5=_1c5||_1c8;_1c6=_1c6||_1c8;_1c7=_1c7||_1c8;var _1c9=_1c4.match(/(''|[^'])+/g);var _1ca=_1c4.charAt(0)=="'";arr.forEach(_1c9,function(_1cb,i){if(!_1cb){_1c9[i]="";}else{_1c9[i]=(_1ca?_1c6:_1c5)(_1cb);_1ca=!_1ca;}});return _1c7(_1c9.join(""));};function _1b3(_1cc,_1cd,_1ce,_1cf){_1cf=_18f.escapeString(_1cf);var _1d0=i18n.normalizeLocale(_1ce.locale);return _1cf.replace(/([a-z])\1*/ig,function(_1d1){var s;var c=_1d1.charAt(0);var l=_1d1.length;var p2="",p3="";if(_1ce.strict){if(l>1){p2="0"+"{"+(l-1)+"}";}if(l>2){p3="0"+"{"+(l-2)+"}";}}else{p2="0?";p3="0{0,2}";}switch(c){case "y":s="\\d+";break;case "M":s=(l>2)?"\\S+ ?\\S+":p2+"[1-9]|1[0-2]";break;case "d":s="[12]\\d|"+p2+"[1-9]|3[01]";break;case "E":s="\\S+";break;case "h":s=p2+"[1-9]|1[0-2]";break;case "k":s=p2+"\\d|1[01]";break;case "H":s=p2+"\\d|1\\d|2[0-3]";break;case "K":s=p2+"[1-9]|1\\d|2[0-4]";break;case "m":case "s":s=p2+"\\d|[0-5]\\d";break;case "S":s="\\d{"+l+"}";break;case "a":var am=_1ce.am||_1cd["dayPeriods-format-wide-am"],pm=_1ce.pm||_1cd["dayPeriods-format-wide-pm"];if(_1ce.strict){s=am+"|"+pm;}else{s=am+"|"+pm;if(am!=am.toLowerCase()){s+="|"+am.toLowerCase();}if(pm!=pm.toLowerCase()){s+="|"+pm.toLowerCase();}}break;default:s=".*";}if(_1cc){_1cc.push(_1d1);}return "("+s+")";}).replace(/[\xa0 ]/g,"[\\s\\xa0]");};var _1d2=[];_193.addCustomFormats=function(_1d3,_1d4){_1d2.push({pkg:_1d3,name:_1d4});};_193._getIslamicBundle=function(_1d5){var _1d6={};arr.forEach(_1d2,function(desc){var _1d7=i18n.getLocalization(desc.pkg,desc.name,_1d5);_1d6=lang.mixin(_1d6,_1d7);},this);return _1d6;};_193.addCustomFormats("dojo.cldr","islamic");_193.getNames=function(item,type,_1d8,_1d9,date){var _1da;var _1db=_193._getIslamicBundle(_1d9);var _1dc=[item,_1d8,type];if(_1d8=="standAlone"){var key=_1dc.join("-");_1da=_1db[key];if(_1da[0]==1){_1da=undefined;}}_1dc[1]="format";return (_1da||_1db[_1dc.join("-")]).concat();};_193.weekDays=_193.getNames("days","wide","format");_193.months=_193.getNames("months","wide","format");return _193;});},"dijit/form/RangeBoundTextBox":function(){define("dijit/form/RangeBoundTextBox",["dojo/_base/declare","dojo/i18n","./MappedTextBox"],function(_1dd,i18n,_1de){var _1df=_1dd("dijit.form.RangeBoundTextBox",_1de,{rangeMessage:"",rangeCheck:function(_1e0,_1e1){return ("min" in _1e1?(this.compare(_1e0,_1e1.min)>=0):true)&&("max" in _1e1?(this.compare(_1e0,_1e1.max)<=0):true);},isInRange:function(){return this.rangeCheck(this.get("value"),this.constraints);},_isDefinitelyOutOfRange:function(){var val=this.get("value");if(val==null){return false;}var _1e2=false;if("min" in this.constraints){var min=this.constraints.min;_1e2=this.compare(val,((typeof min=="number")&&min>=0&&val!=0)?0:min)<0;}if(!_1e2&&("max" in this.constraints)){var max=this.constraints.max;_1e2=this.compare(val,((typeof max!="number")||max>0)?max:0)>0;}return _1e2;},_isValidSubset:function(){return this.inherited(arguments)&&!this._isDefinitelyOutOfRange();},isValid:function(_1e3){return this.inherited(arguments)&&((this._isEmpty(this.textbox.value)&&!this.required)||this.isInRange(_1e3));},getErrorMessage:function(_1e4){var v=this.get("value");if(v!=null&&v!==""&&(typeof v!="number"||!isNaN(v))&&!this.isInRange(_1e4)){return this.rangeMessage;}return this.inherited(arguments);},postMixInProperties:function(){this.inherited(arguments);if(!this.rangeMessage){this.messages=i18n.getLocalization("dijit.form","validate",this.lang);this.rangeMessage=this.messages.rangeMessage;}},_setConstraintsAttr:function(_1e5){this.inherited(arguments);if(this.focusNode){if(this.constraints.min!==undefined){this.focusNode.setAttribute("aria-valuemin",this.constraints.min);}else{this.focusNode.removeAttribute("aria-valuemin");}if(this.constraints.max!==undefined){this.focusNode.setAttribute("aria-valuemax",this.constraints.max);}else{this.focusNode.removeAttribute("aria-valuemax");}}},_setValueAttr:function(_1e6,_1e7){this.focusNode.setAttribute("aria-valuenow",_1e6);this.inherited(arguments);},applyTextDir:function(){}});return _1df;});},"dijit/_editor/RichText":function(){define("dijit/_editor/RichText",["dojo/_base/array","dojo/_base/config","dojo/_base/declare","dojo/_base/Deferred","dojo/dom","dojo/dom-attr","dojo/dom-class","dojo/dom-construct","dojo/dom-geometry","dojo/dom-style","dojo/_base/event","dojo/_base/kernel","dojo/keys","dojo/_base/lang","dojo/on","dojo/query","dojo/ready","dojo/sniff","dojo/topic","dojo/_base/unload","dojo/_base/url","dojo/_base/window","../_Widget","../_CssStateMixin","./selection","./range","./html","../focus","../main"],function(_1e8,_1e9,_1ea,_1eb,dom,_1ec,_1ed,_1ee,_1ef,_1f0,_1f1,_1f2,keys,lang,on,_1f3,_1f4,has,_1f5,_1f6,_1f7,win,_1f8,_1f9,_1fa,_1fb,_1fc,_1fd,_1fe){var _1ff=_1ea("dijit._editor.RichText",[_1f8,_1f9],{constructor:function(_200){this.contentPreFilters=[];this.contentPostFilters=[];this.contentDomPreFilters=[];this.contentDomPostFilters=[];this.editingAreaStyleSheets=[];this.events=[].concat(this.events);this._keyHandlers={};if(_200&&lang.isString(_200.value)){this.value=_200.value;}this.onLoadDeferred=new _1eb();},baseClass:"dijitEditor",inheritWidth:false,focusOnLoad:false,name:"",styleSheets:"",height:"300px",minHeight:"1em",isClosed:true,isLoaded:false,_SEPARATOR:"@@**%%__RICHTEXTBOUNDRY__%%**@@",_NAME_CONTENT_SEP:"@@**%%:%%**@@",onLoadDeferred:null,isTabIndent:false,disableSpellCheck:false,postCreate:function(){if("textarea"===this.domNode.tagName.toLowerCase()){console.warn("RichText should not be used with the TEXTAREA tag.  See dijit._editor.RichText docs.");}this.contentPreFilters=[lang.hitch(this,"_preFixUrlAttributes")].concat(this.contentPreFilters);if(has("mozilla")){this.contentPreFilters=[this._normalizeFontStyle].concat(this.contentPreFilters);this.contentPostFilters=[this._removeMozBogus].concat(this.contentPostFilters);}if(has("webkit")){this.contentPreFilters=[this._removeWebkitBogus].concat(this.contentPreFilters);this.contentPostFilters=[this._removeWebkitBogus].concat(this.contentPostFilters);}if(has("ie")){this.contentPostFilters=[this._normalizeFontStyle].concat(this.contentPostFilters);this.contentDomPostFilters=[lang.hitch(this,this._stripBreakerNodes)].concat(this.contentDomPostFilters);}this.inherited(arguments);_1f5.publish(_1fe._scopeName+"._editor.RichText::init",this);this.open();this.setupDefaultShortcuts();},setupDefaultShortcuts:function(){var exec=lang.hitch(this,function(cmd,arg){return function(){return !this.execCommand(cmd,arg);};});var _201={b:exec("bold"),i:exec("italic"),u:exec("underline"),a:exec("selectall"),s:function(){this.save(true);},m:function(){this.isTabIndent=!this.isTabIndent;},"1":exec("formatblock","h1"),"2":exec("formatblock","h2"),"3":exec("formatblock","h3"),"4":exec("formatblock","h4"),"\\":exec("insertunorderedlist")};if(!has("ie")){_201.Z=exec("redo");}var key;for(key in _201){this.addKeyHandler(key,true,false,_201[key]);}},events:["onKeyPress","onKeyDown","onKeyUp"],captureEvents:[],_editorCommandsLocalized:false,_localizeEditorCommands:function(){if(_1ff._editorCommandsLocalized){this._local2NativeFormatNames=_1ff._local2NativeFormatNames;this._native2LocalFormatNames=_1ff._native2LocalFormatNames;return;}_1ff._editorCommandsLocalized=true;_1ff._local2NativeFormatNames={};_1ff._native2LocalFormatNames={};this._local2NativeFormatNames=_1ff._local2NativeFormatNames;this._native2LocalFormatNames=_1ff._native2LocalFormatNames;var _202=["div","p","pre","h1","h2","h3","h4","h5","h6","ol","ul","address"];var _203="",_204,i=0;while((_204=_202[i++])){if(_204.charAt(1)!=="l"){_203+="<"+_204+"><span>content</span></"+_204+"><br/>";}else{_203+="<"+_204+"><li>content</li></"+_204+"><br/>";}}var _205={position:"absolute",top:"0px",zIndex:10,opacity:0.01};var div=_1ee.create("div",{style:_205,innerHTML:_203});this.ownerDocumentBody.appendChild(div);var _206=lang.hitch(this,function(){var node=div.firstChild;while(node){try{this._sCall("selectElement",[node.firstChild]);var _207=node.tagName.toLowerCase();this._local2NativeFormatNames[_207]=document.queryCommandValue("formatblock");this._native2LocalFormatNames[this._local2NativeFormatNames[_207]]=_207;node=node.nextSibling.nextSibling;}catch(e){}}_1ee.destroy(div);});this.defer(_206);},open:function(_208){if(!this.onLoadDeferred||this.onLoadDeferred.fired>=0){this.onLoadDeferred=new _1eb();}if(!this.isClosed){this.close();}_1f5.publish(_1fe._scopeName+"._editor.RichText::open",this);if(arguments.length===1&&_208.nodeName){this.domNode=_208;}var dn=this.domNode;var html;if(lang.isString(this.value)){html=this.value;delete this.value;dn.innerHTML="";}else{if(dn.nodeName&&dn.nodeName.toLowerCase()=="textarea"){var ta=(this.textarea=dn);this.name=ta.name;html=ta.value;dn=this.domNode=this.ownerDocument.createElement("div");dn.setAttribute("widgetId",this.id);ta.removeAttribute("widgetId");dn.cssText=ta.cssText;dn.className+=" "+ta.className;_1ee.place(dn,ta,"before");var _209=lang.hitch(this,function(){_1f0.set(ta,{display:"block",position:"absolute",top:"-1000px"});if(has("ie")){var s=ta.style;this.__overflow=s.overflow;s.overflow="hidden";}});if(has("ie")){this.defer(_209,10);}else{_209();}if(ta.form){var _20a=ta.value;this.reset=function(){var _20b=this.getValue();if(_20b!==_20a){this.replaceValue(_20a);}};on(ta.form,"submit",lang.hitch(this,function(){_1ec.set(ta,"disabled",this.disabled);ta.value=this.getValue();}));}}else{html=_1fc.getChildrenHtml(dn);dn.innerHTML="";}}this.value=html;if(dn.nodeName&&dn.nodeName==="LI"){dn.innerHTML=" <br>";}this.header=dn.ownerDocument.createElement("div");dn.appendChild(this.header);this.editingArea=dn.ownerDocument.createElement("div");dn.appendChild(this.editingArea);this.footer=dn.ownerDocument.createElement("div");dn.appendChild(this.footer);if(!this.name){this.name=this.id+"_AUTOGEN";}if(this.name!==""&&(!_1e9["useXDomain"]||_1e9["allowXdRichTextSave"])){var _20c=dom.byId(_1fe._scopeName+"._editor.RichText.value");if(_20c&&_20c.value!==""){var _20d=_20c.value.split(this._SEPARATOR),i=0,dat;while((dat=_20d[i++])){var data=dat.split(this._NAME_CONTENT_SEP);if(data[0]===this.name){html=data[1];_20d=_20d.splice(i,1);_20c.value=_20d.join(this._SEPARATOR);break;}}}if(!_1ff._globalSaveHandler){_1ff._globalSaveHandler={};_1f6.addOnUnload(function(){var id;for(id in _1ff._globalSaveHandler){var f=_1ff._globalSaveHandler[id];if(lang.isFunction(f)){f();}}});}_1ff._globalSaveHandler[this.id]=lang.hitch(this,"_saveContent");}this.isClosed=false;var ifr=(this.editorObject=this.iframe=this.ownerDocument.createElement("iframe"));ifr.id=this.id+"_iframe";ifr.style.border="none";ifr.style.width="100%";if(this._layoutMode){ifr.style.height="100%";}else{if(has("ie")>=7){if(this.height){ifr.style.height=this.height;}if(this.minHeight){ifr.style.minHeight=this.minHeight;}}else{ifr.style.height=this.height?this.height:this.minHeight;}}ifr.frameBorder=0;ifr._loadFunc=lang.hitch(this,function(w){this.window=w;this.document=this.window.document;if(has("ie")){this._localizeEditorCommands();}this.onLoad(html);});var src=this._getIframeDocTxt(),s="javascript: '"+src.replace(/\\/g,"\\\\").replace(/'/g,"\\'")+"'";ifr.setAttribute("src",s);this.editingArea.appendChild(ifr);if(has("safari")<=4){src=ifr.getAttribute("src");if(!src||src.indexOf("javascript")===-1){this.defer(function(){ifr.setAttribute("src",s);});}}if(dn.nodeName==="LI"){dn.lastChild.style.marginTop="-1.2em";}_1ed.add(this.domNode,this.baseClass);},_local2NativeFormatNames:{},_native2LocalFormatNames:{},_getIframeDocTxt:function(){var _20e=_1f0.getComputedStyle(this.domNode);var html="";var _20f=true;if(has("ie")||has("webkit")||(!this.height&&!has("mozilla"))){html="<div id='dijitEditorBody'></div>";_20f=false;}else{if(has("mozilla")){this._cursorToStart=true;html="&#160;";}}var font=[_20e.fontWeight,_20e.fontSize,_20e.fontFamily].join(" ");var _210=_20e.lineHeight;if(_210.indexOf("px")>=0){_210=parseFloat(_210)/parseFloat(_20e.fontSize);}else{if(_210.indexOf("em")>=0){_210=parseFloat(_210);}else{_210="normal";}}var _211="";var self=this;this.style.replace(/(^|;)\s*(line-|font-?)[^;]+/ig,function(_212){_212=_212.replace(/^;/ig,"")+";";var s=_212.split(":")[0];if(s){s=lang.trim(s);s=s.toLowerCase();var i;var sC="";for(i=0;i<s.length;i++){var c=s.charAt(i);switch(c){case "-":i++;c=s.charAt(i).toUpperCase();default:sC+=c;}}_1f0.set(self.domNode,sC,"");}_211+=_212+";";});var _213=_1f3("label[for=\""+this.id+"\"]");return [this.isLeftToRight()?"<html>\n<head>\n":"<html dir='rtl'>\n<head>\n",(has("mozilla")&&_213.length?"<title>"+_213[0].innerHTML+"</title>\n":""),"<meta http-equiv='Content-Type' content='text/html'>\n","<style>\n","\tbody,html {\n","\t\tbackground:transparent;\n","\t\tpadding: 1px 0 0 0;\n","\t\tmargin: -1px 0 0 0;\n",((has("webkit"))?"\t\twidth: 100%;\n":""),((has("webkit"))?"\t\theight: 100%;\n":""),"\t}\n","\tbody{\n","\t\ttop:0px;\n","\t\tleft:0px;\n","\t\tright:0px;\n","\t\tfont:",font,";\n",((this.height||has("opera"))?"":"\t\tposition: fixed;\n"),"\t\tmin-height:",this.minHeight,";\n","\t\tline-height:",_210,";\n","\t}\n","\tp{ margin: 1em 0; }\n",(!_20f&&!this.height?"\tbody,html {overflow-y: hidden;}\n":""),"\t#dijitEditorBody{overflow-x: auto; overflow-y:"+(this.height?"auto;":"hidden;")+" outline: 0px;}\n","\tli > ul:-moz-first-node, li > ol:-moz-first-node{ padding-top: 1.2em; }\n",(!has("ie")?"\tli{ min-height:1.2em; }\n":""),"</style>\n",this._applyEditingAreaStyleSheets(),"\n","</head>\n<body ",(_20f?"id='dijitEditorBody' ":""),"onload='frameElement && frameElement._loadFunc(window,document)' ","style='"+_211+"'>",html,"</body>\n</html>"].join("");},_applyEditingAreaStyleSheets:function(){var _214=[];if(this.styleSheets){_214=this.styleSheets.split(";");this.styleSheets="";}_214=_214.concat(this.editingAreaStyleSheets);this.editingAreaStyleSheets=[];var text="",i=0,url;while((url=_214[i++])){var _215=(new _1f7(win.global.location,url)).toString();this.editingAreaStyleSheets.push(_215);text+="<link rel=\"stylesheet\" type=\"text/css\" href=\""+_215+"\"/>";}return text;},addStyleSheet:function(uri){var url=uri.toString();if(url.charAt(0)==="."||(url.charAt(0)!=="/"&&!uri.host)){url=(new _1f7(win.global.location,url)).toString();}if(_1e8.indexOf(this.editingAreaStyleSheets,url)>-1){return;}this.editingAreaStyleSheets.push(url);this.onLoadDeferred.then(lang.hitch(this,function(){if(this.document.createStyleSheet){this.document.createStyleSheet(url);}else{var head=this.document.getElementsByTagName("head")[0];var _216=this.document.createElement("link");_216.rel="stylesheet";_216.type="text/css";_216.href=url;head.appendChild(_216);}}));},removeStyleSheet:function(uri){var url=uri.toString();if(url.charAt(0)==="."||(url.charAt(0)!=="/"&&!uri.host)){url=(new _1f7(win.global.location,url)).toString();}var _217=_1e8.indexOf(this.editingAreaStyleSheets,url);if(_217===-1){return;}delete this.editingAreaStyleSheets[_217];_1f3("link:[href=\""+url+"\"]",this.window.document).orphan();},disabled:false,_mozSettingProps:{"styleWithCSS":false},_setDisabledAttr:function(_218){_218=!!_218;this._set("disabled",_218);if(!this.isLoaded){return;}if(has("ie")||has("webkit")||has("opera")){var _219=has("ie")&&(this.isLoaded||!this.focusOnLoad);if(_219){this.editNode.unselectable="on";}this.editNode.contentEditable=!_218;if(_219){this.defer(function(){if(this.editNode){this.editNode.unselectable="off";}});}}else{try{this.document.designMode=(_218?"off":"on");}catch(e){return;}if(!_218&&this._mozSettingProps){var ps=this._mozSettingProps;var n;for(n in ps){if(ps.hasOwnProperty(n)){try{this.document.execCommand(n,false,ps[n]);}catch(e2){}}}}}this._disabledOK=true;},onLoad:function(html){if(!this.window.__registeredWindow){this.window.__registeredWindow=true;this._iframeRegHandle=_1fd.registerIframe(this.iframe);}if(!has("ie")&&!has("webkit")&&(this.height||has("mozilla"))){this.editNode=this.document.body;}else{this.editNode=this.document.body.firstChild;var _21a=this;if(has("ie")){this.tabStop=_1ee.create("div",{tabIndex:-1},this.editingArea);this.iframe.onfocus=function(){_21a.editNode.setActive();};}}this.focusNode=this.editNode;var _21b=this.events.concat(this.captureEvents);var ap=this.iframe?this.document:this.editNode;_1e8.forEach(_21b,function(item){this.connect(ap,item.toLowerCase(),item);},this);this.connect(ap,"onmouseup","onClick");if(has("ie")){this.connect(this.document,"onmousedown","_onIEMouseDown");this.editNode.style.zoom=1;}else{this.connect(this.document,"onmousedown",function(){delete this._cursorToStart;});}if(has("webkit")){this._webkitListener=this.connect(this.document,"onmouseup","onDisplayChanged");this.connect(this.document,"onmousedown",function(e){var t=e.target;if(t&&(t===this.document.body||t===this.document)){this.defer("placeCursorAtEnd");}});}if(has("ie")){try{this.document.execCommand("RespectVisibilityInDesign",true,null);}catch(e){}}this.isLoaded=true;this.set("disabled",this.disabled);var _21c=lang.hitch(this,function(){this.setValue(html);if(this.onLoadDeferred){this.onLoadDeferred.resolve(true);}this.onDisplayChanged();if(this.focusOnLoad){_1f4(lang.hitch(this,"defer","focus",this.updateInterval));}this.value=this.getValue(true);});if(this.setValueDeferred){this.setValueDeferred.then(_21c);}else{_21c();}},onKeyDown:function(e){if(e.keyCode===keys.TAB&&this.isTabIndent){_1f1.stop(e);if(this.queryCommandEnabled((e.shiftKey?"outdent":"indent"))){this.execCommand((e.shiftKey?"outdent":"indent"));}}if(has("ie")){if(e.keyCode==keys.TAB&&!this.isTabIndent){if(e.shiftKey&&!e.ctrlKey&&!e.altKey){this.iframe.focus();}else{if(!e.shiftKey&&!e.ctrlKey&&!e.altKey){this.tabStop.focus();}}}else{if(e.keyCode===keys.BACKSPACE&&this.document.selection.type==="Control"){_1f1.stop(e);this.execCommand("delete");}else{if((65<=e.keyCode&&e.keyCode<=90)||(e.keyCode>=37&&e.keyCode<=40)){e.charCode=e.keyCode;this.onKeyPress(e);}}}}if(has("ff")){if(e.keyCode===keys.PAGE_UP||e.keyCode===keys.PAGE_DOWN){if(this.editNode.clientHeight>=this.editNode.scrollHeight){e.preventDefault();}}}return true;},onKeyUp:function(){},setDisabled:function(_21d){_1f2.deprecated("dijit.Editor::setDisabled is deprecated","use dijit.Editor::attr(\"disabled\",boolean) instead",2);this.set("disabled",_21d);},_setValueAttr:function(_21e){this.setValue(_21e);},_setDisableSpellCheckAttr:function(_21f){if(this.document){_1ec.set(this.document.body,"spellcheck",!_21f);}else{this.onLoadDeferred.then(lang.hitch(this,function(){_1ec.set(this.document.body,"spellcheck",!_21f);}));}this._set("disableSpellCheck",_21f);},onKeyPress:function(e){var c=(e.keyChar&&e.keyChar.toLowerCase())||e.keyCode,_220=this._keyHandlers[c],args=arguments;if(_220&&!e.altKey){_1e8.some(_220,function(h){if(!(h.shift^e.shiftKey)&&!(h.ctrl^(e.ctrlKey||e.metaKey))){if(!h.handler.apply(this,args)){e.preventDefault();}return true;}},this);}if(!this._onKeyHitch){this._onKeyHitch=lang.hitch(this,"onKeyPressed");}this.defer("_onKeyHitch",1);return true;},addKeyHandler:function(key,ctrl,_221,_222){if(!lang.isArray(this._keyHandlers[key])){this._keyHandlers[key]=[];}this._keyHandlers[key].push({shift:_221||false,ctrl:ctrl||false,handler:_222});},onKeyPressed:function(){this.onDisplayChanged();},onClick:function(e){this.onDisplayChanged(e);},_onIEMouseDown:function(){if(!this.focused&&!this.disabled){this.focus();}},_onBlur:function(e){this.inherited(arguments);var _223=this.getValue(true);if(_223!==this.value){this.onChange(_223);}this._set("value",_223);},_onFocus:function(e){if(!this.disabled){if(!this._disabledOK){this.set("disabled",false);}this.inherited(arguments);}},blur:function(){if(!has("ie")&&this.window.document.documentElement&&this.window.document.documentElement.focus){this.window.document.documentElement.focus();}else{if(this.ownerDocumentBody.focus){this.ownerDocumentBody.focus();}}},focus:function(){if(!this.isLoaded){this.focusOnLoad=true;return;}if(this._cursorToStart){delete this._cursorToStart;if(this.editNode.childNodes){this.placeCursorAtStart();return;}}if(!has("ie")){_1fd.focus(this.iframe);}else{if(this.editNode&&this.editNode.focus){this.iframe.fireEvent("onfocus",document.createEventObject());}}},updateInterval:200,_updateTimer:null,onDisplayChanged:function(){if(this._updateTimer){this._updateTimer.remove();}this._updateTimer=this.defer("onNormalizedDisplayChanged",this.updateInterval);},onNormalizedDisplayChanged:function(){delete this._updateTimer;},onChange:function(){},_normalizeCommand:function(cmd,_224){var _225=cmd.toLowerCase();if(_225==="formatblock"){if(has("safari")&&_224===undefined){_225="heading";}}else{if(_225==="hilitecolor"&&!has("mozilla")){_225="backcolor";}}return _225;},_qcaCache:{},queryCommandAvailable:function(_226){var ca=this._qcaCache[_226];if(ca!==undefined){return ca;}return (this._qcaCache[_226]=this._queryCommandAvailable(_226));},_queryCommandAvailable:function(_227){var ie=1;var _228=1<<1;var _229=1<<2;var _22a=1<<3;function _22b(_22c){return {ie:Boolean(_22c&ie),mozilla:Boolean(_22c&_228),webkit:Boolean(_22c&_229),opera:Boolean(_22c&_22a)};};var _22d=null;switch(_227.toLowerCase()){case "bold":case "italic":case "underline":case "subscript":case "superscript":case "fontname":case "fontsize":case "forecolor":case "hilitecolor":case "justifycenter":case "justifyfull":case "justifyleft":case "justifyright":case "delete":case "selectall":case "toggledir":_22d=_22b(_228|ie|_229|_22a);break;case "createlink":case "unlink":case "removeformat":case "inserthorizontalrule":case "insertimage":case "insertorderedlist":case "insertunorderedlist":case "indent":case "outdent":case "formatblock":case "inserthtml":case "undo":case "redo":case "strikethrough":case "tabindent":_22d=_22b(_228|ie|_22a|_229);break;case "blockdirltr":case "blockdirrtl":case "dirltr":case "dirrtl":case "inlinedirltr":case "inlinedirrtl":_22d=_22b(ie);break;case "cut":case "copy":case "paste":_22d=_22b(ie|_228|_229|_22a);break;case "inserttable":_22d=_22b(_228|ie);break;case "insertcell":case "insertcol":case "insertrow":case "deletecells":case "deletecols":case "deleterows":case "mergecells":case "splitcell":_22d=_22b(ie|_228);break;default:return false;}return (has("ie")&&_22d.ie)||(has("mozilla")&&_22d.mozilla)||(has("webkit")&&_22d.webkit)||(has("opera")&&_22d.opera);},execCommand:function(_22e,_22f){var _230;this.focus();_22e=this._normalizeCommand(_22e,_22f);if(_22f!==undefined){if(_22e==="heading"){throw new Error("unimplemented");}else{if((_22e==="formatblock")&&has("ie")){_22f="<"+_22f+">";}}}var _231="_"+_22e+"Impl";if(this[_231]){_230=this[_231](_22f);}else{_22f=arguments.length>1?_22f:null;if(_22f||_22e!=="createlink"){_230=this.document.execCommand(_22e,false,_22f);}}this.onDisplayChanged();return _230;},queryCommandEnabled:function(_232){if(this.disabled||!this._disabledOK){return false;}_232=this._normalizeCommand(_232);var _233="_"+_232+"EnabledImpl";if(this[_233]){return this[_233](_232);}else{return this._browserQueryCommandEnabled(_232);}},queryCommandState:function(_234){if(this.disabled||!this._disabledOK){return false;}_234=this._normalizeCommand(_234);try{return this.document.queryCommandState(_234);}catch(e){return false;}},queryCommandValue:function(_235){if(this.disabled||!this._disabledOK){return false;}var r;_235=this._normalizeCommand(_235);if(has("ie")&&_235==="formatblock"){r=this._native2LocalFormatNames[this.document.queryCommandValue(_235)];}else{if(has("mozilla")&&_235==="hilitecolor"){var _236;try{_236=this.document.queryCommandValue("styleWithCSS");}catch(e){_236=false;}this.document.execCommand("styleWithCSS",false,true);r=this.document.queryCommandValue(_235);this.document.execCommand("styleWithCSS",false,_236);}else{r=this.document.queryCommandValue(_235);}}return r;},_sCall:function(name,args){return win.withGlobal(this.window,name,_1fa,args);},placeCursorAtStart:function(){this.focus();var _237=false;if(has("mozilla")){var _238=this.editNode.firstChild;while(_238){if(_238.nodeType===3){if(_238.nodeValue.replace(/^\s+|\s+$/g,"").length>0){_237=true;this._sCall("selectElement",[_238]);break;}}else{if(_238.nodeType===1){_237=true;var tg=_238.tagName?_238.tagName.toLowerCase():"";if(/br|input|img|base|meta|area|basefont|hr|link/.test(tg)){this._sCall("selectElement",[_238]);}else{this._sCall("selectElementChildren",[_238]);}break;}}_238=_238.nextSibling;}}else{_237=true;this._sCall("selectElementChildren",[this.editNode]);}if(_237){this._sCall("collapse",[true]);}},placeCursorAtEnd:function(){this.focus();var _239=false;if(has("mozilla")){var last=this.editNode.lastChild;while(last){if(last.nodeType===3){if(last.nodeValue.replace(/^\s+|\s+$/g,"").length>0){_239=true;this._sCall("selectElement",[last]);break;}}else{if(last.nodeType===1){_239=true;this._sCall("selectElement",[last.lastChild||last]);break;}}last=last.previousSibling;}}else{_239=true;this._sCall("selectElementChildren",[this.editNode]);}if(_239){this._sCall("collapse",[false]);}},getValue:function(_23a){if(this.textarea){if(this.isClosed||!this.isLoaded){return this.textarea.value;}}return this._postFilterContent(null,_23a);},_getValueAttr:function(){return this.getValue(true);},setValue:function(html){if(!this.isLoaded){this.onLoadDeferred.then(lang.hitch(this,function(){this.setValue(html);}));return;}this._cursorToStart=true;if(this.textarea&&(this.isClosed||!this.isLoaded)){this.textarea.value=html;}else{html=this._preFilterContent(html);var node=this.isClosed?this.domNode:this.editNode;if(html&&has("mozilla")&&html.toLowerCase()==="<p></p>"){html="<p>&#160;</p>";}if(!html&&has("webkit")){html="&#160;";}node.innerHTML=html;this._preDomFilterContent(node);}this.onDisplayChanged();this._set("value",this.getValue(true));},replaceValue:function(html){if(this.isClosed){this.setValue(html);}else{if(this.window&&this.window.getSelection&&!has("mozilla")){this.setValue(html);}else{if(this.window&&this.window.getSelection){html=this._preFilterContent(html);this.execCommand("selectall");if(!html){this._cursorToStart=true;html="&#160;";}this.execCommand("inserthtml",html);this._preDomFilterContent(this.editNode);}else{if(this.document&&this.document.selection){this.setValue(html);}}}}this._set("value",this.getValue(true));},_preFilterContent:function(html){var ec=html;_1e8.forEach(this.contentPreFilters,function(ef){if(ef){ec=ef(ec);}});return ec;},_preDomFilterContent:function(dom){dom=dom||this.editNode;_1e8.forEach(this.contentDomPreFilters,function(ef){if(ef&&lang.isFunction(ef)){ef(dom);}},this);},_postFilterContent:function(dom,_23b){var ec;if(!lang.isString(dom)){dom=dom||this.editNode;if(this.contentDomPostFilters.length){if(_23b){dom=lang.clone(dom);}_1e8.forEach(this.contentDomPostFilters,function(ef){dom=ef(dom);});}ec=_1fc.getChildrenHtml(dom);}else{ec=dom;}if(!lang.trim(ec.replace(/^\xA0\xA0*/,"").replace(/\xA0\xA0*$/,"")).length){ec="";}_1e8.forEach(this.contentPostFilters,function(ef){ec=ef(ec);});return ec;},_saveContent:function(){var _23c=dom.byId(_1fe._scopeName+"._editor.RichText.value");if(_23c){if(_23c.value){_23c.value+=this._SEPARATOR;}_23c.value+=this.name+this._NAME_CONTENT_SEP+this.getValue(true);}},escapeXml:function(str,_23d){str=str.replace(/&/gm,"&amp;").replace(/</gm,"&lt;").replace(/>/gm,"&gt;").replace(/"/gm,"&quot;");if(!_23d){str=str.replace(/'/gm,"&#39;");}return str;},getNodeHtml:function(node){_1f2.deprecated("dijit.Editor::getNodeHtml is deprecated","use dijit/_editor/html::getNodeHtml instead",2);return _1fc.getNodeHtml(node);},getNodeChildrenHtml:function(dom){_1f2.deprecated("dijit.Editor::getNodeChildrenHtml is deprecated","use dijit/_editor/html::getChildrenHtml instead",2);return _1fc.getChildrenHtml(dom);},close:function(save){if(this.isClosed){return;}if(!arguments.length){save=true;}if(save){this._set("value",this.getValue(true));}if(this.interval){clearInterval(this.interval);}if(this._webkitListener){this.disconnect(this._webkitListener);delete this._webkitListener;}if(has("ie")){this.iframe.onfocus=null;}this.iframe._loadFunc=null;if(this._iframeRegHandle){this._iframeRegHandle.remove();delete this._iframeRegHandle;}if(this.textarea){var s=this.textarea.style;s.position="";s.left=s.top="";if(has("ie")){s.overflow=this.__overflow;this.__overflow=null;}this.textarea.value=this.value;_1ee.destroy(this.domNode);this.domNode=this.textarea;}else{this.domNode.innerHTML=this.value;}delete this.iframe;_1ed.remove(this.domNode,this.baseClass);this.isClosed=true;this.isLoaded=false;delete this.editNode;delete this.focusNode;if(this.window&&this.window._frameElement){this.window._frameElement=null;}this.window=null;this.document=null;this.editingArea=null;this.editorObject=null;},destroy:function(){if(!this.isClosed){this.close(false);}if(this._updateTimer){this._updateTimer.remove();}this.inherited(arguments);if(_1ff._globalSaveHandler){delete _1ff._globalSaveHandler[this.id];}},_removeMozBogus:function(html){return html.replace(/\stype="_moz"/gi,"").replace(/\s_moz_dirty=""/gi,"").replace(/_moz_resizing="(true|false)"/gi,"");},_removeWebkitBogus:function(html){html=html.replace(/\sclass="webkit-block-placeholder"/gi,"");html=html.replace(/\sclass="apple-style-span"/gi,"");html=html.replace(/<meta charset=\"utf-8\" \/>/gi,"");return html;},_normalizeFontStyle:function(html){return html.replace(/<(\/)?strong([ \>])/gi,"<$1b$2").replace(/<(\/)?em([ \>])/gi,"<$1i$2");},_preFixUrlAttributes:function(html){return html.replace(/(?:(<a(?=\s).*?\shref=)("|')(.*?)\2)|(?:(<a\s.*?href=)([^"'][^ >]+))/gi,"$1$4$2$3$5$2 _djrealurl=$2$3$5$2").replace(/(?:(<img(?=\s).*?\ssrc=)("|')(.*?)\2)|(?:(<img\s.*?src=)([^"'][^ >]+))/gi,"$1$4$2$3$5$2 _djrealurl=$2$3$5$2");},_browserQueryCommandEnabled:function(_23e){if(!_23e){return false;}var elem=has("ie")?this.document.selection.createRange():this.document;try{return elem.queryCommandEnabled(_23e);}catch(e){return false;}},_createlinkEnabledImpl:function(){var _23f=true;if(has("opera")){var sel=this.window.getSelection();if(sel.isCollapsed){_23f=true;}else{_23f=this.document.queryCommandEnabled("createlink");}}else{_23f=this._browserQueryCommandEnabled("createlink");}return _23f;},_unlinkEnabledImpl:function(){var _240=true;if(has("mozilla")||has("webkit")){_240=this._sCall("hasAncestorElement",["a"]);}else{_240=this._browserQueryCommandEnabled("unlink");}return _240;},_inserttableEnabledImpl:function(){var _241=true;if(has("mozilla")||has("webkit")){_241=true;}else{_241=this._browserQueryCommandEnabled("inserttable");}return _241;},_cutEnabledImpl:function(){var _242=true;if(has("webkit")){var sel=this.window.getSelection();if(sel){sel=sel.toString();}_242=!!sel;}else{_242=this._browserQueryCommandEnabled("cut");}return _242;},_copyEnabledImpl:function(){var _243=true;if(has("webkit")){var sel=this.window.getSelection();if(sel){sel=sel.toString();}_243=!!sel;}else{_243=this._browserQueryCommandEnabled("copy");}return _243;},_pasteEnabledImpl:function(){var _244=true;if(has("webkit")){return true;}else{_244=this._browserQueryCommandEnabled("paste");}return _244;},_inserthorizontalruleImpl:function(_245){if(has("ie")){return this._inserthtmlImpl("<hr>");}return this.document.execCommand("inserthorizontalrule",false,_245);},_unlinkImpl:function(_246){if((this.queryCommandEnabled("unlink"))&&(has("mozilla")||has("webkit"))){var a=this._sCall("getAncestorElement",["a"]);this._sCall("selectElement",[a]);return this.document.execCommand("unlink",false,null);}return this.document.execCommand("unlink",false,_246);},_hilitecolorImpl:function(_247){var _248;var _249=this._handleTextColorOrProperties("hilitecolor",_247);if(!_249){if(has("mozilla")){this.document.execCommand("styleWithCSS",false,true);console.log("Executing color command.");_248=this.document.execCommand("hilitecolor",false,_247);this.document.execCommand("styleWithCSS",false,false);}else{_248=this.document.execCommand("hilitecolor",false,_247);}}return _248;},_backcolorImpl:function(_24a){if(has("ie")){_24a=_24a?_24a:null;}var _24b=this._handleTextColorOrProperties("backcolor",_24a);if(!_24b){_24b=this.document.execCommand("backcolor",false,_24a);}return _24b;},_forecolorImpl:function(_24c){if(has("ie")){_24c=_24c?_24c:null;}var _24d=false;_24d=this._handleTextColorOrProperties("forecolor",_24c);if(!_24d){_24d=this.document.execCommand("forecolor",false,_24c);}return _24d;},_inserthtmlImpl:function(_24e){_24e=this._preFilterContent(_24e);var rv=true;if(has("ie")){var _24f=this.document.selection.createRange();if(this.document.selection.type.toUpperCase()==="CONTROL"){var n=_24f.item(0);while(_24f.length){_24f.remove(_24f.item(0));}n.outerHTML=_24e;}else{_24f.pasteHTML(_24e);}_24f.select();}else{if(has("mozilla")&&!_24e.length){this._sCall("remove");}else{rv=this.document.execCommand("inserthtml",false,_24e);}}return rv;},_boldImpl:function(_250){var _251=false;if(has("ie")){this._adaptIESelection();_251=this._adaptIEFormatAreaAndExec("bold");}if(!_251){_251=this.document.execCommand("bold",false,_250);}return _251;},_italicImpl:function(_252){var _253=false;if(has("ie")){this._adaptIESelection();_253=this._adaptIEFormatAreaAndExec("italic");}if(!_253){_253=this.document.execCommand("italic",false,_252);}return _253;},_underlineImpl:function(_254){var _255=false;if(has("ie")){this._adaptIESelection();_255=this._adaptIEFormatAreaAndExec("underline");}if(!_255){_255=this.document.execCommand("underline",false,_254);}return _255;},_strikethroughImpl:function(_256){var _257=false;if(has("ie")){this._adaptIESelection();_257=this._adaptIEFormatAreaAndExec("strikethrough");}if(!_257){_257=this.document.execCommand("strikethrough",false,_256);}return _257;},_superscriptImpl:function(_258){var _259=false;if(has("ie")){this._adaptIESelection();_259=this._adaptIEFormatAreaAndExec("superscript");}if(!_259){_259=this.document.execCommand("superscript",false,_258);}return _259;},_subscriptImpl:function(_25a){var _25b=false;if(has("ie")){this._adaptIESelection();_25b=this._adaptIEFormatAreaAndExec("subscript");}if(!_25b){_25b=this.document.execCommand("subscript",false,_25a);}return _25b;},_fontnameImpl:function(_25c){var _25d;if(has("ie")){_25d=this._handleTextColorOrProperties("fontname",_25c);}if(!_25d){_25d=this.document.execCommand("fontname",false,_25c);}return _25d;},_fontsizeImpl:function(_25e){var _25f;if(has("ie")){_25f=this._handleTextColorOrProperties("fontsize",_25e);}if(!_25f){_25f=this.document.execCommand("fontsize",false,_25e);}return _25f;},_insertorderedlistImpl:function(_260){var _261=false;if(has("ie")){_261=this._adaptIEList("insertorderedlist",_260);}if(!_261){_261=this.document.execCommand("insertorderedlist",false,_260);}return _261;},_insertunorderedlistImpl:function(_262){var _263=false;if(has("ie")){_263=this._adaptIEList("insertunorderedlist",_262);}if(!_263){_263=this.document.execCommand("insertunorderedlist",false,_262);}return _263;},getHeaderHeight:function(){return this._getNodeChildrenHeight(this.header);},getFooterHeight:function(){return this._getNodeChildrenHeight(this.footer);},_getNodeChildrenHeight:function(node){var h=0;if(node&&node.childNodes){var i;for(i=0;i<node.childNodes.length;i++){var size=_1ef.position(node.childNodes[i]);h+=size.h;}}return h;},_isNodeEmpty:function(node,_264){if(node.nodeType===1){if(node.childNodes.length>0){return this._isNodeEmpty(node.childNodes[0],_264);}return true;}else{if(node.nodeType===3){return (node.nodeValue.substring(_264)==="");}}return false;},_removeStartingRangeFromRange:function(node,_265){if(node.nextSibling){_265.setStart(node.nextSibling,0);}else{var _266=node.parentNode;while(_266&&_266.nextSibling==null){_266=_266.parentNode;}if(_266){_265.setStart(_266.nextSibling,0);}}return _265;},_adaptIESelection:function(){var _267=_1fb.getSelection(this.window);if(_267&&_267.rangeCount&&!_267.isCollapsed){var _268=_267.getRangeAt(0);var _269=_268.startContainer;var _26a=_268.startOffset;while(_269.nodeType===3&&_26a>=_269.length&&_269.nextSibling){_26a=_26a-_269.length;_269=_269.nextSibling;}var _26b=null;while(this._isNodeEmpty(_269,_26a)&&_269!==_26b){_26b=_269;_268=this._removeStartingRangeFromRange(_269,_268);_269=_268.startContainer;_26a=0;}_267.removeAllRanges();_267.addRange(_268);}},_adaptIEFormatAreaAndExec:function(_26c){var _26d=_1fb.getSelection(this.window);var doc=this.document;var rs,ret,_26e,txt,_26f,_270,_271,_272;if(_26c&&_26d&&_26d.isCollapsed){var _273=this.queryCommandValue(_26c);if(_273){var _274=this._tagNamesForCommand(_26c);_26e=_26d.getRangeAt(0);var fs=_26e.startContainer;if(fs.nodeType===3){var _275=_26e.endOffset;if(fs.length<_275){ret=this._adjustNodeAndOffset(rs,_275);fs=ret.node;_275=ret.offset;}}var _276;while(fs&&fs!==this.editNode){var _277=fs.tagName?fs.tagName.toLowerCase():"";if(_1e8.indexOf(_274,_277)>-1){_276=fs;break;}fs=fs.parentNode;}if(_276){rs=_26e.startContainer;var _278=doc.createElement(_276.tagName);_1ee.place(_278,_276,"after");if(rs&&rs.nodeType===3){var _279,_27a;var _27b=_26e.endOffset;if(rs.length<_27b){ret=this._adjustNodeAndOffset(rs,_27b);rs=ret.node;_27b=ret.offset;}txt=rs.nodeValue;_26f=doc.createTextNode(txt.substring(0,_27b));var _27c=txt.substring(_27b,txt.length);if(_27c){_270=doc.createTextNode(_27c);}_1ee.place(_26f,rs,"before");if(_270){_271=doc.createElement("span");_271.className="ieFormatBreakerSpan";_1ee.place(_271,rs,"after");_1ee.place(_270,_271,"after");_270=_271;}_1ee.destroy(rs);var _27d=_26f.parentNode;var _27e=[];var _27f;while(_27d!==_276){var tg=_27d.tagName;_27f={tagName:tg};_27e.push(_27f);var _280=doc.createElement(tg);if(_27d.style){if(_280.style){if(_27d.style.cssText){_280.style.cssText=_27d.style.cssText;_27f.cssText=_27d.style.cssText;}}}if(_27d.tagName==="FONT"){if(_27d.color){_280.color=_27d.color;_27f.color=_27d.color;}if(_27d.face){_280.face=_27d.face;_27f.face=_27d.face;}if(_27d.size){_280.size=_27d.size;_27f.size=_27d.size;}}if(_27d.className){_280.className=_27d.className;_27f.className=_27d.className;}if(_270){_279=_270;while(_279){_27a=_279.nextSibling;_280.appendChild(_279);_279=_27a;}}if(_280.tagName==_27d.tagName){_271=doc.createElement("span");_271.className="ieFormatBreakerSpan";_1ee.place(_271,_27d,"after");_1ee.place(_280,_271,"after");}else{_1ee.place(_280,_27d,"after");}_26f=_27d;_270=_280;_27d=_27d.parentNode;}if(_270){_279=_270;if(_279.nodeType===1||(_279.nodeType===3&&_279.nodeValue)){_278.innerHTML="";}while(_279){_27a=_279.nextSibling;_278.appendChild(_279);_279=_27a;}}var _281;if(_27e.length){_27f=_27e.pop();var _282=doc.createElement(_27f.tagName);if(_27f.cssText&&_282.style){_282.style.cssText=_27f.cssText;}if(_27f.className){_282.className=_27f.className;}if(_27f.tagName==="FONT"){if(_27f.color){_282.color=_27f.color;}if(_27f.face){_282.face=_27f.face;}if(_27f.size){_282.size=_27f.size;}}_1ee.place(_282,_278,"before");while(_27e.length){_27f=_27e.pop();var _283=doc.createElement(_27f.tagName);if(_27f.cssText&&_283.style){_283.style.cssText=_27f.cssText;}if(_27f.className){_283.className=_27f.className;}if(_27f.tagName==="FONT"){if(_27f.color){_283.color=_27f.color;}if(_27f.face){_283.face=_27f.face;}if(_27f.size){_283.size=_27f.size;}}_282.appendChild(_283);_282=_283;}_272=doc.createTextNode(".");_271.appendChild(_272);_282.appendChild(_272);_281=_1fb.create(this.window);_281.setStart(_272,0);_281.setEnd(_272,_272.length);_26d.removeAllRanges();_26d.addRange(_281);this._sCall("collapse",[false]);_272.parentNode.innerHTML="";}else{_271=doc.createElement("span");_271.className="ieFormatBreakerSpan";_272=doc.createTextNode(".");_271.appendChild(_272);_1ee.place(_271,_278,"before");_281=_1fb.create(this.window);_281.setStart(_272,0);_281.setEnd(_272,_272.length);_26d.removeAllRanges();_26d.addRange(_281);this._sCall("collapse",[false]);_272.parentNode.innerHTML="";}if(!_278.firstChild){_1ee.destroy(_278);}return true;}}return false;}else{_26e=_26d.getRangeAt(0);rs=_26e.startContainer;if(rs&&rs.nodeType===3){var _275=_26e.startOffset;if(rs.length<_275){ret=this._adjustNodeAndOffset(rs,_275);rs=ret.node;_275=ret.offset;}txt=rs.nodeValue;_26f=doc.createTextNode(txt.substring(0,_275));var _27c=txt.substring(_275);if(_27c!==""){_270=doc.createTextNode(txt.substring(_275));}_271=doc.createElement("span");_272=doc.createTextNode(".");_271.appendChild(_272);if(_26f.length){_1ee.place(_26f,rs,"after");}else{_26f=rs;}_1ee.place(_271,_26f,"after");if(_270){_1ee.place(_270,_271,"after");}_1ee.destroy(rs);var _281=_1fb.create(this.window);_281.setStart(_272,0);_281.setEnd(_272,_272.length);_26d.removeAllRanges();_26d.addRange(_281);doc.execCommand(_26c);_1ee.place(_271.firstChild,_271,"before");_1ee.destroy(_271);_281.setStart(_272,0);_281.setEnd(_272,_272.length);_26d.removeAllRanges();_26d.addRange(_281);this._sCall("collapse",[false]);_272.parentNode.innerHTML="";return true;}}}else{return false;}},_adaptIEList:function(_284){var _285=_1fb.getSelection(this.window);if(_285.isCollapsed){if(_285.rangeCount&&!this.queryCommandValue(_284)){var _286=_285.getRangeAt(0);var sc=_286.startContainer;if(sc&&sc.nodeType==3){if(!_286.startOffset){var _287="ul";if(_284==="insertorderedlist"){_287="ol";}var list=this.document.createElement(_287);var li=_1ee.create("li",null,list);_1ee.place(list,sc,"before");li.appendChild(sc);_1ee.create("br",null,list,"after");var _288=_1fb.create(this.window);_288.setStart(sc,0);_288.setEnd(sc,sc.length);_285.removeAllRanges();_285.addRange(_288);this._sCall("collapse",[true]);return true;}}}}return false;},_handleTextColorOrProperties:function(_289,_28a){var _28b=_1fb.getSelection(this.window);var doc=this.document;var rs,ret,_28c,txt,_28d,_28e,_28f,_290;_28a=_28a||null;if(_289&&_28b&&_28b.isCollapsed){if(_28b.rangeCount){_28c=_28b.getRangeAt(0);rs=_28c.startContainer;if(rs&&rs.nodeType===3){var _291=_28c.startOffset;if(rs.length<_291){ret=this._adjustNodeAndOffset(rs,_291);rs=ret.node;_291=ret.offset;}txt=rs.nodeValue;_28d=doc.createTextNode(txt.substring(0,_291));var _292=txt.substring(_291);if(_292!==""){_28e=doc.createTextNode(txt.substring(_291));}_28f=doc.createElement("span");_290=doc.createTextNode(".");_28f.appendChild(_290);var _293=doc.createElement("span");_28f.appendChild(_293);if(_28d.length){_1ee.place(_28d,rs,"after");}else{_28d=rs;}_1ee.place(_28f,_28d,"after");if(_28e){_1ee.place(_28e,_28f,"after");}_1ee.destroy(rs);var _294=_1fb.create(this.window);_294.setStart(_290,0);_294.setEnd(_290,_290.length);_28b.removeAllRanges();_28b.addRange(_294);if(has("webkit")){var _295="color";if(_289==="hilitecolor"||_289==="backcolor"){_295="backgroundColor";}_1f0.set(_28f,_295,_28a);this._sCall("remove",[]);_1ee.destroy(_293);_28f.innerHTML="&#160;";this._sCall("selectElement",[_28f]);this.focus();}else{this.execCommand(_289,_28a);_1ee.place(_28f.firstChild,_28f,"before");_1ee.destroy(_28f);_294.setStart(_290,0);_294.setEnd(_290,_290.length);_28b.removeAllRanges();_28b.addRange(_294);this._sCall("collapse",[false]);_290.parentNode.removeChild(_290);}return true;}}}return false;},_adjustNodeAndOffset:function(node,_296){while(node.length<_296&&node.nextSibling&&node.nextSibling.nodeType===3){_296=_296-node.length;node=node.nextSibling;}return {"node":node,"offset":_296};},_tagNamesForCommand:function(_297){if(_297==="bold"){return ["b","strong"];}else{if(_297==="italic"){return ["i","em"];}else{if(_297==="strikethrough"){return ["s","strike"];}else{if(_297==="superscript"){return ["sup"];}else{if(_297==="subscript"){return ["sub"];}else{if(_297==="underline"){return ["u"];}}}}}}return [];},_stripBreakerNodes:function(node){if(!this.isLoaded){return;}_1f3(".ieFormatBreakerSpan",node).forEach(function(b){while(b.firstChild){_1ee.place(b.firstChild,b,"before");}_1ee.destroy(b);});return node;}});return _1ff;});},"dojo/store/util/SimpleQueryEngine":function(){define(["../../_base/array"],function(_298){return function(_299,_29a){switch(typeof _299){default:throw new Error("Can not query with a "+typeof _299);case "object":case "undefined":var _29b=_299;_299=function(_29c){for(var key in _29b){var _29d=_29b[key];if(_29d&&_29d.test){if(!_29d.test(_29c[key],_29c)){return false;}}else{if(_29d!=_29c[key]){return false;}}}return true;};break;case "string":if(!this[_299]){throw new Error("No filter function "+_299+" was found in store");}_299=this[_299];case "function":}function _29e(_29f){var _2a0=_298.filter(_29f,_299);var _2a1=_29a&&_29a.sort;if(_2a1){_2a0.sort(typeof _2a1=="function"?_2a1:function(a,b){for(var sort,i=0;sort=_2a1[i];i++){var _2a2=a[sort.attribute];var _2a3=b[sort.attribute];if(_2a2!=_2a3){return !!sort.descending==(_2a2==null||_2a2>_2a3)?-1:1;}}return 0;});}if(_29a&&(_29a.start||_29a.count)){var _2a4=_2a0.length;_2a0=_2a0.slice(_29a.start||0,(_29a.start||0)+(_29a.count||Infinity));_2a0.total=_2a4;}return _2a0;};_29e.matches=_299;return _29e;};});},"esri/dijit/editing/AttachmentEditor":function(){define(["dijit","dojo","dojox","dojo/require!dijit/_Widget,dijit/_Templated"],function(_2a5,dojo,_2a6){dojo.provide("esri.dijit.editing.AttachmentEditor");dojo.require("dijit._Widget");dojo.require("dijit._Templated");dojo.declare("esri.dijit.editing.AttachmentEditor",[_2a5._Widget,_2a5._Templated],{widgetsInTemplate:true,templateString:"<div class=\"attachmentEditor\">\r\n    <br />\r\n    <div>\r\n        <b>${NLS_attachments}</b>\r\n        <hr />\r\n        <div dojoAttachPoint=\"_attachmentError\" style='color:red;display:none'></div>\r\n        <br />\r\n        <span dojoAttachPoint='_attachmentList' style='word-wrap: break-word;'></span>\r\n        <br><br>\r\n        <form dojoAttachPoint='_uploadForm'> ${NLS_add}:&nbsp;&nbsp;<input type='file' name='attachment' dojoAttachPoint='_uploadField' /> </form>\r\n    </div>\r\n</div>",basePath:dojo.moduleUrl("esri.dijit.editing"),_listHtml:"<span id='node_${oid}_${attid}'><a href='${href}' target='_blank'>${name}</a>",_deleteBtnHtml:"(<span style='cursor:pointer;color:red;font-weight:bold;' class='deleteAttachment' id='${attid}');'>X</span>)",_endHtml:"<br/></span>",_aeConnects:[],_layerEditingCapChecked:{},_layerEditingCap:{},constructor:function(_2a7,_2a8){dojo.mixin(this,esri.bundle.widgets.attachmentEditor);},startup:function(){this.inherited(arguments);this._uploadField_connect=dojo.connect(this._uploadField,"onchange",this,"_addAttachment");this._uploadFieldFocus_connect=dojo.connect(this._uploadField,"onfocus",dojo.hitch(this,function(e){esri.hide(this._attachmentError);}));},destroy:function(){dojo.forEach(this._aeConnects,dojo.disconnect);dojo.disconnect(this._uploadField_connect);dojo.disconnect(this._uploadFieldFocus_connect);this.inherited(arguments);},showAttachments:function(_2a9,_2aa){var list=this._attachmentList;list.innerHTML=this.NLS_none;this._uploadField.value="";dojo.forEach(this.domNode.children,function(_2ab,idx){esri.show(_2ab);});esri.hide(this._attachmentError);if(!_2a9){return;}this._featureLayer=_2a9.getLayer()||_2aa;if(!this._featureLayer){return;}if(this._featureLayer.declaredClass!=="esri.layers.FeatureLayer"||!this._featureLayer.getEditCapabilities){esri.hide(this._uploadForm);dojo.forEach(this.domNode.children,function(_2ac,idx){esri.hide(_2ac);});return;}this._currentLayerId=this._featureLayer.id;if(!this._layerEditingCapChecked[this._currentLayerId]){this._layerEditingCap[this._currentLayerId]=this._featureLayer.getEditCapabilities();this._layerEditingCapChecked[this._currentLayerId]=true;}this._featureCanUpdate=this._featureLayer.getEditCapabilities({feature:_2a9}).canUpdate;this._oid=_2a9.attributes[this._featureLayer.objectIdField];this._getAttachments(_2a9);},_getAttachments:function(_2ad){if(!this._featureLayer||!this._featureLayer.queryAttachmentInfos){return;}this._featureLayer.queryAttachmentInfos(this._oid,dojo.hitch(this,"_onQueryAttachmentInfosComplete"));},_addAttachment:function(){esri.hide(this._attachmentError);if(!this._featureLayer||!this._featureLayer.addAttachment){return;}this._featureLayer.addAttachment(this._oid,this._uploadForm,dojo.hitch(this,"_onAddAttachmentComplete"),dojo.hitch(this,"_onAddAttachmentError"));},_deleteAttachment:function(oid,_2ae){this._featureLayer.deleteAttachments(oid,[_2ae],dojo.hitch(this,"_onDeleteAttachmentComplete"));},_onQueryAttachmentInfosComplete:function(_2af){var _2b0=this._listHtml+this._deleteBtnHtml+this._endHtml;this._uploadForm.style.display="block";if((!this._featureCanUpdate&&this._layerEditingCap[this._currentLayerId].canUpdate)||(!this._layerEditingCap[this._currentLayerId].canCreate&&!this._layerEditingCap[this._currentLayerId].canUpdate)){_2b0=this._listHtml+this._endHtml;this._uploadForm.style.display="none";}else{if(this._layerEditingCap[this._currentLayerId].canCreate&&!this._layerEditingCap[this._currentLayerId].canUpdate){_2b0=this._listHtml+this._endHtml;}}var list=this._attachmentList,_2b1=dojo.map(_2af,dojo.hitch(this,function(info){return esri.substitute({href:info.url,name:info.name,oid:info.objectId,attid:info.id},_2b0);}));list.innerHTML=_2b1.join("")||this.NLS_none;this._updateConnects();},_onAddAttachmentComplete:function(_2b2){var _2b3=this._uploadField;var _2b4=_2b3.value;var pos=_2b4.lastIndexOf("\\");if(pos>-1){_2b4=_2b4.substring(pos+1,_2b4.length);}_2b4=_2b4.replace(/\ /g,"_");var list=this._attachmentList,_2b5=dojo.objectToQuery({gdbVersion:this._featureLayer.gdbVersion,token:this._featureLayer._getToken()});var _2b6=this._listHtml+this._deleteBtnHtml+this._endHtml;if(this._layerEditingCap[this._currentLayerId].canCreate&&!this._layerEditingCap[this._currentLayerId].canUpdate){_2b6=this._listHtml+this._endHtml;}var link=esri.substitute({href:this._featureLayer._url.path+"/"+_2b2.objectId+"/attachments/"+_2b2.attachmentId+(_2b5?("?"+_2b5):""),name:_2b4,oid:_2b2.objectId,attid:_2b2.attachmentId},_2b6);list.innerHTML=list.innerHTML==this.NLS_none?link:(list.innerHTML+link);this._updateConnects();_2b3.value="";},_onAddAttachmentError:function(_2b7){if(_2b7&&esri._isDefined(_2b7.code)){var _2b8,_2b9=this._attachmentError;if(_2b7.code===400){_2b8=this.NLS_fileNotSupported;}else{_2b8=_2b7.message||(_2b7.details&&_2b7.details.length&&_2b7.details[0]);}dojo.attr(_2b9,"innerHTML",(_2b8||this.NLS_error));esri.show(_2b9);}},_onDeleteAttachmentComplete:function(_2ba){var _2bb=dojo.every(_2ba,function(_2bc){return _2bc.success;}),list=this._attachmentList;if(_2bb){dojo.query("#node_"+_2ba[0].objectId+"_"+_2ba[0].attachmentId).orphan();if(!list.children||!list.children.length){list.innerHTML=this.NLS_none;}}},_updateConnects:function(){dojo.forEach(this._aeConnects,dojo.disconnect);dojo.query(".deleteAttachment").forEach(function(item){this._aeConnects.push(dojo.connect(item,"onclick",dojo.hitch(this,"_deleteAttachment",this._oid,item.id)));},this);}});});},"dijit/ToolbarSeparator":function(){define("dijit/ToolbarSeparator",["dojo/_base/declare","dojo/dom","./_Widget","./_TemplatedMixin"],function(_2bd,dom,_2be,_2bf){return _2bd("dijit.ToolbarSeparator",[_2be,_2bf],{templateString:"<div class=\"dijitToolbarSeparator dijitInline\" role=\"presentation\"></div>",buildRendering:function(){this.inherited(arguments);dom.setSelectable(this.domNode,false);},isFocusable:function(){return false;}});});},"dijit/layout/_LayoutWidget":function(){define("dijit/layout/_LayoutWidget",["dojo/_base/lang","../_Widget","../_Container","../_Contained","../Viewport","dojo/_base/declare","dojo/dom-class","dojo/dom-geometry","dojo/dom-style"],function(lang,_2c0,_2c1,_2c2,_2c3,_2c4,_2c5,_2c6,_2c7){return _2c4("dijit.layout._LayoutWidget",[_2c0,_2c1,_2c2],{baseClass:"dijitLayoutContainer",isLayoutContainer:true,buildRendering:function(){this.inherited(arguments);_2c5.add(this.domNode,"dijitContainer");},startup:function(){if(this._started){return;}this.inherited(arguments);var _2c8=this.getParent&&this.getParent();if(!(_2c8&&_2c8.isLayoutContainer)){this.resize();this.own(_2c3.on("resize",lang.hitch(this,"resize")));}},resize:function(_2c9,_2ca){var node=this.domNode;if(_2c9){_2c6.setMarginBox(node,_2c9);}var mb=_2ca||{};lang.mixin(mb,_2c9||{});if(!("h" in mb)||!("w" in mb)){mb=lang.mixin(_2c6.getMarginBox(node),mb);}var cs=_2c7.getComputedStyle(node);var me=_2c6.getMarginExtents(node,cs);var be=_2c6.getBorderExtents(node,cs);var bb=(this._borderBox={w:mb.w-(me.w+be.w),h:mb.h-(me.h+be.h)});var pe=_2c6.getPadExtents(node,cs);this._contentBox={l:_2c7.toPixelValue(node,cs.paddingLeft),t:_2c7.toPixelValue(node,cs.paddingTop),w:bb.w-pe.w,h:bb.h-pe.h};this.layout();},layout:function(){},_setupChild:function(_2cb){var cls=this.baseClass+"-child "+(_2cb.baseClass?this.baseClass+"-"+_2cb.baseClass:"");_2c5.add(_2cb.domNode,cls);},addChild:function(_2cc,_2cd){this.inherited(arguments);if(this._started){this._setupChild(_2cc);}},removeChild:function(_2ce){var cls=this.baseClass+"-child"+(_2ce.baseClass?" "+this.baseClass+"-"+_2ce.baseClass:"");_2c5.remove(_2ce.domNode,cls);this.inherited(arguments);}});});},"dijit/form/_Spinner":function(){require({cache:{"url:dijit/form/templates/Spinner.html":"<div class=\"dijit dijitReset dijitInline dijitLeft\"\n\tid=\"widget_${id}\" role=\"presentation\"\n\t><div class=\"dijitReset dijitButtonNode dijitSpinnerButtonContainer\"\n\t\t><input class=\"dijitReset dijitInputField dijitSpinnerButtonInner\" type=\"text\" tabIndex=\"-1\" readonly=\"readonly\" role=\"presentation\"\n\t\t/><div class=\"dijitReset dijitLeft dijitButtonNode dijitArrowButton dijitUpArrowButton\"\n\t\t\tdata-dojo-attach-point=\"upArrowNode\"\n\t\t\t><div class=\"dijitArrowButtonInner\"\n\t\t\t\t><input class=\"dijitReset dijitInputField\" value=\"&#9650; \" type=\"text\" tabIndex=\"-1\" readonly=\"readonly\" role=\"presentation\"\n\t\t\t\t\t${_buttonInputDisabled}\n\t\t\t/></div\n\t\t></div\n\t\t><div class=\"dijitReset dijitLeft dijitButtonNode dijitArrowButton dijitDownArrowButton\"\n\t\t\tdata-dojo-attach-point=\"downArrowNode\"\n\t\t\t><div class=\"dijitArrowButtonInner\"\n\t\t\t\t><input class=\"dijitReset dijitInputField\" value=\"&#9660; \" type=\"text\" tabIndex=\"-1\" readonly=\"readonly\" role=\"presentation\"\n\t\t\t\t\t${_buttonInputDisabled}\n\t\t\t/></div\n\t\t></div\n\t></div\n\t><div class='dijitReset dijitValidationContainer'\n\t\t><input class=\"dijitReset dijitInputField dijitValidationIcon dijitValidationInner\" value=\"&#935; \" type=\"text\" tabIndex=\"-1\" readonly=\"readonly\" role=\"presentation\"\n\t/></div\n\t><div class=\"dijitReset dijitInputField dijitInputContainer\"\n\t\t><input class='dijitReset dijitInputInner' data-dojo-attach-point=\"textbox,focusNode\" type=\"${type}\" data-dojo-attach-event=\"onkeypress:_onKeyPress\"\n\t\t\trole=\"spinbutton\" autocomplete=\"off\" ${!nameAttrSetting}\n\t/></div\n></div>\n"}});define("dijit/form/_Spinner",["dojo/_base/declare","dojo/_base/event","dojo/keys","dojo/_base/lang","dojo/sniff","dojo/mouse","../typematic","./RangeBoundTextBox","dojo/text!./templates/Spinner.html","./_TextBoxMixin"],function(_2cf,_2d0,keys,lang,has,_2d1,_2d2,_2d3,_2d4,_2d5){return _2cf("dijit.form._Spinner",_2d3,{defaultTimeout:500,minimumTimeout:10,timeoutChangeRate:0.9,smallDelta:1,largeDelta:10,templateString:_2d4,baseClass:"dijitTextBox dijitSpinner",cssStateNodes:{"upArrowNode":"dijitUpArrowButton","downArrowNode":"dijitDownArrowButton"},adjust:function(val){return val;},_arrowPressed:function(_2d6,_2d7,_2d8){if(this.disabled||this.readOnly){return;}this._setValueAttr(this.adjust(this.get("value"),_2d7*_2d8),false);_2d5.selectInputText(this.textbox,this.textbox.value.length);},_arrowReleased:function(){this._wheelTimer=null;},_typematicCallback:function(_2d9,node,evt){var inc=this.smallDelta;if(node==this.textbox){var key=evt.charOrCode;inc=(key==keys.PAGE_UP||key==keys.PAGE_DOWN)?this.largeDelta:this.smallDelta;node=(key==keys.UP_ARROW||key==keys.PAGE_UP)?this.upArrowNode:this.downArrowNode;}if(_2d9==-1){this._arrowReleased(node);}else{this._arrowPressed(node,(node==this.upArrowNode)?1:-1,inc);}},_wheelTimer:null,_mouseWheeled:function(evt){_2d0.stop(evt);var _2da=evt.wheelDelta/120;if(Math.floor(_2da)!=_2da){_2da=evt.wheelDelta>0?1:-1;}var _2db=evt.detail?(evt.detail*-1):_2da;if(_2db!==0){var node=this[(_2db>0?"upArrowNode":"downArrowNode")];this._arrowPressed(node,_2db,this.smallDelta);if(this._wheelTimer){this._wheelTimer.remove();}this._wheelTimer=this.defer(function(){this._arrowReleased(node);},50);}},postCreate:function(){this.inherited(arguments);this.connect(this.domNode,_2d1.wheel,"_mouseWheeled");this.own(_2d2.addListener(this.upArrowNode,this.textbox,{charOrCode:keys.UP_ARROW,ctrlKey:false,altKey:false,shiftKey:false,metaKey:false},this,"_typematicCallback",this.timeoutChangeRate,this.defaultTimeout,this.minimumTimeout),_2d2.addListener(this.downArrowNode,this.textbox,{charOrCode:keys.DOWN_ARROW,ctrlKey:false,altKey:false,shiftKey:false,metaKey:false},this,"_typematicCallback",this.timeoutChangeRate,this.defaultTimeout,this.minimumTimeout),_2d2.addListener(this.upArrowNode,this.textbox,{charOrCode:keys.PAGE_UP,ctrlKey:false,altKey:false,shiftKey:false,metaKey:false},this,"_typematicCallback",this.timeoutChangeRate,this.defaultTimeout,this.minimumTimeout),_2d2.addListener(this.downArrowNode,this.textbox,{charOrCode:keys.PAGE_DOWN,ctrlKey:false,altKey:false,shiftKey:false,metaKey:false},this,"_typematicCallback",this.timeoutChangeRate,this.defaultTimeout,this.minimumTimeout));}});});},"dojo/store/Memory":function(){define(["../_base/declare","./util/QueryResults","./util/SimpleQueryEngine"],function(_2dc,_2dd,_2de){var base=null;return _2dc("dojo.store.Memory",base,{constructor:function(_2df){for(var i in _2df){this[i]=_2df[i];}this.setData(this.data||[]);},data:null,idProperty:"id",index:null,queryEngine:_2de,get:function(id){return this.data[this.index[id]];},getIdentity:function(_2e0){return _2e0[this.idProperty];},put:function(_2e1,_2e2){var data=this.data,_2e3=this.index,_2e4=this.idProperty;var id=_2e1[_2e4]=(_2e2&&"id" in _2e2)?_2e2.id:_2e4 in _2e1?_2e1[_2e4]:Math.random();if(id in _2e3){if(_2e2&&_2e2.overwrite===false){throw new Error("Object already exists");}data[_2e3[id]]=_2e1;}else{_2e3[id]=data.push(_2e1)-1;}return id;},add:function(_2e5,_2e6){(_2e6=_2e6||{}).overwrite=false;return this.put(_2e5,_2e6);},remove:function(id){var _2e7=this.index;var data=this.data;if(id in _2e7){data.splice(_2e7[id],1);this.setData(data);return true;}},query:function(_2e8,_2e9){return _2dd(this.queryEngine(_2e8,_2e9)(this.data));},setData:function(data){if(data.items){this.idProperty=data.identifier;data=this.data=data.items;}else{this.data=data;}this.index={};for(var i=0,l=data.length;i<l;i++){this.index[data[i][this.idProperty]]=i;}}});});},"dijit/Editor":function(){define("dijit/Editor",["dojo/_base/array","dojo/_base/declare","dojo/_base/Deferred","dojo/i18n","dojo/dom-attr","dojo/dom-class","dojo/dom-geometry","dojo/dom-style","dojo/_base/event","dojo/keys","dojo/_base/lang","dojo/sniff","dojo/string","dojo/topic","dojo/_base/window","./_base/focus","./_Container","./Toolbar","./ToolbarSeparator","./layout/_LayoutWidget","./form/ToggleButton","./_editor/_Plugin","./_editor/plugins/EnterKeyHandling","./_editor/html","./_editor/range","./_editor/RichText","./main","dojo/i18n!./_editor/nls/commands"],function(_2ea,_2eb,_2ec,i18n,_2ed,_2ee,_2ef,_2f0,_2f1,keys,lang,has,_2f2,_2f3,win,_2f4,_2f5,_2f6,_2f7,_2f8,_2f9,_2fa,_2fb,html,_2fc,_2fd,_2fe){var _2ff=_2eb("dijit.Editor",_2fd,{plugins:null,extraPlugins:null,constructor:function(){if(!lang.isArray(this.plugins)){this.plugins=["undo","redo","|","cut","copy","paste","|","bold","italic","underline","strikethrough","|","insertOrderedList","insertUnorderedList","indent","outdent","|","justifyLeft","justifyRight","justifyCenter","justifyFull",_2fb];}this._plugins=[];this._editInterval=this.editActionInterval*1000;if(has("ie")){this.events.push("onBeforeDeactivate");this.events.push("onBeforeActivate");}},postMixInProperties:function(){this.setValueDeferred=new _2ec();this.inherited(arguments);},postCreate:function(){this._steps=this._steps.slice(0);this._undoedSteps=this._undoedSteps.slice(0);if(lang.isArray(this.extraPlugins)){this.plugins=this.plugins.concat(this.extraPlugins);}this.inherited(arguments);this.commands=i18n.getLocalization("dijit._editor","commands",this.lang);if(!this.toolbar){this.toolbar=new _2f6({ownerDocument:this.ownerDocument,dir:this.dir,lang:this.lang});this.header.appendChild(this.toolbar.domNode);}_2ea.forEach(this.plugins,this.addPlugin,this);this.setValueDeferred.resolve(true);_2ee.add(this.iframe.parentNode,"dijitEditorIFrameContainer");_2ee.add(this.iframe,"dijitEditorIFrame");_2ed.set(this.iframe,"allowTransparency",true);if(has("webkit")){_2f0.set(this.domNode,"KhtmlUserSelect","none");}this.toolbar.startup();this.onNormalizedDisplayChanged();},destroy:function(){_2ea.forEach(this._plugins,function(p){if(p&&p.destroy){p.destroy();}});this._plugins=[];this.toolbar.destroyRecursive();delete this.toolbar;this.inherited(arguments);},addPlugin:function(_300,_301){var args=lang.isString(_300)?{name:_300}:lang.isFunction(_300)?{ctor:_300}:_300;if(!args.setEditor){var o={"args":args,"plugin":null,"editor":this};if(args.name){if(_2fa.registry[args.name]){o.plugin=_2fa.registry[args.name](args);}else{_2f3.publish(_2fe._scopeName+".Editor.getPlugin",o);}}if(!o.plugin){try{var pc=args.ctor||lang.getObject(args.name)||require(args.name);if(pc){o.plugin=new pc(args);}}catch(e){throw new Error(this.id+": cannot find plugin ["+args.name+"]");}}if(!o.plugin){throw new Error(this.id+": cannot find plugin ["+args.name+"]");}_300=o.plugin;}if(arguments.length>1){this._plugins[_301]=_300;}else{this._plugins.push(_300);}_300.setEditor(this);if(lang.isFunction(_300.setToolbar)){_300.setToolbar(this.toolbar);}},resize:function(size){if(size){_2f8.prototype.resize.apply(this,arguments);}},layout:function(){var _302=(this._contentBox.h-(this.getHeaderHeight()+this.getFooterHeight()+_2ef.getPadBorderExtents(this.iframe.parentNode).h+_2ef.getMarginExtents(this.iframe.parentNode).h));this.editingArea.style.height=_302+"px";if(this.iframe){this.iframe.style.height="100%";}this._layoutMode=true;},_onIEMouseDown:function(e){var _303;var b=this.document.body;var _304=b.clientWidth;var _305=b.clientHeight;var _306=b.clientLeft;var _307=b.offsetWidth;var _308=b.offsetHeight;var _309=b.offsetLeft;if(/^rtl$/i.test(b.dir||"")){if(_304<_307&&e.x>_304&&e.x<_307){_303=true;}}else{if(e.x<_306&&e.x>_309){_303=true;}}if(!_303){if(_305<_308&&e.y>_305&&e.y<_308){_303=true;}}if(!_303){delete this._cursorToStart;delete this._savedSelection;if(e.target.tagName=="BODY"){this.defer("placeCursorAtEnd");}this.inherited(arguments);}},onBeforeActivate:function(){this._restoreSelection();},onBeforeDeactivate:function(e){if(this.customUndo){this.endEditing(true);}if(e.target.tagName!="BODY"){this._saveSelection();}},customUndo:true,editActionInterval:3,beginEditing:function(cmd){if(!this._inEditing){this._inEditing=true;this._beginEditing(cmd);}if(this.editActionInterval>0){if(this._editTimer){this._editTimer.remove();}this._editTimer=this.defer("endEditing",this._editInterval);}},_steps:[],_undoedSteps:[],execCommand:function(cmd){if(this.customUndo&&(cmd=="undo"||cmd=="redo")){return this[cmd]();}else{if(this.customUndo){this.endEditing();this._beginEditing();}var r=this.inherited(arguments);if(this.customUndo){this._endEditing();}return r;}},_pasteImpl:function(){return this._clipboardCommand("paste");},_cutImpl:function(){return this._clipboardCommand("cut");},_copyImpl:function(){return this._clipboardCommand("copy");},_clipboardCommand:function(cmd){var r;try{r=this.document.execCommand(cmd,false,null);if(has("webkit")&&!r){throw {code:1011};}}catch(e){if(e.code==1011||(e.code==9&&has("opera"))){var sub=_2f2.substitute,_30a={cut:"X",copy:"C",paste:"V"};alert(sub(this.commands.systemShortcut,[this.commands[cmd],sub(this.commands[has("mac")?"appleKey":"ctrlKey"],[_30a[cmd]])]));}r=false;}return r;},queryCommandEnabled:function(cmd){if(this.customUndo&&(cmd=="undo"||cmd=="redo")){return cmd=="undo"?(this._steps.length>1):(this._undoedSteps.length>0);}else{return this.inherited(arguments);}},_moveToBookmark:function(b){var _30b=b.mark;var mark=b.mark;var col=b.isCollapsed;var r,_30c,_30d,sel;if(mark){if(has("ie")<9){if(lang.isArray(mark)){_30b=[];_2ea.forEach(mark,function(n){_30b.push(_2fc.getNode(n,this.editNode));},this);win.withGlobal(this.window,"moveToBookmark",_2f4,[{mark:_30b,isCollapsed:col}]);}else{if(mark.startContainer&&mark.endContainer){sel=_2fc.getSelection(this.window);if(sel&&sel.removeAllRanges){sel.removeAllRanges();r=_2fc.create(this.window);_30c=_2fc.getNode(mark.startContainer,this.editNode);_30d=_2fc.getNode(mark.endContainer,this.editNode);if(_30c&&_30d){r.setStart(_30c,mark.startOffset);r.setEnd(_30d,mark.endOffset);sel.addRange(r);}}}}}else{sel=_2fc.getSelection(this.window);if(sel&&sel.removeAllRanges){sel.removeAllRanges();r=_2fc.create(this.window);_30c=_2fc.getNode(mark.startContainer,this.editNode);_30d=_2fc.getNode(mark.endContainer,this.editNode);if(_30c&&_30d){r.setStart(_30c,mark.startOffset);r.setEnd(_30d,mark.endOffset);sel.addRange(r);}}}}},_changeToStep:function(from,to){this.setValue(to.text);var b=to.bookmark;if(!b){return;}this._moveToBookmark(b);},undo:function(){var ret=false;if(!this._undoRedoActive){this._undoRedoActive=true;this.endEditing(true);var s=this._steps.pop();if(s&&this._steps.length>0){this.focus();this._changeToStep(s,this._steps[this._steps.length-1]);this._undoedSteps.push(s);this.onDisplayChanged();delete this._undoRedoActive;ret=true;}delete this._undoRedoActive;}return ret;},redo:function(){var ret=false;if(!this._undoRedoActive){this._undoRedoActive=true;this.endEditing(true);var s=this._undoedSteps.pop();if(s&&this._steps.length>0){this.focus();this._changeToStep(this._steps[this._steps.length-1],s);this._steps.push(s);this.onDisplayChanged();ret=true;}delete this._undoRedoActive;}return ret;},endEditing:function(_30e){if(this._editTimer){this._editTimer=this._editTimer.remove();}if(this._inEditing){this._endEditing(_30e);this._inEditing=false;}},_getBookmark:function(){var b=win.withGlobal(this.window,_2f4.getBookmark);var tmp=[];if(b&&b.mark){var mark=b.mark;if(has("ie")<9){var sel=_2fc.getSelection(this.window);if(!lang.isArray(mark)){if(sel){var _30f;if(sel.rangeCount){_30f=sel.getRangeAt(0);}if(_30f){b.mark=_30f.cloneRange();}else{b.mark=win.withGlobal(this.window,_2f4.getBookmark);}}}else{_2ea.forEach(b.mark,function(n){tmp.push(_2fc.getIndex(n,this.editNode).o);},this);b.mark=tmp;}}try{if(b.mark&&b.mark.startContainer){tmp=_2fc.getIndex(b.mark.startContainer,this.editNode).o;b.mark={startContainer:tmp,startOffset:b.mark.startOffset,endContainer:b.mark.endContainer===b.mark.startContainer?tmp:_2fc.getIndex(b.mark.endContainer,this.editNode).o,endOffset:b.mark.endOffset};}}catch(e){b.mark=null;}}return b;},_beginEditing:function(){if(this._steps.length===0){this._steps.push({"text":html.getChildrenHtml(this.editNode),"bookmark":this._getBookmark()});}},_endEditing:function(){var v=html.getChildrenHtml(this.editNode);this._undoedSteps=[];this._steps.push({text:v,bookmark:this._getBookmark()});},onKeyDown:function(e){if(!has("ie")&&!this.iframe&&e.keyCode==keys.TAB&&!this.tabIndent){this._saveSelection();}if(!this.customUndo){this.inherited(arguments);return;}var k=e.keyCode;if(e.ctrlKey&&!e.altKey){if(k==90||k==122){_2f1.stop(e);this.undo();return;}else{if(k==89||k==121){_2f1.stop(e);this.redo();return;}}}this.inherited(arguments);switch(k){case keys.ENTER:case keys.BACKSPACE:case keys.DELETE:this.beginEditing();break;case 88:case 86:if(e.ctrlKey&&!e.altKey&&!e.metaKey){this.endEditing();if(e.keyCode==88){this.beginEditing("cut");}else{this.beginEditing("paste");}this.defer("endEditing",1);break;}default:if(!e.ctrlKey&&!e.altKey&&!e.metaKey&&(e.keyCode<keys.F1||e.keyCode>keys.F15)){this.beginEditing();break;}case keys.ALT:this.endEditing();break;case keys.UP_ARROW:case keys.DOWN_ARROW:case keys.LEFT_ARROW:case keys.RIGHT_ARROW:case keys.HOME:case keys.END:case keys.PAGE_UP:case keys.PAGE_DOWN:this.endEditing(true);break;case keys.CTRL:case keys.SHIFT:case keys.TAB:break;}},_onBlur:function(){this.inherited(arguments);this.endEditing(true);},_saveSelection:function(){try{this._savedSelection=this._getBookmark();}catch(e){}},_restoreSelection:function(){if(this._savedSelection){delete this._cursorToStart;if(win.withGlobal(this.window,"isCollapsed",_2f4)){this._moveToBookmark(this._savedSelection);}delete this._savedSelection;}},onClick:function(){this.endEditing(true);this.inherited(arguments);},replaceValue:function(html){if(!this.customUndo){this.inherited(arguments);}else{if(this.isClosed){this.setValue(html);}else{this.beginEditing();if(!html){html="&#160;";}this.setValue(html);this.endEditing();}}},_setDisabledAttr:function(_310){this.setValueDeferred.then(lang.hitch(this,function(){if((!this.disabled&&_310)||(!this._buttonEnabledPlugins&&_310)){_2ea.forEach(this._plugins,function(p){p.set("disabled",true);});}else{if(this.disabled&&!_310){_2ea.forEach(this._plugins,function(p){p.set("disabled",false);});}}}));this.inherited(arguments);},_setStateClass:function(){try{this.inherited(arguments);if(this.document&&this.document.body){_2f0.set(this.document.body,"color",_2f0.get(this.iframe,"color"));}}catch(e){}}});function _311(args){return new _2fa({command:args.name});};function _312(args){return new _2fa({buttonClass:_2f9,command:args.name});};lang.mixin(_2fa.registry,{"undo":_311,"redo":_311,"cut":_311,"copy":_311,"paste":_311,"insertOrderedList":_311,"insertUnorderedList":_311,"indent":_311,"outdent":_311,"justifyCenter":_311,"justifyFull":_311,"justifyLeft":_311,"justifyRight":_311,"delete":_311,"selectAll":_311,"removeFormat":_311,"unlink":_311,"insertHorizontalRule":_311,"bold":_312,"italic":_312,"underline":_312,"strikethrough":_312,"subscript":_312,"superscript":_312,"|":function(){return new _2fa({setEditor:function(_313){this.editor=_313;this.button=new _2f7({ownerDocument:_313.ownerDocument});}});}});return _2ff;});},"dojo/request/iframe":function(){define(["module","require","./watch","./util","./handlers","../_base/lang","../io-query","../query","../has","../dom","../dom-construct","../_base/window"],function(_314,_315,_316,util,_317,lang,_318,_319,has,dom,_31a,win){var mid=_314.id.replace(/[\/\.\-]/g,"_"),_31b=mid+"_onload";if(!win.global[_31b]){win.global[_31b]=function(){var dfd=_31c._currentDfd;if(!dfd){_31c._fireNextRequest();return;}var _31d=dfd.response,_31e=_31d.options,_31f=dom.byId(_31e.form)||dfd._tmpForm;if(_31f){var _320=dfd._contentToClean;for(var i=0;i<_320.length;i++){var key=_320[i];for(var j=0;j<_31f.childNodes.length;j++){var _321=_31f.childNodes[j];if(_321.name===key){_31a.destroy(_321);break;}}}dfd._originalAction&&_31f.setAttribute("action",dfd._originalAction);if(dfd._originalMethod){_31f.setAttribute("method",dfd._originalMethod);_31f.method=dfd._originalMethod;}if(dfd._originalTarget){_31f.setAttribute("target",dfd._originalTarget);_31f.target=dfd._originalTarget;}}if(dfd._tmpForm){_31a.destroy(dfd._tmpForm);delete dfd._tmpForm;}dfd._finished=true;};}function _322(name,_323,uri){if(win.global[name]){return win.global[name];}if(win.global.frames[name]){return win.global.frames[name];}if(!uri){if(has("config-useXDomain")&&!has("config-dojoBlankHtmlUrl")){console.warn("dojo/request/iframe: When using cross-domain Dojo builds,"+" please save dojo/resources/blank.html to your domain and set dojoConfig.dojoBlankHtmlUrl"+" to the path on your domain to blank.html");}uri=(has("config-dojoBlankHtmlUrl")||_315.toUrl("dojo/resources/blank.html"));}var _324=_31a.place("<iframe id=\""+name+"\" name=\""+name+"\" src=\""+uri+"\" onload=\""+_323+"\" style=\"position: absolute; left: 1px; top: 1px; height: 1px; width: 1px; visibility: hidden\">",win.body());win.global[name]=_324;return _324;};function _325(_326,src,_327){var _328=win.global.frames[_326.name];if(_328.contentWindow){_328=_328.contentWindow;}try{if(!_327){_328.location=src;}else{_328.location.replace(src);}}catch(e){console.log("dojo/request/iframe.setSrc: ",e);}};function doc(_329){if(_329.contentDocument){return _329.contentDocument;}var name=_329.name;if(name){var _32a=win.doc.getElementsByTagName("iframe");if(_329.document&&_32a[name].contentWindow&&_32a[name].contentWindow.document){return _32a[name].contentWindow.document;}else{if(win.doc.frames[name]&&win.doc.frames[name].document){return win.doc.frames[name].document;}}}return null;};function _32b(){return _31a.create("form",{name:mid+"_form",style:{position:"absolute",top:"-1000px",left:"-1000px"}},win.body());};function _32c(){var dfd;try{if(_31c._currentDfd||!_31c._dfdQueue.length){return;}do{dfd=_31c._currentDfd=_31c._dfdQueue.shift();}while(dfd&&(dfd.canceled||(dfd.isCanceled&&dfd.isCanceled()))&&_31c._dfdQueue.length);if(!dfd||dfd.canceled||(dfd.isCanceled&&dfd.isCanceled())){_31c._currentDfd=null;return;}var _32d=dfd.response,_32e=_32d.options,c2c=dfd._contentToClean=[],_32f=dom.byId(_32e.form),_330=util.notify,data=_32e.data||null,_331;if(!dfd._legacy&&_32e.method==="POST"&&!_32f){_32f=dfd._tmpForm=_32b();}else{if(_32e.method==="GET"&&_32f&&_32d.url.indexOf("?")>-1){_331=_32d.url.slice(_32d.url.indexOf("?")+1);data=lang.mixin(_318.queryToObject(_331),data);}}if(_32f){if(!dfd._legacy){var _332=_32f;while(_332=_332.parentNode&&_332!==win.doc.documentElement){}if(!_332){_32f.style.position="absolute";_32f.style.left="-1000px";_32f.style.top="-1000px";win.body().appendChild(_32f);}if(!_32f.name){_32f.name=mid+"_form";}}if(data){var _333=function(name,_334){_31a.create("input",{type:"hidden",name:name,value:_334},_32f);c2c.push(name);};for(var x in data){var val=data[x];if(lang.isArray(val)&&val.length>1){for(var i=0;i<val.length;i++){_333(x,val[i]);}}else{if(!_32f[x]){_333(x,val);}else{_32f[x].value=val;}}}}var _335=_32f.getAttributeNode("action"),_336=_32f.getAttributeNode("method"),_337=_32f.getAttributeNode("target");if(_32d.url){dfd._originalAction=_335?_335.value:null;if(_335){_335.value=_32d.url;}else{_32f.setAttribute("action",_32d.url);}}if(!dfd._legacy){dfd._originalMethod=_336?_336.value:null;if(_336){_336.value=_32e.method;}else{_32f.setAttribute("method",_32e.method);}}else{if(!_336||!_336.value){if(mthdNode){mthdNode.value=_32e.method;}else{fn.setAttribute("method",_32e.method);}}}dfd._originalTarget=_337?_337.value:null;if(_337){_337.value=_31c._iframeName;}else{_32f.setAttribute("target",_31c._iframeName);}_32f.target=_31c._iframeName;_330&&_330.emit("send",_32d,dfd.promise.cancel);_31c._notifyStart(_32d);_32f.submit();}else{var _338="";if(_32d.options.data){_338=_32d.options.data;if(typeof _338!=="string"){_338=_318.objectToQuery(_338);}}var _339=_32d.url+(_32d.url.indexOf("?")>-1?"&":"?")+_338;_330&&_330.emit("send",_32d,dfd.promise.cancel);_31c._notifyStart(_32d);_31c.setSrc(_31c._frame,_339,true);}}catch(e){dfd.reject(e);}};function _33a(_33b){return !this.isFulfilled();};function _33c(_33d){return !!this._finished;};function _33e(_33f,_340){if(!_340){try{var _341=_33f.options,doc=_31c.doc(_31c._frame),_342=_341.handleAs;if(_342!=="html"){if(_342==="xml"){if(doc.documentElement.tagName.toLowerCase()==="html"){_319("a",doc.documentElement).orphan();var _343=doc.documentElement.innerText;_343=_343.replace(/>\s+</g,"><");_33f.text=lang.trim(_343);}else{_33f.data=doc;}}else{_33f.text=doc.getElementsByTagName("textarea")[0].value;}_317(_33f);}else{_33f.data=doc;}}catch(e){_340=e;}}if(_340){this.reject(_340);}else{if(this._finished){this.resolve(_33f);}else{this.reject(new Error("Invalid dojo/request/iframe request state"));}}};function last(_344){this._callNext();};var _345={method:"POST"};function _31c(url,_346,_347){var _348=util.parseArgs(url,util.deepCreate(_345,_346),true);url=_348.url;_346=_348.options;if(_346.method!=="GET"&&_346.method!=="POST"){throw new Error(_346.method+" not supported by dojo/request/iframe");}if(!_31c._frame){_31c._frame=_31c.create(_31c._iframeName,_31b+"();");}var dfd=util.deferred(_348,null,_33a,_33c,_33e,last);dfd._callNext=function(){if(!this._calledNext){this._calledNext=true;_31c._currentDfd=null;_31c._fireNextRequest();}};dfd._legacy=_347;_31c._dfdQueue.push(dfd);_31c._fireNextRequest();_316(dfd);return _347?dfd:dfd.promise;};_31c.create=_322;_31c.doc=doc;_31c.setSrc=_325;_31c._iframeName=mid+"_IoIframe";_31c._notifyStart=function(){};_31c._dfdQueue=[];_31c._currentDfd=null;_31c._fireNextRequest=_32c;util.addCommonMethods(_31c,["GET","POST"]);return _31c;});},"dijit/Toolbar":function(){define("dijit/Toolbar",["require","dojo/_base/declare","dojo/has","dojo/keys","dojo/ready","./_Widget","./_KeyNavContainer","./_TemplatedMixin"],function(_349,_34a,has,keys,_34b,_34c,_34d,_34e){if(has("dijit-legacy-requires")){_34b(0,function(){var _34f=["dijit/ToolbarSeparator"];_349(_34f);});}return _34a("dijit.Toolbar",[_34c,_34e,_34d],{templateString:"<div class=\"dijit\" role=\"toolbar\" tabIndex=\"${tabIndex}\" data-dojo-attach-point=\"containerNode\">"+"</div>",baseClass:"dijitToolbar",postCreate:function(){this.inherited(arguments);this.connectKeyNavHandlers(this.isLeftToRight()?[keys.LEFT_ARROW]:[keys.RIGHT_ARROW],this.isLeftToRight()?[keys.RIGHT_ARROW]:[keys.LEFT_ARROW]);}});});},"dijit/_editor/plugins/LinkDialog":function(){define("dijit/_editor/plugins/LinkDialog",["require","dojo/_base/declare","dojo/dom-attr","dojo/keys","dojo/_base/lang","dojo/sniff","dojo/_base/query","dojo/string","../../_Widget","../_Plugin","../../form/DropDownButton","../range"],function(_350,_351,_352,keys,lang,has,_353,_354,_355,_356,_357,_358){var _359=_351("dijit._editor.plugins.LinkDialog",_356,{buttonClass:_357,useDefaultCommand:false,urlRegExp:"((https?|ftps?|file)\\://|./|../|/|)(/[a-zA-Z]{1,1}:/|)(((?:(?:[\\da-zA-Z](?:[-\\da-zA-Z]{0,61}[\\da-zA-Z])?)\\.)*(?:[a-zA-Z](?:[-\\da-zA-Z]{0,80}[\\da-zA-Z])?)\\.?)|(((\\d|[1-9]\\d|1\\d\\d|2[0-4]\\d|25[0-5])\\.){3}(\\d|[1-9]\\d|1\\d\\d|2[0-4]\\d|25[0-5])|(0[xX]0*[\\da-fA-F]?[\\da-fA-F]\\.){3}0[xX]0*[\\da-fA-F]?[\\da-fA-F]|(0+[0-3][0-7][0-7]\\.){3}0+[0-3][0-7][0-7]|(0|[1-9]\\d{0,8}|[1-3]\\d{9}|4[01]\\d{8}|42[0-8]\\d{7}|429[0-3]\\d{6}|4294[0-8]\\d{5}|42949[0-5]\\d{4}|429496[0-6]\\d{3}|4294967[01]\\d{2}|42949672[0-8]\\d|429496729[0-5])|0[xX]0*[\\da-fA-F]{1,8}|([\\da-fA-F]{1,4}\\:){7}[\\da-fA-F]{1,4}|([\\da-fA-F]{1,4}\\:){6}((\\d|[1-9]\\d|1\\d\\d|2[0-4]\\d|25[0-5])\\.){3}(\\d|[1-9]\\d|1\\d\\d|2[0-4]\\d|25[0-5])))(\\:\\d+)?(/(?:[^?#\\s/]+/)*(?:[^?#\\s/]{0,}(?:\\?[^?#\\s/]*)?(?:#.*)?)?)?",emailRegExp:"<?(mailto\\:)([!#-'*+\\-\\/-9=?A-Z^-~]+[.])*[!#-'*+\\-\\/-9=?A-Z^-~]+"+"@"+"((?:(?:[\\da-zA-Z](?:[-\\da-zA-Z]{0,61}[\\da-zA-Z])?)\\.)+(?:[a-zA-Z](?:[-\\da-zA-Z]{0,6}[\\da-zA-Z])?)\\.?)|localhost|^[^-][a-zA-Z0-9_-]*>?",htmlTemplate:"<a href=\"${urlInput}\" _djrealurl=\"${urlInput}\""+" target=\"${targetSelect}\""+">${textInput}</a>",tag:"a",_hostRxp:/^((([^\[:]+):)?([^@]+)@)?(\[([^\]]+)\]|([^\[:]*))(:([0-9]+))?$/,_userAtRxp:/^([!#-'*+\-\/-9=?A-Z^-~]+[.])*[!#-'*+\-\/-9=?A-Z^-~]+@/i,linkDialogTemplate:["<table role='presentation'><tr><td>","<label for='${id}_urlInput'>${url}</label>","</td><td>","<input data-dojo-type='dijit.form.ValidationTextBox' required='true' "+"id='${id}_urlInput' name='urlInput' data-dojo-props='intermediateChanges:true'/>","</td></tr><tr><td>","<label for='${id}_textInput'>${text}</label>","</td><td>","<input data-dojo-type='dijit.form.ValidationTextBox' required='true' id='${id}_textInput' "+"name='textInput' data-dojo-props='intermediateChanges:true'/>","</td></tr><tr><td>","<label for='${id}_targetSelect'>${target}</label>","</td><td>","<select id='${id}_targetSelect' name='targetSelect' data-dojo-type='dijit.form.Select'>","<option selected='selected' value='_self'>${currentWindow}</option>","<option value='_blank'>${newWindow}</option>","<option value='_top'>${topWindow}</option>","<option value='_parent'>${parentWindow}</option>","</select>","</td></tr><tr><td colspan='2'>","<button data-dojo-type='dijit.form.Button' type='submit' id='${id}_setButton'>${set}</button>","<button data-dojo-type='dijit.form.Button' type='button' id='${id}_cancelButton'>${buttonCancel}</button>","</td></tr></table>"].join(""),_initButton:function(){this.inherited(arguments);this.button.loadDropDown=lang.hitch(this,"_loadDropDown");this._connectTagEvents();},_loadDropDown:function(_35a){_350(["dojo/i18n","../../TooltipDialog","../../registry","../../form/Button","../../form/Select","../../form/ValidationTextBox","dojo/i18n!../../nls/common","dojo/i18n!../nls/LinkDialog"],lang.hitch(this,function(i18n,_35b,_35c){var _35d=this;this.tag=this.command=="insertImage"?"img":"a";var _35e=lang.delegate(i18n.getLocalization("dijit","common",this.lang),i18n.getLocalization("dijit._editor","LinkDialog",this.lang));var _35f=(this.dropDown=this.button.dropDown=new _35b({title:_35e[this.command+"Title"],ownerDocument:this.editor.ownerDocument,dir:this.editor.dir,execute:lang.hitch(this,"setValue"),onOpen:function(){_35d._onOpenDialog();_35b.prototype.onOpen.apply(this,arguments);},onCancel:function(){setTimeout(lang.hitch(_35d,"_onCloseDialog"),0);}}));_35e.urlRegExp=this.urlRegExp;_35e.id=_35c.getUniqueId(this.editor.id);this._uniqueId=_35e.id;this._setContent(_35f.title+"<div style='border-bottom: 1px black solid;padding-bottom:2pt;margin-bottom:4pt'></div>"+_354.substitute(this.linkDialogTemplate,_35e));_35f.startup();this._urlInput=_35c.byId(this._uniqueId+"_urlInput");this._textInput=_35c.byId(this._uniqueId+"_textInput");this._setButton=_35c.byId(this._uniqueId+"_setButton");this.connect(_35c.byId(this._uniqueId+"_cancelButton"),"onClick",function(){this.dropDown.onCancel();});if(this._urlInput){this.connect(this._urlInput,"onChange","_checkAndFixInput");}if(this._textInput){this.connect(this._textInput,"onChange","_checkAndFixInput");}this._urlRegExp=new RegExp("^"+this.urlRegExp+"$","i");this._emailRegExp=new RegExp("^"+this.emailRegExp+"$","i");this._urlInput.isValid=lang.hitch(this,function(){var _360=this._urlInput.get("value");return this._urlRegExp.test(_360)||this._emailRegExp.test(_360);});this.connect(_35f.domNode,"onkeypress",function(e){if(e&&e.charOrCode==keys.ENTER&&!e.shiftKey&&!e.metaKey&&!e.ctrlKey&&!e.altKey){if(!this._setButton.get("disabled")){_35f.onExecute();_35f.execute(_35f.get("value"));}}});_35a();}));},_checkAndFixInput:function(){var self=this;var url=this._urlInput.get("value");var _361=function(url){var _362=false;var _363=false;if(url&&url.length>1){url=lang.trim(url);if(url.indexOf("mailto:")!==0){if(url.indexOf("/")>0){if(url.indexOf("://")===-1){if(url.charAt(0)!=="/"&&url.indexOf("./")&&url.indexOf("../")!==0){if(self._hostRxp.test(url)){_362=true;}}}}else{if(self._userAtRxp.test(url)){_363=true;}}}}if(_362){self._urlInput.set("value","http://"+url);}if(_363){self._urlInput.set("value","mailto:"+url);}self._setButton.set("disabled",!self._isValid());};if(this._delayedCheck){clearTimeout(this._delayedCheck);this._delayedCheck=null;}this._delayedCheck=setTimeout(function(){_361(url);},250);},_connectTagEvents:function(){this.editor.onLoadDeferred.then(lang.hitch(this,function(){this.connect(this.editor.editNode,"ondblclick",this._onDblClick);}));},_isValid:function(){return this._urlInput.isValid()&&this._textInput.isValid();},_setContent:function(_364){this.dropDown.set({parserScope:"dojo",content:_364});},_checkValues:function(args){if(args&&args.urlInput){args.urlInput=args.urlInput.replace(/"/g,"&quot;");}return args;},setValue:function(args){this._onCloseDialog();if(has("ie")<9){var sel=_358.getSelection(this.editor.window);var _365=sel.getRangeAt(0);var a=_365.endContainer;if(a.nodeType===3){a=a.parentNode;}if(a&&(a.nodeName&&a.nodeName.toLowerCase()!==this.tag)){a=this.editor._sCall("getSelectedElement",[this.tag]);}if(a&&(a.nodeName&&a.nodeName.toLowerCase()===this.tag)){if(this.editor.queryCommandEnabled("unlink")){this.editor._sCall("selectElementChildren",[a]);this.editor.execCommand("unlink");}}}args=this._checkValues(args);this.editor.execCommand("inserthtml",_354.substitute(this.htmlTemplate,args));_353("a",this.editor.document).forEach(function(a){if(!a.innerHTML&&!_352.has(a,"name")){a.parentNode.removeChild(a);}},this);},_onCloseDialog:function(){this.editor.focus();},_getCurrentValues:function(a){var url,text,_366;if(a&&a.tagName.toLowerCase()===this.tag){url=a.getAttribute("_djrealurl")||a.getAttribute("href");_366=a.getAttribute("target")||"_self";text=a.textContent||a.innerText;this.editor._sCall("selectElement",[a,true]);}else{text=this.editor._sCall("getSelectedText");}return {urlInput:url||"",textInput:text||"",targetSelect:_366||""};},_onOpenDialog:function(){var a,b,fc;if(has("ie")){var sel=_358.getSelection(this.editor.window);var _367=sel.getRangeAt(0);a=_367.endContainer;if(a.nodeType===3){a=a.parentNode;}if(a&&(a.nodeName&&a.nodeName.toLowerCase()!==this.tag)){a=this.editor._sCall("getSelectedElement",[this.tag]);}if(!a||(a.nodeName&&a.nodeName.toLowerCase()!==this.tag)){b=this.editor._sCall("getAncestorElement",[this.tag]);if(b&&(b.nodeName&&b.nodeName.toLowerCase()==this.tag)){a=b;this.editor._sCall("selectElement",[a]);}else{if(_367.startContainer===_367.endContainer){fc=_367.startContainer.firstChild;if(fc&&(fc.nodeName&&fc.nodeName.toLowerCase()==this.tag)){a=fc;this.editor._sCall("selectElement",[a]);}}}}}else{a=this.editor._sCall("getAncestorElement",[this.tag]);}this.dropDown.reset();this._setButton.set("disabled",true);this.dropDown.set("value",this._getCurrentValues(a));},_onDblClick:function(e){if(e&&e.target){var t=e.target;var tg=t.tagName?t.tagName.toLowerCase():"";if(tg===this.tag&&_352.get(t,"href")){var _368=this.editor;this.editor._sCall("selectElement",[t]);_368.onDisplayChanged();if(_368._updateTimer){_368._updateTimer.remove();delete _368._updateTimer;}_368.onNormalizedDisplayChanged();var _369=this.button;setTimeout(function(){_369.set("disabled",false);_369.loadAndOpenDropDown().then(function(){if(_369.dropDown.focus){_369.dropDown.focus();}});},10);}}}});var _36a=_351("dijit._editor.plugins.ImgLinkDialog",[_359],{linkDialogTemplate:["<table role='presentation'><tr><td>","<label for='${id}_urlInput'>${url}</label>","</td><td>","<input dojoType='dijit.form.ValidationTextBox' regExp='${urlRegExp}' "+"required='true' id='${id}_urlInput' name='urlInput' data-dojo-props='intermediateChanges:true'/>","</td></tr><tr><td>","<label for='${id}_textInput'>${text}</label>","</td><td>","<input data-dojo-type='dijit.form.ValidationTextBox' required='false' id='${id}_textInput' "+"name='textInput' data-dojo-props='intermediateChanges:true'/>","</td></tr><tr><td>","</td><td>","</td></tr><tr><td colspan='2'>","<button data-dojo-type='dijit.form.Button' type='submit' id='${id}_setButton'>${set}</button>","<button data-dojo-type='dijit.form.Button' type='button' id='${id}_cancelButton'>${buttonCancel}</button>","</td></tr></table>"].join(""),htmlTemplate:"<img src=\"${urlInput}\" _djrealurl=\"${urlInput}\" alt=\"${textInput}\" />",tag:"img",_getCurrentValues:function(img){var url,text;if(img&&img.tagName.toLowerCase()===this.tag){url=img.getAttribute("_djrealurl")||img.getAttribute("src");text=img.getAttribute("alt");this.editor._sCall("selectElement",[img,true]);}else{text=this.editor._sCall("getSelectedText",[]);}return {urlInput:url||"",textInput:text||""};},_isValid:function(){return this._urlInput.isValid();},_connectTagEvents:function(){this.inherited(arguments);this.editor.onLoadDeferred.then(lang.hitch(this,function(){this.connect(this.editor.editNode,"onmousedown",this._selectTag);}));},_selectTag:function(e){if(e&&e.target){var t=e.target;var tg=t.tagName?t.tagName.toLowerCase():"";if(tg===this.tag){this.editor._sCall("selectElement",[t]);}}},_checkValues:function(args){if(args&&args.urlInput){args.urlInput=args.urlInput.replace(/"/g,"&quot;");}if(args&&args.textInput){args.textInput=args.textInput.replace(/"/g,"&quot;");}return args;},_onDblClick:function(e){if(e&&e.target){var t=e.target;var tg=t.tagName?t.tagName.toLowerCase():"";if(tg===this.tag&&_352.get(t,"src")){var _36b=this.editor;this.editor._sCall("selectElement",[t]);_36b.onDisplayChanged();if(_36b._updateTimer){_36b._updateTimer.remove();delete _36b._updateTimer;}_36b.onNormalizedDisplayChanged();var _36c=this.button;setTimeout(function(){_36c.set("disabled",false);_36c.loadAndOpenDropDown().then(function(){if(_36c.dropDown.focus){_36c.dropDown.focus();}});},10);}}}});_356.registry["createLink"]=function(){return new _359({command:"createLink"});};_356.registry["insertImage"]=function(){return new _36a({command:"insertImage"});};_359.ImgLinkDialog=_36a;return _359;});},"dojo/data/util/simpleFetch":function(){define(["../../_base/lang","../../_base/kernel","./sorter"],function(lang,_36d,_36e){var _36f={};lang.setObject("dojo.data.util.simpleFetch",_36f);_36f.errorHandler=function(_370,_371){if(_371.onError){var _372=_371.scope||_36d.global;_371.onError.call(_372,_370,_371);}};_36f.fetchHandler=function(_373,_374){var _375=_374.abort||null,_376=false,_377=_374.start?_374.start:0,_378=(_374.count&&(_374.count!==Infinity))?(_377+_374.count):_373.length;_374.abort=function(){_376=true;if(_375){_375.call(_374);}};var _379=_374.scope||_36d.global;if(!_374.store){_374.store=this;}if(_374.onBegin){_374.onBegin.call(_379,_373.length,_374);}if(_374.sort){_373.sort(_36e.createSortFunction(_374.sort,this));}if(_374.onItem){for(var i=_377;(i<_373.length)&&(i<_378);++i){var item=_373[i];if(!_376){_374.onItem.call(_379,item,_374);}}}if(_374.onComplete&&!_376){var _37a=null;if(!_374.onItem){_37a=_373.slice(_377,_378);}_374.onComplete.call(_379,_37a,_374);}};_36f.fetch=function(_37b){_37b=_37b||{};if(!_37b.store){_37b.store=this;}this._fetchItems(_37b,lang.hitch(this,"fetchHandler"),lang.hitch(this,"errorHandler"));return _37b;};return _36f;});},"dijit/_KeyNavContainer":function(){define("dijit/_KeyNavContainer",["dojo/_base/kernel","./_Container","./_FocusMixin","dojo/_base/array","dojo/keys","dojo/_base/declare","dojo/_base/event","dojo/dom-attr","dojo/_base/lang"],function(_37c,_37d,_37e,_37f,keys,_380,_381,_382,lang){return _380("dijit._KeyNavContainer",[_37e,_37d],{tabIndex:"0",connectKeyNavHandlers:function(_383,_384){var _385=(this._keyNavCodes={});var prev=lang.hitch(this,"focusPrev");var next=lang.hitch(this,"focusNext");_37f.forEach(_383,function(code){_385[code]=prev;});_37f.forEach(_384,function(code){_385[code]=next;});_385[keys.HOME]=lang.hitch(this,"focusFirstChild");_385[keys.END]=lang.hitch(this,"focusLastChild");this.connect(this.domNode,"onkeypress","_onContainerKeypress");this.connect(this.domNode,"onfocus","_onContainerFocus");},startupKeyNavChildren:function(){_37c.deprecated("startupKeyNavChildren() call no longer needed","","2.0");},startup:function(){this.inherited(arguments);_37f.forEach(this.getChildren(),lang.hitch(this,"_startupChild"));},addChild:function(_386,_387){this.inherited(arguments);this._startupChild(_386);},focus:function(){this.focusFirstChild();},focusFirstChild:function(){this.focusChild(this._getFirstFocusableChild());},focusLastChild:function(){this.focusChild(this._getLastFocusableChild());},focusNext:function(){this.focusChild(this._getNextFocusableChild(this.focusedChild,1));},focusPrev:function(){this.focusChild(this._getNextFocusableChild(this.focusedChild,-1),true);},focusChild:function(_388,last){if(!_388){return;}if(this.focusedChild&&_388!==this.focusedChild){this._onChildBlur(this.focusedChild);}_388.set("tabIndex",this.tabIndex);_388.focus(last?"end":"start");this._set("focusedChild",_388);},_startupChild:function(_389){_389.set("tabIndex","-1");this.connect(_389,"_onFocus",function(){_389.set("tabIndex",this.tabIndex);});this.connect(_389,"_onBlur",function(){_389.set("tabIndex","-1");});},_onContainerFocus:function(evt){if(evt.target!==this.domNode||this.focusedChild){return;}this.focusFirstChild();_382.set(this.domNode,"tabIndex","-1");},_onBlur:function(evt){if(this.tabIndex){_382.set(this.domNode,"tabIndex",this.tabIndex);}this.focusedChild=null;this.inherited(arguments);},_onContainerKeypress:function(evt){if(evt.ctrlKey||evt.altKey){return;}var func=this._keyNavCodes[evt.charOrCode];if(func){func();_381.stop(evt);}},_onChildBlur:function(){},_getFirstFocusableChild:function(){return this._getNextFocusableChild(null,1);},_getLastFocusableChild:function(){return this._getNextFocusableChild(null,-1);},_getNextFocusableChild:function(_38a,dir){if(_38a){_38a=this._getSiblingOfChild(_38a,dir);}var _38b=this.getChildren();for(var i=0;i<_38b.length;i++){if(!_38a){_38a=_38b[(dir>0)?0:(_38b.length-1)];}if(_38a.isFocusable()){return _38a;}_38a=this._getSiblingOfChild(_38a,dir);}return null;}});});},"dijit/_Contained":function(){define("dijit/_Contained",["dojo/_base/declare","./registry"],function(_38c,_38d){return _38c("dijit._Contained",null,{_getSibling:function(_38e){var node=this.domNode;do{node=node[_38e+"Sibling"];}while(node&&node.nodeType!=1);return node&&_38d.byNode(node);},getPreviousSibling:function(){return this._getSibling("previous");},getNextSibling:function(){return this._getSibling("next");},getIndexInParent:function(){var p=this.getParent();if(!p||!p.getIndexOfChild){return -1;}return p.getIndexOfChild(this);}});});},"dijit/form/DataList":function(){define("dijit/form/DataList",["dojo/_base/declare","dojo/dom","dojo/_base/lang","dojo/query","dojo/store/Memory","../registry"],function(_38f,dom,lang,_390,_391,_392){function _393(_394){return {id:_394.value,value:_394.value,name:lang.trim(_394.innerText||_394.textContent||"")};};return _38f("dijit.form.DataList",_391,{constructor:function(_395,_396){this.domNode=dom.byId(_396);lang.mixin(this,_395);if(this.id){_392.add(this);}this.domNode.style.display="none";this.inherited(arguments,[{data:_390("option",this.domNode).map(_393)}]);},destroy:function(){_392.remove(this.id);},fetchSelectedItem:function(){var _397=_390("> option[selected]",this.domNode)[0]||_390("> option",this.domNode)[0];return _397&&_393(_397);}});});},"dijit/_editor/_Plugin":function(){define("dijit/_editor/_Plugin",["dojo/_base/connect","dojo/_base/declare","dojo/_base/lang","../form/Button"],function(_398,_399,lang,_39a){var _39b=_399("dijit._editor._Plugin",null,{constructor:function(args){this.params=args||{};lang.mixin(this,this.params);this._connects=[];this._attrPairNames={};},editor:null,iconClassPrefix:"dijitEditorIcon",button:null,command:"",useDefaultCommand:true,buttonClass:_39a,disabled:false,getLabel:function(key){return this.editor.commands[key];},_initButton:function(){if(this.command.length){var _39c=this.getLabel(this.command),_39d=this.editor,_39e=this.iconClassPrefix+" "+this.iconClassPrefix+this.command.charAt(0).toUpperCase()+this.command.substr(1);if(!this.button){var _39f=lang.mixin({label:_39c,ownerDocument:_39d.ownerDocument,dir:_39d.dir,lang:_39d.lang,showLabel:false,iconClass:_39e,dropDown:this.dropDown,tabIndex:"-1"},this.params||{});this.button=new this.buttonClass(_39f);}}if(this.get("disabled")&&this.button){this.button.set("disabled",this.get("disabled"));}},destroy:function(){var h;while(h=this._connects.pop()){h.remove();}if(this.dropDown){this.dropDown.destroyRecursive();}},connect:function(o,f,tf){this._connects.push(_398.connect(o,f,this,tf));},updateState:function(){var e=this.editor,c=this.command,_3a0,_3a1;if(!e||!e.isLoaded||!c.length){return;}var _3a2=this.get("disabled");if(this.button){try{_3a1=!_3a2&&e.queryCommandEnabled(c);if(this.enabled!==_3a1){this.enabled=_3a1;this.button.set("disabled",!_3a1);}if(_3a1){if(typeof this.button.checked=="boolean"){_3a0=e.queryCommandState(c);if(this.checked!==_3a0){this.checked=_3a0;this.button.set("checked",e.queryCommandState(c));}}}}catch(e){console.log(e);}}},setEditor:function(_3a3){this.editor=_3a3;this._initButton();if(this.button&&this.useDefaultCommand){if(this.editor.queryCommandAvailable(this.command)){this.connect(this.button,"onClick",lang.hitch(this.editor,"execCommand",this.command,this.commandArg));}else{this.button.domNode.style.display="none";}}this.connect(this.editor,"onNormalizedDisplayChanged","updateState");},setToolbar:function(_3a4){if(this.button){_3a4.addChild(this.button);}},set:function(name,_3a5){if(typeof name==="object"){for(var x in name){this.set(x,name[x]);}return this;}var _3a6=this._getAttrNames(name);if(this[_3a6.s]){var _3a7=this[_3a6.s].apply(this,Array.prototype.slice.call(arguments,1));}else{this._set(name,_3a5);}return _3a7||this;},get:function(name){var _3a8=this._getAttrNames(name);return this[_3a8.g]?this[_3a8.g]():this[name];},_setDisabledAttr:function(_3a9){this.disabled=_3a9;this.updateState();},_getAttrNames:function(name){var apn=this._attrPairNames;if(apn[name]){return apn[name];}var uc=name.charAt(0).toUpperCase()+name.substr(1);return (apn[name]={s:"_set"+uc+"Attr",g:"_get"+uc+"Attr"});},_set:function(name,_3aa){this[name]=_3aa;}});_39b.registry={};return _39b;});},"dojo/data/ItemFileReadStore":function(){define(["../_base/kernel","../_base/lang","../_base/declare","../_base/array","../_base/xhr","../Evented","./util/filter","./util/simpleFetch","../date/stamp"],function(_3ab,lang,_3ac,_3ad,xhr,_3ae,_3af,_3b0,_3b1){var _3b2=_3ac("dojo.data.ItemFileReadStore",[_3ae],{constructor:function(_3b3){this._arrayOfAllItems=[];this._arrayOfTopLevelItems=[];this._loadFinished=false;this._jsonFileUrl=_3b3.url;this._ccUrl=_3b3.url;this.url=_3b3.url;this._jsonData=_3b3.data;this.data=null;this._datatypeMap=_3b3.typeMap||{};if(!this._datatypeMap["Date"]){this._datatypeMap["Date"]={type:Date,deserialize:function(_3b4){return _3b1.fromISOString(_3b4);}};}this._features={"dojo.data.api.Read":true,"dojo.data.api.Identity":true};this._itemsByIdentity=null;this._storeRefPropName="_S";this._itemNumPropName="_0";this._rootItemPropName="_RI";this._reverseRefMap="_RRM";this._loadInProgress=false;this._queuedFetches=[];if(_3b3.urlPreventCache!==undefined){this.urlPreventCache=_3b3.urlPreventCache?true:false;}if(_3b3.hierarchical!==undefined){this.hierarchical=_3b3.hierarchical?true:false;}if(_3b3.clearOnClose){this.clearOnClose=true;}if("failOk" in _3b3){this.failOk=_3b3.failOk?true:false;}},url:"",_ccUrl:"",data:null,typeMap:null,clearOnClose:false,urlPreventCache:false,failOk:false,hierarchical:true,_assertIsItem:function(item){if(!this.isItem(item)){throw new Error(this.declaredClass+": Invalid item argument.");}},_assertIsAttribute:function(_3b5){if(typeof _3b5!=="string"){throw new Error(this.declaredClass+": Invalid attribute argument.");}},getValue:function(item,_3b6,_3b7){var _3b8=this.getValues(item,_3b6);return (_3b8.length>0)?_3b8[0]:_3b7;},getValues:function(item,_3b9){this._assertIsItem(item);this._assertIsAttribute(_3b9);return (item[_3b9]||[]).slice(0);},getAttributes:function(item){this._assertIsItem(item);var _3ba=[];for(var key in item){if((key!==this._storeRefPropName)&&(key!==this._itemNumPropName)&&(key!==this._rootItemPropName)&&(key!==this._reverseRefMap)){_3ba.push(key);}}return _3ba;},hasAttribute:function(item,_3bb){this._assertIsItem(item);this._assertIsAttribute(_3bb);return (_3bb in item);},containsValue:function(item,_3bc,_3bd){var _3be=undefined;if(typeof _3bd==="string"){_3be=_3af.patternToRegExp(_3bd,false);}return this._containsValue(item,_3bc,_3bd,_3be);},_containsValue:function(item,_3bf,_3c0,_3c1){return _3ad.some(this.getValues(item,_3bf),function(_3c2){if(_3c2!==null&&!lang.isObject(_3c2)&&_3c1){if(_3c2.toString().match(_3c1)){return true;}}else{if(_3c0===_3c2){return true;}}});},isItem:function(_3c3){if(_3c3&&_3c3[this._storeRefPropName]===this){if(this._arrayOfAllItems[_3c3[this._itemNumPropName]]===_3c3){return true;}}return false;},isItemLoaded:function(_3c4){return this.isItem(_3c4);},loadItem:function(_3c5){this._assertIsItem(_3c5.item);},getFeatures:function(){return this._features;},getLabel:function(item){if(this._labelAttr&&this.isItem(item)){return this.getValue(item,this._labelAttr);}return undefined;},getLabelAttributes:function(item){if(this._labelAttr){return [this._labelAttr];}return null;},filter:function(_3c6,_3c7,_3c8){var _3c9=[],i,key;if(_3c6.query){var _3ca,_3cb=_3c6.queryOptions?_3c6.queryOptions.ignoreCase:false;var _3cc={};for(key in _3c6.query){_3ca=_3c6.query[key];if(typeof _3ca==="string"){_3cc[key]=_3af.patternToRegExp(_3ca,_3cb);}else{if(_3ca instanceof RegExp){_3cc[key]=_3ca;}}}for(i=0;i<_3c7.length;++i){var _3cd=true;var _3ce=_3c7[i];if(_3ce===null){_3cd=false;}else{for(key in _3c6.query){_3ca=_3c6.query[key];if(!this._containsValue(_3ce,key,_3ca,_3cc[key])){_3cd=false;}}}if(_3cd){_3c9.push(_3ce);}}_3c8(_3c9,_3c6);}else{for(i=0;i<_3c7.length;++i){var item=_3c7[i];if(item!==null){_3c9.push(item);}}_3c8(_3c9,_3c6);}},_fetchItems:function(_3cf,_3d0,_3d1){var self=this;if(this._loadFinished){this.filter(_3cf,this._getItemsArray(_3cf.queryOptions),_3d0);}else{if(this._jsonFileUrl!==this._ccUrl){_3ab.deprecated(this.declaredClass+": ","To change the url, set the url property of the store,"+" not _jsonFileUrl.  _jsonFileUrl support will be removed in 2.0");this._ccUrl=this._jsonFileUrl;this.url=this._jsonFileUrl;}else{if(this.url!==this._ccUrl){this._jsonFileUrl=this.url;this._ccUrl=this.url;}}if(this.data!=null){this._jsonData=this.data;this.data=null;}if(this._jsonFileUrl){if(this._loadInProgress){this._queuedFetches.push({args:_3cf,filter:lang.hitch(self,"filter"),findCallback:lang.hitch(self,_3d0)});}else{this._loadInProgress=true;var _3d2={url:self._jsonFileUrl,handleAs:"json-comment-optional",preventCache:this.urlPreventCache,failOk:this.failOk};var _3d3=xhr.get(_3d2);_3d3.addCallback(function(data){try{self._getItemsFromLoadedData(data);self._loadFinished=true;self._loadInProgress=false;self.filter(_3cf,self._getItemsArray(_3cf.queryOptions),_3d0);self._handleQueuedFetches();}catch(e){self._loadFinished=true;self._loadInProgress=false;_3d1(e,_3cf);}});_3d3.addErrback(function(_3d4){self._loadInProgress=false;_3d1(_3d4,_3cf);});var _3d5=null;if(_3cf.abort){_3d5=_3cf.abort;}_3cf.abort=function(){var df=_3d3;if(df&&df.fired===-1){df.cancel();df=null;}if(_3d5){_3d5.call(_3cf);}};}}else{if(this._jsonData){try{this._loadFinished=true;this._getItemsFromLoadedData(this._jsonData);this._jsonData=null;self.filter(_3cf,this._getItemsArray(_3cf.queryOptions),_3d0);}catch(e){_3d1(e,_3cf);}}else{_3d1(new Error(this.declaredClass+": No JSON source data was provided as either URL or a nested Javascript object."),_3cf);}}}},_handleQueuedFetches:function(){if(this._queuedFetches.length>0){for(var i=0;i<this._queuedFetches.length;i++){var _3d6=this._queuedFetches[i],_3d7=_3d6.args,_3d8=_3d6.filter,_3d9=_3d6.findCallback;if(_3d8){_3d8(_3d7,this._getItemsArray(_3d7.queryOptions),_3d9);}else{this.fetchItemByIdentity(_3d7);}}this._queuedFetches=[];}},_getItemsArray:function(_3da){if(_3da&&_3da.deep){return this._arrayOfAllItems;}return this._arrayOfTopLevelItems;},close:function(_3db){if(this.clearOnClose&&this._loadFinished&&!this._loadInProgress){if(((this._jsonFileUrl==""||this._jsonFileUrl==null)&&(this.url==""||this.url==null))&&this.data==null){console.debug(this.declaredClass+": WARNING!  Data reload "+" information has not been provided."+"  Please set 'url' or 'data' to the appropriate value before"+" the next fetch");}this._arrayOfAllItems=[];this._arrayOfTopLevelItems=[];this._loadFinished=false;this._itemsByIdentity=null;this._loadInProgress=false;this._queuedFetches=[];}},_getItemsFromLoadedData:function(_3dc){var _3dd=false,self=this;function _3de(_3df){return (_3df!==null)&&(typeof _3df==="object")&&(!lang.isArray(_3df)||_3dd)&&(!lang.isFunction(_3df))&&(_3df.constructor==Object||lang.isArray(_3df))&&(typeof _3df._reference==="undefined")&&(typeof _3df._type==="undefined")&&(typeof _3df._value==="undefined")&&self.hierarchical;};function _3e0(_3e1){self._arrayOfAllItems.push(_3e1);for(var _3e2 in _3e1){var _3e3=_3e1[_3e2];if(_3e3){if(lang.isArray(_3e3)){var _3e4=_3e3;for(var k=0;k<_3e4.length;++k){var _3e5=_3e4[k];if(_3de(_3e5)){_3e0(_3e5);}}}else{if(_3de(_3e3)){_3e0(_3e3);}}}}};this._labelAttr=_3dc.label;var i,item;this._arrayOfAllItems=[];this._arrayOfTopLevelItems=_3dc.items;for(i=0;i<this._arrayOfTopLevelItems.length;++i){item=this._arrayOfTopLevelItems[i];if(lang.isArray(item)){_3dd=true;}_3e0(item);item[this._rootItemPropName]=true;}var _3e6={},key;for(i=0;i<this._arrayOfAllItems.length;++i){item=this._arrayOfAllItems[i];for(key in item){if(key!==this._rootItemPropName){var _3e7=item[key];if(_3e7!==null){if(!lang.isArray(_3e7)){item[key]=[_3e7];}}else{item[key]=[null];}}_3e6[key]=key;}}while(_3e6[this._storeRefPropName]){this._storeRefPropName+="_";}while(_3e6[this._itemNumPropName]){this._itemNumPropName+="_";}while(_3e6[this._reverseRefMap]){this._reverseRefMap+="_";}var _3e8;var _3e9=_3dc.identifier;if(_3e9){this._itemsByIdentity={};this._features["dojo.data.api.Identity"]=_3e9;for(i=0;i<this._arrayOfAllItems.length;++i){item=this._arrayOfAllItems[i];_3e8=item[_3e9];var _3ea=_3e8[0];if(!Object.hasOwnProperty.call(this._itemsByIdentity,_3ea)){this._itemsByIdentity[_3ea]=item;}else{if(this._jsonFileUrl){throw new Error(this.declaredClass+":  The json data as specified by: ["+this._jsonFileUrl+"] is malformed.  Items within the list have identifier: ["+_3e9+"].  Value collided: ["+_3ea+"]");}else{if(this._jsonData){throw new Error(this.declaredClass+":  The json data provided by the creation arguments is malformed.  Items within the list have identifier: ["+_3e9+"].  Value collided: ["+_3ea+"]");}}}}}else{this._features["dojo.data.api.Identity"]=Number;}for(i=0;i<this._arrayOfAllItems.length;++i){item=this._arrayOfAllItems[i];item[this._storeRefPropName]=this;item[this._itemNumPropName]=i;}for(i=0;i<this._arrayOfAllItems.length;++i){item=this._arrayOfAllItems[i];for(key in item){_3e8=item[key];for(var j=0;j<_3e8.length;++j){_3e7=_3e8[j];if(_3e7!==null&&typeof _3e7=="object"){if(("_type" in _3e7)&&("_value" in _3e7)){var type=_3e7._type;var _3eb=this._datatypeMap[type];if(!_3eb){throw new Error("dojo.data.ItemFileReadStore: in the typeMap constructor arg, no object class was specified for the datatype '"+type+"'");}else{if(lang.isFunction(_3eb)){_3e8[j]=new _3eb(_3e7._value);}else{if(lang.isFunction(_3eb.deserialize)){_3e8[j]=_3eb.deserialize(_3e7._value);}else{throw new Error("dojo.data.ItemFileReadStore: Value provided in typeMap was neither a constructor, nor a an object with a deserialize function");}}}}if(_3e7._reference){var _3ec=_3e7._reference;if(!lang.isObject(_3ec)){_3e8[j]=this._getItemByIdentity(_3ec);}else{for(var k=0;k<this._arrayOfAllItems.length;++k){var _3ed=this._arrayOfAllItems[k],_3ee=true;for(var _3ef in _3ec){if(_3ed[_3ef]!=_3ec[_3ef]){_3ee=false;}}if(_3ee){_3e8[j]=_3ed;}}}if(this.referenceIntegrity){var _3f0=_3e8[j];if(this.isItem(_3f0)){this._addReferenceToMap(_3f0,item,key);}}}else{if(this.isItem(_3e7)){if(this.referenceIntegrity){this._addReferenceToMap(_3e7,item,key);}}}}}}}},_addReferenceToMap:function(_3f1,_3f2,_3f3){},getIdentity:function(item){var _3f4=this._features["dojo.data.api.Identity"];if(_3f4===Number){return item[this._itemNumPropName];}else{var _3f5=item[_3f4];if(_3f5){return _3f5[0];}}return null;},fetchItemByIdentity:function(_3f6){var item,_3f7;if(!this._loadFinished){var self=this;if(this._jsonFileUrl!==this._ccUrl){_3ab.deprecated(this.declaredClass+": ","To change the url, set the url property of the store,"+" not _jsonFileUrl.  _jsonFileUrl support will be removed in 2.0");this._ccUrl=this._jsonFileUrl;this.url=this._jsonFileUrl;}else{if(this.url!==this._ccUrl){this._jsonFileUrl=this.url;this._ccUrl=this.url;}}if(this.data!=null&&this._jsonData==null){this._jsonData=this.data;this.data=null;}if(this._jsonFileUrl){if(this._loadInProgress){this._queuedFetches.push({args:_3f6});}else{this._loadInProgress=true;var _3f8={url:self._jsonFileUrl,handleAs:"json-comment-optional",preventCache:this.urlPreventCache,failOk:this.failOk};var _3f9=xhr.get(_3f8);_3f9.addCallback(function(data){var _3fa=_3f6.scope?_3f6.scope:_3ab.global;try{self._getItemsFromLoadedData(data);self._loadFinished=true;self._loadInProgress=false;item=self._getItemByIdentity(_3f6.identity);if(_3f6.onItem){_3f6.onItem.call(_3fa,item);}self._handleQueuedFetches();}catch(error){self._loadInProgress=false;if(_3f6.onError){_3f6.onError.call(_3fa,error);}}});_3f9.addErrback(function(_3fb){self._loadInProgress=false;if(_3f6.onError){var _3fc=_3f6.scope?_3f6.scope:_3ab.global;_3f6.onError.call(_3fc,_3fb);}});}}else{if(this._jsonData){self._getItemsFromLoadedData(self._jsonData);self._jsonData=null;self._loadFinished=true;item=self._getItemByIdentity(_3f6.identity);if(_3f6.onItem){_3f7=_3f6.scope?_3f6.scope:_3ab.global;_3f6.onItem.call(_3f7,item);}}}}else{item=this._getItemByIdentity(_3f6.identity);if(_3f6.onItem){_3f7=_3f6.scope?_3f6.scope:_3ab.global;_3f6.onItem.call(_3f7,item);}}},_getItemByIdentity:function(_3fd){var item=null;if(this._itemsByIdentity){if(Object.hasOwnProperty.call(this._itemsByIdentity,_3fd)){item=this._itemsByIdentity[_3fd];}}else{if(Object.hasOwnProperty.call(this._arrayOfAllItems,_3fd)){item=this._arrayOfAllItems[_3fd];}}if(item===undefined){item=null;}return item;},getIdentityAttributes:function(item){var _3fe=this._features["dojo.data.api.Identity"];if(_3fe===Number){return null;}else{return [_3fe];}},_forceLoad:function(){var self=this;if(this._jsonFileUrl!==this._ccUrl){_3ab.deprecated(this.declaredClass+": ","To change the url, set the url property of the store,"+" not _jsonFileUrl.  _jsonFileUrl support will be removed in 2.0");this._ccUrl=this._jsonFileUrl;this.url=this._jsonFileUrl;}else{if(this.url!==this._ccUrl){this._jsonFileUrl=this.url;this._ccUrl=this.url;}}if(this.data!=null){this._jsonData=this.data;this.data=null;}if(this._jsonFileUrl){var _3ff={url:this._jsonFileUrl,handleAs:"json-comment-optional",preventCache:this.urlPreventCache,failOk:this.failOk,sync:true};var _400=xhr.get(_3ff);_400.addCallback(function(data){try{if(self._loadInProgress!==true&&!self._loadFinished){self._getItemsFromLoadedData(data);self._loadFinished=true;}else{if(self._loadInProgress){throw new Error(this.declaredClass+":  Unable to perform a synchronous load, an async load is in progress.");}}}catch(e){console.log(e);throw e;}});_400.addErrback(function(_401){throw _401;});}else{if(this._jsonData){self._getItemsFromLoadedData(self._jsonData);self._jsonData=null;self._loadFinished=true;}}}});lang.extend(_3b2,_3b0);return _3b2;});},"dojo/data/util/filter":function(){define(["../../_base/lang"],function(lang){var _402={};lang.setObject("dojo.data.util.filter",_402);_402.patternToRegExp=function(_403,_404){var rxp="^";var c=null;for(var i=0;i<_403.length;i++){c=_403.charAt(i);switch(c){case "\\":rxp+=c;i++;rxp+=_403.charAt(i);break;case "*":rxp+=".*";break;case "?":rxp+=".";break;case "$":case "^":case "/":case "+":case ".":case "|":case "(":case ")":case "{":case "}":case "[":case "]":rxp+="\\";default:rxp+=c;}}rxp+="$";if(_404){return new RegExp(rxp,"mi");}else{return new RegExp(rxp,"m");}};return _402;});},"dijit/form/FilteringSelect":function(){define("dijit/form/FilteringSelect",["dojo/data/util/filter","dojo/_base/declare","dojo/_base/lang","dojo/when","./MappedTextBox","./ComboBoxMixin"],function(_405,_406,lang,when,_407,_408){return _406("dijit.form.FilteringSelect",[_407,_408],{required:true,_lastDisplayedValue:"",_isValidSubset:function(){return this._opened;},isValid:function(){return !!this.item||(!this.required&&this.get("displayedValue")=="");},_refreshState:function(){if(!this.searchTimer){this.inherited(arguments);}},_callbackSetLabel:function(_409,_40a,_40b,_40c){if((_40a&&_40a[this.searchAttr]!==this._lastQuery)||(!_40a&&_409.length&&this.store.getIdentity(_409[0])!=this._lastQuery)){return;}if(!_409.length){this.set("value","",_40c||(_40c===undefined&&!this.focused),this.textbox.value,null);}else{this.set("item",_409[0],_40c);}},_openResultList:function(_40d,_40e,_40f){if(_40e[this.searchAttr]!==this._lastQuery){return;}this.inherited(arguments);if(this.item===undefined){this.validate(true);}},_getValueAttr:function(){return this.valueNode.value;},_getValueField:function(){return "value";},_setValueAttr:function(_410,_411,_412,item){if(!this._onChangeActive){_411=null;}if(item===undefined){if(_410===null||_410===""){_410="";if(!lang.isString(_412)){this._setDisplayedValueAttr(_412||"",_411);return;}}var self=this;this._lastQuery=_410;when(this.store.get(_410),function(item){self._callbackSetLabel(item?[item]:[],undefined,undefined,_411);});}else{this.valueNode.value=_410;this.inherited(arguments);}},_setItemAttr:function(item,_413,_414){this.inherited(arguments);this._lastDisplayedValue=this.textbox.value;},_getDisplayQueryString:function(text){return text.replace(/([\\\*\?])/g,"\\$1");},_setDisplayedValueAttr:function(_415,_416){if(_415==null){_415="";}if(!this._created){if(!("displayedValue" in this.params)){return;}_416=false;}if(this.store){this.closeDropDown();var _417=lang.clone(this.query);var qs=this._getDisplayQueryString(_415),q;if(this.store._oldAPI){q=qs;}else{q=_405.patternToRegExp(qs,this.ignoreCase);q.toString=function(){return qs;};}this._lastQuery=_417[this.searchAttr]=q;this.textbox.value=_415;this._lastDisplayedValue=_415;this._set("displayedValue",_415);var _418=this;var _419={ignoreCase:this.ignoreCase,deep:true};lang.mixin(_419,this.fetchProperties);this._fetchHandle=this.store.query(_417,_419);when(this._fetchHandle,function(_41a){_418._fetchHandle=null;_418._callbackSetLabel(_41a||[],_417,_419,_416);},function(err){_418._fetchHandle=null;if(!_418._cancelingQuery){console.error("dijit.form.FilteringSelect: "+err.toString());}});}},undo:function(){this.set("displayedValue",this._lastDisplayedValue);}});});},"dojo/data/util/sorter":function(){define(["../../_base/lang"],function(lang){var _41b={};lang.setObject("dojo.data.util.sorter",_41b);_41b.basicComparator=function(a,b){var r=-1;if(a===null){a=undefined;}if(b===null){b=undefined;}if(a==b){r=0;}else{if(a>b||a==null){r=1;}}return r;};_41b.createSortFunction=function(_41c,_41d){var _41e=[];function _41f(attr,dir,comp,s){return function(_420,_421){var a=s.getValue(_420,attr);var b=s.getValue(_421,attr);return dir*comp(a,b);};};var _422;var map=_41d.comparatorMap;var bc=_41b.basicComparator;for(var i=0;i<_41c.length;i++){_422=_41c[i];var attr=_422.attribute;if(attr){var dir=(_422.descending)?-1:1;var comp=bc;if(map){if(typeof attr!=="string"&&("toString" in attr)){attr=attr.toString();}comp=map[attr]||bc;}_41e.push(_41f(attr,dir,comp,_41d));}}return function(rowA,rowB){var i=0;while(i<_41e.length){var ret=_41e[i++](rowA,rowB);if(ret!==0){return ret;}}return 0;};};return _41b;});},"dojo/colors":function(){define(["./_base/kernel","./_base/lang","./_base/Color","./_base/array"],function(dojo,lang,_423,_424){var _425={};lang.setObject("dojo.colors",_425);var _426=function(m1,m2,h){if(h<0){++h;}if(h>1){--h;}var h6=6*h;if(h6<1){return m1+(m2-m1)*h6;}if(2*h<1){return m2;}if(3*h<2){return m1+(m2-m1)*(2/3-h)*6;}return m1;};dojo.colorFromRgb=_423.fromRgb=function(_427,obj){var m=_427.toLowerCase().match(/^(rgba?|hsla?)\(([\s\.\-,%0-9]+)\)/);if(m){var c=m[2].split(/\s*,\s*/),l=c.length,t=m[1],a;if((t=="rgb"&&l==3)||(t=="rgba"&&l==4)){var r=c[0];if(r.charAt(r.length-1)=="%"){a=_424.map(c,function(x){return parseFloat(x)*2.56;});if(l==4){a[3]=c[3];}return _423.fromArray(a,obj);}return _423.fromArray(c,obj);}if((t=="hsl"&&l==3)||(t=="hsla"&&l==4)){var H=((parseFloat(c[0])%360)+360)%360/360,S=parseFloat(c[1])/100,L=parseFloat(c[2])/100,m2=L<=0.5?L*(S+1):L+S-L*S,m1=2*L-m2;a=[_426(m1,m2,H+1/3)*256,_426(m1,m2,H)*256,_426(m1,m2,H-1/3)*256,1];if(l==4){a[3]=c[3];}return _423.fromArray(a,obj);}}return null;};var _428=function(c,low,high){c=Number(c);return isNaN(c)?high:c<low?low:c>high?high:c;};_423.prototype.sanitize=function(){var t=this;t.r=Math.round(_428(t.r,0,255));t.g=Math.round(_428(t.g,0,255));t.b=Math.round(_428(t.b,0,255));t.a=_428(t.a,0,1);return this;};_425.makeGrey=_423.makeGrey=function(g,a){return _423.fromArray([g,g,g,a]);};lang.mixin(_423.named,{"aliceblue":[240,248,255],"antiquewhite":[250,235,215],"aquamarine":[127,255,212],"azure":[240,255,255],"beige":[245,245,220],"bisque":[255,228,196],"blanchedalmond":[255,235,205],"blueviolet":[138,43,226],"brown":[165,42,42],"burlywood":[222,184,135],"cadetblue":[95,158,160],"chartreuse":[127,255,0],"chocolate":[210,105,30],"coral":[255,127,80],"cornflowerblue":[100,149,237],"cornsilk":[255,248,220],"crimson":[220,20,60],"cyan":[0,255,255],"darkblue":[0,0,139],"darkcyan":[0,139,139],"darkgoldenrod":[184,134,11],"darkgray":[169,169,169],"darkgreen":[0,100,0],"darkgrey":[169,169,169],"darkkhaki":[189,183,107],"darkmagenta":[139,0,139],"darkolivegreen":[85,107,47],"darkorange":[255,140,0],"darkorchid":[153,50,204],"darkred":[139,0,0],"darksalmon":[233,150,122],"darkseagreen":[143,188,143],"darkslateblue":[72,61,139],"darkslategray":[47,79,79],"darkslategrey":[47,79,79],"darkturquoise":[0,206,209],"darkviolet":[148,0,211],"deeppink":[255,20,147],"deepskyblue":[0,191,255],"dimgray":[105,105,105],"dimgrey":[105,105,105],"dodgerblue":[30,144,255],"firebrick":[178,34,34],"floralwhite":[255,250,240],"forestgreen":[34,139,34],"gainsboro":[220,220,220],"ghostwhite":[248,248,255],"gold":[255,215,0],"goldenrod":[218,165,32],"greenyellow":[173,255,47],"grey":[128,128,128],"honeydew":[240,255,240],"hotpink":[255,105,180],"indianred":[205,92,92],"indigo":[75,0,130],"ivory":[255,255,240],"khaki":[240,230,140],"lavender":[230,230,250],"lavenderblush":[255,240,245],"lawngreen":[124,252,0],"lemonchiffon":[255,250,205],"lightblue":[173,216,230],"lightcoral":[240,128,128],"lightcyan":[224,255,255],"lightgoldenrodyellow":[250,250,210],"lightgray":[211,211,211],"lightgreen":[144,238,144],"lightgrey":[211,211,211],"lightpink":[255,182,193],"lightsalmon":[255,160,122],"lightseagreen":[32,178,170],"lightskyblue":[135,206,250],"lightslategray":[119,136,153],"lightslategrey":[119,136,153],"lightsteelblue":[176,196,222],"lightyellow":[255,255,224],"limegreen":[50,205,50],"linen":[250,240,230],"magenta":[255,0,255],"mediumaquamarine":[102,205,170],"mediumblue":[0,0,205],"mediumorchid":[186,85,211],"mediumpurple":[147,112,219],"mediumseagreen":[60,179,113],"mediumslateblue":[123,104,238],"mediumspringgreen":[0,250,154],"mediumturquoise":[72,209,204],"mediumvioletred":[199,21,133],"midnightblue":[25,25,112],"mintcream":[245,255,250],"mistyrose":[255,228,225],"moccasin":[255,228,181],"navajowhite":[255,222,173],"oldlace":[253,245,230],"olivedrab":[107,142,35],"orange":[255,165,0],"orangered":[255,69,0],"orchid":[218,112,214],"palegoldenrod":[238,232,170],"palegreen":[152,251,152],"paleturquoise":[175,238,238],"palevioletred":[219,112,147],"papayawhip":[255,239,213],"peachpuff":[255,218,185],"peru":[205,133,63],"pink":[255,192,203],"plum":[221,160,221],"powderblue":[176,224,230],"rosybrown":[188,143,143],"royalblue":[65,105,225],"saddlebrown":[139,69,19],"salmon":[250,128,114],"sandybrown":[244,164,96],"seagreen":[46,139,87],"seashell":[255,245,238],"sienna":[160,82,45],"skyblue":[135,206,235],"slateblue":[106,90,205],"slategray":[112,128,144],"slategrey":[112,128,144],"snow":[255,250,250],"springgreen":[0,255,127],"steelblue":[70,130,180],"tan":[210,180,140],"thistle":[216,191,216],"tomato":[255,99,71],"turquoise":[64,224,208],"violet":[238,130,238],"wheat":[245,222,179],"whitesmoke":[245,245,245],"yellowgreen":[154,205,50]});return _423;});},"url:dijit/form/templates/Spinner.html":"<div class=\"dijit dijitReset dijitInline dijitLeft\"\n\tid=\"widget_${id}\" role=\"presentation\"\n\t><div class=\"dijitReset dijitButtonNode dijitSpinnerButtonContainer\"\n\t\t><input class=\"dijitReset dijitInputField dijitSpinnerButtonInner\" type=\"text\" tabIndex=\"-1\" readonly=\"readonly\" role=\"presentation\"\n\t\t/><div class=\"dijitReset dijitLeft dijitButtonNode dijitArrowButton dijitUpArrowButton\"\n\t\t\tdata-dojo-attach-point=\"upArrowNode\"\n\t\t\t><div class=\"dijitArrowButtonInner\"\n\t\t\t\t><input class=\"dijitReset dijitInputField\" value=\"&#9650; \" type=\"text\" tabIndex=\"-1\" readonly=\"readonly\" role=\"presentation\"\n\t\t\t\t\t${_buttonInputDisabled}\n\t\t\t/></div\n\t\t></div\n\t\t><div class=\"dijitReset dijitLeft dijitButtonNode dijitArrowButton dijitDownArrowButton\"\n\t\t\tdata-dojo-attach-point=\"downArrowNode\"\n\t\t\t><div class=\"dijitArrowButtonInner\"\n\t\t\t\t><input class=\"dijitReset dijitInputField\" value=\"&#9660; \" type=\"text\" tabIndex=\"-1\" readonly=\"readonly\" role=\"presentation\"\n\t\t\t\t\t${_buttonInputDisabled}\n\t\t\t/></div\n\t\t></div\n\t></div\n\t><div class='dijitReset dijitValidationContainer'\n\t\t><input class=\"dijitReset dijitInputField dijitValidationIcon dijitValidationInner\" value=\"&#935; \" type=\"text\" tabIndex=\"-1\" readonly=\"readonly\" role=\"presentation\"\n\t/></div\n\t><div class=\"dijitReset dijitInputField dijitInputContainer\"\n\t\t><input class='dijitReset dijitInputInner' data-dojo-attach-point=\"textbox,focusNode\" type=\"${type}\" data-dojo-attach-event=\"onkeypress:_onKeyPress\"\n\t\t\trole=\"spinbutton\" autocomplete=\"off\" ${!nameAttrSetting}\n\t/></div\n></div>\n","dojox/date/islamic/Date":function(){define("dojox/date/islamic/Date",["dojo/_base/lang","dojo/_base/declare","dojo/date"],function(lang,_429,dd){var _42a=_429("dojox.date.islamic.Date",null,{_date:0,_month:0,_year:0,_hours:0,_minutes:0,_seconds:0,_milliseconds:0,_day:0,_GREGORIAN_EPOCH:1721425.5,_ISLAMIC_EPOCH:1948439.5,constructor:function(){var len=arguments.length;if(!len){this.fromGregorian(new Date());}else{if(len==1){var arg0=arguments[0];if(typeof arg0=="number"){arg0=new Date(arg0);}if(arg0 instanceof Date){this.fromGregorian(arg0);}else{if(arg0==""){this._date=new Date("");}else{this._year=arg0._year;this._month=arg0._month;this._date=arg0._date;this._hours=arg0._hours;this._minutes=arg0._minutes;this._seconds=arg0._seconds;this._milliseconds=arg0._milliseconds;}}}else{if(len>=3){this._year+=arguments[0];this._month+=arguments[1];this._date+=arguments[2];this._hours+=arguments[3]||0;this._minutes+=arguments[4]||0;this._seconds+=arguments[5]||0;this._milliseconds+=arguments[6]||0;}}}},getDate:function(){return this._date;},getMonth:function(){return this._month;},getFullYear:function(){return this._year;},getDay:function(){return this.toGregorian().getDay();},getHours:function(){return this._hours;},getMinutes:function(){return this._minutes;},getSeconds:function(){return this._seconds;},getMilliseconds:function(){return this._milliseconds;},setDate:function(date){date=parseInt(date);if(date>0&&date<=this.getDaysInIslamicMonth(this._month,this._year)){this._date=date;}else{var _42b;if(date>0){for(_42b=this.getDaysInIslamicMonth(this._month,this._year);date>_42b;date-=_42b,_42b=this.getDaysInIslamicMonth(this._month,this._year)){this._month++;if(this._month>=12){this._year++;this._month-=12;}}this._date=date;}else{for(_42b=this.getDaysInIslamicMonth((this._month-1)>=0?(this._month-1):11,((this._month-1)>=0)?this._year:this._year-1);date<=0;_42b=this.getDaysInIslamicMonth((this._month-1)>=0?(this._month-1):11,((this._month-1)>=0)?this._year:this._year-1)){this._month--;if(this._month<0){this._year--;this._month+=12;}date+=_42b;}this._date=date;}}return this;},setFullYear:function(year){this._year=+year;},setMonth:function(_42c){this._year+=Math.floor(_42c/12);if(_42c>0){this._month=Math.floor(_42c%12);}else{this._month=Math.floor(((_42c%12)+12)%12);}},setHours:function(){var _42d=arguments.length;var _42e=0;if(_42d>=1){_42e=parseInt(arguments[0]);}if(_42d>=2){this._minutes=parseInt(arguments[1]);}if(_42d>=3){this._seconds=parseInt(arguments[2]);}if(_42d==4){this._milliseconds=parseInt(arguments[3]);}while(_42e>=24){this._date++;var _42f=this.getDaysInIslamicMonth(this._month,this._year);if(this._date>_42f){this._month++;if(this._month>=12){this._year++;this._month-=12;}this._date-=_42f;}_42e-=24;}this._hours=_42e;},_addMinutes:function(_430){_430+=this._minutes;this.setMinutes(_430);this.setHours(this._hours+parseInt(_430/60));return this;},_addSeconds:function(_431){_431+=this._seconds;this.setSeconds(_431);this._addMinutes(parseInt(_431/60));return this;},_addMilliseconds:function(_432){_432+=this._milliseconds;this.setMilliseconds(_432);this._addSeconds(parseInt(_432/1000));return this;},setMinutes:function(_433){this._minutes=_433%60;return this;},setSeconds:function(_434){this._seconds=_434%60;return this;},setMilliseconds:function(_435){this._milliseconds=_435%1000;return this;},toString:function(){if(isNaN(this._date)){return "Invalidate Date";}else{var x=new Date();x.setHours(this._hours);x.setMinutes(this._minutes);x.setSeconds(this._seconds);x.setMilliseconds(this._milliseconds);return this._month+" "+this._date+" "+this._year+" "+x.toTimeString();}},toGregorian:function(){var _436=this._year;var _437=this._month;var _438=this._date;var _439=_438+Math.ceil(29.5*_437)+(_436-1)*354+Math.floor((3+(11*_436))/30)+this._ISLAMIC_EPOCH-1;var wjd=Math.floor(_439-0.5)+0.5,_43a=wjd-this._GREGORIAN_EPOCH,_43b=Math.floor(_43a/146097),dqc=this._mod(_43a,146097),cent=Math.floor(dqc/36524),_43c=this._mod(dqc,36524),quad=Math.floor(_43c/1461),_43d=this._mod(_43c,1461),_43e=Math.floor(_43d/365),year=(_43b*400)+(cent*100)+(quad*4)+_43e;if(!(cent==4||_43e==4)){year++;}var _43f=this._GREGORIAN_EPOCH+(365*(year-1))+Math.floor((year-1)/4)-(Math.floor((year-1)/100))+Math.floor((year-1)/400);var _440=wjd-_43f;var tjd=(this._GREGORIAN_EPOCH-1)+(365*(year-1))+Math.floor((year-1)/4)-(Math.floor((year-1)/100))+Math.floor((year-1)/400)+Math.floor((739/12)+((dd.isLeapYear(new Date(year,3,1))?-1:-2))+1);var _441=((wjd<tjd)?0:(dd.isLeapYear(new Date(year,3,1))?1:2));var _442=Math.floor((((_440+_441)*12)+373)/367);var tjd2=(this._GREGORIAN_EPOCH-1)+(365*(year-1))+Math.floor((year-1)/4)-(Math.floor((year-1)/100))+Math.floor((year-1)/400)+Math.floor((((367*_442)-362)/12)+((_442<=2)?0:(dd.isLeapYear(new Date(year,_442,1))?-1:-2))+1);var day=(wjd-tjd2)+1;var _443=new Date(year,(_442-1),day,this._hours,this._minutes,this._seconds,this._milliseconds);return _443;},fromGregorian:function(_444){var date=new Date(_444);var _445=date.getFullYear(),_446=date.getMonth(),gDay=date.getDate();var _447=(this._GREGORIAN_EPOCH-1)+(365*(_445-1))+Math.floor((_445-1)/4)+(-Math.floor((_445-1)/100))+Math.floor((_445-1)/400)+Math.floor((((367*(_446+1))-362)/12)+(((_446+1)<=2)?0:(dd.isLeapYear(date)?-1:-2))+gDay);_447=Math.floor(_447)+0.5;var days=_447-this._ISLAMIC_EPOCH;var _448=Math.floor((30*days+10646)/10631);var _449=Math.ceil((days-29-this._yearStart(_448))/29.5);_449=Math.min(_449,11);var hDay=Math.ceil(days-this._monthStart(_448,_449))+1;this._date=hDay;this._month=_449;this._year=_448;this._hours=date.getHours();this._minutes=date.getMinutes();this._seconds=date.getSeconds();this._milliseconds=date.getMilliseconds();this._day=date.getDay();return this;},valueOf:function(){return this.toGregorian().valueOf();},_yearStart:function(year){return (year-1)*354+Math.floor((3+11*year)/30);},_monthStart:function(year,_44a){return Math.ceil(29.5*_44a)+(year-1)*354+Math.floor((3+11*year)/30);},_civilLeapYear:function(year){return (14+11*year)%30<11;},getDaysInIslamicMonth:function(_44b,year){var _44c=0;_44c=29+((_44b+1)%2);if(_44b==11&&this._civilLeapYear(year)){_44c++;}return _44c;},_mod:function(a,b){return a-(b*Math.floor(a/b));}});_42a.getDaysInIslamicMonth=function(_44d){return new _42a().getDaysInIslamicMonth(_44d.getMonth(),_44d.getFullYear());};return _42a;});},"dijit/_editor/range":function(){define("dijit/_editor/range",["dojo/_base/array","dojo/_base/declare","dojo/_base/lang","dojo/_base/window","../main"],function(_44e,_44f,lang,win,_450){_450.range={};_450.range.getIndex=function(node,_451){var ret=[],retR=[];var _452=node;var _453,n;while(node!=_451){var i=0;_453=node.parentNode;while((n=_453.childNodes[i++])){if(n===node){--i;break;}}ret.unshift(i);retR.unshift(i-_453.childNodes.length);node=_453;}if(ret.length>0&&_452.nodeType==3){n=_452.previousSibling;while(n&&n.nodeType==3){ret[ret.length-1]--;n=n.previousSibling;}n=_452.nextSibling;while(n&&n.nodeType==3){retR[retR.length-1]++;n=n.nextSibling;}}return {o:ret,r:retR};};_450.range.getNode=function(_454,_455){if(!lang.isArray(_454)||_454.length==0){return _455;}var node=_455;_44e.every(_454,function(i){if(i>=0&&i<node.childNodes.length){node=node.childNodes[i];}else{node=null;return false;}return true;});return node;};_450.range.getCommonAncestor=function(n1,n2,root){root=root||n1.ownerDocument.body;var _456=function(n){var as=[];while(n){as.unshift(n);if(n!==root){n=n.parentNode;}else{break;}}return as;};var n1as=_456(n1);var n2as=_456(n2);var m=Math.min(n1as.length,n2as.length);var com=n1as[0];for(var i=1;i<m;i++){if(n1as[i]===n2as[i]){com=n1as[i];}else{break;}}return com;};_450.range.getAncestor=function(node,_457,root){root=root||node.ownerDocument.body;while(node&&node!==root){var name=node.nodeName.toUpperCase();if(_457.test(name)){return node;}node=node.parentNode;}return null;};_450.range.BlockTagNames=/^(?:P|DIV|H1|H2|H3|H4|H5|H6|ADDRESS|PRE|OL|UL|LI|DT|DE)$/;_450.range.getBlockAncestor=function(node,_458,root){root=root||node.ownerDocument.body;_458=_458||_450.range.BlockTagNames;var _459=null,_45a;while(node&&node!==root){var name=node.nodeName.toUpperCase();if(!_459&&_458.test(name)){_459=node;}if(!_45a&&(/^(?:BODY|TD|TH|CAPTION)$/).test(name)){_45a=node;}node=node.parentNode;}return {blockNode:_459,blockContainer:_45a||node.ownerDocument.body};};_450.range.atBeginningOfContainer=function(_45b,node,_45c){var _45d=false;var _45e=(_45c==0);if(!_45e&&node.nodeType==3){if(/^[\s\xA0]+$/.test(node.nodeValue.substr(0,_45c))){_45e=true;}}if(_45e){var _45f=node;_45d=true;while(_45f&&_45f!==_45b){if(_45f.previousSibling){_45d=false;break;}_45f=_45f.parentNode;}}return _45d;};_450.range.atEndOfContainer=function(_460,node,_461){var _462=false;var _463=(_461==(node.length||node.childNodes.length));if(!_463&&node.nodeType==3){if(/^[\s\xA0]+$/.test(node.nodeValue.substr(_461))){_463=true;}}if(_463){var _464=node;_462=true;while(_464&&_464!==_460){if(_464.nextSibling){_462=false;break;}_464=_464.parentNode;}}return _462;};_450.range.adjacentNoneTextNode=function(_465,next){var node=_465;var len=(0-_465.length)||0;var prop=next?"nextSibling":"previousSibling";while(node){if(node.nodeType!=3){break;}len+=node.length;node=node[prop];}return [node,len];};_450.range.create=function(win){win=win||window;if(win.getSelection){return win.document.createRange();}else{return new _450.range.W3CRange();}};_450.range.getSelection=function(_466,_467){if(_466.getSelection){return _466.getSelection();}else{var s=new _450.range.ie.selection(_466);if(!_467){s._getCurrentSelection();}return s;}};if(!window.getSelection){_450.range.ie={cachedSelection:{},selection:function(_468){this._ranges=[];this.addRange=function(r,_469){this._ranges.push(r);if(!_469){r._select();}this.rangeCount=this._ranges.length;};this.removeAllRanges=function(){this._ranges=[];this.rangeCount=0;};var _46a=function(){var r=_468.document.selection.createRange();var type=_468.document.selection.type.toUpperCase();if(type=="CONTROL"){return new _450.range.W3CRange(_450.range.ie.decomposeControlRange(r));}else{return new _450.range.W3CRange(_450.range.ie.decomposeTextRange(r));}};this.getRangeAt=function(i){return this._ranges[i];};this._getCurrentSelection=function(){this.removeAllRanges();var r=_46a();if(r){this.addRange(r,true);this.isCollapsed=r.collapsed;}else{this.isCollapsed=true;}};},decomposeControlRange:function(_46b){var _46c=_46b.item(0),_46d=_46b.item(_46b.length-1);var _46e=_46c.parentNode,_46f=_46d.parentNode;var _470=_450.range.getIndex(_46c,_46e).o[0];var _471=_450.range.getIndex(_46d,_46f).o[0]+1;return [_46e,_470,_46f,_471];},getEndPoint:function(_472,end){var _473=_472.duplicate();_473.collapse(!end);var _474="EndTo"+(end?"End":"Start");var _475=_473.parentElement();var _476,_477,_478;if(_475.childNodes.length>0){_44e.every(_475.childNodes,function(node,i){var _479;if(node.nodeType!=3){_473.moveToElementText(node);if(_473.compareEndPoints(_474,_472)>0){if(_478&&_478.nodeType==3){_476=_478;_479=true;}else{_476=_475;_477=i;return false;}}else{if(i==_475.childNodes.length-1){_476=_475;_477=_475.childNodes.length;return false;}}}else{if(i==_475.childNodes.length-1){_476=node;_479=true;}}if(_479&&_476){var _47a=_450.range.adjacentNoneTextNode(_476)[0];if(_47a){_476=_47a.nextSibling;}else{_476=_475.firstChild;}var _47b=_450.range.adjacentNoneTextNode(_476);_47a=_47b[0];var _47c=_47b[1];if(_47a){_473.moveToElementText(_47a);_473.collapse(false);}else{_473.moveToElementText(_475);}_473.setEndPoint(_474,_472);_477=_473.text.length-_47c;return false;}_478=node;return true;});}else{_476=_475;_477=0;}if(!end&&_476.nodeType==1&&_477==_476.childNodes.length){var _47d=_476.nextSibling;if(_47d&&_47d.nodeType==3){_476=_47d;_477=0;}}return [_476,_477];},setEndPoint:function(_47e,_47f,_480){var _481=_47e.duplicate(),node,len;if(_47f.nodeType!=3){if(_480>0){node=_47f.childNodes[_480-1];if(node){if(node.nodeType==3){_47f=node;_480=node.length;}else{if(node.nextSibling&&node.nextSibling.nodeType==3){_47f=node.nextSibling;_480=0;}else{_481.moveToElementText(node.nextSibling?node:_47f);var _482=node.parentNode;var _483=_482.insertBefore(node.ownerDocument.createTextNode(" "),node.nextSibling);_481.collapse(false);_482.removeChild(_483);}}}}else{_481.moveToElementText(_47f);_481.collapse(true);}}if(_47f.nodeType==3){var _484=_450.range.adjacentNoneTextNode(_47f);var _485=_484[0];len=_484[1];if(_485){_481.moveToElementText(_485);_481.collapse(false);if(_485.contentEditable!="inherit"){len++;}}else{_481.moveToElementText(_47f.parentNode);_481.collapse(true);_481.move("character",1);_481.move("character",-1);}_480+=len;if(_480>0){if(_481.move("character",_480)!=_480){console.error("Error when moving!");}}}return _481;},decomposeTextRange:function(_486){var _487=_450.range.ie.getEndPoint(_486);var _488=_487[0],_489=_487[1];var _48a=_487[0],_48b=_487[1];if(_486.htmlText.length){if(_486.htmlText==_486.text){_48b=_489+_486.text.length;}else{_487=_450.range.ie.getEndPoint(_486,true);_48a=_487[0],_48b=_487[1];}}return [_488,_489,_48a,_48b];},setRange:function(_48c,_48d,_48e,_48f,_490,_491){var _492=_450.range.ie.setEndPoint(_48c,_48d,_48e);_48c.setEndPoint("StartToStart",_492);if(!_491){var end=_450.range.ie.setEndPoint(_48c,_48f,_490);}_48c.setEndPoint("EndToEnd",end||_492);return _48c;}};_44f("dijit.range.W3CRange",null,{constructor:function(){if(arguments.length>0){this.setStart(arguments[0][0],arguments[0][1]);this.setEnd(arguments[0][2],arguments[0][3]);}else{this.commonAncestorContainer=null;this.startContainer=null;this.startOffset=0;this.endContainer=null;this.endOffset=0;this.collapsed=true;}},_updateInternal:function(){if(this.startContainer!==this.endContainer){this.commonAncestorContainer=_450.range.getCommonAncestor(this.startContainer,this.endContainer);}else{this.commonAncestorContainer=this.startContainer;}this.collapsed=(this.startContainer===this.endContainer)&&(this.startOffset==this.endOffset);},setStart:function(node,_493){_493=parseInt(_493);if(this.startContainer===node&&this.startOffset==_493){return;}delete this._cachedBookmark;this.startContainer=node;this.startOffset=_493;if(!this.endContainer){this.setEnd(node,_493);}else{this._updateInternal();}},setEnd:function(node,_494){_494=parseInt(_494);if(this.endContainer===node&&this.endOffset==_494){return;}delete this._cachedBookmark;this.endContainer=node;this.endOffset=_494;if(!this.startContainer){this.setStart(node,_494);}else{this._updateInternal();}},setStartAfter:function(node,_495){this._setPoint("setStart",node,_495,1);},setStartBefore:function(node,_496){this._setPoint("setStart",node,_496,0);},setEndAfter:function(node,_497){this._setPoint("setEnd",node,_497,1);},setEndBefore:function(node,_498){this._setPoint("setEnd",node,_498,0);},_setPoint:function(what,node,_499,ext){var _49a=_450.range.getIndex(node,node.parentNode).o;this[what](node.parentNode,_49a.pop()+ext);},_getIERange:function(){var r=(this._body||this.endContainer.ownerDocument.body).createTextRange();_450.range.ie.setRange(r,this.startContainer,this.startOffset,this.endContainer,this.endOffset,this.collapsed);return r;},getBookmark:function(){this._getIERange();return this._cachedBookmark;},_select:function(){var r=this._getIERange();r.select();},deleteContents:function(){var s=this.startContainer,r=this._getIERange();if(s.nodeType===3&&!this.startOffset){this.setStartBefore(s);}r.pasteHTML("");this.endContainer=this.startContainer;this.endOffset=this.startOffset;this.collapsed=true;},cloneRange:function(){var r=new _450.range.W3CRange([this.startContainer,this.startOffset,this.endContainer,this.endOffset]);r._body=this._body;return r;},detach:function(){this._body=null;this.commonAncestorContainer=null;this.startContainer=null;this.startOffset=0;this.endContainer=null;this.endOffset=0;this.collapsed=true;}});}return _450.range;});},"dojo/store/util/QueryResults":function(){define(["../../_base/array","../../_base/lang","../../_base/Deferred"],function(_49b,lang,_49c){var _49d=function(_49e){if(!_49e){return _49e;}if(_49e.then){_49e=lang.delegate(_49e);}function _49f(_4a0){if(!_49e[_4a0]){_49e[_4a0]=function(){var args=arguments;return _49c.when(_49e,function(_4a1){Array.prototype.unshift.call(args,_4a1);return _49d(_49b[_4a0].apply(_49b,args));});};}};_49f("forEach");_49f("filter");_49f("map");if(!_49e.total){_49e.total=_49c.when(_49e,function(_4a2){return _4a2.length;});}return _49e;};lang.setObject("dojo.store.util.QueryResults",_49d);return _49d;});},"dijit/form/_ListBase":function(){define("dijit/form/_ListBase",["dojo/_base/declare","dojo/on","dojo/window"],function(_4a3,on,_4a4){return _4a3("dijit.form._ListBase",null,{selected:null,_listConnect:function(_4a5,_4a6){var self=this;return self.own(on(self.containerNode,on.selector(function(_4a7,_4a8,_4a9){return _4a7.parentNode==_4a9;},_4a5),function(evt){evt.preventDefault();self[_4a6](evt,this);}));},selectFirstNode:function(){var _4aa=this.containerNode.firstChild;while(_4aa&&_4aa.style.display=="none"){_4aa=_4aa.nextSibling;}this._setSelectedAttr(_4aa);},selectLastNode:function(){var last=this.containerNode.lastChild;while(last&&last.style.display=="none"){last=last.previousSibling;}this._setSelectedAttr(last);},selectNextNode:function(){var _4ab=this.selected;if(!_4ab){this.selectFirstNode();}else{var next=_4ab.nextSibling;while(next&&next.style.display=="none"){next=next.nextSibling;}if(!next){this.selectFirstNode();}else{this._setSelectedAttr(next);}}},selectPreviousNode:function(){var _4ac=this.selected;if(!_4ac){this.selectLastNode();}else{var prev=_4ac.previousSibling;while(prev&&prev.style.display=="none"){prev=prev.previousSibling;}if(!prev){this.selectLastNode();}else{this._setSelectedAttr(prev);}}},_setSelectedAttr:function(node){if(this.selected!=node){var _4ad=this.selected;if(_4ad){this.onDeselect(_4ad);this.selected=null;}if(node){this.selected=node;_4a4.scrollIntoView(node);this.onSelect(node);}}else{if(node){this.onSelect(node);}}}});});},"dojo/DeferredList":function(){define(["./_base/kernel","./_base/Deferred","./_base/array"],function(dojo,_4ae,_4af){dojo.DeferredList=function(list,_4b0,_4b1,_4b2,_4b3){var _4b4=[];_4ae.call(this);var self=this;if(list.length===0&&!_4b0){this.resolve([0,[]]);}var _4b5=0;_4af.forEach(list,function(item,i){item.then(function(_4b6){if(_4b0){self.resolve([i,_4b6]);}else{_4b7(true,_4b6);}},function(_4b8){if(_4b1){self.reject(_4b8);}else{_4b7(false,_4b8);}if(_4b2){return null;}throw _4b8;});function _4b7(_4b9,_4ba){_4b4[i]=[_4b9,_4ba];_4b5++;if(_4b5===list.length){self.resolve(_4b4);}};});};dojo.DeferredList.prototype=new _4ae();dojo.DeferredList.prototype.gatherResults=function(_4bb){var d=new dojo.DeferredList(_4bb,false,true,false);d.addCallback(function(_4bc){var ret=[];_4af.forEach(_4bc,function(_4bd){ret.push(_4bd[1]);});return ret;});return d;};return dojo.DeferredList;});},"dijit/CalendarLite":function(){require({cache:{"url:dijit/templates/Calendar.html":"<table cellspacing=\"0\" cellpadding=\"0\" class=\"dijitCalendarContainer\" role=\"grid\" aria-labelledby=\"${id}_mddb ${id}_year\">\n\t<thead>\n\t\t<tr class=\"dijitReset dijitCalendarMonthContainer\" valign=\"top\">\n\t\t\t<th class='dijitReset dijitCalendarArrow' data-dojo-attach-point=\"decrementMonth\">\n\t\t\t\t<img src=\"${_blankGif}\" alt=\"\" class=\"dijitCalendarIncrementControl dijitCalendarDecrease\" role=\"presentation\"/>\n\t\t\t\t<span data-dojo-attach-point=\"decreaseArrowNode\" class=\"dijitA11ySideArrow\">-</span>\n\t\t\t</th>\n\t\t\t<th class='dijitReset' colspan=\"5\">\n\t\t\t\t<div data-dojo-attach-point=\"monthNode\">\n\t\t\t\t</div>\n\t\t\t</th>\n\t\t\t<th class='dijitReset dijitCalendarArrow' data-dojo-attach-point=\"incrementMonth\">\n\t\t\t\t<img src=\"${_blankGif}\" alt=\"\" class=\"dijitCalendarIncrementControl dijitCalendarIncrease\" role=\"presentation\"/>\n\t\t\t\t<span data-dojo-attach-point=\"increaseArrowNode\" class=\"dijitA11ySideArrow\">+</span>\n\t\t\t</th>\n\t\t</tr>\n\t\t<tr role=\"row\">\n\t\t\t${!dayCellsHtml}\n\t\t</tr>\n\t</thead>\n\t<tbody data-dojo-attach-point=\"dateRowsNode\" data-dojo-attach-event=\"onclick: _onDayClick\" class=\"dijitReset dijitCalendarBodyContainer\">\n\t\t\t${!dateRowsHtml}\n\t</tbody>\n\t<tfoot class=\"dijitReset dijitCalendarYearContainer\">\n\t\t<tr>\n\t\t\t<td class='dijitReset' valign=\"top\" colspan=\"7\" role=\"presentation\">\n\t\t\t\t<div class=\"dijitCalendarYearLabel\">\n\t\t\t\t\t<span data-dojo-attach-point=\"previousYearLabelNode\" class=\"dijitInline dijitCalendarPreviousYear\" role=\"button\"></span>\n\t\t\t\t\t<span data-dojo-attach-point=\"currentYearLabelNode\" class=\"dijitInline dijitCalendarSelectedYear\" role=\"button\" id=\"${id}_year\"></span>\n\t\t\t\t\t<span data-dojo-attach-point=\"nextYearLabelNode\" class=\"dijitInline dijitCalendarNextYear\" role=\"button\"></span>\n\t\t\t\t</div>\n\t\t\t</td>\n\t\t</tr>\n\t</tfoot>\n</table>\n"}});define("dijit/CalendarLite",["dojo/_base/array","dojo/_base/declare","dojo/cldr/supplemental","dojo/date","dojo/date/locale","dojo/date/stamp","dojo/dom","dojo/dom-class","dojo/_base/event","dojo/_base/lang","dojo/sniff","dojo/string","./_WidgetBase","./_TemplatedMixin","dojo/text!./templates/Calendar.html","./hccss"],function(_4be,_4bf,_4c0,date,_4c1,_4c2,dom,_4c3,_4c4,lang,has,_4c5,_4c6,_4c7,_4c8){var _4c9=_4bf("dijit.CalendarLite",[_4c6,_4c7],{templateString:_4c8,dowTemplateString:"<th class=\"dijitReset dijitCalendarDayLabelTemplate\" role=\"columnheader\"><span class=\"dijitCalendarDayLabel\">${d}</span></th>",dateTemplateString:"<td class=\"dijitReset\" role=\"gridcell\" data-dojo-attach-point=\"dateCells\"><span class=\"dijitCalendarDateLabel\" data-dojo-attach-point=\"dateLabels\"></span></td>",weekTemplateString:"<tr class=\"dijitReset dijitCalendarWeekTemplate\" role=\"row\">${d}${d}${d}${d}${d}${d}${d}</tr>",value:new Date(""),datePackage:"",dayWidth:"narrow",tabIndex:"0",currentFocus:new Date(),baseClass:"dijitCalendar",_isValidDate:function(_4ca){return _4ca&&!isNaN(_4ca)&&typeof _4ca=="object"&&_4ca.toString()!=this.constructor.prototype.value.toString();},_getValueAttr:function(){if(this.value&&!isNaN(this.value)){var _4cb=new this.dateClassObj(this.value);_4cb.setHours(0,0,0,0);if(_4cb.getDate()<this.value.getDate()){_4cb=this.dateModule.add(_4cb,"hour",1);}return _4cb;}else{return null;}},_setValueAttr:function(_4cc,_4cd){if(typeof _4cc=="string"){_4cc=_4c2.fromISOString(_4cc);}_4cc=this._patchDate(_4cc);if(this._isValidDate(_4cc)&&!this.isDisabledDate(_4cc,this.lang)){this._set("value",_4cc);this.set("currentFocus",_4cc);this._markSelectedDates([_4cc]);if(this._created&&(_4cd||typeof _4cd=="undefined")){this.onChange(this.get("value"));}}else{this._set("value",null);this._markSelectedDates([]);}},_patchDate:function(_4ce){if(_4ce){_4ce=new this.dateClassObj(_4ce);_4ce.setHours(1,0,0,0);}return _4ce;},_setText:function(node,text){while(node.firstChild){node.removeChild(node.firstChild);}node.appendChild(node.ownerDocument.createTextNode(text));},_populateGrid:function(){var _4cf=new this.dateClassObj(this.currentFocus);_4cf.setDate(1);var _4d0=_4cf.getDay(),_4d1=this.dateModule.getDaysInMonth(_4cf),_4d2=this.dateModule.getDaysInMonth(this.dateModule.add(_4cf,"month",-1)),_4d3=new this.dateClassObj(),_4d4=_4c0.getFirstDayOfWeek(this.lang);if(_4d4>_4d0){_4d4-=7;}this._date2cell={};_4be.forEach(this.dateCells,function(_4d5,idx){var i=idx+_4d4;var date=new this.dateClassObj(_4cf),_4d6,_4d7="dijitCalendar",adj=0;if(i<_4d0){_4d6=_4d2-_4d0+i+1;adj=-1;_4d7+="Previous";}else{if(i>=(_4d0+_4d1)){_4d6=i-_4d0-_4d1+1;adj=1;_4d7+="Next";}else{_4d6=i-_4d0+1;_4d7+="Current";}}if(adj){date=this.dateModule.add(date,"month",adj);}date.setDate(_4d6);if(!this.dateModule.compare(date,_4d3,"date")){_4d7="dijitCalendarCurrentDate "+_4d7;}if(this.isDisabledDate(date,this.lang)){_4d7="dijitCalendarDisabledDate "+_4d7;_4d5.setAttribute("aria-disabled","true");}else{_4d7="dijitCalendarEnabledDate "+_4d7;_4d5.removeAttribute("aria-disabled");_4d5.setAttribute("aria-selected","false");}var _4d8=this.getClassForDate(date,this.lang);if(_4d8){_4d7=_4d8+" "+_4d7;}_4d5.className=_4d7+"Month dijitCalendarDateTemplate";var _4d9=date.valueOf();this._date2cell[_4d9]=_4d5;_4d5.dijitDateValue=_4d9;this._setText(this.dateLabels[idx],date.getDateLocalized?date.getDateLocalized(this.lang):date.getDate());},this);},_populateControls:function(){var _4da=new this.dateClassObj(this.currentFocus);_4da.setDate(1);this.monthWidget.set("month",_4da);var y=_4da.getFullYear()-1;var d=new this.dateClassObj();_4be.forEach(["previous","current","next"],function(name){d.setFullYear(y++);this._setText(this[name+"YearLabelNode"],this.dateLocaleModule.format(d,{selector:"year",locale:this.lang}));},this);},goToToday:function(){this.set("value",new this.dateClassObj());},constructor:function(_4db){this.dateModule=_4db.datePackage?lang.getObject(_4db.datePackage,false):date;this.dateClassObj=this.dateModule.Date||Date;this.dateLocaleModule=_4db.datePackage?lang.getObject(_4db.datePackage+".locale",false):_4c1;},_createMonthWidget:function(){return _4c9._MonthWidget({id:this.id+"_mw",lang:this.lang,dateLocaleModule:this.dateLocaleModule},this.monthNode);},buildRendering:function(){var d=this.dowTemplateString,_4dc=this.dateLocaleModule.getNames("days",this.dayWidth,"standAlone",this.lang),_4dd=_4c0.getFirstDayOfWeek(this.lang);this.dayCellsHtml=_4c5.substitute([d,d,d,d,d,d,d].join(""),{d:""},function(){return _4dc[_4dd++%7];});var r=_4c5.substitute(this.weekTemplateString,{d:this.dateTemplateString});this.dateRowsHtml=[r,r,r,r,r,r].join("");this.dateCells=[];this.dateLabels=[];this.inherited(arguments);dom.setSelectable(this.domNode,false);var _4de=new this.dateClassObj(this.currentFocus);this.monthWidget=this._createMonthWidget();this.set("currentFocus",_4de,false);},postCreate:function(){this.inherited(arguments);this._connectControls();},_connectControls:function(){var _4df=lang.hitch(this,function(_4e0,part,_4e1){this.connect(this[_4e0],"onclick",function(){this._setCurrentFocusAttr(this.dateModule.add(this.currentFocus,part,_4e1));});});_4df("incrementMonth","month",1);_4df("decrementMonth","month",-1);_4df("nextYearLabelNode","year",1);_4df("previousYearLabelNode","year",-1);},_setCurrentFocusAttr:function(date,_4e2){var _4e3=this.currentFocus,_4e4=this._getNodeByDate(_4e3);date=this._patchDate(date);this._set("currentFocus",date);if(!this._date2cell||this.dateModule.difference(_4e3,date,"month")!=0){this._populateGrid();this._populateControls();this._markSelectedDates([this.value]);}var _4e5=this._getNodeByDate(date);_4e5.setAttribute("tabIndex",this.tabIndex);if(this.focused||_4e2){_4e5.focus();}if(_4e4&&_4e4!=_4e5){if(has("webkit")){_4e4.setAttribute("tabIndex","-1");}else{_4e4.removeAttribute("tabIndex");}}},focus:function(){this._setCurrentFocusAttr(this.currentFocus,true);},_onDayClick:function(evt){_4c4.stop(evt);for(var node=evt.target;node&&!node.dijitDateValue;node=node.parentNode){}if(node&&!_4c3.contains(node,"dijitCalendarDisabledDate")){this.set("value",node.dijitDateValue);}},_getNodeByDate:function(_4e6){_4e6=this._patchDate(_4e6);return _4e6&&this._date2cell?this._date2cell[_4e6.valueOf()]:null;},_markSelectedDates:function(_4e7){function mark(_4e8,cell){_4c3.toggle(cell,"dijitCalendarSelectedDate",_4e8);cell.setAttribute("aria-selected",_4e8?"true":"false");};_4be.forEach(this._selectedCells||[],lang.partial(mark,false));this._selectedCells=_4be.filter(_4be.map(_4e7,this._getNodeByDate,this),function(n){return n;});_4be.forEach(this._selectedCells,lang.partial(mark,true));},onChange:function(){},isDisabledDate:function(){},getClassForDate:function(){}});_4c9._MonthWidget=_4bf("dijit.CalendarLite._MonthWidget",_4c6,{_setMonthAttr:function(_4e9){var _4ea=this.dateLocaleModule.getNames("months","wide","standAlone",this.lang,_4e9),_4eb=(has("ie")==6?"":"<div class='dijitSpacer'>"+_4be.map(_4ea,function(s){return "<div>"+s+"</div>";}).join("")+"</div>");this.domNode.innerHTML=_4eb+"<div class='dijitCalendarMonthLabel dijitCalendarCurrentMonthLabel'>"+_4ea[_4e9.getMonth()]+"</div>";}});return _4c9;});},"dojo/io/iframe":function(){define(["../_base/config","../_base/json","../_base/kernel","../_base/lang","../_base/xhr","../sniff","../_base/window","../dom","../dom-construct","../query","require","../aspect","../request/iframe"],function(_4ec,json,_4ed,lang,xhr,has,win,dom,_4ee,_4ef,_4f0,_4f1,_4f2){dojo.deprecated("dojo/io/iframe","Use dojo/request/iframe.","2.0");var mid=_4f2._iframeName;mid=mid.substring(0,mid.lastIndexOf("_"));var _4f3=lang.delegate(_4f2,{create:function(){return _4f3._frame=_4f2.create.apply(_4f2,arguments);},get:null,post:null,send:function(args){var rDfd;var dfd=xhr._ioSetArgs(args,function(dfd){rDfd&&rDfd.cancel();},function(dfd){var _4f4=null,_4f5=dfd.ioArgs;try{var _4f6=_4f5.handleAs;if(_4f6==="xml"||_4f6==="html"){_4f4=rDfd.response.data;}else{_4f4=rDfd.response.text;if(_4f6==="json"){_4f4=json.fromJson(_4f4);}else{if(_4f6==="javascript"){_4f4=_4ed.eval(_4f4);}}}}catch(e){_4f4=e;}return _4f4;},function(_4f7,dfd){dfd.ioArgs._hasError=true;return _4f7;});var _4f8=dfd.ioArgs;var _4f9="GET",form=dojo.byId(args.form);if(args.method&&args.method.toUpperCase()==="POST"&&form){_4f9="POST";}var _4fa={method:_4f9,handleAs:args.handleAs==="json"||args.handleAs==="javascript"?"text":args.handleAs,form:args.form,query:form?null:args.content,data:form?args.content:null,timeout:args.timeout,ioArgs:_4f8};if(_4fa.method){_4fa.method=_4fa.method.toUpperCase();}if(_4ec.ioPublish&&_4ed.publish&&_4f8.args.ioPublish!==false){var _4fb=_4f1.after(_4f2,"_notifyStart",function(data){if(data.options.ioArgs===_4f8){_4fb.remove();xhr._ioNotifyStart(dfd);}},true);}rDfd=_4f2(_4f8.url,_4fa,true);_4f8._callNext=rDfd._callNext;rDfd.then(function(){dfd.resolve(dfd);}).otherwise(function(_4fc){dfd.ioArgs.error=_4fc;dfd.reject(_4fc);});return dfd;},_iframeOnload:win.global[mid+"_onload"]});lang.setObject("dojo.io.iframe",_4f3);return _4f3;});},"dijit/form/_ComboBoxMenu":function(){define("dijit/form/_ComboBoxMenu",["dojo/_base/declare","dojo/dom-class","dojo/dom-style","dojo/keys","../_WidgetBase","../_TemplatedMixin","./_ComboBoxMenuMixin","./_ListMouseMixin"],function(_4fd,_4fe,_4ff,keys,_500,_501,_502,_503){return _4fd("dijit.form._ComboBoxMenu",[_500,_501,_503,_502],{templateString:"<div class='dijitReset dijitMenu' data-dojo-attach-point='containerNode' style='overflow: auto; overflow-x: hidden;'>"+"<div class='dijitMenuItem dijitMenuPreviousButton' data-dojo-attach-point='previousButton' role='option'></div>"+"<div class='dijitMenuItem dijitMenuNextButton' data-dojo-attach-point='nextButton' role='option'></div>"+"</div>",baseClass:"dijitComboBoxMenu",postCreate:function(){this.inherited(arguments);if(!this.isLeftToRight()){_4fe.add(this.previousButton,"dijitMenuItemRtl");_4fe.add(this.nextButton,"dijitMenuItemRtl");}},_createMenuItem:function(){var item=this.ownerDocument.createElement("div");item.className="dijitReset dijitMenuItem"+(this.isLeftToRight()?"":" dijitMenuItemRtl");item.setAttribute("role","option");return item;},onHover:function(node){_4fe.add(node,"dijitMenuItemHover");},onUnhover:function(node){_4fe.remove(node,"dijitMenuItemHover");},onSelect:function(node){_4fe.add(node,"dijitMenuItemSelected");},onDeselect:function(node){_4fe.remove(node,"dijitMenuItemSelected");},_page:function(up){var _504=0;var _505=this.domNode.scrollTop;var _506=_4ff.get(this.domNode,"height");if(!this.getHighlightedOption()){this.selectNextNode();}while(_504<_506){var _507=this.getHighlightedOption();if(up){if(!_507.previousSibling||_507.previousSibling.style.display=="none"){break;}this.selectPreviousNode();}else{if(!_507.nextSibling||_507.nextSibling.style.display=="none"){break;}this.selectNextNode();}var _508=this.domNode.scrollTop;_504+=(_508-_505)*(up?-1:1);_505=_508;}},handleKey:function(evt){switch(evt.keyCode){case keys.DOWN_ARROW:this.selectNextNode();return false;case keys.PAGE_DOWN:this._page(false);return false;case keys.UP_ARROW:this.selectPreviousNode();return false;case keys.PAGE_UP:this._page(true);return false;default:return true;}}});});},"dijit/form/_DateTimeTextBox":function(){require({cache:{"url:dijit/form/templates/DropDownBox.html":"<div class=\"dijit dijitReset dijitInline dijitLeft\"\n\tid=\"widget_${id}\"\n\trole=\"combobox\"\n\t><div class='dijitReset dijitRight dijitButtonNode dijitArrowButton dijitDownArrowButton dijitArrowButtonContainer'\n\t\tdata-dojo-attach-point=\"_buttonNode, _popupStateNode\" role=\"presentation\"\n\t\t><input class=\"dijitReset dijitInputField dijitArrowButtonInner\" value=\"&#9660; \" type=\"text\" tabIndex=\"-1\" readonly=\"readonly\" role=\"presentation\"\n\t\t\t${_buttonInputDisabled}\n\t/></div\n\t><div class='dijitReset dijitValidationContainer'\n\t\t><input class=\"dijitReset dijitInputField dijitValidationIcon dijitValidationInner\" value=\"&#935; \" type=\"text\" tabIndex=\"-1\" readonly=\"readonly\" role=\"presentation\"\n\t/></div\n\t><div class=\"dijitReset dijitInputField dijitInputContainer\"\n\t\t><input class='dijitReset dijitInputInner' ${!nameAttrSetting} type=\"text\" autocomplete=\"off\"\n\t\t\tdata-dojo-attach-point=\"textbox,focusNode\" role=\"textbox\" aria-haspopup=\"true\"\n\t/></div\n></div>\n"}});define("dijit/form/_DateTimeTextBox",["dojo/date","dojo/date/locale","dojo/date/stamp","dojo/_base/declare","dojo/_base/lang","./RangeBoundTextBox","../_HasDropDown","dojo/text!./templates/DropDownBox.html"],function(date,_509,_50a,_50b,lang,_50c,_50d,_50e){new Date("X");var _50f=_50b("dijit.form._DateTimeTextBox",[_50c,_50d],{templateString:_50e,hasDownArrow:true,cssStateNodes:{"_buttonNode":"dijitDownArrowButton"},pattern:_509.regexp,datePackage:"",postMixInProperties:function(){this.inherited(arguments);this._set("type","text");},compare:function(val1,val2){var _510=this._isInvalidDate(val1);var _511=this._isInvalidDate(val2);return _510?(_511?0:-1):(_511?1:date.compare(val1,val2,this._selector));},forceWidth:true,format:function(_512,_513){if(!_512){return "";}return this.dateLocaleModule.format(_512,_513);},"parse":function(_514,_515){return this.dateLocaleModule.parse(_514,_515)||(this._isEmpty(_514)?null:undefined);},serialize:function(val,_516){if(val.toGregorian){val=val.toGregorian();}return _50a.toISOString(val,_516);},dropDownDefaultValue:new Date(),value:new Date(""),_blankValue:null,popupClass:"",_selector:"",constructor:function(_517){this.dateModule=_517.datePackage?lang.getObject(_517.datePackage,false):date;this.dateClassObj=this.dateModule.Date||Date;this.dateLocaleModule=_517.datePackage?lang.getObject(_517.datePackage+".locale",false):_509;this._set("pattern",this.dateLocaleModule.regexp);this._invalidDate=this.constructor.prototype.value.toString();},buildRendering:function(){this.inherited(arguments);if(!this.hasDownArrow){this._buttonNode.style.display="none";}if(!this.hasDownArrow){this._buttonNode=this.domNode;this.baseClass+=" dijitComboBoxOpenOnClick";}},_setConstraintsAttr:function(_518){_518.selector=this._selector;_518.fullYear=true;var _519=_50a.fromISOString;if(typeof _518.min=="string"){_518.min=_519(_518.min);}if(typeof _518.max=="string"){_518.max=_519(_518.max);}this.inherited(arguments);},_isInvalidDate:function(_51a){return !_51a||isNaN(_51a)||typeof _51a!="object"||_51a.toString()==this._invalidDate;},_setValueAttr:function(_51b,_51c,_51d){if(_51b!==undefined){if(typeof _51b=="string"){_51b=_50a.fromISOString(_51b);}if(this._isInvalidDate(_51b)){_51b=null;}if(_51b instanceof Date&&!(this.dateClassObj instanceof Date)){_51b=new this.dateClassObj(_51b);}}this.inherited(arguments);if(this.value instanceof Date){this.filterString="";}if(this.dropDown){this.dropDown.set("value",_51b,false);}},_set:function(attr,_51e){if(attr=="value"&&this.value instanceof Date&&this.compare(_51e,this.value)==0){return;}this.inherited(arguments);},_setDropDownDefaultValueAttr:function(val){if(this._isInvalidDate(val)){val=new this.dateClassObj();}this.dropDownDefaultValue=val;},openDropDown:function(_51f){if(this.dropDown){this.dropDown.destroy();}var _520=lang.isString(this.popupClass)?lang.getObject(this.popupClass,false):this.popupClass,_521=this,_522=this.get("value");this.dropDown=new _520({onChange:function(_523){_521.set("value",_523,true);},id:this.id+"_popup",dir:_521.dir,lang:_521.lang,value:_522,currentFocus:!this._isInvalidDate(_522)?_522:this.dropDownDefaultValue,constraints:_521.constraints,filterString:_521.filterString,datePackage:_521.params.datePackage,isDisabledDate:function(date){return !_521.rangeCheck(date,_521.constraints);}});this.inherited(arguments);},_getDisplayedValueAttr:function(){return this.textbox.value;},_setDisplayedValueAttr:function(_524,_525){this._setValueAttr(this.parse(_524,this.constraints),_525,_524);}});return _50f;});},"dijit/Calendar":function(){define("dijit/Calendar",["dojo/_base/array","dojo/date","dojo/date/locale","dojo/_base/declare","dojo/dom-attr","dojo/dom-class","dojo/_base/event","dojo/_base/kernel","dojo/keys","dojo/_base/lang","dojo/sniff","./CalendarLite","./_Widget","./_CssStateMixin","./_TemplatedMixin","./form/DropDownButton"],function(_526,date,_527,_528,_529,_52a,_52b,_52c,keys,lang,has,_52d,_52e,_52f,_530,_531){var _532=_528("dijit.Calendar",[_52d,_52e,_52f],{cssStateNodes:{"decrementMonth":"dijitCalendarArrow","incrementMonth":"dijitCalendarArrow","previousYearLabelNode":"dijitCalendarPreviousYear","nextYearLabelNode":"dijitCalendarNextYear"},setValue:function(_533){_52c.deprecated("dijit.Calendar:setValue() is deprecated.  Use set('value', ...) instead.","","2.0");this.set("value",_533);},_createMonthWidget:function(){return new _532._MonthDropDownButton({id:this.id+"_mddb",tabIndex:-1,onMonthSelect:lang.hitch(this,"_onMonthSelect"),lang:this.lang,dateLocaleModule:this.dateLocaleModule},this.monthNode);},postCreate:function(){this.inherited(arguments);this.connect(this.domNode,"onkeydown","_onKeyDown");this.connect(this.dateRowsNode,"onmouseover","_onDayMouseOver");this.connect(this.dateRowsNode,"onmouseout","_onDayMouseOut");this.connect(this.dateRowsNode,"onmousedown","_onDayMouseDown");this.connect(this.dateRowsNode,"onmouseup","_onDayMouseUp");},_onMonthSelect:function(_534){var date=new this.dateClassObj(this.currentFocus);date.setDate(1);date.setMonth(_534);var _535=this.dateModule.getDaysInMonth(date);var _536=this.currentFocus.getDate();date.setDate(Math.min(_536,_535));this._setCurrentFocusAttr(date);},_onDayMouseOver:function(evt){var node=_52a.contains(evt.target,"dijitCalendarDateLabel")?evt.target.parentNode:evt.target;if(node&&((node.dijitDateValue&&!_52a.contains(node,"dijitCalendarDisabledDate"))||node==this.previousYearLabelNode||node==this.nextYearLabelNode)){_52a.add(node,"dijitCalendarHoveredDate");this._currentNode=node;}},_onDayMouseOut:function(evt){if(!this._currentNode){return;}if(evt.relatedTarget&&evt.relatedTarget.parentNode==this._currentNode){return;}var cls="dijitCalendarHoveredDate";if(_52a.contains(this._currentNode,"dijitCalendarActiveDate")){cls+=" dijitCalendarActiveDate";}_52a.remove(this._currentNode,cls);this._currentNode=null;},_onDayMouseDown:function(evt){var node=evt.target.parentNode;if(node&&node.dijitDateValue&&!_52a.contains(node,"dijitCalendarDisabledDate")){_52a.add(node,"dijitCalendarActiveDate");this._currentNode=node;}},_onDayMouseUp:function(evt){var node=evt.target.parentNode;if(node&&node.dijitDateValue){_52a.remove(node,"dijitCalendarActiveDate");}},handleKey:function(evt){var _537=-1,_538,_539=this.currentFocus;switch(evt.keyCode){case keys.RIGHT_ARROW:_537=1;case keys.LEFT_ARROW:_538="day";if(!this.isLeftToRight()){_537*=-1;}break;case keys.DOWN_ARROW:_537=1;case keys.UP_ARROW:_538="week";break;case keys.PAGE_DOWN:_537=1;case keys.PAGE_UP:_538=evt.ctrlKey||evt.altKey?"year":"month";break;case keys.END:_539=this.dateModule.add(_539,"month",1);_538="day";case keys.HOME:_539=new this.dateClassObj(_539);_539.setDate(1);break;case keys.ENTER:case keys.SPACE:this.set("value",this.currentFocus);break;default:return true;}if(_538){_539=this.dateModule.add(_539,_538,_537);}this._setCurrentFocusAttr(_539);return false;},_onKeyDown:function(evt){if(!this.handleKey(evt)){_52b.stop(evt);}},onValueSelected:function(){},onChange:function(_53a){this.onValueSelected(_53a);},getClassForDate:function(){}});_532._MonthDropDownButton=_528("dijit.Calendar._MonthDropDownButton",_531,{onMonthSelect:function(){},postCreate:function(){this.inherited(arguments);this.dropDown=new _532._MonthDropDown({id:this.id+"_mdd",onChange:this.onMonthSelect});},_setMonthAttr:function(_53b){var _53c=this.dateLocaleModule.getNames("months","wide","standAlone",this.lang,_53b);this.dropDown.set("months",_53c);this.containerNode.innerHTML=(has("ie")==6?"":"<div class='dijitSpacer'>"+this.dropDown.domNode.innerHTML+"</div>")+"<div class='dijitCalendarMonthLabel dijitCalendarCurrentMonthLabel'>"+_53c[_53b.getMonth()]+"</div>";}});_532._MonthDropDown=_528("dijit.Calendar._MonthDropDown",[_52e,_530],{months:[],templateString:"<div class='dijitCalendarMonthMenu dijitMenu' "+"data-dojo-attach-event='onclick:_onClick,onmouseover:_onMenuHover,onmouseout:_onMenuHover'></div>",_setMonthsAttr:function(_53d){this.domNode.innerHTML=_526.map(_53d,function(_53e,idx){return _53e?"<div class='dijitCalendarMonthLabel' month='"+idx+"'>"+_53e+"</div>":"";}).join("");},_onClick:function(evt){this.onChange(_529.get(evt.target,"month"));},onChange:function(){},_onMenuHover:function(evt){_52a.toggle(evt.target,"dijitCalendarMonthLabelHover",evt.type=="mouseover");}});return _532;});},"dojox/date/islamic":function(){define("dojox/date/islamic",["..","dojo/_base/lang","dojo/date","./islamic/Date"],function(_53f,lang,dd,_540){var _541=lang.getObject("date.islamic",true,_53f);_541.getDaysInMonth=function(_542){return _542.getDaysInIslamicMonth(_542.getMonth(),_542.getFullYear());};_541.compare=function(_543,_544,_545){if(_543 instanceof _540){_543=_543.toGregorian();}if(_544 instanceof _540){_544=_544.toGregorian();}return dd.compare.apply(null,arguments);};_541.add=function(date,_546,_547){var _548=new _540(date);switch(_546){case "day":_548.setDate(date.getDate()+_547);break;case "weekday":var day=date.getDay();if(((day+_547)<5)&&((day+_547)>0)){_548.setDate(date.getDate()+_547);}else{var _549=0,_54a=0;if(day==5){day=4;_54a=(_547>0)?-1:1;}else{if(day==6){day=4;_54a=(_547>0)?-2:2;}}var add=(_547>0)?(5-day-1):-day;var _54b=_547-add;var div=parseInt(_54b/5);if(_54b%5!=0){_549=(_547>0)?2:-2;}_549=_549+div*7+_54b%5+add;_548.setDate(date.getDate()+_549+_54a);}break;case "year":_548.setFullYear(date.getFullYear()+_547);break;case "week":_547*=7;_548.setDate(date.getDate()+_547);break;case "month":var _54c=date.getMonth();_548.setMonth(_54c+_547);break;case "hour":_548.setHours(date.getHours()+_547);break;case "minute":_548._addMinutes(_547);break;case "second":_548._addSeconds(_547);break;case "millisecond":_548._addMilliseconds(_547);break;}return _548;};_541.difference=function(_54d,_54e,_54f){_54e=_54e||new _540();_54f=_54f||"day";var _550=_54e.getFullYear()-_54d.getFullYear();var _551=1;switch(_54f){case "weekday":var days=Math.round(_541.difference(_54d,_54e,"day"));var _552=parseInt(_541.difference(_54d,_54e,"week"));var mod=days%7;if(mod==0){days=_552*5;}else{var adj=0;var aDay=_54d.getDay();var bDay=_54e.getDay();_552=parseInt(days/7);mod=days%7;var _553=new _540(_54d);_553.setDate(_553.getDate()+(_552*7));var _554=_553.getDay();if(days>0){switch(true){case aDay==5:adj=-1;break;case aDay==6:adj=0;break;case bDay==5:adj=-1;break;case bDay==6:adj=-2;break;case (_554+mod)>5:adj=-2;}}else{if(days<0){switch(true){case aDay==5:adj=0;break;case aDay==6:adj=1;break;case bDay==5:adj=2;break;case bDay==6:adj=1;break;case (_554+mod)<0:adj=2;}}}days+=adj;days-=(_552*2);}_551=days;break;case "year":_551=_550;break;case "month":var _555=(_54e.toGregorian()>_54d.toGregorian())?_54e:_54d;var _556=(_54e.toGregorian()>_54d.toGregorian())?_54d:_54e;var _557=_555.getMonth();var _558=_556.getMonth();if(_550==0){_551=_555.getMonth()-_556.getMonth();}else{_551=12-_558;_551+=_557;var i=_556.getFullYear()+1;var e=_555.getFullYear();for(i;i<e;i++){_551+=12;}}if(_54e.toGregorian()<_54d.toGregorian()){_551=-_551;}break;case "week":_551=parseInt(_541.difference(_54d,_54e,"day")/7);break;case "day":_551/=24;case "hour":_551/=60;case "minute":_551/=60;case "second":_551/=1000;case "millisecond":_551*=_54e.toGregorian().getTime()-_54d.toGregorian().getTime();}return Math.round(_551);};return _541;});},"dijit/_editor/selection":function(){define("dijit/_editor/selection",["dojo/dom","dojo/_base/lang","dojo/sniff","dojo/_base/window","../main"],function(dom,lang,has,win,_559){var _55a={getType:function(){if(win.doc.getSelection){var _55b="text";var oSel;try{oSel=win.global.getSelection();}catch(e){}if(oSel&&oSel.rangeCount==1){var _55c=oSel.getRangeAt(0);if((_55c.startContainer==_55c.endContainer)&&((_55c.endOffset-_55c.startOffset)==1)&&(_55c.startContainer.nodeType!=3)){_55b="control";}}return _55b;}else{return win.doc.selection.type.toLowerCase();}},getSelectedText:function(){if(win.doc.getSelection){var _55d=win.global.getSelection();return _55d?_55d.toString():"";}else{if(_559._editor.selection.getType()=="control"){return null;}return win.doc.selection.createRange().text;}},getSelectedHtml:function(){if(win.doc.getSelection){var _55e=win.global.getSelection();if(_55e&&_55e.rangeCount){var i;var html="";for(i=0;i<_55e.rangeCount;i++){var frag=_55e.getRangeAt(i).cloneContents();var div=win.doc.createElement("div");div.appendChild(frag);html+=div.innerHTML;}return html;}return null;}else{if(_559._editor.selection.getType()=="control"){return null;}return win.doc.selection.createRange().htmlText;}},getSelectedElement:function(){if(_559._editor.selection.getType()=="control"){if(win.doc.getSelection){var _55f=win.global.getSelection();return _55f.anchorNode.childNodes[_55f.anchorOffset];}else{var _560=win.doc.selection.createRange();if(_560&&_560.item){return win.doc.selection.createRange().item(0);}}}return null;},getParentElement:function(){if(_559._editor.selection.getType()=="control"){var p=this.getSelectedElement();if(p){return p.parentNode;}}else{if(win.doc.getSelection){var _561=win.global.getSelection();if(_561){var node=_561.anchorNode;while(node&&(node.nodeType!=1)){node=node.parentNode;}return node;}}else{var r=win.doc.selection.createRange();r.collapse(true);return r.parentElement();}}return null;},hasAncestorElement:function(_562){return this.getAncestorElement.apply(this,arguments)!=null;},getAncestorElement:function(_563){var node=this.getSelectedElement()||this.getParentElement();return this.getParentOfType(node,arguments);},isTag:function(node,tags){if(node&&node.tagName){var _564=node.tagName.toLowerCase();for(var i=0;i<tags.length;i++){var _565=String(tags[i]).toLowerCase();if(_564==_565){return _565;}}}return "";},getParentOfType:function(node,tags){while(node){if(this.isTag(node,tags).length){return node;}node=node.parentNode;}return null;},collapse:function(_566){if(win.doc.getSelection){var _567=win.global.getSelection();if(_567.removeAllRanges){if(_566){_567.collapseToStart();}else{_567.collapseToEnd();}}else{_567.collapse(_566);}}else{var _568=win.doc.selection.createRange();_568.collapse(_566);_568.select();}},remove:function(){var sel=win.doc.selection;if(win.doc.getSelection){sel=win.global.getSelection();sel.deleteFromDocument();return sel;}else{if(sel.type.toLowerCase()!="none"){sel.clear();}return sel;}},selectElementChildren:function(_569,_56a){var doc=win.doc;var _56b;_569=dom.byId(_569);if(win.doc.getSelection){var _56c=win.global.getSelection();if(has("opera")){if(_56c.rangeCount){_56b=_56c.getRangeAt(0);}else{_56b=doc.createRange();}_56b.setStart(_569,0);_56b.setEnd(_569,(_569.nodeType==3)?_569.length:_569.childNodes.length);_56c.addRange(_56b);}else{_56c.selectAllChildren(_569);}}else{_56b=_569.ownerDocument.body.createTextRange();_56b.moveToElementText(_569);if(!_56a){try{_56b.select();}catch(e){}}}},selectElement:function(_56d,_56e){var _56f;_56d=dom.byId(_56d);var doc=_56d.ownerDocument;var _570=win.global;if(doc.getSelection){var _571=_570.getSelection();_56f=doc.createRange();if(_571.removeAllRanges){if(has("opera")){if(_571.getRangeAt(0)){_56f=_571.getRangeAt(0);}}_56f.selectNode(_56d);_571.removeAllRanges();_571.addRange(_56f);}}else{try{var tg=_56d.tagName?_56d.tagName.toLowerCase():"";if(tg==="img"||tg==="table"){_56f=win.body(doc).createControlRange();}else{_56f=win.body(doc).createRange();}_56f.addElement(_56d);if(!_56e){_56f.select();}}catch(e){this.selectElementChildren(_56d,_56e);}}},inSelection:function(node){if(node){var _572;var doc=win.doc;var _573;if(win.doc.getSelection){var sel=win.global.getSelection();if(sel&&sel.rangeCount>0){_573=sel.getRangeAt(0);}if(_573&&_573.compareBoundaryPoints&&doc.createRange){try{_572=doc.createRange();_572.setStart(node,0);if(_573.compareBoundaryPoints(_573.START_TO_END,_572)===1){return true;}}catch(e){}}}else{_573=doc.selection.createRange();try{_572=node.ownerDocument.body.createControlRange();if(_572){_572.addElement(node);}}catch(e1){try{_572=node.ownerDocument.body.createTextRange();_572.moveToElementText(node);}catch(e2){}}if(_573&&_572){if(_573.compareEndPoints("EndToStart",_572)===1){return true;}}}}return false;}};lang.setObject("dijit._editor.selection",_55a);return _55a;});},"esri/layers/FeatureLayer":function(){define("esri/layers/FeatureLayer",["dijit","dojo","dojox","dojo/require!esri/layers/graphics,esri/tasks/query,dojo/io/iframe,esri/layers/agscommon,dojo/date/locale"],function(_574,dojo,_575){dojo.provide("esri.layers.FeatureLayer");dojo.require("esri.layers.graphics");dojo.require("esri.tasks.query");dojo.require("dojo.io.iframe");dojo.require("esri.layers.agscommon");dojo.require("dojo.date.locale");dojo.declare("esri.layers.FeatureLayer",esri.layers.GraphicsLayer,{constructor:function(url,_576){this._outFields=_576&&_576.outFields;this._loadCallback=_576&&_576.loadCallback;var _577=_576&&_576._usePatch;this._usePatch=(_577===null||_577===undefined)?true:_577;this._trackIdField=_576&&_576.trackIdField;this.objectIdField=_576&&_576.objectIdField;this._maxOffset=_576&&_576.maxAllowableOffset;this._optEditable=_576&&_576.editable;this._optAutoGen=_576&&_576.autoGeneralize;this.editSummaryCallback=_576&&_576.editSummaryCallback;this.userId=_576&&_576.userId;this.userIsAdmin=_576&&_576.userIsAdmin;this.useMapTime=(_576&&_576.hasOwnProperty("useMapTime"))?(!!_576.useMapTime):true;this.source=_576&&_576.source;this.gdbVersion=_576&&_576.gdbVersion;this._selectedFeatures={};this._selectedFeaturesArr=[];this._newFeatures=[];this._deletedFeatures={};this._ulid=this._getUniqueId();var ctor=this.constructor,mode=this.mode=(esri._isDefined(_576&&_576.mode)?_576.mode:ctor.MODE_ONDEMAND);switch(mode){case ctor.MODE_SNAPSHOT:this._mode=new esri.layers._SnapshotMode(this);this._isSnapshot=true;break;case ctor.MODE_ONDEMAND:this._tileWidth=(_576&&_576.tileWidth)||512;this._tileHeight=(_576&&_576.tileHeight)||512;this._mode=new esri.layers._OnDemandMode(this);var _578=_576&&_576.latticeTiling;this.latticeTiling=_578;break;case ctor.MODE_SELECTION:this._mode=new esri.layers._SelectionMode(this);this._isSelOnly=true;break;}this._initLayer=dojo.hitch(this,this._initLayer);this._selectHandler=dojo.hitch(this,this._selectHandler);this._editable=false;if(dojo.isObject(url)&&url.layerDefinition){var json=url;this._collection=true;this.mode=ctor.MODE_SNAPSHOT;this._initLayer(json);return this;}this._task=new esri.tasks.QueryTask(this.url,{source:this.source,gdbVersion:this.gdbVersion});var _579=this._url.path;this._fserver=false;if(_579.search(/\/FeatureServer\//i)!==-1){this._fserver=true;}var _57a=_576&&_576.resourceInfo;if(_57a){this._initLayer(_57a);}else{if(this.source){var _57b={source:this.source.toJson()};this._url.query=dojo.mixin(this._url.query,{layer:dojo.toJson(_57b)});}if(this.gdbVersion){this._url.query=dojo.mixin(this._url.query,{gdbVersion:this.gdbVersion});}esri.request({url:_579,content:dojo.mixin({f:"json"},this._url.query),callbackParamName:"callback",load:this._initLayer,error:this._errorHandler});}},_initLayer:function(_57c,io){if(_57c||io){this._json=_57c;this._findCredential();var ssl=(this.credential&&this.credential.ssl)||(_57c&&_57c._ssl);if(ssl){this._useSSL();this._task._useSSL();}if(this._collection){this._mode=new esri.layers._SnapshotMode(this);this._isSnapshot=true;this._featureSet=_57c.featureSet;this._nextId=_57c.nextObjectId;_57c=_57c.layerDefinition;}if(_57c.hasOwnProperty("capabilities")){var _57d=(this.capabilities=_57c.capabilities);if(_57d&&_57d.toLowerCase().indexOf("editing")!==-1){this._editable=true;}else{this._editable=false;}}else{if(!this._collection){this._editable=this._fserver;}}if(esri._isDefined(this._optEditable)){this._editable=this._optEditable;delete this._optEditable;}this._json=dojo.toJson(this._json);if(this.isEditable()){delete this._maxOffset;}else{if(this.mode!==this.constructor.MODE_SNAPSHOT&&((_57c.geometryType==="esriGeometryPolyline")||(_57c.geometryType==="esriGeometryPolygon"))){this._autoGeneralize=esri._isDefined(this._optAutoGen)?this._optAutoGen:(this.mode===this.constructor.MODE_ONDEMAND);delete this._optAutoGen;}}var _57e=_57c.effectiveMinScale||_57c.minScale,_57f=_57c.effectiveMaxScale||_57c.maxScale;if(!this._hasMin&&_57e){this.setMinScale(_57e);}if(!this._hasMax&&_57f){this.setMaxScale(_57f);}this.layerId=_57c.id;this.name=_57c.name;this.description=_57c.description;this.copyright=_57c.copyrightText;this.type=_57c.type;this.geometryType=_57c.geometryType;this.displayField=_57c.displayField;this.defaultDefinitionExpression=_57c.definitionExpression;this.fullExtent=new esri.geometry.Extent(_57c.extent);this.initialExtent=new esri.geometry.Extent(this.fullExtent.toJson());if(this.fullExtent.spatialReference){this.spatialReference=new esri.SpatialReference(this.fullExtent.spatialReference.toJson());}this.defaultVisibility=_57c.defaultVisibility;if((this.geometryType==="esriGeometryPoint")||(this.geometryType==="esriGeometryMultipoint")){this.latticeTiling=false;}this.indexedFields=_57c.indexedFields;this.maxRecordCount=_57c.maxRecordCount;this.canModifyLayer=_57c.canModifyLayer;this.supportsStatistics=_57c.supportsStatistics;this.supportsAdvancedQueries=_57c.supportsAdvancedQueries;this.hasLabels=_57c.hasLabels;this.canScaleSymbols=_57c.canScaleSymbols;this.supportsRollbackOnFailure=_57c.supportsRollbackOnFailure;this.syncCanReturnChanges=_57c.syncCanReturnChanges;this.isDataVersioned=_57c.isDataVersioned;this.editFieldsInfo=_57c.editFieldsInfo;this.ownershipBasedAccessControlForFeatures=_57c.ownershipBasedAccessControlForFeatures;if(this.editFieldsInfo&&this.ownershipBasedAccessControlForFeatures){this.creatorField=this.editFieldsInfo.creatorField;}this.relationships=_57c.relationships;this.allowGeometryUpdates=esri._isDefined(_57c.allowGeometryUpdates)?_57c.allowGeometryUpdates:true;this._isTable=(this.type==="Table");var _580=(this.fields=[]),_581=_57c.fields,i;for(i=0;i<_581.length;i++){_580.push(new esri.layers.Field(_581[i]));}if(!this.objectIdField){this.objectIdField=_57c.objectIdField;if(!this.objectIdField){_581=_57c.fields;for(i=0;i<_581.length;i++){var _582=_581[i];if(_582.type==="esriFieldTypeOID"){this.objectIdField=_582.name;break;}}}if(!this.objectIdField){console.debug("esri.layers.FeatureLayer: "+esri.substitute({url:this.url},esri.bundle.layers.FeatureLayer.noOIDField));}}if(!esri._isDefined(this._nextId)){var _583=this.objectIdField,_584=-1;if(this._collection&&_583){var fset=this._featureSet,_585=fset&&fset.features,il=_585?_585.length:0,oid,attr;for(i=0;i<il;i++){attr=_585[i].attributes;oid=attr&&attr[_583];if(oid>_584){_584=oid;}}}this._nextId=(_584+1);}this.globalIdField=_57c.globalIdField;var _586=(this.typeIdField=_57c.typeIdField),_587;if(_586){_587=!this._getField(_586)&&this._getField(_586,true);if(_587){this.typeIdField=_587.name;}}this.visibilityField=_57c.visibilityField;var _588=_57c.defaultSymbol;if(_588){this.defaultSymbol=esri.symbol.fromJson(_588);}var _589=this.types=[],_58a=_57c.types,_58b,_58c,_58d,_58e=this.editFieldsInfo,_58f=_58e&&_58e.creatorField,_590=_58e&&_58e.editorField,fix=(_58f||_590),_591=[];if(_58a){for(i=0;i<_58a.length;i++){_58b=new esri.layers.FeatureType(_58a[i]);_58c=_58b.templates;if(fix&&_58c&&_58c.length){_591=_591.concat(_58c);}_589.push(_58b);}}var _592=_57c.templates,_593,_594=this.templates=[];if(_592){for(i=0;i<_592.length;i++){_593=new esri.layers.FeatureTemplate(_592[i]);if(fix){_591.push(_593);}_594.push(_593);}}for(i=0;i<_591.length;i++){_58d=dojo.getObject("prototype.attributes",false,_591[i]);if(_58d){if(_58f){delete _58d[_58f];}if(_590){delete _58d[_590];}}}var _595=_57c.timeInfo;if(_595){this.timeInfo=new esri.layers.TimeInfo(_595);this._startTimeField=_595.startTimeField;this._endTimeField=_595.endTimeField;if(this._startTimeField&&this._endTimeField){this._twoTimeFields=true;}if(this._trackIdField){_595.trackIdField=this._trackIdField;}else{this._trackIdField=_595.trackIdField;}}this.hasAttachments=(!this._collection&&_57c.hasAttachments)?true:false;this.htmlPopupType=_57c.htmlPopupType;var _596=_57c.drawingInfo,_597;if(!this.renderer){if(_596&&_596.renderer){_597=_596.renderer;this.setRenderer(esri.renderer.fromJson(_597));if(_597.type==="classBreaks"){this.renderer.setMaxInclusive(true);}if(!this._collection){var _598=_597.type,_599=[];_597=this.renderer;switch(_598){case "simple":_599.push(_597.symbol);break;case "uniqueValue":case "classBreaks":_599.push(_597.defaultSymbol);_599=_599.concat(dojo.map(_597.infos,function(info){return info.symbol;}));break;}_599=dojo.filter(_599,esri._isDefined);var _59a=this._url.path+"/images/",_59b=this._getToken();dojo.forEach(_599,function(sym){var url=sym.url;if(url){if((url.search(/https?\:/)===-1)&&(url.indexOf("data:")===-1)){sym.url=_59a+url;}if(_59b&&sym.url.search(/https?\:/)!==-1){sym.url+=("?token="+_59b);}}});}}else{if(_588){_58a=this.types;if(_58a.length>0){_597=new esri.renderer.UniqueValueRenderer(this.defaultSymbol,this.typeIdField);dojo.forEach(_58a,function(type){_597.addValue(type.id,type.symbol);});}else{_597=new esri.renderer.SimpleRenderer(this.defaultSymbol);}this.setRenderer(_597);}else{if(!this._isTable){var _59c;switch(this.geometryType){case "esriGeometryPoint":case "esriGeometryMultipoint":_59c=new esri.symbol.SimpleMarkerSymbol();break;case "esriGeometryPolyline":_59c=new esri.symbol.SimpleLineSymbol();break;case "esriGeometryPolygon":_59c=new esri.symbol.SimpleFillSymbol();break;}this.setRenderer(_59c?new esri.renderer.SimpleRenderer(_59c):null);}}}}var _59d=(_596&&_596.transparency)||0;if(!esri._isDefined(this.opacity)&&_59d>0){this.opacity=1-(_59d/100);}this.version=_57c.currentVersion;if(!this.version){var ver;if("capabilities" in _57c||"drawingInfo" in _57c||"hasAttachments" in _57c||"htmlPopupType" in _57c||"relationships" in _57c||"timeInfo" in _57c||"typeIdField" in _57c||"types" in _57c){ver=10;}else{ver=9.3;}this.version=ver;}if((dojo.isIE||dojo.isSafari)&&this.isEditable()&&this.version<10.02){this._ts=true;}this.loaded=true;this._fixRendererFields();this._checkFields();this._updateCaps();var _59e=function(){this.onLoad(this);var _59f=this._loadCallback;if(_59f){delete this._loadCallback;_59f(this);}};if(this._collection){this._fireUpdateStart();var _5a0=this._featureSet;delete this._featureSet;this._mode._drawFeatures(new esri.tasks.FeatureSet(_5a0));this._fcAdded=true;_59e.call(this);}else{this._forceIdentity(_59e);}}},setRenderer:function(ren){this.inherited("setRenderer",arguments);var _5a1=this.renderer;if(_5a1){this._ager=(_5a1.declaredClass.indexOf("TemporalRenderer")!==-1&&_5a1.observationAger&&_5a1.observationRenderer);var _5a2=dojo.filter([_5a1,_5a1.observationRenderer,_5a1.latestObservationRenderer,_5a1.trackRenderer],esri._isDefined);var _5a3=[];dojo.forEach(_5a2,function(rnd){if(!dojo.isFunction(rnd.attributeField)){_5a3.push(rnd.attributeField);}_5a3.push(rnd.attributeField2);_5a3.push(rnd.attributeField3);},this);this._rendererFields=dojo.filter(_5a3,esri._isDefined);}else{this._ager=false;this._rendererFields=[];}if(this.loaded&&this._rendererFields.length>0){this._fixRendererFields();this._checkFields(this._rendererFields);}if(this.loaded&&this._collection){this._typesDirty=true;}},_unsetMap:function(map,_5a4){var mode=this._mode;if(mode){mode.suspend();}if(this._trackManager){this._trackManager.destroy();this._trackManager=null;}dojo.disconnect(this._zoomConnect);this._zoomConnect=null;this._toggleTime(false);this.inherited("_unsetMap",arguments);},refresh:function(){var mode=this._mode;if(mode){mode.refresh();}},setEditable:function(_5a5){if(!this._collection){console.log("FeatureLayer:setEditable - this functionality is not yet supported for layer in a feature service");return this;}if(!this.loaded){this._optEditable=_5a5;return this;}var _5a6=this._editable;this._editable=_5a5;this._updateCaps();if(_5a6!==_5a5){this.onCapabilitiesChange();}return this;},getEditCapabilities:function(_5a7){var _5a8={"canCreate":false,"canUpdate":false,"canDelete":false};if(!this.loaded||!this.isEditable()){return _5a8;}var _5a9=_5a7&&_5a7.feature,_5aa=_5a7&&_5a7.userId,caps=dojo.map((this.capabilities?this.capabilities.toLowerCase().split(","):[]),dojo.trim),_5ab=dojo.indexOf(caps,"editing")>-1,_5ac=_5ab&&(dojo.indexOf(caps,"create")>-1),_5ad=_5ab&&(dojo.indexOf(caps,"update")>-1),_5ae=_5ab&&(dojo.indexOf(caps,"delete")>-1),_5af=this.ownershipBasedAccessControlForFeatures,_5b0=this.editFieldsInfo,_5b1=_5b0&&_5b0.creatorField,_5b2=_5b0&&_5b0.realm,_5b3=_5a9&&_5a9.attributes,_5b4=(_5b3&&_5b1)?_5b3[_5b1]:undefined,_5b5,_5b6=!!this.userIsAdmin,_5b7=!_5af||_5b6||!!(_5af.allowOthersToUpdate||_5af.allowUpdateToOthers),_5b8=!_5af||_5b6||!!(_5af.allowOthersToDelete||_5af.allowDeleteToOthers);if(_5b6||(_5ab&&!(_5ac||_5ad||_5ae))){_5ac=_5ad=_5ae=true;}_5b5={"canCreate":_5ac,"canUpdate":_5ad,"canDelete":_5ae};if(_5b4===null){_5b5.canUpdate=_5ad&&_5b7;_5b5.canDelete=_5ae&&_5b8;}else{if(_5b4===""){return _5b5;}else{if(_5b4){_5aa=_5aa||this.getUserId();if(_5aa&&_5b2){_5aa=_5aa+"@"+_5b2;}if(_5aa.toLowerCase()===_5b4.toLowerCase()){return _5b5;}else{_5b5.canUpdate=_5ad&&_5b7;_5b5.canDelete=_5ae&&_5b8;}}}}return _5b5;},getUserId:function(){var _5b9;if(this.loaded){_5b9=(this.credential&&this.credential.userId)||this.userId||"";}return _5b9;},setUserIsAdmin:function(_5ba){this.userIsAdmin=_5ba;},setEditSummaryCallback:function(_5bb){this.editSummaryCallback=_5bb;},getEditSummary:function(_5bc,_5bd,_5be){_5be=esri._isDefined(_5be)?_5be:(new Date()).getTime();var _5bf="",info=this.getEditInfo(_5bc,_5bd,_5be),_5c0=(_5bd&&_5bd.callback)||this.editSummaryCallback;if(_5c0){info=_5c0(_5bc,info)||"";}if(dojo.isString(info)){_5bf=info;}else{if(info){var _5c1=info.action,_5c2=info.userId,_5c3=info.timeValue,_5c4=0;if(_5c1){_5c4++;}if(_5c2){_5c4++;}if(esri._isDefined(_5c3)){_5c4++;}if(_5c4>1){_5bf=(_5c1==="edit"?"edit":"create")+(_5c2?"User":"")+(esri._isDefined(_5c3)?info.displayPattern:"");}}_5bf=_5bf&&esri.substitute(info,esri.bundle.layers.FeatureLayer[_5bf]);}return _5bf;},getEditInfo:function(_5c5,_5c6,_5c7){if(!this.loaded){return;}_5c7=esri._isDefined(_5c7)?_5c7:(new Date()).getTime();var _5c8=(_5c6&&_5c6.action)||"last",_5c9=this.editFieldsInfo,_5ca=_5c9&&_5c9.creatorField,_5cb=_5c9&&_5c9.creationDateField,_5cc=_5c9&&_5c9.editorField,_5cd=_5c9&&_5c9.editDateField,_5ce=_5c9&&_5c9.realm,_5cf=_5c5&&_5c5.attributes,_5d0=(_5cf&&_5ca)?_5cf[_5ca]:undefined,_5d1=(_5cf&&_5cb)?_5cf[_5cb]:null,_5d2=(_5cf&&_5cc)?_5cf[_5cc]:undefined,_5d3=(_5cf&&_5cd)?_5cf[_5cd]:null,_5d4=this._getEditData(_5d0,_5d1,_5c7),_5d5=this._getEditData(_5d2,_5d3,_5c7),_5d6;switch(_5c8){case "creation":_5d6=_5d4;break;case "edit":_5d6=_5d5;break;case "last":_5d6=_5d5||_5d4;break;}if(_5d6){_5d6.action=(_5d6===_5d5)?"edit":"creation";}return _5d6;},_getEditData:function(_5d7,_5d8,_5d9){var data,_5da,_5db,_5dc=60000,_5dd=3600000,_5de=2*_5dd,_5df=24*_5dd,_5e0=7*_5df;if(esri._isDefined(_5d8)){_5da=_5d9-_5d8;if(_5da<0){_5db="Full";}else{if(_5da<_5dc){_5db="Seconds";}else{if(_5da<(2*_5dc)){_5db="Minute";}else{if(_5da<_5dd){_5db="Minutes";}else{if(_5da<_5de){_5db="Hour";}else{if(_5da<_5df){_5db="Hours";}else{if(_5da<_5e0){_5db="WeekDay";}else{_5db="Full";}}}}}}}}if((_5d7!==undefined)||_5db){data=data||{};data.userId=_5d7;if(_5db){var _5e1=dojo.date.locale.format,_5e2=new Date(_5d8);data.minutes=Math.floor(_5da/_5dc);data.hours=Math.floor(_5da/_5dd);data.weekDay=_5e1(_5e2,{datePattern:"EEEE",selector:"date"});data.formattedDate=_5e1(_5e2,{selector:"date"});data.formattedTime=_5e1(_5e2,{selector:"time"});data.displayPattern=_5db;data.timeValue=_5d8;}}return data;},isEditable:function(){return !!(this._editable||this.userIsAdmin);},setMaxAllowableOffset:function(_5e3){if(!this.isEditable()){this._maxOffset=_5e3;}return this;},getMaxAllowableOffset:function(){return this._maxOffset;},setAutoGeneralize:function(_5e4){if(!this.loaded){this._optAutoGen=_5e4;}else{if(!this.isEditable()&&(this.mode!==this.constructor.MODE_SNAPSHOT)&&((this.geometryType==="esriGeometryPolyline")||(this.geometryType==="esriGeometryPolygon"))){this._autoGeneralize=_5e4;if(_5e4){var map=this._map;if(map&&map.loaded){this._maxOffset=Math.floor(map.extent.getWidth()/map.width);}}else{delete this._maxOffset;}}}return this;},setGDBVersion:function(_5e5){if(!this._collection&&(_5e5!==this.gdbVersion)&&(_5e5||this.gdbVersion)){this.gdbVersion=_5e5;this._task.gdbVersion=_5e5;this._url.query=dojo.mixin(this._url.query,{gdbVersion:_5e5});if(this.loaded){this.clearSelection();if(this._map){this.refresh();}}this.onGDBVersionChange();}return this;},setDefinitionExpression:function(expr){this._defnExpr=expr;var mode=this._mode;if(mode){mode.propertyChangeHandler(1);}return this;},getDefinitionExpression:function(){return this._defnExpr;},setTimeDefinition:function(_5e6){if(this._isSnapshot){this._timeDefn=_5e6;var mode=this._mode;if(mode){mode.propertyChangeHandler(2);}}else{console.log("FeatureLayer.setTimeDefinition: layer in on-demand or selection mode does not support time definitions. Layer id = "+this.id+", Layer URL = "+this.url);}return this;},getTimeDefinition:function(){return this._timeDefn;},setTimeOffset:function(_5e7,_5e8){this._timeOffset=_5e7;this._timeOffsetUnits=_5e8;var mode=this._mode;if(mode){mode.propertyChangeHandler(0);}return this;},setUseMapTime:function(use){this.useMapTime=use;this._toggleTime(!this.suspended);var mode=this._mode;if(mode){mode.propertyChangeHandler(0);}},selectFeatures:function(_5e9,_5ea,_5eb,_5ec){_5ea=_5ea||this.constructor.SELECTION_NEW;var _5ed=this._getShallowClone(_5e9),map=this._map,_5ee,dfd=esri._fixDfd(new dojo.Deferred(esri._dfdCanceller));_5ed.outFields=this._getOutFields();_5ed.returnGeometry=true;if(map){_5ed.outSpatialReference=new esri.SpatialReference(map.spatialReference.toJson());}if(!this._applyQueryFilters(_5ed)){_5ee={features:[]};this._selectHandler(_5ee,_5ea,_5eb,_5ec,dfd);return dfd;}var _5ef=this._canDoClientSideQuery(_5ed);if(_5ef){_5ee={features:this._doQuery(_5ed,_5ef)};this._selectHandler(_5ee,_5ea,_5eb,_5ec,dfd);return dfd;}else{if(this._collection){var err=new Error("FeatureLayer::selectFeatures - "+esri.bundle.layers.FeatureLayer.invalidParams);this._resolve([err],null,_5ec,dfd,true);return dfd;}var self=this;if(this._ts){_5ed._ts=(new Date()).getTime();}var temp=dfd._pendingDfd=this._task.execute(_5ed);temp.addCallbacks(function(_5f0){self._selectHandler(_5f0,_5ea,_5eb,_5ec,dfd);},function(err){self._resolve([err],null,_5ec,dfd,true);});return dfd;}},getSelectedFeatures:function(){var _5f1=this._selectedFeatures,_5f2=[],item;for(item in _5f1){if(_5f1.hasOwnProperty(item)){_5f2.push(_5f1[item]);}}return _5f2;},clearSelection:function(_5f3){var _5f4=this._selectedFeatures,mode=this._mode,item;for(item in _5f4){if(_5f4.hasOwnProperty(item)){this._unSelectFeatureIIf(item,mode);mode._removeFeatureIIf(item);}}this._selectedFeatures={};if(this._isSelOnly){mode._applyTimeFilter(true);}if(!_5f3){this.onSelectionClear();}return this;},setSelectionSymbol:function(_5f5){this._selectionSymbol=_5f5;if(_5f5){var _5f6=this._selectedFeatures,item;for(item in _5f6){if(_5f6.hasOwnProperty(item)){_5f6[item].setSymbol(_5f5);}}}return this;},getSelectionSymbol:function(){return this._selectionSymbol;},__msigns:[{n:"applyEdits",c:5,a:[{i:0},{i:1}],e:4,f:1}],applyEdits:function(adds,_5f7,_5f8,_5f9,_5fa,_5fb){var _5fc=_5fb.assembly,dfd=_5fb.dfd;this._applyNormalized(adds,_5fc&&_5fc[0]);this._applyNormalized(_5f7,_5fc&&_5fc[1]);this.onBeforeApplyEdits(adds,_5f7,_5f8);var i,_5fd={},_5fe=this.objectIdField,_5ff={f:"json"},_600=false;if(this._collection){var _601={};_601.addResults=adds?dojo.map(adds,function(){_600=true;return {objectId:this._nextId++,success:true};},this):null;_601.updateResults=_5f7?dojo.map(_5f7,function(_602){_600=true;var oid=_602.attributes[_5fe];_5fd[oid]=_602;return {objectId:oid,success:true};},this):null;_601.deleteResults=_5f8?dojo.map(_5f8,function(_603){_600=true;return {objectId:_603.attributes[_5fe],success:true};},this):null;if(_600){this._editHandler(_601,adds,_5fd,_5f9,_5fa,dfd);}return;}if(adds&&adds.length>0){_5ff.adds=this._convertFeaturesToJson(adds,0,1);_600=true;}if(_5f7&&_5f7.length>0){for(i=0;i<_5f7.length;i++){var _604=_5f7[i];_5fd[_604.attributes[_5fe]]=_604;}_5ff.updates=this._convertFeaturesToJson(_5f7,0,0,1);_600=true;}if(_5f8&&_5f8.length>0){var ids=[];for(i=0;i<_5f8.length;i++){ids.push(_5f8[i].attributes[_5fe]);}_5ff.deletes=ids.join(",");_600=true;}if(_600){var self=this;return esri.request({url:this._url.path+"/applyEdits",content:dojo.mixin(_5ff,this._url.query),callbackParamName:"callback",load:function(_605){self._editHandler(_605,adds,_5fd,_5f9,_5fa,dfd);},error:function(err){self._resolve([err],null,_5fa,dfd,true);}},{usePost:true});}},queryFeatures:function(_606,_607,_608){return this._query("execute","onQueryFeaturesComplete",_606,_607,_608);},queryRelatedFeatures:function(_609,_60a,_60b){return this._query("executeRelationshipQuery","onQueryRelatedFeaturesComplete",_609,_60a,_60b);},queryIds:function(_60c,_60d,_60e){return this._query("executeForIds","onQueryIdsComplete",_60c,_60d,_60e);},queryCount:function(_60f,_610,_611){return this._query("executeForCount","onQueryCountComplete",_60f,_610,_611);},queryAttachmentInfos:function(_612,_613,_614){var url=this._url.path+"/"+_612+"/attachments",dfd=new dojo.Deferred(esri._dfdCanceller),self=this;dfd._pendingDfd=esri.request({url:url,content:dojo.mixin({f:"json"},this._url.query),callbackParamName:"callback",load:function(_615){var _616=_615.attachmentInfos,_617;dojo.forEach(_616,function(info){_617=dojo.objectToQuery({gdbVersion:self._url.query&&self._url.query.gdbVersion,layer:self._url.query&&self._url.query.layer,token:self._getToken()});info.url=url+"/"+info.id+(_617?("?"+_617):"");info.objectId=_612;});self._resolve([_616],"onQueryAttachmentInfosComplete",_613,dfd);},error:function(err){self._resolve([err],null,_614,dfd,true);}});return dfd;},addAttachment:function(_618,_619,_61a,_61b){return this._sendAttachment("add",_618,_619,_61a,_61b);},updateAttachment:function(_61c,_61d,_61e,_61f,_620){_61e.appendChild(dojo.create("input",{type:"hidden",name:"attachmentId",value:_61d}));return this._sendAttachment("update",_61c,_61e,_61f,_620);},deleteAttachments:function(_621,_622,_623,_624){var url=this._url.path+"/"+_621+"/deleteAttachments",dfd=new dojo.Deferred(esri._dfdCanceller),self=this,_625={f:"json",attachmentIds:_622.join(",")};dfd._pendingDfd=esri.request({url:url,content:dojo.mixin(_625,this._url.query),callbackParamName:"callback",load:dojo.hitch(this,function(_626){var _627=_626.deleteAttachmentResults;_627=dojo.map(_627,function(_628){var res=new esri.layers.FeatureEditResult(_628);res.attachmentId=res.objectId;res.objectId=_621;return res;});self._resolve([_627],"onDeleteAttachmentsComplete",_623,dfd);}),error:function(err){self._resolve([err],null,_624,dfd,true);}},{usePost:true});return dfd;},addType:function(_629){var _62a=this.types;if(_62a){var _62b=dojo.some(_62a,function(type){if(type.id==_629.id){return true;}return false;});if(_62b){return false;}else{_62a.push(_629);}}else{this.types=[_629];}this._typesDirty=true;return true;},deleteType:function(_62c){if(!this._collection){return;}var _62d=this.types;if(_62d){var _62e=-1;dojo.some(_62d,function(type,_62f){if(type.id==_62c){_62e=_62f;return true;}return false;});if(_62e>-1){this._typesDirty=true;return _62d.splice(_62e,1)[0];}}},toJson:function(){var _630=this._json,json=dojo.isString(_630)?dojo.fromJson(_630):dojo.clone(_630);if(!json){return;}json=json.layerDefinition?json:{layerDefinition:json};var _631=json.layerDefinition,_632=this._collection;if(_632&&this._typesDirty){_631.types=dojo.map(this.types||[],function(type){return type.toJson();});var _633=this.renderer,_634=_631.drawingInfo;if(_634&&_633&&_633.declaredClass.indexOf("TemporalRenderer")===-1){_634.renderer=_633.toJson();}}var _635=null;if(!(_632&&!this._fcAdded)){_635={geometryType:_631.geometryType,features:this._convertFeaturesToJson(this.graphics,true)};}json.featureSet=dojo.mixin({},json.featureSet||{},_635);if(_632){json.nextObjectId=this._nextId;_631.capabilities=this.capabilities;}return json;},onSelectionComplete:function(){},onSelectionClear:function(){},onBeforeApplyEdits:function(){},onEditsComplete:function(){},onQueryFeaturesComplete:function(){},onQueryRelatedFeaturesComplete:function(){},onQueryIdsComplete:function(){},onQueryCountComplete:function(){},onQueryAttachmentInfosComplete:function(){},onAddAttachmentComplete:function(){},onUpdateAttachmentComplete:function(){},onDeleteAttachmentsComplete:function(){},onCapabilitiesChange:function(){},onGDBVersionChange:function(){},onQueryLimitExceeded:function(){},_forceIdentity:function(_636){var self=this,path=this._url&&this._url.path;if((this.ownershipBasedAccessControlForFeatures||this.userIsAdmin)&&!this._getToken()&&path&&esri.id&&esri.id._hasPortalSession()&&esri.id._doPortalSignIn(path)){esri.id.getCredential(path).then(function(){self._findCredential();_636.call(self);},function(){_636.call(self);});}else{_636.call(this);}},_updateCaps:function(){var _637=this._editable,_638=dojo.trim(this.capabilities||""),_639=dojo.map((_638?_638.split(","):[]),dojo.trim),caps=dojo.map((_638?_638.toLowerCase().split(","):[]),dojo.trim),_63a=dojo.indexOf(caps,"editing"),cap,i,_63b,_63c={"Create":dojo.indexOf(caps,"create"),"Update":dojo.indexOf(caps,"update"),"Delete":dojo.indexOf(caps,"delete")};if(_637&&_63a===-1){_639.push("Editing");}else{if(!_637&&_63a>-1){_63b=[_63a];for(cap in _63c){if(_63c[cap]>-1){_63b.push(_63c[cap]);}}_63b.sort();for(i=_63b.length-1;i>=0;i--){_639.splice(_63b[i],1);}}}this.capabilities=_639.join(",");},_counter:{value:0},_getUniqueId:function(){return this._counter.value++;},onSuspend:function(){this.inherited(arguments);this._toggleTime(false);var mode=this._mode;if(mode){mode.suspend();}},onResume:function(evt){this.inherited(arguments);this._toggleTime(true);this._updateMaxOffset();var mode=this._mode,map=this._map,_63d=this.renderer;if(evt.firstOccurrence){this.clearSelection();if(this.timeInfo){if(this._trackIdField||(_63d&&(_63d.latestObservationRenderer||_63d.trackRenderer))){this._trackManager=new esri.layers._TrackManager(this);this._trackManager.initialize(map);}}this._zoomConnect=dojo.connect(map,"onZoomEnd",this,this._updateMaxOffset);}if(mode){evt.firstOccurrence?mode.initialize(map):mode.resume();}},_updateMaxOffset:function(){var map=this._map;if(map&&map.loaded){if(this._autoGeneralize){this._maxOffset=Math.floor(map.extent.getWidth()/map.width);}}},_toggleTime:function(_63e){var map=this._map;if(_63e&&this.timeInfo&&this.useMapTime&&map){this._mapTimeExtent=map.timeExtent;if(!this._timeConnect){this._timeConnect=dojo.connect(map,"onTimeExtentChange",this,this._timeChangeHandler);}}else{this._mapTimeExtent=null;dojo.disconnect(this._timeConnect);this._timeConnect=null;}},_timeChangeHandler:function(_63f){this._mapTimeExtent=_63f;var mode=this._mode;if(mode){mode.propertyChangeHandler(0);}},_getOffsettedTE:function(_640){var _641=this._timeOffset,_642=this._timeOffsetUnits;return (_640&&_641&&_642)?_640.offset(-1*_641,_642):_640;},_getTimeOverlap:function(_643,_644){if(_643&&_644){return _643.intersection(_644);}else{return _643||_644;}},_getTimeFilter:function(_645){var _646=this.getTimeDefinition(),_647=null,_648;if(_646||_647){_648=this._getTimeOverlap(_646,_647);if(!_648){return [false];}}if(_645){_645=_648?this._getTimeOverlap(_645,_648):_645;if(!_645){return [false];}}else{_645=_648;}return [true,_645];},_getAttributeFilter:function(_649){var _64a=this.getDefinitionExpression();if(_649){_649=_64a?"("+_64a+") AND ("+_649+")":_649;}else{_649=_64a;}return _649;},_applyQueryFilters:function(_64b){_64b.where=this._getAttributeFilter(_64b.where);_64b.maxAllowableOffset=this._maxOffset;if(this.timeInfo){var _64c=this._getTimeFilter(_64b.timeExtent);if(!_64c[0]){return false;}else{_64b.timeExtent=_64c[1];}}return true;},_add:function(_64d){var _64e=this._selectionSymbol,attr=_64d.attributes,_64f=this.visibilityField;if(_64e&&this._isSelOnly){_64d.setSymbol(_64e);}if(_64f&&attr&&attr.hasOwnProperty(_64f)){_64d[attr[_64f]?"show":"hide"]();}return this.add.apply(this,arguments);},_remove:function(){return this.remove.apply(this,arguments);},_canDoClientSideQuery:function(_650){var _651=[],map=this._map;if(this._isTable||!map){return;}if(_650.text||(_650.where&&_650.where!==this.getDefinitionExpression())){return;}var _652=this._isSnapshot,_653=this._isSelOnly;var _654=_650.geometry;if(_654){if(!_653&&_650.spatialRelationship===esri.tasks.Query.SPATIAL_REL_INTERSECTS&&(_654.type==="extent"&&(_652||map.extent.contains(_654)))){_651.push(1);}else{return;}}var ids=_650.objectIds;if(ids){if(_652){_651.push(2);}else{var len=ids.length,mode=this._mode,_655=0,i;for(i=0;i<len;i++){if(mode._getFeature(ids[i])){_655++;}}if(_655===len){_651.push(2);}else{return;}}}if(this.timeInfo){var _656=_650.timeExtent,_657=this._mapTimeExtent;if(_652){if(_656){_651.push(3);}}else{if(_653){if(_656){return;}}else{if(_657){if(dojo.indexOf(_651,2)!==-1){if(_656){_651.push(3);}}else{return;}}else{if(_651.length>0){if(_656){_651.push(3);}}else{if(_656){return;}}}}}}return _651.length>0?_651:null;},_doQuery:function(_658,_659,_65a){var _65b=[],mode=this._mode,_65c=this.objectIdField,i,len,_65d;if(dojo.indexOf(_659,2)!==-1){_65b=[];var ids=_658.objectIds;len=ids.length;for(i=0;i<len;i++){var obj=mode._getFeature(ids[i]);if(obj){_65b.push(obj);}}if(_65b.length===0){return [];}}if(dojo.indexOf(_659,1)!==-1){_65d=_65b.length>0?_65b:this.graphics;len=_65d.length;var _65e=_658.geometry._normalize(null,true);_65b=[];for(i=0;i<len;i++){var _65f=_65d[i],_660=_65f.geometry;if(_660){if(this.normalization&&_65e.length){if(_65e[0].intersects(_660)||_65e[1].intersects(_660)){_65b.push(_65f);}}else{if(_65e.intersects(_660)){_65b.push(_65f);}}}}if(_65b.length===0){return [];}}if(dojo.indexOf(_659,3)!==-1){if(this.timeInfo){_65d=_65b.length>0?_65b:this.graphics;var time=_658.timeExtent,_661=this._filterByTime(_65d,time.startTime,time.endTime);_65b=_661.match;}}if(_65a){return dojo.map(_65b,function(obj){return obj.attributes[_65c];},this);}else{return _65b;}},_filterByTime:function(_662,_663,_664){var _665=this._startTimeField,_666=this._endTimeField,_667;if(!this._twoTimeFields){_667=_665||_666;}var _668=esri._isDefined,yea=[],nay=[],i,len=_662.length,_669,_66a;_663=_663?_663.getTime():-Infinity;_664=_664?_664.getTime():Infinity;if(_667){for(i=0;i<len;i++){_669=_662[i];_66a=_669.attributes;var time=_66a[_667];if(time>=_663&&time<=_664){yea.push(_669);}else{nay.push(_669);}}}else{for(i=0;i<len;i++){_669=_662[i];_66a=_669.attributes;var _66b=_66a[_665],end=_66a[_666];_66b=_668(_66b)?_66b:-Infinity;end=_668(end)?end:Infinity;if((_66b>=_663&&_66b<=_664)||(end>=_663&&end<=_664)||(_663>=_66b&&_664<=end)){yea.push(_669);}else{nay.push(_669);}}}return {match:yea,noMatch:nay};},_resolve:function(args,_66c,_66d,dfd,_66e){if(_66c){this[_66c].apply(this,args);}if(_66d){_66d.apply(null,args);}if(dfd){esri._resDfd(dfd,args,_66e);}},_getShallowClone:function(_66f){var _670=new esri.tasks.Query(),prop;for(prop in _66f){if(_66f.hasOwnProperty(prop)){_670[prop]=_66f[prop];}}return _670;},_query:function(type,_671,_672,_673,_674){var that=this,map=this._map,dfd=new dojo.Deferred(esri._dfdCanceller),_675=_672;var _676=function(_677,_678){if(!_678&&type==="execute"&&!that._isTable){var _679=_677.features,mode=that._mode,_67a=that.objectIdField,il=_679.length,i;for(i=il-1;i>=0;i--){var oid=_679[i].attributes[_67a];var _67b=mode._getFeature(oid);if(_67b){_679.splice(i,1,_67b);}}}that._resolve([_677],_671,_673,dfd);};if(type!=="executeRelationshipQuery"){_675=this._getShallowClone(_672);_675.outFields=this._getOutFields();_675.returnGeometry=(!map&&_672.hasOwnProperty("returnGeometry"))?_672.returnGeometry:true;var _67c;if(map){_675.outSpatialReference=new esri.SpatialReference(map.spatialReference.toJson());}if(!this._applyQueryFilters(_675)){switch(type){case "execute":_67c=new esri.tasks.FeatureSet({features:[]});break;case "executeForIds":_67c=[];break;case "executeForCount":_67c=0;break;}_676(_67c,true);return dfd;}var _67d=this._canDoClientSideQuery(_675);if(_67d){var _67e=this._doQuery(_675,_67d,(type==="executeForIds"||type==="executeForCount"));switch(type){case "execute":_67c=new esri.tasks.FeatureSet();_67c.features=_67e;break;case "executeForIds":_67c=_67e;break;case "executeForCount":_67c=_67e.length;break;}_676(_67c,true);return dfd;}}if(this._collection){var err=new Error("FeatureLayer::_query - "+esri.bundle.layers.FeatureLayer.invalidParams);this._resolve([err],null,_674,dfd,true);return dfd;}if(this._ts){_675._ts=(new Date()).getTime();}var temp=dfd._pendingDfd=this._task[type](_675);temp.addCallbacks(_676,function(err){that._resolve([err],null,_674,dfd,true);});return dfd;},_convertFeaturesToJson:function(_67f,_680,_681,_682){var json=[],_683=this._selectionSymbol,_684=this.visibilityField,i,_685,_686=this.objectIdField;if(this.loaded&&(_681||_682)){_685=dojo.filter(this.fields,function(_687){return (_687.editable===false)&&(!_682||(_687.name!==_686));});}for(i=0;i<_67f.length;i++){var _688=_67f[i],_689={},_68a=_688.geometry,attr=_688.attributes,_68b=_688.symbol;if(_68a&&(!_682||!this.loaded||this.allowGeometryUpdates)){_689.geometry=_68a.toJson();}if(_684){_689.attributes=attr=dojo.mixin({},attr);attr[_684]=_688.visible?1:0;}else{if(attr){_689.attributes=dojo.mixin({},attr);}}if(_689.attributes&&_685&&_685.length){dojo.forEach(_685,function(_68c){delete _689.attributes[_68c.name];});}if(_68b&&(_68b!==_683)){_689.symbol=_68b.toJson();}json.push(_689);}return _680?json:dojo.toJson(json);},_selectHandler:function(_68d,_68e,_68f,_690,dfd){var _691,ctor=this.constructor;switch(_68e){case ctor.SELECTION_NEW:this.clearSelection(true);_691=true;break;case ctor.SELECTION_ADD:_691=true;break;case ctor.SELECTION_SUBTRACT:_691=false;break;}var i,_692=_68d.features,mode=this._mode,_693=[],_694=this.objectIdField,_695,oid;if(_691){for(i=0;i<_692.length;i++){_695=_692[i];oid=_695.attributes[_694];var _696=mode._addFeatureIIf(oid,_695);_693.push(_696);this._selectFeatureIIf(oid,_696,mode);}}else{for(i=0;i<_692.length;i++){_695=_692[i];oid=_695.attributes[_694];this._unSelectFeatureIIf(oid,mode);var _697=mode._removeFeatureIIf(oid);_693.push(_697||_695);}}if(this._isSelOnly){mode._applyTimeFilter(true);}this._resolve([_693,_68e,_68d.exceededTransferLimit?{queryLimitExceeded:true}:null],"onSelectionComplete",_68f,dfd);if(_68d.exceededTransferLimit){this.onQueryLimitExceeded();}},_selectFeatureIIf:function(oid,_698,mode){var _699=this._selectedFeatures,_69a=_699[oid];if(!_69a){mode._incRefCount(oid);_699[oid]=_698;if(!this._isTable){this._setSelectSymbol(_698);}}return _69a||_698;},_unSelectFeatureIIf:function(oid,mode){var _69b=this._selectedFeatures[oid];if(_69b){mode._decRefCount(oid);delete this._selectedFeatures[oid];if(!this._isTable){this._setUnSelectSymbol(_69b);}}return _69b;},_isSelected:function(_69c){},_setSelectSymbol:function(_69d){var _69e=this._selectionSymbol;if(_69e&&!this._isSelOnly){_69d.setSymbol(_69e);}},_setUnSelectSymbol:function(_69f){var _6a0=this._selectionSymbol;if(_6a0&&!this._isSelOnly){if(_6a0===_69f.symbol){_69f.setSymbol(null,true);}}},_getOutFields:function(){var _6a1=dojo.filter([this.objectIdField,this.typeIdField,this.creatorField,this._startTimeField,this._endTimeField,this._trackIdField].concat(this._rendererFields),function(_6a2,_6a3,arr){return !!_6a2&&(dojo.indexOf(arr,_6a2)===_6a3);});var _6a4=dojo.clone(this._outFields);if(_6a4){if(dojo.indexOf(_6a4,"*")!==-1){return _6a4;}dojo.forEach(_6a1,function(_6a5){if(dojo.indexOf(_6a4,_6a5)===-1){_6a4.push(_6a5);}});return _6a4;}else{return _6a1;}},_checkFields:function(_6a6){var _6a7=_6a6||this._getOutFields();dojo.forEach(_6a7,function(_6a8){if(_6a8==="*"){return;}if(!this._getField(_6a8)){console.debug("esri.layers.FeatureLayer: "+esri.substitute({url:this.url,field:_6a8},esri.bundle.layers.FeatureLayer.fieldNotFound));}},this);if(!_6a6&&!this._isTable&&!this._fserver&&!this._collection){var _6a9=dojo.some(this.fields,function(_6aa){return (_6aa&&_6aa.type==="esriFieldTypeGeometry")?true:false;});if(!_6a9){console.debug("esri.layers.FeatureLayer: "+esri.substitute({url:this.url},esri.bundle.layers.FeatureLayer.noGeometryField));}}},_fixRendererFields:function(){var _6ab=this.renderer;if(_6ab&&this.fields.length>0){var _6ac=dojo.filter([_6ab,_6ab.observationRenderer,_6ab.latestObservationRenderer,_6ab.trackRenderer],esri._isDefined);var _6ad=[];dojo.forEach(_6ac,function(rnd){var _6ae,_6af;_6af=rnd.attributeField;if(_6af&&!dojo.isFunction(_6af)){_6ae=!this._getField(_6af)&&this._getField(_6af,true);if(_6ae){rnd.attributeField=_6ae.name;}}_6af=rnd.attributeField2;if(_6af){_6ae=!this._getField(_6af)&&this._getField(_6af,true);if(_6ae){rnd.attributeField2=_6ae.name;}}_6af=rnd.attributeField3;if(_6af){_6ae=!this._getField(_6af)&&this._getField(_6af,true);if(_6ae){rnd.attributeField3=_6ae.name;}}if(!dojo.isFunction(rnd.attributeField)){_6ad.push(rnd.attributeField);}_6ad.push(rnd.attributeField2);_6ad.push(rnd.attributeField3);},this);this._rendererFields=dojo.filter(_6ad,esri._isDefined);}},_getField:function(_6b0,_6b1){var _6b2=this.fields;if(_6b2.length===0){return null;}var _6b3;if(_6b1){_6b0=_6b0.toLowerCase();}dojo.some(_6b2,function(_6b4){var _6b5=false;if(_6b1){_6b5=(_6b4&&_6b4.name.toLowerCase()===_6b0)?true:false;}else{_6b5=(_6b4&&_6b4.name===_6b0)?true:false;}if(_6b5){_6b3=_6b4;}return _6b5;});return _6b3;},_getDateOpts:function(){if(!this._dtOpts){var _6b6=dojo.map(dojo.filter(this.fields,function(_6b7){return !!(_6b7&&_6b7.type==="esriFieldTypeDate");}),function(_6b8){return _6b8.name;});this._dtOpts={properties:_6b6};}return this._dtOpts;},_applyNormalized:function(_6b9,_6ba){if(_6b9&&_6ba){dojo.forEach(_6b9,function(_6bb,_6bc){if(_6bb&&_6ba[_6bc]){_6bb.setGeometry(_6ba[_6bc]);}});}},_editHandler:function(_6bd,adds,_6be,_6bf,_6c0,dfd){var _6c1=_6bd.addResults,_6c2=_6bd.updateResults,_6c3=_6bd.deleteResults,i,_6c4,oid,_6c5,attr,_6c6=this.objectIdField,mode=this._mode,_6c7=this._isTable;var _6c8=this.editFieldsInfo,_6c9=this._getOutFields()||[],_6ca=_6c8&&_6c8.creatorField,_6cb=_6c8&&_6c8.creationDateField,_6cc=_6c8&&_6c8.editorField,_6cd=_6c8&&_6c8.editDateField,_6ce=_6c8&&_6c8.realm;if(dojo.indexOf(_6c9,"*")===-1){if(_6ca&&dojo.indexOf(_6c9,_6ca)===-1){_6ca=null;}if(_6cb&&dojo.indexOf(_6c9,_6cb)===-1){_6cb=null;}if(_6cc&&dojo.indexOf(_6c9,_6cc)===-1){_6cc=null;}if(_6cd&&dojo.indexOf(_6c9,_6cd)===-1){_6cd=null;}}var _6cf=(_6cb||_6cd)?(new Date()).getTime():null,_6d0=(_6ca||_6cc)?this.getUserId():undefined;if(_6d0&&_6ce){_6d0=_6d0+"@"+_6ce;}if(_6c1){for(i=0;i<_6c1.length;i++){_6c1[i]=new esri.layers.FeatureEditResult(_6c1[i]);if(_6c7){continue;}_6c4=_6c1[i];if(_6c4.success){oid=_6c4.objectId;_6c5=adds[i];var gl=_6c5._graphicsLayer;if(gl&&gl!==this){gl.remove(_6c5);}attr=_6c5.attributes||{};attr[_6c6]=oid;if(_6ca){attr[_6ca]=_6d0;}if(_6cc){attr[_6cc]=_6d0;}if(_6cb){attr[_6cb]=_6cf;}if(_6cd){attr[_6cd]=_6cf;}_6c5.setAttributes(attr);if(mode._init){mode.drawFeature(_6c5);}}}}if(_6c2){for(i=0;i<_6c2.length;i++){_6c2[i]=new esri.layers.FeatureEditResult(_6c2[i]);if(_6c7){continue;}_6c4=_6c2[i];if(_6c4.success){oid=_6c4.objectId;_6c5=_6be[oid];var _6d1=mode._getFeature(oid);if(_6d1){if(_6d1.geometry!==_6c5.geometry){_6d1.setGeometry(esri.geometry.fromJson(_6c5.geometry.toJson()));}this._repaint(_6d1,oid);}_6c5=_6d1||_6c5;attr=_6c5.attributes||{};if(_6cc){attr[_6cc]=_6d0;}if(_6cd){attr[_6cd]=_6cf;}_6c5.setAttributes(attr);}}}if(_6c3){var _6d2=[];for(i=0;i<_6c3.length;i++){_6c3[i]=new esri.layers.FeatureEditResult(_6c3[i]);if(_6c7){continue;}_6c4=_6c3[i];if(_6c4.success){oid=_6c4.objectId;_6c5=mode._getFeature(oid);if(_6c5){if(this._unSelectFeatureIIf(oid,mode)){_6d2.push(_6c5);}_6c5._count=0;mode._removeFeatureIIf(oid);}}}if(_6d2.length>0){this.onSelectionComplete(_6d2,this.constructor.SELECTION_SUBTRACT);}}this._resolve([_6c1,_6c2,_6c3],"onEditsComplete",_6bf,dfd);},_sendAttachment:function(type,_6d3,_6d4,_6d5,_6d6){var _6d7=(type==="add")?"addAttachment":"updateAttachment",url=this._url.path+"/"+_6d3+"/"+_6d7,self=this;var dfd=esri.request({url:url,form:_6d4,content:dojo.mixin(this._url.query,{f:"json",token:this._getToken()||undefined}),callbackParamName:"callback.html",handleAs:"json"}).addCallback(function(_6d8){var _6d9=(type==="add")?"addAttachmentResult":"updateAttachmentResult",_6da=(type==="add")?"onAddAttachmentComplete":"onUpdateAttachmentComplete",_6db=new esri.layers.FeatureEditResult(_6d8[_6d9]);_6db.attachmentId=_6db.objectId;_6db.objectId=_6d3;self._resolve([_6db],_6da,_6d5);return _6db;}).addErrback(function(_6dc){self._resolve([_6dc],null,_6d6,null,true);});return dfd;},_repaint:function(_6dd,oid,_6de){oid=esri._isDefined(oid)?oid:_6dd.attributes[this.objectIdField];if(!(oid in this._selectedFeatures)||!this._selectionSymbol){_6dd.setSymbol(_6dd.symbol,_6de);}},_getKind:function(_6df){var _6e0=this._trackManager;if(_6e0){return _6e0.isLatestObservation(_6df)?1:0;}return 0;}});dojo.mixin(esri.layers.FeatureLayer,{MODE_SNAPSHOT:0,MODE_ONDEMAND:1,MODE_SELECTION:2,SELECTION_NEW:3,SELECTION_ADD:4,SELECTION_SUBTRACT:5,POPUP_NONE:"esriServerHTMLPopupTypeNone",POPUP_HTML_TEXT:"esriServerHTMLPopupTypeAsHTMLText",POPUP_URL:"esriServerHTMLPopupTypeAsURL"});esri._createWrappers("esri.layers.FeatureLayer");dojo.declare("esri.layers.FeatureType",null,{constructor:function(json){if(json&&dojo.isObject(json)){this.id=json.id;this.name=json.name;var _6e1=json.symbol;if(_6e1){this.symbol=esri.symbol.fromJson(_6e1);}var _6e2=json.domains,_6e3,i;var _6e4=this.domains={};for(_6e3 in _6e2){if(_6e2.hasOwnProperty(_6e3)){var _6e5=_6e2[_6e3];switch(_6e5.type){case "range":_6e4[_6e3]=new esri.layers.RangeDomain(_6e5);break;case "codedValue":_6e4[_6e3]=new esri.layers.CodedValueDomain(_6e5);break;case "inherited":_6e4[_6e3]=new esri.layers.InheritedDomain(_6e5);break;}}}var _6e6=json.templates;if(_6e6){var _6e7=this.templates=[];for(i=0;i<_6e6.length;i++){_6e7.push(new esri.layers.FeatureTemplate(_6e6[i]));}}}},toJson:function(){var json={id:this.id,name:this.name,symbol:this.symbol&&this.symbol.toJson()};var _6e8,_6e9=this.domains,_6ea=this.templates,_6eb=esri._sanitize;if(_6e9){var _6ec=json.domains={};for(_6e8 in _6e9){if(_6e9.hasOwnProperty(_6e8)){_6ec[_6e8]=_6e9[_6e8]&&_6e9[_6e8].toJson();}}_6eb(_6ec);}if(_6ea){json.templates=dojo.map(_6ea,function(_6ed){return _6ed.toJson();});}return _6eb(json);}});dojo.declare("esri.layers.FeatureTemplate",null,{constructor:function(json){if(json&&dojo.isObject(json)){this.name=json.name;this.description=json.description;this.drawingTool=json.drawingTool;var _6ee=json.prototype;this.prototype=new esri.Graphic(_6ee.geometry,null,_6ee.attributes);}},toJson:function(){return esri._sanitize({name:this.name,description:this.description,drawingTool:this.drawingTool,prototype:this.prototype&&this.prototype.toJson()});}});dojo.mixin(esri.layers.FeatureTemplate,{TOOL_AUTO_COMPLETE_POLYGON:"esriFeatureEditToolAutoCompletePolygon",TOOL_CIRCLE:"esriFeatureEditToolCircle",TOOL_ELLIPSE:"esriFeatureEditToolEllipse",TOOL_FREEHAND:"esriFeatureEditToolFreehand",TOOL_LINE:"esriFeatureEditToolLine",TOOL_NONE:"esriFeatureEditToolNone",TOOL_POINT:"esriFeatureEditToolPoint",TOOL_POLYGON:"esriFeatureEditToolPolygon",TOOL_RECTANGLE:"esriFeatureEditToolRectangle",TOOL_ARROW:"esriFeatureEditToolArrow",TOOL_TRIANGLE:"esriFeatureEditToolTriangle",TOOL_LEFT_ARROW:"esriFeatureEditToolLeftArrow",TOOL_RIGHT_ARROW:"esriFeatureEditToolRightArrow",TOOL_UP_ARROW:"esriFeatureEditToolUpArrow",TOOL_DOWN_ARROW:"esriFeatureEditToolDownArrow"});dojo.declare("esri.layers.FeatureEditResult",null,{constructor:function(json){if(json&&dojo.isObject(json)){this.objectId=json.objectId;this.success=json.success;if(!json.success){var err=json.error;this.error=new Error();this.error.code=err.code;this.error.message=err.description;}}}});dojo.declare("esri.layers._RenderMode",null,{constructor:function(){this._prefix="jsonp_"+(dojo._scopeName||"dojo")+"IoScript";},initialize:function(map){},propertyChangeHandler:function(type){},destroy:function(){},drawFeature:function(_6ef){},suspend:function(){},resume:function(){},refresh:function(){},_incRefCount:function(oid){var _6f0=this._featureMap[oid];if(_6f0){_6f0._count++;}},_decRefCount:function(oid){var _6f1=this._featureMap[oid];if(_6f1){_6f1._count--;}},_getFeature:function(oid){return this._featureMap[oid];},_addFeatureIIf:function(oid,_6f2){var fmap=this._featureMap,_6f3=fmap[oid],_6f4=this.featureLayer;if(!_6f3){fmap[oid]=_6f2;_6f4._add(_6f2);_6f2._count=0;}return _6f3||_6f2;},_removeFeatureIIf:function(oid){var _6f5=this._featureMap[oid],_6f6=this.featureLayer;if(_6f5){if(_6f5._count){return;}delete this._featureMap[oid];_6f6._remove(_6f5);}return _6f5;},_clearIIf:function(){var i,_6f7=this.featureLayer,_6f8=_6f7.graphics,_6f9=_6f7._selectedFeatures,_6fa=_6f7.objectIdField;for(i=_6f8.length-1;i>=0;i--){var _6fb=_6f8[i];var oid=_6fb.attributes[_6fa];if(oid in _6f9){_6fb._count=1;continue;}_6fb._count=0;this._removeFeatureIIf(oid);}},_isPending:function(id){var dfd=dojo.io.script[this._prefix+id];return dfd?true:false;},_cancelPendingRequest:function(dfd,id){dfd=dfd||dojo.io.script[this._prefix+id];if(dfd){try{dfd.cancel();dojo.io.script._validCheck(dfd);}catch(e){}}},_purgeRequests:function(){dojo.io.script._validCheck(null);},_toggleVisibility:function(show){var _6fc=this.featureLayer,_6fd=_6fc.graphics,_6fe=show?"show":"hide",i,len=_6fd.length;show=show&&_6fc._ager;for(i=0;i<len;i++){var _6ff=_6fd[i];_6ff[_6fe]();if(show){_6fc._repaint(_6ff);}}},_applyTimeFilter:function(_700){var _701=this.featureLayer;if(!_701.timeInfo||_701.suspended){return;}if(!_700){_701._fireUpdateStart();}var _702=_701._trackManager;if(_702){_702.clearTracks();}var defn=_701.getTimeDefinition(),_703=_701._getOffsettedTE(_701._mapTimeExtent);if(_703){_703=_701._getTimeOverlap(defn,_703);if(_703){var _704=_701._filterByTime(_701.graphics,_703.startTime,_703.endTime);if(_702){_702.addFeatures(_704.match);}dojo.forEach(_704.match,function(_705){var _706=_705._shape;if(!_705.visible){_705.show();_706=_705._shape;_706&&_706._moveToFront();}if(_701._ager&&_706){_701._repaint(_705);}});dojo.forEach(_704.noMatch,function(_707){if(_707.visible){_707.hide();}});}else{this._toggleVisibility(false);}}else{if(_702){_702.addFeatures(_701.graphics);}this._toggleVisibility(true);}if(_702){_702.moveLatestToFront();_702.drawTracks();}if(!_700){_701._fireUpdateEnd();}}});dojo.declare("esri.layers._SelectionMode",[esri.layers._RenderMode],{constructor:function(_708){this.featureLayer=_708;this._featureMap={};},initialize:function(map){this.map=map;this._init=true;},propertyChangeHandler:function(type){if(this._init&&type===0){this._applyTimeFilter();}},destroy:function(){this._init=false;},resume:function(){this.propertyChangeHandler(0);}});dojo.declare("esri.layers._SnapshotMode",[esri.layers._RenderMode],{constructor:function(_709){this.featureLayer=_709;this._featureMap={};this._drawFeatures=dojo.hitch(this,this._drawFeatures);this._queryErrorHandler=dojo.hitch(this,this._queryErrorHandler);},initialize:function(map){this.map=map;var _70a=this.featureLayer;if(_70a._collection){this._applyTimeFilter();}else{this._fetchAll();}this._init=true;},propertyChangeHandler:function(type){if(this._init){if(type){if(this.featureLayer._collection){console.log("FeatureLayer: layer created by value (from a feature collection) does not support definition expressions and time definitions. Layer id = "+this.featureLayer.id);}else{this._fetchAll();}}else{this._applyTimeFilter();}}},destroy:function(){this._init=false;},drawFeature:function(_70b){var _70c=this.featureLayer,_70d=_70c.objectIdField,oid=_70b.attributes[_70d];this._addFeatureIIf(oid,_70b);this._incRefCount(oid);},resume:function(){this.propertyChangeHandler(0);},refresh:function(){var _70e=this.featureLayer;if(_70e._collection){_70e._fireUpdateStart();_70e._refresh(true);_70e._fireUpdateEnd();}else{this._fetchAll();}},_getRequestId:function(_70f){var id="_"+_70f.name+_70f.layerId+_70f._ulid;return id.replace(/[^a-zA-Z0-9\_]+/g,"_");},_fetchAll:function(){var _710=this.featureLayer;if(_710._collection){return;}_710._fireUpdateStart();this._clearIIf();this._sendRequest();},_sendRequest:function(){var map=this.map,_711=this.featureLayer,_712=_711.getDefinitionExpression();var _713=new esri.tasks.Query();_713.outFields=_711._getOutFields();_713.where=_712||"1=1";_713.returnGeometry=true;_713.outSpatialReference=new esri.SpatialReference(map.spatialReference.toJson());_713.timeExtent=_711.getTimeDefinition();_713.maxAllowableOffset=_711._maxOffset;if(_711._ts){_713._ts=(new Date()).getTime();}var _714;if(_711._usePatch){_714=this._getRequestId(_711);this._cancelPendingRequest(null,_714);}_711._task.execute(_713,this._drawFeatures,this._queryErrorHandler,_714);},_drawFeatures:function(_715){this._purgeRequests();var _716=_715.features,_717=this.featureLayer,_718=_717.objectIdField,i,len=_716.length,_719,oid;for(i=0;i<len;i++){_719=_716[i];oid=_719.attributes[_718];this._addFeatureIIf(oid,_719);this._incRefCount(oid);}this._applyTimeFilter(true);_717._fireUpdateEnd(null,_715.exceededTransferLimit?{queryLimitExceeded:true}:null);if(_715.exceededTransferLimit){_717.onQueryLimitExceeded();}},_queryErrorHandler:function(err){this._purgeRequests();var _71a=this.featureLayer;_71a._errorHandler(err);_71a._fireUpdateEnd(err);}});dojo.declare("esri.layers._OnDemandMode",[esri.layers._RenderMode],{constructor:function(_71b){this.featureLayer=_71b;this._featureMap={};this._queryErrorHandler=dojo.hitch(this,this._queryErrorHandler);},initialize:function(map){this.map=map;this._initialize();this._init=true;},propertyChangeHandler:function(type){if(this._init){if(type<2){this._zoomHandler();}else{console.log("FeatureLayer: layer in on-demand mode does not support time definitions. Layer id = "+this.featureLayer.id+", Layer URL = "+this.featureLayer.url);}}},destroy:function(){this._disableConnectors();this._init=false;},drawFeature:function(_71c){var _71d=this._gridLayer,geom=_71c.geometry,_71e=[];if(!geom){return;}_71e=_71d.getCellsInExtent((geom.type==="point")?{xmin:geom.x,ymin:geom.y,xmax:geom.x,ymax:geom.y}:geom.getExtent(),false).cells;var _71f=this._cellMap,i,cell,oid=_71c.attributes[this.featureLayer.objectIdField],_720,row,col;for(i=0;i<_71e.length;i++){cell=_71e[i];_720=cell.latticeID;row=cell.row;col=cell.col;if(_720){cell=(_71f[_720]=(_71f[_720]||cell));}else{_71f[row]=_71f[row]||{};cell=(_71f[row][col]=(_71f[row][col]||cell));}cell.features=cell.features||[];cell.features.push(_71c);this._addFeatureIIf(oid,_71c);this._incRefCount(oid);}},suspend:function(){if(!this._init){return;}this._disableConnectors();},resume:function(){if(!this._init){return;}this._enableConnectors();this._zoomHandler();},refresh:function(){this._zoomHandler();},_initialize:function(){var map=this.map,_721=this.featureLayer;var _722=_721._srInfo;this._gridLayer=new esri.layers._GridLayout(new esri.geometry.Point(_722?_722.valid[0]:map.extent.xmin,map.extent.ymax,map.spatialReference),{width:_721._tileWidth,height:_721._tileHeight},{width:map.width,height:map.height},_722);this._ioQueue=[];if(!_721.suspended){this._zoomHandler();this._enableConnectors();}},_enableConnectors:function(){var map=this.map;this._zoomConnect=dojo.connect(map,"onZoomEnd",this,this._zoomHandler);this._panConnect=dojo.connect(map,"onPanEnd",this,this._panHandler);this._resizeConnect=dojo.connect(map,"onResize",this,this._panHandler);},_disableConnectors:function(){dojo.disconnect(this._zoomConnect);dojo.disconnect(this._panConnect);dojo.disconnect(this._resizeConnect);},_zoomHandler:function(){this._processIOQueue(true);var _723=this.featureLayer,map=this.map;if(_723.suspended){return;}_723._fireUpdateStart();this._clearIIf();var _724=_723._trackManager;if(_724){_724.clearTracks();}this._cellMap={};this._gridLayer.setResolution(map.extent);this._sendRequest();},_panHandler:function(){this.featureLayer._fireUpdateStart();this._sendRequest(this.featureLayer._resized&&arguments[0]);},_getRequestId:function(_725,cell){var id="_"+_725.name+_725.layerId+_725._ulid+"_"+cell.resolution+"_"+(cell.latticeID||(cell.row+"_"+cell.col));return id.replace(/[^a-zA-Z0-9\_]+/g,"_");},_sendRequest:function(_726){this._exceeds=false;var _727=this.featureLayer,map=this.map,_728=_726||map.extent,_729=this._gridLayer.getCellsInExtent(_728,_727.latticeTiling),_72a=_729.cells;if(!_727.isEditable()){var _72b=this._cellMap;_72a=dojo.filter(_72a,function(cell){if(cell.lattice){if(_72b[cell.latticeID]){return false;}}else{if(_72b[cell.row]&&_72b[cell.row][cell.col]){return false;}}return true;});}var _72c=_727._getOutFields(),_72d=_727.getDefinitionExpression(),time=_727._getOffsettedTE(_727._mapTimeExtent),_72e=_727._usePatch,_72f=this._ioQueue,i,self=this,func=this._drawFeatures,cell,_730,_731;this._pending=this._pending||0;for(i=0;i<_72a.length;i++){cell=_72a[i];_730=new esri.tasks.Query();_730.geometry=cell.extent||cell.lattice;_730.outFields=_72c;_730.where=_72d;if(_727.latticeTiling&&cell.extent){_730.spatialRelationship=esri.tasks.Query.SPATIAL_REL_CONTAINS;}_730.returnGeometry=true;_730.timeExtent=time;_730.maxAllowableOffset=_727._maxOffset;if(_727._ts){_730._ts=(new Date()).getTime();}_731=null;if(_72e){_731=this._getRequestId(_727,cell);if(this._isPending(_731)){continue;}}this._pending++;_72f.push(_727._task.execute(_730,function(){var _732=cell;return function(_733){func.apply(self,[_733,_732]);};}.call(this),this._queryErrorHandler,_731));}this._removeOldCells(_728);this._endCheck();},_drawFeatures:function(_734,cell){this._exceeds=this._exceeds||_734.exceededTransferLimit;this._finalizeIO();var _735=this.featureLayer,map=this.map,_736=map.extent,_737=cell.extent,row=cell.row,col=cell.col,_738=_735.objectIdField,_739=_734.features,_73a=this._gridLayer,_73b=this._cellMap,i,len,_73c=cell.latticeID,_73d=_73c?_73b[_73c]:(_73b[row]&&_73b[row][col]);if((cell.resolution!=_73a._resolution)||(_73c?(_73c!==_73a.getLatticeID(_736)):(!_73a.intersects(_737,_736)))){if(_73d){this._removeCell(row,col,_73c);}}else{if(_73d){this._updateCell(_73d,_739);}else{cell.features=_739;if(_73c){_73b[_73c]=cell;}else{_73b[row]=_73b[row]||{};_73b[row][col]=cell;}len=_739.length;for(i=0;i<len;i++){var _73e=_739[i];var oid=_73e.attributes[_738];this._addFeatureIIf(oid,_73e);this._incRefCount(oid);}}}this._endCheck();},_queryErrorHandler:function(err){this._finalizeIO();this.featureLayer._errorHandler(err);this._endCheck(true);},_finalizeIO:function(){this._purgeRequests();this._pending--;},_endCheck:function(_73f){if(this._pending===0){this._processIOQueue();var _740=this.featureLayer,_741=_740._trackManager;if(_741){_741.clearTracks();_741.addFeatures(_740.graphics);if(_740._ager){dojo.forEach(_740.graphics,function(_742){if(_742._shape){_740._repaint(_742);}});}_741.moveLatestToFront();_741.drawTracks();}this.featureLayer._fireUpdateEnd(_73f&&new Error("FeatureLayer: "+esri.bundle.layers.FeatureLayer.updateError),this._exceeds?{queryLimitExceeded:true}:null);if(this._exceeds){_740.onQueryLimitExceeded();}}},_processIOQueue:function(_743){this._ioQueue=dojo.filter(this._ioQueue,function(dfd){var keep=dfd.fired>-1?false:true;return keep;});if(_743){dojo.forEach(this._ioQueue,this._cancelPendingRequest);}},_removeOldCells:function(_744){var _745=this._cellMap,_746=this._gridLayer,_747,_748;for(_747 in _745){if(_745[_747]){var row=_745[_747],_749=row.latticeID,_74a=0,_74b=0;if(_749){_74a++;if(_749!==_746.getLatticeID(_744)){this._removeCell(null,null,_749);_74b++;}}else{for(_748 in row){if(row[_748]){_74a++;var _74c=row[_748].extent;if(!_746.intersects(_74c,_744)){this._removeCell(_747,_748);_74b++;}}}}if(_74b===_74a){delete _745[_747];}}}},_updateCell:function(cell,_74d){var _74e=this.featureLayer,_74f=_74e.objectIdField,_750=_74e._selectedFeatures,i,len=_74d.length;cell.features=cell.features||[];for(i=0;i<len;i++){var _751=_74d[i];var oid=_751.attributes[_74f];var _752=this._addFeatureIIf(oid,_751);if(_752===_751){this._incRefCount(oid);cell.features.push(_752);}else{if(!(oid in _750)){_752.setGeometry(_751.geometry);_752.setAttributes(_751.attributes);}}}},_removeCell:function(row,col,_753){var _754=this._cellMap,_755=this.featureLayer,_756=_755.objectIdField;var cell=_753?_754[_753]:(_754[row]&&_754[row][col]);if(cell){if(_753){delete _754[_753];}else{delete _754[row][col];}var _757=cell.features,i;for(i=0;i<_757.length;i++){var _758=_757[i];var oid=_758.attributes[_756];this._decRefCount(oid);if(oid in _755._selectedFeatures){continue;}this._removeFeatureIIf(oid);}}}});dojo.declare("esri.layers._GridLayout",null,{constructor:function(_759,_75a,_75b,_75c){this.origin=_759;this.cellWidth=_75a.width;this.cellHeight=_75a.height;this.mapWidth=_75b.width;this.mapHeight=_75b.height;this.srInfo=_75c;},setResolution:function(_75d){this._resolution=(_75d.xmax-_75d.xmin)/this.mapWidth;if(this.srInfo){var _75e=Math.round((2*this.srInfo.valid[1])/this._resolution),_75f=Math.round(_75e/this.cellWidth);this._frameStats=[_75f,0,_75f-1];}},getCellCoordinates:function(_760){var res=this._resolution,_761=this.origin;return {row:Math.floor((_761.y-_760.y)/(this.cellHeight*res)),col:Math.floor((_760.x-_761.x)/(this.cellWidth*res))};},normalize:function(col){var _762=this._frameStats;if(_762){var _763=_762[0],m180=_762[1],p180=_762[2];if(col<m180){col=col%_763;col=col<m180?col+_763:col;}else{if(col>p180){col=col%_763;}}}return col;},intersects:function(_764,_765){var _766=this.srInfo;if(_766){return dojo.some(_765._getParts(_766),function(_767){return _764.intersects(_767.extent);});}else{return _764.intersects(_765);}},getCellExtent:function(row,col){var res=this._resolution,_768=this.origin,_769=this.cellWidth,_76a=this.cellHeight;return new esri.geometry.Extent((col*_769*res)+_768.x,_768.y-((row+1)*_76a*res),((col+1)*_769*res)+_768.x,_768.y-(row*_76a*res),new esri.SpatialReference(_768.spatialReference.toJson()));},getLatticeID:function(_76b){var _76c=this.getCellCoordinates({x:_76b.xmin,y:_76b.ymax}),_76d=this.getCellCoordinates({x:_76b.xmax,y:_76b.ymin}),_76e=_76c.row,_76f=_76d.row,_770=this.normalize(_76c.col),_771=this.normalize(_76d.col);return _76e+"_"+_76f+"_"+_770+"_"+_771;},sorter:function(a,b){return (a<b)?-1:1;},getCellsInExtent:function(_772,_773){var _774=this.getCellCoordinates({x:_772.xmin,y:_772.ymax}),_775=this.getCellCoordinates({x:_772.xmax,y:_772.ymin}),_776=_774.row,_777=_775.row,_778=_774.col,_779=_775.col,_77a=[],i,j,nj,_77b=[],_77c=[],len,xmin,xmax,ymin,ymax,_77d=[],_77e,_77f;for(i=_776;i<=_777;i++){for(j=_778;j<=_779;j++){nj=this.normalize(j);_772=this.getCellExtent(i,nj);_77a.push({row:i,col:nj,extent:_772,resolution:this._resolution});if(_773){_77b.push(_772.xmin,_772.xmax);_77c.push(_772.ymin,_772.ymax);}}}_778=this.normalize(_778);_779=this.normalize(_779);_77b.sort(this.sorter);_77c.sort(this.sorter);len=_77b.length;for(i=len-1;i>=0;i--){if(i<(len-1)){if(_77b[i]===_77b[i+1]){_77b.splice(i,1);}}}len=_77c.length;for(i=len-1;i>=0;i--){if(i<(len-1)){if(_77c[i]===_77c[i+1]){_77c.splice(i,1);}}}if(_77b.length&&_77c.length){xmin=_77b[0];xmax=_77b[_77b.length-1];ymin=_77c[0];ymax=_77c[_77c.length-1];len=_77b.length;for(i=0;i<len;i++){_77d.push([[_77b[i],ymax],[_77b[i],ymin]]);}len=_77c.length;for(i=0;i<len;i++){_77d.push([[xmin,_77c[i]],[xmax,_77c[i]]]);}_77e=new esri.geometry.Polyline({paths:_77d,spatialReference:this.origin.spatialReference.toJson()});_77f=_776+"_"+_777+"_"+_778+"_"+_779;_77a.push({latticeID:_77f,lattice:_77e,resolution:this._resolution});}return {minRow:_776,maxRow:_777,minCol:_778,maxCol:_779,cells:_77a};}});dojo.declare("esri.layers._TrackManager",null,{constructor:function(_780){this.layer=_780;this.trackMap={};},initialize:function(map){this.map=map;var _781=this.layer,_782=_781.renderer.trackRenderer;if(_782&&(_781.geometryType==="esriGeometryPoint")){var _783=(this.container=new esri.layers._GraphicsLayer({id:_781.id+"_tracks",_child:true}));_783.loaded=true;_783.onLoad(_783);_783._setMap(map,_781._div);_783.setRenderer(_782);}},addFeatures:function(_784){var tkid,_785=this.trackMap,_786=this.layer,_787=_786._trackIdField;dojo.forEach(_784,function(_788){var _789=_788.attributes;tkid=_789[_787];var ary=(_785[tkid]=(_785[tkid]||[]));ary.push(_788);});var _78a=_786._startTimeField,_78b=_786.objectIdField;var _78c=function(a,b){var _78d=a.attributes[_78a],_78e=b.attributes[_78a];if(_78d===_78e){return (a.attributes[_78b]<b.attributes[_78b])?-1:1;}else{return (_78d<_78e)?-1:1;}};for(tkid in _785){_785[tkid].sort(_78c);}},drawTracks:function(){var _78f=this.container;if(!_78f){return;}var _790=this.trackMap,sr=this.map.spatialReference,tkid,ary,path,i,_791,_792=this.layer._trackIdField,_793;for(tkid in _790){ary=_790[tkid];path=[];for(i=ary.length-1;i>=0;i--){_791=ary[i].geometry;if(_791){path.push([_791.x,_791.y]);}}_793={};_793[_792]=tkid;if(path.length>0){_78f.add(new esri.Graphic(new esri.geometry.Polyline({paths:[path],spatialReference:sr}),null,_793));}}},moveLatestToFront:function(){dojo.forEach(this.getLatestObservations(),function(_794){var _795=_794._shape;_795&&_795._moveToFront();this._repaint(_794,null,true);},this.layer);},getLatestObservations:function(){var _796=[];if(!this.layer.renderer.latestObservationRenderer){return _796;}var _797=this.trackMap,tkid;for(tkid in _797){var ary=_797[tkid];_796.push(ary[ary.length-1]);}return _796;},clearTracks:function(){var _798=this.getLatestObservations();this.trackMap={};var _799=this.container;if(_799){_799.clear();}dojo.forEach(_798,function(_79a){this._repaint(_79a,null,true);},this.layer);},isLatestObservation:function(_79b){var _79c=this.layer._trackIdField;var _79d=this.trackMap[_79b.attributes[_79c]];if(_79d){return (_79d[_79d.length-1]===_79b);}return false;},destroy:function(){var _79e=this.container;if(_79e){_79e.clear();_79e._unsetMap(this.map,this.layer._div);this.container=null;}this.map=null;this.layer=null;this.trackMap=null;}});});},"*now":function(r){r(["dojo/i18n!*preload*esri/dijit/nls/AttributeInspector-all*[\"ar\",\"az\",\"ca\",\"cs\",\"da\",\"de-de\",\"el\",\"en-gb\",\"en-us\",\"es-es\",\"fi-fi\",\"fr-fr\",\"he-il\",\"hu\",\"it-it\",\"ja-jp\",\"ko-kr\",\"nl-nl\",\"nb\",\"pl\",\"pt-br\",\"pt-pt\",\"ro\",\"ru\",\"sk\",\"sl\",\"sv\",\"th\",\"tr\",\"zh-tw\",\"zh-cn\",\"ROOT\"]"]);},"*noref":1}});define("esri/dijit/AttributeInspector-all",["dijit","dojo","dojox","dojo/require!esri/layers/FeatureLayer,esri/dijit/AttributeInspector"],function(_79f,dojo,_7a0){dojo.provide("esri.dijit.AttributeInspector-all");dojo.require("esri.layers.FeatureLayer");dojo.require("esri.dijit.AttributeInspector");});