/*
 COPYRIGHT 2009 ESRI

 TRADE SECRETS: ESRI PROPRIETARY AND CONFIDENTIAL
 Unpublished material - all rights reserved under the
 Copyright Laws of the United States and applicable international
 laws, treaties, and conventions.

 For additional information, contact:
 Environmental Systems Research Institute, Inc.
 Attn: Contracts and Legal Services Department
 380 New York Street
 Redlands, California, 92373
 USA

 email: contracts@esri.com
 */
//>>built
require({cache:{"esri/dijit/Geocoder":function(){require({cache:{"url:esri/dijit/templates/Geocoder.html":"<div class=\"${theme}\" role=\"presentation\">\r\n    <div class=\"${_GeocoderContainerClass}\" role=\"presentation\">\r\n    \t<div class=\"${_GeocoderClass}\" data-dojo-attach-point=\"containerNode\" role=\"presentation\">\r\n    \t\t<div title=\"${_i18n.widgets.Geocoder.main.searchButtonTitle}\" tabindex=\"0\" class=\"${_searchButtonClass} ${_GeocoderIconClass}\" data-dojo-attach-point=\"submitNode\" data-dojo-attach-event=\"ondijitclick:_findThenSelect\" role=\"button\"></div>\r\n    \t\t<div aria-haspopup=\"true\" id=\"${id}_menu_button\" title=\"${_i18n.widgets.Geocoder.main.geocoderMenuButtonTitle}\" tabindex=\"0\" class=\"${_geocoderMenuArrowClass} ${_GeocoderIconClass}\" data-dojo-attach-point=\"geocoderMenuArrowNode\" role=\"button\" aria-expanded=\"false\" data-dojo-attach-event=\"ondijitclick:_toggleGeolocatorMenu\"></div>\r\n    \t\t<input aria-haspopup=\"true\" id=\"${id}_input\" tabindex=\"0\" placeholder=\"\" value=\"${value}\" autocomplete=\"off\" type=\"text\" data-dojo-attach-point=\"inputNode\" data-dojo-attach-event=\"ondijitclick:_inputClick\" role=\"textbox\">\r\n    \t\t<div tabindex=\"0\" class=\"${_clearButtonClass} ${_GeocoderIconClass}\" data-dojo-attach-point=\"clearNode\" data-dojo-attach-event=\"ondijitclick:clear\" role=\"button\"></div>\r\n    \t\t<div class=\"${_GeocoderClearClass}\" role=\"presentation\"></div>\r\n    \t</div>\r\n    \t<div class=\"${_resultsContainerClass}\" data-dojo-attach-point=\"resultsNode\" aria-labelledby=\"${id}_input\" role=\"menu\" aria-hidden=\"true\"></div>\r\n    \t<div class=\"${_geocoderMenuClass}\" data-dojo-attach-point=\"geocoderMenuNode\" role=\"presentation\">\r\n    \t\t<div class=\"${_geocoderMenuHeaderClass}\">\r\n    \t\t\t${_i18n.widgets.Geocoder.main.geocoderMenuHeader}\r\n    \t\t\t<div role=\"button\" data-dojo-attach-point=\"geocoderMenuCloseNode\" data-dojo-attach-event=\"ondijitclick:_hideGeolocatorMenu\" title=\"${_i18n.widgets.Geocoder.main.geocoderMenuCloseTitle}\" tabindex=\"0\" class=\"${_geocoderMenuCloseClass}\"></div>\r\n    \t\t\t<div class=\"${_GeocoderClearClass}\" role=\"presentation\"></div>\r\n    \t\t</div>\r\n    \t\t<div data-dojo-attach-point=\"geocoderMenuInsertNode\" aria-labelledby=\"${id}_menu_button\" role=\"menu\" aria-hidden=\"true\"></div>\r\n    \t</div>\r\n    </div>\r\n</div>"}});define("esri/dijit/Geocoder",["dojo/_base/declare","dojo/_base/Deferred","dojo/dom-construct","dojo/i18n!esri/nls/jsapi","dojo/json","dojo/keys","dojo/on","dojo/query","dojo/text!esri/dijit/templates/Geocoder.html","dojo/uacss","dijit/_OnDijitClickMixin","dijit/_TemplatedMixin","dijit/_WidgetBase","dijit/focus","esri","esri/geometry","esri/tasks/locator","esri/utils"],function(_1,_2,_3,_4,_5,_6,on,_7,_8,_9,_a,_b,_c,_d,_e){_1("esri.dijit.Geocoder",[_c,_a,_b],{templateString:_8,constructor:function(_f,_10){this._setPublicDefaults();_1.safeMixin(this,_f);this._setPrivateDefaults();this.watch("value",this._updateValue);this.watch("theme",this._updateTheme);this.watch("activeGeocoder",this._setActiveGeocoder);this.watch("activeGeocoderIndex",this._setActiveGeocoderIndex);this.watch("geocoder",this._updateGeocoder);this.watch("arcgisGeocoder",this._updateGeocoder);},startup:function(){if(!this._geocoders.length){console.log("No geocoders defined.");this.destroy();return;}if(!this.domNode){console.log("domNode is undefined.");this.destroy();return;}if(!this.map){console.log("Map is undefined.");this.destroy();return;}if(this.value){this._checkStatus();}this._setDelegations();},postCreate:function(){this.loaded=true;this._updateGeocoder();},destroy:function(){var i;if(this._delegations){for(i=0;i<this._delegations.length;i++){this._delegations[i].remove();}}_3.empty(this.domNode);this.inherited(arguments);},clear:function(){this.onClear();if(this.loaded){_7(this.inputNode).attr("value","");}this.value="";this.results=[];if(this.loaded){_7(this.containerNode).removeClass(this._hasValueClass);_7(this.clearNode).attr("title","");}this._hideMenus();this._hideLoading();},show:function(){if(this.loaded){_7(this.domNode).style("display","block");}},hide:function(){if(this.loaded){_7(this.domNode).style("display","none");}},find:function(){var _11=this;var _12=new _2();_11._query({delay:0}).then(function(_13){_11.onFindResults(_13);_12.resolve(_13);});return _12;},focus:function(){if(this.loaded){_d.focus(this.inputNode);}},blur:function(){if(this.loaded&&_d.curNode){_d.curNode.blur();}},select:function(e){this.onSelect(e);this._hideMenus();this._hideLoading();if(this.autoNavigate&&e&&e.hasOwnProperty("extent")){this.map.setExtent(e.extent);}},onSelect:function(e){},onFindResults:function(e){},onAutoComplete:function(e){},onGeocoderSelect:function(e){},onClear:function(){},_setPublicDefaults:function(){this.autoComplete=false;this.arcgisGeocoder=true;this.value="";this.theme="simpleGeocoder";this.activeGeocoderIndex=0;this.maxLocations=6;this.minCharacters=3;this.searchDelay=350;this.geocoderMenu=true;this.autoNavigate=true;this.showResults=true;},_setPrivateDefaults:function(){this._i18n=_4;this.results=[];this._GeocoderContainerClass="esriGeocoderContainer";this._GeocoderClass="esriGeocoder";this._GeocoderMultipleClass="esriGeocoderMultiple";this._GeocoderIconClass="esriGeocoderIcon";this._GeocoderActiveClass="esriGeocoderActive";this._loadingClass="esriGeocoderLoading";this._resultsContainerClass="esriGeocoderResults";this._resultsItemClass="esriGeocoderResult";this._resultsItemEvenClass="esriGeocoderResultEven";this._resultsItemOddClass="esriGeocoderResultOdd";this._resultsItemFirstClass="esriGeocoderResultFirst";this._resultsItemLastClass="esriGeocoderResultLast";this._resultsPartialMatchClass="esriGeocoderResultPartial";this._searchButtonClass="esriGeocoderSearch";this._clearButtonClass="esriGeocoderReset";this._hasValueClass="esriGeocoderHasValue";this._geocoderMenuClass="esriGeocoderMenu";this._geocoderMenuHeaderClass="esriGeocoderMenuHeader";this._geocoderMenuCloseClass="esriGeocoderMenuClose";this._activeMenuClass="esriGeocoderMenuActive";this._geocoderMenuArrowClass="esriGeocoderMenuArrow";this._geocoderSelectedClass="esriGeocoderSelected";this._geocoderSelectedCheckClass="esriGeocoderSelectedCheck";this._GeocoderClearClass="esriGeocoderClearFloat";},_setEsriGeocoder:function(){if(this.arcgisGeocoder){if(typeof this.arcgisGeocoder==="object"){this._arcgisGeocoder=this.arcgisGeocoder;}else{this._arcgisGeocoder={};}if(!this._arcgisGeocoder.url){this._arcgisGeocoder.url=location.protocol+"//geocode.arcgis.com/arcgis/rest/services/World/GeocodeServer";}if(!this._arcgisGeocoder.name){this._arcgisGeocoder.name=_4.widgets.Geocoder.esriGeocoderName;}if(!this._arcgisGeocoder.hasOwnProperty("localSearchOptions")){this._arcgisGeocoder.localSearchOptions={minScale:150000,distance:12000};}this.arcgisGeocoder=this._arcgisGeocoder;}else{this.arcgisGeocoder=false;}},_setActiveGeocoder:function(){this.activeGeocoder=this._geocoders[this.activeGeocoderIndex];this._updatePlaceholder();},_setGeocoderList:function(){var _14=[];if(this.arcgisGeocoder){_14=_14.concat([this._arcgisGeocoder]);}if(this.geocoders&&this.geocoders.length){_14=_14.concat(this.geocoders);}this._geocoders=_14;},_updateGeocoder:function(){this.activeGeocoderIndex=0;this._setEsriGeocoder();this._setGeocoderList();this._setActiveGeocoder();this._insertGeocoderMenuItems();},_updatePlaceholder:function(){if(this.loaded){this._placeholder="";if(this.activeGeocoder&&this.activeGeocoder.placeholder){this._placeholder=this.activeGeocoder.placeholder;}_7(this.inputNode).attr("placeholder",this._placeholder);_7(this.submitNode).attr("title",this._placeholder);}},_updateValue:function(_15,_16,_17){if(this.loaded){_7(this.inputNode).attr("value",_17);this._checkStatus();}},_updateTheme:function(_18,_19,_1a){if(this.loaded){_7(this.domNode).removeClass(_19).addClass(_1a);}},_setActiveGeocoderIndex:function(_1b,_1c,_1d){this.activeGeocoderIndex=_1d;this._setActiveGeocoder();this._hideMenus();this._insertGeocoderMenuItems();var evt={attr:this.activeGeocoder,oldVal:_1c,newVal:_1d};this.onGeocoderSelect(evt);},_query:function(e){var _1e=this;if(!e){e={delay:0};}if(this._deferred){this._deferred.cancel("stop query");}this._deferred=new _2();this._queryTimer=setTimeout(function(){_1e._performQuery();},e.delay);return this._deferred;},_performQuery:function(){if(this.value){this._hideGeolocatorMenu();this._showLoading();var _1f;var _20=this.activeGeocoder.outFields||"";var _21="";var _22=this;if(this.activeGeocoder.prefix){_21+=this.activeGeocoder.prefix;}_21+=this.value;if(this.activeGeocoder.suffix){_21+=this.activeGeocoder.suffix;}if(this.activeGeocoder===this._arcgisGeocoder){_1f={"text":_21,"outSR":this.map.spatialReference.wkid,"f":"json"};if(this.activeGeocoder.localSearchOptions&&this.activeGeocoder.localSearchOptions.hasOwnProperty("distance")&&this.activeGeocoder.localSearchOptions.hasOwnProperty("minScale")){var _23=this.map.extent.getCenter().normalize();var _24=this.map.getScale();if(!this.activeGeocoder.localSearchOptions.minScale||(_24&&_24<=parseFloat(this.activeGeocoder.localSearchOptions.minScale))){_1f.location=_5.stringify(_23.toJson());_1f.distance=this.activeGeocoder.localSearchOptions.distance;}}if(_20){_1f.outFields=_20;}if(this.maxLocations){_1f.maxLocations=this.maxLocations;}if(this.activeGeocoder.sourceCountry){_1f.sourceCountry=this.activeGeocoder.sourceCountry;}if(this.activeGeocoder.searchExtent){var _25={"xmin":this.activeGeocoder.searchExtent.xmin,"ymin":this.activeGeocoder.searchExtent.ymin,"xmax":this.activeGeocoder.searchExtent.xmax,"ymax":this.activeGeocoder.searchExtent.ymax,"spatialReference":{"wkid":this.activeGeocoder.searchExtent.spatialReference.wkid}};_1f.bbox=_5.stringify(_25);}var _26=_e.request({url:this.activeGeocoder.url+"/find",content:_1f,handleAs:"json",callbackParamName:"callback",load:function(_27){_22._receivedResults(_27.locations);}});}else{_1f={address:{"singleLine":_21}};if(_20){_1f.outFields=[_20];}if(this.activeGeocoder.searchExtent){_1f.searchExtent=this.activeGeocoder.searchExtent;}this._task=new _e.tasks.Locator(this.activeGeocoder.url);this._task.outSpatialReference=this.map.spatialReference;this._task.addressToLocations(_1f,function(_28){_22._receivedResults(_28);},function(_29){_22._receivedResults(_29);});}}else{this._hideLoading();this._deferred.resolve();}},_showResults:function(e){var _2a=this;_2a._hideGeolocatorMenu();var _2b="";if(_2a.results&&_2a.results.length&&_2a.resultsNode){var _2c=_2a.value,i;var _2d=new RegExp("("+_2c+")","gi");_2b+="<ul role=\"presentation\">";for(i=0;i<_2a.results.length;++i){var _2e=this._resultsItemClass+" ";if(i%2===0){_2e+=_2a._resultsItemOddClass;}else{_2e+=_2a._resultsItemEvenClass;}if(i===0){_2e+=" "+_2a._resultsItemFirstClass;}else{if(i===(_2a.results.length-1)){_2e+=" "+_2a._resultsItemLastClass;}}_2b+="<li data-text=\""+_2a.results[i].name+"\" data-item=\"true\" data-index=\""+i+"\" role=\"menuitem\" tabindex=\"0\" class=\""+_2e+"\">"+_2a.results[i].name.replace(_2d,"<strong class=\""+_2a._resultsPartialMatchClass+"\">"+_2c+"</strong>")+"</li>";}_2b+="</ul>";if(_2a.resultsNode){_2a.resultsNode.innerHTML=_2b;}_2a._showResultsMenu();}},_autocomplete:function(){var _2f=this;_2f._query({delay:this.searchDelay}).then(function(_30){_2f.onAutoComplete(_30);if(_2f.showResults){_2f._showResults(_30);}});},_receivedResults:function(_31){var _32=this;_32._hideLoading();var _33=_32._hydrateResults(_31);_32.results=_33;var obj={"results":_33,"value":_32.value};_32._deferred.resolve(obj);},_showLoading:function(){if(this.loaded){_7(this.containerNode).addClass(this._loadingClass);}},_hideLoading:function(){if(this.loaded){_7(this.containerNode).removeClass(this._loadingClass);}},_showGeolocatorMenu:function(){if(this.loaded){_7(this.containerNode).addClass(this._activeMenuClass);_7(this.geocoderMenuNode).style("display","block");_7(this.geocoderMenuInsertNode).attr("aria-hidden","false");_7(this.geocoderMenuArrowNode).attr("aria-expanded","true");}},_hideGeolocatorMenu:function(){if(this.loaded){var _34=_7(this.containerNode);_34.removeClass(this._activeMenuClass);_7(this.geocoderMenuNode).style("display","none");_7(this.geocoderMenuInsertNode).attr("aria-hidden","true");_7(this.geocoderMenuArrowNode).attr("aria-expanded","false");}},_toggleGeolocatorMenu:function(){this._hideResultsMenu();if(this.loaded){var _35=_7(this.geocoderMenuNode).style("display");if(_35[0]==="block"){this._hideGeolocatorMenu();}else{this._showGeolocatorMenu();}}},_showResultsMenu:function(){if(this.loaded){_7(this.containerNode).addClass(this._GeocoderActiveClass);_7(this.resultsNode).style("display","block");_7(this.resultsNode).attr("aria-hidden","false");}},_hideResultsMenu:function(){if(this.loaded){_7(this.resultsNode).style("display","none");_7(this.containerNode).removeClass(this._GeocoderActiveClass);_7(this.resultsNode).attr("aria-hidden","true");}},_hideMenus:function(){this._hideGeolocatorMenu();this._hideResultsMenu();},_insertGeocoderMenuItems:function(){if(this.loaded){if(this.geocoderMenu&&this._geocoders.length>1){var _36="";var _37="",i;_36+="<ul role=\"presentation\">";for(i=0;i<this._geocoders.length;i++){_37=this._resultsItemClass+" ";if(i%2===0){_37+=this._resultsItemOddClass;}else{_37+=this._resultsItemEvenClass;}if(i===this.activeGeocoderIndex){_37+=" "+this._geocoderSelectedClass;}if(i===0){_37+=" "+this._resultsItemFirstClass;}else{if(i===(this._geocoders.length-1)){_37+=" "+this._resultsItemLastClass;}}var _38=this._geocoders[i].name||_4.widgets.Geocoder.main.untitledGeocoder;_36+="<li data-index=\""+i+"\" data-item=\"true\" role=\"menuitem\" tabindex=\"0\" class=\""+_37+"\">";_36+="<div class=\""+this._geocoderSelectedCheckClass+"\"></div>";_36+=_38;_36+="<div class=\""+this._GeocoderClearClass+"\"></div>";_36+="</li>";}_36+="</ul>";this.geocoderMenuInsertNode.innerHTML=_36;_7(this.geocoderMenuNode).style("display","none");_7(this.geocoderMenuArrowNode).style("display","block");_7(this.containerNode).addClass(this._GeocoderMultipleClass);}else{this.geocoderMenuInsertNode.innerHTML="";_7(this.geocoderMenuNode).style("display","none");_7(this.geocoderMenuArrowNode).style("display","none");_7(this.containerNode).removeClass(this._GeocoderMultipleClass);}}},_checkStatus:function(){if(this.loaded){if(this.value){_7(this.containerNode).addClass(this._hasValueClass);_7(this.clearNode).attr("title",_4.widgets.Geocoder.main.clearButtonTitle);}else{this.clear();}}},_setDelegations:function(){var _39=this;this._delegations=[];var _3a=on(document,"click",function(_3b){_39._hideResultsMenu(_3b);});this._delegations.push(_3a);var _3c=on(this.inputNode,"keyup",function(_3d){_39._inputKeyUp(_3d);});this._delegations.push(_3c);var _3e=on(this.inputNode,"keydown",function(_3f){_39._inputKeyDown(_3f);});this._delegations.push(_3e);var _40=on(this.geocoderMenuArrowNode,"keydown",_39._geocoderMenuButtonKeyDown());this._delegations.push(_40);var _41=on(this.resultsNode,"[data-item=\"true\"]:click, [data-item=\"true\"]:keydown",function(_42){clearTimeout(_39._queryTimer);var _43=_7("[data-item=\"true\"]",_39.resultsNode);var _44=parseInt(_7(this).attr("data-index")[0],10);var _45=_7(this).attr("data-text");var _46;if(_42.type==="click"||(_42.type==="keydown"&&_42.keyCode===_6.ENTER)){_7(_39.inputNode).attr("value",_45);_39.value=_45;if(_39.results&&_39.results[_44]){_39.select(_39.results[_44]);}}else{if(_42.type==="keydown"&&_42.keyCode===_6.UP_ARROW){_46=_44-1;if(_46<0){_39.inputNode.focus();}else{_43[_46].focus();}}else{if(_42.type==="keydown"&&_42.keyCode===_6.DOWN_ARROW){_46=_44+1;if(_46>=_43.length){_39.inputNode.focus();}else{_43[_46].focus();}}else{if(_42.keyCode===_6.ESCAPE){clearTimeout(_39._queryTimer);_39._hideMenus();}}}}});this._delegations.push(_41);var _47=on(this.geocoderMenuInsertNode,"[data-item=\"true\"]:click, [data-item=\"true\"]:keydown",function(_48){var _49=_7("[data-item=\"true\"]",_39.geocoderMenuInsertNode);var _4a=parseInt(_7(this).attr("data-index")[0],10);var _4b;if(_48.type==="click"||(_48.type==="keydown"&&_48.keyCode===_6.ENTER)){_39._setActiveGeocoderIndex(null,null,_4a);_39._hideGeolocatorMenu();}else{if(_48.type==="keydown"&&_48.keyCode===_6.UP_ARROW){_4b=_4a-1;if(_4b<0){_39.geocoderMenuArrowNode.focus();}else{_49[_4b].focus();}}else{if(_48.type==="keydown"&&_48.keyCode===_6.DOWN_ARROW){_4b=_4a+1;if(_4b>=_49.length){_39.geocoderMenuArrowNode.focus();}else{_49[_4b].focus();}}else{if(_48.keyCode===_6.ESCAPE){_39._hideGeolocatorMenu();}}}}});this._delegations.push(_47);},_findThenSelect:function(){var _4c=this;this.find().then(function(_4d){if(_4d.results&&_4d.results.length){_4c.select(_4d.results[0]);}});},_inputKeyUp:function(_4e){if(_4e){var _4f=this;clearTimeout(this._queryTimer);var _50=this.inputNode.value;this.value=_50;var _51=0;if(_50){_51=_50.length;}var _52=_7("[data-item=\"true\"]",this.resultsNode);if(_4e.keyCode===_4e.shiftKey||_4e.keyCode===_6.UP_ARROW||_4e.keyCode===_6.DOWN_ARROW||_4e.keyCode===_6.LEFT_ARROW||_4e.keyCode===_6.RIGHT_ARROW){return;}else{if(_4e&&_4e.keyCode===_6.ENTER){this._findThenSelect();}else{if(_4e&&_4e.keyCode===_6.ESCAPE){clearTimeout(this._queryTimer);this._hideMenus();}else{if(this.autoComplete&&_51>=this.minCharacters){this._autocomplete();}else{this._hideMenus();}}}}this._checkStatus();}},_inputKeyDown:function(_53){var _54=_7("[data-item=\"true\"]",this.resultsNode);if(_53&&_53.keyCode===_6.TAB){this._hideMenus();if(this._deferred){this._deferred.cancel("stop query");}return;}else{if(_53&&_53.keyCode===_6.UP_ARROW){var _55=_54.length;if(_55){_54[_55-1].focus();}}else{if(_53&&_53.keyCode===_6.DOWN_ARROW){if(_54[0]){_54[0].focus();}}}}},_geocoderMenuButtonKeyDown:function(_56){var _57=_7("[data-item=\"true\"]",this.geocoderMenuInsertNode);if(_56&&_56.keyCode===_6.UP_ARROW){this._showGeolocatorMenu();var _58=_57.length;if(_58){_57[_58-1].focus();}}else{if(_56&&_56.keyCode===_6.DOWN_ARROW){this._showGeolocatorMenu();if(_57[0]){_57[0].focus();}}}},_inputClick:function(){this._hideGeolocatorMenu();if(!this.value){this.clear();this._hideMenus();}this._checkStatus();},_hydrateResults:function(e){var _59=this;var _5a=[];if(e&&e.length){var i=0;for(i;i<e.length&&i<_59.maxLocations;i++){var _5b={},_5c;if(e[i].hasOwnProperty("extent")){_5b.extent=new _e.geometry.Extent(e[i].extent);_5b.extent.setSpatialReference(new _e.SpatialReference(_59.map.spatialReference));if(e[i].hasOwnProperty("name")){_5b.name=e[i].name;}if(e[i].hasOwnProperty("feature")){_5b.feature=new _e.Graphic(e[i].feature);_5c=_5b.feature.geometry;if(_5c){_5c.setSpatialReference(_59.map.spatialReference);}}}else{if(e[i].hasOwnProperty("location")){var _5d=new _e.geometry.Point(e[i].location.x,e[i].location.y,_59.map.spatialReference);_5b.extent=_59.map.extent.centerAt(_5d);if(e[i].hasOwnProperty("address")){_5b.name=e[i].address;}var _5e={};if(e[i].hasOwnProperty("attributes")){_5e=e[i].attributes;}if(e[i].hasOwnProperty("score")){_5e.score=e[i].score;}_5b.feature=new _e.Graphic(_5d,null,_5e,null);}}_5a.push(_5b);}}return _5a;}});});},"dojox/form/RangeSlider":function(){require({cache:{"url:dojox/form/resources/HorizontalRangeSlider.html":"<table class=\"dijit dijitReset dijitSlider dijitSliderH dojoxRangeSlider\" cellspacing=\"0\" cellpadding=\"0\" border=\"0\" rules=\"none\" dojoAttachEvent=\"onkeypress:_onKeyPress,onkeyup:_onKeyUp\" role=\"presentation\"\n\t><tr class=\"dijitReset\"\n\t\t><td class=\"dijitReset\" colspan=\"2\"></td\n\t\t><td dojoAttachPoint=\"topDecoration\" class=\"dijitReset dijitSliderDecoration dijitSliderDecorationT dijitSliderDecorationH\"></td\n\t\t><td class=\"dijitReset\" colspan=\"2\"></td\n\t></tr\n\t><tr class=\"dijitReset\"\n\t\t><td class=\"dijitReset dijitSliderButtonContainer dijitSliderButtonContainerH\"\n\t\t\t><div class=\"dijitSliderDecrementIconH\" tabIndex=\"-1\" style=\"display:none\" dojoAttachPoint=\"decrementButton\"><span class=\"dijitSliderButtonInner\">-</span></div\n\t\t></td\n\t\t><td class=\"dijitReset\"\n\t\t\t><div class=\"dijitSliderBar dijitSliderBumper dijitSliderBumperH dijitSliderLeftBumper\" dojoAttachEvent=\"onmousedown:_onClkDecBumper\"></div\n\t\t></td\n\t\t><td class=\"dijitReset\"\n\t\t\t><input dojoAttachPoint=\"valueNode\" type=\"hidden\" ${!nameAttrSetting}\n\t\t\t/><div role=\"presentation\" class=\"dojoxRangeSliderBarContainer\" dojoAttachPoint=\"sliderBarContainer\"\n\t\t\t\t><div dojoAttachPoint=\"sliderHandle\" tabIndex=\"${tabIndex}\" class=\"dijitSliderMoveable dijitSliderMoveableH\" dojoAttachEvent=\"onmousedown:_onHandleClick\" role=\"slider\"\n\t\t\t\t\t><div class=\"dijitSliderImageHandle dijitSliderImageHandleH\"></div\n\t\t\t\t></div\n\t\t\t\t><div role=\"presentation\" dojoAttachPoint=\"progressBar,focusNode\" class=\"dijitSliderBar dijitSliderBarH dijitSliderProgressBar dijitSliderProgressBarH\" dojoAttachEvent=\"onmousedown:_onBarClick\"></div\n\t\t\t\t><div dojoAttachPoint=\"sliderHandleMax\" tabIndex=\"${tabIndex}\" class=\"dijitSliderMoveable dijitSliderMoveableH\" dojoAttachEvent=\"onmousedown:_onHandleClickMax\" role=\"slider\"\n\t\t\t\t\t><div class=\"dijitSliderImageHandle dijitSliderImageHandleH\"></div\n\t\t\t\t></div\n\t\t\t\t><div role=\"presentation\" dojoAttachPoint=\"remainingBar\" class=\"dijitSliderBar dijitSliderBarH dijitSliderRemainingBar dijitSliderRemainingBarH\" dojoAttachEvent=\"onmousedown:_onRemainingBarClick\"></div\n\t\t\t></div\n\t\t></td\n\t\t><td class=\"dijitReset\"\n\t\t\t><div class=\"dijitSliderBar dijitSliderBumper dijitSliderBumperH dijitSliderRightBumper\" dojoAttachEvent=\"onmousedown:_onClkIncBumper\"></div\n\t\t></td\n\t\t><td class=\"dijitReset dijitSliderButtonContainer dijitSliderButtonContainerH\"\n\t\t\t><div class=\"dijitSliderIncrementIconH\" tabIndex=\"-1\" style=\"display:none\" dojoAttachPoint=\"incrementButton\"><span class=\"dijitSliderButtonInner\">+</span></div\n\t\t></td\n\t></tr\n\t><tr class=\"dijitReset\"\n\t\t><td class=\"dijitReset\" colspan=\"2\"></td\n\t\t><td dojoAttachPoint=\"containerNode,bottomDecoration\" class=\"dijitReset dijitSliderDecoration dijitSliderDecorationB dijitSliderDecorationH\"></td\n\t\t><td class=\"dijitReset\" colspan=\"2\"></td\n\t></tr\n></table>\n","url:dojox/form/resources/VerticalRangeSlider.html":"<table class=\"dijitReset dijitSlider dijitSliderV dojoxRangeSlider\" cellspacing=\"0\" cellpadding=\"0\" border=\"0\" rules=\"none\" role=\"presentation\"\n\t><tr class=\"dijitReset\"\n\t\t><td class=\"dijitReset\"></td\n\t\t><td class=\"dijitReset dijitSliderButtonContainer dijitSliderButtonContainerV\"\n\t\t\t><div class=\"dijitSliderIncrementIconV\" tabIndex=\"-1\" style=\"display:none\" dojoAttachPoint=\"decrementButton\" dojoAttachEvent=\"onclick: increment\"><span class=\"dijitSliderButtonInner\">+</span></div\n\t\t></td\n\t\t><td class=\"dijitReset\"></td\n\t></tr\n\t><tr class=\"dijitReset\"\n\t\t><td class=\"dijitReset\"></td\n\t\t><td class=\"dijitReset\"\n\t\t\t><center><div class=\"dijitSliderBar dijitSliderBumper dijitSliderBumperV dijitSliderTopBumper\" dojoAttachEvent=\"onclick:_onClkIncBumper\"></div></center\n\t\t></td\n\t\t><td class=\"dijitReset\"></td\n\t></tr\n\t><tr class=\"dijitReset\"\n\t\t><td dojoAttachPoint=\"leftDecoration\" class=\"dijitReset dijitSliderDecoration dijitSliderDecorationL dijitSliderDecorationV\" style=\"text-align:center;height:100%;\"></td\n\t\t><td class=\"dijitReset\" style=\"height:100%;\"\n\t\t\t><input dojoAttachPoint=\"valueNode\" type=\"hidden\" ${!nameAttrSetting}\n\t\t\t/><center role=\"presentation\" style=\"position:relative;height:100%;\" dojoAttachPoint=\"sliderBarContainer\"\n\t\t\t\t><div role=\"presentation\" dojoAttachPoint=\"remainingBar\" class=\"dijitSliderBar dijitSliderBarV dijitSliderRemainingBar dijitSliderRemainingBarV\" dojoAttachEvent=\"onmousedown:_onRemainingBarClick\"\n\t\t\t\t\t><div dojoAttachPoint=\"sliderHandle\" tabIndex=\"${tabIndex}\" class=\"dijitSliderMoveable dijitSliderMoveableV\" dojoAttachEvent=\"onkeypress:_onKeyPress,onmousedown:_onHandleClick\" style=\"vertical-align:top;\" role=\"slider\"\n\t\t\t\t\t\t><div class=\"dijitSliderImageHandle dijitSliderImageHandleV\"></div\n\t\t\t\t\t></div\n\t\t\t\t\t><div role=\"presentation\" dojoAttachPoint=\"progressBar,focusNode\" tabIndex=\"${tabIndex}\" class=\"dijitSliderBar dijitSliderBarV dijitSliderProgressBar dijitSliderProgressBarV\" dojoAttachEvent=\"onkeypress:_onKeyPress,onmousedown:_onBarClick\"\n\t\t\t\t\t></div\n\t\t\t\t\t><div dojoAttachPoint=\"sliderHandleMax\" tabIndex=\"${tabIndex}\" class=\"dijitSliderMoveable dijitSliderMoveableV\" dojoAttachEvent=\"onkeypress:_onKeyPress,onmousedown:_onHandleClickMax\" style=\"vertical-align:top;\" role=\"slider\"\n\t\t\t\t\t\t><div class=\"dijitSliderImageHandle dijitSliderImageHandleV\"></div\n\t\t\t\t\t></div\n\t\t\t\t></div\n\t\t\t></center\n\t\t></td\n\t\t><td dojoAttachPoint=\"containerNode,rightDecoration\" class=\"dijitReset dijitSliderDecoration dijitSliderDecorationR dijitSliderDecorationV\" style=\"text-align:center;height:100%;\"></td\n\t></tr\n\t><tr class=\"dijitReset\"\n\t\t><td class=\"dijitReset\"></td\n\t\t><td class=\"dijitReset\"\n\t\t\t><center><div class=\"dijitSliderBar dijitSliderBumper dijitSliderBumperV dijitSliderBottomBumper\" dojoAttachEvent=\"onclick:_onClkDecBumper\"></div></center\n\t\t></td\n\t\t><td class=\"dijitReset\"></td\n\t></tr\n\t><tr class=\"dijitReset\"\n\t\t><td class=\"dijitReset\"></td\n\t\t><td class=\"dijitReset dijitSliderButtonContainer dijitSliderButtonContainerV\"\n\t\t\t><div class=\"dijitSliderDecrementIconV\" tabIndex=\"-1\" style=\"display:none\" dojoAttachPoint=\"incrementButton\" dojoAttachEvent=\"onclick: decrement\"><span class=\"dijitSliderButtonInner\">-</span></div\n\t\t></td\n\t\t><td class=\"dijitReset\"></td\n\t></tr\n></table>\n"}});define("dojox/form/RangeSlider",["dojo/_base/declare","dojo/_base/lang","dojo/_base/array","dojo/_base/fx","dojo/_base/event","dojo/_base/sniff","dojo/dom-style","dojo/dom-geometry","dojo/keys","dijit","dojo/dnd/Mover","dojo/dnd/Moveable","dojo/text!./resources/HorizontalRangeSlider.html","dojo/text!./resources/VerticalRangeSlider.html","dijit/form/HorizontalSlider","dijit/form/VerticalSlider","dijit/form/_FormValueWidget","dijit/focus","dojo/fx","dojox/fx"],function(_5f,_60,_61,fx,_62,has,_63,_64,_65,_66,_67,_68,_69,_6a,_6b,_6c,_6d,_6e,_6f){var _70=function(a,b){return b-a;},_71=function(a,b){return a-b;};var _72=_5f("dojox.form._RangeSliderMixin",null,{value:[0,100],postMixInProperties:function(){this.inherited(arguments);this.value=_61.map(this.value,function(i){return parseInt(i,10);});},postCreate:function(){this.inherited(arguments);this.value.sort(this._isReversed()?_70:_71);var _73=this;var _74=_5f(_75,{constructor:function(){this.widget=_73;}});this._movableMax=new _68(this.sliderHandleMax,{mover:_74});this.sliderHandle.setAttribute("aria-valuemin",this.minimum);this.sliderHandle.setAttribute("aria-valuemax",this.maximum);this.sliderHandleMax.setAttribute("aria-valuemin",this.minimum);this.sliderHandleMax.setAttribute("aria-valuemax",this.maximum);var _76=_5f(_ae,{constructor:function(){this.widget=_73;}});this._movableBar=new _68(this.progressBar,{mover:_76});this.focusNode.removeAttribute("aria-valuemin");this.focusNode.removeAttribute("aria-valuemax");this.focusNode.removeAttribute("aria-valuenow");},destroy:function(){this.inherited(arguments);this._movableMax.destroy();this._movableBar.destroy();},_onKeyPress:function(e){if(this.disabled||this.readOnly||e.altKey||e.ctrlKey){return;}var _77=e.target===this.sliderHandleMax;var _78=e.target===this.progressBar;var k=_60.delegate(_65,this.isLeftToRight()?{PREV_ARROW:_65.LEFT_ARROW,NEXT_ARROW:_65.RIGHT_ARROW}:{PREV_ARROW:_65.RIGHT_ARROW,NEXT_ARROW:_65.LEFT_ARROW});var _79=0;var _7a=false;switch(e.keyCode){case k.HOME:this._setValueAttr(this.minimum,true,_77);_62.stop(e);return;case k.END:this._setValueAttr(this.maximum,true,_77);_62.stop(e);return;case k.PREV_ARROW:case k.DOWN_ARROW:_7a=true;case k.NEXT_ARROW:case k.UP_ARROW:_79=1;break;case k.PAGE_DOWN:_7a=true;case k.PAGE_UP:_79=this.pageIncrement;break;default:this.inherited(arguments);return;}if(_7a){_79=-_79;}if(_79){if(_78){this._bumpValue([{change:_79,useMaxValue:false},{change:_79,useMaxValue:true}]);}else{this._bumpValue(_79,_77);}_62.stop(e);}},_onHandleClickMax:function(e){if(this.disabled||this.readOnly){return;}if(!has("ie")){_6e.focus(this.sliderHandleMax);}_62.stop(e);},_onClkIncBumper:function(){this._setValueAttr(this._descending===false?this.minimum:this.maximum,true,true);},_bumpValue:function(_7b,_7c){var _7d=_60.isArray(_7b)?[this._getBumpValue(_7b[0].change,_7b[0].useMaxValue),this._getBumpValue(_7b[1].change,_7b[1].useMaxValue)]:this._getBumpValue(_7b,_7c);this._setValueAttr(_7d,true,_7c);},_getBumpValue:function(_7e,_7f){var idx=_7f?1:0;if(this._isReversed()){idx=1-idx;}var s=_63.getComputedStyle(this.sliderBarContainer),c=_64.getContentBox(this.sliderBarContainer,s),_80=this.discreteValues,_81=this.value[idx];if(_80<=1||_80==Infinity){_80=c[this._pixelCount];}_80--;var _82=(_81-this.minimum)*_80/(this.maximum-this.minimum)+_7e;if(_82<0){_82=0;}if(_82>_80){_82=_80;}return _82*(this.maximum-this.minimum)/_80+this.minimum;},_onBarClick:function(e){if(this.disabled||this.readOnly){return;}if(!has("ie")){_6e.focus(this.progressBar);}_62.stop(e);},_onRemainingBarClick:function(e){if(this.disabled||this.readOnly){return;}if(!has("ie")){_6e.focus(this.progressBar);}var _83=_64.position(this.sliderBarContainer,true),bar=_64.position(this.progressBar,true),_84=e[this._mousePixelCoord]-_83[this._startingPixelCoord],_85=bar[this._startingPixelCoord],_86=_85+bar[this._pixelCount],_87=this._isReversed()?_84<=_85:_84>=_86,p=this._isReversed()?_83[this._pixelCount]-_84:_84;this._setPixelValue(p,_83[this._pixelCount],true,_87);_62.stop(e);},_setPixelValue:function(_88,_89,_8a,_8b){if(this.disabled||this.readOnly){return;}var _8c=this._getValueByPixelValue(_88,_89);this._setValueAttr(_8c,_8a,_8b);},_getValueByPixelValue:function(_8d,_8e){_8d=_8d<0?0:_8e<_8d?_8e:_8d;var _8f=this.discreteValues;if(_8f<=1||_8f==Infinity){_8f=_8e;}_8f--;var _90=_8e/_8f;var _91=Math.round(_8d/_90);return (this.maximum-this.minimum)*_91/_8f+this.minimum;},_setValueAttr:function(_92,_93,_94){var _95=this.value;if(!_60.isArray(_92)){if(_94){if(this._isReversed()){_95[0]=_92;}else{_95[1]=_92;}}else{if(this._isReversed()){_95[1]=_92;}else{_95[0]=_92;}}}else{_95=_92;}this._lastValueReported="";this.valueNode.value=this.value=_92=_95;this.value.sort(this._isReversed()?_70:_71);this.sliderHandle.setAttribute("aria-valuenow",_95[0]);this.sliderHandleMax.setAttribute("aria-valuenow",_95[1]);_6d.prototype._setValueAttr.apply(this,arguments);this._printSliderBar(_93,_94);},_printSliderBar:function(_96,_97){var _98=(this.value[0]-this.minimum)/(this.maximum-this.minimum);var _99=(this.value[1]-this.minimum)/(this.maximum-this.minimum);var _9a=_98;if(_98>_99){_98=_99;_99=_9a;}var _9b=this._isReversed()?((1-_98)*100):(_98*100);var _9c=this._isReversed()?((1-_99)*100):(_99*100);var _9d=this._isReversed()?((1-_99)*100):(_98*100);if(_96&&this.slideDuration>0&&this.progressBar.style[this._progressPixelSize]){var _9e=_97?_99:_98;var _9f=this;var _a0={};var _a1=parseFloat(this.progressBar.style[this._handleOffsetCoord]);var _a2=this.slideDuration/10;if(_a2===0){return;}if(_a2<0){_a2=0-_a2;}var _a3={};var _a4={};var _a5={};_a3[this._handleOffsetCoord]={start:this.sliderHandle.style[this._handleOffsetCoord],end:_9b,units:"%"};_a4[this._handleOffsetCoord]={start:this.sliderHandleMax.style[this._handleOffsetCoord],end:_9c,units:"%"};_a5[this._handleOffsetCoord]={start:this.progressBar.style[this._handleOffsetCoord],end:_9d,units:"%"};_a5[this._progressPixelSize]={start:this.progressBar.style[this._progressPixelSize],end:(_99-_98)*100,units:"%"};var _a6=fx.animateProperty({node:this.sliderHandle,duration:_a2,properties:_a3});var _a7=fx.animateProperty({node:this.sliderHandleMax,duration:_a2,properties:_a4});var _a8=fx.animateProperty({node:this.progressBar,duration:_a2,properties:_a5});var _a9=_6f.combine([_a6,_a7,_a8]);_a9.play();}else{this.sliderHandle.style[this._handleOffsetCoord]=_9b+"%";this.sliderHandleMax.style[this._handleOffsetCoord]=_9c+"%";this.progressBar.style[this._handleOffsetCoord]=_9d+"%";this.progressBar.style[this._progressPixelSize]=((_99-_98)*100)+"%";}}});var _75=_5f("dijit.form._SliderMoverMax",_66.form._SliderMover,{onMouseMove:function(e){var _aa=this.widget;var _ab=_aa._abspos;if(!_ab){_ab=_aa._abspos=_64.position(_aa.sliderBarContainer,true);_aa._setPixelValue_=_60.hitch(_aa,"_setPixelValue");_aa._isReversed_=_aa._isReversed();}var _ac=e[_aa._mousePixelCoord]-_ab[_aa._startingPixelCoord];_aa._setPixelValue_(_aa._isReversed_?(_ab[_aa._pixelCount]-_ac):_ac,_ab[_aa._pixelCount],false,true);},destroy:function(e){_67.prototype.destroy.apply(this,arguments);var _ad=this.widget;_ad._abspos=null;_ad._setValueAttr(_ad.value,true);}});var _ae=_5f("dijit.form._SliderBarMover",_67,{onMouseMove:function(e){var _af=this.widget;if(_af.disabled||_af.readOnly){return;}var _b0=_af._abspos;var bar=_af._bar;var _b1=_af._mouseOffset;if(!_b0){_b0=_af._abspos=_64.position(_af.sliderBarContainer,true);_af._setPixelValue_=_60.hitch(_af,"_setPixelValue");_af._getValueByPixelValue_=_60.hitch(_af,"_getValueByPixelValue");_af._isReversed_=_af._isReversed();}if(!bar){bar=_af._bar=_64.position(_af.progressBar,true);}if(!_b1){_b1=_af._mouseOffset=e[_af._mousePixelCoord]-bar[_af._startingPixelCoord];}var _b2=e[_af._mousePixelCoord]-_b0[_af._startingPixelCoord]-_b1,_b3=_b2+bar[_af._pixelCount],_b4=[_b2,_b3];_b4.sort(_71);if(_b4[0]<=0){_b4[0]=0;_b4[1]=bar[_af._pixelCount];}if(_b4[1]>=_b0[_af._pixelCount]){_b4[1]=_b0[_af._pixelCount];_b4[0]=_b0[_af._pixelCount]-bar[_af._pixelCount];}var _b5=[_af._getValueByPixelValue(_af._isReversed_?(_b0[_af._pixelCount]-_b4[0]):_b4[0],_b0[_af._pixelCount]),_af._getValueByPixelValue(_af._isReversed_?(_b0[_af._pixelCount]-_b4[1]):_b4[1],_b0[_af._pixelCount])];_af._setValueAttr(_b5,false,false);},destroy:function(){_67.prototype.destroy.apply(this,arguments);var _b6=this.widget;_b6._abspos=null;_b6._bar=null;_b6._mouseOffset=null;_b6._setValueAttr(_b6.value,true);}});_5f("dojox.form.HorizontalRangeSlider",[_6b,_72],{templateString:_69});_5f("dojox.form.VerticalRangeSlider",[_6c,_72],{templateString:_6a});return _72;});},"dojox/charting/plot2d/ClusteredColumns":function(){define("dojox/charting/plot2d/ClusteredColumns",["dojo/_base/declare","./Columns","./common"],function(_b7,_b8,dc){return _b7("dojox.charting.plot2d.ClusteredColumns",_b8,{getBarProperties:function(){var f=dc.calculateBarSize(this._hScaler.bounds.scale,this.opt,this.series.length);return {gap:f.gap,width:f.size,thickness:f.size};}});});},"dojox/lang/functional/scan":function(){define("dojox/lang/functional/scan",["dojo/_base/kernel","dojo/_base/lang","./lambda"],function(_b9,_ba,df){var _bb={};_ba.mixin(df,{scanl:function(a,f,z,o){if(typeof a=="string"){a=a.split("");}o=o||_b9.global;f=df.lambda(f);var t,n,i;if(_ba.isArray(a)){t=new Array((n=a.length)+1);t[0]=z;for(i=0;i<n;z=f.call(o,z,a[i],i,a),t[++i]=z){}}else{if(typeof a.hasNext=="function"&&typeof a.next=="function"){t=[z];for(i=0;a.hasNext();t.push(z=f.call(o,z,a.next(),i++,a))){}}else{t=[z];for(i in a){if(!(i in _bb)){t.push(z=f.call(o,z,a[i],i,a));}}}}return t;},scanl1:function(a,f,o){if(typeof a=="string"){a=a.split("");}o=o||_b9.global;f=df.lambda(f);var t,n,z,_bc=true;if(_ba.isArray(a)){t=new Array(n=a.length);t[0]=z=a[0];for(var i=1;i<n;t[i]=z=f.call(o,z,a[i],i,a),++i){}}else{if(typeof a.hasNext=="function"&&typeof a.next=="function"){if(a.hasNext()){t=[z=a.next()];for(i=1;a.hasNext();t.push(z=f.call(o,z,a.next(),i++,a))){}}}else{for(i in a){if(!(i in _bb)){if(_bc){t=[z=a[i]];_bc=false;}else{t.push(z=f.call(o,z,a[i],i,a));}}}}}return t;},scanr:function(a,f,z,o){if(typeof a=="string"){a=a.split("");}o=o||_b9.global;f=df.lambda(f);var n=a.length,t=new Array(n+1),i=n;t[n]=z;for(;i>0;--i,z=f.call(o,z,a[i],i,a),t[i]=z){}return t;},scanr1:function(a,f,o){if(typeof a=="string"){a=a.split("");}o=o||_b9.global;f=df.lambda(f);var n=a.length,t=new Array(n),z=a[n-1],i=n-1;t[i]=z;for(;i>0;--i,z=f.call(o,z,a[i],i,a),t[i]=z){}return t;}});});},"esri/dijit/editing/tools/Editing":function(){define("esri/dijit/editing/tools/Editing",["dijit","dojo","dojox","dojo/require!esri/dijit/editing/tools/DropDownToolBase,esri/dijit/editing/Util,esri/dijit/editing/tools/EditingTools"],function(_bd,_be,_bf){_be.provide("esri.dijit.editing.tools.Editing");_be.require("esri.dijit.editing.tools.DropDownToolBase");_be.require("esri.dijit.editing.Util");_be.require("esri.dijit.editing.tools.EditingTools");_be.declare("esri.dijit.editing.tools.Editing",[esri.dijit.editing.tools.DropDownToolBase],{_enabled:false,deactivate:function(){if(!this._enabled){return;}this._enabled=false;this.inherited(arguments);this._settings.templatePicker.clearSelection();},onItemClicked:function(evt){this.inherited(arguments);if(this._activeTool===this._tools.AUTOCOMPLETE){this._settings.editor._drawingTool=esri.layers.FeatureTemplate.TOOL_AUTO_COMPLETE_POLYGON;}},_activateTool:function(_c0,_c1){this.enable(_c1);for(var i in this._tools){if(this._tools.hasOwnProperty(i)){this.dropDown.removeChild(this._tools[i]);if(this._tools[i]._enabled===true){this.dropDown.addChild(this._tools[i]);}}}if(this._geometryType!==_c1||this._activeTool._enabled===false){this._activeTool=this._tools[_c0.toUpperCase()];}this._geometryType=_c1;this._activeTool.activate();this._activeTool.setChecked(true);this._updateUI();},_initializeTool:function(_c2){this.inherited(arguments);this._initializeTools();},_initializeTools:function(){var _c3=this._settings.layers;var _c4=this._settings.editor;var _c5=false,_c6=false,_c7=false;var _c8=this._toolTypes=[];var _c9;_be.forEach(_c3,function(_ca){_c9=_ca.geometryType;_c5=_c5||_c9==="esriGeometryPoint";_c6=_c6||_c9==="esriGeometryPolyline";_c7=_c7||_c9==="esriGeometryPolygon";_c8=_c8.concat(_be.map(this._getTemplatesFromLayer(_ca),_be.hitch(this,function(_cb){return _c4._toDrawTool(_cb.drawingTool,_ca);})));},this);var _cc=this._settings.createOptions;if(_c5){this._toolTypes.push("point");}if(_c6){this._toolTypes=this._toolTypes.concat(_cc.polylineDrawTools);}if(_c7){this._toolTypes=this._toolTypes.concat(_cc.polygonDrawTools);}this._toolTypes=this._toUnique(this._toolTypes.concat(_c8));},_toUnique:function(arr){var _cd={};return _be.filter(arr,function(val){return _cd[val]?false:(_cd[val]=true);});},_getTemplatesFromLayer:function(_ce){var _cf=_ce.templates||[];var _d0=_ce.types;_be.forEach(_d0,function(_d1){_cf=_cf.concat(_d1.templates);});return _be.filter(_cf,esri._isDefined);},_createTools:function(){_be.forEach(this._toolTypes,this._createTool,this);this.inherited(arguments);},_createTool:function(_d2){var _d3=_be.mixin(esri.dijit.editing.tools.EditingTools[_d2],{settings:this._settings,onClick:_be.hitch(this,"onItemClicked")});this._tools[_d2.toUpperCase()]=new esri.dijit.editing.tools.Edit(_d3);}});});},"dojox/grid/DataGrid":function(){define("dojox/grid/DataGrid",["../main","dojo/_base/array","dojo/_base/lang","dojo/_base/json","dojo/_base/sniff","dojo/_base/declare","./_Grid","./DataSelection","dojo/_base/html"],function(_d4,_d5,_d6,_d7,has,_d8,_d9,_da,_db){var _dc=_d8("dojox.grid.DataGrid",_d9,{store:null,query:null,queryOptions:null,fetchText:"...",sortFields:null,updateDelay:1,items:null,_store_connects:null,_by_idty:null,_by_idx:null,_cache:null,_pages:null,_pending_requests:null,_bop:-1,_eop:-1,_requests:0,rowCount:0,_isLoaded:false,_isLoading:false,keepSelection:false,postCreate:function(){this._pages=[];this._store_connects=[];this._by_idty={};this._by_idx=[];this._cache=[];this._pending_requests={};this._setStore(this.store);this.inherited(arguments);},destroy:function(){this.selection.destroy();this.inherited(arguments);},createSelection:function(){this.selection=new _da(this);},get:function(_dd,_de){if(_de&&this.field=="_item"&&!this.fields){return _de;}else{if(_de&&this.fields){var ret=[];var s=this.grid.store;_d5.forEach(this.fields,function(f){ret=ret.concat(s.getValues(_de,f));});return ret;}else{if(!_de&&typeof _dd==="string"){return this.inherited(arguments);}}}return (!_de?this.defaultValue:(!this.field?this.value:(this.field=="_item"?_de:this.grid.store.getValue(_de,this.field))));},_checkUpdateStatus:function(){if(this.updateDelay>0){var _df=false;if(this._endUpdateDelay){clearTimeout(this._endUpdateDelay);delete this._endUpdateDelay;_df=true;}if(!this.updating){this.beginUpdate();_df=true;}if(_df){var _e0=this;this._endUpdateDelay=setTimeout(function(){delete _e0._endUpdateDelay;_e0.endUpdate();},this.updateDelay);}}},_onSet:function(_e1,_e2,_e3,_e4){this._checkUpdateStatus();var idx=this.getItemIndex(_e1);if(idx>-1){this.updateRow(idx);}},_createItem:function(_e5,_e6){var _e7=this._hasIdentity?this.store.getIdentity(_e5):_d7.toJson(this.query)+":idx:"+_e6+":sort:"+_d7.toJson(this.getSortProps());var o=this._by_idty[_e7]={idty:_e7,item:_e5};return o;},_addItem:function(_e8,_e9,_ea){this._by_idx[_e9]=this._createItem(_e8,_e9);if(!_ea){this.updateRow(_e9);}},_onNew:function(_eb,_ec){this._checkUpdateStatus();var _ed=this.get("rowCount");this._addingItem=true;this.updateRowCount(_ed+1);this._addingItem=false;this._addItem(_eb,_ed);this.showMessage();},_onDelete:function(_ee){this._checkUpdateStatus();var idx=this._getItemIndex(_ee,true);if(idx>=0){this._pages=[];this._bop=-1;this._eop=-1;var o=this._by_idx[idx];this._by_idx.splice(idx,1);delete this._by_idty[o.idty];this.updateRowCount(this.get("rowCount")-1);if(this.get("rowCount")===0){this.showMessage(this.noDataMessage);}}if(this.selection.isSelected(idx)){this.selection.deselect(idx);this.selection.selected.splice(idx,1);}},_onRevert:function(){this._refresh();},setStore:function(_ef,_f0,_f1){if(this._requestsPending(0)){return;}this._setQuery(_f0,_f1);this._setStore(_ef);this._refresh(true);},setQuery:function(_f2,_f3){if(this._requestsPending(0)){return;}this._setQuery(_f2,_f3);this._refresh(true);},setItems:function(_f4){this.items=_f4;this._setStore(this.store);this._refresh(true);},_setQuery:function(_f5,_f6){this.query=_f5;this.queryOptions=_f6||this.queryOptions;},_setStore:function(_f7){if(this.store&&this._store_connects){_d5.forEach(this._store_connects,this.disconnect,this);}this.store=_f7;if(this.store){var f=this.store.getFeatures();var h=[];this._canEdit=!!f["dojo.data.api.Write"]&&!!f["dojo.data.api.Identity"];this._hasIdentity=!!f["dojo.data.api.Identity"];if(!!f["dojo.data.api.Notification"]&&!this.items){h.push(this.connect(this.store,"onSet","_onSet"));h.push(this.connect(this.store,"onNew","_onNew"));h.push(this.connect(this.store,"onDelete","_onDelete"));}if(this._canEdit){h.push(this.connect(this.store,"revert","_onRevert"));}this._store_connects=h;}},_onFetchBegin:function(_f8,req){if(!this.scroller){return;}if(this.rowCount!=_f8){if(req.isRender){this.scroller.init(_f8,this.keepRows,this.rowsPerPage);this.rowCount=_f8;this._setAutoHeightAttr(this.autoHeight,true);this._skipRowRenormalize=true;this.prerender();this._skipRowRenormalize=false;}else{this.updateRowCount(_f8);}}if(!_f8){this.views.render();this._resize();this.showMessage(this.noDataMessage);this.focus.initFocusView();}else{this.showMessage();}},_onFetchComplete:function(_f9,req){if(!this.scroller){return;}if(_f9&&_f9.length>0){_d5.forEach(_f9,function(_fa,idx){this._addItem(_fa,req.start+idx,true);},this);this.updateRows(req.start,_f9.length);if(req.isRender){this.setScrollTop(0);this.postrender();}else{if(this._lastScrollTop){this.setScrollTop(this._lastScrollTop);}}if(has("ie")){_db.setSelectable(this.domNode,this.selectable);}}delete this._lastScrollTop;if(!this._isLoaded){this._isLoading=false;this._isLoaded=true;}this._pending_requests[req.start]=false;},_onFetchError:function(err,req){console.log(err);delete this._lastScrollTop;if(!this._isLoaded){this._isLoading=false;this._isLoaded=true;this.showMessage(this.errorMessage);}this._pending_requests[req.start]=false;this.onFetchError(err,req);},onFetchError:function(err,req){},_fetch:function(_fb,_fc){_fb=_fb||0;if(this.store&&!this._pending_requests[_fb]){if(!this._isLoaded&&!this._isLoading){this._isLoading=true;this.showMessage(this.loadingMessage);}this._pending_requests[_fb]=true;try{if(this.items){var _fd=this.items;var _fe=this.store;this.rowsPerPage=_fd.length;var req={start:_fb,count:this.rowsPerPage,isRender:_fc};this._onFetchBegin(_fd.length,req);var _ff=0;_d5.forEach(_fd,function(i){if(!_fe.isItemLoaded(i)){_ff++;}});if(_ff===0){this._onFetchComplete(_fd,req);}else{var _100=function(item){_ff--;if(_ff===0){this._onFetchComplete(_fd,req);}};_d5.forEach(_fd,function(i){if(!_fe.isItemLoaded(i)){_fe.loadItem({item:i,onItem:_100,scope:this});}},this);}}else{this.store.fetch({start:_fb,count:this.rowsPerPage,query:this.query,sort:this.getSortProps(),queryOptions:this.queryOptions,isRender:_fc,onBegin:_d6.hitch(this,"_onFetchBegin"),onComplete:_d6.hitch(this,"_onFetchComplete"),onError:_d6.hitch(this,"_onFetchError")});}}catch(e){this._onFetchError(e,{start:_fb,count:this.rowsPerPage});}}},_clearData:function(){this.updateRowCount(0);this._by_idty={};this._by_idx=[];this._pages=[];this._bop=this._eop=-1;this._isLoaded=false;this._isLoading=false;},getItem:function(idx){var data=this._by_idx[idx];if(!data||(data&&!data.item)){this._preparePage(idx);return null;}return data.item;},getItemIndex:function(item){return this._getItemIndex(item,false);},_getItemIndex:function(item,_101){if(!_101&&!this.store.isItem(item)){return -1;}var idty=this._hasIdentity?this.store.getIdentity(item):null;for(var i=0,l=this._by_idx.length;i<l;i++){var d=this._by_idx[i];if(d&&((idty&&d.idty==idty)||(d.item===item))){return i;}}return -1;},filter:function(_102,_103){this.query=_102;if(_103){this._clearData();}this._fetch();},_getItemAttr:function(idx,attr){var item=this.getItem(idx);return (!item?this.fetchText:this.store.getValue(item,attr));},_render:function(){if(this.domNode.parentNode){this.scroller.init(this.get("rowCount"),this.keepRows,this.rowsPerPage);this.prerender();this._fetch(0,true);}},_requestsPending:function(_104){return this._pending_requests[_104];},_rowToPage:function(_105){return (this.rowsPerPage?Math.floor(_105/this.rowsPerPage):_105);},_pageToRow:function(_106){return (this.rowsPerPage?this.rowsPerPage*_106:_106);},_preparePage:function(_107){if((_107<this._bop||_107>=this._eop)&&!this._addingItem){var _108=this._rowToPage(_107);this._needPage(_108);this._bop=_108*this.rowsPerPage;this._eop=this._bop+(this.rowsPerPage||this.get("rowCount"));}},_needPage:function(_109){if(!this._pages[_109]){this._pages[_109]=true;this._requestPage(_109);}},_requestPage:function(_10a){var row=this._pageToRow(_10a);var _10b=Math.min(this.rowsPerPage,this.get("rowCount")-row);if(_10b>0){this._requests++;if(!this._requestsPending(row)){setTimeout(_d6.hitch(this,"_fetch",row,false),1);}}},getCellName:function(_10c){return _10c.field;},_refresh:function(_10d){this._clearData();this._fetch(0,_10d);},sort:function(){this.edit.apply();this._lastScrollTop=this.scrollTop;this._refresh();},canSort:function(){return (!this._isLoading);},getSortProps:function(){var c=this.getCell(this.getSortIndex());if(!c){if(this.sortFields){return this.sortFields;}return null;}else{var desc=c["sortDesc"];var si=!(this.sortInfo>0);if(typeof desc=="undefined"){desc=si;}else{desc=si?!desc:desc;}return [{attribute:c.field,descending:desc}];}},styleRowState:function(_10e){if(this.store&&this.store.getState){var _10f=this.store.getState(_10e.index),c="";for(var i=0,ss=["inflight","error","inserting"],s;s=ss[i];i++){if(_10f[s]){c=" dojoxGridRow-"+s;break;}}_10e.customClasses+=c;}},onStyleRow:function(_110){this.styleRowState(_110);this.inherited(arguments);},canEdit:function(_111,_112){return this._canEdit;},_copyAttr:function(idx,attr){var row={};var _113={};var src=this.getItem(idx);return this.store.getValue(src,attr);},doStartEdit:function(_114,_115){if(!this._cache[_115]){this._cache[_115]=this._copyAttr(_115,_114.field);}this.onStartEdit(_114,_115);},doApplyCellEdit:function(_116,_117,_118){this.store.fetchItemByIdentity({identity:this._by_idx[_117].idty,onItem:_d6.hitch(this,function(item){var _119=this.store.getValue(item,_118);if(typeof _119=="number"){_116=isNaN(_116)?_116:parseFloat(_116);}else{if(typeof _119=="boolean"){_116=_116=="true"?true:_116=="false"?false:_116;}else{if(_119 instanceof Date){var _11a=new Date(_116);_116=isNaN(_11a.getTime())?_116:_11a;}}}this.store.setValue(item,_118,_116);this.onApplyCellEdit(_116,_117,_118);})});},doCancelEdit:function(_11b){var _11c=this._cache[_11b];if(_11c){this.updateRow(_11b);delete this._cache[_11b];}this.onCancelEdit.apply(this,arguments);},doApplyEdit:function(_11d,_11e){var _11f=this._cache[_11d];this.onApplyEdit(_11d);},removeSelectedRows:function(){if(this._canEdit){this.edit.apply();var fx=_d6.hitch(this,function(_120){if(_120.length){_d5.forEach(_120,this.store.deleteItem,this.store);this.selection.clear();}});if(this.allItemsSelected){this.store.fetch({query:this.query,queryOptions:this.queryOptions,onComplete:fx});}else{fx(this.selection.getSelected());}}}});_dc.cell_markupFactory=function(_121,node,_122){var _123=_d6.trim(_db.attr(node,"field")||"");if(_123){_122.field=_123;}_122.field=_122.field||_122.name;var _124=_d6.trim(_db.attr(node,"fields")||"");if(_124){_122.fields=_124.split(",");}if(_121){_121(node,_122);}};_dc.markupFactory=function(_125,node,ctor,_126){return _d9.markupFactory(_125,node,ctor,_d6.partial(_dc.cell_markupFactory,_126));};return _dc;});},"dojo/_base/query":function(){define(["../query","./NodeList"],function(_127){return _127;});},"esri/dijit/editing/tools/EditingTools":function(){define("esri/dijit/editing/tools/EditingTools",["dijit","dojo","dojox","dojo/require!esri/dijit/editing/tools/MenuItemBase"],function(_128,dojo,_129){dojo.require("esri.dijit.editing.tools.MenuItemBase");dojo.provide("esri.dijit.editing.tools.EditingTools");dojo.declare("esri.dijit.editing.tools.Edit",[esri.dijit.editing.tools.MenuItemBase],{enable:function(_12a){this._enabled=_12a===this._geomType;this.inherited(arguments);}});esri.dijit.editing.tools.EditingTools={point:{id:"esriPointTool",_enabledIcon:"toolbarIcon pointIcon",_disabledIcon:"toolbarIcon pointIconDisabled",_drawType:esri.toolbars.Draw.POINT,_geomType:"esriGeometryPoint",_label:"NLS_pointLbl"},polyline:{id:"toolDrawFreehandPolyline",_enabledIcon:"toolbarIcon polylineIcon",_disabledIcon:"toolbarIcon polylineIconDisabled",_drawType:esri.toolbars.Draw.POLYLINE,_geomType:"esriGeometryPolyline",_label:"NLS_polylineLbl"},freehandpolyline:{id:"toolDrawPolyline",_enabledIcon:"toolbarIcon freehandPolylineIcon",_disabledIcon:"toolbarIcon freehandPolylineIcon",_drawType:esri.toolbars.Draw.FREEHAND_POLYLINE,_geomType:"esriGeometryPolyline",_label:"NLS_freehandPolylineLbl"},polygon:{id:"toolDrawPolygon",_enabledIcon:"toolbarIcon polygonIcon",_disabledIcon:"toolbarIcon polygonIconDisabled",_drawType:esri.toolbars.Draw.POLYGON,_geomType:"esriGeometryPolygon",_label:"NLS_polygonLbl"},freehandpolygon:{id:"toolDrawFreehandPolygon",_enabledIcon:"toolbarIcon freehandPolygonIcon",_disabledIcon:"toolbarIcon freehandPolygonIconDisabled",_drawType:esri.toolbars.Draw.FREEHAND_POLYGON,_label:"NLS_freehandPolygonLbl",_geomType:"esriGeometryPolygon"},autocomplete:{id:"btnFeatureAutoComplete",_enabledIcon:"toolbarIcon autoCompleteIcon",_disabledIcon:"toolbarIcon autoCompleteIcon",_drawType:esri.toolbars.Draw.POLYGON,_label:"NLS_autoCompleteLbl",_geomType:"esriGeometryPolygon"},rectangle:{id:"toolDrawRect",_enabledIcon:"toolbarIcon rectangleIcon",_disabledIcon:"toolbarIcon rectangleIcon",_drawType:esri.toolbars.Draw.RECTANGLE,_geomType:"esriGeometryPolygon",_label:"NLS_rectangleLbl"},arrow:{id:"toolDrawArrow",_enabledIcon:"toolbarIcon arrowIcon",_disabledIcon:"toolbarIcon arrowIcon",_drawType:esri.toolbars.Draw.ARROW,_geomType:"esriGeometryPolygon",_label:"NLS_arrowLbl"},uparrow:{id:"toolDrawArrowUp",_enabledIcon:"toolbarIcon arrowUpIcon",_disabledIcon:"toolbarIcon arrowUpIcon",_drawType:esri.toolbars.Draw.UP_ARROW,_geomType:"esriGeometryPolygon",_label:"NLS_arrowUpLbl"},downarrow:{id:"toolDrawDownArrow",_enabledIcon:"toolbarIcon arrowDownIcon",_disabledIcon:"toolbarIcon arrowDownIcon",_drawType:esri.toolbars.Draw.DOWN_ARROW,_geomType:"esriGeometryPolygon",_label:"NLS_arrowDownLbl"},leftarrow:{id:"toolDrawLeftArrow",_enabledIcon:"toolbarIcon arrowLeftIcon",_disabledIcon:"toolbarIcon arrowLeftIcon",_drawType:esri.toolbars.Draw.LEFT_ARROW,_geomType:"esriGeometryPolygon",_label:"NLS_arrowLeftLbl"},rightarrow:{id:"toolDrawRightArrow",_enabledIcon:"toolbarIcon arrowIcon",_disabledIcon:"toolbarIcon arrowIcon",_drawType:esri.toolbars.Draw.RIGHT_ARROW,_geomType:"esriGeometryPolygon",_label:"NLS_arrowRightLbl"},circle:{id:"toolDrawCircle",_enabledIcon:"toolbarIcon circleIcon",_disabledIcon:"toolbarIcon circleIcon",_drawType:esri.toolbars.Draw.CIRCLE,_geomType:"esriGeometryPolygon",_label:"NLS_circleLbl"},ellipse:{id:"toolDrawEllipse",_enabledIcon:"toolbarIcon ellipseIcon",_disabledIcon:"toolbarIcon ellipseIcon",_drawType:esri.toolbars.Draw.ELLIPSE,_geomType:"esriGeometryPolygon",_label:"NLS_ellipseLbl"},triangle:{id:"toolDrawTriangle",_enabledIcon:"toolbarIcon triangleIcon",_disabledIcon:"toolbarIcon triangleIcon",_drawType:esri.toolbars.Draw.TRIANGLE,_geomType:"esriGeometryPolygon",_label:"NLS_triangleLbl"},attributes:{id:"btnAttributes",_enabledIcon:"toolbarIcon attributesIcon",_disabledIcon:"toolbarIcon attributesIcon",_enabled:false,_label:"NLS_attributesLbl"},del:{id:"btnDelete2",_enabledIcon:"toolbarIcon deleteFeatureIcon",_disabledIcon:"toolbarIcon deleteFeatureIcon",_enabled:false,_label:"NLS_deleteLbl"},undo:{id:"btnUndo",_enabledIcon:"dijitEditorIcon dijitEditorIconUndo",_disabledIcon:"dijitEditorIcon dijitEditorIconUndo",_enabled:false,_label:"NLS_undoLbl"},redo:{id:"btnRedo",_enabledIcon:"dijitEditorIcon dijitEditorIconRedo",_disabledIcon:"dijitEditorIcon dijitEditorIconRedo",_enabled:false,_label:"NLS_redoLbl"}};});},"dijit/_editor/range":function(){define("dijit/_editor/range",["dojo/_base/array","dojo/_base/declare","dojo/_base/lang","dojo/_base/window","../main"],function(_12b,_12c,lang,win,_12d){_12d.range={};_12d.range.getIndex=function(node,_12e){var ret=[],retR=[];var _12f=node;var _130,n;while(node!=_12e){var i=0;_130=node.parentNode;while((n=_130.childNodes[i++])){if(n===node){--i;break;}}ret.unshift(i);retR.unshift(i-_130.childNodes.length);node=_130;}if(ret.length>0&&_12f.nodeType==3){n=_12f.previousSibling;while(n&&n.nodeType==3){ret[ret.length-1]--;n=n.previousSibling;}n=_12f.nextSibling;while(n&&n.nodeType==3){retR[retR.length-1]++;n=n.nextSibling;}}return {o:ret,r:retR};};_12d.range.getNode=function(_131,_132){if(!lang.isArray(_131)||_131.length==0){return _132;}var node=_132;_12b.every(_131,function(i){if(i>=0&&i<node.childNodes.length){node=node.childNodes[i];}else{node=null;return false;}return true;});return node;};_12d.range.getCommonAncestor=function(n1,n2,root){root=root||n1.ownerDocument.body;var _133=function(n){var as=[];while(n){as.unshift(n);if(n!==root){n=n.parentNode;}else{break;}}return as;};var n1as=_133(n1);var n2as=_133(n2);var m=Math.min(n1as.length,n2as.length);var com=n1as[0];for(var i=1;i<m;i++){if(n1as[i]===n2as[i]){com=n1as[i];}else{break;}}return com;};_12d.range.getAncestor=function(node,_134,root){root=root||node.ownerDocument.body;while(node&&node!==root){var name=node.nodeName.toUpperCase();if(_134.test(name)){return node;}node=node.parentNode;}return null;};_12d.range.BlockTagNames=/^(?:P|DIV|H1|H2|H3|H4|H5|H6|ADDRESS|PRE|OL|UL|LI|DT|DE)$/;_12d.range.getBlockAncestor=function(node,_135,root){root=root||node.ownerDocument.body;_135=_135||_12d.range.BlockTagNames;var _136=null,_137;while(node&&node!==root){var name=node.nodeName.toUpperCase();if(!_136&&_135.test(name)){_136=node;}if(!_137&&(/^(?:BODY|TD|TH|CAPTION)$/).test(name)){_137=node;}node=node.parentNode;}return {blockNode:_136,blockContainer:_137||node.ownerDocument.body};};_12d.range.atBeginningOfContainer=function(_138,node,_139){var _13a=false;var _13b=(_139==0);if(!_13b&&node.nodeType==3){if(/^[\s\xA0]+$/.test(node.nodeValue.substr(0,_139))){_13b=true;}}if(_13b){var _13c=node;_13a=true;while(_13c&&_13c!==_138){if(_13c.previousSibling){_13a=false;break;}_13c=_13c.parentNode;}}return _13a;};_12d.range.atEndOfContainer=function(_13d,node,_13e){var _13f=false;var _140=(_13e==(node.length||node.childNodes.length));if(!_140&&node.nodeType==3){if(/^[\s\xA0]+$/.test(node.nodeValue.substr(_13e))){_140=true;}}if(_140){var _141=node;_13f=true;while(_141&&_141!==_13d){if(_141.nextSibling){_13f=false;break;}_141=_141.parentNode;}}return _13f;};_12d.range.adjacentNoneTextNode=function(_142,next){var node=_142;var len=(0-_142.length)||0;var prop=next?"nextSibling":"previousSibling";while(node){if(node.nodeType!=3){break;}len+=node.length;node=node[prop];}return [node,len];};_12d.range.create=function(win){win=win||window;if(win.getSelection){return win.document.createRange();}else{return new _12d.range.W3CRange();}};_12d.range.getSelection=function(_143,_144){if(_143.getSelection){return _143.getSelection();}else{var s=new _12d.range.ie.selection(_143);if(!_144){s._getCurrentSelection();}return s;}};if(!window.getSelection){_12d.range.ie={cachedSelection:{},selection:function(_145){this._ranges=[];this.addRange=function(r,_146){this._ranges.push(r);if(!_146){r._select();}this.rangeCount=this._ranges.length;};this.removeAllRanges=function(){this._ranges=[];this.rangeCount=0;};var _147=function(){var r=_145.document.selection.createRange();var type=_145.document.selection.type.toUpperCase();if(type=="CONTROL"){return new _12d.range.W3CRange(_12d.range.ie.decomposeControlRange(r));}else{return new _12d.range.W3CRange(_12d.range.ie.decomposeTextRange(r));}};this.getRangeAt=function(i){return this._ranges[i];};this._getCurrentSelection=function(){this.removeAllRanges();var r=_147();if(r){this.addRange(r,true);this.isCollapsed=r.collapsed;}else{this.isCollapsed=true;}};},decomposeControlRange:function(_148){var _149=_148.item(0),_14a=_148.item(_148.length-1);var _14b=_149.parentNode,_14c=_14a.parentNode;var _14d=_12d.range.getIndex(_149,_14b).o[0];var _14e=_12d.range.getIndex(_14a,_14c).o[0]+1;return [_14b,_14d,_14c,_14e];},getEndPoint:function(_14f,end){var _150=_14f.duplicate();_150.collapse(!end);var _151="EndTo"+(end?"End":"Start");var _152=_150.parentElement();var _153,_154,_155;if(_152.childNodes.length>0){_12b.every(_152.childNodes,function(node,i){var _156;if(node.nodeType!=3){_150.moveToElementText(node);if(_150.compareEndPoints(_151,_14f)>0){if(_155&&_155.nodeType==3){_153=_155;_156=true;}else{_153=_152;_154=i;return false;}}else{if(i==_152.childNodes.length-1){_153=_152;_154=_152.childNodes.length;return false;}}}else{if(i==_152.childNodes.length-1){_153=node;_156=true;}}if(_156&&_153){var _157=_12d.range.adjacentNoneTextNode(_153)[0];if(_157){_153=_157.nextSibling;}else{_153=_152.firstChild;}var _158=_12d.range.adjacentNoneTextNode(_153);_157=_158[0];var _159=_158[1];if(_157){_150.moveToElementText(_157);_150.collapse(false);}else{_150.moveToElementText(_152);}_150.setEndPoint(_151,_14f);_154=_150.text.length-_159;return false;}_155=node;return true;});}else{_153=_152;_154=0;}if(!end&&_153.nodeType==1&&_154==_153.childNodes.length){var _15a=_153.nextSibling;if(_15a&&_15a.nodeType==3){_153=_15a;_154=0;}}return [_153,_154];},setEndPoint:function(_15b,_15c,_15d){var _15e=_15b.duplicate(),node,len;if(_15c.nodeType!=3){if(_15d>0){node=_15c.childNodes[_15d-1];if(node){if(node.nodeType==3){_15c=node;_15d=node.length;}else{if(node.nextSibling&&node.nextSibling.nodeType==3){_15c=node.nextSibling;_15d=0;}else{_15e.moveToElementText(node.nextSibling?node:_15c);var _15f=node.parentNode;var _160=_15f.insertBefore(node.ownerDocument.createTextNode(" "),node.nextSibling);_15e.collapse(false);_15f.removeChild(_160);}}}}else{_15e.moveToElementText(_15c);_15e.collapse(true);}}if(_15c.nodeType==3){var _161=_12d.range.adjacentNoneTextNode(_15c);var _162=_161[0];len=_161[1];if(_162){_15e.moveToElementText(_162);_15e.collapse(false);if(_162.contentEditable!="inherit"){len++;}}else{_15e.moveToElementText(_15c.parentNode);_15e.collapse(true);_15e.move("character",1);_15e.move("character",-1);}_15d+=len;if(_15d>0){if(_15e.move("character",_15d)!=_15d){console.error("Error when moving!");}}}return _15e;},decomposeTextRange:function(_163){var _164=_12d.range.ie.getEndPoint(_163);var _165=_164[0],_166=_164[1];var _167=_164[0],_168=_164[1];if(_163.htmlText.length){if(_163.htmlText==_163.text){_168=_166+_163.text.length;}else{_164=_12d.range.ie.getEndPoint(_163,true);_167=_164[0],_168=_164[1];}}return [_165,_166,_167,_168];},setRange:function(_169,_16a,_16b,_16c,_16d,_16e){var _16f=_12d.range.ie.setEndPoint(_169,_16a,_16b);_169.setEndPoint("StartToStart",_16f);if(!_16e){var end=_12d.range.ie.setEndPoint(_169,_16c,_16d);}_169.setEndPoint("EndToEnd",end||_16f);return _169;}};_12c("dijit.range.W3CRange",null,{constructor:function(){if(arguments.length>0){this.setStart(arguments[0][0],arguments[0][1]);this.setEnd(arguments[0][2],arguments[0][3]);}else{this.commonAncestorContainer=null;this.startContainer=null;this.startOffset=0;this.endContainer=null;this.endOffset=0;this.collapsed=true;}},_updateInternal:function(){if(this.startContainer!==this.endContainer){this.commonAncestorContainer=_12d.range.getCommonAncestor(this.startContainer,this.endContainer);}else{this.commonAncestorContainer=this.startContainer;}this.collapsed=(this.startContainer===this.endContainer)&&(this.startOffset==this.endOffset);},setStart:function(node,_170){_170=parseInt(_170);if(this.startContainer===node&&this.startOffset==_170){return;}delete this._cachedBookmark;this.startContainer=node;this.startOffset=_170;if(!this.endContainer){this.setEnd(node,_170);}else{this._updateInternal();}},setEnd:function(node,_171){_171=parseInt(_171);if(this.endContainer===node&&this.endOffset==_171){return;}delete this._cachedBookmark;this.endContainer=node;this.endOffset=_171;if(!this.startContainer){this.setStart(node,_171);}else{this._updateInternal();}},setStartAfter:function(node,_172){this._setPoint("setStart",node,_172,1);},setStartBefore:function(node,_173){this._setPoint("setStart",node,_173,0);},setEndAfter:function(node,_174){this._setPoint("setEnd",node,_174,1);},setEndBefore:function(node,_175){this._setPoint("setEnd",node,_175,0);},_setPoint:function(what,node,_176,ext){var _177=_12d.range.getIndex(node,node.parentNode).o;this[what](node.parentNode,_177.pop()+ext);},_getIERange:function(){var r=(this._body||this.endContainer.ownerDocument.body).createTextRange();_12d.range.ie.setRange(r,this.startContainer,this.startOffset,this.endContainer,this.endOffset,this.collapsed);return r;},getBookmark:function(){this._getIERange();return this._cachedBookmark;},_select:function(){var r=this._getIERange();r.select();},deleteContents:function(){var s=this.startContainer,r=this._getIERange();if(s.nodeType===3&&!this.startOffset){this.setStartBefore(s);}r.pasteHTML("");this.endContainer=this.startContainer;this.endOffset=this.startOffset;this.collapsed=true;},cloneRange:function(){var r=new _12d.range.W3CRange([this.startContainer,this.startOffset,this.endContainer,this.endOffset]);r._body=this._body;return r;},detach:function(){this._body=null;this.commonAncestorContainer=null;this.startContainer=null;this.startOffset=0;this.endContainer=null;this.endOffset=0;this.collapsed=true;}});}return _12d.range;});},"dojox/date/islamic/Date":function(){define("dojox/date/islamic/Date",["dojo/_base/lang","dojo/_base/declare","dojo/date"],function(lang,_178,dd){var _179=_178("dojox.date.islamic.Date",null,{_date:0,_month:0,_year:0,_hours:0,_minutes:0,_seconds:0,_milliseconds:0,_day:0,_GREGORIAN_EPOCH:1721425.5,_ISLAMIC_EPOCH:1948439.5,constructor:function(){var len=arguments.length;if(!len){this.fromGregorian(new Date());}else{if(len==1){var arg0=arguments[0];if(typeof arg0=="number"){arg0=new Date(arg0);}if(arg0 instanceof Date){this.fromGregorian(arg0);}else{if(arg0==""){this._date=new Date("");}else{this._year=arg0._year;this._month=arg0._month;this._date=arg0._date;this._hours=arg0._hours;this._minutes=arg0._minutes;this._seconds=arg0._seconds;this._milliseconds=arg0._milliseconds;}}}else{if(len>=3){this._year+=arguments[0];this._month+=arguments[1];this._date+=arguments[2];this._hours+=arguments[3]||0;this._minutes+=arguments[4]||0;this._seconds+=arguments[5]||0;this._milliseconds+=arguments[6]||0;}}}},getDate:function(){return this._date;},getMonth:function(){return this._month;},getFullYear:function(){return this._year;},getDay:function(){return this.toGregorian().getDay();},getHours:function(){return this._hours;},getMinutes:function(){return this._minutes;},getSeconds:function(){return this._seconds;},getMilliseconds:function(){return this._milliseconds;},setDate:function(date){date=parseInt(date);if(date>0&&date<=this.getDaysInIslamicMonth(this._month,this._year)){this._date=date;}else{var _17a;if(date>0){for(_17a=this.getDaysInIslamicMonth(this._month,this._year);date>_17a;date-=_17a,_17a=this.getDaysInIslamicMonth(this._month,this._year)){this._month++;if(this._month>=12){this._year++;this._month-=12;}}this._date=date;}else{for(_17a=this.getDaysInIslamicMonth((this._month-1)>=0?(this._month-1):11,((this._month-1)>=0)?this._year:this._year-1);date<=0;_17a=this.getDaysInIslamicMonth((this._month-1)>=0?(this._month-1):11,((this._month-1)>=0)?this._year:this._year-1)){this._month--;if(this._month<0){this._year--;this._month+=12;}date+=_17a;}this._date=date;}}return this;},setFullYear:function(year){this._year=+year;},setMonth:function(_17b){this._year+=Math.floor(_17b/12);if(_17b>0){this._month=Math.floor(_17b%12);}else{this._month=Math.floor(((_17b%12)+12)%12);}},setHours:function(){var _17c=arguments.length;var _17d=0;if(_17c>=1){_17d=parseInt(arguments[0]);}if(_17c>=2){this._minutes=parseInt(arguments[1]);}if(_17c>=3){this._seconds=parseInt(arguments[2]);}if(_17c==4){this._milliseconds=parseInt(arguments[3]);}while(_17d>=24){this._date++;var _17e=this.getDaysInIslamicMonth(this._month,this._year);if(this._date>_17e){this._month++;if(this._month>=12){this._year++;this._month-=12;}this._date-=_17e;}_17d-=24;}this._hours=_17d;},_addMinutes:function(_17f){_17f+=this._minutes;this.setMinutes(_17f);this.setHours(this._hours+parseInt(_17f/60));return this;},_addSeconds:function(_180){_180+=this._seconds;this.setSeconds(_180);this._addMinutes(parseInt(_180/60));return this;},_addMilliseconds:function(_181){_181+=this._milliseconds;this.setMilliseconds(_181);this._addSeconds(parseInt(_181/1000));return this;},setMinutes:function(_182){this._minutes=_182%60;return this;},setSeconds:function(_183){this._seconds=_183%60;return this;},setMilliseconds:function(_184){this._milliseconds=_184%1000;return this;},toString:function(){if(isNaN(this._date)){return "Invalidate Date";}else{var x=new Date();x.setHours(this._hours);x.setMinutes(this._minutes);x.setSeconds(this._seconds);x.setMilliseconds(this._milliseconds);return this._month+" "+this._date+" "+this._year+" "+x.toTimeString();}},toGregorian:function(){var _185=this._year;var _186=this._month;var _187=this._date;var _188=_187+Math.ceil(29.5*_186)+(_185-1)*354+Math.floor((3+(11*_185))/30)+this._ISLAMIC_EPOCH-1;var wjd=Math.floor(_188-0.5)+0.5,_189=wjd-this._GREGORIAN_EPOCH,_18a=Math.floor(_189/146097),dqc=this._mod(_189,146097),cent=Math.floor(dqc/36524),_18b=this._mod(dqc,36524),quad=Math.floor(_18b/1461),_18c=this._mod(_18b,1461),_18d=Math.floor(_18c/365),year=(_18a*400)+(cent*100)+(quad*4)+_18d;if(!(cent==4||_18d==4)){year++;}var _18e=this._GREGORIAN_EPOCH+(365*(year-1))+Math.floor((year-1)/4)-(Math.floor((year-1)/100))+Math.floor((year-1)/400);var _18f=wjd-_18e;var tjd=(this._GREGORIAN_EPOCH-1)+(365*(year-1))+Math.floor((year-1)/4)-(Math.floor((year-1)/100))+Math.floor((year-1)/400)+Math.floor((739/12)+((dd.isLeapYear(new Date(year,3,1))?-1:-2))+1);var _190=((wjd<tjd)?0:(dd.isLeapYear(new Date(year,3,1))?1:2));var _191=Math.floor((((_18f+_190)*12)+373)/367);var tjd2=(this._GREGORIAN_EPOCH-1)+(365*(year-1))+Math.floor((year-1)/4)-(Math.floor((year-1)/100))+Math.floor((year-1)/400)+Math.floor((((367*_191)-362)/12)+((_191<=2)?0:(dd.isLeapYear(new Date(year,_191,1))?-1:-2))+1);var day=(wjd-tjd2)+1;var _192=new Date(year,(_191-1),day,this._hours,this._minutes,this._seconds,this._milliseconds);return _192;},fromGregorian:function(_193){var date=new Date(_193);var _194=date.getFullYear(),_195=date.getMonth(),gDay=date.getDate();var _196=(this._GREGORIAN_EPOCH-1)+(365*(_194-1))+Math.floor((_194-1)/4)+(-Math.floor((_194-1)/100))+Math.floor((_194-1)/400)+Math.floor((((367*(_195+1))-362)/12)+(((_195+1)<=2)?0:(dd.isLeapYear(date)?-1:-2))+gDay);_196=Math.floor(_196)+0.5;var days=_196-this._ISLAMIC_EPOCH;var _197=Math.floor((30*days+10646)/10631);var _198=Math.ceil((days-29-this._yearStart(_197))/29.5);_198=Math.min(_198,11);var hDay=Math.ceil(days-this._monthStart(_197,_198))+1;this._date=hDay;this._month=_198;this._year=_197;this._hours=date.getHours();this._minutes=date.getMinutes();this._seconds=date.getSeconds();this._milliseconds=date.getMilliseconds();this._day=date.getDay();return this;},valueOf:function(){return this.toGregorian().valueOf();},_yearStart:function(year){return (year-1)*354+Math.floor((3+11*year)/30);},_monthStart:function(year,_199){return Math.ceil(29.5*_199)+(year-1)*354+Math.floor((3+11*year)/30);},_civilLeapYear:function(year){return (14+11*year)%30<11;},getDaysInIslamicMonth:function(_19a,year){var _19b=0;_19b=29+((_19a+1)%2);if(_19a==11&&this._civilLeapYear(year)){_19b++;}return _19b;},_mod:function(a,b){return a-(b*Math.floor(a/b));}});_179.getDaysInIslamicMonth=function(_19c){return new _179().getDaysInIslamicMonth(_19c.getMonth(),_19c.getFullYear());};return _179;});},"esri/toolbars/edit":function(){define("esri/toolbars/edit",["dijit","dojo","dojox","dojo/require!esri/toolbars/_toolbar,esri/toolbars/_GraphicMover,esri/toolbars/_VertexEditor,esri/toolbars/_Box"],function(_19d,dojo,_19e){dojo.provide("esri.toolbars.edit");dojo.require("esri.toolbars._toolbar");dojo.require("esri.toolbars._GraphicMover");dojo.require("esri.toolbars._VertexEditor");dojo.require("esri.toolbars._Box");dojo.declare("esri.toolbars.Edit",esri.toolbars._Toolbar,{constructor:function(map,_19f){this._map=map;this._tool=0;this._scratchGL=map.graphics;var _1a0=esri.isTouchEnabled;this._defaultOptions=dojo.mixin({vertexSymbol:new esri.symbol.SimpleMarkerSymbol(esri.symbol.SimpleMarkerSymbol.STYLE_CIRCLE,_1a0?20:12,new esri.symbol.SimpleLineSymbol(esri.symbol.SimpleLineSymbol.STYLE_SOLID,new dojo.Color([0,0,0,0.5]),1),new dojo.Color([128,128,128])),ghostVertexSymbol:new esri.symbol.SimpleMarkerSymbol(esri.symbol.SimpleMarkerSymbol.STYLE_CIRCLE,_1a0?18:10,new esri.symbol.SimpleLineSymbol(esri.symbol.SimpleLineSymbol.STYLE_SOLID,new dojo.Color([0,0,0,0.5]),1),new dojo.Color([255,255,255,0.75])),ghostLineSymbol:new esri.symbol.SimpleLineSymbol(esri.symbol.SimpleLineSymbol.STYLE_DOT,new dojo.Color([128,128,128]),2),allowDeleteVertices:true,allowAddVertices:true,rotateHandleOffset:_1a0?24:16,boxLineSymbol:new esri.symbol.SimpleLineSymbol(esri.symbol.SimpleLineSymbol.STYLE_DASH,new dojo.Color([64,64,64]),1),boxHandleSymbol:new esri.symbol.SimpleMarkerSymbol(esri.symbol.SimpleMarkerSymbol.STYLE_SQUARE,_1a0?16:9,new esri.symbol.SimpleLineSymbol(esri.symbol.SimpleLineSymbol.STYLE_SOLID,new dojo.Color([0,0,0,0.5]),1),new dojo.Color([255,255,255,0.75]))},_19f||{});},activate:function(tool,_1a1,_1a2){this.deactivate();this._graphic=_1a1;this._options=dojo.mixin(dojo.mixin({},this._defaultOptions),_1a2||{});var MOVE=esri.toolbars.Edit.MOVE,EDIT=esri.toolbars.Edit.EDIT_VERTICES,_1a3=esri.toolbars.Edit.SCALE,_1a4=esri.toolbars.Edit.ROTATE,move=false,edit=false,box=false,map=this._map,_1a5=map.spatialReference,_1a6=_1a1.geometry.spatialReference;this._geo=!!(_1a5&&_1a6&&!_1a5.equals(_1a6)&&_1a5.isWebMercator()&&_1a6.wkid===4326);if((tool&MOVE)===MOVE){move=this._enableMove(_1a1);}var _1a7=((tool&_1a3)===_1a3),_1a8=((tool&_1a4)===_1a4);if(_1a7||_1a8){box=this._enableBoxEditing(_1a1,_1a7,_1a8);}if((tool&EDIT)===EDIT){edit=this._enableVertexEditing(_1a1);}if(!(move||edit||box)){throw new Error("[esri.toolbars.Edit::activate] "+esri.bundle.toolbars.edit.invalidType);}this._tool=tool;if(this._tool){this._mapPanEndHandle=dojo.connect(map,"onPanEnd",this,this._mapPanEndHandler);this._mapExtChgHandle=dojo.connect(map,"onExtentChange",this,this._mapExtentChangeHandler);this.onActivate(this._tool,_1a1);}if(map.snappingManager&&(move||edit)){map.snappingManager._startSelectionLayerQuery();}},deactivate:function(){var tool=this._tool,_1a9=this._graphic;if(!tool){return;}var _1aa=!!this._modified;this._clear();dojo.disconnect(this._mapPanEndHandle);dojo.disconnect(this._mapExtChgHandle);this._mapPanEndHandle=this._mapExtChgHandle=null;this._graphic=this._geo=null;this.onDeactivate(tool,_1a9,{isModified:_1aa});if(this._map.snappingManager){this._map.snappingManager._stopSelectionLayerQuery();}},refresh:function(){this._refreshMoveables(true);},getCurrentState:function(){return {tool:this._tool,graphic:this._graphic,isModified:!!this._modified};},onActivate:function(tool,_1ab){},onDeactivate:function(tool,_1ac,info){},onGraphicMoveStart:function(_1ad){},onGraphicFirstMove:function(_1ae){this._modified=true;},onGraphicMove:function(_1af,_1b0){},onGraphicMoveStop:function(_1b1,_1b2){},onGraphicClick:function(_1b3,info){},onVertexMoveStart:function(_1b4,_1b5){},onVertexFirstMove:function(_1b6,_1b7){this._modified=true;},onVertexMove:function(_1b8,_1b9,_1ba){},onVertexMoveStop:function(_1bb,_1bc,_1bd){},onVertexAdd:function(_1be,_1bf){this._modified=true;},onVertexClick:function(_1c0,_1c1){},onVertexMouseOver:function(_1c2,_1c3){},onVertexMouseOut:function(_1c4,_1c5){},onVertexDelete:function(_1c6,_1c7){this._modified=true;},onScaleStart:function(_1c8){},onScaleFirstMove:function(_1c9){this._modified=true;},onScale:function(_1ca,info){},onScaleStop:function(_1cb,info){},onRotateStart:function(_1cc){},onRotateFirstMove:function(_1cd){this._modified=true;},onRotate:function(_1ce,info){},onRotateStop:function(_1cf,info){},_enableMove:function(_1d0){var map=this._map,type=_1d0.geometry.type;switch(type){case "point":case "polyline":case "polygon":this._graphicMover=new esri.toolbars._GraphicMover(_1d0,map,this);return true;case "multipoint":break;}return false;},_enableVertexEditing:function(_1d1){var map=this._map,type=_1d1.geometry.type;switch(type){case "point":break;case "multipoint":case "polyline":case "polygon":this._vertexEditor=esri.toolbars._GraphicVertexEditor.create(_1d1,map,this);return true;}return false;},_enableBoxEditing:function(_1d2,_1d3,_1d4){var map=this._map,type=_1d2.geometry.type;switch(type){case "point":case "multipoint":break;case "polyline":case "polygon":this._boxEditor=new esri.toolbars._Box(_1d2,map,this,_1d3,_1d4,this._options.uniformScaling);return true;}return false;},_disableMove:function(){var _1d5=this._graphicMover;if(_1d5){_1d5.destroy();this._graphicMover=null;}},_disableVertexEditing:function(){var _1d6=this._vertexEditor;if(_1d6){_1d6.destroy();this._vertexEditor=null;}},_disableBoxEditing:function(){var box=this._boxEditor;if(box){box.destroy();this._boxEditor=null;}},_clear:function(){this._disableMove();this._disableVertexEditing();this._disableBoxEditing();this._tool=0;this._modified=false;},_mapPanEndHandler:function(){this._refreshMoveables();},_mapExtentChangeHandler:function(e,d,_1d7){if(_1d7){this._refreshMoveables();}},_refreshMoveables:function(_1d8){var _1d9=dojo.filter([this._graphicMover,this._vertexEditor,this._boxEditor],esri._isDefined);dojo.forEach(_1d9,function(mov){mov.refresh(_1d8);});},_beginOperation:function(_1da){dojo.forEach(this._getAffectedTools(_1da),function(tool){tool.suspend();});},_endOperation:function(_1db){dojo.forEach(this._getAffectedTools(_1db),function(tool){tool.resume();});},_getAffectedTools:function(_1dc){var _1dd=[];switch(_1dc){case "MOVE":_1dd=[this._vertexEditor,this._boxEditor];break;case "VERTICES":_1dd=[this._boxEditor];break;case "BOX":_1dd=[this._vertexEditor];break;}_1dd=dojo.filter(_1dd,esri._isDefined);return _1dd;}});dojo.mixin(esri.toolbars.Edit,{MOVE:1,EDIT_VERTICES:2,SCALE:4,ROTATE:8});});},"dojox/html/metrics":function(){define("dojox/html/metrics",["dojo/_base/kernel","dojo/_base/lang","dojo/_base/sniff","dojo/ready","dojo/_base/unload","dojo/_base/window","dojo/dom-geometry"],function(_1de,lang,has,_1df,_1e0,_1e1,_1e2){var dhm=lang.getObject("dojox.html.metrics",true);var _1e3=lang.getObject("dojox");dhm.getFontMeasurements=function(){var _1e4={"1em":0,"1ex":0,"100%":0,"12pt":0,"16px":0,"xx-small":0,"x-small":0,"small":0,"medium":0,"large":0,"x-large":0,"xx-large":0};if(has("ie")){_1e1.doc.documentElement.style.fontSize="100%";}var div=_1e1.doc.createElement("div");var ds=div.style;ds.position="absolute";ds.left="-100px";ds.top="0";ds.width="30px";ds.height="1000em";ds.borderWidth="0";ds.margin="0";ds.padding="0";ds.outline="0";ds.lineHeight="1";ds.overflow="hidden";_1e1.body().appendChild(div);for(var p in _1e4){ds.fontSize=p;_1e4[p]=Math.round(div.offsetHeight*12/16)*16/12/1000;}_1e1.body().removeChild(div);div=null;return _1e4;};var _1e5=null;dhm.getCachedFontMeasurements=function(_1e6){if(_1e6||!_1e5){_1e5=dhm.getFontMeasurements();}return _1e5;};var _1e7=null,_1e8={};dhm.getTextBox=function(text,_1e9,_1ea){var m,s;if(!_1e7){m=_1e7=_1e1.doc.createElement("div");var c=_1e1.doc.createElement("div");c.appendChild(m);s=c.style;s.overflow="scroll";s.position="absolute";s.left="0px";s.top="-10000px";s.width="1px";s.height="1px";s.visibility="hidden";s.borderWidth="0";s.margin="0";s.padding="0";s.outline="0";_1e1.body().appendChild(c);}else{m=_1e7;}m.className="";s=m.style;s.borderWidth="0";s.margin="0";s.padding="0";s.outline="0";if(arguments.length>1&&_1e9){for(var i in _1e9){if(i in _1e8){continue;}s[i]=_1e9[i];}}if(arguments.length>2&&_1ea){m.className=_1ea;}m.innerHTML=text;var box=_1e2.position(m);box.w=m.parentNode.scrollWidth;return box;};var _1eb={w:16,h:16};dhm.getScrollbar=function(){return {w:_1eb.w,h:_1eb.h};};dhm._fontResizeNode=null;dhm.initOnFontResize=function(_1ec){var f=dhm._fontResizeNode=_1e1.doc.createElement("iframe");var fs=f.style;fs.position="absolute";fs.width="5em";fs.height="10em";fs.top="-10000px";fs.display="none";if(has("ie")){f.onreadystatechange=function(){if(f.contentWindow.document.readyState=="complete"){f.onresize=f.contentWindow.parent[_1e3._scopeName].html.metrics._fontresize;}};}else{f.onload=function(){f.contentWindow.onresize=f.contentWindow.parent[_1e3._scopeName].html.metrics._fontresize;};}f.setAttribute("src","javascript:'<html><head><script>if(\"loadFirebugConsole\" in window){window.loadFirebugConsole();}</script></head><body></body></html>'");_1e1.body().appendChild(f);dhm.initOnFontResize=function(){};};dhm.onFontResize=function(){};dhm._fontresize=function(){dhm.onFontResize();};_1e0.addOnUnload(function(){var f=dhm._fontResizeNode;if(f){if(has("ie")&&f.onresize){f.onresize=null;}else{if(f.contentWindow&&f.contentWindow.onresize){f.contentWindow.onresize=null;}}dhm._fontResizeNode=null;}});_1df(function(){try{var n=_1e1.doc.createElement("div");n.style.cssText="top:0;left:0;width:100px;height:100px;overflow:scroll;position:absolute;visibility:hidden;";_1e1.body().appendChild(n);_1eb.w=n.offsetWidth-n.clientWidth;_1eb.h=n.offsetHeight-n.clientHeight;_1e1.body().removeChild(n);delete n;}catch(e){}if("fontSizeWatch" in _1de.config&&!!_1de.config.fontSizeWatch){dhm.initOnFontResize();}});return dhm;});},"esri/dijit/editing/tools/SelectionTools":function(){define("esri/dijit/editing/tools/SelectionTools",["dijit","dojo","dojox","dojo/require!esri/dijit/editing/tools/ButtonToolBase"],function(_1ed,dojo,_1ee){dojo.require("esri.dijit.editing.tools.ButtonToolBase");dojo.provide("esri.dijit.editing.tools.SelectionTools");esri.dijit.editing.tools.SelectionTools={select:{id:"btnNewSelection",_enabledIcon:"toolbarIcon newSelectionIcon",_disabledIcon:"toolbarIcon newSelectionIcon",_drawType:esri.toolbars.Draw.EXTENT,_selectMethod:esri.layers.FeatureLayer.SELECTION_NEW,_label:"NLS_selectionNewLbl"},selectadd:{id:"btnAddToSelection",_enabledIcon:"toolbarIcon addToSelectionIcon",_disabledIcon:"toolbarIcon addToSelectionIcon",_drawType:esri.toolbars.Draw.EXTENT,_selectMethod:esri.layers.FeatureLayer.SELECTION_ADD,_label:"NLS_selectionAddLbl"},selectremove:{id:"btnSubtractFromSelection",_enabledIcon:"toolbarIcon removeFromSelectionIcon",_disabledIcon:"toolbarIcon removeFromSelectionIcon",_drawType:esri.toolbars.Draw.EXTENT,_selectMethod:esri.layers.FeatureLayer.SELECTION_SUBTRACT,_label:"NLS_selectionRemoveLbl"},selectClear:{id:"btnClearSelection",_enabledIcon:"toolbarIcon clearSelectionIcon",_disabledIcon:"toolbarIcon clearSelectionIcon",_enabled:false,_label:"NLS_selectionClearLbl"}};});},"dojox/charting/plot2d/Default":function(){define("dojox/charting/plot2d/Default",["dojo/_base/lang","dojo/_base/declare","dojo/_base/array","./CartesianBase","./_PlotEvents","./common","dojox/lang/functional","dojox/lang/functional/reversed","dojox/lang/utils","dojox/gfx/fx"],function(lang,_1ef,arr,_1f0,_1f1,dc,df,dfr,du,fx){var _1f2=dfr.lambda("item.purgeGroup()");var _1f3=1200;return _1ef("dojox.charting.plot2d.Default",[_1f0,_1f1],{defaultParams:{hAxis:"x",vAxis:"y",lines:true,areas:false,markers:false,tension:"",animate:false,enableCache:false,interpolate:false},optionalParams:{stroke:{},outline:{},shadow:{},fill:{},styleFunc:null,font:"",fontColor:"",marker:"",markerStroke:{},markerOutline:{},markerShadow:{},markerFill:{},markerFont:"",markerFontColor:""},constructor:function(_1f4,_1f5){this.opt=lang.clone(this.defaultParams);du.updateWithObject(this.opt,_1f5);du.updateWithPattern(this.opt,_1f5,this.optionalParams);this.series=[];this.hAxis=this.opt.hAxis;this.vAxis=this.opt.vAxis;this.animate=this.opt.animate;},createPath:function(run,_1f6,_1f7){var path;if(this.opt.enableCache&&run._pathFreePool.length>0){path=run._pathFreePool.pop();path.setShape(_1f7);_1f6.add(path);}else{path=_1f6.createPath(_1f7);}if(this.opt.enableCache){run._pathUsePool.push(path);}return path;},buildSegments:function(i,_1f8){var run=this.series[i],min=_1f8?Math.max(0,Math.floor(this._hScaler.bounds.from-1)):0,max=_1f8?Math.min(run.data.length,Math.ceil(this._hScaler.bounds.to)):run.data.length,rseg=null,_1f9=[];for(var j=min;j<max;j++){if(run.data[j]!=null&&(_1f8||run.data[j].y!=null)){if(!rseg){rseg=[];_1f9.push({index:j,rseg:rseg});}rseg.push((_1f8&&run.data[j].hasOwnProperty("y"))?run.data[j].y:run.data[j]);}else{if(!this.opt.interpolate||_1f8){rseg=null;}}}return _1f9;},render:function(dim,_1fa){if(this.zoom&&!this.isDataDirty()){return this.performZoom(dim,_1fa);}this.resetEvents();this.dirty=this.isDirty();var s;if(this.dirty){arr.forEach(this.series,_1f2);this._eventSeries={};this.cleanGroup();this.group.setTransform(null);s=this.group;df.forEachRev(this.series,function(item){item.cleanGroup(s);});}var t=this.chart.theme,_1fb,_1fc,_1fd,_1fe=this.events();for(var i=this.series.length-1;i>=0;--i){var run=this.series[i];if(!this.dirty&&!run.dirty){t.skip();this._reconnectEvents(run.name);continue;}run.cleanGroup();if(this.opt.enableCache){run._pathFreePool=(run._pathFreePool?run._pathFreePool:[]).concat(run._pathUsePool?run._pathUsePool:[]);run._pathUsePool=[];}if(!run.data.length){run.dirty=false;t.skip();continue;}var _1ff=t.next(this.opt.areas?"area":"line",[this.opt,run],true),_200,ht=this._hScaler.scaler.getTransformerFromModel(this._hScaler),vt=this._vScaler.scaler.getTransformerFromModel(this._vScaler),_201=this._eventSeries[run.name]=new Array(run.data.length);s=run.group;var _202=arr.some(run.data,function(item){return typeof item=="number"||(item&&!item.hasOwnProperty("x"));});var _203=this.buildSegments(i,_202);for(var seg=0;seg<_203.length;seg++){var _204=_203[seg];if(_202){_200=arr.map(_204.rseg,function(v,i){return {x:ht(i+_204.index+1)+_1fa.l,y:dim.height-_1fa.b-vt(v),data:v};},this);}else{_200=arr.map(_204.rseg,function(v){return {x:ht(v.x)+_1fa.l,y:dim.height-_1fa.b-vt(v.y),data:v};},this);}if(_202&&this.opt.interpolate){while(seg<_203.length){seg++;_204=_203[seg];if(_204){_200=_200.concat(arr.map(_204.rseg,function(v,i){return {x:ht(i+_204.index+1)+_1fa.l,y:dim.height-_1fa.b-vt(v),data:v};},this));}}}var _205=this.opt.tension?dc.curve(_200,this.opt.tension):"";if(this.opt.areas&&_200.length>1){var fill=this._plotFill(_1ff.series.fill,dim,_1fa),_206=lang.clone(_200);if(this.opt.tension){var _207="L"+_206[_206.length-1].x+","+(dim.height-_1fa.b)+" L"+_206[0].x+","+(dim.height-_1fa.b)+" L"+_206[0].x+","+_206[0].y;run.dyn.fill=s.createPath(_205+" "+_207).setFill(fill).getFill();}else{_206.push({x:_200[_200.length-1].x,y:dim.height-_1fa.b});_206.push({x:_200[0].x,y:dim.height-_1fa.b});_206.push(_200[0]);run.dyn.fill=s.createPolyline(_206).setFill(fill).getFill();}}if(this.opt.lines||this.opt.markers){_1fb=_1ff.series.stroke;if(_1ff.series.outline){_1fc=run.dyn.outline=dc.makeStroke(_1ff.series.outline);_1fc.width=2*_1fc.width+_1fb.width;}}if(this.opt.markers){run.dyn.marker=_1ff.symbol;}var _208=null,_209=null,_20a=null;if(_1fb&&_1ff.series.shadow&&_200.length>1){var _20b=_1ff.series.shadow,_20c=arr.map(_200,function(c){return {x:c.x+_20b.dx,y:c.y+_20b.dy};});if(this.opt.lines){if(this.opt.tension){run.dyn.shadow=s.createPath(dc.curve(_20c,this.opt.tension)).setStroke(_20b).getStroke();}else{run.dyn.shadow=s.createPolyline(_20c).setStroke(_20b).getStroke();}}if(this.opt.markers&&_1ff.marker.shadow){_20b=_1ff.marker.shadow;_20a=arr.map(_20c,function(c){return this.createPath(run,s,"M"+c.x+" "+c.y+" "+_1ff.symbol).setStroke(_20b).setFill(_20b.color);},this);}}if(this.opt.lines&&_200.length>1){if(_1fc){if(this.opt.tension){run.dyn.outline=s.createPath(_205).setStroke(_1fc).getStroke();}else{run.dyn.outline=s.createPolyline(_200).setStroke(_1fc).getStroke();}}if(this.opt.tension){run.dyn.stroke=s.createPath(_205).setStroke(_1fb).getStroke();}else{run.dyn.stroke=s.createPolyline(_200).setStroke(_1fb).getStroke();}}if(this.opt.markers){var _20d=_1ff;_208=new Array(_200.length);_209=new Array(_200.length);_1fc=null;if(_20d.marker.outline){_1fc=dc.makeStroke(_20d.marker.outline);_1fc.width=2*_1fc.width+(_20d.marker.stroke?_20d.marker.stroke.width:0);}arr.forEach(_200,function(c,i){if(this.opt.styleFunc||typeof c.data!="number"){var _20e=typeof c.data!="number"?[c.data]:[];if(this.opt.styleFunc){_20e.push(this.opt.styleFunc(c.data));}_20d=t.addMixin(_1ff,"marker",_20e,true);}else{_20d=t.post(_1ff,"marker");}var path="M"+c.x+" "+c.y+" "+_20d.symbol;if(_1fc){_209[i]=this.createPath(run,s,path).setStroke(_1fc);}_208[i]=this.createPath(run,s,path).setStroke(_20d.marker.stroke).setFill(_20d.marker.fill);},this);run.dyn.markerFill=_20d.marker.fill;run.dyn.markerStroke=_20d.marker.stroke;if(_1fe){arr.forEach(_208,function(s,i){var o={element:"marker",index:i+_204.index,run:run,shape:s,outline:_209[i]||null,shadow:_20a&&_20a[i]||null,cx:_200[i].x,cy:_200[i].y};if(_202){o.x=i+_204.index+1;o.y=_204.rseg[i];}else{o.x=_204.rseg[i].x;o.y=_204.rseg[i].y;}this._connectEvents(o);_201[i+_204.index]=o;},this);}else{delete this._eventSeries[run.name];}}}run.dirty=false;}if(this.animate){var _20f=this.group;fx.animateTransform(lang.delegate({shape:_20f,duration:_1f3,transform:[{name:"translate",start:[0,dim.height-_1fa.b],end:[0,0]},{name:"scale",start:[1,0],end:[1,1]},{name:"original"}]},this.animate)).play();}this.dirty=false;return this;}});});},"dijit/_editor/RichText":function(){define("dijit/_editor/RichText",["dojo/_base/array","dojo/_base/config","dojo/_base/declare","dojo/_base/Deferred","dojo/dom","dojo/dom-attr","dojo/dom-class","dojo/dom-construct","dojo/dom-geometry","dojo/dom-style","dojo/_base/event","dojo/_base/kernel","dojo/keys","dojo/_base/lang","dojo/on","dojo/query","dojo/ready","dojo/sniff","dojo/topic","dojo/_base/unload","dojo/_base/url","dojo/_base/window","../_Widget","../_CssStateMixin","./selection","./range","./html","../focus","../main"],function(_210,_211,_212,_213,dom,_214,_215,_216,_217,_218,_219,_21a,keys,lang,on,_21b,_21c,has,_21d,_21e,_21f,win,_220,_221,_222,_223,_224,_225,_226){var _227=_212("dijit._editor.RichText",[_220,_221],{constructor:function(_228){this.contentPreFilters=[];this.contentPostFilters=[];this.contentDomPreFilters=[];this.contentDomPostFilters=[];this.editingAreaStyleSheets=[];this.events=[].concat(this.events);this._keyHandlers={};if(_228&&lang.isString(_228.value)){this.value=_228.value;}this.onLoadDeferred=new _213();},baseClass:"dijitEditor",inheritWidth:false,focusOnLoad:false,name:"",styleSheets:"",height:"300px",minHeight:"1em",isClosed:true,isLoaded:false,_SEPARATOR:"@@**%%__RICHTEXTBOUNDRY__%%**@@",_NAME_CONTENT_SEP:"@@**%%:%%**@@",onLoadDeferred:null,isTabIndent:false,disableSpellCheck:false,postCreate:function(){if("textarea"===this.domNode.tagName.toLowerCase()){console.warn("RichText should not be used with the TEXTAREA tag.  See dijit._editor.RichText docs.");}this.contentPreFilters=[lang.hitch(this,"_preFixUrlAttributes")].concat(this.contentPreFilters);if(has("mozilla")){this.contentPreFilters=[this._normalizeFontStyle].concat(this.contentPreFilters);this.contentPostFilters=[this._removeMozBogus].concat(this.contentPostFilters);}if(has("webkit")){this.contentPreFilters=[this._removeWebkitBogus].concat(this.contentPreFilters);this.contentPostFilters=[this._removeWebkitBogus].concat(this.contentPostFilters);}if(has("ie")){this.contentPostFilters=[this._normalizeFontStyle].concat(this.contentPostFilters);this.contentDomPostFilters=[lang.hitch(this,this._stripBreakerNodes)].concat(this.contentDomPostFilters);}this.inherited(arguments);_21d.publish(_226._scopeName+"._editor.RichText::init",this);this.open();this.setupDefaultShortcuts();},setupDefaultShortcuts:function(){var exec=lang.hitch(this,function(cmd,arg){return function(){return !this.execCommand(cmd,arg);};});var _229={b:exec("bold"),i:exec("italic"),u:exec("underline"),a:exec("selectall"),s:function(){this.save(true);},m:function(){this.isTabIndent=!this.isTabIndent;},"1":exec("formatblock","h1"),"2":exec("formatblock","h2"),"3":exec("formatblock","h3"),"4":exec("formatblock","h4"),"\\":exec("insertunorderedlist")};if(!has("ie")){_229.Z=exec("redo");}var key;for(key in _229){this.addKeyHandler(key,true,false,_229[key]);}},events:["onKeyPress","onKeyDown","onKeyUp"],captureEvents:[],_editorCommandsLocalized:false,_localizeEditorCommands:function(){if(_227._editorCommandsLocalized){this._local2NativeFormatNames=_227._local2NativeFormatNames;this._native2LocalFormatNames=_227._native2LocalFormatNames;return;}_227._editorCommandsLocalized=true;_227._local2NativeFormatNames={};_227._native2LocalFormatNames={};this._local2NativeFormatNames=_227._local2NativeFormatNames;this._native2LocalFormatNames=_227._native2LocalFormatNames;var _22a=["div","p","pre","h1","h2","h3","h4","h5","h6","ol","ul","address"];var _22b="",_22c,i=0;while((_22c=_22a[i++])){if(_22c.charAt(1)!=="l"){_22b+="<"+_22c+"><span>content</span></"+_22c+"><br/>";}else{_22b+="<"+_22c+"><li>content</li></"+_22c+"><br/>";}}var _22d={position:"absolute",top:"0px",zIndex:10,opacity:0.01};var div=_216.create("div",{style:_22d,innerHTML:_22b});this.ownerDocumentBody.appendChild(div);var _22e=lang.hitch(this,function(){var node=div.firstChild;while(node){try{this._sCall("selectElement",[node.firstChild]);var _22f=node.tagName.toLowerCase();this._local2NativeFormatNames[_22f]=document.queryCommandValue("formatblock");this._native2LocalFormatNames[this._local2NativeFormatNames[_22f]]=_22f;node=node.nextSibling.nextSibling;}catch(e){}}_216.destroy(div);});this.defer(_22e);},open:function(_230){if(!this.onLoadDeferred||this.onLoadDeferred.fired>=0){this.onLoadDeferred=new _213();}if(!this.isClosed){this.close();}_21d.publish(_226._scopeName+"._editor.RichText::open",this);if(arguments.length===1&&_230.nodeName){this.domNode=_230;}var dn=this.domNode;var html;if(lang.isString(this.value)){html=this.value;delete this.value;dn.innerHTML="";}else{if(dn.nodeName&&dn.nodeName.toLowerCase()=="textarea"){var ta=(this.textarea=dn);this.name=ta.name;html=ta.value;dn=this.domNode=this.ownerDocument.createElement("div");dn.setAttribute("widgetId",this.id);ta.removeAttribute("widgetId");dn.cssText=ta.cssText;dn.className+=" "+ta.className;_216.place(dn,ta,"before");var _231=lang.hitch(this,function(){_218.set(ta,{display:"block",position:"absolute",top:"-1000px"});if(has("ie")){var s=ta.style;this.__overflow=s.overflow;s.overflow="hidden";}});if(has("ie")){this.defer(_231,10);}else{_231();}if(ta.form){var _232=ta.value;this.reset=function(){var _233=this.getValue();if(_233!==_232){this.replaceValue(_232);}};on(ta.form,"submit",lang.hitch(this,function(){_214.set(ta,"disabled",this.disabled);ta.value=this.getValue();}));}}else{html=_224.getChildrenHtml(dn);dn.innerHTML="";}}this.value=html;if(dn.nodeName&&dn.nodeName==="LI"){dn.innerHTML=" <br>";}this.header=dn.ownerDocument.createElement("div");dn.appendChild(this.header);this.editingArea=dn.ownerDocument.createElement("div");dn.appendChild(this.editingArea);this.footer=dn.ownerDocument.createElement("div");dn.appendChild(this.footer);if(!this.name){this.name=this.id+"_AUTOGEN";}if(this.name!==""&&(!_211["useXDomain"]||_211["allowXdRichTextSave"])){var _234=dom.byId(_226._scopeName+"._editor.RichText.value");if(_234&&_234.value!==""){var _235=_234.value.split(this._SEPARATOR),i=0,dat;while((dat=_235[i++])){var data=dat.split(this._NAME_CONTENT_SEP);if(data[0]===this.name){html=data[1];_235=_235.splice(i,1);_234.value=_235.join(this._SEPARATOR);break;}}}if(!_227._globalSaveHandler){_227._globalSaveHandler={};_21e.addOnUnload(function(){var id;for(id in _227._globalSaveHandler){var f=_227._globalSaveHandler[id];if(lang.isFunction(f)){f();}}});}_227._globalSaveHandler[this.id]=lang.hitch(this,"_saveContent");}this.isClosed=false;var ifr=(this.editorObject=this.iframe=this.ownerDocument.createElement("iframe"));ifr.id=this.id+"_iframe";ifr.style.border="none";ifr.style.width="100%";if(this._layoutMode){ifr.style.height="100%";}else{if(has("ie")>=7){if(this.height){ifr.style.height=this.height;}if(this.minHeight){ifr.style.minHeight=this.minHeight;}}else{ifr.style.height=this.height?this.height:this.minHeight;}}ifr.frameBorder=0;ifr._loadFunc=lang.hitch(this,function(w){this.window=w;this.document=this.window.document;if(has("ie")){this._localizeEditorCommands();}this.onLoad(html);});var src=this._getIframeDocTxt(),s="javascript: '"+src.replace(/\\/g,"\\\\").replace(/'/g,"\\'")+"'";ifr.setAttribute("src",s);this.editingArea.appendChild(ifr);if(has("safari")<=4){src=ifr.getAttribute("src");if(!src||src.indexOf("javascript")===-1){this.defer(function(){ifr.setAttribute("src",s);});}}if(dn.nodeName==="LI"){dn.lastChild.style.marginTop="-1.2em";}_215.add(this.domNode,this.baseClass);},_local2NativeFormatNames:{},_native2LocalFormatNames:{},_getIframeDocTxt:function(){var _236=_218.getComputedStyle(this.domNode);var html="";var _237=true;if(has("ie")||has("webkit")||(!this.height&&!has("mozilla"))){html="<div id='dijitEditorBody'></div>";_237=false;}else{if(has("mozilla")){this._cursorToStart=true;html="&#160;";}}var font=[_236.fontWeight,_236.fontSize,_236.fontFamily].join(" ");var _238=_236.lineHeight;if(_238.indexOf("px")>=0){_238=parseFloat(_238)/parseFloat(_236.fontSize);}else{if(_238.indexOf("em")>=0){_238=parseFloat(_238);}else{_238="normal";}}var _239="";var self=this;this.style.replace(/(^|;)\s*(line-|font-?)[^;]+/ig,function(_23a){_23a=_23a.replace(/^;/ig,"")+";";var s=_23a.split(":")[0];if(s){s=lang.trim(s);s=s.toLowerCase();var i;var sC="";for(i=0;i<s.length;i++){var c=s.charAt(i);switch(c){case "-":i++;c=s.charAt(i).toUpperCase();default:sC+=c;}}_218.set(self.domNode,sC,"");}_239+=_23a+";";});var _23b=_21b("label[for=\""+this.id+"\"]");return [this.isLeftToRight()?"<html>\n<head>\n":"<html dir='rtl'>\n<head>\n",(has("mozilla")&&_23b.length?"<title>"+_23b[0].innerHTML+"</title>\n":""),"<meta http-equiv='Content-Type' content='text/html'>\n","<style>\n","\tbody,html {\n","\t\tbackground:transparent;\n","\t\tpadding: 1px 0 0 0;\n","\t\tmargin: -1px 0 0 0;\n",((has("webkit"))?"\t\twidth: 100%;\n":""),((has("webkit"))?"\t\theight: 100%;\n":""),"\t}\n","\tbody{\n","\t\ttop:0px;\n","\t\tleft:0px;\n","\t\tright:0px;\n","\t\tfont:",font,";\n",((this.height||has("opera"))?"":"\t\tposition: fixed;\n"),"\t\tmin-height:",this.minHeight,";\n","\t\tline-height:",_238,";\n","\t}\n","\tp{ margin: 1em 0; }\n",(!_237&&!this.height?"\tbody,html {overflow-y: hidden;}\n":""),"\t#dijitEditorBody{overflow-x: auto; overflow-y:"+(this.height?"auto;":"hidden;")+" outline: 0px;}\n","\tli > ul:-moz-first-node, li > ol:-moz-first-node{ padding-top: 1.2em; }\n",(!has("ie")?"\tli{ min-height:1.2em; }\n":""),"</style>\n",this._applyEditingAreaStyleSheets(),"\n","</head>\n<body ",(_237?"id='dijitEditorBody' ":""),"onload='frameElement && frameElement._loadFunc(window,document)' ","style='"+_239+"'>",html,"</body>\n</html>"].join("");},_applyEditingAreaStyleSheets:function(){var _23c=[];if(this.styleSheets){_23c=this.styleSheets.split(";");this.styleSheets="";}_23c=_23c.concat(this.editingAreaStyleSheets);this.editingAreaStyleSheets=[];var text="",i=0,url;while((url=_23c[i++])){var _23d=(new _21f(win.global.location,url)).toString();this.editingAreaStyleSheets.push(_23d);text+="<link rel=\"stylesheet\" type=\"text/css\" href=\""+_23d+"\"/>";}return text;},addStyleSheet:function(uri){var url=uri.toString();if(url.charAt(0)==="."||(url.charAt(0)!=="/"&&!uri.host)){url=(new _21f(win.global.location,url)).toString();}if(_210.indexOf(this.editingAreaStyleSheets,url)>-1){return;}this.editingAreaStyleSheets.push(url);this.onLoadDeferred.then(lang.hitch(this,function(){if(this.document.createStyleSheet){this.document.createStyleSheet(url);}else{var head=this.document.getElementsByTagName("head")[0];var _23e=this.document.createElement("link");_23e.rel="stylesheet";_23e.type="text/css";_23e.href=url;head.appendChild(_23e);}}));},removeStyleSheet:function(uri){var url=uri.toString();if(url.charAt(0)==="."||(url.charAt(0)!=="/"&&!uri.host)){url=(new _21f(win.global.location,url)).toString();}var _23f=_210.indexOf(this.editingAreaStyleSheets,url);if(_23f===-1){return;}delete this.editingAreaStyleSheets[_23f];_21b("link:[href=\""+url+"\"]",this.window.document).orphan();},disabled:false,_mozSettingProps:{"styleWithCSS":false},_setDisabledAttr:function(_240){_240=!!_240;this._set("disabled",_240);if(!this.isLoaded){return;}if(has("ie")||has("webkit")||has("opera")){var _241=has("ie")&&(this.isLoaded||!this.focusOnLoad);if(_241){this.editNode.unselectable="on";}this.editNode.contentEditable=!_240;if(_241){this.defer(function(){if(this.editNode){this.editNode.unselectable="off";}});}}else{try{this.document.designMode=(_240?"off":"on");}catch(e){return;}if(!_240&&this._mozSettingProps){var ps=this._mozSettingProps;var n;for(n in ps){if(ps.hasOwnProperty(n)){try{this.document.execCommand(n,false,ps[n]);}catch(e2){}}}}}this._disabledOK=true;},onLoad:function(html){if(!this.window.__registeredWindow){this.window.__registeredWindow=true;this._iframeRegHandle=_225.registerIframe(this.iframe);}if(!has("ie")&&!has("webkit")&&(this.height||has("mozilla"))){this.editNode=this.document.body;}else{this.editNode=this.document.body.firstChild;var _242=this;if(has("ie")){this.tabStop=_216.create("div",{tabIndex:-1},this.editingArea);this.iframe.onfocus=function(){_242.editNode.setActive();};}}this.focusNode=this.editNode;var _243=this.events.concat(this.captureEvents);var ap=this.iframe?this.document:this.editNode;_210.forEach(_243,function(item){this.connect(ap,item.toLowerCase(),item);},this);this.connect(ap,"onmouseup","onClick");if(has("ie")){this.connect(this.document,"onmousedown","_onIEMouseDown");this.editNode.style.zoom=1;}else{this.connect(this.document,"onmousedown",function(){delete this._cursorToStart;});}if(has("webkit")){this._webkitListener=this.connect(this.document,"onmouseup","onDisplayChanged");this.connect(this.document,"onmousedown",function(e){var t=e.target;if(t&&(t===this.document.body||t===this.document)){this.defer("placeCursorAtEnd");}});}if(has("ie")){try{this.document.execCommand("RespectVisibilityInDesign",true,null);}catch(e){}}this.isLoaded=true;this.set("disabled",this.disabled);var _244=lang.hitch(this,function(){this.setValue(html);if(this.onLoadDeferred){this.onLoadDeferred.resolve(true);}this.onDisplayChanged();if(this.focusOnLoad){_21c(lang.hitch(this,"defer","focus",this.updateInterval));}this.value=this.getValue(true);});if(this.setValueDeferred){this.setValueDeferred.then(_244);}else{_244();}},onKeyDown:function(e){if(e.keyCode===keys.TAB&&this.isTabIndent){_219.stop(e);if(this.queryCommandEnabled((e.shiftKey?"outdent":"indent"))){this.execCommand((e.shiftKey?"outdent":"indent"));}}if(has("ie")){if(e.keyCode==keys.TAB&&!this.isTabIndent){if(e.shiftKey&&!e.ctrlKey&&!e.altKey){this.iframe.focus();}else{if(!e.shiftKey&&!e.ctrlKey&&!e.altKey){this.tabStop.focus();}}}else{if(e.keyCode===keys.BACKSPACE&&this.document.selection.type==="Control"){_219.stop(e);this.execCommand("delete");}else{if((65<=e.keyCode&&e.keyCode<=90)||(e.keyCode>=37&&e.keyCode<=40)){e.charCode=e.keyCode;this.onKeyPress(e);}}}}if(has("ff")){if(e.keyCode===keys.PAGE_UP||e.keyCode===keys.PAGE_DOWN){if(this.editNode.clientHeight>=this.editNode.scrollHeight){e.preventDefault();}}}return true;},onKeyUp:function(){},setDisabled:function(_245){_21a.deprecated("dijit.Editor::setDisabled is deprecated","use dijit.Editor::attr(\"disabled\",boolean) instead",2);this.set("disabled",_245);},_setValueAttr:function(_246){this.setValue(_246);},_setDisableSpellCheckAttr:function(_247){if(this.document){_214.set(this.document.body,"spellcheck",!_247);}else{this.onLoadDeferred.then(lang.hitch(this,function(){_214.set(this.document.body,"spellcheck",!_247);}));}this._set("disableSpellCheck",_247);},onKeyPress:function(e){var c=(e.keyChar&&e.keyChar.toLowerCase())||e.keyCode,_248=this._keyHandlers[c],args=arguments;if(_248&&!e.altKey){_210.some(_248,function(h){if(!(h.shift^e.shiftKey)&&!(h.ctrl^(e.ctrlKey||e.metaKey))){if(!h.handler.apply(this,args)){e.preventDefault();}return true;}},this);}if(!this._onKeyHitch){this._onKeyHitch=lang.hitch(this,"onKeyPressed");}this.defer("_onKeyHitch",1);return true;},addKeyHandler:function(key,ctrl,_249,_24a){if(!lang.isArray(this._keyHandlers[key])){this._keyHandlers[key]=[];}this._keyHandlers[key].push({shift:_249||false,ctrl:ctrl||false,handler:_24a});},onKeyPressed:function(){this.onDisplayChanged();},onClick:function(e){this.onDisplayChanged(e);},_onIEMouseDown:function(){if(!this.focused&&!this.disabled){this.focus();}},_onBlur:function(e){this.inherited(arguments);var _24b=this.getValue(true);if(_24b!==this.value){this.onChange(_24b);}this._set("value",_24b);},_onFocus:function(e){if(!this.disabled){if(!this._disabledOK){this.set("disabled",false);}this.inherited(arguments);}},blur:function(){if(!has("ie")&&this.window.document.documentElement&&this.window.document.documentElement.focus){this.window.document.documentElement.focus();}else{if(this.ownerDocumentBody.focus){this.ownerDocumentBody.focus();}}},focus:function(){if(!this.isLoaded){this.focusOnLoad=true;return;}if(this._cursorToStart){delete this._cursorToStart;if(this.editNode.childNodes){this.placeCursorAtStart();return;}}if(!has("ie")){_225.focus(this.iframe);}else{if(this.editNode&&this.editNode.focus){this.iframe.fireEvent("onfocus",document.createEventObject());}}},updateInterval:200,_updateTimer:null,onDisplayChanged:function(){if(this._updateTimer){this._updateTimer.remove();}this._updateTimer=this.defer("onNormalizedDisplayChanged",this.updateInterval);},onNormalizedDisplayChanged:function(){delete this._updateTimer;},onChange:function(){},_normalizeCommand:function(cmd,_24c){var _24d=cmd.toLowerCase();if(_24d==="formatblock"){if(has("safari")&&_24c===undefined){_24d="heading";}}else{if(_24d==="hilitecolor"&&!has("mozilla")){_24d="backcolor";}}return _24d;},_qcaCache:{},queryCommandAvailable:function(_24e){var ca=this._qcaCache[_24e];if(ca!==undefined){return ca;}return (this._qcaCache[_24e]=this._queryCommandAvailable(_24e));},_queryCommandAvailable:function(_24f){var ie=1;var _250=1<<1;var _251=1<<2;var _252=1<<3;function _253(_254){return {ie:Boolean(_254&ie),mozilla:Boolean(_254&_250),webkit:Boolean(_254&_251),opera:Boolean(_254&_252)};};var _255=null;switch(_24f.toLowerCase()){case "bold":case "italic":case "underline":case "subscript":case "superscript":case "fontname":case "fontsize":case "forecolor":case "hilitecolor":case "justifycenter":case "justifyfull":case "justifyleft":case "justifyright":case "delete":case "selectall":case "toggledir":_255=_253(_250|ie|_251|_252);break;case "createlink":case "unlink":case "removeformat":case "inserthorizontalrule":case "insertimage":case "insertorderedlist":case "insertunorderedlist":case "indent":case "outdent":case "formatblock":case "inserthtml":case "undo":case "redo":case "strikethrough":case "tabindent":_255=_253(_250|ie|_252|_251);break;case "blockdirltr":case "blockdirrtl":case "dirltr":case "dirrtl":case "inlinedirltr":case "inlinedirrtl":_255=_253(ie);break;case "cut":case "copy":case "paste":_255=_253(ie|_250|_251|_252);break;case "inserttable":_255=_253(_250|ie);break;case "insertcell":case "insertcol":case "insertrow":case "deletecells":case "deletecols":case "deleterows":case "mergecells":case "splitcell":_255=_253(ie|_250);break;default:return false;}return (has("ie")&&_255.ie)||(has("mozilla")&&_255.mozilla)||(has("webkit")&&_255.webkit)||(has("opera")&&_255.opera);},execCommand:function(_256,_257){var _258;this.focus();_256=this._normalizeCommand(_256,_257);if(_257!==undefined){if(_256==="heading"){throw new Error("unimplemented");}else{if((_256==="formatblock")&&has("ie")){_257="<"+_257+">";}}}var _259="_"+_256+"Impl";if(this[_259]){_258=this[_259](_257);}else{_257=arguments.length>1?_257:null;if(_257||_256!=="createlink"){_258=this.document.execCommand(_256,false,_257);}}this.onDisplayChanged();return _258;},queryCommandEnabled:function(_25a){if(this.disabled||!this._disabledOK){return false;}_25a=this._normalizeCommand(_25a);var _25b="_"+_25a+"EnabledImpl";if(this[_25b]){return this[_25b](_25a);}else{return this._browserQueryCommandEnabled(_25a);}},queryCommandState:function(_25c){if(this.disabled||!this._disabledOK){return false;}_25c=this._normalizeCommand(_25c);try{return this.document.queryCommandState(_25c);}catch(e){return false;}},queryCommandValue:function(_25d){if(this.disabled||!this._disabledOK){return false;}var r;_25d=this._normalizeCommand(_25d);if(has("ie")&&_25d==="formatblock"){r=this._native2LocalFormatNames[this.document.queryCommandValue(_25d)];}else{if(has("mozilla")&&_25d==="hilitecolor"){var _25e;try{_25e=this.document.queryCommandValue("styleWithCSS");}catch(e){_25e=false;}this.document.execCommand("styleWithCSS",false,true);r=this.document.queryCommandValue(_25d);this.document.execCommand("styleWithCSS",false,_25e);}else{r=this.document.queryCommandValue(_25d);}}return r;},_sCall:function(name,args){return win.withGlobal(this.window,name,_222,args);},placeCursorAtStart:function(){this.focus();var _25f=false;if(has("mozilla")){var _260=this.editNode.firstChild;while(_260){if(_260.nodeType===3){if(_260.nodeValue.replace(/^\s+|\s+$/g,"").length>0){_25f=true;this._sCall("selectElement",[_260]);break;}}else{if(_260.nodeType===1){_25f=true;var tg=_260.tagName?_260.tagName.toLowerCase():"";if(/br|input|img|base|meta|area|basefont|hr|link/.test(tg)){this._sCall("selectElement",[_260]);}else{this._sCall("selectElementChildren",[_260]);}break;}}_260=_260.nextSibling;}}else{_25f=true;this._sCall("selectElementChildren",[this.editNode]);}if(_25f){this._sCall("collapse",[true]);}},placeCursorAtEnd:function(){this.focus();var _261=false;if(has("mozilla")){var last=this.editNode.lastChild;while(last){if(last.nodeType===3){if(last.nodeValue.replace(/^\s+|\s+$/g,"").length>0){_261=true;this._sCall("selectElement",[last]);break;}}else{if(last.nodeType===1){_261=true;this._sCall("selectElement",[last.lastChild||last]);break;}}last=last.previousSibling;}}else{_261=true;this._sCall("selectElementChildren",[this.editNode]);}if(_261){this._sCall("collapse",[false]);}},getValue:function(_262){if(this.textarea){if(this.isClosed||!this.isLoaded){return this.textarea.value;}}return this._postFilterContent(null,_262);},_getValueAttr:function(){return this.getValue(true);},setValue:function(html){if(!this.isLoaded){this.onLoadDeferred.then(lang.hitch(this,function(){this.setValue(html);}));return;}this._cursorToStart=true;if(this.textarea&&(this.isClosed||!this.isLoaded)){this.textarea.value=html;}else{html=this._preFilterContent(html);var node=this.isClosed?this.domNode:this.editNode;if(html&&has("mozilla")&&html.toLowerCase()==="<p></p>"){html="<p>&#160;</p>";}if(!html&&has("webkit")){html="&#160;";}node.innerHTML=html;this._preDomFilterContent(node);}this.onDisplayChanged();this._set("value",this.getValue(true));},replaceValue:function(html){if(this.isClosed){this.setValue(html);}else{if(this.window&&this.window.getSelection&&!has("mozilla")){this.setValue(html);}else{if(this.window&&this.window.getSelection){html=this._preFilterContent(html);this.execCommand("selectall");if(!html){this._cursorToStart=true;html="&#160;";}this.execCommand("inserthtml",html);this._preDomFilterContent(this.editNode);}else{if(this.document&&this.document.selection){this.setValue(html);}}}}this._set("value",this.getValue(true));},_preFilterContent:function(html){var ec=html;_210.forEach(this.contentPreFilters,function(ef){if(ef){ec=ef(ec);}});return ec;},_preDomFilterContent:function(dom){dom=dom||this.editNode;_210.forEach(this.contentDomPreFilters,function(ef){if(ef&&lang.isFunction(ef)){ef(dom);}},this);},_postFilterContent:function(dom,_263){var ec;if(!lang.isString(dom)){dom=dom||this.editNode;if(this.contentDomPostFilters.length){if(_263){dom=lang.clone(dom);}_210.forEach(this.contentDomPostFilters,function(ef){dom=ef(dom);});}ec=_224.getChildrenHtml(dom);}else{ec=dom;}if(!lang.trim(ec.replace(/^\xA0\xA0*/,"").replace(/\xA0\xA0*$/,"")).length){ec="";}_210.forEach(this.contentPostFilters,function(ef){ec=ef(ec);});return ec;},_saveContent:function(){var _264=dom.byId(_226._scopeName+"._editor.RichText.value");if(_264){if(_264.value){_264.value+=this._SEPARATOR;}_264.value+=this.name+this._NAME_CONTENT_SEP+this.getValue(true);}},escapeXml:function(str,_265){str=str.replace(/&/gm,"&amp;").replace(/</gm,"&lt;").replace(/>/gm,"&gt;").replace(/"/gm,"&quot;");if(!_265){str=str.replace(/'/gm,"&#39;");}return str;},getNodeHtml:function(node){_21a.deprecated("dijit.Editor::getNodeHtml is deprecated","use dijit/_editor/html::getNodeHtml instead",2);return _224.getNodeHtml(node);},getNodeChildrenHtml:function(dom){_21a.deprecated("dijit.Editor::getNodeChildrenHtml is deprecated","use dijit/_editor/html::getChildrenHtml instead",2);return _224.getChildrenHtml(dom);},close:function(save){if(this.isClosed){return;}if(!arguments.length){save=true;}if(save){this._set("value",this.getValue(true));}if(this.interval){clearInterval(this.interval);}if(this._webkitListener){this.disconnect(this._webkitListener);delete this._webkitListener;}if(has("ie")){this.iframe.onfocus=null;}this.iframe._loadFunc=null;if(this._iframeRegHandle){this._iframeRegHandle.remove();delete this._iframeRegHandle;}if(this.textarea){var s=this.textarea.style;s.position="";s.left=s.top="";if(has("ie")){s.overflow=this.__overflow;this.__overflow=null;}this.textarea.value=this.value;_216.destroy(this.domNode);this.domNode=this.textarea;}else{this.domNode.innerHTML=this.value;}delete this.iframe;_215.remove(this.domNode,this.baseClass);this.isClosed=true;this.isLoaded=false;delete this.editNode;delete this.focusNode;if(this.window&&this.window._frameElement){this.window._frameElement=null;}this.window=null;this.document=null;this.editingArea=null;this.editorObject=null;},destroy:function(){if(!this.isClosed){this.close(false);}if(this._updateTimer){this._updateTimer.remove();}this.inherited(arguments);if(_227._globalSaveHandler){delete _227._globalSaveHandler[this.id];}},_removeMozBogus:function(html){return html.replace(/\stype="_moz"/gi,"").replace(/\s_moz_dirty=""/gi,"").replace(/_moz_resizing="(true|false)"/gi,"");},_removeWebkitBogus:function(html){html=html.replace(/\sclass="webkit-block-placeholder"/gi,"");html=html.replace(/\sclass="apple-style-span"/gi,"");html=html.replace(/<meta charset=\"utf-8\" \/>/gi,"");return html;},_normalizeFontStyle:function(html){return html.replace(/<(\/)?strong([ \>])/gi,"<$1b$2").replace(/<(\/)?em([ \>])/gi,"<$1i$2");},_preFixUrlAttributes:function(html){return html.replace(/(?:(<a(?=\s).*?\shref=)("|')(.*?)\2)|(?:(<a\s.*?href=)([^"'][^ >]+))/gi,"$1$4$2$3$5$2 _djrealurl=$2$3$5$2").replace(/(?:(<img(?=\s).*?\ssrc=)("|')(.*?)\2)|(?:(<img\s.*?src=)([^"'][^ >]+))/gi,"$1$4$2$3$5$2 _djrealurl=$2$3$5$2");},_browserQueryCommandEnabled:function(_266){if(!_266){return false;}var elem=has("ie")?this.document.selection.createRange():this.document;try{return elem.queryCommandEnabled(_266);}catch(e){return false;}},_createlinkEnabledImpl:function(){var _267=true;if(has("opera")){var sel=this.window.getSelection();if(sel.isCollapsed){_267=true;}else{_267=this.document.queryCommandEnabled("createlink");}}else{_267=this._browserQueryCommandEnabled("createlink");}return _267;},_unlinkEnabledImpl:function(){var _268=true;if(has("mozilla")||has("webkit")){_268=this._sCall("hasAncestorElement",["a"]);}else{_268=this._browserQueryCommandEnabled("unlink");}return _268;},_inserttableEnabledImpl:function(){var _269=true;if(has("mozilla")||has("webkit")){_269=true;}else{_269=this._browserQueryCommandEnabled("inserttable");}return _269;},_cutEnabledImpl:function(){var _26a=true;if(has("webkit")){var sel=this.window.getSelection();if(sel){sel=sel.toString();}_26a=!!sel;}else{_26a=this._browserQueryCommandEnabled("cut");}return _26a;},_copyEnabledImpl:function(){var _26b=true;if(has("webkit")){var sel=this.window.getSelection();if(sel){sel=sel.toString();}_26b=!!sel;}else{_26b=this._browserQueryCommandEnabled("copy");}return _26b;},_pasteEnabledImpl:function(){var _26c=true;if(has("webkit")){return true;}else{_26c=this._browserQueryCommandEnabled("paste");}return _26c;},_inserthorizontalruleImpl:function(_26d){if(has("ie")){return this._inserthtmlImpl("<hr>");}return this.document.execCommand("inserthorizontalrule",false,_26d);},_unlinkImpl:function(_26e){if((this.queryCommandEnabled("unlink"))&&(has("mozilla")||has("webkit"))){var a=this._sCall("getAncestorElement",["a"]);this._sCall("selectElement",[a]);return this.document.execCommand("unlink",false,null);}return this.document.execCommand("unlink",false,_26e);},_hilitecolorImpl:function(_26f){var _270;var _271=this._handleTextColorOrProperties("hilitecolor",_26f);if(!_271){if(has("mozilla")){this.document.execCommand("styleWithCSS",false,true);console.log("Executing color command.");_270=this.document.execCommand("hilitecolor",false,_26f);this.document.execCommand("styleWithCSS",false,false);}else{_270=this.document.execCommand("hilitecolor",false,_26f);}}return _270;},_backcolorImpl:function(_272){if(has("ie")){_272=_272?_272:null;}var _273=this._handleTextColorOrProperties("backcolor",_272);if(!_273){_273=this.document.execCommand("backcolor",false,_272);}return _273;},_forecolorImpl:function(_274){if(has("ie")){_274=_274?_274:null;}var _275=false;_275=this._handleTextColorOrProperties("forecolor",_274);if(!_275){_275=this.document.execCommand("forecolor",false,_274);}return _275;},_inserthtmlImpl:function(_276){_276=this._preFilterContent(_276);var rv=true;if(has("ie")){var _277=this.document.selection.createRange();if(this.document.selection.type.toUpperCase()==="CONTROL"){var n=_277.item(0);while(_277.length){_277.remove(_277.item(0));}n.outerHTML=_276;}else{_277.pasteHTML(_276);}_277.select();}else{if(has("mozilla")&&!_276.length){this._sCall("remove");}else{rv=this.document.execCommand("inserthtml",false,_276);}}return rv;},_boldImpl:function(_278){var _279=false;if(has("ie")){this._adaptIESelection();_279=this._adaptIEFormatAreaAndExec("bold");}if(!_279){_279=this.document.execCommand("bold",false,_278);}return _279;},_italicImpl:function(_27a){var _27b=false;if(has("ie")){this._adaptIESelection();_27b=this._adaptIEFormatAreaAndExec("italic");}if(!_27b){_27b=this.document.execCommand("italic",false,_27a);}return _27b;},_underlineImpl:function(_27c){var _27d=false;if(has("ie")){this._adaptIESelection();_27d=this._adaptIEFormatAreaAndExec("underline");}if(!_27d){_27d=this.document.execCommand("underline",false,_27c);}return _27d;},_strikethroughImpl:function(_27e){var _27f=false;if(has("ie")){this._adaptIESelection();_27f=this._adaptIEFormatAreaAndExec("strikethrough");}if(!_27f){_27f=this.document.execCommand("strikethrough",false,_27e);}return _27f;},_superscriptImpl:function(_280){var _281=false;if(has("ie")){this._adaptIESelection();_281=this._adaptIEFormatAreaAndExec("superscript");}if(!_281){_281=this.document.execCommand("superscript",false,_280);}return _281;},_subscriptImpl:function(_282){var _283=false;if(has("ie")){this._adaptIESelection();_283=this._adaptIEFormatAreaAndExec("subscript");}if(!_283){_283=this.document.execCommand("subscript",false,_282);}return _283;},_fontnameImpl:function(_284){var _285;if(has("ie")){_285=this._handleTextColorOrProperties("fontname",_284);}if(!_285){_285=this.document.execCommand("fontname",false,_284);}return _285;},_fontsizeImpl:function(_286){var _287;if(has("ie")){_287=this._handleTextColorOrProperties("fontsize",_286);}if(!_287){_287=this.document.execCommand("fontsize",false,_286);}return _287;},_insertorderedlistImpl:function(_288){var _289=false;if(has("ie")){_289=this._adaptIEList("insertorderedlist",_288);}if(!_289){_289=this.document.execCommand("insertorderedlist",false,_288);}return _289;},_insertunorderedlistImpl:function(_28a){var _28b=false;if(has("ie")){_28b=this._adaptIEList("insertunorderedlist",_28a);}if(!_28b){_28b=this.document.execCommand("insertunorderedlist",false,_28a);}return _28b;},getHeaderHeight:function(){return this._getNodeChildrenHeight(this.header);},getFooterHeight:function(){return this._getNodeChildrenHeight(this.footer);},_getNodeChildrenHeight:function(node){var h=0;if(node&&node.childNodes){var i;for(i=0;i<node.childNodes.length;i++){var size=_217.position(node.childNodes[i]);h+=size.h;}}return h;},_isNodeEmpty:function(node,_28c){if(node.nodeType===1){if(node.childNodes.length>0){return this._isNodeEmpty(node.childNodes[0],_28c);}return true;}else{if(node.nodeType===3){return (node.nodeValue.substring(_28c)==="");}}return false;},_removeStartingRangeFromRange:function(node,_28d){if(node.nextSibling){_28d.setStart(node.nextSibling,0);}else{var _28e=node.parentNode;while(_28e&&_28e.nextSibling==null){_28e=_28e.parentNode;}if(_28e){_28d.setStart(_28e.nextSibling,0);}}return _28d;},_adaptIESelection:function(){var _28f=_223.getSelection(this.window);if(_28f&&_28f.rangeCount&&!_28f.isCollapsed){var _290=_28f.getRangeAt(0);var _291=_290.startContainer;var _292=_290.startOffset;while(_291.nodeType===3&&_292>=_291.length&&_291.nextSibling){_292=_292-_291.length;_291=_291.nextSibling;}var _293=null;while(this._isNodeEmpty(_291,_292)&&_291!==_293){_293=_291;_290=this._removeStartingRangeFromRange(_291,_290);_291=_290.startContainer;_292=0;}_28f.removeAllRanges();_28f.addRange(_290);}},_adaptIEFormatAreaAndExec:function(_294){var _295=_223.getSelection(this.window);var doc=this.document;var rs,ret,_296,txt,_297,_298,_299,_29a;if(_294&&_295&&_295.isCollapsed){var _29b=this.queryCommandValue(_294);if(_29b){var _29c=this._tagNamesForCommand(_294);_296=_295.getRangeAt(0);var fs=_296.startContainer;if(fs.nodeType===3){var _29d=_296.endOffset;if(fs.length<_29d){ret=this._adjustNodeAndOffset(rs,_29d);fs=ret.node;_29d=ret.offset;}}var _29e;while(fs&&fs!==this.editNode){var _29f=fs.tagName?fs.tagName.toLowerCase():"";if(_210.indexOf(_29c,_29f)>-1){_29e=fs;break;}fs=fs.parentNode;}if(_29e){rs=_296.startContainer;var _2a0=doc.createElement(_29e.tagName);_216.place(_2a0,_29e,"after");if(rs&&rs.nodeType===3){var _2a1,_2a2;var _2a3=_296.endOffset;if(rs.length<_2a3){ret=this._adjustNodeAndOffset(rs,_2a3);rs=ret.node;_2a3=ret.offset;}txt=rs.nodeValue;_297=doc.createTextNode(txt.substring(0,_2a3));var _2a4=txt.substring(_2a3,txt.length);if(_2a4){_298=doc.createTextNode(_2a4);}_216.place(_297,rs,"before");if(_298){_299=doc.createElement("span");_299.className="ieFormatBreakerSpan";_216.place(_299,rs,"after");_216.place(_298,_299,"after");_298=_299;}_216.destroy(rs);var _2a5=_297.parentNode;var _2a6=[];var _2a7;while(_2a5!==_29e){var tg=_2a5.tagName;_2a7={tagName:tg};_2a6.push(_2a7);var _2a8=doc.createElement(tg);if(_2a5.style){if(_2a8.style){if(_2a5.style.cssText){_2a8.style.cssText=_2a5.style.cssText;_2a7.cssText=_2a5.style.cssText;}}}if(_2a5.tagName==="FONT"){if(_2a5.color){_2a8.color=_2a5.color;_2a7.color=_2a5.color;}if(_2a5.face){_2a8.face=_2a5.face;_2a7.face=_2a5.face;}if(_2a5.size){_2a8.size=_2a5.size;_2a7.size=_2a5.size;}}if(_2a5.className){_2a8.className=_2a5.className;_2a7.className=_2a5.className;}if(_298){_2a1=_298;while(_2a1){_2a2=_2a1.nextSibling;_2a8.appendChild(_2a1);_2a1=_2a2;}}if(_2a8.tagName==_2a5.tagName){_299=doc.createElement("span");_299.className="ieFormatBreakerSpan";_216.place(_299,_2a5,"after");_216.place(_2a8,_299,"after");}else{_216.place(_2a8,_2a5,"after");}_297=_2a5;_298=_2a8;_2a5=_2a5.parentNode;}if(_298){_2a1=_298;if(_2a1.nodeType===1||(_2a1.nodeType===3&&_2a1.nodeValue)){_2a0.innerHTML="";}while(_2a1){_2a2=_2a1.nextSibling;_2a0.appendChild(_2a1);_2a1=_2a2;}}var _2a9;if(_2a6.length){_2a7=_2a6.pop();var _2aa=doc.createElement(_2a7.tagName);if(_2a7.cssText&&_2aa.style){_2aa.style.cssText=_2a7.cssText;}if(_2a7.className){_2aa.className=_2a7.className;}if(_2a7.tagName==="FONT"){if(_2a7.color){_2aa.color=_2a7.color;}if(_2a7.face){_2aa.face=_2a7.face;}if(_2a7.size){_2aa.size=_2a7.size;}}_216.place(_2aa,_2a0,"before");while(_2a6.length){_2a7=_2a6.pop();var _2ab=doc.createElement(_2a7.tagName);if(_2a7.cssText&&_2ab.style){_2ab.style.cssText=_2a7.cssText;}if(_2a7.className){_2ab.className=_2a7.className;}if(_2a7.tagName==="FONT"){if(_2a7.color){_2ab.color=_2a7.color;}if(_2a7.face){_2ab.face=_2a7.face;}if(_2a7.size){_2ab.size=_2a7.size;}}_2aa.appendChild(_2ab);_2aa=_2ab;}_29a=doc.createTextNode(".");_299.appendChild(_29a);_2aa.appendChild(_29a);_2a9=_223.create(this.window);_2a9.setStart(_29a,0);_2a9.setEnd(_29a,_29a.length);_295.removeAllRanges();_295.addRange(_2a9);this._sCall("collapse",[false]);_29a.parentNode.innerHTML="";}else{_299=doc.createElement("span");_299.className="ieFormatBreakerSpan";_29a=doc.createTextNode(".");_299.appendChild(_29a);_216.place(_299,_2a0,"before");_2a9=_223.create(this.window);_2a9.setStart(_29a,0);_2a9.setEnd(_29a,_29a.length);_295.removeAllRanges();_295.addRange(_2a9);this._sCall("collapse",[false]);_29a.parentNode.innerHTML="";}if(!_2a0.firstChild){_216.destroy(_2a0);}return true;}}return false;}else{_296=_295.getRangeAt(0);rs=_296.startContainer;if(rs&&rs.nodeType===3){var _29d=_296.startOffset;if(rs.length<_29d){ret=this._adjustNodeAndOffset(rs,_29d);rs=ret.node;_29d=ret.offset;}txt=rs.nodeValue;_297=doc.createTextNode(txt.substring(0,_29d));var _2a4=txt.substring(_29d);if(_2a4!==""){_298=doc.createTextNode(txt.substring(_29d));}_299=doc.createElement("span");_29a=doc.createTextNode(".");_299.appendChild(_29a);if(_297.length){_216.place(_297,rs,"after");}else{_297=rs;}_216.place(_299,_297,"after");if(_298){_216.place(_298,_299,"after");}_216.destroy(rs);var _2a9=_223.create(this.window);_2a9.setStart(_29a,0);_2a9.setEnd(_29a,_29a.length);_295.removeAllRanges();_295.addRange(_2a9);doc.execCommand(_294);_216.place(_299.firstChild,_299,"before");_216.destroy(_299);_2a9.setStart(_29a,0);_2a9.setEnd(_29a,_29a.length);_295.removeAllRanges();_295.addRange(_2a9);this._sCall("collapse",[false]);_29a.parentNode.innerHTML="";return true;}}}else{return false;}},_adaptIEList:function(_2ac){var _2ad=_223.getSelection(this.window);if(_2ad.isCollapsed){if(_2ad.rangeCount&&!this.queryCommandValue(_2ac)){var _2ae=_2ad.getRangeAt(0);var sc=_2ae.startContainer;if(sc&&sc.nodeType==3){if(!_2ae.startOffset){var _2af="ul";if(_2ac==="insertorderedlist"){_2af="ol";}var list=this.document.createElement(_2af);var li=_216.create("li",null,list);_216.place(list,sc,"before");li.appendChild(sc);_216.create("br",null,list,"after");var _2b0=_223.create(this.window);_2b0.setStart(sc,0);_2b0.setEnd(sc,sc.length);_2ad.removeAllRanges();_2ad.addRange(_2b0);this._sCall("collapse",[true]);return true;}}}}return false;},_handleTextColorOrProperties:function(_2b1,_2b2){var _2b3=_223.getSelection(this.window);var doc=this.document;var rs,ret,_2b4,txt,_2b5,_2b6,_2b7,_2b8;_2b2=_2b2||null;if(_2b1&&_2b3&&_2b3.isCollapsed){if(_2b3.rangeCount){_2b4=_2b3.getRangeAt(0);rs=_2b4.startContainer;if(rs&&rs.nodeType===3){var _2b9=_2b4.startOffset;if(rs.length<_2b9){ret=this._adjustNodeAndOffset(rs,_2b9);rs=ret.node;_2b9=ret.offset;}txt=rs.nodeValue;_2b5=doc.createTextNode(txt.substring(0,_2b9));var _2ba=txt.substring(_2b9);if(_2ba!==""){_2b6=doc.createTextNode(txt.substring(_2b9));}_2b7=doc.createElement("span");_2b8=doc.createTextNode(".");_2b7.appendChild(_2b8);var _2bb=doc.createElement("span");_2b7.appendChild(_2bb);if(_2b5.length){_216.place(_2b5,rs,"after");}else{_2b5=rs;}_216.place(_2b7,_2b5,"after");if(_2b6){_216.place(_2b6,_2b7,"after");}_216.destroy(rs);var _2bc=_223.create(this.window);_2bc.setStart(_2b8,0);_2bc.setEnd(_2b8,_2b8.length);_2b3.removeAllRanges();_2b3.addRange(_2bc);if(has("webkit")){var _2bd="color";if(_2b1==="hilitecolor"||_2b1==="backcolor"){_2bd="backgroundColor";}_218.set(_2b7,_2bd,_2b2);this._sCall("remove",[]);_216.destroy(_2bb);_2b7.innerHTML="&#160;";this._sCall("selectElement",[_2b7]);this.focus();}else{this.execCommand(_2b1,_2b2);_216.place(_2b7.firstChild,_2b7,"before");_216.destroy(_2b7);_2bc.setStart(_2b8,0);_2bc.setEnd(_2b8,_2b8.length);_2b3.removeAllRanges();_2b3.addRange(_2bc);this._sCall("collapse",[false]);_2b8.parentNode.removeChild(_2b8);}return true;}}}return false;},_adjustNodeAndOffset:function(node,_2be){while(node.length<_2be&&node.nextSibling&&node.nextSibling.nodeType===3){_2be=_2be-node.length;node=node.nextSibling;}return {"node":node,"offset":_2be};},_tagNamesForCommand:function(_2bf){if(_2bf==="bold"){return ["b","strong"];}else{if(_2bf==="italic"){return ["i","em"];}else{if(_2bf==="strikethrough"){return ["s","strike"];}else{if(_2bf==="superscript"){return ["sup"];}else{if(_2bf==="subscript"){return ["sub"];}else{if(_2bf==="underline"){return ["u"];}}}}}}return [];},_stripBreakerNodes:function(node){if(!this.isLoaded){return;}_21b(".ieFormatBreakerSpan",node).forEach(function(b){while(b.firstChild){_216.place(b.firstChild,b,"before");}_216.destroy(b);});return node;}});return _227;});},"dijit/ToolbarSeparator":function(){define("dijit/ToolbarSeparator",["dojo/_base/declare","dojo/dom","./_Widget","./_TemplatedMixin"],function(_2c0,dom,_2c1,_2c2){return _2c0("dijit.ToolbarSeparator",[_2c1,_2c2],{templateString:"<div class=\"dijitToolbarSeparator dijitInline\" role=\"presentation\"></div>",buildRendering:function(){this.inherited(arguments);dom.setSelectable(this.domNode,false);},isFocusable:function(){return false;}});});},"dijit/CheckedMenuItem":function(){require({cache:{"url:dijit/templates/CheckedMenuItem.html":"<tr class=\"dijitReset dijitMenuItem\" data-dojo-attach-point=\"focusNode\" role=\"menuitemcheckbox\" tabIndex=\"-1\">\n\t<td class=\"dijitReset dijitMenuItemIconCell\" role=\"presentation\">\n\t\t<img src=\"${_blankGif}\" alt=\"\" class=\"dijitMenuItemIcon dijitCheckedMenuItemIcon\" data-dojo-attach-point=\"iconNode\"/>\n\t\t<span class=\"dijitCheckedMenuItemIconChar\">&#10003;</span>\n\t</td>\n\t<td class=\"dijitReset dijitMenuItemLabel\" colspan=\"2\" data-dojo-attach-point=\"containerNode,labelNode\"></td>\n\t<td class=\"dijitReset dijitMenuItemAccelKey\" style=\"display: none\" data-dojo-attach-point=\"accelKeyNode\"></td>\n\t<td class=\"dijitReset dijitMenuArrowCell\" role=\"presentation\">&#160;</td>\n</tr>\n"}});define("dijit/CheckedMenuItem",["dojo/_base/declare","dojo/dom-class","./MenuItem","dojo/text!./templates/CheckedMenuItem.html","./hccss"],function(_2c3,_2c4,_2c5,_2c6){return _2c3("dijit.CheckedMenuItem",_2c5,{templateString:_2c6,checked:false,_setCheckedAttr:function(_2c7){_2c4.toggle(this.domNode,"dijitCheckedMenuItemChecked",_2c7);this.domNode.setAttribute("aria-checked",_2c7?"true":"false");this._set("checked",_2c7);},iconClass:"",onChange:function(){},_onClick:function(evt){if(!this.disabled){this.set("checked",!this.checked);this.onChange(this.checked);}this.onClick(evt);}});});},"dojox/lang/functional":function(){define("dojox/lang/functional",["./functional/lambda","./functional/array","./functional/object"],function(df){return df;});},"esri/dijit/InfoWindowLite":function(){define("esri/dijit/InfoWindowLite",["dijit","dojo","dojox","dojo/require!esri/InfoWindowBase,esri/utils"],function(_2c8,dojo,_2c9){dojo.provide("esri.dijit.InfoWindowLite");dojo.require("esri.InfoWindowBase");dojo.require("esri.utils");dojo.declare("esri.dijit.InfoWindow",[esri.InfoWindowBase],{constructor:function(_2ca,_2cb){dojo.mixin(this,_2ca);var _2cc=(this.domNode=dojo.byId(_2cb));_2cc.id=this.id||_2c8.getUniqueId(this.declaredClass);dojo.addClass(_2cc,"simpleInfoWindow");this._title=dojo.create("div",{"class":"title"},_2cc);this._content=dojo.create("div",{"class":"content"},_2cc);this._close=dojo.create("div",{"class":"close"},_2cc);},domNode:null,anchor:"upperright",fixedAnchor:null,coords:null,isShowing:true,width:250,height:150,title:"Info Window",_bufferWidth:10,_bufferHeight:10,startup:function(){this._anchors=[esri.dijit.InfoWindow.ANCHOR_UPPERRIGHT,esri.dijit.InfoWindow.ANCHOR_LOWERRIGHT,esri.dijit.InfoWindow.ANCHOR_LOWERLEFT,esri.dijit.InfoWindow.ANCHOR_UPPERLEFT];this.resize(this.width,this.height);this.hide();this._closeConnect=dojo.connect(this._close,"onclick",this,this.hide);},destroy:function(){if(this.isShowing){this.hide();}this.destroyDijits(this._title);this.destroyDijits(this._content);dojo.disconnect(this._closeConnect);dojo.destroy(this.domNode);this.domNode=this._title=this._content=this._anchors=this._closeConnect=null;},setTitle:function(_2cd){if(!_2cd){dojo.addClass(this._title,"empty");}else{dojo.removeClass(this._title,"empty");}this.destroyDijits(this._title);this.__setValue("_title",_2cd);return this;},setContent:function(_2ce){if(!_2ce){dojo.addClass(this._title,"empty");}else{dojo.removeClass(this._title,"empty");}this.destroyDijits(this._content);this.__setValue("_content",_2ce);return this;},setFixedAnchor:function(_2cf){if(_2cf&&dojo.indexOf(this._anchors,_2cf)===-1){return;}this.fixedAnchor=_2cf;if(this.isShowing){this.show(this.mapCoords||this.coords,_2cf);}this.onAnchorChange(_2cf);},show:function(_2d0,_2d1){if(!_2d0){return;}if(_2d0.spatialReference){this.mapCoords=_2d0;_2d0=this.coords=this.map.toScreen(_2d0,true);}else{this.mapCoords=null;this.coords=_2d0;}if(!_2d1||dojo.indexOf(this._anchors,_2d1)===-1){_2d1=this.map.getInfoWindowAnchor(_2d0);}_2d1=(this.anchor=this.fixedAnchor||_2d1);esri.show(this.domNode);this._adjustContentArea();this._adjustPosition(_2d0,_2d1);this.isShowing=true;if(!arguments[2]){this.onShow();}},hide:function(){esri.hide(this.domNode);this.isShowing=false;if(!arguments[1]){this.onHide();}},move:function(_2d2,_2d3){if(_2d3){_2d2=this.coords.offset(_2d2.x,_2d2.y);}else{this.coords=_2d2;if(this.mapCoords){this.mapCoords=this.map.toMap(_2d2);}}this._adjustPosition(_2d2,this.anchor);},resize:function(_2d4,_2d5){this.width=_2d4;this.height=_2d5;dojo.style(this.domNode,{width:_2d4+"px",height:_2d5+"px"});dojo.style(this._close,{left:(_2d4-2)+"px",top:"-12px"});this._adjustContentArea();if(this.coords){this._adjustPosition(this.coords,this.anchor);}this.onResize(_2d4,_2d5);},onShow:function(){this.__registerMapListeners();this.startupDijits(this._title);this.startupDijits(this._content);},onHide:function(){this.__unregisterMapListeners();},onResize:function(){},onAnchorChange:function(){},_adjustContentArea:function(){var box=dojo.contentBox(this.domNode);var _2d6=dojo.coords(this._title);var _2d7=dojo.coords(this._content);var _2d8=dojo.contentBox(this._content);var diff=_2d7.h-_2d8.h;dojo.style(this._content,{height:(box.h-_2d6.h-diff)+"px"});},_adjustPosition:function(_2d9,_2da){var posX=Math.round(_2d9.x),posY=Math.round(_2d9.y);var _2db=this._bufferWidth,_2dc=this._bufferHeight;var _2dd=dojo.coords(this.domNode);switch(_2da){case esri.dijit.InfoWindow.ANCHOR_UPPERLEFT:posX-=(_2dd.w+_2db);posY-=(_2dd.h+_2dc);break;case esri.dijit.InfoWindow.ANCHOR_UPPERRIGHT:posX+=_2db;posY-=(_2dd.h+_2dc);break;case esri.dijit.InfoWindow.ANCHOR_LOWERRIGHT:posX+=_2db;posY+=_2dc;break;case esri.dijit.InfoWindow.ANCHOR_LOWERLEFT:posX-=(_2dd.w+_2db);posY+=_2dc;break;}dojo.style(this.domNode,{left:posX+"px",top:posY+"px"});}});dojo.mixin(esri.dijit.InfoWindow,{ANCHOR_UPPERRIGHT:"upperright",ANCHOR_LOWERRIGHT:"lowerright",ANCHOR_LOWERLEFT:"lowerleft",ANCHOR_UPPERLEFT:"upperleft"});});},"esri/toolbars/_GraphicMover":function(){define("esri/toolbars/_GraphicMover",["dijit","dojo","dojox","dojo/require!dojox/gfx/move"],function(_2de,dojo,_2df){dojo.provide("esri.toolbars._GraphicMover");dojo.require("dojox.gfx.move");dojo.declare("esri.toolbars._Mover",_2df.gfx.Mover,{constructor:function(_2e0,e,host){this.__e=e;}});dojo.declare("esri.toolbars._GraphicMover",null,{constructor:function(_2e1,map,_2e2){this.graphic=_2e1;this.map=map;this.toolbar=_2e2;this._enableGraphicMover();this._moved=false;},refresh:function(_2e3){var _2e4=this.graphic.getDojoShape();if(_2e4&&(_2e3||!_2e4._hostGraphic)){this._disableGraphicMover();this._enableGraphicMover();}},destroy:function(){this._disableGraphicMover();},hasMoved:function(){return this._moved;},_enableGraphicMover:function(){var _2e5=this.graphic,_2e6=_2e5.getDojoShape();if(_2e6){_2e6._hostGraphic=_2e5;this._moveable=new _2df.gfx.Moveable(_2e6,{mover:esri.toolbars._Mover});this._moveStartHandle=dojo.connect(this._moveable,"onMoveStart",this,this._moveStartHandler);this._firstMoveHandle=dojo.connect(this._moveable,"onFirstMove",this,this._firstMoveHandler);this._movingHandle=dojo.connect(this._moveable,"onMoving",this,this._movingHandler);this._moveStopHandle=dojo.connect(this._moveable,"onMoveStop",this,this._moveStopHandler);var node=_2e6.getEventSource();if(node){dojo.style(node,"cursor",this.toolbar._cursors.move);}}},_disableGraphicMover:function(){var _2e7=this._moveable;if(_2e7){dojo.disconnect(this._moveStartHandle);dojo.disconnect(this._firstMoveHandle);dojo.disconnect(this._movingHandle);dojo.disconnect(this._moveStopHandle);var _2e8=_2e7.shape;if(_2e8){_2e8._hostGraphic=null;var node=_2e8.getEventSource();if(node){dojo.style(node,"cursor",null);}}_2e7.destroy();}this._moveable=null;},_moveStartHandler:function(){var _2e9=this.graphic,map=this.map;this._startTx=_2e9.getDojoShape().getTransform();if(this.graphic.geometry.type==="point"){if(map.snappingManager){map.snappingManager._setUpSnapping();}}this.toolbar.onGraphicMoveStart(_2e9);},_firstMoveHandler:function(){this.toolbar._beginOperation("MOVE");this.toolbar.onGraphicFirstMove(this.graphic);},_movingHandler:function(_2ea){this.toolbar.onGraphicMove(this.graphic,_2ea.shape.getTransform());},_moveStopHandler:function(_2eb){var _2ec=this.graphic,_2ed=this.toolbar,map=this.map,mx=_2df.gfx.matrix,_2ee=_2ed._geo?esri.geometry.geographicToWebMercator(_2ec.geometry):_2ec.geometry,type=_2ee.type,_2ef=_2ec.getDojoShape(),tx=_2ef.getTransform();if(dojo.toJson(tx)!==dojo.toJson(this._startTx)){this._moved=true;switch(type){case "point":var _2f0=[tx,mx.invert(this._startTx)],_2f1;if(map.snappingManager){_2f1=map.snappingManager._snappingPoint;}_2ee=_2f1||map.toMap(mx.multiplyPoint(_2f0,map.toScreen(_2ee,true)));if(map.snappingManager){map.snappingManager._killOffSnapping();}break;case "polyline":_2ee=this._updatePolyGeometry(_2ee,_2ee.paths,tx);break;case "polygon":_2ee=this._updatePolyGeometry(_2ee,_2ee.rings,tx);break;}_2ef.setTransform(null);_2ec.setGeometry(_2ed._geo?esri.geometry.webMercatorToGeographic(_2ee,true):_2ee);}else{this._moved=false;}_2ed._endOperation("MOVE");_2ed.onGraphicMoveStop(_2ec,tx);if(!this._moved){var e=_2eb.__e,_2f2=this.map.position,pt=new esri.geometry.ScreenPoint(e.pageX-_2f2.x,e.pageY-_2f2.y);_2ed.onGraphicClick(_2ec,{screenPoint:pt,mapPoint:this.map.toMap(pt)});}},_updatePolyGeometry:function(_2f3,_2f4,_2f5){var map=this.map,_2f6=_2f3.getPoint(0,0),_2f7=map.toMap(map.toScreen(_2f6).offset(_2f5.dx,_2f5.dy)),_2f8=_2f7.x-_2f6.x,_2f9=_2f7.y-_2f6.y,i,j,seg,_2fa;for(i=0;i<_2f4.length;i++){seg=_2f4[i];for(j=0;j<seg.length;j++){_2fa=_2f3.getPoint(i,j);_2f3.setPoint(i,j,_2fa.offset(_2f8,_2f9));}}return _2f3;}});});},"dijit/form/_SearchMixin":function(){define("dijit/form/_SearchMixin",["dojo/data/util/filter","dojo/_base/declare","dojo/_base/event","dojo/keys","dojo/_base/lang","dojo/query","dojo/sniff","dojo/string","dojo/when","../registry"],function(_2fb,_2fc,_2fd,keys,lang,_2fe,has,_2ff,when,_300){return _2fc("dijit.form._SearchMixin",null,{pageSize:Infinity,store:null,fetchProperties:{},query:{},searchDelay:200,searchAttr:"name",queryExpr:"${0}*",ignoreCase:true,_abortQuery:function(){if(this.searchTimer){this.searchTimer=this.searchTimer.remove();}if(this._queryDeferHandle){this._queryDeferHandle=this._queryDeferHandle.remove();}if(this._fetchHandle){if(this._fetchHandle.abort){this._cancelingQuery=true;this._fetchHandle.abort();this._cancelingQuery=false;}if(this._fetchHandle.cancel){this._cancelingQuery=true;this._fetchHandle.cancel();this._cancelingQuery=false;}this._fetchHandle=null;}},_processInput:function(evt){if(this.disabled||this.readOnly){return;}var key=evt.charOrCode;if(evt.altKey||((evt.ctrlKey||evt.metaKey)&&(key!="x"&&key!="v"))||key==keys.SHIFT){return;}var _301=false;this._prev_key_backspace=false;switch(key){case keys.DELETE:case keys.BACKSPACE:this._prev_key_backspace=true;this._maskValidSubsetError=true;_301=true;break;default:_301=typeof key=="string"||key==229;}if(_301){if(!this.store){this.onSearch();}else{this.searchTimer=this.defer("_startSearchFromInput",1);}}},onSearch:function(){},_startSearchFromInput:function(){this._startSearch(this.focusNode.value.replace(/([\\\*\?])/g,"\\$1"));},_startSearch:function(text){this._abortQuery();var _302=this,_2fe=lang.clone(this.query),_303={start:0,count:this.pageSize,queryOptions:{ignoreCase:this.ignoreCase,deep:true}},qs=_2ff.substitute(this.queryExpr,[text]),q,_304=function(){var _305=_302._fetchHandle=_302.store.query(_2fe,_303);if(_302.disabled||_302.readOnly||(q!==_302._lastQuery)){return;}when(_305,function(res){_302._fetchHandle=null;if(!_302.disabled&&!_302.readOnly&&(q===_302._lastQuery)){when(_305.total,function(_306){res.total=_306;var _307=_302.pageSize;if(isNaN(_307)||_307>res.total){_307=res.total;}res.nextPage=function(_308){_303.direction=_308=_308!==false;_303.count=_307;if(_308){_303.start+=res.length;if(_303.start>=res.total){_303.count=0;}}else{_303.start-=_307;if(_303.start<0){_303.count=Math.max(_307+_303.start,0);_303.start=0;}}if(_303.count<=0){res.length=0;_302.onSearch(res,_2fe,_303);}else{_304();}};_302.onSearch(res,_2fe,_303);});}},function(err){_302._fetchHandle=null;if(!_302._cancelingQuery){console.error(_302.declaredClass+" "+err.toString());}});};lang.mixin(_303,this.fetchProperties);if(this.store._oldAPI){q=qs;}else{q=_2fb.patternToRegExp(qs,this.ignoreCase);q.toString=function(){return qs;};}this._lastQuery=_2fe[this.searchAttr]=q;this._queryDeferHandle=this.defer(_304,this.searchDelay);},constructor:function(){this.query={};this.fetchProperties={};},postMixInProperties:function(){if(!this.store){var list=this.list;if(list){this.store=_300.byId(list);}}this.inherited(arguments);}});});},"dojox/fx":function(){define("dojox/fx",["./fx/_base"],function(_309){return _309;});},"dijit/form/SimpleTextarea":function(){define("dijit/form/SimpleTextarea",["dojo/_base/declare","dojo/dom-class","dojo/sniff","./TextBox"],function(_30a,_30b,has,_30c){return _30a("dijit.form.SimpleTextarea",_30c,{baseClass:"dijitTextBox dijitTextArea",rows:"3",cols:"20",templateString:"<textarea ${!nameAttrSetting} data-dojo-attach-point='focusNode,containerNode,textbox' autocomplete='off'></textarea>",postMixInProperties:function(){if(!this.value&&this.srcNodeRef){this.value=this.srcNodeRef.value;}this.inherited(arguments);},buildRendering:function(){this.inherited(arguments);if(has("ie")&&this.cols){_30b.add(this.textbox,"dijitTextAreaCols");}},filter:function(_30d){if(_30d){_30d=_30d.replace(/\r/g,"");}return this.inherited(arguments);},_onInput:function(e){if(this.maxLength){var _30e=parseInt(this.maxLength);var _30f=this.textbox.value.replace(/\r/g,"");var _310=_30f.length-_30e;if(_310>0){var _311=this.textbox;if(_311.selectionStart){var pos=_311.selectionStart;var cr=0;if(has("opera")){cr=(this.textbox.value.substring(0,pos).match(/\r/g)||[]).length;}this.textbox.value=_30f.substring(0,pos-_310-cr)+_30f.substring(pos-cr);_311.setSelectionRange(pos-_310,pos-_310);}else{if(this.ownerDocument.selection){_311.focus();var _312=this.ownerDocument.selection.createRange();_312.moveStart("character",-_310);_312.text="";_312.select();}}}}this.inherited(arguments);}});});},"esri/dijit/editing/SelectionHelper":function(){define("esri/dijit/editing/SelectionHelper",["dijit","dojo","dojox"],function(_313,dojo,_314){dojo.provide("esri.dijit.editing.SelectionHelper");dojo.declare("esri.dijit.editing.SelectionHelper",null,{constructor:function(_315){this._settings=_315||{};this._sConnects=[];this._mapServiceCount=0;this._map=this._settings.map;this._tolerance=this._settings.singleSelectionTolerance;this._initMapServiceInfos(this._settings.layers);},destroy:function(){var _316;for(_316 in this._sConnects){if(this._sConnects.hasOwnProperty(_316)){dojo.disconnect(this._sConnects[_316]);}}},selectFeatures:function(_317,_318,_319,_31a){if(_319===esri.layers.FeatureLayer.SELECTION_NEW){this._resetMapServiceInfos();this.getSelection(_317);}var _31b=[];dojo.forEach(_317,function(_31c){if(_31c.visible===true&&_31c._isMapAtVisibleScale()===true){var _31d=_319;if(_31c._isSelOnly&&_31d===esri.layers.FeatureLayer.SELECTION_NEW){_31d=esri.layers.FeatureLayer.SELECTION_ADD;}_31b.push(_31c.selectFeatures(_318,_31d));}});var _31e=new dojo.DeferredList(_31b);_31e.addCallback(dojo.hitch(this,function(_31f){var _320=[];dojo.forEach(_31f,function(set,idx){dojo.forEach(set[1],function(_321){var _322=_321.attributes[_317[idx].objectIdField];_321=_317[idx]._mode._getFeature(_322)||null;if(_321){_320.push(_321);}},this);},this);if(!this._mapServiceCount){_31a(_320);return;}var _323=_319===esri.layers.FeatureLayer.SELECTION_SUBTRACT;if(_323){this._resetMapServiceInfos();this._createLayerDefs(this._getLayerInfosFromSelection(_317));}else{this._createLayerDefs(this._getLayerInfosFromFeatures(_320));}this._updateLayerDefs(this._mapServiceInfos,false,!((_320&&_320.length)||_323),dojo.hitch(this,_31a,_320));}));},selectFeaturesByGeometry:function(_324,_325,_326,_327){var _328=_325;if(_325.declaredClass.indexOf("Extent")!==-1){if(_325.xmax===_325.xmin&&_325.ymax===_325.ymin){_328=new esri.geometry.Point(_325.xmax,_325.ymax,_325.spatialReference);}}_328=(_328.declaredClass.indexOf("Point")!==-1)?this._extentFromPoint(_328):_328;var _329=new esri.tasks.Query();_329.geometry=_328;this.selectFeatures(_324,_329,_326,_327);},clearSelection:function(_32a){var _32b=this._nonSelOnlyLayers;dojo.forEach(_32b,"if (item.clearSelection){ item.clearSelection(); }");if(!this._mapServiceCount){return;}this._resetMapServiceInfos();var _32c=this._getLayerInfosFromSelection(this._settings.layers);var _32d=dojo.some(_32c,"return item.oids && item.oids.length");if(_32d){this._createLayerDefs(_32c);this._updateLayerDefs(this._mapServiceInfos,true,_32a||false);}},findMapService:function(_32e){var map=this._map,_32f=map.layerIds,_330=(_32e&&_32e._url)?_32e._url.path.toLowerCase():"",_331,_332,_333;for(_332 in _32f){if(_32f.hasOwnProperty(_332)){_331=map.getLayer(_32f[_332]);_333=_331._url?_331._url.path.toLowerCase().replace("mapserver","featureserver"):"";if(_330.substr(0,_333.length)===_333&&_331.declaredClass==="esri.layers.ArcGISDynamicMapServiceLayer"){return _331;}}}},getSelection:function(_334){var _335=[];dojo.forEach(_334,function(_336){if(_336._isSelOnly){_335.push(this._createLayerInfo(_336));}},this);dojo.forEach(_335,function(_337){var _338=this._createMapServiceInfo(this.findMapService(_337.layer));if(_338){_338.layerInfos[_337.layer.layerId]=_337;}},this);},_initMapServiceInfos:function(_339){this._nonSelOnlyLayers=[];this._mapServiceInfos=[];dojo.forEach(_339,function(_33a){var _33b=this.findMapService(_33a);if(_33b){this._mapServiceCount++;this._createMapServiceInfo(_33b);if(_33b){_33b.setDisableClientCaching(true);}}else{this._nonSelOnlyLayers.push(_33a);}},this);},_createMapServiceInfo:function(_33c){if(!_33c){return null;}var _33d=this._mapServiceInfos;var _33e=_33d[_33c.id];if(!_33e){_33e=_33d[_33c.id]={mapService:_33c,layerInfos:[],layerDefs:dojo.mixin([],_33c.layerDefinitions||[]),origLayerDefs:dojo.mixin([],_33c.layerDefinitions||[])};}return _33e;},_resetMapServiceInfo:function(_33f){dojo.forEach(_33f.layerInfos,this._resetLayerInfo);_33f.layerDefs=dojo.mixin([],_33f.origLayerDefs||[]);},_resetMapServiceInfos:function(){var _340=this._mapServiceInfos,_341;for(_341 in _340){if(_340.hasOwnProperty(_341)){this._resetMapServiceInfo(_340[_341]);}}},_createLayerInfo:function(_342,_343){var _344=_342.objectIdField;var _345=_343?[]:_342.getSelectedFeatures();return {layer:_342,selectedFeatures:_345||[],oids:dojo.map(_345,function(_346){return _346.attributes[_344];})};},_resetLayerInfo:function(_347){if(!_347){return;}_347.selectedFeatures=[];_347.oids=[];},_updateLayerDefs:function(_348,_349,_34a,_34b){var _34c;for(_34c in _348){if(_348.hasOwnProperty(_34c)){var _34d=_348[_34c];var _34e=_34d.mapService;var _34f=_34d.layerDefs=(_349?dojo.mixin([],_34d.origLayerDefs||[]):_34d.layerDefs);if(_34f){if(!_34a){this._sConnects[_34e.id]=(dojo.connect(_34e,"onUpdateEnd",dojo.hitch(this,"_onMapServiceUpdate",_34d,_349,_34b)));}else{if(_34b){_34b();}}_34e.setLayerDefinitions(_34f,_34a||false);}else{if(_34b){_34b();}}}}},_onMapServiceUpdate:function(_350,_351,_352){dojo.disconnect(this._sConnects[_350.mapService.id]);dojo.forEach(_350.layerInfos,function(_353){if(_351){if(_353){_353.layer.clearSelection();}}else{var _354=new esri.tasks.Query();_354.objectIds=_353?_353.oids:[];if(_354.objectIds.length){_353.layer.selectFeatures(_354,esri.layers.FeatureLayer.SELECTION_SUBTRACT);}}},this);if(_351){this._resetMapServiceInfo(_350);}if(_352){_352();}},_createLayerDefs:function(_355){dojo.forEach(_355,function(_356){var _357=_356.layer;var _358=this._createMapServiceInfo(this.findMapService(_356.layer));if(!_358){return;}var _359=_358.mapService;var _35a=_358.layerDefs;var _35b=_357.objectIdField;var _35c=_357.layerId;var _35d="(\""+_35b+"\" NOT IN (";var oids=_356.oids;if(oids&&oids.length){dojo.forEach(_356.oids,function(oid,idx){oids=true;if(idx){_35d+=",";}_35d+="'"+oid+"'";});_35d+="))";if(_35a.length&&(_35a[_35c]&&_35a[_35c].length)){_35a[_35c]+=" AND"+_35d;}else{_35a[_35c]=_35d;}}},this);},_getLayerInfosFromFeatures:function(_35e){var _35f=[];dojo.forEach(_35e,function(_360){var _361=_360.getLayer();if(_361&&_361._isSelOnly){if(!_35f[_361.id]){_35f[_361.id]=this._createLayerInfo(_361,true);}_35f[_361.id].selectedFeatures.push(_360);_35f[_361.id].oids.push(_360.attributes[_361.objectIdField]);}},this);var _362=[],_363;for(_363 in _35f){if(_35f.hasOwnProperty(_363)){_362.push(_35f[_363]);}}return _362;},_getLayerInfosFromSelection:function(_364){var _365=[];dojo.forEach(_364,function(_366){if(_366._isSelOnly){_365.push(this._createLayerInfo(_366,false));}},this);return _365;},_extentFromPoint:function(_367){var _368=this._tolerance;var map=this._map;var _369=map.toScreen(_367);var pnt1=new esri.geometry.ScreenPoint(_369.x-_368,_369.y+_368);var pnt2=new esri.geometry.ScreenPoint(_369.x+_368,_369.y-_368);var _36a=map.toMap(pnt1);var _36b=map.toMap(pnt2);return new esri.geometry.Extent(_36a.x,_36a.y,_36b.x,_36b.y,map.spatialReference);}});});},"dojox/grid/_RowSelector":function(){define("dojox/grid/_RowSelector",["dojo/_base/declare","./_View"],function(_36c,_36d){return _36c("dojox.grid._RowSelector",_36d,{defaultWidth:"2em",noscroll:true,padBorderWidth:2,buildRendering:function(){this.inherited("buildRendering",arguments);this.scrollboxNode.style.overflow="hidden";this.headerNode.style.visibility="hidden";},getWidth:function(){return this.viewWidth||this.defaultWidth;},buildRowContent:function(_36e,_36f){var w=this.contentWidth||0;_36f.innerHTML="<table class=\"dojoxGridRowbarTable\" style=\"width:"+w+"px;height:1px;\" border=\"0\" cellspacing=\"0\" cellpadding=\"0\" role=\"presentation\"><tr><td class=\"dojoxGridRowbarInner\">&nbsp;</td></tr></table>";},renderHeader:function(){},updateRow:function(){},resize:function(){this.adaptHeight();},adaptWidth:function(){if(!("contentWidth" in this)&&this.contentNode&&this.contentNode.offsetWidth>0){this.contentWidth=this.contentNode.offsetWidth-this.padBorderWidth;}},doStyleRowNode:function(_370,_371){var n=["dojoxGridRowbar dojoxGridNonNormalizedCell"];if(this.grid.rows.isOver(_370)){n.push("dojoxGridRowbarOver");}if(this.grid.selection.isSelected(_370)){n.push("dojoxGridRowbarSelected");}_371.className=n.join(" ");},domouseover:function(e){this.grid.onMouseOverRow(e);},domouseout:function(e){if(!this.isIntraRowEvent(e)){this.grid.onMouseOutRow(e);}}});});},"dojox/charting/plot2d/Scatter":function(){define("dojox/charting/plot2d/Scatter",["dojo/_base/lang","dojo/_base/array","dojo/_base/declare","./CartesianBase","./_PlotEvents","./common","dojox/lang/functional","dojox/lang/functional/reversed","dojox/lang/utils","dojox/gfx/fx","dojox/gfx/gradutils"],function(lang,arr,_372,_373,_374,dc,df,dfr,du,fx,_375){var _376=dfr.lambda("item.purgeGroup()");return _372("dojox.charting.plot2d.Scatter",[_373,_374],{defaultParams:{hAxis:"x",vAxis:"y",shadows:null,animate:null},optionalParams:{markerStroke:{},markerOutline:{},markerShadow:{},markerFill:{},markerFont:"",markerFontColor:"",styleFunc:null},constructor:function(_377,_378){this.opt=lang.clone(this.defaultParams);du.updateWithObject(this.opt,_378);du.updateWithPattern(this.opt,_378,this.optionalParams);this.series=[];this.hAxis=this.opt.hAxis;this.vAxis=this.opt.vAxis;this.animate=this.opt.animate;},render:function(dim,_379){if(this.zoom&&!this.isDataDirty()){return this.performZoom(dim,_379);}this.resetEvents();this.dirty=this.isDirty();if(this.dirty){arr.forEach(this.series,_376);this._eventSeries={};this.cleanGroup();var s=this.group;df.forEachRev(this.series,function(item){item.cleanGroup(s);});}var t=this.chart.theme,_37a=this.events();for(var i=this.series.length-1;i>=0;--i){var run=this.series[i];if(!this.dirty&&!run.dirty){t.skip();this._reconnectEvents(run.name);continue;}run.cleanGroup();if(!run.data.length){run.dirty=false;t.skip();continue;}var _37b=t.next("marker",[this.opt,run]),s=run.group,_37c,ht=this._hScaler.scaler.getTransformerFromModel(this._hScaler),vt=this._vScaler.scaler.getTransformerFromModel(this._vScaler);if(typeof run.data[0]=="number"){_37c=arr.map(run.data,function(v,i){return {x:ht(i+1)+_379.l,y:dim.height-_379.b-vt(v)};},this);}else{_37c=arr.map(run.data,function(v,i){return {x:ht(v.x)+_379.l,y:dim.height-_379.b-vt(v.y)};},this);}var _37d=new Array(_37c.length),_37e=new Array(_37c.length),_37f=new Array(_37c.length);arr.forEach(_37c,function(c,i){var _380=run.data[i],_381;if(this.opt.styleFunc||typeof _380!="number"){var _382=typeof _380!="number"?[_380]:[];if(this.opt.styleFunc){_382.push(this.opt.styleFunc(_380));}_381=t.addMixin(_37b,"marker",_382,true);}else{_381=t.post(_37b,"marker");}var path="M"+c.x+" "+c.y+" "+_381.symbol;if(_381.marker.shadow){_37d[i]=s.createPath("M"+(c.x+_381.marker.shadow.dx)+" "+(c.y+_381.marker.shadow.dy)+" "+_381.symbol).setStroke(_381.marker.shadow).setFill(_381.marker.shadow.color);if(this.animate){this._animateScatter(_37d[i],dim.height-_379.b);}}if(_381.marker.outline){var _383=dc.makeStroke(_381.marker.outline);_383.width=2*_383.width+_381.marker.stroke.width;_37f[i]=s.createPath(path).setStroke(_383);if(this.animate){this._animateScatter(_37f[i],dim.height-_379.b);}}var _384=dc.makeStroke(_381.marker.stroke),fill=this._plotFill(_381.marker.fill,dim,_379);if(fill&&(fill.type==="linear"||fill.type=="radial")){var _385=_375.getColor(fill,{x:c.x,y:c.y});if(_384){_384.color=_385;}_37e[i]=s.createPath(path).setStroke(_384).setFill(_385);}else{_37e[i]=s.createPath(path).setStroke(_384).setFill(fill);}if(this.animate){this._animateScatter(_37e[i],dim.height-_379.b);}},this);if(_37e.length){run.dyn.marker=_37b.symbol;run.dyn.markerStroke=_37e[_37e.length-1].getStroke();run.dyn.markerFill=_37e[_37e.length-1].getFill();}if(_37a){var _386=new Array(_37e.length);arr.forEach(_37e,function(s,i){var o={element:"marker",index:i,run:run,shape:s,outline:_37f&&_37f[i]||null,shadow:_37d&&_37d[i]||null,cx:_37c[i].x,cy:_37c[i].y};if(typeof run.data[0]=="number"){o.x=i+1;o.y=run.data[i];}else{o.x=run.data[i].x;o.y=run.data[i].y;}this._connectEvents(o);_386[i]=o;},this);this._eventSeries[run.name]=_386;}else{delete this._eventSeries[run.name];}run.dirty=false;}this.dirty=false;return this;},_animateScatter:function(_387,_388){fx.animateTransform(lang.delegate({shape:_387,duration:1200,transform:[{name:"translate",start:[0,_388],end:[0,0]},{name:"scale",start:[0,0],end:[1,1]},{name:"original"}]},this.animate)).play();}});});},"dojox/charting/action2d/Base":function(){define("dojox/charting/action2d/Base",["dojo/_base/lang","dojo/_base/declare"],function(lang,_389){return _389("dojox.charting.action2d.Base",null,{constructor:function(_38a,plot){this.chart=_38a;this.plot=plot?(lang.isString(plot)?this.chart.getPlot(plot):plot):this.chart.getPlot("default");},connect:function(){},disconnect:function(){},destroy:function(){this.disconnect();}});});},"dojox/charting/plot2d/StackedBars":function(){define("dojox/charting/plot2d/StackedBars",["dojo/_base/declare","./Bars","./commonStacked"],function(_38b,Bars,_38c){return _38b("dojox.charting.plot2d.StackedBars",Bars,{getSeriesStats:function(){var _38d=_38c.collectStats(this.series),t;this._maxRunLength=_38d.hmax;_38d.hmin-=0.5;_38d.hmax+=0.5;t=_38d.hmin,_38d.hmin=_38d.vmin,_38d.vmin=t;t=_38d.hmax,_38d.hmax=_38d.vmax,_38d.vmax=t;return _38d;},getDataLength:function(run){return this._maxRunLength;},getValue:function(_38e,_38f,_390,_391){var y,x;if(_391){x=_38f;y=_38c.getIndexValue(this.series,_390,x);}else{x=_38e.x-1;y=_38c.getValue(this.series,_390,_38e.x);y=y?y.y:null;}return {y:y,x:x};}});});},"dojox/grid/_Layout":function(){define("dojox/grid/_Layout",["dojo/_base/kernel","../main","dojo/_base/declare","dojo/_base/array","dojo/_base/lang","dojo/dom-geometry","./cells","./_RowSelector"],function(dojo,_392,_393,_394,lang,_395){return _393("dojox.grid._Layout",null,{constructor:function(_396){this.grid=_396;},cells:[],structure:null,defaultWidth:"6em",moveColumn:function(_397,_398,_399,_39a,_39b){var _39c=this.structure[_397].cells[0];var _39d=this.structure[_398].cells[0];var cell=null;var _39e=0;var _39f=0;for(var i=0,c;c=_39c[i];i++){if(c.index==_399){_39e=i;break;}}cell=_39c.splice(_39e,1)[0];cell.view=this.grid.views.views[_398];for(i=0,c=null;c=_39d[i];i++){if(c.index==_39a){_39f=i;break;}}if(!_39b){_39f+=1;}_39d.splice(_39f,0,cell);var _3a0=this.grid.getCell(this.grid.getSortIndex());if(_3a0){_3a0._currentlySorted=this.grid.getSortAsc();}this.cells=[];_399=0;var v;for(i=0;v=this.structure[i];i++){for(var j=0,cs;cs=v.cells[j];j++){for(var k=0;c=cs[k];k++){c.index=_399;this.cells.push(c);if("_currentlySorted" in c){var si=_399+1;si*=c._currentlySorted?1:-1;this.grid.sortInfo=si;delete c._currentlySorted;}_399++;}}}_394.forEach(this.cells,function(c){var _3a1=c.markup[2].split(" ");var _3a2=parseInt(_3a1[1].substring(5));if(_3a2!=c.index){_3a1[1]="idx=\""+c.index+"\"";c.markup[2]=_3a1.join(" ");}});this.grid.setupHeaderMenu();},setColumnVisibility:function(_3a3,_3a4){var cell=this.cells[_3a3];if(cell.hidden==_3a4){cell.hidden=!_3a4;var v=cell.view,w=v.viewWidth;if(w&&w!="auto"){v._togglingColumn=_395.getMarginBox(cell.getHeaderNode()).w||0;}v.update();return true;}else{return false;}},addCellDef:function(_3a5,_3a6,_3a7){var self=this;var _3a8=function(_3a9){var w=0;if(_3a9.colSpan>1){w=0;}else{w=_3a9.width||self._defaultCellProps.width||self.defaultWidth;if(!isNaN(w)){w=w+"em";}}return w;};var _3aa={grid:this.grid,subrow:_3a5,layoutIndex:_3a6,index:this.cells.length};if(_3a7&&_3a7 instanceof _392.grid.cells._Base){var _3ab=lang.clone(_3a7);_3aa.unitWidth=_3a8(_3ab._props);_3ab=lang.mixin(_3ab,this._defaultCellProps,_3a7._props,_3aa);return _3ab;}var _3ac=_3a7.type||_3a7.cellType||this._defaultCellProps.type||this._defaultCellProps.cellType||_392.grid.cells.Cell;if(lang.isString(_3ac)){_3ac=lang.getObject(_3ac);}_3aa.unitWidth=_3a8(_3a7);return new _3ac(lang.mixin({},this._defaultCellProps,_3a7,_3aa));},addRowDef:function(_3ad,_3ae){var _3af=[];var _3b0=0,_3b1=0,_3b2=true;for(var i=0,def,cell;(def=_3ae[i]);i++){cell=this.addCellDef(_3ad,i,def);_3af.push(cell);this.cells.push(cell);if(_3b2&&cell.relWidth){_3b0+=cell.relWidth;}else{if(cell.width){var w=cell.width;if(typeof w=="string"&&w.slice(-1)=="%"){_3b1+=window.parseInt(w,10);}else{if(w=="auto"){_3b2=false;}}}}}if(_3b0&&_3b2){_394.forEach(_3af,function(cell){if(cell.relWidth){cell.width=cell.unitWidth=((cell.relWidth/_3b0)*(100-_3b1))+"%";}});}return _3af;},addRowsDef:function(_3b3){var _3b4=[];if(lang.isArray(_3b3)){if(lang.isArray(_3b3[0])){for(var i=0,row;_3b3&&(row=_3b3[i]);i++){_3b4.push(this.addRowDef(i,row));}}else{_3b4.push(this.addRowDef(0,_3b3));}}return _3b4;},addViewDef:function(_3b5){this._defaultCellProps=_3b5.defaultCell||{};if(_3b5.width&&_3b5.width=="auto"){delete _3b5.width;}return lang.mixin({},_3b5,{cells:this.addRowsDef(_3b5.rows||_3b5.cells)});},setStructure:function(_3b6){this.fieldIndex=0;this.cells=[];var s=this.structure=[];if(this.grid.rowSelector){var sel={type:_392._scopeName+".grid._RowSelector"};if(lang.isString(this.grid.rowSelector)){var _3b7=this.grid.rowSelector;if(_3b7=="false"){sel=null;}else{if(_3b7!="true"){sel["width"]=_3b7;}}}else{if(!this.grid.rowSelector){sel=null;}}if(sel){s.push(this.addViewDef(sel));}}var _3b8=function(def){return ("name" in def||"field" in def||"get" in def);};var _3b9=function(def){if(lang.isArray(def)){if(lang.isArray(def[0])||_3b8(def[0])){return true;}}return false;};var _3ba=function(def){return (def!==null&&lang.isObject(def)&&("cells" in def||"rows" in def||("type" in def&&!_3b8(def))));};if(lang.isArray(_3b6)){var _3bb=false;for(var i=0,st;(st=_3b6[i]);i++){if(_3ba(st)){_3bb=true;break;}}if(!_3bb){s.push(this.addViewDef({cells:_3b6}));}else{for(i=0;(st=_3b6[i]);i++){if(_3b9(st)){s.push(this.addViewDef({cells:st}));}else{if(_3ba(st)){s.push(this.addViewDef(st));}}}}}else{if(_3ba(_3b6)){s.push(this.addViewDef(_3b6));}}this.cellCount=this.cells.length;this.grid.setupHeaderMenu();}});});},"esri/dijit/Legend":function(){define("esri/dijit/Legend",["dijit","dojo","dojox","dojo/require!dijit/_Widget,dojo/DeferredList,dojox/html/entities"],function(_3bc,dojo,_3bd){dojo.provide("esri.dijit.Legend");dojo.require("dijit._Widget");dojo.require("dojo.DeferredList");dojo.require("dojox.html.entities");dojo.declare("esri.dijit.Legend",[_3bc._Widget],{widgetsInTemplate:false,layers:null,alignRight:false,_ieTimer:100,constructor:function(_3be,_3bf){dojo.mixin(this,esri.bundle.widgets.legend);_3be=_3be||{};if(!_3be.map){console.error("esri.dijit.Legend: unable to find the 'map' property in parameters");return;}if(!_3bf){console.error("esri.dijit.Legend: must specify a container for the legend");return;}this.map=_3be.map;this.layerInfos=_3be.layerInfos;this._respectCurrentMapScale=(_3be.respectCurrentMapScale===false)?false:true;this.arrangement=(_3be.arrangement===esri.dijit.Legend.ALIGN_RIGHT)?esri.dijit.Legend.ALIGN_RIGHT:esri.dijit.Legend.ALIGN_LEFT;if(this.arrangement===esri.dijit.Legend.ALIGN_RIGHT){this.alignRight=true;}this.autoUpdate=(_3be.autoUpdate===false)?false:true;this._surfaceItems=[];},startup:function(){this.inherited(arguments);this._initialize();if(dojo.isIE){this._repaintItems=dojo.hitch(this,this._repaintItems);setTimeout(this._repaintItems,this._ieTimer);}},destroy:function(){this._deactivate();this.inherited(arguments);},refresh:function(_3c0){if(!this.domNode){return;}if(_3c0){this.layerInfos=_3c0;this.layers=[];dojo.forEach(this.layerInfos,function(_3c1){if(this._isSupportedLayerType(_3c1.layer)){if(_3c1.title){_3c1.layer._titleForLegend=_3c1.title;}if(_3c1.defaultSymbol===false){_3c1.layer._hideDefaultSymbolInLegend=true;}if(_3c1.hideLayers){_3c1.layer._hideLayersInLegend=_3c1.hideLayers;this._addSubLayersToHide(_3c1);}else{_3c1.layer._hideLayersInLegend=[];}this.layers.push(_3c1.layer);}},this);}else{if(this.useAllMapLayers){this.layerInfos=null;this.layers=null;}}for(var i=this.domNode.children.length-1;i>=0;i--){dojo.destroy(this.domNode.children[i]);}this.startup();},_legendUrl:"http://utility.arcgis.com/sharing/tools/legend",_initialize:function(){if(this.layerInfos){this.layers=[];dojo.forEach(this.layerInfos,function(_3c2){if(this._isSupportedLayerType(_3c2.layer)){if(_3c2.title){_3c2.layer._titleForLegend=_3c2.title;}if(_3c2.defaultSymbol===false){_3c2.layer._hideDefaultSymbol=true;}if(_3c2.hideLayers){_3c2.layer._hideLayersInLegend=_3c2.hideLayers;this._addSubLayersToHide(_3c2);}else{_3c2.layer._hideLayersInLegend=[];}this.layers.push(_3c2.layer);}},this);}this.useAllMapLayers=false;if(!this.layers){this.useAllMapLayers=true;this.layers=[];var _3c3=[];dojo.forEach(this.map.layerIds,function(_3c4){var _3c5=this.map.getLayer(_3c4);if(this._isSupportedLayerType(_3c5)){if(_3c5.arcgisProps&&_3c5.arcgisProps.title){_3c5._titleForLegend=_3c5.arcgisProps.title;}this.layers.push(_3c5);}if(_3c5.declaredClass=="esri.layers.KMLLayer"){dojo.forEach(_3c5.getLayers(),function(_3c6){_3c3.push(_3c6.id);},this);}},this);dojo.forEach(this.map.graphicsLayerIds,function(_3c7){var _3c8=this.map.getLayer(_3c7);if(dojo.indexOf(_3c3,_3c7)==-1){if(this._isSupportedLayerType(_3c8)&&_3c8._params&&_3c8._params.drawMode){if(_3c8.arcgisProps&&_3c8.arcgisProps.title){_3c8._titleForLegend=_3c8.arcgisProps.title;}this.layers.push(_3c8);}}},this);}this._createLegend();},_activate:function(){this._deactivate();if(!this.autoUpdate){return;}if(this._respectCurrentMapScale){this._ozeConnect=dojo.connect(this.map,"onZoomEnd",this,"_refreshLayers");}if(this.useAllMapLayers){this._olaConnect=dojo.connect(this.map,"onLayerAdd",this,"_updateAllMapLayers");this._olrConnect=dojo.connect(this.map,"onLayerRemove",this,"_updateAllMapLayers");this._olroConnect=dojo.connect(this.map,"onLayersReordered",this,"_updateAllMapLayers");}dojo.forEach(this.layers,function(_3c9){_3c9.ovcConnect=dojo.connect(_3c9,"onVisibilityChange",this,"_refreshLayers");_3c9.oscConnect=dojo.connect(_3c9,"onScaleRangeChange",this,"_refreshLayers");if(_3c9.declaredClass==="esri.layers.ArcGISDynamicMapServiceLayer"&&_3c9.supportsDynamicLayers){_3c9.odcConnect=dojo.connect(_3c9,"_onDynamicLayersChange",this,"_updateDynamicLayers");}},this);},_deactivate:function(){if(this._ozeConnect){dojo.disconnect(this._ozeConnect);}if(this._olaConnect){dojo.disconnect(this._olaConnect);}if(this._olroConnect){dojo.disconnect(this._olroConnect);}if(this._olrConnect){dojo.disconnect(this._olrConnect);}dojo.forEach(this.layers,function(_3ca){if(_3ca.ovcConnect){dojo.disconnect(_3ca.ovcConnect);}if(_3ca.oscConnect){dojo.disconnect(_3ca.oscConnect);}if(_3ca.odcConnect){dojo.disconnect(_3ca.odcConnect);}},this);},_updateDynamicLayers:function(){this._dynamicLayerChanged=true;this._refreshLayers();},_refreshLayers:function(){this.refresh();},_updateAllMapLayers:function(){this.layers=[];dojo.forEach(this.map.layerIds,function(_3cb){var _3cc=this.map.getLayer(_3cb);if(this._isSupportedLayerType(_3cc)){this.layers.push(_3cc);}},this);dojo.forEach(this.map.graphicsLayerIds,function(_3cd){var _3ce=this.map.getLayer(_3cd);if(this._isSupportedLayerType(_3ce)&&_3ce._params&&_3ce._params.drawMode){this.layers.push(_3ce);}},this);this.refresh();},_createLegend:function(){dojo.style(this.domNode,"position","relative");dojo.create("div",{id:this.id+"_msg",innerHTML:this.NLS_creatingLegend+"..."},this.domNode);var _3cf=[];dojo.forEach(this.layers,function(_3d0){if(_3d0.declaredClass=="esri.layers.KMLLayer"){dojo.forEach(_3d0.getLayers(),function(_3d1){if(_3d1.declaredClass=="esri.layers.FeatureLayer"&&_3d0._titleForLegend){_3d1._titleForLegend=_3d0._titleForLegend+" - ";if(_3d1.geometryType=="esriGeometryPoint"){_3d1._titleForLegend+="Points";}else{if(_3d1.geometryType=="esriGeometryPolyline"){_3d1._titleForLegend+="Lines";}else{if(_3d1.geometryType=="esriGeometryPolygon"){_3d1._titleForLegend+="Polygons";}}}_3cf.push(_3d1);}});}else{_3cf.push(_3d0);}},this);var _3d2=[];dojo.forEach(_3cf,function(_3d3){if(_3d3.visible===true&&(_3d3.layerInfos||_3d3.renderer)){var d=dojo.create("div",{id:this.id+"_"+_3d3.id,style:"display: none;","class":"esriLegendService"});dojo.create("span",{innerHTML:this._getServiceTitle(_3d3),"class":"esriLegendServiceLabel"},dojo.create("td",{align:(this.alignRight?"right":"")},dojo.create("tr",{},dojo.create("tbody",{},dojo.create("table",{width:"95%"},d)))));dojo.place(d,this.id,"first");if(dojo.isIE){dojo.style(dojo.byId(this.id+"_"+_3d3.id),"display","none");}if((_3d3.legendResponse||_3d3.renderer)&&!this._dynamicLayerChanged){this._createLegendForLayer(_3d3);}else{_3d2.push(this._legendRequest(_3d3));}this._dynamicLayerChanged=false;}},this);if(_3d2.length===0){dojo.byId(this.id+"_msg").innerHTML=this.NLS_noLegend;this._activate();}else{var _3d4=new dojo.DeferredList(_3d2);_3d4.addCallback(dojo.hitch(this,function(_3d5){dojo.byId(this.id+"_msg").innerHTML=this.NLS_noLegend;this._activate();}));}},_createLegendForLayer:function(_3d6){if(_3d6.legendResponse||_3d6.renderer){var _3d7=false;if(_3d6.legendResponse){var _3d8=_3d6.dynamicLayerInfos||_3d6.layerInfos;dojo.forEach(_3d8,function(_3d9,i){if(!_3d6._hideLayersInLegend||dojo.indexOf(_3d6._hideLayersInLegend,_3d9.id)==-1){var f=this._buildLegendItems(_3d6,_3d9,i);_3d7=_3d7||f;}},this);}else{if(_3d6.renderer){var id;if(!_3d6.url){id="fc_"+_3d6.id;}else{id=_3d6.url.substring(_3d6.url.lastIndexOf("/")+1,_3d6.url.length);}var _3da={id:id,name:null,subLayerIds:null,parentLayerId:-1};_3d7=this._buildLegendItems(_3d6,_3da,0);}}if(_3d7){dojo.style(dojo.byId(this.id+"_"+_3d6.id),"display","block");dojo.style(dojo.byId(this.id+"_msg"),"display","none");}}},_legendRequest:function(_3db){if(!_3db.loaded){dojo.connect(_3db,"onLoad",dojo.hitch(this,"_legendRequest"));return;}if(_3db.version>=10.01){return this._legendRequestServer(_3db);}else{return this._legendRequestTools(_3db);}},_legendRequestServer:function(_3dc){var url=_3dc.url;var pos=url.indexOf("?");if(pos>-1){url=url.substring(0,pos)+"/legend"+url.substring(pos);}else{url+="/legend";}var _3dd=_3dc._getToken();if(_3dd){url+="?token="+_3dd;}var _3de=dojo.hitch(this,"_processLegendResponse");var _3df={};_3df.f="json";if(_3dc._params.dynamicLayers){_3df.dynamicLayers=_3dc._params.dynamicLayers;if(_3df.dynamicLayers==="[{}]"){_3df.dynamicLayers="[]";}}var _3e0=esri.request({url:url,content:_3df,callbackParamName:"callback",load:function(_3e1,args){_3de(_3dc,_3e1,args);},error:esriConfig.defaults.io.errorHandler});return _3e0;},_legendRequestTools:function(_3e2){var p=_3e2.url.toLowerCase().indexOf("/rest/");var _3e3=_3e2.url.substring(0,p)+_3e2.url.substring(p+5,_3e2.url.length);var url=this._legendUrl+"?soapUrl="+escape(_3e3);if(!dojo.isIE||dojo.isIE>8){url+="&returnbytes=true";}var _3e4=dojo.hitch(this,"_processLegendResponse");var _3e5={};_3e5.f="json";var _3e6=esri.request({url:url,content:_3e5,callbackParamName:"callback",load:function(_3e7,args){_3e4(_3e2,_3e7,args);},error:esriConfig.defaults.io.errorHandler});return _3e6;},_processLegendResponse:function(_3e8,_3e9){if(_3e9&&_3e9.layers){_3e8.legendResponse=_3e9;dojo.empty(dojo.byId(this.id+"_"+_3e8.id));this._createLegendForLayer(_3e8);}else{console.log("Legend could not get generated for "+_3e8.url+": "+dojo.toJson(_3e9));}},_buildLegendItems:function(_3ea,_3eb,pos){var _3ec=false;var _3ed=dojo.byId(this.id+"_"+_3ea.id);var _3ee=_3eb.subLayerIds;var _3ef=_3eb.parentLayerId;if(_3ee){var node=dojo.create("div",{id:this.id+"_"+_3ea.id+"_"+_3eb.id+"_group",style:"display: none;","class":(_3ef==-1)?((pos>0)?"esriLegendGroupLayer":""):(this.alignRight?"esriLegendRight":"esriLegendLeft")},(_3ef==-1)?_3ed:dojo.byId(this.id+"_"+_3ea.id+"_"+_3ef+"_group"));if(dojo.isIE){dojo.style(dojo.byId(this.id+"_"+_3ea.id+"_"+_3eb.id+"_group"),"display","none");}dojo.create("td",{innerHTML:_3eb.name.replace(/[\<]/g,"&lt;").replace(/[\>]/g,"&gt;"),align:(this.alignRight?"right":"")},dojo.create("tr",{},dojo.create("tbody",{},dojo.create("table",{width:"95%","class":"esriLegendLayerLabel"},node))));}else{if(_3ea.visibleLayers&&(","+_3ea.visibleLayers+",").indexOf(","+_3eb.id+",")==-1){return _3ec;}var d=dojo.create("div",{id:this.id+"_"+_3ea.id+"_"+_3eb.id,style:"display:none;","class":(_3ef>-1)?(this.alignRight?"esriLegendRight":"esriLegendLeft"):""},(_3ef==-1)?_3ed:dojo.byId(this.id+"_"+_3ea.id+"_"+_3ef+"_group"));if(dojo.isIE){dojo.style(dojo.byId(this.id+"_"+_3ea.id+"_"+_3eb.id),"display","none");}dojo.create("td",{innerHTML:(_3eb.name)?_3eb.name.replace(/[\<]/g,"&lt;").replace(/[\>]/g,"&gt;"):"",align:(this.alignRight?"right":"")},dojo.create("tr",{},dojo.create("tbody",{},dojo.create("table",{width:"95%","class":"esriLegendLayerLabel"},d))));if(_3ea.legendResponse){_3ec=_3ec||this._buildLegendItems_Tools(_3ea,_3eb,d);}else{if(_3ea.renderer){_3ec=_3ec||this._buildLegendItems_Renderer(_3ea,_3eb,d);}}}return _3ec;},_buildLegendItems_Tools:function(_3f0,_3f1,node){var _3f2=_3f1.parentLayerId;var _3f3=esri.geometry.getScale(this.map);var _3f4=false;if(!this._respectCurrentMapScale||(this._respectCurrentMapScale&&this._isLayerInScale(_3f0,_3f1,_3f3))){for(var i=0;i<_3f0.legendResponse.layers.length;i++){if(_3f1.id==_3f0.legendResponse.layers[i].layerId){var _3f5=_3f0.legendResponse.layers[i].legend;if(_3f5.length==3&&_3f5[0].label.replace(/\s+/g,"").indexOf(":Band_")>-1){}else{var _3f6=dojo.create("tbody",{},dojo.create("table",{cellpadding:0,cellspacing:0,width:"95%","class":"esriLegendLayer"},node));dojo.forEach(_3f5,function(_3f7){if((_3f7.url&&_3f7.url.indexOf("http")===0)||(_3f7.imageData&&_3f7.imageData.length>0)){_3f4=true;this._buildRow_Tools(_3f7,_3f6,_3f0,_3f1.id);}},this);}break;}}}if(_3f4){dojo.style(dojo.byId(this.id+"_"+_3f0.id+"_"+_3f1.id),"display","block");if(_3f2>-1){dojo.style(dojo.byId(this.id+"_"+_3f0.id+"_"+_3f2+"_group"),"display","block");this._findParentGroup(_3f0.id,_3f0,_3f2);}}return _3f4;},_buildRow_Tools:function(_3f8,_3f9,_3fa,_3fb){var tr=dojo.create("tr",{},_3f9);var _3fc;var _3fd;if(this.alignRight){_3fc=dojo.create("td",{align:"right"},tr);_3fd=dojo.create("td",{align:"right",width:35},tr);}else{_3fd=dojo.create("td",{width:35},tr);_3fc=dojo.create("td",{},tr);}var src=_3f8.url;if((!dojo.isIE||dojo.isIE>8)&&_3f8.imageData&&_3f8.imageData.length>0){src="data:image/png;base64,"+_3f8.imageData;}else{if(_3f8.url.indexOf("http")!==0){src=_3fa.url+"/"+_3fb+"/images/"+_3f8.url;var _3fe=_3fa._getToken();if(_3fe){src+="?token="+_3fe;}}}var img=dojo.create("img",{src:src,border:0,style:"opacity:"+_3fa.opacity},_3fd);dojo.create("td",{innerHTML:_3f8.label.replace(/[\<]/g,"&lt;").replace(/[\>]/g,"&gt;"),align:(this.alignRight?"right":"")},dojo.create("tr",{},dojo.create("tbody",{},dojo.create("table",{width:"95%",dir:"ltr"},_3fc))));if(dojo.isIE<9){img.style.filter="alpha(opacity="+(_3fa.opacity*100)+")";}},_buildLegendItems_Renderer:function(_3ff,_400,node){var _401=_400.parentLayerId;var _402=esri.geometry.getScale(this.map);var _403=false;if(!this._respectCurrentMapScale||this._isLayerInScale(_3ff,_400,_402)){var _404;if(_3ff.renderer instanceof esri.renderer.UniqueValueRenderer){if(_3ff.renderer.infos&&_3ff.renderer.infos.length>0){_403=true;_404=dojo.create("tbody",{},dojo.create("table",{cellpadding:0,cellspacing:0,width:"95%","class":"esriLegendLayer"},node));dojo.forEach(_3ff.renderer.infos,function(_405,_406){var _407=null;if(_3ff._editable&&_3ff.types){_407=this._getTemplateFromTypes(_3ff.types,_405.value);}var _408=_405.label;if(!_408||_408.length===0){_408=_405.value;}this._buildRow_Renderer(_3ff,_405.symbol,_408,_407,_404);},this);}}if(_3ff.renderer instanceof esri.renderer.ClassBreaksRenderer){if(_3ff.renderer.infos&&_3ff.renderer.infos.length>0){_403=true;_404=dojo.create("tbody",{},dojo.create("table",{cellpadding:0,cellspacing:0,width:"95%","class":"esriLegendLayer"},node));dojo.forEach(_3ff.renderer.infos,function(_409,_40a){var _40b=_409.label;if(!_40b||_40b.length===0){_40b=_409.minValue+" - "+_409.maxValue;}this._buildRow_Renderer(_3ff,_409.symbol,_40b,null,_404);},this);}}if(_3ff.renderer instanceof esri.renderer.SimpleRenderer){_403=true;_404=dojo.create("tbody",{},dojo.create("table",{cellpadding:0,cellspacing:0,width:"95%","class":"esriLegendLayer"},node));var _40c=null;if(_3ff._editable&&_3ff.templates&&_3ff.templates.length>0){_40c=_3ff.templates[0];}this._buildRow_Renderer(_3ff,_3ff.renderer.symbol,_3ff.renderer.label,_40c,_404);}if(!_3ff._hideDefaultSymbol&&_3ff.renderer.defaultSymbol){_403=true;_404=dojo.create("tbody",{},dojo.create("table",{cellpadding:0,cellspacing:0,width:"95%","class":"esriLegendLayer"},node));this._buildRow_Renderer(_3ff,_3ff.renderer.defaultSymbol,_3ff.renderer.defaultLabel?_3ff.renderer.defaultLabel:"others",null,_404);}}if(_403){dojo.style(dojo.byId(this.id+"_"+_3ff.id+"_"+_400.id),"display","block");if(_401>-1){dojo.style(dojo.byId(this.id+"_"+_3ff.id+"_"+_401+"_group"),"display","block");this._findParentGroup(_3ff.id,_401);}}return _403;},_buildRow_Renderer:function(_40d,_40e,_40f,_410,_411){var tr=dojo.create("tr",{},_411);var _412;var _413;if(this.alignRight){_412=dojo.create("td",{align:"right"},tr);_413=dojo.create("td",{align:"right",width:35},tr);}else{_413=dojo.create("td",{width:35},tr);_412=dojo.create("td",{},tr);}var _414=30;if(_40e.type=="simplemarkersymbol"){_414=Math.min(Math.max(_414,_40e.size+12),125);}else{if(_40e.type=="picturemarkersymbol"){_414=Math.min(Math.max(_414,_40e.width),125);}}var div=dojo.create("div",{style:"width:"+_414+"px;height:"+_414+"px;"},_413);dojo.create("td",{innerHTML:_40f?_40f.replace(/[\<]/g,"&lt;").replace(/[\>]/g,"&gt;").replace(/^#/,""):"",align:(this.alignRight?"right":"")},dojo.create("tr",{},dojo.create("tbody",{},dojo.create("table",{width:"95%"},_412))));var _415=this._drawSymbol(div,_40e,_414,_414,_410,_40d.opacity);this._surfaceItems.push(_415);},_drawSymbol:function(node,sym,_416,_417,_418,_419){var _41a=esri.symbol.fromJson(sym.toJson());if(_41a.type==="simplelinesymbol"||_41a.type==="cartographiclinesymbol"||_41a.type==="textsymbol"){if(!_41a.color){return;}var rgba=_41a.color.toRgba();rgba[3]=rgba[3]*_419;_41a.color.setColor(rgba);}else{if(_41a.type==="simplemarkersymbol"||_41a.type==="simplefillsymbol"){if(!_41a.color){return;}var rgba=_41a.color.toRgba();rgba[3]=rgba[3]*_419;_41a.color.setColor(rgba);if(_41a.outline&&_41a.outline.color){rgba=_41a.outline.color.toRgba();rgba[3]=rgba[3]*_419;_41a.outline.color.setColor(rgba);}}else{if(_41a.type==="picturemarkersymbol"){node.style.opacity=_419;node.style.filter="alpha(opacity=("+_419*100+"))";}}}var _41b=_3bd.gfx.createSurface(node,_416,_417);if(dojo.isIE){var _41c=_41b.getEventSource();dojo.style(_41c,"position","relative");dojo.style(_41c.parentNode,"position","relative");}var _41d=this._getDrawingToolShape(_41a,_418)||esri.symbol.getShapeDescriptors(_41a);var _41e;try{_41e=_41b.createShape(_41d.defaultShape).setFill(_41d.fill).setStroke(_41d.stroke);}catch(e){_41b.clear();_41b.destroy();return;}var dim=_41b.getDimensions();var _41f={dx:dim.width/2,dy:dim.height/2};var bbox=_41e.getBoundingBox(),_420=bbox.width,_421=bbox.height;if(_420>_416||_421>_417){var _422=_420>_421?_420:_421;var _423=_416<_417?_416:_417;var _424=(_423-5)/_422;dojo.mixin(_41f,{xx:_424,yy:_424});}_41e.applyTransform(_41f);return _41b;},_getDrawingToolShape:function(_425,_426){var _427,_428=_426?_426.drawingTool||null:null;switch(_428){case "esriFeatureEditToolArrow":_427={type:"path",path:"M 10,1 L 3,8 L 3,5 L -15,5 L -15,-2 L 3,-2 L 3,-5 L 10,1 E"};break;case "esriFeatureEditToolTriangle":_427={type:"path",path:"M -10,14 L 2,-10 L 14,14 L -10,14 E"};break;case "esriFeatureEditToolRectangle":_427={type:"path",path:"M -10,-10 L 10,-10 L 10,10 L -10,10 L -10,-10 E"};break;case "esriFeatureEditToolCircle":_427={type:"circle",cx:0,cy:0,r:10};break;case "esriFeatureEditToolEllipse":_427={type:"ellipse",cx:0,cy:0,rx:10,ry:5};break;default:return null;}return {defaultShape:_427,fill:_425.getFill(),stroke:_425.getStroke()};},_repaintItems:function(){dojo.forEach(this._surfaceItems,function(_429){this._repaint(_429);},this);},_repaint:function(_42a){if(!_42a){return;}if(_42a.getStroke&&_42a.setStroke){_42a.setStroke(_42a.getStroke());}try{if(_42a.getFill&&_42a.setFill){_42a.setFill(_42a.getFill());}}catch(e){}if(_42a.children&&dojo.isArray(_42a.children)){dojo.forEach(_42a.children,this._repaint,this);}},_getTemplateFromTypes:function(_42b,_42c){for(var i=0;i<_42b.length;i++){if(_42b[i].id==_42c&&_42b[i].templates&&_42b[i].templates.length>0){return _42b[i].templates[0];}}return null;},_findParentGroup:function(_42d,_42e,_42f){var _430=_42e.layerInfos;for(var k=0;k<_430.length;k++){if(_42f==_430[k].id){if(_430[k].parentLayerId>-1){dojo.style(dojo.byId(this.id+"_"+_42d+"_"+_430[k].parentLayerId+"_group"),"display","block");this._findParentGroup(_42d,_42e,_430[k].parentLayerId);}break;}}},_addSubLayersToHide:function(_431){dojo.forEach(_431.layer._hideLayersInLegend,function(_432){for(var i=0;i<_431.layer.layerInfos.length;i++){if(_431.layer.layerInfos[i].id===_432&&_431.layer.layerInfos[i].subLayerIds){dojo.forEach(_431.layer.layerInfos[i].subLayerIds,function(_433){if(dojo.indexOf(_431.layer._hideLayersInLegend,_433)===-1){_431.layer._hideLayersInLegend.push(_433);}});}}});},_isLayerInScale:function(_434,_435,_436){var _437=true;if(_434.legendResponse&&_434.legendResponse.layers){for(var i=0;i<_434.legendResponse.layers.length;i++){var _438=_434.legendResponse.layers[i];if(_435.id==_438.layerId){var _439,_43a;if((!_434.minScale&&_434.minScale!==0)||(!_434.maxScale&&_434.maxScale!==0)){if(_438.minScale==0&&_434.tileInfo){_439=_434.tileInfo.lods[0].scale;}if(_438.maxScale==0&&_434.tileInfo){_43a=_434.tileInfo.lods[_434.tileInfo.lods.length-1].scale;}}else{_439=Math.min(_434.minScale,_438.minScale)||_434.minScale||_438.minScale;_43a=Math.max(_434.maxScale,_438.maxScale);}if((_439>0&&_439<_436)||_43a>_436){_437=false;}break;}}}else{if(_434.minScale||_434.maxScale){if((_434.minScale&&_434.minScale<_436)||_434.maxScale&&_434.maxScale>_436){_437=false;}}}return _437;},_getServiceTitle:function(_43b){var _43c=_43b._titleForLegend;if(!_43c){_43c=_43b.url;if(!_43b.url){_43c="";}else{if(_43b.url.indexOf("/MapServer")>-1){_43c=_43b.url.substring(0,_43b.url.indexOf("/MapServer"));_43c=_43c.substring(_43c.lastIndexOf("/")+1,_43c.length);}else{if(_43b.url.indexOf("/ImageServer")>-1){_43c=_43b.url.substring(0,_43b.url.indexOf("/ImageServer"));_43c=_43c.substring(_43c.lastIndexOf("/")+1,_43c.length);}else{if(_43b.url.indexOf("/FeatureServer")>-1){_43c=_43b.url.substring(0,_43b.url.indexOf("/FeatureServer"));_43c=_43c.substring(_43c.lastIndexOf("/")+1,_43c.length);}}}}if(_43b.name){if(_43c.length>0){_43c+=" - "+_43b.name;}else{_43c=_43b.name;}}}return _3bd.html.entities.encode(_43c);},_isSupportedLayerType:function(_43d){if(_43d&&(_43d.declaredClass==="esri.layers.ArcGISDynamicMapServiceLayer"||_43d.declaredClass==="esri.layers.ArcGISTiledMapServiceLayer"||_43d.declaredClass==="esri.layers.FeatureLayer"||_43d.declaredClass=="esri.layers.KMLLayer")){return true;}return false;}});dojo.mixin(esri.dijit.Legend,{ALIGN_LEFT:0,ALIGN_RIGHT:1});});},"dojo/data/util/filter":function(){define(["../../_base/lang"],function(lang){var _43e={};lang.setObject("dojo.data.util.filter",_43e);_43e.patternToRegExp=function(_43f,_440){var rxp="^";var c=null;for(var i=0;i<_43f.length;i++){c=_43f.charAt(i);switch(c){case "\\":rxp+=c;i++;rxp+=_43f.charAt(i);break;case "*":rxp+=".*";break;case "?":rxp+=".";break;case "$":case "^":case "/":case "+":case ".":case "|":case "(":case ")":case "{":case "}":case "[":case "]":rxp+="\\";default:rxp+=c;}}rxp+="$";if(_440){return new RegExp(rxp,"mi");}else{return new RegExp(rxp,"m");}};return _43e;});},"esri/dijit/editing/TemplatePicker":function(){define("esri/dijit/editing/TemplatePicker",["dijit","dojo","dojox","dojo/require!dojo/data/ItemFileReadStore,dojox/grid/DataGrid,dijit/_Widget,dijit/_Templated,dojox/gfx,esri/utils,esri/symbol"],function(_441,dojo,_442){dojo.provide("esri.dijit.editing.TemplatePicker");dojo.require("dojo.data.ItemFileReadStore");dojo.require("dojox.grid.DataGrid");dojo.require("dijit._Widget");dojo.require("dijit._Templated");dojo.require("dojox.gfx");dojo.require("esri.utils");dojo.require("esri.symbol");dojo.declare("esri.dijit.editing.TemplatePicker",[_441._Widget,_441._Templated],{widgetsInTemplate:true,templateString:"<div class=\"templatePicker\">\r\n\r\n  <table dojoType=\"dojox.grid.DataGrid\" noDataMessage=\"${emptyMessage}\" selectionMode=\"none\" autoHeight=\"${_rows}\" autoWidth=\"${_autoWidth}\"\r\n         query=\"{ query: '*' }\" dojoAttachPoint=\"grid\" class=\"grid\">\r\n  </table>\r\n  \r\n</div>",basePath:dojo.moduleUrl("esri.dijit.editing"),featureLayers:null,items:null,grouping:true,showTooltip:false,maxLabelLength:0,rows:4,columns:3,surfaceWidth:30,surfaceHeight:30,emptyMessage:"",useLegend:true,legendCache:{},_uniqueId:{id:0},_assumedCellWidth:90,_initialAutoWidth:300,_initialAutoHeight:200,_ieTimer:150,constructor:function(_443,_444){_443=_443||{};if(!_443.items&&!_443.featureLayers){console.error("TemplatePicker: please provide 'featureLayers' or 'items' parameter in the constructor");}this._dojo14x=(dojo.version.minor>=4);this._itemWidgets={};if(_443.featureLayers&&_443.featureLayers.length){this._flChanged=1;}this._nls=dojo.getObject("bundle.widgets.templatePicker",false,esri);this.emptyMessage=_443.emptyMessage||(this._nls&&this._nls.creationDisabled)||"";},postMixInProperties:function(){this.inherited(arguments);this._preprocess();},startup:function(){this.inherited(arguments);if(this.rows==="auto"&&this.columns==="auto"){var box=dojo.contentBox(this.domNode);if(!box.w){this.domNode.style.width=this._initialAutoWidth+"px";}if(!box.h){this.domNode.style.height=this._initialAutoHeight+"px";}box=dojo.contentBox(this.domNode);this._columns=Math.floor(box.w/this._assumedCellWidth)||1;}this._applyGridPatches();this._setGridLayout();dojo.connect(this.grid,"onRowClick",this,this._rowClicked);this._setGridData();this._toggleTooltip();if(dojo.isIE<9){this._repaintItems=dojo.hitch(this,this._repaintItems);setTimeout(this._repaintItems,this._ieTimer);}},destroy:function(){this.showTooltip=false;this._toggleTooltip();this._clearLegendInfo();this.featureLayers=this.items=this.grid=this._flItems=this._itItems=this._groupRowIndices=this._selectedCell=this._selectedInfo=this._selectedItem=null;this.inherited(arguments);},getSelected:function(){return this._selectedCell?this._selectedItem:null;},clearSelection:function(){var _445=this._selectedCell,info=this._selectedInfo;if(_445){this._rowClicked({cellNode:_445,rowIndex:info.selRow,cellIndex:info.selCol});}},update:function(_446){var _447=(this.rows==="auto"&&this.columns==="auto"&&_446)?true:false,grid=this.grid,box;if(_447){var _448=this.domNode,id=_448.id,_449,item=dojo.query("#"+id+".templatePicker div.item")[0];box=dojo.contentBox(_448);item=item&&item.parentNode;if(item){_449=dojo.coords(item).w;}else{_449=this._assumedCellWidth;}this._columns=Math.floor((box.w-grid.views.views[0].getScrollbarWidth())/_449);this._columns=this._columns||1;}var _44a=this._rows;this._preprocess();var _44b=this._rows;this._setGridLayout();this._setGridData();if(_44b!==_44a){grid.set("autoHeight",this._rows,false);}if(_447){grid._resize({w:box.w,h:box.h});grid.viewsHeaderNode.style.display="none";}else{grid.update();}this._toggleTooltip();var self=this,_44c=this.getSelected();if(_44c){grid.store.fetch({onComplete:function(its){var _44d=self._locate(_44c,self._selectedInfo,its);var _44e=_44d&&grid.views.views[0].getCellNode(_44d[0],_44d[1]);if(_44e){self._rowClicked({cellNode:_44e,rowIndex:_44d[0],cellIndex:_44d[1]},true);}}});}if(dojo.isIE<9){setTimeout(this._repaintItems,this._ieTimer);}var _44f=this.featureLayers,_450=this.items;if((!_44f||!_44f.length)&&(!_450||!_450.length)&&grid&&this.emptyMessage){grid.showMessage(this.emptyMessage);}},onSelectionChange:function(){},_setUseLegendAttr:function(use){var _451=this.useLegend;if(!this._started||_451!==use){if(use){this._flChanged=1;}else{this._clearLegendInfo();}}this.useLegend=use;},_setFeatureLayersAttr:function(_452){var _453=this.featureLayers;if(!this._started||_453!==_452){this._flChanged=1;}this.featureLayers=_452;},_preprocess:function(){if(this.items){this.grouping=false;}this._autoWidth=false;if(this.rows==="auto"||this.columns==="auto"){this._autoWidth=true;}var _454;if(this.featureLayers){if(this.useLegend&&this._flChanged){this._legendIndices=[];this._loadingIndices=[];this._legendSymbols={};this._ignoreLegends();this._loadingLegends=[];clearTimeout(this._legendTimer);this._legendTimer=null;this._processSelectionLayers();this._flChanged=0;}_454=this._flItems=this._getItemsFromLayers(this.featureLayers);}else{_454=this._itItems=this._getItemsFromItems(this.items);}if(this.rows==="auto"&&this.columns==="auto"){if(!this._started){this._rows=false;this._columns=null;this._autoWidth=false;}return;}var len=0;this._rows=this.rows;this._columns=this.columns;if(this.rows==="auto"){if(this.featureLayers){if(this.grouping){len=_454.length;dojo.forEach(_454,function(_455){len+=Math.ceil(_455.length/this.columns);},this);}else{dojo.forEach(_454,function(_456){len+=_456.length;},this);len=Math.ceil(len/this.columns);}}else{len=Math.ceil(_454.length/this.columns);}this._rows=len;}else{if(this.columns==="auto"){if(this.featureLayers){if(this.grouping){len=3;}else{dojo.forEach(_454,function(_457){len+=_457.length;},this);len=Math.ceil(len/this.rows);}}else{len=Math.ceil(_454.length/this.rows);}this._columns=len;}}},_processSelectionLayers:function(){var map,_458,info,_459,key,_45a,_45b,_45c={};dojo.forEach(this.featureLayers,function(_45d,idx){if(_45d.mode===esri.layers.FeatureLayer.MODE_SELECTION&&_45d._map&&_45d.url&&_45d._params.drawMode&&!_45d.source){_458=dojo.trim(_45d._url.path).replace(/\/(MapServer|FeatureServer).*/ig,"/MapServer").replace(/^https?:\/\//ig,"").toLowerCase();info=(_45c[_458]=_45c[_458]||{});_459=(info.featureLayers=info.featureLayers||{});_45a=(info.indices=info.indices||[]);_459[idx]=_45d;_45a.push(idx);map=_45d._map;}});if(map){dojo.forEach(map.layerIds,function(_45e){_45e=map.getLayer(_45e);if(_45e&&_45e.url&&(_45e.getImageUrl||_45e.getTileUrl)&&_45e.loaded&&_45e.version>=10.1){_458=dojo.trim(_45e._url.path).replace(/(\/MapServer).*/ig,"$1");key=_458.replace(/^https?:\/\//ig,"").toLowerCase();if(_45c[key]&&(!_45c[key].mapServiceUrl)){info=_45c[key];info.mapServiceUrl=_458;info.mapServiceLayer=_45e;this._legendIndices=this._legendIndices.concat(info.indices);_45b=this._fetchLegend({pickerInstance:this,info:info},key);if(_45b.then){this._loadingIndices=this._loadingIndices.concat(info.indices);this._loadingLegends.push(_45b);}else{this._processLegendResponse(_45b,info);}}}},this);}},_fetchLegend:function(_45f,key){var _460=esri.dijit.editing.TemplatePicker.prototype,_461=_460.legendCache[key];if(!_461){_461=(_460.legendCache[key]=esri.request({url:_45f.info.mapServiceUrl+"/legend",content:{f:"json"},callbackParamName:"callback"}));_461._contexts=[_45f];_461.addBoth(function(_462){if(_461.canceled){return;}_460.legendCache[key]=_462;var _463=_461._contexts;_461._contexts=null;dojo.forEach(_463,function(ctxt){var _464=ctxt.pickerInstance,info=ctxt.info,_465;if(_464._destroyed){return;}dojo.forEach(info.indices,function(idx){_465=dojo.indexOf(_464._loadingIndices,idx);if(_465>-1){_464._loadingIndices.splice(_465,1);}});_465=dojo.indexOf(_464._loadingLegends,_461);if(_465>-1){_464._loadingLegends.splice(_465,1);}_464._processLegendResponse(_462,info);});});}else{if(_461.then){_461._contexts.push(_45f);}}return _461;},_clearLegendInfo:function(){clearTimeout(this._legendTimer);this._ignoreLegends();this._legendIndices=this._loadingIndices=this._legendSymbols=this._loadingLegends=this._legendTimer=null;},_ignoreLegends:function(){if(this._loadingLegends){dojo.forEach(this._loadingLegends,function(_466){var _467=-1;dojo.some(_466._contexts,function(ctxt,idx){if(ctxt.pickerInstance===this){_467=idx;}return (_467>-1);},this);if(_467>-1){_466._contexts.splice(_467,1);}},this);}},_processLegendResponse:function(_468,info){if(_468&&!(_468 instanceof Error)){dojo.forEach(info.indices,function(idx){var _469=info.featureLayers[idx].layerId,i,_46a=info.mapServiceUrl+"/"+_469+"/images/",_46b=info.mapServiceLayer._getToken(),_46c,obj,_46d,url;if(this._legendSymbols[idx]){return;}_46c=null;dojo.some(_468.layers,function(_46e){if(_46e.layerId==_469){_46c=_46e;}return !!_46c;});if(_46c){obj=(this._legendSymbols[idx]={});dojo.forEach(_46c.legend,function(_46f){_46d=_46f.values;if(_46d&&_46d.length){for(i=0;i<_46d.length;i++){obj[_46d[i]]=_46f;}}else{obj.defaultSymbol=_46f;}url=_46f.url;if(url&&!_46f._fixed){_46f._fixed=1;if((url.search(/https?\:/)===-1)){_46f.url=_46a+url;}if(_46b&&_46f.url.search(/https?\:/)!==-1){_46f.url+=(((_46f.url.indexOf("?")>-1)?"&":"?")+"token="+_46b);}}});}},this);}else{var _470;dojo.forEach(info.indices,function(idx){_470=dojo.indexOf(this._legendIndices,idx);if(_470>-1){this._legendIndices.splice(_470,1);}},this);}var self=this;if(self._started&&!self._legendTimer){self._legendTimer=setTimeout(function(){clearTimeout(self._legendTimer);self._legendTimer=null;if(!self._destroyed){self.update();}},0);}},_applyGridPatches:function(){var grid=this.grid;var _471=grid.adaptWidth,_472,i,view;grid.adaptWidth=function(){_472=this.views.views;for(i=0;view=_472[i];i++){dojo.style(view.headerNode,"display","block");}_471.apply(this,arguments);for(i=0;view=_472[i];i++){dojo.style(view.headerNode,"display","none");}};if(this._dojo14x){if(this.rows!=="auto"&&this.columns!=="auto"){var _473=dojo.connect(grid,"_onFetchComplete",this,function(){dojo.disconnect(_473);this.grid.set("autoHeight",this._rows);});}dojo.connect(grid,"_onDelete",this,this._destroyItems);dojo.connect(grid,"_clearData",this,this._destroyItems);dojo.connect(grid,"destroy",this,this._destroyItems);var _474=grid.focus;if(_474&&_474.findAndFocusGridCell){_474.findAndFocusGridCell=function(){return false;};}}},_setGridLayout:function(){var _475=function(_476){return function(_477,_478){return this._cellGet(_476,_477,_478);};};var _479=dojo.hitch(this,this._cellFormatter),_47a=[],cols=this._columns,i;for(i=0;i<cols;i++){_47a.push({field:"cell"+i,get:dojo.hitch(this,_475(i)),formatter:_479});}var _47b={cells:[_47a]};if(this.grouping){var _47c={field:"groupName",colSpan:cols,get:dojo.hitch(this,this._cellGetGroup),formatter:dojo.hitch(this,this._cellGroupFormatter)};_47b.cells.push([_47c]);}var grid=this.grid,_47d=_442.grid.DataGrid.prototype.rowsPerPage;grid.set("rowsPerPage",(this._rows>_47d)?this._rows:_47d);grid.set("structure",_47b);},_setGridData:function(){var _47e=[];if(this.grouping){this._groupRowIndices=[];var _47f,_480,cols=this._columns;dojo.forEach(this._flItems,function(_481,idx){_47e.push({});var _482=(idx===0)?0:(_47f+_480+1);this._groupRowIndices.push(_482);_47f=_482;_480=Math.ceil(_481.length/cols);_47e=_47e.concat(this._getStoreItems(_481));},this);}else{if(this.featureLayers){dojo.forEach(this._flItems,function(_483){_47e=_47e.concat(_483);});_47e=this._getStoreItems(_47e);}else{_47e=this._getStoreItems(this._itItems);}}var _484=new dojo.data.ItemFileReadStore({data:{items:_47e}});this.grid.setStore(_484);},_toggleTooltip:function(){if(this.showTooltip){if(this.tooltip){return;}this.tooltip=dojo.create("div",{"class":"tooltip"},this.domNode);this.tooltip.style.display="none";this.tooltip.style.position="fixed";var grid=this.grid;this._mouseOverConnect=dojo.connect(grid,"onCellMouseOver",this,this._cellMouseOver);this._mouseOutConnect=dojo.connect(grid,"onCellMouseOut",this,this._cellMouseOut);}else{if(this.tooltip){dojo.disconnect(this._mouseOverConnect);dojo.disconnect(this._mouseOutConnect);dojo.destroy(this.tooltip);this.tooltip=null;}}},_rowClicked:function(evt,_485){var _486=evt.cellNode,row=evt.rowIndex,col=evt.cellIndex;var cell=this._getCellInfo(_486,row,col);if(!cell){return;}var _487=this.grid.store;if(_487.getValue(cell,"loadingCell")){return;}if(this._selectedCell){dojo.removeClass(this._selectedCell,"selectedItem");}if(_486!==this._selectedCell){dojo.addClass(_486,"selectedItem");this._selectedCell=_486;this._selectedItem={featureLayer:_487.getValue(cell,"layer"),type:_487.getValue(cell,"type"),template:_487.getValue(cell,"template"),symbolInfo:_487.getValue(cell,"symbolInfo"),item:this._getItem(cell)};this._selectedInfo={selRow:row,selCol:col,index1:_487.getValue(cell,"index1"),index2:_487.getValue(cell,"index2"),index:_487.getValue(cell,"index")};}else{this._selectedCell=this._selectedInfo=this._selectedItem=null;}if(!_485){this.onSelectionChange();}},_locate:function(_488,info,_489){var _48a=this.grid.store,cols=new Array(this._columns);var _48b,_48c=info.index1,_48d=info.index2,_48e=info.index,item=_488.item;dojo.some(_489,function(_48f,_490){return dojo.some(cols,function(_491,_492){var cell=_48a.getValue(_48f,"cell"+_492);if(cell&&(item?(_48e===_48a.getValue(cell,"index")):(_48c===_48a.getValue(cell,"index1")&&_48d===_48a.getValue(cell,"index2")))){_48b=[_490,_492];return true;}else{return false;}});});return _48b;},_getCellInfo:function(_493,row,col){if(!_493){return;}var grid=this.grid;var item=grid.getItem(row);var cell=grid.store.getValue(item,"cell"+col);return cell;},_getItem:function(cell){var _494=this.items;if(_494){return _494[this.grid.store.getValue(cell,"index")];}},_cellMouseOver:function(evt){var _495=this.tooltip;var _496=evt.cellNode,row=evt.rowIndex,col=evt.cellIndex;var cell=this._getCellInfo(_496,row,col);if(_495&&cell){var _497=this.grid.store;var _498=_497.getValue(cell,"template");var type=_497.getValue(cell,"type");var _499=_497.getValue(cell,"symbolInfo");var _49a=_497.getValue(cell,"layer");var item=this._getItem(cell);var _49b=(item&&(item.label+(item.description?(": "+item.description):"")))||(_498&&(_498.name+(_498.description?(": "+_498.description):"")))||(type&&type.name)||(_499&&(_499.label+(_499.description?(": "+_499.description):"")))||((_49a&&_49a.name+": ")+"Default");_495.style.display="none";_495.innerHTML=_49b;var _49c=dojo.coords(_496.firstChild);dojo.style(_495,{left:(_49c.x)+"px",top:(_49c.y+_49c.h+5)+"px"});_495.style.display="";}},_cellMouseOut:function(){var _49d=this.tooltip;if(_49d){_49d.style.display="none";}},_destroyItems:function(){var _49e=this._itemWidgets,w;for(w in _49e){if(!_49e[w]){continue;}_49e[w].destroy();delete _49e[w];}},_repaintItems:function(){var _49f=this._itemWidgets,w;for(w in _49f){var _4a0=_49f[w];if(_4a0){_4a0._repaint(_4a0._surface);}}},_getStoreItems:function(_4a1){var uid=this._uniqueId;_4a1=dojo.map(_4a1,function(item){return dojo.mixin({"surfaceId":"tpick-surface-"+(uid.id++)},item);});var len=_4a1.length,_4a2=0,obj={},k=0,prop,_4a3=[],flag=true,cols=this._columns;while(_4a2<len){flag=true;prop="cell"+k;obj[prop]=_4a1[_4a2];_4a2++;k++;if(k%cols===0){flag=false;_4a3.push(obj);obj={};k=0;}}if(flag&&len){_4a3.push(obj);}return _4a3;},_getItemsFromLayers:function(_4a4){var _4a5=[];dojo.forEach(_4a4,function(_4a6,_4a7){_4a5.push(this._getItemsFromLayer(_4a6,_4a7));},this);return _4a5;},_getItemsFromLayer:function(_4a8,_4a9){var _4aa=[];if(this.useLegend&&dojo.indexOf(this._loadingIndices,_4a9)>-1){return [{label:(this._nls&&this._nls.loading)||"",symbol:null,layer:_4a8,type:null,template:null,index1:_4a9,index2:0,loadingCell:1}];}var _4ab=[];_4ab=_4ab.concat(_4a8.templates);dojo.forEach(_4a8.types,function(_4ac){var _4ad=_4ac.templates;dojo.forEach(_4ad,function(_4ae){_4ae._type_=_4ac;});_4ab=_4ab.concat(_4ad);});_4ab=dojo.filter(_4ab,esri._isDefined);var _4af=_4a8.renderer;if(_4af){var _4b0=_4af.declaredClass.replace("esri.renderer.","");if(_4ab.length>0){dojo.forEach(_4ab,function(_4b1){var _4b2=_4b1.prototype;if(_4b2){var _4b3=_4af.getSymbol(_4b2);if(_4b3){var _4b4=null,pms,_4b5;if(this.useLegend&&dojo.indexOf(this._legendIndices,_4a9)>-1){_4b5=this._legendSymbols&&this._legendSymbols[_4a9];if(_4b5){switch(_4b0){case "SimpleRenderer":_4b4=_4b5.defaultSymbol;break;case "UniqueValueRenderer":dojo.some(_4af.infos,function(info){if(info.symbol===_4b3){_4b4=_4b5[info.value];}return !!_4b4;});break;case "ClassBreaksRenderer":dojo.some(_4af.infos,function(info){if(info.symbol===_4b3){_4b4=_4b5[info.maxValue];}return !!_4b4;});break;}}if(_4b4){pms=dojo.fromJson(dojo.toJson(esri.symbol.defaultPictureMarkerSymbol));pms.url=_4b4.url;pms.imageData=_4b4.imageData;pms.contentType=_4b4.contentType;pms.width=_4b4.width;pms.height=_4b4.height;if(!esri._isDefined(pms.width)||!esri._isDefined(pms.height)){pms.width=15;pms.height=15;}_4b4=new esri.symbol.PictureMarkerSymbol(pms);}}_4aa.push({label:this._trimLabel(_4b1.name),symbol:_4b4||_4b3,legendOverride:!!_4b4,layer:_4a8,type:_4b1._type_,template:_4b1,index1:_4a9,index2:_4aa.length});}}delete _4b1._type_;},this);}else{var _4b6=[];if(_4b0==="TemporalRenderer"){_4af=_4af.observationRenderer;if(_4af){_4b0=_4af.declaredClass.replace("esri.renderer.","");}}switch(_4b0){case "SimpleRenderer":_4b6=[{symbol:_4af.symbol,label:_4af.label,description:_4af.description}];break;case "UniqueValueRenderer":case "ClassBreaksRenderer":_4b6=_4af.infos;break;}_4aa=dojo.map(_4b6,function(info,idx){return {label:this._trimLabel(info.label),description:info.description,symbolInfo:dojo.mixin({constructor:function(){}},info),symbol:info.symbol,layer:_4a8,index1:_4a9,index2:idx};},this);}}return _4aa;},_getItemsFromItems:function(_4b7){return dojo.map(_4b7,function(item,idx){item=dojo.mixin({index:idx},item);item.label=this._trimLabel(item.label);return item;},this);},_trimLabel:function(_4b8){var max=this.maxLabelLength;if(max&&_4b8){if(_4b8.length>max){_4b8=_4b8.substr(0,max)+"...";}}return _4b8||"";},_cellGet:function(_4b9,_4ba,_4bb){if(!_4bb){return "";}return this.grid.store.getValue(_4bb,"cell"+_4b9);},_cellFormatter:function(_4bc){if(_4bc){var _4bd=this._itemWidgets,_4be=this.grid.store;var sid=_4be.getValue(_4bc,"surfaceId");var w=_4bd[sid];if(!w){w=(_4bd[sid]=new esri.dijit.editing.TemplatePickerItem({id:sid,label:_4be.getValue(_4bc,"label"),symbol:_4be.getValue(_4bc,"symbol"),legendOverride:_4be.getValue(_4bc,"legendOverride"),surfaceWidth:this.surfaceWidth,surfaceHeight:this.surfaceHeight,template:_4be.getValue(_4bc,"template")}));}return w||"";}else{return "";}},_cellGetGroup:function(_4bf,_4c0){if(!this._groupRowIndices){return "";}var _4c1=dojo.indexOf(this._groupRowIndices,_4bf);if(!_4c0||_4c1===-1){return "";}return (this.featureLayers[_4c1]&&this.featureLayers[_4c1].name)||"";},_cellGroupFormatter:function(_4c2){if(_4c2){return "<div class='groupLabel'>"+_4c2+"</div>";}else{return "";}}});dojo.declare("esri.dijit.editing.TemplatePickerItem",[_441._Widget,_441._Templated],{templateString:"<div class='item' style='text-align: center;'>"+"<div class='itemSymbol' dojoAttachPoint='_surfaceNode'></div>"+"<div class='itemLabel'>${label}</div>"+"</div>",startup:function(){if(this._started){return;}this.inherited(arguments);this._surface=this._draw(this._surfaceNode,this.symbol,this.surfaceWidth,this.surfaceHeight,this.template);},_draw:function(node,_4c3,_4c4,_4c5,_4c6){if(!_4c3){return;}var _4c7=_442.gfx.createSurface(node,_4c4,_4c5);if(dojo.isIE<9){var _4c8=_4c7.getEventSource();dojo.style(_4c8,"position","relative");dojo.style(_4c8.parentNode,"position","relative");}var _4c9=(!this.legendOverride&&this._getDrawingToolShape(_4c3,_4c6))||esri.symbol.getShapeDescriptors(_4c3);var _4ca;try{_4ca=_4c7.createShape(_4c9.defaultShape).setFill(_4c9.fill).setStroke(_4c9.stroke);}catch(e){_4c7.clear();_4c7.destroy();return;}var dim=_4c7.getDimensions();var _4cb={dx:dim.width/2,dy:dim.height/2};var bbox=_4ca.getBoundingBox(),_4cc=bbox.width,_4cd=bbox.height;if(_4cc>_4c4||_4cd>_4c5){var _4ce=_4cc>_4cd?_4cc:_4cd;var _4cf=_4c4<_4c5?_4c4:_4c5;var _4d0=(_4cf-5)/_4ce;dojo.mixin(_4cb,{xx:_4d0,yy:_4d0});}_4ca.applyTransform(_4cb);return _4c7;},_getDrawingToolShape:function(_4d1,_4d2){var _4d3,_4d4=_4d2?_4d2.drawingTool||null:null;switch(_4d4){case "esriFeatureEditToolArrow":_4d3={type:"path",path:"M 10,1 L 3,8 L 3,5 L -15,5 L -15,-2 L 3,-2 L 3,-5 L 10,1 E"};break;case "esriFeatureEditToolLeftArrow":_4d3={type:"path",path:"M -15,1 L -8,8 L -8,5 L 10,5 L 10,-2 L -8,-2 L -8,-5 L -15,1 E"};break;case "esriFeatureEditToolRightArrow":_4d3={type:"path",path:"M 10,1 L 3,8 L 3,5 L -15,5 L -15,-2 L 3,-2 L 3,-5 L 10,1 E"};break;case "esriFeatureEditToolUpArrow":_4d3={type:"path",path:"M 1,-10 L 8,-3 L 5,-3 L 5,15 L -2,15 L -2,-3 L -5,-3 L 1,-10 E"};break;case "esriFeatureEditToolDownArrow":_4d3={type:"path",path:"M 1,15 L 8,8 L 5,8 L 5,-10 L -2,-10 L -2,8 L -5,8 L 1,15 E"};break;case "esriFeatureEditToolTriangle":_4d3={type:"path",path:"M -10,14 L 2,-10 L 14,14 L -10,14 E"};break;case "esriFeatureEditToolRectangle":_4d3={type:"path",path:"M -10,-10 L 10,-10 L 10,10 L -10,10 L -10,-10 E"};break;case "esriFeatureEditToolCircle":_4d3={type:"circle",cx:0,cy:0,r:10};break;case "esriFeatureEditToolEllipse":_4d3={type:"ellipse",cx:0,cy:0,rx:10,ry:5};break;case "esriFeatureEditToolFreehand":if(_4d1.type==="simplelinesymbol"||_4d1.type==="cartographiclinesymbol"){_4d3={type:"path",path:"m -11, -7c-1.5,-3.75 7.25,-9.25 12.5,-7c5.25,2.25 6.75,9.75 3.75,12.75c-3,3 -3.25,2.5 -9.75,5.25c-6.5,2.75 -7.25,14.25 2,15.25c9.25,1 11.75,-4 13.25,-6.75c1.5,-2.75 3.5,-11.75 12,-6.5"};}else{_4d3={type:"path",path:"M 10,-13 c3.1,0.16667 4.42564,2.09743 2.76923,3.69231c-2.61025,2.87179 -5.61025,5.6718 -6.14358,6.20513c-0.66667,0.93333 -0.46667,1.2 -0.53333,1.93333c-0.00001,0.86666 0.6,1.66667 1.13334,2c1.03077,0.38462 2.8,0.93333 3.38974,1.70769c0.47693,0.42564 0.87693,0.75897 1.41026,1.75897c0.13333,1.06667 -0.46667,2.86667 -1.8,3.8c-0.73333,0.73333 -3.86667,2.66666 -4.86667,3.13333c-0.93333,0.8 -7.4,3.2 -7.6,3.06667c-1.06667,0.46667 -4.73333,1.13334 -5.2,1.26667c-1.6,0.33334 -4.6,0.4 -6.25128,0.05128c-1.41539,-0.18462 -2.34872,-2.31796 -1.41539,-4.45129c0.93333,-1.73333 1.86667,-3.13333 2.64615,-3.85641c1.28718,-1.47692 2.57437,-2.68204 3.88718,-3.54359c0.88718,-1.13845 1.8,-1.33333 2.26666,-2.45641c0.33334,-0.74359 0.37949,-1.7641 0.06667,-2.87692c-0.66666,-1.46666 -1.66666,-1.86666 -2.98975,-2.2c-1.27692,-0.26666 -2.12307,-0.64102 -3.27692,-1.46666c-0.66667,-1.00001 -1.01538,-3.01539 0.73333,-4.06667c1.73333,-1.2 3.6,-1.93333 4.93333,-2.2c1.33333,-0.46667 4.84104,-1.09743 5.84103,-1.23076c1.60001,-0.46667 6.02564,-0.50257 7.29231,-0.56924z"};}break;default:return null;}return {defaultShape:_4d3,fill:_4d1.getFill(),stroke:_4d1.getStroke()};},_repaint:function(_4d5){if(!_4d5){this._surface=this._draw(this._surfaceNode,this.symbol,this.surfaceWidth,this.surfaceHeight,this.template);return;}if(_4d5.getStroke&&_4d5.setStroke){_4d5.setStroke(_4d5.getStroke());}if(_4d5.getFill&&_4d5.setFill){_4d5.setFill(_4d5.getFill());}if(_4d5.children&&dojo.isArray(_4d5.children)){dojo.forEach(_4d5.children,this._repaint,this);}},destroy:function(){if(this._surface){this._surface.destroy();delete this._surface;}this.inherited(arguments);}});});},"dijit/Menu":function(){define("dijit/Menu",["require","dojo/_base/array","dojo/_base/declare","dojo/_base/event","dojo/dom","dojo/dom-attr","dojo/dom-geometry","dojo/dom-style","dojo/keys","dojo/_base/lang","dojo/on","dojo/sniff","dojo/_base/window","dojo/window","./popup","./DropDownMenu","dojo/ready"],function(_4d6,_4d7,_4d8,_4d9,dom,_4da,_4db,_4dc,keys,lang,on,has,win,_4dd,pm,_4de,_4df){if(has("dijit-legacy-requires")){_4df(0,function(){var _4e0=["dijit/MenuItem","dijit/PopupMenuItem","dijit/CheckedMenuItem","dijit/MenuSeparator"];_4d6(_4e0);});}return _4d8("dijit.Menu",_4de,{constructor:function(){this._bindings=[];},targetNodeIds:[],selector:"",contextMenuForWindow:false,leftClickToOpen:false,refocus:true,postCreate:function(){if(this.contextMenuForWindow){this.bindDomNode(this.ownerDocumentBody);}else{_4d7.forEach(this.targetNodeIds,this.bindDomNode,this);}this.inherited(arguments);},_iframeContentWindow:function(_4e1){return _4dd.get(this._iframeContentDocument(_4e1))||this._iframeContentDocument(_4e1)["__parent__"]||(_4e1.name&&win.doc.frames[_4e1.name])||null;},_iframeContentDocument:function(_4e2){return _4e2.contentDocument||(_4e2.contentWindow&&_4e2.contentWindow.document)||(_4e2.name&&win.doc.frames[_4e2.name]&&win.doc.frames[_4e2.name].document)||null;},bindDomNode:function(node){node=dom.byId(node,this.ownerDocument);var cn;if(node.tagName.toLowerCase()=="iframe"){var _4e3=node,_4e4=this._iframeContentWindow(_4e3);cn=win.body(_4e4.document);}else{cn=(node==win.body(this.ownerDocument)?this.ownerDocument.documentElement:node);}var _4e5={node:node,iframe:_4e3};_4da.set(node,"_dijitMenu"+this.id,this._bindings.push(_4e5));var _4e6=lang.hitch(this,function(cn){var _4e7=this.selector,_4e8=_4e7?function(_4e9){return on.selector(_4e7,_4e9);}:function(_4ea){return _4ea;},self=this;return [on(cn,_4e8(this.leftClickToOpen?"click":"contextmenu"),function(evt){_4d9.stop(evt);self._scheduleOpen(this,_4e3,{x:evt.pageX,y:evt.pageY});}),on(cn,_4e8("keydown"),function(evt){if(evt.shiftKey&&evt.keyCode==keys.F10){_4d9.stop(evt);self._scheduleOpen(this,_4e3);}})];});_4e5.connects=cn?_4e6(cn):[];if(_4e3){_4e5.onloadHandler=lang.hitch(this,function(){var _4eb=this._iframeContentWindow(_4e3);cn=win.body(_4eb.document);_4e5.connects=_4e6(cn);});if(_4e3.addEventListener){_4e3.addEventListener("load",_4e5.onloadHandler,false);}else{_4e3.attachEvent("onload",_4e5.onloadHandler);}}},unBindDomNode:function(_4ec){var node;try{node=dom.byId(_4ec,this.ownerDocument);}catch(e){return;}var _4ed="_dijitMenu"+this.id;if(node&&_4da.has(node,_4ed)){var bid=_4da.get(node,_4ed)-1,b=this._bindings[bid],h;while((h=b.connects.pop())){h.remove();}var _4ee=b.iframe;if(_4ee){if(_4ee.removeEventListener){_4ee.removeEventListener("load",b.onloadHandler,false);}else{_4ee.detachEvent("onload",b.onloadHandler);}}_4da.remove(node,_4ed);delete this._bindings[bid];}},_scheduleOpen:function(_4ef,_4f0,_4f1){if(!this._openTimer){this._openTimer=this.defer(function(){delete this._openTimer;this._openMyself({target:_4ef,iframe:_4f0,coords:_4f1});},1);}},_openMyself:function(args){var _4f2=args.target,_4f3=args.iframe,_4f4=args.coords;this.currentTarget=_4f2;if(_4f4){if(_4f3){var ifc=_4db.position(_4f3,true),_4f5=this._iframeContentWindow(_4f3),_4f6=_4db.docScroll(_4f5.document);var cs=_4dc.getComputedStyle(_4f3),tp=_4dc.toPixelValue,left=(has("ie")&&has("quirks")?0:tp(_4f3,cs.paddingLeft))+(has("ie")&&has("quirks")?tp(_4f3,cs.borderLeftWidth):0),top=(has("ie")&&has("quirks")?0:tp(_4f3,cs.paddingTop))+(has("ie")&&has("quirks")?tp(_4f3,cs.borderTopWidth):0);_4f4.x+=ifc.x+left-_4f6.x;_4f4.y+=ifc.y+top-_4f6.y;}}else{_4f4=_4db.position(_4f2,true);_4f4.x+=10;_4f4.y+=10;}var self=this;var _4f7=this._focusManager.get("prevNode");var _4f8=this._focusManager.get("curNode");var _4f9=!_4f8||(dom.isDescendant(_4f8,this.domNode))?_4f7:_4f8;function _4fa(){if(self.refocus&&_4f9){_4f9.focus();}pm.close(self);};pm.open({popup:this,x:_4f4.x,y:_4f4.y,onExecute:_4fa,onCancel:_4fa,orient:this.isLeftToRight()?"L":"R"});this.focus();this._onBlur=function(){this.inherited("_onBlur",arguments);pm.close(this);};},destroy:function(){_4d7.forEach(this._bindings,function(b){if(b){this.unBindDomNode(b.node);}},this);this.inherited(arguments);}});});},"dijit/form/MappedTextBox":function(){define("dijit/form/MappedTextBox",["dojo/_base/declare","dojo/dom-construct","./ValidationTextBox"],function(_4fb,_4fc,_4fd){return _4fb("dijit.form.MappedTextBox",_4fd,{postMixInProperties:function(){this.inherited(arguments);this.nameAttrSetting="";},_setNameAttr:null,serialize:function(val){return val.toString?val.toString():"";},toString:function(){var val=this.filter(this.get("value"));return val!=null?(typeof val=="string"?val:this.serialize(val,this.constraints)):"";},validate:function(){this.valueNode.value=this.toString();return this.inherited(arguments);},buildRendering:function(){this.inherited(arguments);this.valueNode=_4fc.place("<input type='hidden'"+(this.name?" name=\""+this.name.replace(/"/g,"&quot;")+"\"":"")+"/>",this.textbox,"after");},reset:function(){this.valueNode.value="";this.inherited(arguments);}});});},"esri/dijit/editing/toolbars/ToolbarBase":function(){define("esri/dijit/editing/toolbars/ToolbarBase",["dijit","dojo","dojox","dojo/require!dijit/Toolbar,dijit/ToolbarSeparator"],function(_4fe,dojo,_4ff){dojo.provide("esri.dijit.editing.toolbars.ToolbarBase");dojo.require("dijit.Toolbar");dojo.require("dijit.ToolbarSeparator");dojo.declare("esri.dijit.editing.toolbars.ToolbarBase",[_4fe.Toolbar],{_enabled:true,graphicsAdded:function(){},drawEnd:function(){},onApplyEdits:function(){},onDelete:function(){},constructor:function(_500,_501){if(!_500||!_500.settings){return;}this._tools=[];this._tbConnects=[];this._initialize(_500.settings);},postCreate:function(){this._createTools();this.deactivate();},destroy:function(){var _502=this._tools;for(var tool in _502){if(_502.hasOwnProperty(tool)&&esri._isDefined(this._tools[tool])){this._tools[tool].destroy();}}dojo.forEach(this._tbConnects,"dojo.disconnect(item)");this.inherited(arguments);},activate:function(_503){this._enabled=true;},deactivate:function(){this._enabled=false;this._layer=null;this._geometryType=null;var _504=this._tools;for(var tool in _504){if(_504.hasOwnProperty(tool)){this._tools[tool].deactivate();this._tools[tool].setChecked(false);}}},isEnabled:function(){return _enabled;},setActiveSymbol:function(_505){this._activeSymbol=_505;},_getSymbol:function(){},_createTools:function(){},_initialize:function(_506){this._settings=_506;this._toolbar=_506.drawToolbar;this._editToolbar=_506.editToolbar;this._initializeToolbar();},_activateTool:function(tool,_507){if(this._activeTool){this._activeTool.deactivate();}if(_507===true&&this._activeTool==this._tools[tool]){this._activeTool.setChecked(false);this._activeTool=null;}else{this._activeTool=this._tools[tool];this._activeTool.setChecked(true);this._activeTool.activate(null);}},_createSeparator:function(){this.addChild(new _4fe.ToolbarSeparator());}});});},"dojox/grid/util":function(){define("dojox/grid/util",["../main","dojo/_base/lang","dojo/dom"],function(_508,lang,dom){var dgu=lang.getObject("grid.util",true,_508);dgu.na="...";dgu.rowIndexTag="gridRowIndex";dgu.gridViewTag="gridView";dgu.fire=function(ob,ev,args){var fn=ob&&ev&&ob[ev];return fn&&(args?fn.apply(ob,args):ob[ev]());};dgu.setStyleHeightPx=function(_509,_50a){if(_50a>=0){var s=_509.style;var v=_50a+"px";if(_509&&s["height"]!=v){s["height"]=v;}}};dgu.mouseEvents=["mouseover","mouseout","mousedown","mouseup","click","dblclick","contextmenu"];dgu.keyEvents=["keyup","keydown","keypress"];dgu.funnelEvents=function(_50b,_50c,_50d,_50e){var evts=(_50e?_50e:dgu.mouseEvents.concat(dgu.keyEvents));for(var i=0,l=evts.length;i<l;i++){_50c.connect(_50b,"on"+evts[i],_50d);}};dgu.removeNode=function(_50f){_50f=dom.byId(_50f);_50f&&_50f.parentNode&&_50f.parentNode.removeChild(_50f);return _50f;};dgu.arrayCompare=function(inA,inB){for(var i=0,l=inA.length;i<l;i++){if(inA[i]!=inB[i]){return false;}}return (inA.length==inB.length);};dgu.arrayInsert=function(_510,_511,_512){if(_510.length<=_511){_510[_511]=_512;}else{_510.splice(_511,0,_512);}};dgu.arrayRemove=function(_513,_514){_513.splice(_514,1);};dgu.arraySwap=function(_515,inI,inJ){var _516=_515[inI];_515[inI]=_515[inJ];_515[inJ]=_516;};return dgu;});},"dojox/grid/_RowManager":function(){define("dojox/grid/_RowManager",["dojo/_base/declare","dojo/_base/lang","dojo/dom-class"],function(_517,lang,_518){var _519=function(_51a,_51b){if(_51a.style.cssText==undefined){_51a.setAttribute("style",_51b);}else{_51a.style.cssText=_51b;}};return _517("dojox.grid._RowManager",null,{constructor:function(_51c){this.grid=_51c;},linesToEms:2,overRow:-2,prepareStylingRow:function(_51d,_51e){return {index:_51d,node:_51e,odd:Boolean(_51d&1),selected:!!this.grid.selection.isSelected(_51d),over:this.isOver(_51d),customStyles:"",customClasses:"dojoxGridRow"};},styleRowNode:function(_51f,_520){var row=this.prepareStylingRow(_51f,_520);this.grid.onStyleRow(row);this.applyStyles(row);},applyStyles:function(_521){var i=_521;i.node.className=i.customClasses;var h=i.node.style.height;_519(i.node,i.customStyles+";"+(i.node._style||""));i.node.style.height=h;},updateStyles:function(_522){this.grid.updateRowStyles(_522);},setOverRow:function(_523){var last=this.overRow;this.overRow=_523;if((last!=this.overRow)&&(lang.isString(last)||last>=0)){this.updateStyles(last);}this.updateStyles(this.overRow);},isOver:function(_524){return (this.overRow==_524&&!_518.contains(this.grid.domNode,"dojoxGridColumnResizing"));}});});},"dojo/store/util/QueryResults":function(){define(["../../_base/array","../../_base/lang","../../_base/Deferred"],function(_525,lang,_526){var _527=function(_528){if(!_528){return _528;}if(_528.then){_528=lang.delegate(_528);}function _529(_52a){if(!_528[_52a]){_528[_52a]=function(){var args=arguments;return _526.when(_528,function(_52b){Array.prototype.unshift.call(args,_52b);return _527(_525[_52a].apply(_525,args));});};}};_529("forEach");_529("filter");_529("map");if(!_528.total){_528.total=_526.when(_528,function(_52c){return _52c.length;});}return _528;};lang.setObject("dojo.store.util.QueryResults",_527);return _527;});},"dojox/gfx/shape":function(){define("dojox/gfx/shape",["./_base","dojo/_base/lang","dojo/_base/declare","dojo/_base/kernel","dojo/_base/sniff","dojo/_base/connect","dojo/_base/array","dojo/dom-construct","dojo/_base/Color","./matrix"],function(g,lang,_52d,_52e,has,_52f,arr,_530,_531,_532){var _533=g.shape={};var _534={};var _535={};_533.register=function(s){var t=s.declaredClass.split(".").pop();var i=t in _534?++_534[t]:((_534[t]=0));var uid=t+i;_535[uid]=s;return uid;};_533.byId=function(id){return _535[id];};_533.dispose=function(s){delete _535[s.getUID()];};_533.Shape=_52d("dojox.gfx.shape.Shape",null,{constructor:function(){this.rawNode=null;this.shape=null;this.matrix=null;this.fillStyle=null;this.strokeStyle=null;this.bbox=null;this.parent=null;this.parentMatrix=null;var uid=_533.register(this);this.getUID=function(){return uid;};},destroy:function(){_533.dispose(this);},getNode:function(){return this.rawNode;},getShape:function(){return this.shape;},getTransform:function(){return this.matrix;},getFill:function(){return this.fillStyle;},getStroke:function(){return this.strokeStyle;},getParent:function(){return this.parent;},getBoundingBox:function(){return this.bbox;},getTransformedBoundingBox:function(){var b=this.getBoundingBox();if(!b){return null;}var m=this._getRealMatrix(),gm=_532;return [gm.multiplyPoint(m,b.x,b.y),gm.multiplyPoint(m,b.x+b.width,b.y),gm.multiplyPoint(m,b.x+b.width,b.y+b.height),gm.multiplyPoint(m,b.x,b.y+b.height)];},getEventSource:function(){return this.rawNode;},setClip:function(clip){this.clip=clip;},getClip:function(){return this.clip;},setShape:function(_536){this.shape=g.makeParameters(this.shape,_536);this.bbox=null;return this;},setFill:function(fill){if(!fill){this.fillStyle=null;return this;}var f=null;if(typeof (fill)=="object"&&"type" in fill){switch(fill.type){case "linear":f=g.makeParameters(g.defaultLinearGradient,fill);break;case "radial":f=g.makeParameters(g.defaultRadialGradient,fill);break;case "pattern":f=g.makeParameters(g.defaultPattern,fill);break;}}else{f=g.normalizeColor(fill);}this.fillStyle=f;return this;},setStroke:function(_537){if(!_537){this.strokeStyle=null;return this;}if(typeof _537=="string"||lang.isArray(_537)||_537 instanceof _531){_537={color:_537};}var s=this.strokeStyle=g.makeParameters(g.defaultStroke,_537);s.color=g.normalizeColor(s.color);return this;},setTransform:function(_538){this.matrix=_532.clone(_538?_532.normalize(_538):_532.identity);return this._applyTransform();},_applyTransform:function(){return this;},moveToFront:function(){var p=this.getParent();if(p){p._moveChildToFront(this);this._moveToFront();}return this;},moveToBack:function(){var p=this.getParent();if(p){p._moveChildToBack(this);this._moveToBack();}return this;},_moveToFront:function(){},_moveToBack:function(){},applyRightTransform:function(_539){return _539?this.setTransform([this.matrix,_539]):this;},applyLeftTransform:function(_53a){return _53a?this.setTransform([_53a,this.matrix]):this;},applyTransform:function(_53b){return _53b?this.setTransform([this.matrix,_53b]):this;},removeShape:function(_53c){if(this.parent){this.parent.remove(this,_53c);}return this;},_setParent:function(_53d,_53e){this.parent=_53d;return this._updateParentMatrix(_53e);},_updateParentMatrix:function(_53f){this.parentMatrix=_53f?_532.clone(_53f):null;return this._applyTransform();},_getRealMatrix:function(){var m=this.matrix;var p=this.parent;while(p){if(p.matrix){m=_532.multiply(p.matrix,m);}p=p.parent;}return m;}});_533._eventsProcessing={connect:function(name,_540,_541){return _52f.connect(this.getEventSource(),name,_533.fixCallback(this,g.fixTarget,_540,_541));},disconnect:function(_542){_52f.disconnect(_542);}};_533.fixCallback=function(_543,_544,_545,_546){if(!_546){_546=_545;_545=null;}if(lang.isString(_546)){_545=_545||_52e.global;if(!_545[_546]){throw (["dojox.gfx.shape.fixCallback: scope[\"",_546,"\"] is null (scope=\"",_545,"\")"].join(""));}return function(e){return _544(e,_543)?_545[_546].apply(_545,arguments||[]):undefined;};}return !_545?function(e){return _544(e,_543)?_546.apply(_545,arguments):undefined;}:function(e){return _544(e,_543)?_546.apply(_545,arguments||[]):undefined;};};lang.extend(_533.Shape,_533._eventsProcessing);_533.Container={_init:function(){this.children=[];},openBatch:function(){},closeBatch:function(){},add:function(_547){var _548=_547.getParent();if(_548){_548.remove(_547,true);}this.children.push(_547);return _547._setParent(this,this._getRealMatrix());},remove:function(_549,_54a){for(var i=0;i<this.children.length;++i){if(this.children[i]==_549){if(_54a){}else{_549.parent=null;_549.parentMatrix=null;}this.children.splice(i,1);break;}}return this;},clear:function(_54b){var _54c;for(var i=0;i<this.children.length;++i){_54c=this.children[i];_54c.parent=null;_54c.parentMatrix=null;if(_54b){_54c.destroy();}}this.children=[];return this;},getBoundingBox:function(){if(this.children){var _54d=null;arr.forEach(this.children,function(_54e){var bb=_54e.getBoundingBox();if(bb){var ct=_54e.getTransform();if(ct){bb=_532.multiplyRectangle(ct,bb);}if(_54d){_54d.x=Math.min(_54d.x,bb.x);_54d.y=Math.min(_54d.y,bb.y);_54d.endX=Math.max(_54d.endX,bb.x+bb.width);_54d.endY=Math.max(_54d.endY,bb.y+bb.height);}else{_54d={x:bb.x,y:bb.y,endX:bb.x+bb.width,endY:bb.y+bb.height};}}});if(_54d){_54d.width=_54d.endX-_54d.x;_54d.height=_54d.endY-_54d.y;}return _54d;}return null;},_moveChildToFront:function(_54f){for(var i=0;i<this.children.length;++i){if(this.children[i]==_54f){this.children.splice(i,1);this.children.push(_54f);break;}}return this;},_moveChildToBack:function(_550){for(var i=0;i<this.children.length;++i){if(this.children[i]==_550){this.children.splice(i,1);this.children.unshift(_550);break;}}return this;}};_533.Surface=_52d("dojox.gfx.shape.Surface",null,{constructor:function(){this.rawNode=null;this._parent=null;this._nodes=[];this._events=[];},destroy:function(){arr.forEach(this._nodes,_530.destroy);this._nodes=[];arr.forEach(this._events,_52f.disconnect);this._events=[];this.rawNode=null;if(has("ie")){while(this._parent.lastChild){_530.destroy(this._parent.lastChild);}}else{this._parent.innerHTML="";}this._parent=null;},getEventSource:function(){return this.rawNode;},_getRealMatrix:function(){return null;},isLoaded:true,onLoad:function(_551){},whenLoaded:function(_552,_553){var f=lang.hitch(_552,_553);if(this.isLoaded){f(this);}else{var h=_52f.connect(this,"onLoad",function(_554){_52f.disconnect(h);f(_554);});}}});lang.extend(_533.Surface,_533._eventsProcessing);_533.Rect=_52d("dojox.gfx.shape.Rect",_533.Shape,{constructor:function(_555){this.shape=g.getDefault("Rect");this.rawNode=_555;},getBoundingBox:function(){return this.shape;}});_533.Ellipse=_52d("dojox.gfx.shape.Ellipse",_533.Shape,{constructor:function(_556){this.shape=g.getDefault("Ellipse");this.rawNode=_556;},getBoundingBox:function(){if(!this.bbox){var _557=this.shape;this.bbox={x:_557.cx-_557.rx,y:_557.cy-_557.ry,width:2*_557.rx,height:2*_557.ry};}return this.bbox;}});_533.Circle=_52d("dojox.gfx.shape.Circle",_533.Shape,{constructor:function(_558){this.shape=g.getDefault("Circle");this.rawNode=_558;},getBoundingBox:function(){if(!this.bbox){var _559=this.shape;this.bbox={x:_559.cx-_559.r,y:_559.cy-_559.r,width:2*_559.r,height:2*_559.r};}return this.bbox;}});_533.Line=_52d("dojox.gfx.shape.Line",_533.Shape,{constructor:function(_55a){this.shape=g.getDefault("Line");this.rawNode=_55a;},getBoundingBox:function(){if(!this.bbox){var _55b=this.shape;this.bbox={x:Math.min(_55b.x1,_55b.x2),y:Math.min(_55b.y1,_55b.y2),width:Math.abs(_55b.x2-_55b.x1),height:Math.abs(_55b.y2-_55b.y1)};}return this.bbox;}});_533.Polyline=_52d("dojox.gfx.shape.Polyline",_533.Shape,{constructor:function(_55c){this.shape=g.getDefault("Polyline");this.rawNode=_55c;},setShape:function(_55d,_55e){if(_55d&&_55d instanceof Array){this.inherited(arguments,[{points:_55d}]);if(_55e&&this.shape.points.length){this.shape.points.push(this.shape.points[0]);}}else{this.inherited(arguments,[_55d]);}return this;},_normalizePoints:function(){var p=this.shape.points,l=p&&p.length;if(l&&typeof p[0]=="number"){var _55f=[];for(var i=0;i<l;i+=2){_55f.push({x:p[i],y:p[i+1]});}this.shape.points=_55f;}},getBoundingBox:function(){if(!this.bbox&&this.shape.points.length){var p=this.shape.points;var l=p.length;var t=p[0];var bbox={l:t.x,t:t.y,r:t.x,b:t.y};for(var i=1;i<l;++i){t=p[i];if(bbox.l>t.x){bbox.l=t.x;}if(bbox.r<t.x){bbox.r=t.x;}if(bbox.t>t.y){bbox.t=t.y;}if(bbox.b<t.y){bbox.b=t.y;}}this.bbox={x:bbox.l,y:bbox.t,width:bbox.r-bbox.l,height:bbox.b-bbox.t};}return this.bbox;}});_533.Image=_52d("dojox.gfx.shape.Image",_533.Shape,{constructor:function(_560){this.shape=g.getDefault("Image");this.rawNode=_560;},getBoundingBox:function(){return this.shape;},setStroke:function(){return this;},setFill:function(){return this;}});_533.Text=_52d(_533.Shape,{constructor:function(_561){this.fontStyle=null;this.shape=g.getDefault("Text");this.rawNode=_561;},getFont:function(){return this.fontStyle;},setFont:function(_562){this.fontStyle=typeof _562=="string"?g.splitFontString(_562):g.makeParameters(g.defaultFont,_562);this._setFont();return this;}});_533.Creator={createShape:function(_563){switch(_563.type){case g.defaultPath.type:return this.createPath(_563);case g.defaultRect.type:return this.createRect(_563);case g.defaultCircle.type:return this.createCircle(_563);case g.defaultEllipse.type:return this.createEllipse(_563);case g.defaultLine.type:return this.createLine(_563);case g.defaultPolyline.type:return this.createPolyline(_563);case g.defaultImage.type:return this.createImage(_563);case g.defaultText.type:return this.createText(_563);case g.defaultTextPath.type:return this.createTextPath(_563);}return null;},createGroup:function(){return this.createObject(g.Group);},createRect:function(rect){return this.createObject(g.Rect,rect);},createEllipse:function(_564){return this.createObject(g.Ellipse,_564);},createCircle:function(_565){return this.createObject(g.Circle,_565);},createLine:function(line){return this.createObject(g.Line,line);},createPolyline:function(_566){return this.createObject(g.Polyline,_566);},createImage:function(_567){return this.createObject(g.Image,_567);},createText:function(text){return this.createObject(g.Text,text);},createPath:function(path){return this.createObject(g.Path,path);},createTextPath:function(text){return this.createObject(g.TextPath,{}).setText(text);},createObject:function(_568,_569){return null;}};return _533;});},"dojox/charting/plot2d/ClusteredBars":function(){define("dojox/charting/plot2d/ClusteredBars",["dojo/_base/declare","./Bars","./common"],function(_56a,Bars,dc){return _56a("dojox.charting.plot2d.ClusteredBars",Bars,{getBarProperties:function(){var f=dc.calculateBarSize(this._vScaler.bounds.scale,this.opt,this.series.length);return {gap:f.gap,height:f.size,thickness:f.size};}});});},"dojox/grid/_FocusManager":function(){define("dojox/grid/_FocusManager",["dojo/_base/array","dojo/_base/lang","dojo/_base/declare","dojo/_base/connect","dojo/_base/event","dojo/_base/sniff","dojo/query","./util","dojo/_base/html"],function(_56b,lang,_56c,_56d,_56e,has,_56f,util,html){return _56c("dojox.grid._FocusManager",null,{constructor:function(_570){this.grid=_570;this.cell=null;this.rowIndex=-1;this._connects=[];this._headerConnects=[];this.headerMenu=this.grid.headerMenu;this._connects.push(_56d.connect(this.grid.domNode,"onfocus",this,"doFocus"));this._connects.push(_56d.connect(this.grid.domNode,"onblur",this,"doBlur"));this._connects.push(_56d.connect(this.grid.domNode,"mousedown",this,"_mouseDown"));this._connects.push(_56d.connect(this.grid.domNode,"mouseup",this,"_mouseUp"));this._connects.push(_56d.connect(this.grid.domNode,"oncontextmenu",this,"doContextMenu"));this._connects.push(_56d.connect(this.grid.lastFocusNode,"onfocus",this,"doLastNodeFocus"));this._connects.push(_56d.connect(this.grid.lastFocusNode,"onblur",this,"doLastNodeBlur"));this._connects.push(_56d.connect(this.grid,"_onFetchComplete",this,"_delayedCellFocus"));this._connects.push(_56d.connect(this.grid,"postrender",this,"_delayedHeaderFocus"));},destroy:function(){_56b.forEach(this._connects,_56d.disconnect);_56b.forEach(this._headerConnects,_56d.disconnect);delete this.grid;delete this.cell;},_colHeadNode:null,_colHeadFocusIdx:null,_contextMenuBindNode:null,tabbingOut:false,focusClass:"dojoxGridCellFocus",focusView:null,initFocusView:function(){this.focusView=this.grid.views.getFirstScrollingView()||this.focusView||this.grid.views.views[0];this._initColumnHeaders();},isFocusCell:function(_571,_572){return (this.cell==_571)&&(this.rowIndex==_572);},isLastFocusCell:function(){if(this.cell){return (this.rowIndex==this.grid.rowCount-1)&&(this.cell.index==this.grid.layout.cellCount-1);}return false;},isFirstFocusCell:function(){if(this.cell){return (this.rowIndex===0)&&(this.cell.index===0);}return false;},isNoFocusCell:function(){return (this.rowIndex<0)||!this.cell;},isNavHeader:function(){return (!!this._colHeadNode);},getHeaderIndex:function(){if(this._colHeadNode){return _56b.indexOf(this._findHeaderCells(),this._colHeadNode);}else{return -1;}},_focusifyCellNode:function(_573){var n=this.cell&&this.cell.getNode(this.rowIndex);if(n){html.toggleClass(n,this.focusClass,_573);if(_573){var sl=this.scrollIntoView();try{if(has("webkit")||!this.grid.edit.isEditing()){util.fire(n,"focus");if(sl){this.cell.view.scrollboxNode.scrollLeft=sl;}}}catch(e){}}}},_delayedCellFocus:function(){if(this.isNavHeader()||!this.grid.focused){return;}var n=this.cell&&this.cell.getNode(this.rowIndex);if(n){try{if(!this.grid.edit.isEditing()){html.toggleClass(n,this.focusClass,true);if(this._colHeadNode){this.blurHeader();}util.fire(n,"focus");}}catch(e){}}},_delayedHeaderFocus:function(){if(this.isNavHeader()){this.focusHeader();}},_initColumnHeaders:function(){_56b.forEach(this._headerConnects,_56d.disconnect);this._headerConnects=[];var _574=this._findHeaderCells();for(var i=0;i<_574.length;i++){this._headerConnects.push(_56d.connect(_574[i],"onfocus",this,"doColHeaderFocus"));this._headerConnects.push(_56d.connect(_574[i],"onblur",this,"doColHeaderBlur"));}},_findHeaderCells:function(){var _575=_56f("th",this.grid.viewsHeaderNode);var _576=[];for(var i=0;i<_575.length;i++){var _577=_575[i];var _578=html.hasAttr(_577,"tabIndex");var _579=html.attr(_577,"tabIndex");if(_578&&_579<0){_576.push(_577);}}return _576;},_setActiveColHeader:function(_57a,_57b,_57c){this.grid.domNode.setAttribute("aria-activedescendant",_57a.id);if(_57c!=null&&_57c>=0&&_57c!=_57b){html.toggleClass(this._findHeaderCells()[_57c],this.focusClass,false);}html.toggleClass(_57a,this.focusClass,true);this._colHeadNode=_57a;this._colHeadFocusIdx=_57b;this._scrollHeader(this._colHeadFocusIdx);},scrollIntoView:function(){var info=(this.cell?this._scrollInfo(this.cell):null);if(!info||!info.s){return null;}var rt=this.grid.scroller.findScrollTop(this.rowIndex);if(info.n&&info.sr){if(info.n.offsetLeft+info.n.offsetWidth>info.sr.l+info.sr.w){info.s.scrollLeft=info.n.offsetLeft+info.n.offsetWidth-info.sr.w;}else{if(info.n.offsetLeft<info.sr.l){info.s.scrollLeft=info.n.offsetLeft;}}}if(info.r&&info.sr){if(rt+info.r.offsetHeight>info.sr.t+info.sr.h){this.grid.setScrollTop(rt+info.r.offsetHeight-info.sr.h);}else{if(rt<info.sr.t){this.grid.setScrollTop(rt);}}}return info.s.scrollLeft;},_scrollInfo:function(cell,_57d){if(cell){var cl=cell,sbn=cl.view.scrollboxNode,sbnr={w:sbn.clientWidth,l:sbn.scrollLeft,t:sbn.scrollTop,h:sbn.clientHeight},rn=cl.view.getRowNode(this.rowIndex);return {c:cl,s:sbn,sr:sbnr,n:(_57d?_57d:cell.getNode(this.rowIndex)),r:rn};}return null;},_scrollHeader:function(_57e){var info=null;if(this._colHeadNode){var cell=this.grid.getCell(_57e);if(!cell){return;}info=this._scrollInfo(cell,cell.getNode(0));}if(info&&info.s&&info.sr&&info.n){var _57f=info.sr.l+info.sr.w;if(info.n.offsetLeft+info.n.offsetWidth>_57f){info.s.scrollLeft=info.n.offsetLeft+info.n.offsetWidth-info.sr.w;}else{if(info.n.offsetLeft<info.sr.l){info.s.scrollLeft=info.n.offsetLeft;}else{if(has("ie")<=7&&cell&&cell.view.headerNode){cell.view.headerNode.scrollLeft=info.s.scrollLeft;}}}}},_isHeaderHidden:function(){var _580=this.focusView;if(!_580){for(var i=0,_581;(_581=this.grid.views.views[i]);i++){if(_581.headerNode){_580=_581;break;}}}return (_580&&html.getComputedStyle(_580.headerNode).display=="none");},colSizeAdjust:function(e,_582,_583){var _584=this._findHeaderCells();var view=this.focusView;if(!view||!view.header.tableMap.map){for(var i=0,_585;(_585=this.grid.views.views[i]);i++){if(_585.header.tableMap.map){view=_585;break;}}}var _586=_584[_582];if(!view||(_582==_584.length-1&&_582===0)){return;}view.content.baseDecorateEvent(e);e.cellNode=_586;e.cellIndex=view.content.getCellNodeIndex(e.cellNode);e.cell=(e.cellIndex>=0?this.grid.getCell(e.cellIndex):null);if(view.header.canResize(e)){var _587={l:_583};var drag=view.header.colResizeSetup(e,false);view.header.doResizeColumn(drag,null,_587);view.update();}},styleRow:function(_588){return;},setFocusIndex:function(_589,_58a){this.setFocusCell(this.grid.getCell(_58a),_589);},setFocusCell:function(_58b,_58c){if(_58b&&!this.isFocusCell(_58b,_58c)){this.tabbingOut=false;if(this._colHeadNode){this.blurHeader();}this._colHeadNode=this._colHeadFocusIdx=null;this.focusGridView();this._focusifyCellNode(false);this.cell=_58b;this.rowIndex=_58c;this._focusifyCellNode(true);}if(has("opera")){setTimeout(lang.hitch(this.grid,"onCellFocus",this.cell,this.rowIndex),1);}else{this.grid.onCellFocus(this.cell,this.rowIndex);}},next:function(){if(this.cell){var row=this.rowIndex,col=this.cell.index+1,cc=this.grid.layout.cellCount-1,rc=this.grid.rowCount-1;if(col>cc){col=0;row++;}if(row>rc){col=cc;row=rc;}if(this.grid.edit.isEditing()){var _58d=this.grid.getCell(col);if(!this.isLastFocusCell()&&(!_58d.editable||this.grid.canEdit&&!this.grid.canEdit(_58d,row))){this.cell=_58d;this.rowIndex=row;this.next();return;}}this.setFocusIndex(row,col);}},previous:function(){if(this.cell){var row=(this.rowIndex||0),col=(this.cell.index||0)-1;if(col<0){col=this.grid.layout.cellCount-1;row--;}if(row<0){row=0;col=0;}if(this.grid.edit.isEditing()){var _58e=this.grid.getCell(col);if(!this.isFirstFocusCell()&&!_58e.editable){this.cell=_58e;this.rowIndex=row;this.previous();return;}}this.setFocusIndex(row,col);}},move:function(_58f,_590){var _591=_590<0?-1:1;if(this.isNavHeader()){var _592=this._findHeaderCells();var _593=currentIdx=_56b.indexOf(_592,this._colHeadNode);currentIdx+=_590;while(currentIdx>=0&&currentIdx<_592.length&&_592[currentIdx].style.display=="none"){currentIdx+=_591;}if((currentIdx>=0)&&(currentIdx<_592.length)){this._setActiveColHeader(_592[currentIdx],currentIdx,_593);}}else{if(this.cell){var sc=this.grid.scroller,r=this.rowIndex,rc=this.grid.rowCount-1,row=Math.min(rc,Math.max(0,r+_58f));if(_58f){if(_58f>0){if(row>sc.getLastPageRow(sc.page)){this.grid.setScrollTop(this.grid.scrollTop+sc.findScrollTop(row)-sc.findScrollTop(r));}}else{if(_58f<0){if(row<=sc.getPageRow(sc.page)){this.grid.setScrollTop(this.grid.scrollTop-sc.findScrollTop(r)-sc.findScrollTop(row));}}}}var cc=this.grid.layout.cellCount-1,i=this.cell.index,col=Math.min(cc,Math.max(0,i+_590));var cell=this.grid.getCell(col);while(col>=0&&col<cc&&cell&&cell.hidden===true){col+=_591;cell=this.grid.getCell(col);}if(!cell||cell.hidden===true){col=i;}var n=cell.getNode(row);if(!n&&_58f){if((row+_58f)>=0&&(row+_58f)<=rc){this.move(_58f>0?++_58f:--_58f,_590);}return;}else{if((!n||html.style(n,"display")==="none")&&_590){if((col+_590)>=0&&(col+_590)<=cc){this.move(_58f,_590>0?++_590:--_590);}return;}}this.setFocusIndex(row,col);if(_58f){this.grid.updateRow(r);}}}},previousKey:function(e){if(this.grid.edit.isEditing()){_56e.stop(e);this.previous();}else{if(!this.isNavHeader()&&!this._isHeaderHidden()){this.grid.domNode.focus();_56e.stop(e);}else{this.tabOut(this.grid.domNode);if(this._colHeadFocusIdx!=null){html.toggleClass(this._findHeaderCells()[this._colHeadFocusIdx],this.focusClass,false);this._colHeadFocusIdx=null;}this._focusifyCellNode(false);}}},nextKey:function(e){var _594=(this.grid.rowCount===0);if(e.target===this.grid.domNode&&this._colHeadFocusIdx==null){this.focusHeader();_56e.stop(e);}else{if(this.isNavHeader()){this.blurHeader();if(!this.findAndFocusGridCell()){this.tabOut(this.grid.lastFocusNode);}this._colHeadNode=this._colHeadFocusIdx=null;}else{if(this.grid.edit.isEditing()){_56e.stop(e);this.next();}else{this.tabOut(this.grid.lastFocusNode);}}}},tabOut:function(_595){this.tabbingOut=true;_595.focus();},focusGridView:function(){util.fire(this.focusView,"focus");},focusGrid:function(_596){this.focusGridView();this._focusifyCellNode(true);},findAndFocusGridCell:function(){var _597=true;var _598=(this.grid.rowCount===0);if(this.isNoFocusCell()&&!_598){var _599=0;var cell=this.grid.getCell(_599);if(cell.hidden){_599=this.isNavHeader()?this._colHeadFocusIdx:0;}this.setFocusIndex(0,_599);}else{if(this.cell&&!_598){if(this.focusView&&!this.focusView.rowNodes[this.rowIndex]){this.grid.scrollToRow(this.rowIndex);}this.focusGrid();}else{_597=false;}}this._colHeadNode=this._colHeadFocusIdx=null;return _597;},focusHeader:function(){var _59a=this._findHeaderCells();var _59b=this._colHeadFocusIdx;if(this._isHeaderHidden()){this.findAndFocusGridCell();}else{if(!this._colHeadFocusIdx){if(this.isNoFocusCell()){this._colHeadFocusIdx=0;}else{this._colHeadFocusIdx=this.cell.index;}}}this._colHeadNode=_59a[this._colHeadFocusIdx];while(this._colHeadNode&&this._colHeadFocusIdx>=0&&this._colHeadFocusIdx<_59a.length&&this._colHeadNode.style.display=="none"){this._colHeadFocusIdx++;this._colHeadNode=_59a[this._colHeadFocusIdx];}if(this._colHeadNode&&this._colHeadNode.style.display!="none"){if(this.headerMenu&&this._contextMenuBindNode!=this.grid.domNode){this.headerMenu.unBindDomNode(this.grid.viewsHeaderNode);this.headerMenu.bindDomNode(this.grid.domNode);this._contextMenuBindNode=this.grid.domNode;}this._setActiveColHeader(this._colHeadNode,this._colHeadFocusIdx,_59b);this._scrollHeader(this._colHeadFocusIdx);this._focusifyCellNode(false);}else{this.findAndFocusGridCell();}},blurHeader:function(){html.removeClass(this._colHeadNode,this.focusClass);html.removeAttr(this.grid.domNode,"aria-activedescendant");if(this.headerMenu&&this._contextMenuBindNode==this.grid.domNode){var _59c=this.grid.viewsHeaderNode;this.headerMenu.unBindDomNode(this.grid.domNode);this.headerMenu.bindDomNode(_59c);this._contextMenuBindNode=_59c;}},doFocus:function(e){if(e&&e.target!=e.currentTarget){_56e.stop(e);return;}if(this._clickFocus){return;}if(!this.tabbingOut){this.focusHeader();}this.tabbingOut=false;_56e.stop(e);},doBlur:function(e){_56e.stop(e);},doContextMenu:function(e){if(!this.headerMenu){_56e.stop(e);}},doLastNodeFocus:function(e){if(this.tabbingOut){this._focusifyCellNode(false);}else{if(this.grid.rowCount>0){if(this.isNoFocusCell()){this.setFocusIndex(0,0);}this._focusifyCellNode(true);}else{this.focusHeader();}}this.tabbingOut=false;_56e.stop(e);},doLastNodeBlur:function(e){_56e.stop(e);},doColHeaderFocus:function(e){this._setActiveColHeader(e.target,html.attr(e.target,"idx"),this._colHeadFocusIdx);this._scrollHeader(this.getHeaderIndex());_56e.stop(e);},doColHeaderBlur:function(e){html.toggleClass(e.target,this.focusClass,false);},_mouseDown:function(e){this._clickFocus=dojo.some(this.grid.views.views,function(v){return v.scrollboxNode===e.target;});},_mouseUp:function(e){this._clickFocus=false;}});});},"dojo/dnd/Avatar":function(){define(["../_base/declare","../_base/window","../dom","../dom-attr","../dom-class","../dom-construct","../hccss","../query"],function(_59d,win,dom,_59e,_59f,_5a0,has,_5a1){return _59d("dojo.dnd.Avatar",null,{constructor:function(_5a2){this.manager=_5a2;this.construct();},construct:function(){var a=_5a0.create("table",{"class":"dojoDndAvatar",style:{position:"absolute",zIndex:"1999",margin:"0px"}}),_5a3=this.manager.source,node,b=_5a0.create("tbody",null,a),tr=_5a0.create("tr",null,b),td=_5a0.create("td",null,tr),k=Math.min(5,this.manager.nodes.length),i=0;if(has("highcontrast")){_5a0.create("span",{id:"a11yIcon",innerHTML:this.manager.copy?"+":"<"},td);}_5a0.create("span",{innerHTML:_5a3.generateText?this._generateText():""},td);_59e.set(tr,{"class":"dojoDndAvatarHeader",style:{opacity:0.9}});for(;i<k;++i){if(_5a3.creator){node=_5a3._normalizedCreator(_5a3.getItem(this.manager.nodes[i].id).data,"avatar").node;}else{node=this.manager.nodes[i].cloneNode(true);if(node.tagName.toLowerCase()=="tr"){var _5a4=_5a0.create("table"),_5a5=_5a0.create("tbody",null,_5a4);_5a5.appendChild(node);node=_5a4;}}node.id="";tr=_5a0.create("tr",null,b);td=_5a0.create("td",null,tr);td.appendChild(node);_59e.set(tr,{"class":"dojoDndAvatarItem",style:{opacity:(9-i)/10}});}this.node=a;},destroy:function(){_5a0.destroy(this.node);this.node=false;},update:function(){_59f.toggle(this.node,"dojoDndAvatarCanDrop",this.manager.canDropFlag);if(has("highcontrast")){var icon=dom.byId("a11yIcon");var text="+";if(this.manager.canDropFlag&&!this.manager.copy){text="< ";}else{if(!this.manager.canDropFlag&&!this.manager.copy){text="o";}else{if(!this.manager.canDropFlag){text="x";}}}icon.innerHTML=text;}_5a1(("tr.dojoDndAvatarHeader td span"+(has("highcontrast")?" span":"")),this.node).forEach(function(node){node.innerHTML=this.manager.source.generateText?this._generateText():"";},this);},_generateText:function(){return this.manager.nodes.length.toString();}});});},"dijit/_Contained":function(){define("dijit/_Contained",["dojo/_base/declare","./registry"],function(_5a6,_5a7){return _5a6("dijit._Contained",null,{_getSibling:function(_5a8){var node=this.domNode;do{node=node[_5a8+"Sibling"];}while(node&&node.nodeType!=1);return node&&_5a7.byNode(node);},getPreviousSibling:function(){return this._getSibling("previous");},getNextSibling:function(){return this._getSibling("next");},getIndexInParent:function(){var p=this.getParent();if(!p||!p.getIndexOfChild){return -1;}return p.getIndexOfChild(this);}});});},"dojox/charting/scaler/common":function(){define("dojox/charting/scaler/common",["dojo/_base/lang"],function(lang){var eq=function(a,b){return Math.abs(a-b)<=0.000001*(Math.abs(a)+Math.abs(b));};var _5a9=lang.getObject("dojox.charting.scaler.common",true);var _5aa={};return lang.mixin(_5a9,{doIfLoaded:function(_5ab,_5ac,_5ad){if(_5aa[_5ab]==undefined){try{_5aa[_5ab]=require(_5ab);}catch(e){_5aa[_5ab]=null;}}if(_5aa[_5ab]){return _5ac(_5aa[_5ab]);}else{return _5ad();}},getNumericLabel:function(_5ae,_5af,_5b0){var def="";_5a9.doIfLoaded("dojo/number",function(_5b1){def=(_5b0.fixed?_5b1.format(_5ae,{places:_5af<0?-_5af:0}):_5b1.format(_5ae))||"";},function(){def=_5b0.fixed?_5ae.toFixed(_5af<0?-_5af:0):_5ae.toString();});if(_5b0.labelFunc){var r=_5b0.labelFunc(def,_5ae,_5af);if(r){return r;}}if(_5b0.labels){var l=_5b0.labels,lo=0,hi=l.length;while(lo<hi){var mid=Math.floor((lo+hi)/2),val=l[mid].value;if(val<_5ae){lo=mid+1;}else{hi=mid;}}if(lo<l.length&&eq(l[lo].value,_5ae)){return l[lo].text;}--lo;if(lo>=0&&lo<l.length&&eq(l[lo].value,_5ae)){return l[lo].text;}lo+=2;if(lo<l.length&&eq(l[lo].value,_5ae)){return l[lo].text;}}return def;}});});},"dojox/grid/_Builder":function(){define("dojox/grid/_Builder",["../main","dojo/_base/array","dojo/_base/lang","dojo/_base/window","dojo/_base/event","dojo/_base/sniff","dojo/_base/connect","dojo/dnd/Moveable","dojox/html/metrics","./util","dojo/_base/html"],function(_5b2,_5b3,lang,win,_5b4,has,_5b5,_5b6,_5b7,util,html){var dg=_5b2.grid;var _5b8=function(td){return td.cellIndex>=0?td.cellIndex:_5b3.indexOf(td.parentNode.cells,td);};var _5b9=function(tr){return tr.rowIndex>=0?tr.rowIndex:_5b3.indexOf(tr.parentNode.childNodes,tr);};var _5ba=function(_5bb,_5bc){return _5bb&&((_5bb.rows||0)[_5bc]||_5bb.childNodes[_5bc]);};var _5bd=function(node){for(var n=node;n&&n.tagName!="TABLE";n=n.parentNode){}return n;};var _5be=function(_5bf,_5c0){for(var n=_5bf;n&&_5c0(n);n=n.parentNode){}return n;};var _5c1=function(_5c2){var name=_5c2.toUpperCase();return function(node){return node.tagName!=name;};};var _5c3=util.rowIndexTag;var _5c4=util.gridViewTag;var _5c5=dg._Builder=lang.extend(function(view){if(view){this.view=view;this.grid=view.grid;}},{view:null,_table:"<table class=\"dojoxGridRowTable\" border=\"0\" cellspacing=\"0\" cellpadding=\"0\" role=\"presentation\"",getTableArray:function(){var html=[this._table];if(this.view.viewWidth){html.push([" style=\"width:",this.view.viewWidth,";\""].join(""));}html.push(">");return html;},generateCellMarkup:function(_5c6,_5c7,_5c8,_5c9){var _5ca=[],html;if(_5c9){var _5cb=_5c6.index!=_5c6.grid.getSortIndex()?"":_5c6.grid.sortInfo>0?"aria-sort=\"ascending\"":"aria-sort=\"descending\"";if(!_5c6.id){_5c6.id=this.grid.id+"Hdr"+_5c6.index;}html=["<th tabIndex=\"-1\" aria-readonly=\"true\" role=\"columnheader\"",_5cb,"id=\"",_5c6.id,"\""];}else{var _5cc=this.grid.editable&&!_5c6.editable?"aria-readonly=\"true\"":"";html=["<td tabIndex=\"-1\" role=\"gridcell\"",_5cc];}if(_5c6.colSpan){html.push(" colspan=\"",_5c6.colSpan,"\"");}if(_5c6.rowSpan){html.push(" rowspan=\"",_5c6.rowSpan,"\"");}html.push(" class=\"dojoxGridCell ");if(_5c6.classes){html.push(_5c6.classes," ");}if(_5c8){html.push(_5c8," ");}_5ca.push(html.join(""));_5ca.push("");html=["\" idx=\"",_5c6.index,"\" style=\""];if(_5c7&&_5c7[_5c7.length-1]!=";"){_5c7+=";";}html.push(_5c6.styles,_5c7||"",_5c6.hidden?"display:none;":"");if(_5c6.unitWidth){html.push("width:",_5c6.unitWidth,";");}_5ca.push(html.join(""));_5ca.push("");html=["\""];if(_5c6.attrs){html.push(" ",_5c6.attrs);}html.push(">");_5ca.push(html.join(""));_5ca.push("");_5ca.push(_5c9?"</th>":"</td>");return _5ca;},isCellNode:function(_5cd){return Boolean(_5cd&&_5cd!=win.doc&&html.attr(_5cd,"idx"));},getCellNodeIndex:function(_5ce){return _5ce?Number(html.attr(_5ce,"idx")):-1;},getCellNode:function(_5cf,_5d0){for(var i=0,row;((row=_5ba(_5cf.firstChild,i))&&row.cells);i++){for(var j=0,cell;(cell=row.cells[j]);j++){if(this.getCellNodeIndex(cell)==_5d0){return cell;}}}return null;},findCellTarget:function(_5d1,_5d2){var n=_5d1;while(n&&(!this.isCellNode(n)||(n.offsetParent&&_5c4 in n.offsetParent.parentNode&&n.offsetParent.parentNode[_5c4]!=this.view.id))&&(n!=_5d2)){n=n.parentNode;}return n!=_5d2?n:null;},baseDecorateEvent:function(e){e.dispatch="do"+e.type;e.grid=this.grid;e.sourceView=this.view;e.cellNode=this.findCellTarget(e.target,e.rowNode);e.cellIndex=this.getCellNodeIndex(e.cellNode);e.cell=(e.cellIndex>=0?this.grid.getCell(e.cellIndex):null);},findTarget:function(_5d3,_5d4){var n=_5d3;while(n&&(n!=this.domNode)&&(!(_5d4 in n)||(_5c4 in n&&n[_5c4]!=this.view.id))){n=n.parentNode;}return (n!=this.domNode)?n:null;},findRowTarget:function(_5d5){return this.findTarget(_5d5,_5c3);},isIntraNodeEvent:function(e){try{return (e.cellNode&&e.relatedTarget&&html.isDescendant(e.relatedTarget,e.cellNode));}catch(x){return false;}},isIntraRowEvent:function(e){try{var row=e.relatedTarget&&this.findRowTarget(e.relatedTarget);return !row&&(e.rowIndex==-1)||row&&(e.rowIndex==row.gridRowIndex);}catch(x){return false;}},dispatchEvent:function(e){if(e.dispatch in this){return this[e.dispatch](e);}return false;},domouseover:function(e){if(e.cellNode&&(e.cellNode!=this.lastOverCellNode)){this.lastOverCellNode=e.cellNode;this.grid.onMouseOver(e);}this.grid.onMouseOverRow(e);},domouseout:function(e){if(e.cellNode&&(e.cellNode==this.lastOverCellNode)&&!this.isIntraNodeEvent(e,this.lastOverCellNode)){this.lastOverCellNode=null;this.grid.onMouseOut(e);if(!this.isIntraRowEvent(e)){this.grid.onMouseOutRow(e);}}},domousedown:function(e){if(e.cellNode){this.grid.onMouseDown(e);}this.grid.onMouseDownRow(e);}});var _5d6=dg._ContentBuilder=lang.extend(function(view){_5c5.call(this,view);},_5c5.prototype,{update:function(){this.prepareHtml();},prepareHtml:function(){var _5d7=this.grid.get,_5d8=this.view.structure.cells;for(var j=0,row;(row=_5d8[j]);j++){for(var i=0,cell;(cell=row[i]);i++){cell.get=cell.get||(cell.value==undefined)&&_5d7;cell.markup=this.generateCellMarkup(cell,cell.cellStyles,cell.cellClasses,false);if(!this.grid.editable&&cell.editable){this.grid.editable=true;}}}},generateHtml:function(_5d9,_5da){var html=this.getTableArray(),v=this.view,_5db=v.structure.cells,item=this.grid.getItem(_5da);util.fire(this.view,"onBeforeRow",[_5da,_5db]);for(var j=0,row;(row=_5db[j]);j++){if(row.hidden||row.header){continue;}html.push(!row.invisible?"<tr>":"<tr class=\"dojoxGridInvisible\">");for(var i=0,cell,m,cc,cs;(cell=row[i]);i++){m=cell.markup;cc=cell.customClasses=[];cs=cell.customStyles=[];m[5]=cell.format(_5da,item);m[1]=cc.join(" ");m[3]=cs.join(";");html.push.apply(html,m);}html.push("</tr>");}html.push("</table>");return html.join("");},decorateEvent:function(e){e.rowNode=this.findRowTarget(e.target);if(!e.rowNode){return false;}e.rowIndex=e.rowNode[_5c3];this.baseDecorateEvent(e);e.cell=this.grid.getCell(e.cellIndex);return true;}});var _5dc=dg._HeaderBuilder=lang.extend(function(view){this.moveable=null;_5c5.call(this,view);},_5c5.prototype,{_skipBogusClicks:false,overResizeWidth:4,minColWidth:1,update:function(){if(this.tableMap){this.tableMap.mapRows(this.view.structure.cells);}else{this.tableMap=new dg._TableMap(this.view.structure.cells);}},generateHtml:function(_5dd,_5de){var html=this.getTableArray(),_5df=this.view.structure.cells;util.fire(this.view,"onBeforeRow",[-1,_5df]);for(var j=0,row;(row=_5df[j]);j++){if(row.hidden){continue;}html.push(!row.invisible?"<tr>":"<tr class=\"dojoxGridInvisible\">");for(var i=0,cell,_5e0;(cell=row[i]);i++){cell.customClasses=[];cell.customStyles=[];if(this.view.simpleStructure){if(cell.draggable){if(cell.headerClasses){if(cell.headerClasses.indexOf("dojoDndItem")==-1){cell.headerClasses+=" dojoDndItem";}}else{cell.headerClasses="dojoDndItem";}}if(cell.attrs){if(cell.attrs.indexOf("dndType='gridColumn_")==-1){cell.attrs+=" dndType='gridColumn_"+this.grid.id+"'";}}else{cell.attrs="dndType='gridColumn_"+this.grid.id+"'";}}_5e0=this.generateCellMarkup(cell,cell.headerStyles,cell.headerClasses,true);_5e0[5]=(_5de!=undefined?_5de:_5dd(cell));_5e0[3]=cell.customStyles.join(";");_5e0[1]=cell.customClasses.join(" ");html.push(_5e0.join(""));}html.push("</tr>");}html.push("</table>");return html.join("");},getCellX:function(e){var n,x=e.layerX;if(has("mozilla")||has("ie")>=9){n=_5be(e.target,_5c1("th"));x-=(n&&n.offsetLeft)||0;var t=e.sourceView.getScrollbarWidth();if(!this.grid.isLeftToRight()){table=_5be(n,_5c1("table"));x-=(table&&table.offsetLeft)||0;}}n=_5be(e.target,function(){if(!n||n==e.cellNode){return false;}x+=(n.offsetLeft<0?0:n.offsetLeft);return true;});return x;},decorateEvent:function(e){this.baseDecorateEvent(e);e.rowIndex=-1;e.cellX=this.getCellX(e);return true;},prepareResize:function(e,mod){do{var i=e.cellIndex;e.cellNode=(i?e.cellNode.parentNode.cells[i+mod]:null);e.cellIndex=(e.cellNode?this.getCellNodeIndex(e.cellNode):-1);}while(e.cellNode&&e.cellNode.style.display=="none");return Boolean(e.cellNode);},canResize:function(e){if(!e.cellNode||e.cellNode.colSpan>1){return false;}var cell=this.grid.getCell(e.cellIndex);return !cell.noresize&&cell.canResize();},overLeftResizeArea:function(e){if(html.hasClass(win.body(),"dojoDndMove")){return false;}if(has("ie")){var tN=e.target;if(html.hasClass(tN,"dojoxGridArrowButtonNode")||html.hasClass(tN,"dojoxGridArrowButtonChar")||html.hasClass(tN,"dojoxGridColCaption")){return false;}}if(this.grid.isLeftToRight()){return (e.cellIndex>0)&&(e.cellX>0&&e.cellX<this.overResizeWidth)&&this.prepareResize(e,-1);}var t=e.cellNode&&(e.cellX>0&&e.cellX<this.overResizeWidth);return t;},overRightResizeArea:function(e){if(html.hasClass(win.body(),"dojoDndMove")){return false;}if(has("ie")){var tN=e.target;if(html.hasClass(tN,"dojoxGridArrowButtonNode")||html.hasClass(tN,"dojoxGridArrowButtonChar")||html.hasClass(tN,"dojoxGridColCaption")){return false;}}if(this.grid.isLeftToRight()){return e.cellNode&&(e.cellX>=e.cellNode.offsetWidth-this.overResizeWidth);}return (e.cellIndex>0)&&(e.cellX>=e.cellNode.offsetWidth-this.overResizeWidth)&&this.prepareResize(e,-1);},domousemove:function(e){if(!this.moveable){var c=(this.overRightResizeArea(e)?"dojoxGridColResize":(this.overLeftResizeArea(e)?"dojoxGridColResize":""));if(c&&!this.canResize(e)){c="dojoxGridColNoResize";}html.toggleClass(e.sourceView.headerNode,"dojoxGridColNoResize",(c=="dojoxGridColNoResize"));html.toggleClass(e.sourceView.headerNode,"dojoxGridColResize",(c=="dojoxGridColResize"));if(c){_5b4.stop(e);}}},domousedown:function(e){if(!this.moveable){if((this.overRightResizeArea(e)||this.overLeftResizeArea(e))&&this.canResize(e)){this.beginColumnResize(e);}else{this.grid.onMouseDown(e);this.grid.onMouseOverRow(e);}}},doclick:function(e){if(this._skipBogusClicks){_5b4.stop(e);return true;}return false;},colResizeSetup:function(e,_5e1){var _5e2=html.contentBox(e.sourceView.headerNode);if(_5e1){this.lineDiv=document.createElement("div");var vw=html.position(e.sourceView.headerNode,true);var _5e3=html.contentBox(e.sourceView.domNode);var l=e.pageX;if(!this.grid.isLeftToRight()&&has("ie")<8){l-=_5b7.getScrollbar().w;}html.style(this.lineDiv,{top:vw.y+"px",left:l+"px",height:(_5e3.h+_5e2.h)+"px"});html.addClass(this.lineDiv,"dojoxGridResizeColLine");this.lineDiv._origLeft=l;win.body().appendChild(this.lineDiv);}var _5e4=[],_5e5=this.tableMap.findOverlappingNodes(e.cellNode);for(var i=0,cell;(cell=_5e5[i]);i++){_5e4.push({node:cell,index:this.getCellNodeIndex(cell),width:cell.offsetWidth});}var view=e.sourceView;var adj=this.grid.isLeftToRight()?1:-1;var _5e6=e.grid.views.views;var _5e7=[];for(var j=view.idx+adj,_5e8;(_5e8=_5e6[j]);j=j+adj){_5e7.push({node:_5e8.headerNode,left:window.parseInt(_5e8.headerNode.style.left)});}var _5e9=view.headerContentNode.firstChild;var drag={scrollLeft:e.sourceView.headerNode.scrollLeft,view:view,node:e.cellNode,index:e.cellIndex,w:html.contentBox(e.cellNode).w,vw:_5e2.w,table:_5e9,tw:html.contentBox(_5e9).w,spanners:_5e4,followers:_5e7};return drag;},beginColumnResize:function(e){this.moverDiv=document.createElement("div");html.style(this.moverDiv,{position:"absolute",left:0});win.body().appendChild(this.moverDiv);html.addClass(this.grid.domNode,"dojoxGridColumnResizing");var m=(this.moveable=new _5b6(this.moverDiv));var drag=this.colResizeSetup(e,true);m.onMove=lang.hitch(this,"doResizeColumn",drag);_5b5.connect(m,"onMoveStop",lang.hitch(this,function(){this.endResizeColumn(drag);if(drag.node.releaseCapture){drag.node.releaseCapture();}this.moveable.destroy();delete this.moveable;this.moveable=null;html.removeClass(this.grid.domNode,"dojoxGridColumnResizing");}));if(e.cellNode.setCapture){e.cellNode.setCapture();}m.onMouseDown(e);},doResizeColumn:function(_5ea,_5eb,_5ec){var _5ed=_5ec.l;var data={deltaX:_5ed,w:_5ea.w+(this.grid.isLeftToRight()?_5ed:-_5ed),vw:_5ea.vw+_5ed,tw:_5ea.tw+_5ed};this.dragRecord={inDrag:_5ea,mover:_5eb,leftTop:_5ec};if(data.w>=this.minColWidth){if(!_5eb){this.doResizeNow(_5ea,data);}else{html.style(this.lineDiv,"left",(this.lineDiv._origLeft+data.deltaX)+"px");}}},endResizeColumn:function(_5ee){if(this.dragRecord){var _5ef=this.dragRecord.leftTop;var _5f0=this.grid.isLeftToRight()?_5ef.l:-_5ef.l;_5f0+=Math.max(_5ee.w+_5f0,this.minColWidth)-(_5ee.w+_5f0);if(has("webkit")&&_5ee.spanners.length){_5f0+=html._getPadBorderExtents(_5ee.spanners[0].node).w;}var data={deltaX:_5f0,w:_5ee.w+_5f0,vw:_5ee.vw+_5f0,tw:_5ee.tw+_5f0};this.doResizeNow(_5ee,data);delete this.dragRecord;}html.destroy(this.lineDiv);html.destroy(this.moverDiv);html.destroy(this.moverDiv);delete this.moverDiv;this._skipBogusClicks=true;_5ee.view.update();this._skipBogusClicks=false;this.grid.onResizeColumn(_5ee.index);},doResizeNow:function(_5f1,data){_5f1.view.convertColPctToFixed();if(_5f1.view.flexCells&&!_5f1.view.testFlexCells()){var t=_5bd(_5f1.node);if(t){(t.style.width="");}}var i,s,sw,f,fl;for(i=0;(s=_5f1.spanners[i]);i++){sw=s.width+data.deltaX;if(sw>0){s.node.style.width=sw+"px";_5f1.view.setColWidth(s.index,sw);}}if(this.grid.isLeftToRight()||!has("ie")){for(i=0;(f=_5f1.followers[i]);i++){fl=f.left+data.deltaX;f.node.style.left=fl+"px";}}_5f1.node.style.width=data.w+"px";_5f1.view.setColWidth(_5f1.index,data.w);_5f1.view.headerNode.style.width=data.vw+"px";_5f1.view.setColumnsWidth(data.tw);if(!this.grid.isLeftToRight()){_5f1.view.headerNode.scrollLeft=_5f1.scrollLeft+data.deltaX;}}});dg._TableMap=lang.extend(function(rows){this.mapRows(rows);},{map:null,mapRows:function(_5f2){var _5f3=_5f2.length;if(!_5f3){return;}this.map=[];var row;for(var k=0;(row=_5f2[k]);k++){this.map[k]=[];}for(var j=0;(row=_5f2[j]);j++){for(var i=0,x=0,cell,_5f4,_5f5;(cell=row[i]);i++){while(this.map[j][x]){x++;}this.map[j][x]={c:i,r:j};_5f5=cell.rowSpan||1;_5f4=cell.colSpan||1;for(var y=0;y<_5f5;y++){for(var s=0;s<_5f4;s++){this.map[j+y][x+s]=this.map[j][x];}}x+=_5f4;}}},dumpMap:function(){for(var j=0,row,h="";(row=this.map[j]);j++,h=""){for(var i=0,cell;(cell=row[i]);i++){h+=cell.r+","+cell.c+"   ";}}},getMapCoords:function(_5f6,_5f7){for(var j=0,row;(row=this.map[j]);j++){for(var i=0,cell;(cell=row[i]);i++){if(cell.c==_5f7&&cell.r==_5f6){return {j:j,i:i};}}}return {j:-1,i:-1};},getNode:function(_5f8,_5f9,_5fa){var row=_5f8&&_5f8.rows[_5f9];return row&&row.cells[_5fa];},_findOverlappingNodes:function(_5fb,_5fc,_5fd){var _5fe=[];var m=this.getMapCoords(_5fc,_5fd);for(var j=0,row;(row=this.map[j]);j++){if(j==m.j){continue;}var rw=row[m.i];var n=(rw?this.getNode(_5fb,rw.r,rw.c):null);if(n){_5fe.push(n);}}return _5fe;},findOverlappingNodes:function(_5ff){return this._findOverlappingNodes(_5bd(_5ff),_5b9(_5ff.parentNode),_5b8(_5ff));}});return {_Builder:_5c5,_HeaderBuilder:_5dc,_ContentBuilder:_5d6};});},"url:esri/dijit/templates/Geocoder.html":"<div class=\"${theme}\" role=\"presentation\">\r\n    <div class=\"${_GeocoderContainerClass}\" role=\"presentation\">\r\n    \t<div class=\"${_GeocoderClass}\" data-dojo-attach-point=\"containerNode\" role=\"presentation\">\r\n    \t\t<div title=\"${_i18n.widgets.Geocoder.main.searchButtonTitle}\" tabindex=\"0\" class=\"${_searchButtonClass} ${_GeocoderIconClass}\" data-dojo-attach-point=\"submitNode\" data-dojo-attach-event=\"ondijitclick:_findThenSelect\" role=\"button\"></div>\r\n    \t\t<div aria-haspopup=\"true\" id=\"${id}_menu_button\" title=\"${_i18n.widgets.Geocoder.main.geocoderMenuButtonTitle}\" tabindex=\"0\" class=\"${_geocoderMenuArrowClass} ${_GeocoderIconClass}\" data-dojo-attach-point=\"geocoderMenuArrowNode\" role=\"button\" aria-expanded=\"false\" data-dojo-attach-event=\"ondijitclick:_toggleGeolocatorMenu\"></div>\r\n    \t\t<input aria-haspopup=\"true\" id=\"${id}_input\" tabindex=\"0\" placeholder=\"\" value=\"${value}\" autocomplete=\"off\" type=\"text\" data-dojo-attach-point=\"inputNode\" data-dojo-attach-event=\"ondijitclick:_inputClick\" role=\"textbox\">\r\n    \t\t<div tabindex=\"0\" class=\"${_clearButtonClass} ${_GeocoderIconClass}\" data-dojo-attach-point=\"clearNode\" data-dojo-attach-event=\"ondijitclick:clear\" role=\"button\"></div>\r\n    \t\t<div class=\"${_GeocoderClearClass}\" role=\"presentation\"></div>\r\n    \t</div>\r\n    \t<div class=\"${_resultsContainerClass}\" data-dojo-attach-point=\"resultsNode\" aria-labelledby=\"${id}_input\" role=\"menu\" aria-hidden=\"true\"></div>\r\n    \t<div class=\"${_geocoderMenuClass}\" data-dojo-attach-point=\"geocoderMenuNode\" role=\"presentation\">\r\n    \t\t<div class=\"${_geocoderMenuHeaderClass}\">\r\n    \t\t\t${_i18n.widgets.Geocoder.main.geocoderMenuHeader}\r\n    \t\t\t<div role=\"button\" data-dojo-attach-point=\"geocoderMenuCloseNode\" data-dojo-attach-event=\"ondijitclick:_hideGeolocatorMenu\" title=\"${_i18n.widgets.Geocoder.main.geocoderMenuCloseTitle}\" tabindex=\"0\" class=\"${_geocoderMenuCloseClass}\"></div>\r\n    \t\t\t<div class=\"${_GeocoderClearClass}\" role=\"presentation\"></div>\r\n    \t\t</div>\r\n    \t\t<div data-dojo-attach-point=\"geocoderMenuInsertNode\" aria-labelledby=\"${id}_menu_button\" role=\"menu\" aria-hidden=\"true\"></div>\r\n    \t</div>\r\n    </div>\r\n</div>","dojox/fx/_base":function(){define("dojox/fx/_base",["dojo/_base/array","dojo/_base/lang","dojo/_base/fx","dojo/fx","dojo/dom","dojo/dom-style","dojo/dom-geometry","dojo/_base/connect","dojo/_base/html"],function(_600,lang,_601,_602,dom,_603,_604,_605,_606){var _607=lang.getObject("dojox.fx",true);lang.mixin(_607,{anim:_601.anim,animateProperty:_601.animateProperty,fadeTo:_601._fade,fadeIn:_601.fadeIn,fadeOut:_601.fadeOut,combine:_602.combine,chain:_602.chain,slideTo:_602.slideTo,wipeIn:_602.wipeIn,wipeOut:_602.wipeOut});_607.sizeTo=function(args){var node=args.node=dom.byId(args.node),abs="absolute";var _608=args.method||"chain";if(!args.duration){args.duration=500;}if(_608=="chain"){args.duration=Math.floor(args.duration/2);}var top,_609,left,_60a,_60b,_60c=null;var init=(function(n){return function(){var cs=_603.getComputedStyle(n),pos=cs.position,w=cs.width,h=cs.height;top=(pos==abs?n.offsetTop:parseInt(cs.top)||0);left=(pos==abs?n.offsetLeft:parseInt(cs.left)||0);_60b=(w=="auto"?0:parseInt(w));_60c=(h=="auto"?0:parseInt(h));_60a=left-Math.floor((args.width-_60b)/2);_609=top-Math.floor((args.height-_60c)/2);if(pos!=abs&&pos!="relative"){var ret=_603.coords(n,true);top=ret.y;left=ret.x;n.style.position=abs;n.style.top=top+"px";n.style.left=left+"px";}};})(node);var _60d=_601.animateProperty(lang.mixin({properties:{height:function(){init();return {end:args.height||0,start:_60c};},top:function(){return {start:top,end:_609};}}},args));var _60e=_601.animateProperty(lang.mixin({properties:{width:function(){return {start:_60b,end:args.width||0};},left:function(){return {start:left,end:_60a};}}},args));var anim=_602[(args.method=="combine"?"combine":"chain")]([_60d,_60e]);return anim;};_607.slideBy=function(args){var node=args.node=dom.byId(args.node),top,left;var init=(function(n){return function(){var cs=_603.getComputedStyle(n);var pos=cs.position;top=(pos=="absolute"?n.offsetTop:parseInt(cs.top)||0);left=(pos=="absolute"?n.offsetLeft:parseInt(cs.left)||0);if(pos!="absolute"&&pos!="relative"){var ret=_604.coords(n,true);top=ret.y;left=ret.x;n.style.position="absolute";n.style.top=top+"px";n.style.left=left+"px";}};})(node);init();var _60f=_601.animateProperty(lang.mixin({properties:{top:top+(args.top||0),left:left+(args.left||0)}},args));_605.connect(_60f,"beforeBegin",_60f,init);return _60f;};_607.crossFade=function(args){var _610=args.nodes[0]=dom.byId(args.nodes[0]),op1=_606.style(_610,"opacity"),_611=args.nodes[1]=dom.byId(args.nodes[1]),op2=_606.style(_611,"opacity");var _612=_602.combine([_601[(op1==0?"fadeIn":"fadeOut")](lang.mixin({node:_610},args)),_601[(op1==0?"fadeOut":"fadeIn")](lang.mixin({node:_611},args))]);return _612;};_607.highlight=function(args){var node=args.node=dom.byId(args.node);args.duration=args.duration||400;var _613=args.color||"#ffff99",_614=_606.style(node,"backgroundColor");if(_614=="rgba(0, 0, 0, 0)"){_614="transparent";}var anim=_601.animateProperty(lang.mixin({properties:{backgroundColor:{start:_613,end:_614}}},args));if(_614=="transparent"){_605.connect(anim,"onEnd",anim,function(){node.style.backgroundColor=_614;});}return anim;};_607.wipeTo=function(args){args.node=dom.byId(args.node);var node=args.node,s=node.style;var dir=(args.width?"width":"height"),_615=args[dir],_616={};_616[dir]={start:function(){s.overflow="hidden";if(s.visibility=="hidden"||s.display=="none"){s[dir]="1px";s.display="";s.visibility="";return 1;}else{var now=_606.style(node,dir);return Math.max(now,1);}},end:_615};var anim=_601.animateProperty(lang.mixin({properties:_616},args));return anim;};return _607;});},"esri/toolbars/_VertexEditor":function(){define("esri/toolbars/_VertexEditor",["dijit","dojo","dojox","dojo/require!dijit/Menu,esri/toolbars/_VertexMover"],function(_617,dojo,_618){dojo.provide("esri.toolbars._VertexEditor");dojo.require("dijit.Menu");dojo.require("esri.toolbars._VertexMover");dojo.declare("esri.toolbars._GraphicVertexEditor",null,{constructor:function(_619,map,_61a){this.graphic=_619;this.map=map;this.toolbar=_61a;var _61b=_61a._options;this._symbol1=_61b.vertexSymbol;this._symbol2=_61b.ghostVertexSymbol;var _61c=_61b.ghostLineSymbol;this._lineStroke={style:_61c.style,width:_61c.width,color:_61c.color};this._canDel=_61b.allowDeleteVertices;this._canAdd=_61b.allowAddVertices;this._addControllers();},destroy:function(){this._removeControllers();},refresh:function(_61d){if(_61d){this._removeControllers();this._addControllers();}else{this._refresh(this._vertexMovers);this._refresh(this._mpVertexMovers);}},suspend:function(){if(!this._suspended){this._removeControllers();}this._suspended=true;},resume:function(){if(this._suspended){this._addControllers();}this._suspended=false;},_addControllers:function(){this._firstMoveHandle=dojo.connect(esri.toolbars.VertexMover,"onFirstMove",this,this._firstMoveHandler);this._moveStopHandle=dojo.connect(esri.toolbars.VertexMover,"onMoveStop",this,this._moveStopHandler);this._vertexMovers=this._add(this._getSegments(this.graphic.geometry),this._symbol1);if(this._canAdd){this._mpVertexMovers=this._add(this._getMidpointSegments(this.graphic.geometry),this._symbol2,true);}var _61e=this._getGraphicsLayer();this._mouseOverHandle=dojo.connect(_61e,"onMouseOver",this,this._mouseOverHandler);this._mouseOutHandle=dojo.connect(_61e,"onMouseOut",this,this._mouseOutHandler);if(this._canDel){this._ctxMenu=new _617.Menu({style:"font-size: 12px; margin-left: 5px; margin-top: 5px;"});var _61f=(this._ctxDelete=new _617.MenuItem({label:esri.bundle.toolbars.edit.deleteLabel,iconClass:"vertexDeleteIcon",style:"outline: none;"}));this._deleteHandle=dojo.connect(_61f,"onClick",this,this._deleteHandler);this._ctxMenu.addChild(_61f);this._ctxMenu.startup();}},_removeControllers:function(){dojo.disconnect(this._firstMoveHandle);dojo.disconnect(this._moveStopHandle);dojo.disconnect(this._mouseOverHandle);dojo.disconnect(this._mouseOutHandle);dojo.disconnect(this._deleteHandle);if(this._ctxMenu){this._ctxDelete=null;this._unbindCtxNode();this._ctxMenu.destroyRecursive();}this._remove(this._vertexMovers);this._remove(this._mpVertexMovers);this._vertexMovers=this._mpVertexMovers=null;},_add:function(_620,_621,_622){var i,j,_623=this.graphic,_624=[];for(i=0;i<_620.length;i++){var _625=_620[i],_626=[];for(j=0;j<_625.length;j++){_626.push(new esri.toolbars.VertexMover(_625[j],_621,_623,i,j,_625.length,this,_622));}_624.push(_626);}return _624;},_remove:function(_627){if(_627){dojo.forEach(_627,function(_628){dojo.forEach(_628,function(_629){_629.destroy();});});}},_refresh:function(_62a){if(_62a){dojo.forEach(_62a,function(_62b){dojo.forEach(_62b,function(_62c){_62c.refresh();});});}},_isNew:function(_62d){return (dojo.indexOf(this._vertexMovers[_62d.segIndex],_62d)===-1)?true:false;},_getGraphicsLayer:function(){return this.toolbar._scratchGL;},_deleteHandler:function(evt){var _62e=this._selectedMover,_62f=_62e.ptIndex;this._updateRelatedGraphic(_62e,_62e.relatedGraphic,_62e.graphic.geometry,_62e.segIndex,_62e.ptIndex,_62e.segLength,false,true);if(this._canAdd){this._deleteMidpoints(_62e);}this._deleteVertex(_62e);this.toolbar._endOperation("VERTICES");},_mouseOverHandler:function(evt){var _630=evt.graphic,_631=this._findMover(_630);if(_631){this.toolbar.onVertexMouseOver(this.graphic,_631._getInfo());if(!_631._placeholder){this._selectedMover=_631;if(this._canDel){this._bindCtxNode(_630.getDojoShape().getNode());}}}},_mouseOutHandler:function(evt){var _632=evt.graphic,_633=this._findMover(_632);if(_633){this.toolbar.onVertexMouseOut(this.graphic,_633._getInfo());}},_bindCtxNode:function(node){this._unbindCtxNode();this._ctxDelete.set("disabled",(this._selectedMover.segLength<=this.minLength)?true:false);this._ctxMenu.bindDomNode(node);this._bindNode=node;},_unbindCtxNode:function(){var node=this._bindNode;if(node){this._ctxMenu.unBindDomNode(node);}},_findMover:function(_634){var i,_635=[],_636=this._mpVertexMovers;dojo.forEach(this._vertexMovers,function(_637){_635=_635.concat(_637);});if(_636){dojo.forEach(_636,function(_638){_635=_635.concat(_638);});}for(i=0;i<_635.length;i++){var _639=_635[i];if(_639.graphic===_634){return _639;}}},_firstMoveHandler:function(_63a){if(!this._isNew(_63a)&&this._canAdd){this._hideRelatedMidpoints(_63a);}this.toolbar._beginOperation("VERTICES");},_moveStopHandler:function(_63b,tx){var add=this._isNew(_63b);if(!tx||!tx.dx&&!tx.dy){if(!add&&this._canAdd){this._showRelatedMidpoints(_63b);}return;}this._updateRelatedGraphic(_63b,_63b.relatedGraphic,_63b.graphic.geometry,_63b.segIndex,_63b.ptIndex,_63b.segLength,add);if(this._canAdd){if(add){this._addMidpoints(_63b);}else{this._repositionRelatedMidpoints(_63b);this._showRelatedMidpoints(_63b);}}this.toolbar._endOperation("VERTICES");},_showRelatedMidpoints:function(_63c){var i,_63d=this._getAdjacentMidpoints(_63c.ptIndex,_63c.segLength),_63e=this._mpVertexMovers[_63c.segIndex];for(i=0;i<_63d.length;i++){var mvr=_63e[_63d[i]];mvr.graphic.show();mvr.refresh();}},_hideRelatedMidpoints:function(_63f){var i,_640=this._getAdjacentMidpoints(_63f.ptIndex,_63f.segLength),_641=this._mpVertexMovers[_63f.segIndex];for(i=0;i<_640.length;i++){_641[_640[i]].graphic.hide();}},_repositionRelatedMidpoints:function(_642){var i,_643=this._getAdjacentMidpoints(_642.ptIndex,_642.segLength),_644=this._mpVertexMovers[_642.segIndex];for(i=0;i<_643.length;i++){var _645=this._getAdjacentVertices(_643[i],_642.segLength);var _646=_642.relatedGraphic.geometry.getPoint(_642.segIndex,_645[0]),_647=_642.relatedGraphic.geometry.getPoint(_642.segIndex,_645[1]);var _648=new esri.geometry.Point({x:(_646.x+_647.x)/2,y:(_646.y+_647.y)/2,spatialReference:_646.spatialReference.toJson()});_644[_643[i]].graphic.setGeometry(_648);}},_addMidpoints:function(_649){var _64a=_649.segIndex,_64b=_649.ptIndex,_64c=_649.segLength;var _64d=_64b+1;var i,_64e=_64c+1;this._mpVertexMovers[_64a].splice(_64b,1);var _64f=this._vertexMovers[_64a];for(i=0;i<_64d;i++){_64f[i].segLength+=1;}for(i=_64d;i<_64f.length;i++){_64f[i].ptIndex+=1;_64f[i].segLength+=1;}_649.ptIndex=_64d;_649.segLength=_64f.length+1;_64f.splice(_64d,0,_649);_649.graphic.setSymbol(this._symbol1);_64f=this._mpVertexMovers[_64a];for(i=0;i<_64b;i++){_64f[i].segLength+=1;}for(i=_64b;i<_64c-1;i++){_64f[i].ptIndex+=1;_64f[i].segLength+=1;}var _650=this._getAdjacentVertices(_64b,_64e);var _651=this._getAdjacentVertices(_64b+1,_64e);var _652,_653;_652=_649.relatedGraphic.geometry.getPoint(_649.segIndex,_650[0]);_653=_649.relatedGraphic.geometry.getPoint(_649.segIndex,_650[1]);var _654=new esri.geometry.Point({x:(_652.x+_653.x)/2,y:(_652.y+_653.y)/2,spatialReference:_652.spatialReference.toJson()});_652=_649.relatedGraphic.geometry.getPoint(_649.segIndex,_651[0]);_653=_649.relatedGraphic.geometry.getPoint(_649.segIndex,_651[1]);var _655=new esri.geometry.Point({x:(_652.x+_653.x)/2,y:(_652.y+_653.y)/2,spatialReference:_652.spatialReference.toJson()});var mvr1=new esri.toolbars.VertexMover(_654,this._symbol2,this.graphic,_649.segIndex,_64b,_64e,this,true);var mvr2=new esri.toolbars.VertexMover(_655,this._symbol2,this.graphic,_649.segIndex,_64b+1,_64e,this,true);_64f.splice(_64b,0,mvr1,mvr2);},_deleteVertex:function(_656){var i,_657=_656.segIndex,_658=_656.ptIndex;var _659=this._vertexMovers[_657];for(i=0;i<_658;i++){_659[i].segLength-=1;}for(i=_658+1;i<_659.length;i++){var mvr=_659[i];mvr.ptIndex-=1;mvr.segLength-=1;}_659.splice(_658,1);var info=_656._getInfo();_656.destroy();this.toolbar.onVertexDelete(this.graphic,info);}});dojo.mixin(esri.toolbars._GraphicVertexEditor,{create:function(_65a,map,_65b){var type=_65a.geometry.type;switch(type){case "multipoint":return new esri.toolbars._MultipointVertexEditor(_65a,map,_65b);break;case "polyline":return new esri.toolbars._PolylineVertexEditor(_65a,map,_65b);break;case "polygon":return new esri.toolbars._PolygonVertexEditor(_65a,map,_65b);break;}}});dojo.declare("esri.toolbars._MultipointVertexEditor",esri.toolbars._GraphicVertexEditor,{minLength:1,constructor:function(){this._moveStartHandle=dojo.connect(esri.toolbars.VertexMover,"onMoveStart",this,this._moveStartHandler);dojo.disconnect(this._firstMoveHandle);},destroy:function(){this.inherited(arguments);dojo.disconnect(this._moveStartHandle);},_getSegments:function(_65c){var i,_65d=_65c.points,_65e=[],sr=_65c.spatialReference;for(i=0;i<_65d.length;i++){var _65f=_65d[i];_65e.push(new esri.geometry.Point({x:_65f[0],y:_65f[1],spatialReference:sr.toJson()}));}return [_65e];},_getMidpointSegments:function(_660){return [];},_getControlPoints:function(_661,_662,_663,_664,_665){return [];},_getGraphicsLayer:function(){return this.graphic._graphicsLayer;},_mouseOverHandler:function(evt){var _666=evt.graphic,_667=this._findMover(evt);if(_667){this.toolbar.onVertexMouseOver(_666,_667._getInfo());this._selectedMover=_667;if(this._canDel){this._bindCtxNode(_667.graphic.getDojoShape().getNode());}}},_mouseOutHandler:function(evt){var _668=evt.graphic,_669=this._findMover(evt);if(_669){this.toolbar.onVertexMouseOut(_668,_669._getInfo());}},_findMover:function(evt){var i,_66a=[].concat(this._vertexMovers[0]),_66b=evt.target;for(i=0;i<_66a.length;i++){var _66c=_66a[i];if(_66c.graphic.getDojoShape().getNode()===_66b){return _66c;}}},_moveStartHandler:function(_66d){var geom=_66d.relatedGraphic.geometry,_66e=_66d.ptIndex;var _66f=_66d.segLength-1;var _670=geom.points;var _671=_670.splice(_66e,1);_670.push(_671[0]);var j,_672=this._vertexMovers[0];for(j=_66f;j>_66e;j--){_672[j].ptIndex-=1;}_671=_672.splice(_66e,1);_672.push(_671[0]);_671[0].ptIndex=_66f;},_moveStopHandler:function(_673){this._updateRelatedGraphic(_673,_673.relatedGraphic,_673.graphic.geometry,_673.segIndex,_673.ptIndex,_673.segLength);this.toolbar._endOperation("VERTICES");},_updateRelatedGraphic:function(_674,_675,_676,_677,_678,_679,add,del){var geom=_675.geometry;if(del){geom.removePoint(_678);}else{geom.setPoint(_678,_676);}_675.setGeometry(geom);},_deleteMidpoints:function(_67a){}});dojo.declare("esri.toolbars._PolylineVertexEditor",esri.toolbars._GraphicVertexEditor,{minLength:2,_getSegments:function(_67b){var i,j,_67c=_67b.paths,_67d=[];for(i=0;i<_67c.length;i++){var path=_67c[i],_67e=[];for(j=0;j<path.length;j++){_67e.push(_67b.getPoint(i,j));}_67d.push(_67e);}return _67d;},_getMidpointSegments:function(_67f){var i,j,_680=_67f.paths,_681=[],sr=_67f.spatialReference;for(i=0;i<_680.length;i++){var path=_680[i],_682=[];for(j=0;j<path.length-1;j++){var _683=_67f.getPoint(i,j),_684=_67f.getPoint(i,j+1);var midX=(_683.x+_684.x)/2,midY=(_683.y+_684.y)/2;var _685=new esri.geometry.Point({x:midX,y:midY,spatialReference:sr.toJson()});_682.push(_685);}_681.push(_682);}return _681;},_getControlPoints:function(_686,_687,_688,_689,_68a){var map=this.map,idx1,idx2,pt1,pt2;if(this._isNew(_686)){idx1=_689;idx2=_689+1;if(idx1>=0){pt1=map.toScreen(_687.getPoint(_688,idx1));}if(idx2<=_68a){pt2=map.toScreen(_687.getPoint(_688,idx2));}}else{idx1=_689-1;idx2=_689+1;if(idx1>=0){pt1=map.toScreen(_687.getPoint(_688,idx1));}if(idx2<_68a){pt2=map.toScreen(_687.getPoint(_688,idx2));}}return [pt1,pt2];},_getAdjacentMidpoints:function(_68b,_68c){var _68d=[];var idx1=_68b-1;if(idx1>=0){_68d.push(idx1);}var idx2=_68b;if(idx2<_68c-1){_68d.push(idx2);}return _68d;},_getAdjacentVertices:function(_68e,_68f){return [_68e,_68e+1];},_deleteMidpoints:function(_690){var _691=_690.segIndex,_692=_690.ptIndex,_693=_690.segLength;var _694=this._mpVertexMovers[_691],_695=_694.length-1;var _696=this._getAdjacentMidpoints(_692,_693).sort();var i,min=_696[0];for(i=0;i<min;i++){_694[i].segLength-=1;}for(i=min+1;i<_694.length;i++){var mvr=_694[i];mvr.ptIndex-=1;mvr.segLength-=1;}if(_696.length===1){_694.splice(min,1)[0].destroy();}else{var _697=this._getAdjacentVertices(min,_695);var _698=_690.relatedGraphic.geometry.getPoint(_690.segIndex,_697[0]);var _699=_690.relatedGraphic.geometry.getPoint(_690.segIndex,_697[1]);var _69a=new esri.geometry.Point({x:(_698.x+_699.x)/2,y:(_698.y+_699.y)/2,spatialReference:_698.spatialReference.toJson()});var mvr1=new esri.toolbars.VertexMover(_69a,this._symbol2,this.graphic,_690.segIndex,min,_695,this,true);var _69b=_694.splice(min,_696.length,mvr1);for(i=0;i<_69b.length;i++){_69b[i].destroy();}}},_updateRelatedGraphic:function(_69c,_69d,_69e,_69f,_6a0,_6a1,add,del){var geom=_69d.geometry;if(add){geom.insertPoint(_69f,_6a0+1,esri.geometry.fromJson(_69e.toJson()));}else{if(del){geom.removePoint(_69f,_6a0);}else{geom.setPoint(_69f,_6a0,esri.geometry.fromJson(_69e.toJson()));}}_69d.setGeometry(geom);}});dojo.declare("esri.toolbars._PolygonVertexEditor",esri.toolbars._GraphicVertexEditor,{minLength:3,_getSegments:function(_6a2){var i,j,_6a3=_6a2.rings,_6a4=[];for(i=0;i<_6a3.length;i++){var ring=_6a3[i],_6a5=[];for(j=0;j<ring.length-1;j++){_6a5.push(_6a2.getPoint(i,j));}_6a4.push(_6a5);}return _6a4;},_getMidpointSegments:function(_6a6){var i,j,_6a7=_6a6.rings,_6a8=[],sr=_6a6.spatialReference;for(i=0;i<_6a7.length;i++){var ring=_6a7[i],_6a9=[];for(j=0;j<ring.length-1;j++){var _6aa=_6a6.getPoint(i,j),_6ab=_6a6.getPoint(i,j+1);var midX=(_6aa.x+_6ab.x)/2,midY=(_6aa.y+_6ab.y)/2;var _6ac=new esri.geometry.Point({x:midX,y:midY,spatialReference:sr.toJson()});_6a9.push(_6ac);}_6a8.push(_6a9);}return _6a8;},_getControlPoints:function(_6ad,_6ae,_6af,_6b0,_6b1){var map=this.map,idx1,idx2,pt1,pt2;if(this._isNew(_6ad)){idx1=_6b0;idx2=(_6b0+1)%_6b1;}else{idx1=_6b0-1;idx1=idx1<0?(_6b1+idx1)%_6b1:idx1;idx2=(_6b0+1)%_6b1;}pt1=map.toScreen(_6ae.getPoint(_6af,idx1));pt2=map.toScreen(_6ae.getPoint(_6af,idx2));return [pt1,pt2];},_getAdjacentMidpoints:function(_6b2,_6b3){var idx1=_6b2-1;idx1=idx1<0?(_6b3+idx1)%_6b3:idx1;var idx2=_6b2;return [idx1,idx2];},_getAdjacentVertices:function(_6b4,_6b5){return [_6b4,(_6b4+1)%_6b5];},_deleteMidpoints:function(_6b6){var _6b7=_6b6.segIndex,_6b8=_6b6.ptIndex,_6b9=_6b6.segLength;var _6ba=this._mpVertexMovers[_6b7],_6bb=_6ba.length-1,_6bc=this._getAdjacentMidpoints(_6b8,_6b9).sort(),_6bd,_6be,_6bf,_6c0,i,mvr1,mvr,min=_6bc[0],max=_6bc[_6bc.length-1];if(_6b8===0){_6bd=this._getAdjacentVertices(_6bb-1,_6bb);_6be=_6b6.relatedGraphic.geometry.getPoint(_6b6.segIndex,_6bd[0]);_6bf=_6b6.relatedGraphic.geometry.getPoint(_6b6.segIndex,_6bd[1]);_6c0=new esri.geometry.Point({x:(_6be.x+_6bf.x)/2,y:(_6be.y+_6bf.y)/2,spatialReference:_6be.spatialReference.toJson()});mvr1=new esri.toolbars.VertexMover(_6c0,this._symbol2,this.graphic,_6b6.segIndex,_6bb-1,_6bb,this,true);_6ba.splice(max,1,mvr1)[0].destroy();_6ba.splice(min,1)[0].destroy();for(i=0;i<_6ba.length-1;i++){mvr=_6ba[i];mvr.ptIndex-=1;mvr.segLength-=1;}}else{_6bd=this._getAdjacentVertices(min,_6bb);_6be=_6b6.relatedGraphic.geometry.getPoint(_6b6.segIndex,_6bd[0]);_6bf=_6b6.relatedGraphic.geometry.getPoint(_6b6.segIndex,_6bd[1]);_6c0=new esri.geometry.Point({x:(_6be.x+_6bf.x)/2,y:(_6be.y+_6bf.y)/2,spatialReference:_6be.spatialReference.toJson()});mvr1=new esri.toolbars.VertexMover(_6c0,this._symbol2,this.graphic,_6b6.segIndex,min,_6bb,this,true);var _6c1=_6ba.splice(min,_6bc.length,mvr1);for(i=0;i<_6c1.length;i++){_6c1[i].destroy();}for(i=0;i<min;i++){_6ba[i].segLength-=1;}for(i=min+1;i<_6ba.length;i++){mvr=_6ba[i];mvr.ptIndex-=1;mvr.segLength-=1;}}},_updateRelatedGraphic:function(_6c2,_6c3,_6c4,_6c5,_6c6,_6c7,add,del){var geom=_6c3.geometry;if(add){geom.insertPoint(_6c5,_6c6+1,esri.geometry.fromJson(_6c4.toJson()));}else{if(del){geom.removePoint(_6c5,_6c6);if(_6c6===0){geom.setPoint(_6c5,_6c7-1,esri.geometry.fromJson(geom.getPoint(_6c5,0).toJson()));}}else{geom.setPoint(_6c5,_6c6,esri.geometry.fromJson(_6c4.toJson()));if(_6c6===0){geom.setPoint(_6c5,_6c7,esri.geometry.fromJson(_6c4.toJson()));}}}_6c3.setGeometry(geom);}});});},"dojox/charting/axis2d/Base":function(){define("dojox/charting/axis2d/Base",["dojo/_base/declare","../Element"],function(_6c8,_6c9){return _6c8("dojox.charting.axis2d.Base",_6c9,{constructor:function(_6ca,_6cb){this.vertical=_6cb&&_6cb.vertical;this.opt={};this.opt.min=_6cb&&_6cb.min;this.opt.max=_6cb&&_6cb.max;},clear:function(){return this;},initialized:function(){return false;},calculate:function(min,max,span){return this;},getScaler:function(){return null;},getTicks:function(){return null;},getOffsets:function(){return {l:0,r:0,t:0,b:0};},render:function(dim,_6cc){this.dirty=false;return this;}});});},"dojox/charting/Series":function(){define("dojox/charting/Series",["dojo/_base/lang","dojo/_base/declare","./Element"],function(lang,_6cd,_6ce){return _6cd("dojox.charting.Series",_6ce,{constructor:function(_6cf,data,_6d0){lang.mixin(this,_6d0);if(typeof this.plot!="string"){this.plot="default";}this.update(data);},clear:function(){this.dyn={};},update:function(data){if(lang.isArray(data)){this.data=data;}else{this.source=data;this.data=this.source.data;if(this.source.setSeriesObject){this.source.setSeriesObject(this);}}this.dirty=true;this.clear();}});});},"url:dojox/grid/resources/View.html":"<div class=\"dojoxGridView\" role=\"presentation\">\n\t<div class=\"dojoxGridHeader\" dojoAttachPoint=\"headerNode\" role=\"presentation\">\n\t\t<div dojoAttachPoint=\"headerNodeContainer\" style=\"width:9000em\" role=\"presentation\">\n\t\t\t<div dojoAttachPoint=\"headerContentNode\" role=\"row\"></div>\n\t\t</div>\n\t</div>\n\t<input type=\"checkbox\" class=\"dojoxGridHiddenFocus\" dojoAttachPoint=\"hiddenFocusNode\" role=\"presentation\" />\n\t<input type=\"checkbox\" class=\"dojoxGridHiddenFocus\" role=\"presentation\" />\n\t<div class=\"dojoxGridScrollbox\" dojoAttachPoint=\"scrollboxNode\" role=\"presentation\">\n\t\t<div class=\"dojoxGridContent\" dojoAttachPoint=\"contentNode\" hidefocus=\"hidefocus\" role=\"presentation\"></div>\n\t</div>\n</div>\n","dojox/lang/functional/lambda":function(){define("dojox/lang/functional/lambda",["../..","dojo/_base/kernel","dojo/_base/lang","dojo/_base/array"],function(_6d1,dojo,lang,arr){var df=lang.getObject("lang.functional",true,_6d1);var _6d2={};var _6d3="ab".split(/a*/).length>1?String.prototype.split:function(sep){var r=this.split.call(this,sep),m=sep.exec(this);if(m&&m.index==0){r.unshift("");}return r;};var _6d4=function(s){var args=[],_6d5=_6d3.call(s,/\s*->\s*/m);if(_6d5.length>1){while(_6d5.length){s=_6d5.pop();args=_6d5.pop().split(/\s*,\s*|\s+/m);if(_6d5.length){_6d5.push("(function("+args+"){return ("+s+")})");}}}else{if(s.match(/\b_\b/)){args=["_"];}else{var l=s.match(/^\s*(?:[+*\/%&|\^\.=<>]|!=)/m),r=s.match(/[+\-*\/%&|\^\.=<>!]\s*$/m);if(l||r){if(l){args.push("$1");s="$1"+s;}if(r){args.push("$2");s=s+"$2";}}else{var vars=s.replace(/(?:\b[A-Z]|\.[a-zA-Z_$])[a-zA-Z_$\d]*|[a-zA-Z_$][a-zA-Z_$\d]*:|this|true|false|null|undefined|typeof|instanceof|in|delete|new|void|arguments|decodeURI|decodeURIComponent|encodeURI|encodeURIComponent|escape|eval|isFinite|isNaN|parseFloat|parseInt|unescape|dojo|dijit|dojox|window|document|'(?:[^'\\]|\\.)*'|"(?:[^"\\]|\\.)*"/g,"").match(/([a-z_$][a-z_$\d]*)/gi)||[],t={};arr.forEach(vars,function(v){if(!(v in t)){args.push(v);t[v]=1;}});}}}return {args:args,body:s};};var _6d6=function(a){return a.length?function(){var i=a.length-1,x=df.lambda(a[i]).apply(this,arguments);for(--i;i>=0;--i){x=df.lambda(a[i]).call(this,x);}return x;}:function(x){return x;};};lang.mixin(df,{rawLambda:function(s){return _6d4(s);},buildLambda:function(s){s=_6d4(s);return "function("+s.args.join(",")+"){return ("+s.body+");}";},lambda:function(s){if(typeof s=="function"){return s;}if(s instanceof Array){return _6d6(s);}if(s in _6d2){return _6d2[s];}s=_6d4(s);return _6d2[s]=new Function(s.args,"return ("+s.body+");");},clearLambdaCache:function(){_6d2={};}});return df;});},"esri/dijit/NavigationBar":function(){define("esri/dijit/NavigationBar",["dijit","dojo","dojox","dojo/require!esri/dijit/_TouchBase"],function(_6d7,dojo,_6d8){dojo.provide("esri.dijit.NavigationBar");dojo.require("esri.dijit._TouchBase");dojo.declare("esri.dijit.NavigationBar",null,{_items:[],constructor:function(_6d9,_6da){this.container=dojo.byId(_6da);this._touchBase=esri.dijit._TouchBase(this.container,null);this._slideDiv=dojo.create("div",{},this.container,"first");this.events=[dojo.connect(this._touchBase,"onclick",this,this._onClickHandler)];this._items=_6d9.items;dojo.addClass(this.container,"esriMobileNavigationBar");var _6db=dojo.create("div",{},this._slideDiv);for(var i=0;i<this._items.length;i++){var node,div;switch(this._items[i].type){case "img":div=dojo.create("div",{"class":"esriMobileNavigationItem"},_6db);node=dojo.create("img",{src:this._items[i].src.toString(),style:{width:"100%",height:"100%"}},div);break;case "span":div=dojo.create("div",{"class":"esriMobileNavigationItem"},_6db);node=dojo.create("span",{innerHTML:this._items[i].text},div);break;case "div":div=dojo.create("div",{"class":"esriMobileNavigationInfoPanel"},_6db);node=dojo.create("div",{innerHTML:this._items[i].text},div);break;}dojo.addClass(div,this._items[i].position);if(this._items[i].className){dojo.addClass(node,this._items[i].className);}node._index=i;node._item=this._items[i];this._items[i]._node=node;}},startup:function(){this.onCreate(this._items);},destroy:function(){dojo.forEach(this.events,dojo.disconnect);this._touchBase=null;dojo.query("img",this.container).forEach(function(node){node._index=null;node._item=null;dojo.destroy(node);node=null;});this._items=null;dojo.destroy(this._slideDiv);dojo.destroy(this.container);this.container=this._slideDiv=null;},getItems:function(){return this._items;},select:function(item){this._markSelected(item._node,item);},onSelect:function(item){},onUnSelect:function(item){},onCreate:function(_6dc){},_onClickHandler:function(e){if(e.target.tagName.toLowerCase()==="img"){var img=e.target;var _6dd=img._index;var item=img._item;dojo.query("img",this.container).forEach(function(node){if(node!==img&&node._item.toggleGroup===item.toggleGroup){this._markUnSelected(node,node._item);}},this);this._toggleNode(img,item);}},_toggleNode:function(_6de,item){if(item.toggleState==="ON"){item.toggleState="OFF";if(item.src){_6de.src=item.src.toString();}this.onUnSelect(item);}else{item.toggleState="ON";if(item.srcAlt){_6de.src=item.srcAlt;}this.onSelect(item);}},_markSelected:function(_6df,item){item.toggleState="ON";if(item.srcAlt){_6df.src=item.srcAlt;}this.onSelect(item);},_markUnSelected:function(_6e0,item){if(item.toggleState==="ON"){item.toggleState="OFF";if(item.src){_6e0.src=item.src.toString();}this.onUnSelect(item);}}});});},"esri/dijit/Bookmarks":function(){define("esri/dijit/Bookmarks",["dijit","dojo","dojox","dojo/require!esri/map,esri/geometry"],function(_6e1,dojo,_6e2){dojo.provide("esri.dijit.Bookmarks");dojo.require("esri.map");dojo.require("esri.geometry");dojo.declare("esri.dijit.BookmarkItem",null,{constructor:function(_6e3){this.name=_6e3.name;this.extent=_6e3.extent;},toJson:function(){var json={};var _6e4=this.extent.toJson();json.extent={spatialReference:_6e4.spatialReference,xmax:_6e4.xmax,xmin:_6e4.xmin,ymax:_6e4.ymax,ymin:_6e4.ymin};json.name=this.name;return json;}});dojo.declare("esri.dijit.Bookmarks",null,{constructor:function(_6e5,_6e6){this.map=_6e5.map;this.editable=_6e5.editable;this.initBookmarks=_6e5.bookmarks;this._clickHandlers=this._mouseOverHandlers=this._mouseOutHandlers=this._removeHandlers=this._editHandlers=[];this.bookmarkDomNode=dojo.create("div");dojo.addClass(this.bookmarkDomNode,"esriBookmarks");this.bookmarkTable=dojo.create("table");dojo.addClass(this.bookmarkTable,"esriBookmarkTable");this.bookmarkDomNode.appendChild(this.bookmarkTable);_6e6=dojo.byId(_6e6);_6e6.appendChild(this.bookmarkDomNode);this._addInitialBookmarks();},onClick:function(){},onEdit:function(){},onRemove:function(){},addBookmark:function(_6e7){var _6e8;if(_6e7.declaredClass=="esri.dijit.BookmarkItem"){_6e8=_6e7;this.bookmarks.push(_6e8);}else{var _6e9=new esri.geometry.Extent(_6e7.extent);_6e8=new esri.dijit.BookmarkItem({name:_6e7.name,extent:_6e9});this.bookmarks.push(_6e8);}var _6ea;if(this.editable){var _6eb=esri.bundle.widgets.bookmarks;console.log(_6eb);var _6ec=_6eb.NLS_bookmark_edit;var _6ed=_6eb.NLS_bookmark_remove;_6ea=dojo.create("div",{innerHTML:"<div class='esriBookmarkLabel'>"+_6e7.name+"</div><div title='"+_6ed+"' class='esriBookmarkRemoveImage'><br/></div><div title='"+_6ec+"' class='esriBookmarkEditImage'><br/></div>"});var _6ee=dojo.query(".esriBookmarkEditImage",_6ea)[0];var _6ef=dojo.query(".esriBookmarkRemoveImage",_6ea)[0];this._removeHandlers.push(dojo.connect(_6ef,"onclick",this,"_removeBookmark"));this._editHandlers.push(dojo.connect(_6ee,"onclick",this,"_editBookmarkLabel"));}else{_6ea=dojo.create("div",{innerHTML:"<div class='esriBookmarkLabel' style='width: 210px;'>"+_6e7.name+"</div>"});}dojo.addClass(_6ea,"esriBookmarkItem");var _6f0;if(_6e7.extent.declaredClass=="esri.geometry.Extent"){_6f0=_6e7.extent;}else{_6f0=new esri.geometry.Extent(_6e7.extent);}var _6f1=dojo.query(".esriBookmarkLabel",_6ea)[0];this._clickHandlers.push(dojo.connect(_6f1,"onclick",dojo.hitch(this,"_onClickHandler",_6e7)));this._mouseOverHandlers.push(dojo.connect(_6ea,"onmouseover",function(){dojo.addClass(this,"esriBookmarkHighlight");}));this._mouseOutHandlers.push(dojo.connect(_6ea,"onmouseout",function(){dojo.removeClass(this,"esriBookmarkHighlight");}));var _6f2=this.bookmarkTable;var _6f3;if(this.editable){_6f3=_6f2.rows.length-1;}else{_6f3=_6f2.rows.length;}var _6f4=_6f2.insertRow(_6f3);var _6f5=_6f4.insertCell(0);_6f5.appendChild(_6ea);},removeBookmark:function(_6f6){var _6f7=dojo.query(".esriBookmarkLabel",this.bookmarkDomNode);var _6f8=dojo.filter(_6f7,function(item){return item.innerHTML==_6f6;});dojo.forEach(_6f8,function(_6f9){_6f9.parentNode.parentNode.parentNode.parentNode.removeChild(_6f9.parentNode.parentNode.parentNode);});for(var i=this.bookmarks.length-1;i>=0;i--){if(this.bookmarks[i].name==_6f6){this.bookmarks.splice(i,1);}}this.onRemove();},hide:function(){esri.hide(this.bookmarkDomNode);},show:function(){esri.show(this.bookmarkDomNode);},destroy:function(){this.map=null;dojo.forEach(this._clickHandlers,function(_6fa,idx){dojo.disconnect(_6fa);});dojo.forEach(this._mouseOverHandlers,function(_6fb,idx){dojo.disconnect(_6fb);});dojo.forEach(this._mouseOutHandlers,function(_6fc,idx){dojo.disconnect(_6fc);});dojo.forEach(this._removeHandlers,function(_6fd,idx){dojo.disconnect(_6fd);});dojo.forEach(this._editHandlers,function(_6fe,idx){dojo.disconnect(_6fe);});dojo.destroy(this.bookmarkDomNode);},toJson:function(){var _6ff=[];dojo.forEach(this.bookmarks,function(_700,idx){_6ff.push(_700.toJson());});return _6ff;},_addInitialBookmarks:function(){if(this.editable){var _701=esri.bundle.widgets.bookmarks;var _702=_701.NLS_add_bookmark;var _703=dojo.create("div",{innerHTML:"<div>"+_702+"</div>"});dojo.addClass(_703,"esriBookmarkItem");dojo.addClass(_703,"esriAddBookmark");this._clickHandlers.push(dojo.connect(_703,"onclick",this,this._newBookmark));this._mouseOverHandlers.push(dojo.connect(_703,"onmouseover",function(){dojo.addClass(this,"esriBookmarkHighlight");}));this._mouseOutHandlers.push(dojo.connect(_703,"onmouseout",function(){dojo.removeClass(this,"esriBookmarkHighlight");}));var _704=this.bookmarkTable;var _705=_704.insertRow(0);var _706=_705.insertCell(0);_706.appendChild(_703);}this.bookmarks=[];dojo.forEach(this.initBookmarks,function(_707,idx){this.addBookmark(_707);},this);},_removeBookmark:function(e){this.bookmarks.splice(e.target.parentNode.parentNode.parentNode.rowIndex,1);e.target.parentNode.parentNode.parentNode.parentNode.removeChild(e.target.parentNode.parentNode.parentNode);this.onRemove();},_editBookmarkLabel:function(e){var node=e.target.parentNode;var _708=dojo.position(node,true);var y=_708.y;var _709=dojo.create("div",{innerHTML:"<input type='text' class='esriBookmarkEditBox' style='left:"+_708.x+"px; top:"+y+"px;'/>"});this._inputBox=dojo.query("input",_709)[0];this._label=dojo.query(".esriBookmarkLabel",node)[0];var _70a=esri.bundle.widgets.bookmarks;var _70b=_70a.NLS_new_bookmark;if(this._label.innerHTML==_70b){this._inputBox.value="";}else{this._inputBox.value=this._label.innerHTML;}dojo.connect(this._inputBox,"onkeyup",this,function(key){switch(key.keyCode){case dojo.keys.ENTER:this._finishEdit();break;default:break;}});dojo.connect(this._inputBox,"onblur",this,"_finishEdit");node.appendChild(_709);this._inputBox.focus();},_finishEdit:function(){this._inputBox.parentNode.parentNode.removeChild(this._inputBox.parentNode);var _70c=esri.bundle.widgets.bookmarks;var _70d=_70c.NLS_new_bookmark;if(this._inputBox.value==""){this._label.innerHTML=_70d;}else{this._label.innerHTML=this._inputBox.value;}var _70e=dojo.query(".esriBookmarkLabel",this.bookmarkDomNode);dojo.forEach(this.bookmarks,function(_70f,idx){_70f.name=_70e[idx].innerHTML;});this.onEdit();},_newBookmark:function(){var map=this.map,_710=esri.bundle.widgets.bookmarks,_711=_710.NLS_new_bookmark,_712=map.extent,_713;if(map.spatialReference._isWrappable()){var xmin=esri.geometry.Extent.prototype._normalizeX(_712.xmin,map.spatialReference._getInfo()).x;var xmax=esri.geometry.Extent.prototype._normalizeX(_712.xmax,map.spatialReference._getInfo()).x;if(xmin>xmax){var _714=map.spatialReference.isWebMercator(),maxX=_714?20037508.342788905:180,minX=_714?-20037508.342788905:-180,_715,_716;if(Math.abs(xmin-maxX)>Math.abs(xmax-minX)){_715=xmin;_716=maxX;}else{_715=minX;_716=xmax;}_713=new esri.geometry.Extent(_715,_712.ymin,_716,_712.ymax,map.spatialReference);}else{_713=new esri.geometry.Extent(xmin,_712.ymin,xmax,_712.ymax,map.spatialReference);}}else{_713=_712;}var _717=new esri.dijit.BookmarkItem({"name":_711,"extent":_713});this.addBookmark(_717);var _718=dojo.query(".esriBookmarkItem",this.bookmarkDomNode);var _719=_718[_718.length-2];var e={"target":{"parentNode":null}};e.target.parentNode=_719;this._editBookmarkLabel(e);},_onClickHandler:function(_71a){var _71b=_71a.extent;if(!_71a.extent.declaredClass){_71b=new esri.geometry.Extent(_71a.extent);}this.map.setExtent(_71b);this.onClick();}});});},"esri/dijit/BasemapGallery":function(){define("esri/dijit/BasemapGallery",["dijit","dojo","dojox","dojo/require!esri/virtualearth/VETiledLayer,esri/layers/osm,dijit/_Widget,dijit/_Templated,dojo/DeferredList"],function(_71c,dojo,_71d){dojo.provide("esri.dijit.BasemapGallery");dojo.require("esri.virtualearth.VETiledLayer");dojo.require("esri.layers.osm");dojo.require("dijit._Widget");dojo.require("dijit._Templated");dojo.require("dojo.DeferredList");esri.dijit._arcgisUrl="http://www.arcgis.com/sharing/rest";dojo.declare("esri.dijit.BasemapGallery",[_71c._Widget,_71c._Templated],{widgetsInTemplate:true,templateString:"<div class=\"esriBasemapGallery\">\r\n  <div dojoAttachPoint=\"flowContainer\">\r\n  </div>\r\n</div>",basePath:dojo.moduleUrl("esri.dijit"),loaded:false,basemaps:[],bingMapsKey:null,flowContainer:null,_hasUI:false,_selectedBasemap:null,_selectBasemapInProgress:false,constructor:function(_71e,_71f){_71e=_71e||{};if(!_71e.map){console.error("esri.dijit.BasemapGallery: Unable to find the 'map' property in parameters");}this.map=_71e.map;this._hasUI=_71f?true:false;this.bingMapsKey=(_71e.bingMapsKey&&_71e.bingMapsKey.length>0)?_71e.bingMapsKey:null;this.showArcGISBasemaps=(_71e.showArcGISBasemaps===false)?false:true;this.basemaps=_71e.basemaps?_71e.basemaps:[];this.basemapIds=_71e.basemapIds;this.referenceIds=_71e.referenceIds;this.basemapsGroup=_71e.basemapsGroup;if(location.protocol==="https:"){esri.dijit._arcgisUrl=esri.dijit._arcgisUrl.replace("http:","https:");}this.init();},init:function(){this.inherited(arguments);dojo.forEach(this.basemaps,function(_720,i){if(!_720.id||_720.id.length===0){_720.id=this._getUniqueId();}dojo.forEach(_720.layers,function(_721){_721.opacity=(_721.opacity>=0)?_721.opacity:1;_721.visibility=true;},this);},this);if(this.basemapIds&&this.basemapIds.length>0){dojo.forEach(this.basemapIds,function(_722){var _723=this.map.getLayer(_722);_723._basemapGalleryLayerType="basemap";},this);}if(this.referenceIds&&this.referenceIds.length>0){dojo.forEach(this.referenceIds,function(_724){var _725=this.map.getLayer(_724);_725._basemapGalleryLayerType="reference";},this);}if(this.basemapsGroup&&((this.basemapsGroup.owner&&this.basemapsGroup.title)||this.basemapsGroup.id)){this._findCustomBasemapsGroup(dojo.hitch(this,"_handleArcGISBasemapsResponse"));}else{if(this.showArcGISBasemaps){this._findArcGISBasemapsGroup(dojo.hitch(this,"_handleArcGISBasemapsResponse"));}else{this._finishStartup();}}},startup:function(){if(this.loaded){this._refreshUI();}else{dojo.connect(this,"onLoad",dojo.hitch(this,function(){this._refreshUI();}));}},select:function(id){this._select(id);},getSelected:function(){return this._selectedBasemap;},get:function(id){for(var i=0;i<this.basemaps.length;i++){if(this.basemaps[i].id==id){return this.basemaps[i];}}return null;},add:function(_726){if(_726&&!_726.id){_726.id=this._getUniqueId();this.basemaps.push(_726);this._refreshUI();this.onAdd(_726);return true;}else{if(_726&&this._isUniqueId(_726.id)){this.basemaps.push(_726);this._refreshUI();this.onAdd(_726);return true;}}return false;},remove:function(id){for(var i=0;i<this.basemaps.length;i++){var _727=this.basemaps[i];if(_727.id===id){if(this._selectedBasemap&&this._selectedBasemap.id===_727.id){this._selectedBasemap=null;}this.basemaps.splice(i,1);this._refreshUI();this.onRemove(_727);return _727;}}return null;},onLoad:function(){},onSelectionChange:function(){},onAdd:function(_728){},onRemove:function(_729){},onError:function(msg){},_defaultBasemapGalleryGroupQuery:"title:\"ArcGIS Online Basemaps\" AND owner:esri",_basemapGalleryGroupQuery:null,_finishStartup:function(){this.loaded=true;this.onLoad();if(this.map.layerIds.length===0&&this.basemaps.length>0&&!this._selectBasemapInProgress){this._select(this.basemaps[0].id);}},_findCustomBasemapsGroup:function(_72a){if(this.basemapsGroup&&this.basemapsGroup.id){this._findArcGISBasemaps(this.basemapsGroup.id,_72a);}else{this._basemapGalleryGroupQuery="title:\""+this.basemapsGroup.title+"\" AND owner:"+this.basemapsGroup.owner;this._findArcGISBasemapsGroup(_72a);}},_findArcGISBasemapsGroup:function(_72b){if(!this._basemapGalleryGroupQuery){var url=esri.dijit._arcgisUrl+"/accounts/self";var _72c={};_72c.f="json";_72c.culture=dojo.locale;esri.request({url:url,content:_72c,callbackParamName:"callback",load:dojo.hitch(this,function(_72d,args){if(_72d&&_72d.basemapGalleryGroupQuery){this._basemapGalleryGroupQuery=_72d.basemapGalleryGroupQuery;}else{this._basemapGalleryGroupQuery=this._defaultBasemapGalleryGroupQuery;}this._findArcGISBasemapsGroupContent(_72b);}),error:function(_72e,args){this._basemapGalleryGroupQuery=this._defaultBasemapGalleryGroupQuery;}});}else{this._findArcGISBasemapsGroupContent(_72b);}},_findArcGISBasemapsGroupContent:function(_72f){var _730=dojo.hitch(this,"_findArcGISBasemaps");var url=esri.dijit._arcgisUrl+"/community/groups";var _731={};_731.q=this._basemapGalleryGroupQuery;_731.f="json";esri.request({url:url,content:_731,callbackParamName:"callback",load:function(_732,args){if(_732.results.length>0){_730(_732.results[0].id,_72f);}else{console.error("esri.dijit.BasemapGallery: could not find group for basemaps.");}},error:esriConfig.defaults.io.errorHandler});},_findArcGISBasemaps:function(_733,_734){var url=esri.dijit._arcgisUrl+"/search";var _735={};_735.q="group:"+_733+" AND type:\"web map\"";_735.sortField="name";_735.sortOrder="desc";_735.num=50;_735.f="json";esri.request({url:url,content:_735,callbackParamName:"callback",load:function(_736,args){_734(_736.results);},error:esriConfig.defaults.io.errorHandler});},_handleArcGISBasemapsResponse:function(_737){if(_737.length>0){dojo.forEach(_737,function(item,i){if(this.bingMapsKey||(!this.bingMapsKey&&item.title&&item.title.indexOf("Bing Maps")==-1)){var _738={};_738.id=this._getUniqueId();_738.title=item.title;_738.thumbnailUrl=(item.thumbnail&&item.thumbnail.length>0)?(esri.dijit._arcgisUrl+"/content/items/"+item.id+"/info/"+item.thumbnail):"";_738.itemId=item.id;var _739=new esri.dijit.Basemap(_738);this.basemaps.splice(0,0,_739);}},this);this._finishStartup();}},_refreshUI:function(){if(this._hasUI){dojo.empty(this.flowContainer);dojo.forEach(this.basemaps,function(_73a,i){if(!_73a.id){_73a.id="basemap_"+i;}this.flowContainer.appendChild(this._buildNodeLayout(_73a));},this);dojo.create("br",{style:{clear:"both"}},this.flowContainer);this._markSelected(this._selectedBasemap);}},_buildNodeLayout:function(_73b){var nId="galleryNode_"+_73b.id;var n=dojo.create("div",{id:nId,"class":"esriBasemapGalleryNode"});var _73c=dojo.create("a",{href:"#"},n);dojo.connect(_73c,"onclick",dojo.hitch(this,"_onNodeClick",_73b));if(_73b.thumbnailUrl){dojo.create("img",{"class":"esriBasemapGalleryThumbnail",src:_73b.thumbnailUrl},_73c);}else{dojo.create("img",{"class":"esriBasemapGalleryThumbnail",src:this.basePath.toString()+"images/transparent.gif"},_73c);}var _73d=dojo.create("div",{"class":"esriBasemapGalleryLabelContainer"},n);var _73e=_73b.title||"";dojo.create("span",{innerHTML:_73e,alt:_73e,title:_73e},_73d);return n;},_onNodeClick:function(_73f,e){e.preventDefault();this._markSelected(_73f);this.select(_73f.id);},_markSelected:function(_740){if(_740){dojo.forEach(dojo.query(".esriBasemapGallerySelectedNode",this.domNode),function(node){dojo.removeClass(node,"esriBasemapGallerySelectedNode");});var _741=dojo.byId("galleryNode_"+_740.id);if(_741){dojo.addClass(_741,"esriBasemapGallerySelectedNode");}}},_select:function(id){this._selectBasemapInProgress=true;var _742=this.get(id);if(_742){if(_742.layers){this._getServiceInfos(_742);}else{var _743=_742.getLayers();if(dojo.isArray(_743)){this._getServiceInfos(_742);}else{_743.addCallback(dojo.hitch(this,function(_744){this._getServiceInfos(_742);}));}}this._markSelected(_742);}else{this._selectBasemapInProgress=false;}},_getServiceInfos:function(_745){if(location.protocol=="https:"){dojo.forEach(_745.layers,function(_746){if(this._isAgolService(_746.url)||this._isHostedService(_746.url)){_746.url=_746.url.replace("http:","https:");}},this);}this._selectedBasemap=_745;var _747=[];dojo.forEach(_745.layers,function(_748){if(_748.url&&_748.url.length>0&&!_748.isReference){_748.deferredsPos=_747.length;_747.push(this._getServiceInfo(_748.url));}},this);if(_747.length>0){var _749=new dojo.DeferredList(_747);_749.addCallback(dojo.hitch(this,function(_74a){var _74b=null;dojo.forEach(_745.layers,function(_74c){if(_74c.deferredsPos===0||_74c.deferredsPos){_74c.serviceInfoResponse=_74a[_74c.deferredsPos][1];var ext=_74c.serviceInfoResponse.fullExtent;if(!ext){ext=_74c.serviceInfoResponse.extent;}if(!_74b){_74b=new esri.geometry.Extent(ext);}else{_74b=_74b.union(new esri.geometry.Extent(ext));}}},this);if(this.map.extent){var _74d=this._getIntersectionPercent(_74b,this.map.extent);if(_74d<5){this.map.setExtent(_74b,true);}}this._switchBasemapLayers(_745);this._updateReferenceLayer(_745);}));}else{this._switchBasemapLayers(_745);this._updateReferenceLayer(_745);}},_switchBasemapLayers:function(_74e){var _74f=_74e.layers;if(this.map.layerIds.length>0&&this.map.getNumLevels()===0&&(_74f[0].type==="OpenStreetMap"||(_74f[0].type&&_74f[0].type.indexOf("BingMaps")>-1))){var msg="esri.dijit.BasemapGallery: Unable to switch basemap because new basemap is a tiled service and cannot be loaded as a dynamic layer.";this.onError(msg);return;}dojo.forEach(_74f,function(_750){if(!_750.isReference&&_750.type&&_750.type.indexOf("BingMaps")>-1&&!this.bingMapsKey){var msg="esri.dijit.BasemapGallery: Invalid Bing Maps key.";this.onError(msg);return;}},this);this._removeBasemapLayers();dojo.forEach(_74f,function(_751){if(!_751.isReference){var _752;if(_751.type==="OpenStreetMap"){if(this.map.layerIds.length>0&&this.map.getNumLevels()===0){var msg="esri.dijit.BasemapGallery: Unable to switch basemap because new basemap is a tiled service and cannot be loaded as a dynamic layer.";this.onError(msg);return;}_752=new esri.layers.OpenStreetMapLayer({id:"layer_osm",opacity:_751.opacity});}else{if(_751.type&&_751.type.indexOf("BingMaps")>-1){if(this.map.layerIds.length>0&&this.map.getNumLevels()===0){var msg="esri.dijit.BasemapGallery: Unable to switch basemap because new basemap is a tiled service and cannot be loaded as a dynamic layer.";this.onError(msg);return;}var _753=esri.virtualearth.VETiledLayer.MAP_STYLE_AERIAL_WITH_LABELS;if(_751.type=="BingMapsAerial"){_753=esri.virtualearth.VETiledLayer.MAP_STYLE_AERIAL;}else{if(_751.type=="BingMapsRoad"){_753=esri.virtualearth.VETiledLayer.MAP_STYLE_ROAD;}}_752=new esri.virtualearth.VETiledLayer({id:"layer_bing",bingMapsKey:this.bingMapsKey,mapStyle:_753,opacity:_751.opacity});}else{if(_751.serviceInfoResponse&&_751.serviceInfoResponse.mapName){if((this.map.layerIds.length===0||this.map.getNumLevels()>0)&&_751.serviceInfoResponse.singleFusedMapCache===true){_752=this._loadAsCached(_751);}else{_752=this._loadAsDynamic(_751);}}else{if(_751.serviceInfoResponse&&_751.serviceInfoResponse.pixelSizeX){var _754=new esri.layers.ImageServiceParameters();_754.bandIds=_751.bandIds;if(!_751.bandIds&&_751.serviceInfoResponse.bandCount&&parseInt(_751.serviceInfoResponse.bandCount)>3){_754.bandIds=[0,1,2];}_752=new esri.layers.ArcGISImageServiceLayer(_751.url,{resourceInfo:_751.serviceInfoResponse,opacity:_751.opacity,visible:_751.visibility,imageServiceParameters:_754});}}}}if(_752){_752._basemapGalleryLayerType="basemap";this.map.addLayer(_752,0);}}},this);this._selectBasemapInProgress=false;this.onSelectionChange();},_removeBasemapLayers:function(){var _755=this.map.layerIds;var _756=[];dojo.forEach(_755,function(id){var _757=this.map.getLayer(id);if(_757._basemapGalleryLayerType==="basemap"){_756.push(_757);}},this);if(_756.length===0&&_755.length>0){_756.push(this.map.getLayer(_755[0]));}if(_756.length>0){dojo.forEach(_756,function(_758){this.map.removeLayer(_758);},this);}},_updateReferenceLayer:function(_759){this._removeReferenceLayer();for(var i=0;i<_759.layers.length;i++){if(_759.layers[i].isReference===true){this._addReferenceLayer(_759.layers[i]);}}},_removeReferenceLayer:function(){for(var i=this.map.layerIds.length-1;i>=0;i--){var id=this.map.layerIds[i];var _75a=this.map.getLayer(id);if(_75a._basemapGalleryLayerType==="reference"){this.map.removeLayer(_75a);}}},_addReferenceLayer:function(_75b){this._getServiceInfo(_75b.url,dojo.hitch(this,"_handleReferenceServiceInfoResponse",_75b));},_handleReferenceServiceInfoResponse:function(_75c,_75d,args){var _75e;_75c.serviceInfoResponse=_75d;if(_75d&&_75d.mapName){if(_75d.singleFusedMapCache===true){_75e=this._loadAsCached(_75c);}else{_75e=this._loadAsDynamic(_75c);}}else{if(_75d&&_75d.pixelSizeX){var _75f=new esri.layers.ImageServiceParameters();_75f.bandIds=_75c.bandIds;if(!_75c.bandIds&&_75d.bandCount&&parseInt(_75d.bandCount)>3){_75f.bandIds=[0,1,2];}_75e=new esri.layers.ArcGISImageServiceLayer(_75c.url,{resourceInfo:_75d,opacity:_75c.opacity,visible:_75c.visibility,imageServiceParameters:_75f});}}if(_75e){_75e._basemapGalleryLayerType="reference";this.map.addLayer(_75e);}},_getServiceInfo:function(url,_760){var _761={};_761.f="json";var _762=esri.request({url:url,content:_761,callbackParamName:"callback",load:function(_763,args){if(_760){_760(_763,args);}},error:esriConfig.defaults.io.errorHandler});return _762;},_loadAsCached:function(_764){var _765=[];if(!_764.displayLevels){_765=dojo.map(_764.serviceInfoResponse.tileInfo.lods,function(lod){return lod.level;});}var _766=new esri.layers.ArcGISTiledMapServiceLayer(_764.url,{resourceInfo:_764.serviceInfoResponse,opacity:_764.opacity,visible:_764.visibility,displayLevels:(_764.displayLevels)?_764.displayLevels:_765});return _766;},_loadAsDynamic:function(_767){var _768=new esri.layers.ArcGISDynamicMapServiceLayer(_767.url,{resourceInfo:_767.serviceInfoResponse,opacity:_767.opacity,visible:_767.visibility});if(_767.visibleLayers){_768.setVisibleLayers(_767.visibleLayers);}return _768;},_getIntersectionPercent:function(_769,_76a){var _76b=_76a.intersects(_769);if(_76b){var _76c=_76b.getWidth()*_76b.getHeight();var _76d=_76a.getWidth()*_76a.getHeight();return (_76c/_76d)*100;}else{return 0;}},_getIds:function(){var ids=[];dojo.forEach(this.basemaps,function(_76e){ids.push(_76e.id);},this);return ids;},_getUniqueId:function(){var _76f=","+this._getIds().toString()+",";var _770=0;while(true){if(_76f.indexOf(",basemap_"+_770+",")>-1){_770++;}else{return "basemap_"+_770;}}},_isUniqueId:function(id){var _771=","+this._getIds().toString()+",";if(_771.indexOf(","+id+",")===-1){return true;}return false;},_isAgolService:function(url){if(!url){return false;}return (url.indexOf("/services.arcgisonline.com/")!==-1||url.indexOf("/server.arcgisonline.com/")!==-1);},_isHostedService:function(url){if(!url){return false;}return (url.indexOf(".arcgis.com/")!==-1);}});dojo.declare("esri.dijit.Basemap",null,{id:null,title:"",thumbnailUrl:null,layers:null,itemId:null,constructor:function(_772){_772=_772||{};if(!_772.layers&&!_772.itemId){console.error("esri.dijit.Basemap: unable to find the 'layers' property in parameters");}this.id=_772.id;this.itemId=_772.itemId;this.layers=_772.layers;this.title=_772.title?_772.title:"";this.thumbnailUrl=_772.thumbnailUrl;},getLayers:function(){if(this.layers){return this.layers;}else{if(this.itemId){var url=esri.dijit._arcgisUrl+"/content/items/"+this.itemId+"/data";var _773={};_773.f="json";var _774=esri.request({url:url,content:_773,callbackParamName:"callback",error:esriConfig.defaults.io.errorHandler});_774.addCallback(dojo.hitch(this,function(_775,args){this.layers=[];dojo.forEach(_775.baseMap.baseMapLayers,function(_776){var _777={};if(_776.url){_777.url=_776.url;}if(_776.type){_777.type=_776.type;}if(_776.isReference){_777.isReference=_776.isReference;}if(_776.displayLevels){_777.displayLevels=_776.displayLevels;}if(_776.visibleLayers){_777.visibleLayers=_776.visibleLayers;}if(_776.bandIds){_777.bandIds=_776.bandIds;}this.layers.push(new esri.dijit.BasemapLayer(_777));},this);return this.layers;}));return _774;}}}});dojo.declare("esri.dijit.BasemapLayer",null,{constructor:function(_778){_778=_778||{};if(!_778.url&&!_778.type){console.error("esri.dijit.BasemapLayer: unable to find the 'url' or 'type' property in parameters");}this.url=_778.url;this.type=_778.type;this.isReference=(_778.isReference===true)?true:false;this.displayLevels=_778.displayLevels;this.visibleLayers=_778.visibleLayers;this.bandIds=_778.bandIds;this.opacity=_778.opacity;}});});},"dojox/charting/Element":function(){define("dojox/charting/Element",["dojo/_base/lang","dojo/_base/array","dojo/dom-construct","dojo/_base/declare","dojox/gfx","dojox/gfx/shape"],function(lang,arr,_779,_77a,gfx,_77b){return _77a("dojox.charting.Element",null,{chart:null,group:null,htmlElements:null,dirty:true,constructor:function(_77c){this.chart=_77c;this.group=null;this.htmlElements=[];this.dirty=true;this.trailingSymbol="...";this._events=[];},purgeGroup:function(){this.destroyHtmlElements();if(this.group){this.group.removeShape();var _77d=this.group.children;for(var i=0;i<_77d.length;++i){_77b.dispose(_77d[i]);}this.group.clear();this.group=null;}this.dirty=true;if(this._events.length){arr.forEach(this._events,function(item){item.shape.disconnect(item.handle);});this._events=[];}return this;},cleanGroup:function(_77e){this.destroyHtmlElements();if(!_77e){_77e=this.chart.surface;}if(this.group){var _77f=this.group.children;for(var i=0;i<_77f.length;++i){_77b.dispose(_77f[i]);}this.group.clear();}else{this.group=_77e.createGroup();}this.dirty=true;return this;},destroyHtmlElements:function(){if(this.htmlElements.length){arr.forEach(this.htmlElements,_779.destroy);this.htmlElements=[];}},destroy:function(){this.purgeGroup();},getTextWidth:function(s,font){return gfx._base._getTextBox(s,{font:font}).w||0;},getTextWithLimitLength:function(s,font,_780,_781){if(!s||s.length<=0){return {text:"",truncated:_781||false};}if(!_780||_780<=0){return {text:s,truncated:_781||false};}var _782=2,_783=0.618,_784=s.substring(0,1)+this.trailingSymbol,_785=this.getTextWidth(_784,font);if(_780<=_785){return {text:_784,truncated:true};}var _786=this.getTextWidth(s,font);if(_786<=_780){return {text:s,truncated:_781||false};}else{var _787=0,end=s.length;while(_787<end){if(end-_787<=_782){while(this.getTextWidth(s.substring(0,_787)+this.trailingSymbol,font)>_780){_787-=1;}return {text:(s.substring(0,_787)+this.trailingSymbol),truncated:true};}var _788=_787+Math.round((end-_787)*_783),_789=this.getTextWidth(s.substring(0,_788),font);if(_789<_780){_787=_788;end=end;}else{_787=_787;end=_788;}}}},getTextWithLimitCharCount:function(s,font,_78a,_78b){if(!s||s.length<=0){return {text:"",truncated:_78b||false};}if(!_78a||_78a<=0||s.length<=_78a){return {text:s,truncated:_78b||false};}return {text:s.substring(0,_78a)+this.trailingSymbol,truncated:true};},_plotFill:function(fill,dim,_78c){if(!fill||!fill.type||!fill.space){return fill;}var _78d=fill.space,span;switch(fill.type){case "linear":if(_78d==="plot"||_78d==="shapeX"||_78d==="shapeY"){fill=gfx.makeParameters(gfx.defaultLinearGradient,fill);fill.space=_78d;if(_78d==="plot"||_78d==="shapeX"){span=dim.height-_78c.t-_78c.b;fill.y1=_78c.t+span*fill.y1/100;fill.y2=_78c.t+span*fill.y2/100;}if(_78d==="plot"||_78d==="shapeY"){span=dim.width-_78c.l-_78c.r;fill.x1=_78c.l+span*fill.x1/100;fill.x2=_78c.l+span*fill.x2/100;}}break;case "radial":if(_78d==="plot"){fill=gfx.makeParameters(gfx.defaultRadialGradient,fill);fill.space=_78d;var _78e=dim.width-_78c.l-_78c.r,_78f=dim.height-_78c.t-_78c.b;fill.cx=_78c.l+_78e*fill.cx/100;fill.cy=_78c.t+_78f*fill.cy/100;fill.r=fill.r*Math.sqrt(_78e*_78e+_78f*_78f)/200;}break;case "pattern":if(_78d==="plot"||_78d==="shapeX"||_78d==="shapeY"){fill=gfx.makeParameters(gfx.defaultPattern,fill);fill.space=_78d;if(_78d==="plot"||_78d==="shapeX"){span=dim.height-_78c.t-_78c.b;fill.y=_78c.t+span*fill.y/100;fill.height=span*fill.height/100;}if(_78d==="plot"||_78d==="shapeY"){span=dim.width-_78c.l-_78c.r;fill.x=_78c.l+span*fill.x/100;fill.width=span*fill.width/100;}}break;}return fill;},_shapeFill:function(fill,bbox){if(!fill||!fill.space){return fill;}var _790=fill.space,span;switch(fill.type){case "linear":if(_790==="shape"||_790==="shapeX"||_790==="shapeY"){fill=gfx.makeParameters(gfx.defaultLinearGradient,fill);fill.space=_790;if(_790==="shape"||_790==="shapeX"){span=bbox.width;fill.x1=bbox.x+span*fill.x1/100;fill.x2=bbox.x+span*fill.x2/100;}if(_790==="shape"||_790==="shapeY"){span=bbox.height;fill.y1=bbox.y+span*fill.y1/100;fill.y2=bbox.y+span*fill.y2/100;}}break;case "radial":if(_790==="shape"){fill=gfx.makeParameters(gfx.defaultRadialGradient,fill);fill.space=_790;fill.cx=bbox.x+bbox.width/2;fill.cy=bbox.y+bbox.height/2;fill.r=fill.r*bbox.width/200;}break;case "pattern":if(_790==="shape"||_790==="shapeX"||_790==="shapeY"){fill=gfx.makeParameters(gfx.defaultPattern,fill);fill.space=_790;if(_790==="shape"||_790==="shapeX"){span=bbox.width;fill.x=bbox.x+span*fill.x/100;fill.width=span*fill.width/100;}if(_790==="shape"||_790==="shapeY"){span=bbox.height;fill.y=bbox.y+span*fill.y/100;fill.height=span*fill.height/100;}}break;}return fill;},_pseudoRadialFill:function(fill,_791,_792,_793,end){if(!fill||fill.type!=="radial"||fill.space!=="shape"){return fill;}var _794=fill.space;fill=gfx.makeParameters(gfx.defaultRadialGradient,fill);fill.space=_794;if(arguments.length<4){fill.cx=_791.x;fill.cy=_791.y;fill.r=fill.r*_792/100;return fill;}var _795=arguments.length<5?_793:(end+_793)/2;return {type:"linear",x1:_791.x,y1:_791.y,x2:_791.x+fill.r*_792*Math.cos(_795)/100,y2:_791.y+fill.r*_792*Math.sin(_795)/100,colors:fill.colors};return fill;}});});},"dijit/form/ComboBoxMixin":function(){require({cache:{"url:dijit/form/templates/DropDownBox.html":"<div class=\"dijit dijitReset dijitInline dijitLeft\"\n\tid=\"widget_${id}\"\n\trole=\"combobox\"\n\t><div class='dijitReset dijitRight dijitButtonNode dijitArrowButton dijitDownArrowButton dijitArrowButtonContainer'\n\t\tdata-dojo-attach-point=\"_buttonNode, _popupStateNode\" role=\"presentation\"\n\t\t><input class=\"dijitReset dijitInputField dijitArrowButtonInner\" value=\"&#9660; \" type=\"text\" tabIndex=\"-1\" readonly=\"readonly\" role=\"presentation\"\n\t\t\t${_buttonInputDisabled}\n\t/></div\n\t><div class='dijitReset dijitValidationContainer'\n\t\t><input class=\"dijitReset dijitInputField dijitValidationIcon dijitValidationInner\" value=\"&#935; \" type=\"text\" tabIndex=\"-1\" readonly=\"readonly\" role=\"presentation\"\n\t/></div\n\t><div class=\"dijitReset dijitInputField dijitInputContainer\"\n\t\t><input class='dijitReset dijitInputInner' ${!nameAttrSetting} type=\"text\" autocomplete=\"off\"\n\t\t\tdata-dojo-attach-point=\"textbox,focusNode\" role=\"textbox\" aria-haspopup=\"true\"\n\t/></div\n></div>\n"}});define("dijit/form/ComboBoxMixin",["dojo/_base/declare","dojo/_base/Deferred","dojo/_base/kernel","dojo/_base/lang","dojo/store/util/QueryResults","./_AutoCompleterMixin","./_ComboBoxMenu","../_HasDropDown","dojo/text!./templates/DropDownBox.html"],function(_796,_797,_798,lang,_799,_79a,_79b,_79c,_79d){return _796("dijit.form.ComboBoxMixin",[_79c,_79a],{dropDownClass:_79b,hasDownArrow:true,templateString:_79d,baseClass:"dijitTextBox dijitComboBox",cssStateNodes:{"_buttonNode":"dijitDownArrowButton"},_setHasDownArrowAttr:function(val){this._set("hasDownArrow",val);this._buttonNode.style.display=val?"":"none";},_showResultList:function(){this.displayMessage("");this.inherited(arguments);},_setStoreAttr:function(_79e){if(!_79e.get){lang.mixin(_79e,{_oldAPI:true,get:function(id){var _79f=new _797();this.fetchItemByIdentity({identity:id,onItem:function(_7a0){_79f.resolve(_7a0);},onError:function(_7a1){_79f.reject(_7a1);}});return _79f.promise;},query:function(_7a2,_7a3){var _7a4=new _797(function(){_7a5.abort&&_7a5.abort();});_7a4.total=new _797();var _7a5=this.fetch(lang.mixin({query:_7a2,onBegin:function(_7a6){_7a4.total.resolve(_7a6);},onComplete:function(_7a7){_7a4.resolve(_7a7);},onError:function(_7a8){_7a4.reject(_7a8);}},_7a3));return _799(_7a4);}});}this._set("store",_79e);},postMixInProperties:function(){var _7a9=this.params.store||this.store;if(_7a9){this._setStoreAttr(_7a9);}this.inherited(arguments);if(!this.params.store&&!this.store._oldAPI){var _7aa=this.declaredClass;lang.mixin(this.store,{getValue:function(item,attr){_798.deprecated(_7aa+".store.getValue(item, attr) is deprecated for builtin store.  Use item.attr directly","","2.0");return item[attr];},getLabel:function(item){_798.deprecated(_7aa+".store.getLabel(item) is deprecated for builtin store.  Use item.label directly","","2.0");return item.name;},fetch:function(args){_798.deprecated(_7aa+".store.fetch() is deprecated for builtin store.","Use store.query()","2.0");var shim=["dojo/data/ObjectStore"];require(shim,lang.hitch(this,function(_7ab){new _7ab({objectStore:this}).fetch(args);}));}});}}});});},"dojox/gauges/AnalogArcIndicator":function(){define("dojox/gauges/AnalogArcIndicator",["dojo/_base/declare","dojo/_base/lang","dojo/_base/connect","dojo/_base/fx","./AnalogIndicatorBase"],function(_7ac,lang,_7ad,fx,_7ae){return _7ac("dojox.gauges.AnalogArcIndicator",[_7ae],{_createArc:function(val){if(this.shape){var _7af=this._gauge._mod360(this._gauge.startAngle);var a=this._gauge._getRadians(this._gauge._getAngle(val));var sa=this._gauge._getRadians(_7af);if(this._gauge.orientation=="cclockwise"){var tmp=a;a=sa;sa=tmp;}var _7b0;var big=0;if(sa<=a){_7b0=a-sa;}else{_7b0=2*Math.PI+a-sa;}if(_7b0>Math.PI){big=1;}var cosa=Math.cos(a);var sina=Math.sin(a);var _7b1=Math.cos(sa);var _7b2=Math.sin(sa);var off=this.offset+this.width;var p=["M"];p.push(this._gauge.cx+this.offset*_7b2);p.push(this._gauge.cy-this.offset*_7b1);p.push("A",this.offset,this.offset,0,big,1);p.push(this._gauge.cx+this.offset*sina);p.push(this._gauge.cy-this.offset*cosa);p.push("L");p.push(this._gauge.cx+off*sina);p.push(this._gauge.cy-off*cosa);p.push("A",off,off,0,big,0);p.push(this._gauge.cx+off*_7b2);p.push(this._gauge.cy-off*_7b1);p.push("z");this.shape.setShape(p.join(" "));this.currentValue=val;}},draw:function(_7b3,_7b4){var v=this.value;if(v<this._gauge.min){v=this._gauge.min;}if(v>this._gauge.max){v=this._gauge.max;}if(this.shape){if(_7b4){this._createArc(v);}else{var anim=new fx.Animation({curve:[this.currentValue,v],duration:this.duration,easing:this.easing});_7ad.connect(anim,"onAnimate",lang.hitch(this,this._createArc));anim.play();}}else{var _7b5=this.color?this.color:"black";var _7b6=this.strokeColor?this.strokeColor:_7b5;var _7b7={color:_7b6,width:1};if(this.color.type&&!this.strokeColor){_7b7.color=this.color.colors[0].color;}this.shape=_7b3.createPath().setStroke(_7b7).setFill(_7b5);this._createArc(v);this.shape.connect("onmouseover",this,this.handleMouseOver);this.shape.connect("onmouseout",this,this.handleMouseOut);this.shape.connect("onmousedown",this,this.handleMouseDown);this.shape.connect("touchstart",this,this.handleTouchStart);}}});});},"dijit/Calendar":function(){define("dijit/Calendar",["dojo/_base/array","dojo/date","dojo/date/locale","dojo/_base/declare","dojo/dom-attr","dojo/dom-class","dojo/_base/event","dojo/_base/kernel","dojo/keys","dojo/_base/lang","dojo/sniff","./CalendarLite","./_Widget","./_CssStateMixin","./_TemplatedMixin","./form/DropDownButton"],function(_7b8,date,_7b9,_7ba,_7bb,_7bc,_7bd,_7be,keys,lang,has,_7bf,_7c0,_7c1,_7c2,_7c3){var _7c4=_7ba("dijit.Calendar",[_7bf,_7c0,_7c1],{cssStateNodes:{"decrementMonth":"dijitCalendarArrow","incrementMonth":"dijitCalendarArrow","previousYearLabelNode":"dijitCalendarPreviousYear","nextYearLabelNode":"dijitCalendarNextYear"},setValue:function(_7c5){_7be.deprecated("dijit.Calendar:setValue() is deprecated.  Use set('value', ...) instead.","","2.0");this.set("value",_7c5);},_createMonthWidget:function(){return new _7c4._MonthDropDownButton({id:this.id+"_mddb",tabIndex:-1,onMonthSelect:lang.hitch(this,"_onMonthSelect"),lang:this.lang,dateLocaleModule:this.dateLocaleModule},this.monthNode);},postCreate:function(){this.inherited(arguments);this.connect(this.domNode,"onkeydown","_onKeyDown");this.connect(this.dateRowsNode,"onmouseover","_onDayMouseOver");this.connect(this.dateRowsNode,"onmouseout","_onDayMouseOut");this.connect(this.dateRowsNode,"onmousedown","_onDayMouseDown");this.connect(this.dateRowsNode,"onmouseup","_onDayMouseUp");},_onMonthSelect:function(_7c6){var date=new this.dateClassObj(this.currentFocus);date.setDate(1);date.setMonth(_7c6);var _7c7=this.dateModule.getDaysInMonth(date);var _7c8=this.currentFocus.getDate();date.setDate(Math.min(_7c8,_7c7));this._setCurrentFocusAttr(date);},_onDayMouseOver:function(evt){var node=_7bc.contains(evt.target,"dijitCalendarDateLabel")?evt.target.parentNode:evt.target;if(node&&((node.dijitDateValue&&!_7bc.contains(node,"dijitCalendarDisabledDate"))||node==this.previousYearLabelNode||node==this.nextYearLabelNode)){_7bc.add(node,"dijitCalendarHoveredDate");this._currentNode=node;}},_onDayMouseOut:function(evt){if(!this._currentNode){return;}if(evt.relatedTarget&&evt.relatedTarget.parentNode==this._currentNode){return;}var cls="dijitCalendarHoveredDate";if(_7bc.contains(this._currentNode,"dijitCalendarActiveDate")){cls+=" dijitCalendarActiveDate";}_7bc.remove(this._currentNode,cls);this._currentNode=null;},_onDayMouseDown:function(evt){var node=evt.target.parentNode;if(node&&node.dijitDateValue&&!_7bc.contains(node,"dijitCalendarDisabledDate")){_7bc.add(node,"dijitCalendarActiveDate");this._currentNode=node;}},_onDayMouseUp:function(evt){var node=evt.target.parentNode;if(node&&node.dijitDateValue){_7bc.remove(node,"dijitCalendarActiveDate");}},handleKey:function(evt){var _7c9=-1,_7ca,_7cb=this.currentFocus;switch(evt.keyCode){case keys.RIGHT_ARROW:_7c9=1;case keys.LEFT_ARROW:_7ca="day";if(!this.isLeftToRight()){_7c9*=-1;}break;case keys.DOWN_ARROW:_7c9=1;case keys.UP_ARROW:_7ca="week";break;case keys.PAGE_DOWN:_7c9=1;case keys.PAGE_UP:_7ca=evt.ctrlKey||evt.altKey?"year":"month";break;case keys.END:_7cb=this.dateModule.add(_7cb,"month",1);_7ca="day";case keys.HOME:_7cb=new this.dateClassObj(_7cb);_7cb.setDate(1);break;case keys.ENTER:case keys.SPACE:this.set("value",this.currentFocus);break;default:return true;}if(_7ca){_7cb=this.dateModule.add(_7cb,_7ca,_7c9);}this._setCurrentFocusAttr(_7cb);return false;},_onKeyDown:function(evt){if(!this.handleKey(evt)){_7bd.stop(evt);}},onValueSelected:function(){},onChange:function(_7cc){this.onValueSelected(_7cc);},getClassForDate:function(){}});_7c4._MonthDropDownButton=_7ba("dijit.Calendar._MonthDropDownButton",_7c3,{onMonthSelect:function(){},postCreate:function(){this.inherited(arguments);this.dropDown=new _7c4._MonthDropDown({id:this.id+"_mdd",onChange:this.onMonthSelect});},_setMonthAttr:function(_7cd){var _7ce=this.dateLocaleModule.getNames("months","wide","standAlone",this.lang,_7cd);this.dropDown.set("months",_7ce);this.containerNode.innerHTML=(has("ie")==6?"":"<div class='dijitSpacer'>"+this.dropDown.domNode.innerHTML+"</div>")+"<div class='dijitCalendarMonthLabel dijitCalendarCurrentMonthLabel'>"+_7ce[_7cd.getMonth()]+"</div>";}});_7c4._MonthDropDown=_7ba("dijit.Calendar._MonthDropDown",[_7c0,_7c2],{months:[],templateString:"<div class='dijitCalendarMonthMenu dijitMenu' "+"data-dojo-attach-event='onclick:_onClick,onmouseover:_onMenuHover,onmouseout:_onMenuHover'></div>",_setMonthsAttr:function(_7cf){this.domNode.innerHTML=_7b8.map(_7cf,function(_7d0,idx){return _7d0?"<div class='dijitCalendarMonthLabel' month='"+idx+"'>"+_7d0+"</div>":"";}).join("");},_onClick:function(evt){this.onChange(_7bb.get(evt.target,"month"));},onChange:function(){},_onMenuHover:function(evt){_7bc.toggle(evt.target,"dijitCalendarMonthLabelHover",evt.type=="mouseover");}});return _7c4;});},"dojo/data/ItemFileReadStore":function(){define(["../_base/kernel","../_base/lang","../_base/declare","../_base/array","../_base/xhr","../Evented","./util/filter","./util/simpleFetch","../date/stamp"],function(_7d1,lang,_7d2,_7d3,xhr,_7d4,_7d5,_7d6,_7d7){var _7d8=_7d2("dojo.data.ItemFileReadStore",[_7d4],{constructor:function(_7d9){this._arrayOfAllItems=[];this._arrayOfTopLevelItems=[];this._loadFinished=false;this._jsonFileUrl=_7d9.url;this._ccUrl=_7d9.url;this.url=_7d9.url;this._jsonData=_7d9.data;this.data=null;this._datatypeMap=_7d9.typeMap||{};if(!this._datatypeMap["Date"]){this._datatypeMap["Date"]={type:Date,deserialize:function(_7da){return _7d7.fromISOString(_7da);}};}this._features={"dojo.data.api.Read":true,"dojo.data.api.Identity":true};this._itemsByIdentity=null;this._storeRefPropName="_S";this._itemNumPropName="_0";this._rootItemPropName="_RI";this._reverseRefMap="_RRM";this._loadInProgress=false;this._queuedFetches=[];if(_7d9.urlPreventCache!==undefined){this.urlPreventCache=_7d9.urlPreventCache?true:false;}if(_7d9.hierarchical!==undefined){this.hierarchical=_7d9.hierarchical?true:false;}if(_7d9.clearOnClose){this.clearOnClose=true;}if("failOk" in _7d9){this.failOk=_7d9.failOk?true:false;}},url:"",_ccUrl:"",data:null,typeMap:null,clearOnClose:false,urlPreventCache:false,failOk:false,hierarchical:true,_assertIsItem:function(item){if(!this.isItem(item)){throw new Error(this.declaredClass+": Invalid item argument.");}},_assertIsAttribute:function(_7db){if(typeof _7db!=="string"){throw new Error(this.declaredClass+": Invalid attribute argument.");}},getValue:function(item,_7dc,_7dd){var _7de=this.getValues(item,_7dc);return (_7de.length>0)?_7de[0]:_7dd;},getValues:function(item,_7df){this._assertIsItem(item);this._assertIsAttribute(_7df);return (item[_7df]||[]).slice(0);},getAttributes:function(item){this._assertIsItem(item);var _7e0=[];for(var key in item){if((key!==this._storeRefPropName)&&(key!==this._itemNumPropName)&&(key!==this._rootItemPropName)&&(key!==this._reverseRefMap)){_7e0.push(key);}}return _7e0;},hasAttribute:function(item,_7e1){this._assertIsItem(item);this._assertIsAttribute(_7e1);return (_7e1 in item);},containsValue:function(item,_7e2,_7e3){var _7e4=undefined;if(typeof _7e3==="string"){_7e4=_7d5.patternToRegExp(_7e3,false);}return this._containsValue(item,_7e2,_7e3,_7e4);},_containsValue:function(item,_7e5,_7e6,_7e7){return _7d3.some(this.getValues(item,_7e5),function(_7e8){if(_7e8!==null&&!lang.isObject(_7e8)&&_7e7){if(_7e8.toString().match(_7e7)){return true;}}else{if(_7e6===_7e8){return true;}}});},isItem:function(_7e9){if(_7e9&&_7e9[this._storeRefPropName]===this){if(this._arrayOfAllItems[_7e9[this._itemNumPropName]]===_7e9){return true;}}return false;},isItemLoaded:function(_7ea){return this.isItem(_7ea);},loadItem:function(_7eb){this._assertIsItem(_7eb.item);},getFeatures:function(){return this._features;},getLabel:function(item){if(this._labelAttr&&this.isItem(item)){return this.getValue(item,this._labelAttr);}return undefined;},getLabelAttributes:function(item){if(this._labelAttr){return [this._labelAttr];}return null;},filter:function(_7ec,_7ed,_7ee){var _7ef=[],i,key;if(_7ec.query){var _7f0,_7f1=_7ec.queryOptions?_7ec.queryOptions.ignoreCase:false;var _7f2={};for(key in _7ec.query){_7f0=_7ec.query[key];if(typeof _7f0==="string"){_7f2[key]=_7d5.patternToRegExp(_7f0,_7f1);}else{if(_7f0 instanceof RegExp){_7f2[key]=_7f0;}}}for(i=0;i<_7ed.length;++i){var _7f3=true;var _7f4=_7ed[i];if(_7f4===null){_7f3=false;}else{for(key in _7ec.query){_7f0=_7ec.query[key];if(!this._containsValue(_7f4,key,_7f0,_7f2[key])){_7f3=false;}}}if(_7f3){_7ef.push(_7f4);}}_7ee(_7ef,_7ec);}else{for(i=0;i<_7ed.length;++i){var item=_7ed[i];if(item!==null){_7ef.push(item);}}_7ee(_7ef,_7ec);}},_fetchItems:function(_7f5,_7f6,_7f7){var self=this;if(this._loadFinished){this.filter(_7f5,this._getItemsArray(_7f5.queryOptions),_7f6);}else{if(this._jsonFileUrl!==this._ccUrl){_7d1.deprecated(this.declaredClass+": ","To change the url, set the url property of the store,"+" not _jsonFileUrl.  _jsonFileUrl support will be removed in 2.0");this._ccUrl=this._jsonFileUrl;this.url=this._jsonFileUrl;}else{if(this.url!==this._ccUrl){this._jsonFileUrl=this.url;this._ccUrl=this.url;}}if(this.data!=null){this._jsonData=this.data;this.data=null;}if(this._jsonFileUrl){if(this._loadInProgress){this._queuedFetches.push({args:_7f5,filter:lang.hitch(self,"filter"),findCallback:lang.hitch(self,_7f6)});}else{this._loadInProgress=true;var _7f8={url:self._jsonFileUrl,handleAs:"json-comment-optional",preventCache:this.urlPreventCache,failOk:this.failOk};var _7f9=xhr.get(_7f8);_7f9.addCallback(function(data){try{self._getItemsFromLoadedData(data);self._loadFinished=true;self._loadInProgress=false;self.filter(_7f5,self._getItemsArray(_7f5.queryOptions),_7f6);self._handleQueuedFetches();}catch(e){self._loadFinished=true;self._loadInProgress=false;_7f7(e,_7f5);}});_7f9.addErrback(function(_7fa){self._loadInProgress=false;_7f7(_7fa,_7f5);});var _7fb=null;if(_7f5.abort){_7fb=_7f5.abort;}_7f5.abort=function(){var df=_7f9;if(df&&df.fired===-1){df.cancel();df=null;}if(_7fb){_7fb.call(_7f5);}};}}else{if(this._jsonData){try{this._loadFinished=true;this._getItemsFromLoadedData(this._jsonData);this._jsonData=null;self.filter(_7f5,this._getItemsArray(_7f5.queryOptions),_7f6);}catch(e){_7f7(e,_7f5);}}else{_7f7(new Error(this.declaredClass+": No JSON source data was provided as either URL or a nested Javascript object."),_7f5);}}}},_handleQueuedFetches:function(){if(this._queuedFetches.length>0){for(var i=0;i<this._queuedFetches.length;i++){var _7fc=this._queuedFetches[i],_7fd=_7fc.args,_7fe=_7fc.filter,_7ff=_7fc.findCallback;if(_7fe){_7fe(_7fd,this._getItemsArray(_7fd.queryOptions),_7ff);}else{this.fetchItemByIdentity(_7fd);}}this._queuedFetches=[];}},_getItemsArray:function(_800){if(_800&&_800.deep){return this._arrayOfAllItems;}return this._arrayOfTopLevelItems;},close:function(_801){if(this.clearOnClose&&this._loadFinished&&!this._loadInProgress){if(((this._jsonFileUrl==""||this._jsonFileUrl==null)&&(this.url==""||this.url==null))&&this.data==null){console.debug(this.declaredClass+": WARNING!  Data reload "+" information has not been provided."+"  Please set 'url' or 'data' to the appropriate value before"+" the next fetch");}this._arrayOfAllItems=[];this._arrayOfTopLevelItems=[];this._loadFinished=false;this._itemsByIdentity=null;this._loadInProgress=false;this._queuedFetches=[];}},_getItemsFromLoadedData:function(_802){var _803=false,self=this;function _804(_805){return (_805!==null)&&(typeof _805==="object")&&(!lang.isArray(_805)||_803)&&(!lang.isFunction(_805))&&(_805.constructor==Object||lang.isArray(_805))&&(typeof _805._reference==="undefined")&&(typeof _805._type==="undefined")&&(typeof _805._value==="undefined")&&self.hierarchical;};function _806(_807){self._arrayOfAllItems.push(_807);for(var _808 in _807){var _809=_807[_808];if(_809){if(lang.isArray(_809)){var _80a=_809;for(var k=0;k<_80a.length;++k){var _80b=_80a[k];if(_804(_80b)){_806(_80b);}}}else{if(_804(_809)){_806(_809);}}}}};this._labelAttr=_802.label;var i,item;this._arrayOfAllItems=[];this._arrayOfTopLevelItems=_802.items;for(i=0;i<this._arrayOfTopLevelItems.length;++i){item=this._arrayOfTopLevelItems[i];if(lang.isArray(item)){_803=true;}_806(item);item[this._rootItemPropName]=true;}var _80c={},key;for(i=0;i<this._arrayOfAllItems.length;++i){item=this._arrayOfAllItems[i];for(key in item){if(key!==this._rootItemPropName){var _80d=item[key];if(_80d!==null){if(!lang.isArray(_80d)){item[key]=[_80d];}}else{item[key]=[null];}}_80c[key]=key;}}while(_80c[this._storeRefPropName]){this._storeRefPropName+="_";}while(_80c[this._itemNumPropName]){this._itemNumPropName+="_";}while(_80c[this._reverseRefMap]){this._reverseRefMap+="_";}var _80e;var _80f=_802.identifier;if(_80f){this._itemsByIdentity={};this._features["dojo.data.api.Identity"]=_80f;for(i=0;i<this._arrayOfAllItems.length;++i){item=this._arrayOfAllItems[i];_80e=item[_80f];var _810=_80e[0];if(!Object.hasOwnProperty.call(this._itemsByIdentity,_810)){this._itemsByIdentity[_810]=item;}else{if(this._jsonFileUrl){throw new Error(this.declaredClass+":  The json data as specified by: ["+this._jsonFileUrl+"] is malformed.  Items within the list have identifier: ["+_80f+"].  Value collided: ["+_810+"]");}else{if(this._jsonData){throw new Error(this.declaredClass+":  The json data provided by the creation arguments is malformed.  Items within the list have identifier: ["+_80f+"].  Value collided: ["+_810+"]");}}}}}else{this._features["dojo.data.api.Identity"]=Number;}for(i=0;i<this._arrayOfAllItems.length;++i){item=this._arrayOfAllItems[i];item[this._storeRefPropName]=this;item[this._itemNumPropName]=i;}for(i=0;i<this._arrayOfAllItems.length;++i){item=this._arrayOfAllItems[i];for(key in item){_80e=item[key];for(var j=0;j<_80e.length;++j){_80d=_80e[j];if(_80d!==null&&typeof _80d=="object"){if(("_type" in _80d)&&("_value" in _80d)){var type=_80d._type;var _811=this._datatypeMap[type];if(!_811){throw new Error("dojo.data.ItemFileReadStore: in the typeMap constructor arg, no object class was specified for the datatype '"+type+"'");}else{if(lang.isFunction(_811)){_80e[j]=new _811(_80d._value);}else{if(lang.isFunction(_811.deserialize)){_80e[j]=_811.deserialize(_80d._value);}else{throw new Error("dojo.data.ItemFileReadStore: Value provided in typeMap was neither a constructor, nor a an object with a deserialize function");}}}}if(_80d._reference){var _812=_80d._reference;if(!lang.isObject(_812)){_80e[j]=this._getItemByIdentity(_812);}else{for(var k=0;k<this._arrayOfAllItems.length;++k){var _813=this._arrayOfAllItems[k],_814=true;for(var _815 in _812){if(_813[_815]!=_812[_815]){_814=false;}}if(_814){_80e[j]=_813;}}}if(this.referenceIntegrity){var _816=_80e[j];if(this.isItem(_816)){this._addReferenceToMap(_816,item,key);}}}else{if(this.isItem(_80d)){if(this.referenceIntegrity){this._addReferenceToMap(_80d,item,key);}}}}}}}},_addReferenceToMap:function(_817,_818,_819){},getIdentity:function(item){var _81a=this._features["dojo.data.api.Identity"];if(_81a===Number){return item[this._itemNumPropName];}else{var _81b=item[_81a];if(_81b){return _81b[0];}}return null;},fetchItemByIdentity:function(_81c){var item,_81d;if(!this._loadFinished){var self=this;if(this._jsonFileUrl!==this._ccUrl){_7d1.deprecated(this.declaredClass+": ","To change the url, set the url property of the store,"+" not _jsonFileUrl.  _jsonFileUrl support will be removed in 2.0");this._ccUrl=this._jsonFileUrl;this.url=this._jsonFileUrl;}else{if(this.url!==this._ccUrl){this._jsonFileUrl=this.url;this._ccUrl=this.url;}}if(this.data!=null&&this._jsonData==null){this._jsonData=this.data;this.data=null;}if(this._jsonFileUrl){if(this._loadInProgress){this._queuedFetches.push({args:_81c});}else{this._loadInProgress=true;var _81e={url:self._jsonFileUrl,handleAs:"json-comment-optional",preventCache:this.urlPreventCache,failOk:this.failOk};var _81f=xhr.get(_81e);_81f.addCallback(function(data){var _820=_81c.scope?_81c.scope:_7d1.global;try{self._getItemsFromLoadedData(data);self._loadFinished=true;self._loadInProgress=false;item=self._getItemByIdentity(_81c.identity);if(_81c.onItem){_81c.onItem.call(_820,item);}self._handleQueuedFetches();}catch(error){self._loadInProgress=false;if(_81c.onError){_81c.onError.call(_820,error);}}});_81f.addErrback(function(_821){self._loadInProgress=false;if(_81c.onError){var _822=_81c.scope?_81c.scope:_7d1.global;_81c.onError.call(_822,_821);}});}}else{if(this._jsonData){self._getItemsFromLoadedData(self._jsonData);self._jsonData=null;self._loadFinished=true;item=self._getItemByIdentity(_81c.identity);if(_81c.onItem){_81d=_81c.scope?_81c.scope:_7d1.global;_81c.onItem.call(_81d,item);}}}}else{item=this._getItemByIdentity(_81c.identity);if(_81c.onItem){_81d=_81c.scope?_81c.scope:_7d1.global;_81c.onItem.call(_81d,item);}}},_getItemByIdentity:function(_823){var item=null;if(this._itemsByIdentity){if(Object.hasOwnProperty.call(this._itemsByIdentity,_823)){item=this._itemsByIdentity[_823];}}else{if(Object.hasOwnProperty.call(this._arrayOfAllItems,_823)){item=this._arrayOfAllItems[_823];}}if(item===undefined){item=null;}return item;},getIdentityAttributes:function(item){var _824=this._features["dojo.data.api.Identity"];if(_824===Number){return null;}else{return [_824];}},_forceLoad:function(){var self=this;if(this._jsonFileUrl!==this._ccUrl){_7d1.deprecated(this.declaredClass+": ","To change the url, set the url property of the store,"+" not _jsonFileUrl.  _jsonFileUrl support will be removed in 2.0");this._ccUrl=this._jsonFileUrl;this.url=this._jsonFileUrl;}else{if(this.url!==this._ccUrl){this._jsonFileUrl=this.url;this._ccUrl=this.url;}}if(this.data!=null){this._jsonData=this.data;this.data=null;}if(this._jsonFileUrl){var _825={url:this._jsonFileUrl,handleAs:"json-comment-optional",preventCache:this.urlPreventCache,failOk:this.failOk,sync:true};var _826=xhr.get(_825);_826.addCallback(function(data){try{if(self._loadInProgress!==true&&!self._loadFinished){self._getItemsFromLoadedData(data);self._loadFinished=true;}else{if(self._loadInProgress){throw new Error(this.declaredClass+":  Unable to perform a synchronous load, an async load is in progress.");}}}catch(e){console.log(e);throw e;}});_826.addErrback(function(_827){throw _827;});}else{if(this._jsonData){self._getItemsFromLoadedData(self._jsonData);self._jsonData=null;self._loadFinished=true;}}}});lang.extend(_7d8,_7d6);return _7d8;});},"dojox/lang/functional/array":function(){define("dojox/lang/functional/array",["dojo/_base/kernel","dojo/_base/lang","dojo/_base/array","./lambda"],function(_828,lang,arr,df){var _829={};lang.mixin(df,{filter:function(a,f,o){if(typeof a=="string"){a=a.split("");}o=o||_828.global;f=df.lambda(f);var t=[],v,i,n;if(lang.isArray(a)){for(i=0,n=a.length;i<n;++i){v=a[i];if(f.call(o,v,i,a)){t.push(v);}}}else{if(typeof a.hasNext=="function"&&typeof a.next=="function"){for(i=0;a.hasNext();){v=a.next();if(f.call(o,v,i++,a)){t.push(v);}}}else{for(i in a){if(!(i in _829)){v=a[i];if(f.call(o,v,i,a)){t.push(v);}}}}}return t;},forEach:function(a,f,o){if(typeof a=="string"){a=a.split("");}o=o||_828.global;f=df.lambda(f);var i,n;if(lang.isArray(a)){for(i=0,n=a.length;i<n;f.call(o,a[i],i,a),++i){}}else{if(typeof a.hasNext=="function"&&typeof a.next=="function"){for(i=0;a.hasNext();f.call(o,a.next(),i++,a)){}}else{for(i in a){if(!(i in _829)){f.call(o,a[i],i,a);}}}}return o;},map:function(a,f,o){if(typeof a=="string"){a=a.split("");}o=o||_828.global;f=df.lambda(f);var t,n,i;if(lang.isArray(a)){t=new Array(n=a.length);for(i=0;i<n;t[i]=f.call(o,a[i],i,a),++i){}}else{if(typeof a.hasNext=="function"&&typeof a.next=="function"){t=[];for(i=0;a.hasNext();t.push(f.call(o,a.next(),i++,a))){}}else{t=[];for(i in a){if(!(i in _829)){t.push(f.call(o,a[i],i,a));}}}}return t;},every:function(a,f,o){if(typeof a=="string"){a=a.split("");}o=o||_828.global;f=df.lambda(f);var i,n;if(lang.isArray(a)){for(i=0,n=a.length;i<n;++i){if(!f.call(o,a[i],i,a)){return false;}}}else{if(typeof a.hasNext=="function"&&typeof a.next=="function"){for(i=0;a.hasNext();){if(!f.call(o,a.next(),i++,a)){return false;}}}else{for(i in a){if(!(i in _829)){if(!f.call(o,a[i],i,a)){return false;}}}}}return true;},some:function(a,f,o){if(typeof a=="string"){a=a.split("");}o=o||_828.global;f=df.lambda(f);var i,n;if(lang.isArray(a)){for(i=0,n=a.length;i<n;++i){if(f.call(o,a[i],i,a)){return true;}}}else{if(typeof a.hasNext=="function"&&typeof a.next=="function"){for(i=0;a.hasNext();){if(f.call(o,a.next(),i++,a)){return true;}}}else{for(i in a){if(!(i in _829)){if(f.call(o,a[i],i,a)){return true;}}}}}return false;}});return df;});},"esri/dijit/editing/tools/Selection":function(){define("esri/dijit/editing/tools/Selection",["dijit","dojo","dojox","dojo/require!esri/dijit/editing/tools/DropDownToolBase,esri/dijit/editing/Util,esri/dijit/editing/tools/SelectionTools"],function(_82a,dojo,_82b){dojo.provide("esri.dijit.editing.tools.Selection");dojo.require("esri.dijit.editing.tools.DropDownToolBase");dojo.require("esri.dijit.editing.Util");dojo.require("esri.dijit.editing.tools.SelectionTools");dojo.declare("esri.dijit.editing.tools.Selection",[esri.dijit.editing.tools.DropDownToolBase],{_enabled:true,activate:function(){this.inherited(arguments);this._sConnect=dojo.connect(this._toolbar,"onDrawEnd",this,"_onDrawEnd");},deactivate:function(){this.inherited(arguments);dojo.disconnect(this._sConnect);delete this._sConnect;},_initializeTool:function(){this._createSymbols();this._initializeLayers();this._toolTypes=["select","selectadd","selectremove"];},_onDrawEnd:function(_82c){this.inherited(arguments);this._settings.editor._hideAttributeInspector();var _82d=this._settings.layers;this._selectMethod=this._activeTool._selectMethod;this._settings.editor._selectionHelper.selectFeaturesByGeometry(_82d,_82c,this._selectMethod,dojo.hitch(this,"onFinished"));},_createSymbols:function(){this._pointSelectionSymbol=new esri.symbol.SimpleMarkerSymbol(esri.symbol.SimpleMarkerSymbol.STYLE_CIRCLE,10,new esri.symbol.SimpleLineSymbol(esri.symbol.SimpleLineSymbol.STYLE_SOLID,new dojo.Color([0,0,0]),1),new dojo.Color([255,0,0,0.5]));this._polylineSelectionSymbol=new esri.symbol.SimpleLineSymbol(esri.symbol.SimpleLineSymbol.STYLE_SOLID,new dojo.Color([0,200,255]),2);this._polygonSelectionSymbol=new esri.symbol.SimpleFillSymbol(esri.symbol.SimpleFillSymbol.STYLE_SOLID,new esri.symbol.SimpleLineSymbol(esri.symbol.SimpleLineSymbol.STYLE_SOLID,new dojo.Color([0,0,0]),1),new dojo.Color([0,200,255,0.5]));},_initializeLayers:function(){var _82e=this._settings.layers;dojo.forEach(_82e,this._setSelectionSymbol,this);},_setSelectionSymbol:function(_82f){var _830=null;switch(_82f.geometryType){case "esriGeometryPoint":_830=this._pointSelectionSymbol;break;case "esriGeometryPolyline":_830=this._polylineSelectionSymbol;break;case "esriGeometryPolygon":_830=this._polygonSelectionSymbol;break;}_82f.setSelectionSymbol(_82f._selectionSymbol||_830);},_createTools:function(){dojo.forEach(this._toolTypes,this._createTool,this);this.inherited(arguments);},_createTool:function(_831){var _832=dojo.mixin(esri.dijit.editing.tools.SelectionTools[_831],{settings:this._settings,onClick:dojo.hitch(this,"onItemClicked")});this._tools[_831.toUpperCase()]=new esri.dijit.editing.tools.Edit(_832);}});});},"dijit/form/RangeBoundTextBox":function(){define("dijit/form/RangeBoundTextBox",["dojo/_base/declare","dojo/i18n","./MappedTextBox"],function(_833,i18n,_834){var _835=_833("dijit.form.RangeBoundTextBox",_834,{rangeMessage:"",rangeCheck:function(_836,_837){return ("min" in _837?(this.compare(_836,_837.min)>=0):true)&&("max" in _837?(this.compare(_836,_837.max)<=0):true);},isInRange:function(){return this.rangeCheck(this.get("value"),this.constraints);},_isDefinitelyOutOfRange:function(){var val=this.get("value");if(val==null){return false;}var _838=false;if("min" in this.constraints){var min=this.constraints.min;_838=this.compare(val,((typeof min=="number")&&min>=0&&val!=0)?0:min)<0;}if(!_838&&("max" in this.constraints)){var max=this.constraints.max;_838=this.compare(val,((typeof max!="number")||max>0)?max:0)>0;}return _838;},_isValidSubset:function(){return this.inherited(arguments)&&!this._isDefinitelyOutOfRange();},isValid:function(_839){return this.inherited(arguments)&&((this._isEmpty(this.textbox.value)&&!this.required)||this.isInRange(_839));},getErrorMessage:function(_83a){var v=this.get("value");if(v!=null&&v!==""&&(typeof v!="number"||!isNaN(v))&&!this.isInRange(_83a)){return this.rangeMessage;}return this.inherited(arguments);},postMixInProperties:function(){this.inherited(arguments);if(!this.rangeMessage){this.messages=i18n.getLocalization("dijit.form","validate",this.lang);this.rangeMessage=this.messages.rangeMessage;}},_setConstraintsAttr:function(_83b){this.inherited(arguments);if(this.focusNode){if(this.constraints.min!==undefined){this.focusNode.setAttribute("aria-valuemin",this.constraints.min);}else{this.focusNode.removeAttribute("aria-valuemin");}if(this.constraints.max!==undefined){this.focusNode.setAttribute("aria-valuemax",this.constraints.max);}else{this.focusNode.removeAttribute("aria-valuemax");}}},_setValueAttr:function(_83c,_83d){this.focusNode.setAttribute("aria-valuenow",_83c);this.inherited(arguments);},applyTextDir:function(){}});return _835;});},"dojox/html/entities":function(){define("dojox/html/entities",["dojo/_base/lang"],function(lang){var dhe=lang.getObject("dojox.html.entities",true);var _83e=function(str,map){var _83f,_840;if(map._encCache&&map._encCache.regexp&&map._encCache.mapper&&map.length==map._encCache.length){_83f=map._encCache.mapper;_840=map._encCache.regexp;}else{_83f={};_840=["["];var i;for(i=0;i<map.length;i++){_83f[map[i][0]]="&"+map[i][1]+";";_840.push(map[i][0]);}_840.push("]");_840=new RegExp(_840.join(""),"g");map._encCache={mapper:_83f,regexp:_840,length:map.length};}str=str.replace(_840,function(c){return _83f[c];});return str;};var _841=function(str,map){var _842,_843;if(map._decCache&&map._decCache.regexp&&map._decCache.mapper&&map.length==map._decCache.length){_842=map._decCache.mapper;_843=map._decCache.regexp;}else{_842={};_843=["("];var i;for(i=0;i<map.length;i++){var e="&"+map[i][1]+";";if(i){_843.push("|");}_842[e]=map[i][0];_843.push(e);}_843.push(")");_843=new RegExp(_843.join(""),"g");map._decCache={mapper:_842,regexp:_843,length:map.length};}str=str.replace(_843,function(c){return _842[c];});return str;};dhe.html=[["&","amp"],["\"","quot"],["<","lt"],[">","gt"],[" ","nbsp"]];dhe.latin=[["¡","iexcl"],["¢","cent"],["£","pound"],["€","euro"],["¤","curren"],["¥","yen"],["¦","brvbar"],["§","sect"],["¨","uml"],["©","copy"],["ª","ordf"],["«","laquo"],["¬","not"],["­","shy"],["®","reg"],["¯","macr"],["°","deg"],["±","plusmn"],["²","sup2"],["³","sup3"],["´","acute"],["µ","micro"],["¶","para"],["·","middot"],["¸","cedil"],["¹","sup1"],["º","ordm"],["»","raquo"],["¼","frac14"],["½","frac12"],["¾","frac34"],["¿","iquest"],["À","Agrave"],["Á","Aacute"],["Â","Acirc"],["Ã","Atilde"],["Ä","Auml"],["Å","Aring"],["Æ","AElig"],["Ç","Ccedil"],["È","Egrave"],["É","Eacute"],["Ê","Ecirc"],["Ë","Euml"],["Ì","Igrave"],["Í","Iacute"],["Î","Icirc"],["Ï","Iuml"],["Ð","ETH"],["Ñ","Ntilde"],["Ò","Ograve"],["Ó","Oacute"],["Ô","Ocirc"],["Õ","Otilde"],["Ö","Ouml"],["×","times"],["Ø","Oslash"],["Ù","Ugrave"],["Ú","Uacute"],["Û","Ucirc"],["Ü","Uuml"],["Ý","Yacute"],["Þ","THORN"],["ß","szlig"],["à","agrave"],["á","aacute"],["â","acirc"],["ã","atilde"],["ä","auml"],["å","aring"],["æ","aelig"],["ç","ccedil"],["è","egrave"],["é","eacute"],["ê","ecirc"],["ë","euml"],["ì","igrave"],["í","iacute"],["î","icirc"],["ï","iuml"],["ð","eth"],["ñ","ntilde"],["ò","ograve"],["ó","oacute"],["ô","ocirc"],["õ","otilde"],["ö","ouml"],["÷","divide"],["ø","oslash"],["ù","ugrave"],["ú","uacute"],["û","ucirc"],["ü","uuml"],["ý","yacute"],["þ","thorn"],["ÿ","yuml"],["ƒ","fnof"],["Α","Alpha"],["Β","Beta"],["Γ","Gamma"],["Δ","Delta"],["Ε","Epsilon"],["Ζ","Zeta"],["Η","Eta"],["Θ","Theta"],["Ι","Iota"],["Κ","Kappa"],["Λ","Lambda"],["Μ","Mu"],["Ν","Nu"],["Ξ","Xi"],["Ο","Omicron"],["Π","Pi"],["Ρ","Rho"],["Σ","Sigma"],["Τ","Tau"],["Υ","Upsilon"],["Φ","Phi"],["Χ","Chi"],["Ψ","Psi"],["Ω","Omega"],["α","alpha"],["β","beta"],["γ","gamma"],["δ","delta"],["ε","epsilon"],["ζ","zeta"],["η","eta"],["θ","theta"],["ι","iota"],["κ","kappa"],["λ","lambda"],["μ","mu"],["ν","nu"],["ξ","xi"],["ο","omicron"],["π","pi"],["ρ","rho"],["ς","sigmaf"],["σ","sigma"],["τ","tau"],["υ","upsilon"],["φ","phi"],["χ","chi"],["ψ","psi"],["ω","omega"],["ϑ","thetasym"],["ϒ","upsih"],["ϖ","piv"],["•","bull"],["…","hellip"],["′","prime"],["″","Prime"],["‾","oline"],["⁄","frasl"],["℘","weierp"],["ℑ","image"],["ℜ","real"],["™","trade"],["ℵ","alefsym"],["←","larr"],["↑","uarr"],["→","rarr"],["↓","darr"],["↔","harr"],["↵","crarr"],["⇐","lArr"],["⇑","uArr"],["⇒","rArr"],["⇓","dArr"],["⇔","hArr"],["∀","forall"],["∂","part"],["∃","exist"],["∅","empty"],["∇","nabla"],["∈","isin"],["∉","notin"],["∋","ni"],["∏","prod"],["∑","sum"],["−","minus"],["∗","lowast"],["√","radic"],["∝","prop"],["∞","infin"],["∠","ang"],["∧","and"],["∨","or"],["∩","cap"],["∪","cup"],["∫","int"],["∴","there4"],["∼","sim"],["≅","cong"],["≈","asymp"],["≠","ne"],["≡","equiv"],["≤","le"],["≥","ge"],["⊂","sub"],["⊃","sup"],["⊄","nsub"],["⊆","sube"],["⊇","supe"],["⊕","oplus"],["⊗","otimes"],["⊥","perp"],["⋅","sdot"],["⌈","lceil"],["⌉","rceil"],["⌊","lfloor"],["⌋","rfloor"],["〈","lang"],["〉","rang"],["◊","loz"],["♠","spades"],["♣","clubs"],["♥","hearts"],["♦","diams"],["Œ","Elig"],["œ","oelig"],["Š","Scaron"],["š","scaron"],["Ÿ","Yuml"],["ˆ","circ"],["˜","tilde"],[" ","ensp"],[" ","emsp"],[" ","thinsp"],["‌","zwnj"],["‍","zwj"],["‎","lrm"],["‏","rlm"],["–","ndash"],["—","mdash"],["‘","lsquo"],["’","rsquo"],["‚","sbquo"],["“","ldquo"],["”","rdquo"],["„","bdquo"],["†","dagger"],["‡","Dagger"],["‰","permil"],["‹","lsaquo"],["›","rsaquo"]];dhe.encode=function(str,m){if(str){if(!m){str=_83e(str,dhe.html);str=_83e(str,dhe.latin);}else{str=_83e(str,m);}}return str;};dhe.decode=function(str,m){if(str){if(!m){str=_841(str,dhe.html);str=_841(str,dhe.latin);}else{str=_841(str,m);}}return str;};return dhe;});},"dojox/gfx/gradutils":function(){define("dojox/gfx/gradutils",["./_base","dojo/_base/lang","./matrix","dojo/_base/Color"],function(g,lang,m,_844){var _845=g.gradutils={};function _846(o,c){if(o<=0){return c[0].color;}var len=c.length;if(o>=1){return c[len-1].color;}for(var i=0;i<len;++i){var stop=c[i];if(stop.offset>=o){if(i){var prev=c[i-1];return _844.blendColors(new _844(prev.color),new _844(stop.color),(o-prev.offset)/(stop.offset-prev.offset));}return stop.color;}}return c[len-1].color;};_845.getColor=function(fill,pt){var o;if(fill){switch(fill.type){case "linear":var _847=Math.atan2(fill.y2-fill.y1,fill.x2-fill.x1),_848=m.rotate(-_847),_849=m.project(fill.x2-fill.x1,fill.y2-fill.y1),p=m.multiplyPoint(_849,pt),pf1=m.multiplyPoint(_849,fill.x1,fill.y1),pf2=m.multiplyPoint(_849,fill.x2,fill.y2),_84a=m.multiplyPoint(_848,pf2.x-pf1.x,pf2.y-pf1.y).x;o=m.multiplyPoint(_848,p.x-pf1.x,p.y-pf1.y).x/_84a;break;case "radial":var dx=pt.x-fill.cx,dy=pt.y-fill.cy;o=Math.sqrt(dx*dx+dy*dy)/fill.r;break;}return _846(o,fill.colors);}return new _844(fill||[0,0,0,0]);};_845.reverse=function(fill){if(fill){switch(fill.type){case "linear":case "radial":fill=lang.delegate(fill);if(fill.colors){var c=fill.colors,l=c.length,i=0,stop,n=fill.colors=new Array(c.length);for(;i<l;++i){stop=c[i];n[i]={offset:1-stop.offset,color:stop.color};}n.sort(function(a,b){return a.offset-b.offset;});}break;}}return fill;};return _845;});},"dojox/charting/themes/common":function(){define("dojox/charting/themes/common",["dojo/_base/lang"],function(lang){return lang.getObject("dojox.charting.themes",true);});},"esri/dijit/OverviewMap":function(){define("esri/dijit/OverviewMap",["dijit","dojo","dojox","dojo/require!dijit/_Widget,dijit/_Templated,dojo/dnd/Mover,dojo/dnd/Moveable,dojo/dnd/move"],function(_84b,dojo,_84c){dojo.provide("esri.dijit.OverviewMap");dojo.require("dijit._Widget");dojo.require("dijit._Templated");dojo.require("dojo.dnd.Mover");dojo.require("dojo.dnd.Moveable");dojo.require("dojo.dnd.move");dojo.declare("esri.dijit.OverviewMap",[_84b._Widget,_84b._Templated],{widgetsInTemplate:true,templateString:"<div class=\"esriOverviewMap\">\r\n  <div class=\"ovwContainer\" dojoattachpoint=\"_body\" style=\"width: ${width}px; height: ${height}px;\">\r\n    <div id=\"${id}-map\" style=\"width: 100%; height: 100%;\">\r\n      <div class=\"ovwHighlight\" dojoattachpoint=\"_focusDiv\" title=\"${NLS_drag}\" style=\"border: 1px solid ${color}; background-color: ${color};\"></div>\r\n    </div>\r\n  </div>\r\n  <div class=\"ovwButton ovwController\" title=\"${NLS_show}\" dojoattachpoint=\"_controllerDiv\" dojoattachevent=\"onclick: _visibilityHandler\">\r\n  </div>\r\n  <div class=\"ovwButton ovwMaximizer\" title=\"${NLS_maximize}\" dojoattachpoint=\"_maximizerDiv\" dojoattachevent=\"onclick: _maximizeHandler\">\r\n  </div>\r\n</div>\r\n",basePath:dojo.moduleUrl("esri.dijit"),constructor:function(_84d,_84e){dojo.mixin(this,esri.bundle.widgets.overviewMap);_84d=_84d||{};if(!_84d.map){console.error("esri.dijit.OverviewMap: "+this.NLS_noMap);return;}var _84f={};if(_84e){this._detached=true;_84f=dojo.coords(_84e,true);}this.map=_84d.map;this.baseLayer=_84d.baseLayer;this.width=_84d.width||_84f.w||this.map.width/4;this.height=_84d.height||_84f.h||this.map.height/4;this.attachTo=_84d.attachTo||"top-right";this.expandFactor=_84d.expandFactor||2;this.color=_84d.color||"#000000";this.opacity=_84d.opacity||0.5;this.maximizeButton=!!_84d.maximizeButton;this.visible=!!_84d.visible;this._mainMapLayer=this.map.getLayer(this.map.layerIds[0]);if(!this._mainMapLayer){console.error("esri.dijit.OverviewMap: "+this.NLS_noLayer);return;}var _850=this.baseLayer||this._mainMapLayer;var _851=this.map.spatialReference,_852=_850.spatialReference;if((_852.wkid!==_851.wkid)&&(_852.wkt!==_851.wkt)){console.error("esri.dijit.OverviewMap: "+this.NLS_invalidSR);return;}var _853=_850.declaredClass;if(_850 instanceof esri.layers.TiledMapServiceLayer){if(_84d.baseLayer){this.baseLayer=_84d.baseLayer;}else{if(_853.indexOf("VETiledLayer")!==-1){this.baseLayer=new esri.virtualearth.VETiledLayer({resourceInfo:_850.getResourceInfo(),culture:_850.culture,mapStyle:_850.mapStyle,bingMapsKey:_850.bingMapsKey});}else{if(_853.indexOf("OpenStreetMapLayer")!==-1){this.baseLayer=new esri.layers.OpenStreetMapLayer({tileServers:_850.tileServers});}else{this.baseLayer=new esri.layers.ArcGISTiledMapServiceLayer(_850.url,{resourceInfo:_850.getResourceInfo()});}}}}else{if(_850 instanceof esri.layers.DynamicMapServiceLayer){if(_84d.baseLayer){this.baseLayer=_84d.baseLayer;}else{if(_853.indexOf("ArcGISImageServiceLayer")!==-1){this.baseLayer=new esri.layers.ArcGISImageServiceLayer(_850.url);}else{this.baseLayer=new esri.layers.ArcGISDynamicMapServiceLayer(_850.url);this.baseLayer.setImageFormat("png24");}}}else{console.error("esri.dijit.OverviewMap: "+this.NLS_invalidType);return;}}if(this._detached){this.visible=true;}this._maximized=false;},startup:function(){this.inherited(arguments);if(dojo.isIE){if(!this.domNode.parentElement){this.map.container.appendChild(this.domNode);}}else{if(!this.domNode.parentNode){this.map.container.appendChild(this.domNode);}}if(this._detached){dojo.style(this._body,"display","block");dojo.style(this._controllerDiv,"display","none");dojo.style(this._maximizerDiv,"display","none");if(this.baseLayer.loaded){this._initialize();}else{dojo.connect(this.baseLayer,"onLoad",this,this._initialize);}}else{if(this.attachTo.split("-")[0]==="bottom"){this.domNode.insertBefore(this._maximizerDiv,this._controllerDiv);}if(!this.maximizeButton){dojo.addClass(this._maximizerDiv,"ovwDisabledButton");}dojo.addClass(this.domNode,{"top-left":"ovwTL","top-right":"ovwTR","bottom-left":"ovwBL","bottom-right":"ovwBR"}[this.attachTo]);dojo.addClass(this._controllerDiv,"ovwShow");dojo.addClass(this._maximizerDiv,"ovwMaximize");if(this.visible){var _854=function(){this.visible=false;this.show();};if(this.baseLayer.loaded){_854.call(this);}else{dojo.connect(this.baseLayer,"onLoad",this,_854);}}}dojo.style(this._focusDiv,"opacity",this.opacity);},destroy:function(){this._deactivate();if(this.overviewMap){this.overviewMap.destroy();}this.overviewMap=this.baseLayer=null;this.inherited(arguments);},resize:function(size){if(!size||size.w<=0||size.h<=0){return;}this._resize(size.w,size.h);},show:function(){if(!this.visible){var div=this._controllerDiv;div.title=this.NLS_hide;dojo.removeClass(div,"ovwShow");dojo.addClass(div,"ovwHide");esri.show(this._body);esri.show(this._maximizerDiv);this._initialize();this.visible=true;}},hide:function(){if(this.visible){var div=this._controllerDiv;div.title=this.NLS_show;dojo.removeClass(div,"ovwHide");dojo.addClass(div,"ovwShow");if(this._maximized){this._maximizeHandler();}esri.hide(this._body);esri.hide(this._maximizerDiv);this._deactivate();this.visible=false;}},_visibilityHandler:function(){if(this.visible){this.hide();}else{this.show();}},_maximizeHandler:function(){var div=this._maximizerDiv;if(this._maximized){div.title=this.NLS_maximize;dojo.removeClass(div,"ovwRestore");dojo.addClass(div,"ovwMaximize");this._resize(this.width,this.height);}else{div.title=this.NLS_restore;dojo.removeClass(div,"ovwMaximize");dojo.addClass(div,"ovwRestore");this._resize(this.map.width,this.map.height);}this._maximized=!this._maximized;},_resize:function(_855,_856){dojo.style(this._body,{width:_855+"px",height:_856+"px"});var _857=esri.config.defaults.map.panDuration,_858=this.overviewMap;esri.config.defaults.map.panDuration=0;_858.resize(true);_858.centerAt(this._focusExtent.getCenter());esri.config.defaults.map.panDuration=_857;},_initialize:function(){if(!this.overviewMap){var _859;_859=(this.overviewMap=new esri.Map(this.id+"-map",{slider:false,showAttribution:false,logo:false,lods:this._overviewLods,wrapAround180:this.map.wrapAround180}));dojo.connect(_859,"onLoad",this,function(){this._map_resize_override=dojo.hitch(_859,this._map_resize_override);_859.disableMapNavigation();this._activate();});_859.addLayer(this.baseLayer);}else{this._activate();}},_activate:function(){var map=this.map,_85a=this.overviewMap;this._moveableHandle=new dojo.dnd.Moveable(this._focusDiv);this._soeConnect=dojo.connect(map,"onExtentChange",this,this._syncOverviewMap);this._ufoConnect=dojo.connect(map,"onPan",this,this._updateFocus);this._oecConnect=dojo.connect(_85a,"onExtentChange",this,this._ovwExtentChangeHandler);this._opaConnect=dojo.connect(_85a,"onPan",this,this._ovwPanHandler);this._ozsConnect=dojo.connect(_85a,"onZoomStart",this,function(){esri.hide(this._focusDiv);});this._ozeConnect=dojo.connect(_85a,"onZoomEnd",this,function(){esri.show(this._focusDiv);});this._omsConnect=dojo.connect(this._moveableHandle,"onMoveStop",this,this._moveStopHandler);this._syncOverviewMap(map.extent,null,null,null);},_deactivate:function(){dojo.disconnect(this._soeConnect);dojo.disconnect(this._ufoConnect);dojo.disconnect(this._oecConnect);dojo.disconnect(this._opaConnect);dojo.disconnect(this._ozsConnect);dojo.disconnect(this._ozeConnect);dojo.disconnect(this._omsConnect);if(this._moveableHandle){this._moveableHandle.destroy();}},_syncOverviewMap:function(ext,_85b,_85c,lod){if(this._suspendPanHandling){this._suspendPanHandling=false;return;}this._focusExtent=ext;this.overviewMap.setExtent(ext.expand(this.expandFactor),true);},_updateFocus:function(ext){if(this._suspendPanHandling){return;}this._focusExtent=ext;this._drawFocusDiv(ext);},_drawFocusDiv:function(ext,_85d){var _85e=this.overviewMap;var tl=_85e.toScreen(new esri.geometry.Point(ext.xmin,ext.ymax,_85e.spatialReference));var br=_85e.toScreen(new esri.geometry.Point(ext.xmax,ext.ymin,_85e.spatialReference));var _85f=br.x-tl.x,_860=br.y-tl.y,_861=true;if((_85f>this.overviewMap.width)&&(_860>this.overviewMap.height)){_861=false;}dojo.style(this._focusDiv,{left:tl.x+(_85d?_85d.x:0)+"px",top:tl.y+(_85d?_85d.y:0)+"px",width:_85f+"px",height:_860+"px",display:_861?"block":"none"});},_moveStopHandler:function(evt){var _862=this._moveableHandle.node.style;var ext=this._focusExtent;var _863=this.overviewMap;var _864=_863.toMap(new esri.geometry.ScreenPoint(parseInt(_862.left,10),parseInt(_862.top,10)));var prev=new esri.geometry.Point(ext.xmin,ext.ymax,_863.spatialReference);this._focusExtent=ext.offset(_864.x-prev.x,_864.y-prev.y);if(this._maximized){this._maximizeHandler();}else{_863.centerAt(this._focusExtent.getCenter());}this._suspendPanHandling=true;this.map.setExtent(this._focusExtent);},_ovwExtentChangeHandler:function(){this._drawFocusDiv(this._focusExtent);},_ovwPanHandler:function(ext,_865){this._drawFocusDiv(this._focusExtent,_865);}});});},"dojo/store/util/SimpleQueryEngine":function(){define(["../../_base/array"],function(_866){return function(_867,_868){switch(typeof _867){default:throw new Error("Can not query with a "+typeof _867);case "object":case "undefined":var _869=_867;_867=function(_86a){for(var key in _869){var _86b=_869[key];if(_86b&&_86b.test){if(!_86b.test(_86a[key],_86a)){return false;}}else{if(_86b!=_86a[key]){return false;}}}return true;};break;case "string":if(!this[_867]){throw new Error("No filter function "+_867+" was found in store");}_867=this[_867];case "function":}function _86c(_86d){var _86e=_866.filter(_86d,_867);var _86f=_868&&_868.sort;if(_86f){_86e.sort(typeof _86f=="function"?_86f:function(a,b){for(var sort,i=0;sort=_86f[i];i++){var _870=a[sort.attribute];var _871=b[sort.attribute];if(_870!=_871){return !!sort.descending==(_870==null||_870>_871)?-1:1;}}return 0;});}if(_868&&(_868.start||_868.count)){var _872=_86e.length;_86e=_86e.slice(_868.start||0,(_868.start||0)+(_868.count||Infinity));_86e.total=_872;}return _86e;};_86c.matches=_867;return _86c;};});},"dojox/date/islamic":function(){define("dojox/date/islamic",["..","dojo/_base/lang","dojo/date","./islamic/Date"],function(_873,lang,dd,_874){var _875=lang.getObject("date.islamic",true,_873);_875.getDaysInMonth=function(_876){return _876.getDaysInIslamicMonth(_876.getMonth(),_876.getFullYear());};_875.compare=function(_877,_878,_879){if(_877 instanceof _874){_877=_877.toGregorian();}if(_878 instanceof _874){_878=_878.toGregorian();}return dd.compare.apply(null,arguments);};_875.add=function(date,_87a,_87b){var _87c=new _874(date);switch(_87a){case "day":_87c.setDate(date.getDate()+_87b);break;case "weekday":var day=date.getDay();if(((day+_87b)<5)&&((day+_87b)>0)){_87c.setDate(date.getDate()+_87b);}else{var _87d=0,_87e=0;if(day==5){day=4;_87e=(_87b>0)?-1:1;}else{if(day==6){day=4;_87e=(_87b>0)?-2:2;}}var add=(_87b>0)?(5-day-1):-day;var _87f=_87b-add;var div=parseInt(_87f/5);if(_87f%5!=0){_87d=(_87b>0)?2:-2;}_87d=_87d+div*7+_87f%5+add;_87c.setDate(date.getDate()+_87d+_87e);}break;case "year":_87c.setFullYear(date.getFullYear()+_87b);break;case "week":_87b*=7;_87c.setDate(date.getDate()+_87b);break;case "month":var _880=date.getMonth();_87c.setMonth(_880+_87b);break;case "hour":_87c.setHours(date.getHours()+_87b);break;case "minute":_87c._addMinutes(_87b);break;case "second":_87c._addSeconds(_87b);break;case "millisecond":_87c._addMilliseconds(_87b);break;}return _87c;};_875.difference=function(_881,_882,_883){_882=_882||new _874();_883=_883||"day";var _884=_882.getFullYear()-_881.getFullYear();var _885=1;switch(_883){case "weekday":var days=Math.round(_875.difference(_881,_882,"day"));var _886=parseInt(_875.difference(_881,_882,"week"));var mod=days%7;if(mod==0){days=_886*5;}else{var adj=0;var aDay=_881.getDay();var bDay=_882.getDay();_886=parseInt(days/7);mod=days%7;var _887=new _874(_881);_887.setDate(_887.getDate()+(_886*7));var _888=_887.getDay();if(days>0){switch(true){case aDay==5:adj=-1;break;case aDay==6:adj=0;break;case bDay==5:adj=-1;break;case bDay==6:adj=-2;break;case (_888+mod)>5:adj=-2;}}else{if(days<0){switch(true){case aDay==5:adj=0;break;case aDay==6:adj=1;break;case bDay==5:adj=2;break;case bDay==6:adj=1;break;case (_888+mod)<0:adj=2;}}}days+=adj;days-=(_886*2);}_885=days;break;case "year":_885=_884;break;case "month":var _889=(_882.toGregorian()>_881.toGregorian())?_882:_881;var _88a=(_882.toGregorian()>_881.toGregorian())?_881:_882;var _88b=_889.getMonth();var _88c=_88a.getMonth();if(_884==0){_885=_889.getMonth()-_88a.getMonth();}else{_885=12-_88c;_885+=_88b;var i=_88a.getFullYear()+1;var e=_889.getFullYear();for(i;i<e;i++){_885+=12;}}if(_882.toGregorian()<_881.toGregorian()){_885=-_885;}break;case "week":_885=parseInt(_875.difference(_881,_882,"day")/7);break;case "day":_885/=24;case "hour":_885/=60;case "minute":_885/=60;case "second":_885/=1000;case "millisecond":_885*=_882.toGregorian().getTime()-_881.toGregorian().getTime();}return Math.round(_885);};return _875;});},"esri/dijit/PopupMobile":function(){define("esri/dijit/PopupMobile",["dijit","dojo","dojox","dojo/require!esri/InfoWindowBase,esri/PopupBase,esri/dijit/NavigationBar,esri/dijit/InfoView,dojo/number,dojo/date/locale,dojox/charting/Chart2D,dojox/charting/themes/PlotKit/base,dojox/charting/action2d/Tooltip,dojo/i18n"],function(_88d,dojo,_88e){dojo.provide("esri.dijit.PopupMobile");dojo.require("esri.InfoWindowBase");dojo.require("esri.PopupBase");dojo.require("esri.dijit.NavigationBar");dojo.require("esri.dijit.InfoView");dojo.require("dojo.number");dojo.require("dojo.date.locale");dojo.require("dojox.charting.Chart2D");dojo.require("dojox.charting.themes.PlotKit.base");dojo.require("dojox.charting.action2d.Tooltip");dojo.require("dojo.i18n");(function(){var dc=_88e.charting,pk=dc.themes.PlotKit;pk.popup=pk.base.clone();pk.popup.chart.fill=pk.popup.plotarea.fill="#e7eef6";pk.popup.colors=["#284B70","#702828","#5F7143","#F6BC0C","#382C6C","#50224F","#1D7554","#4C4C4C","#0271AE","#706E41","#446A73","#0C3E69","#757575","#B7B7B7","#A3A3A3"];pk.popup.series.stroke.width=1;pk.popup.marker.stroke.width=1;}());dojo.declare("esri.dijit.PopupMobile",[esri.InfoWindowBase,esri.PopupBase],{offsetX:3,offsetY:3,zoomFactor:4,marginLeft:10,marginTop:10,highlight:true,popupNavigationBar:null,popupInfoView:null,location:null,xIcon:dojo.moduleUrl("esri.dijit","./images/whitex.png"),dArrowIcon:dojo.moduleUrl("esri.dijit","./images/whitedown.png"),lArrowIcon:dojo.moduleUrl("esri.dijit","./images/whitel.png"),rArrowIcon:dojo.moduleUrl("esri.dijit","./images/whiter.png"),constructor:function(_88f,_890){this.initialize();dojo.mixin(this,_88f);this.domNode=dojo.byId(_890);var nls=this._nls=dojo.mixin({},esri.bundle.widgets.popup);var _891=this.domNode;dojo.addClass(_891,"esriPopupMobile");var _892="<div class='sizer'>"+"<div class='titlePane'>"+"<div class='spinner hidden'>"+"</div>"+"<div class='title'></div>"+"<div style='text-align:center'>"+"<div class='titleButton prev hidden'></div>"+"<div class='footer' style='display:inline-block;width:60px;height:15px;'></div>"+"<div class='titleButton next hidden'></div>"+"</div>"+"<div class='titleButton close'></div>"+"<div class='titleButton arrow hidden'></div>"+"</div>"+"</div>"+"<div class='pointer top hidden'></div>"+"<div class='pointer bottom hidden'></div>";dojo.attr(_891,"innerHTML",_892);var _893=dojo.query(".titlePane",_891)[0];this._arrowButton=dojo.query(".arrow",_893)[0];this._pointerTop=dojo.query(".top",_891)[0];this._pointerBottom=dojo.query(".bottom",_891)[0];this._title=dojo.query(".title",_893)[0];this._footer=dojo.query(".footer",_893)[0];this._prev=dojo.query(".prev",_893)[0];this._next=dojo.query(".next",_893)[0];this._spinner=dojo.query(".spinner",_893)[0];this._eventConnections=[dojo.connect(dojo.query(".close",_893)[0],"onclick",this,this.hide),dojo.connect(this._arrowButton,"onclick",this,this._toggleView),dojo.connect(this._prev,"onclick",this,function(){this.selectPrevious();this._updateUI();}),dojo.connect(this._next,"onclick",this,function(){this.selectNext();this._updateUI();})];this._initPopupNavigationBar();this._initPopupInfoView();esri.hide(_891);this.isShowing=false;},setMap:function(map){this.inherited(arguments);dojo.place(this.domNode,map.root);if(this.highlight){this.enableHighlight(map);}},unsetMap:function(){this.disableHighlight(this.map);this.inherited(arguments);},setTitle:function(_894,_895){this.destroyDijits(this._title);this.place(_894,this._title);this.destroyDijits(this._footer);this.place(_895,this._footer);if(this.isShowing){this.startupDijits(this._title);this.startupDijits(this._footer);}},setContent:function(_896){this.destroyDijits(this._contentPane);this.place(_896,this._contentPane);this.startupDijits(this._contentPane);},show:function(_897){if(!_897){esri.show(this.domNode);this.isShowing=true;return;}var map=this.map,_898;if(_897.spatialReference){this._location=_897;_898=map.toScreen(_897);}else{this._location=map.toMap(_897);_898=_897;}if(this._maximized){this.restore();}else{this._setPosition(_898);}if(!this.isShowing){esri.show(this.domNode);this.isShowing=true;this.onShow();}},hide:function(){if(this.isShowing){esri.hide(this.domNode);this.isShowing=false;this.onHide();}},onShow:function(){this._followMap();this.startupDijits(this._title);this.showHighlight();},onHide:function(){this._unfollowMap();this.hideHighlight();},destroy:function(){if(this.map){this.unsetMap();}this.cleanup();if(this.isShowing){this.hide();}this.destroyDijits(this._title);this.destroyDijits(this._footer);dojo.forEach(this._eventConnections,dojo.disconnect);dojo.destroy(this.domNode);},selectNext:function(){this.select(this.selectedIndex+1);},selectPrevious:function(){this.select(this.selectedIndex-1);},setFeatures:function(){this.inherited(arguments);this._updateUI();},onSetFeatures:function(){},onClearFeatures:function(){this.setTitle("&nbsp;","&nbsp;");dojo.addClass(this._arrowButton,"hidden");this._updateUI();this.hideHighlight();},onSelectionChange:function(){var ptr=this.selectedIndex;this._updateUI();if(ptr>=0){this.setContent(this.features[ptr].getContent());this.updateHighlight(this.map,this.features[ptr]);if(this.isShowing){this.showHighlight();}}},onDfdComplete:function(){this._updateUI();},_followMap:function(){this._unfollowMap();var map=this.map;this._handles=[dojo.connect(map,"onPanStart",this,this._onPanStart),dojo.connect(map,"onPan",this,this._onPan),dojo.connect(map,"onZoomStart",this,this._onZoomStart),dojo.connect(map,"onExtentChange",this,this._onExtentChange)];},_unfollowMap:function(){var _899=this._handles;if(_899){dojo.forEach(_899,dojo.disconnect,dojo);this._handles=null;}},_onPanStart:function(){var _89a=this.domNode.style;this._panOrigin={left:_89a.left,top:_89a.top,right:_89a.right,bottom:_89a.bottom};},_onPan:function(_89b,_89c){var _89d=this._panOrigin,dx=_89c.x,dy=_89c.y,left=_89d.left,top=_89d.top,_89e=_89d.right,_89f=_89d.bottom;if(left){left=(parseFloat(left)+dx)+"px";}if(top){top=(parseFloat(top)+dy)+"px";}if(_89e){_89e=(parseFloat(_89e)-dx)+"px";}if(_89f){_89f=(parseFloat(_89f)-dy)+"px";}dojo.style(this.domNode,{left:left,top:top,right:_89e,bottom:_89f});},_onZoomStart:function(){esri.hide(this.domNode);},_onExtentChange:function(_8a0,_8a1,_8a2){if(_8a2){esri.show(this.domNode);this.show(this._targetLocation||this._location);this._targetLocation=null;}},_setPosition:function(_8a3){var posX=_8a3.x,posY=_8a3.y,_8a4=dojo.contentBox(this.map.container),_8a5=_8a4.w,_8a6=_8a4.h;var _8a7=0,_8a8=posY+10,_8a9=118,_8aa=18,_8ab=_8a5-_8aa;if(posX>_8aa&&posX<_8ab){_8a7=posX-130;if(_8a7<0){_8a7=0;}else{if(_8a7>_8a5-260){_8a7=_8a5-260;}}}else{if(posX<=_8aa){_8a7=posX-_8aa;}else{if(posX>=_8ab){_8a7=(_8a5-260)+(posX-_8ab);}}}if(posX>118&&posX<_8a5-130){_8a9=118;}else{if(posX<=118){if(posX>_8aa){_8a9=posX-12;}else{if(posX<=_8aa){_8a9=6;}}}else{if(posX>=_8a5-130){if(posX<_8ab){_8a9=118+posX-(_8a5-130);}else{if(posX>=_8ab){_8a9=118+(_8ab)-(_8a5-130);}}}}}if(posY<=_8a6/2){dojo.style(this.domNode,{left:_8a7+"px",top:_8a8+"px",bottom:null});dojo.style(this._pointerTop,{left:_8a9+"px"});dojo.addClass(this._pointerBottom,"hidden");dojo.removeClass(this._pointerTop,"hidden");}else{dojo.style(this.domNode,{left:_8a7+"px",top:_8a8-64+"px",bottom:null});dojo.style(this._pointerBottom,{left:_8a9+"px"});dojo.addClass(this._pointerTop,"hidden");dojo.removeClass(this._pointerBottom,"hidden");}},_showPointer:function(_8ac){var _8ad=["topLeft","topRight","bottomRight","bottomLeft"];dojo.forEach(_8ad,function(ptr){if(ptr===_8ac){dojo.query(".pointer."+ptr,this.domNode).removeClass("hidden");}else{dojo.query(".pointer."+ptr,this.domNode).addClass("hidden");}},this);},_toggleView:function(){if(!this.popupNavigationBar){this._initPopupNavigationBar();}if(!this.popupInfoView){this._initPopupInfoView();}this.hide();esri.show(this.popupNavigationBar.container);esri.show(this.popupInfoView.container);var _8ae="";if(this.selectedIndex>=0){_8ae=(this.selectedIndex+1)+" of "+this.features.length;this.setContent(this.features[this.selectedIndex].getContent());}},_handleNavigationBar:function(item){this.popupInfoView.animateTo(0);switch(item.name){case "CloseButton":esri.hide(this.popupNavigationBar.container);esri.hide(this.popupInfoView.container);this.hide();break;case "ToggleButton":esri.hide(this.popupNavigationBar.container);esri.hide(this.popupInfoView.container);this.show(this._location);break;case "PreviousButton":this.selectPrevious();this._updateUI();break;case "NextButton":this.selectNext();this._updateUI();break;}},_initPopupNavigationBar:function(){var _8af={};_8af.items=[{name:"CloseButton",type:"img",src:this.xIcon,srcAlt:this.xIcon,position:"left"},{name:"Title",type:"span",text:"",position:"center"},{name:"ToggleButton",type:"img",src:this.dArrowIcon,srcAlt:this.dArrowIcon,position:"right",toggleGroup:"toggle"},{name:"PreviousButton",type:"img",src:this.lArrowIcon,srcAlt:this.lArrowIcon,position:"right2",toggleGroup:"previous"},{name:"NextButton",type:"img",src:this.rArrowIcon,srcAlt:this.rArrowIcon,position:"right1",toggleGroup:"next"}];this.popupNavigationBar=new esri.dijit.NavigationBar(_8af,dojo.create("div",{},dojo.body()));dojo.connect(this.popupNavigationBar,"onCreate",this,function(_8b0){this._prevFeatureButton=_8b0[3]._node;this._nextFeatureButton=_8b0[4]._node;});dojo.connect(this.popupNavigationBar,"onSelect",this,this._handleNavigationBar);dojo.connect(this.popupNavigationBar,"onUnSelect",this,this._handleNavigationBar);this.popupNavigationBar.startup();esri.hide(this.popupNavigationBar.container);},_initPopupInfoView:function(){var _8b1={items:[{name:"Navigator",type:"div",text:""},{name:"content",type:"div",text:""},{name:"attachment",type:"div",text:""}]};this.popupInfoView=new esri.dijit.InfoView(_8b1,dojo.create("div",{},dojo.body()));dojo.addClass(this.popupInfoView.container,"esriMobilePopupInfoView");this.popupInfoView.enableTouchScroll();dojo.connect(this.popupInfoView,"onCreate",this,function(_8b2){this._contentPane=_8b2[1]._node;if(this.selectedIndex>=0){this.setContent(this.features[this.selectedIndex].getContent());}});dojo.connect(this.popupInfoView,"onSwipeLeft",this,function(){});dojo.connect(this.popupInfoView,"onSwipeRight",this,function(){});this.popupInfoView.startup();},_updateUI:function(){var _8b3="&nbsp;",_8b4="&nbsp;",ptr=this.selectedIndex,_8b5=this.features,_8b6=this.deferreds,prev=this._prevFeatureButton.parentNode,next=this._nextFeatureButton.parentNode,_8b7=this._spinner,_8b8=this._actionList,nls=this._nls;if(_8b5&&_8b5.length>=1){_8b3=_8b5[ptr].getTitle();_8b4=(ptr+1)+" of "+_8b5.length;dojo.removeClass(this._arrowButton,"hidden");if(ptr===0){dojo.addClass(prev,"hidden");dojo.addClass(this._prev,"hidden");}else{dojo.removeClass(prev,"hidden");dojo.removeClass(this._prev,"hidden");}if(ptr===_8b5.length-1){dojo.addClass(next,"hidden");dojo.addClass(this._next,"hidden");}else{dojo.removeClass(next,"hidden");dojo.removeClass(this._next,"hidden");}}else{dojo.addClass(this._arrowButton,"hidden");dojo.addClass(prev,"hidden");dojo.addClass(next,"hidden");dojo.addClass(this._prev,"hidden");dojo.addClass(this._next,"hidden");}this.setTitle(_8b3,_8b4);this.popupNavigationBar.getItems()[1]._node.innerHTML=_8b4;if(_8b6&&_8b6.length){dojo.removeClass(_8b7,"hidden");this.setTitle(nls.NLS_searching+"...","&nbsp;");}else{dojo.addClass(_8b7,"hidden");if(!_8b5||!_8b5.length){this.setTitle("No Information","&nbsp;");}}}});});},"dojox/charting/plot2d/MarkersOnly":function(){define("dojox/charting/plot2d/MarkersOnly",["dojo/_base/declare","./Default"],function(_8b9,_8ba){return _8b9("dojox.charting.plot2d.MarkersOnly",_8ba,{constructor:function(){this.opt.lines=false;this.opt.markers=true;}});});},"dojox/charting/plot2d/Areas":function(){define("dojox/charting/plot2d/Areas",["dojo/_base/declare","./Default"],function(_8bb,_8bc){return _8bb("dojox.charting.plot2d.Areas",_8bc,{constructor:function(){this.opt.lines=true;this.opt.areas=true;}});});},"dojox/gfx/Mover":function(){define("dojox/gfx/Mover",["dojo/_base/lang","dojo/_base/array","dojo/_base/declare","dojo/on","dojo/touch","dojo/_base/event"],function(lang,arr,_8bd,on,_8be,_8bf){return _8bd("dojox.gfx.Mover",null,{constructor:function(_8c0,e,host){this.shape=_8c0;this.lastX=e.clientX;this.lastY=e.clientY;var h=this.host=host,d=document,_8c1=on(d,_8be.move,lang.hitch(this,"onFirstMove"));this.events=[on(d,_8be.move,lang.hitch(this,"onMouseMove")),on(d,_8be.release,lang.hitch(this,"destroy")),on(d,"dragstart",lang.hitch(_8bf,"stop")),on(d,"selectstart",lang.hitch(_8bf,"stop")),_8c1];if(h&&h.onMoveStart){h.onMoveStart(this);}},onMouseMove:function(e){var x=e.clientX;var y=e.clientY;this.host.onMove(this,{dx:x-this.lastX,dy:y-this.lastY});this.lastX=x;this.lastY=y;_8bf.stop(e);},onFirstMove:function(){this.host.onFirstMove(this);this.events.pop().remove();},destroy:function(){arr.forEach(this.events,function(h){h.remove();});var h=this.host;if(h&&h.onMoveStop){h.onMoveStop(this);}this.events=this.shape=null;}});});},"url:esri/dijit/templates/Gauge.html":"<div class=\"gaugeContainer\">\r\n  <div data-dojo-attach-point=\"titleNode\" class=\"gaugeTitle\">${title}</div>\r\n  <div data-dojo-attach-point=\"dataLabelWrapperNode\">\r\n    <div data-dojo-attach-point=\"dataLabelNode\">${dataLabel}</div>\r\n  </div>\r\n  <div data-dojo-attach-point=\"gaugeNode\" style=\"margin: -10px auto 10px auto; width: 240px; height: 120px;\"></div>\r\n  <div data-dojo-attach-point=\"captionNode\" class=\"gaugeCaption\">${caption}</div>\r\n</div>\r\n","dojo/dnd/Manager":function(){define(["../_base/array","../_base/declare","../_base/event","../_base/lang","../_base/window","../dom-class","../Evented","../has","../keys","../on","../topic","../touch","./common","./autoscroll","./Avatar"],function(_8c2,_8c3,_8c4,lang,win,_8c5,_8c6,has,keys,on,_8c7,_8c8,dnd,_8c9,_8ca){var _8cb=_8c3("dojo.dnd.Manager",[_8c6],{constructor:function(){this.avatar=null;this.source=null;this.nodes=[];this.copy=true;this.target=null;this.canDropFlag=false;this.events=[];},OFFSET_X:has("touch")?0:16,OFFSET_Y:has("touch")?-64:16,overSource:function(_8cc){if(this.avatar){this.target=(_8cc&&_8cc.targetState!="Disabled")?_8cc:null;this.canDropFlag=Boolean(this.target);this.avatar.update();}_8c7.publish("/dnd/source/over",_8cc);},outSource:function(_8cd){if(this.avatar){if(this.target==_8cd){this.target=null;this.canDropFlag=false;this.avatar.update();_8c7.publish("/dnd/source/over",null);}}else{_8c7.publish("/dnd/source/over",null);}},startDrag:function(_8ce,_8cf,copy){_8c9.autoScrollStart(win.doc);this.source=_8ce;this.nodes=_8cf;this.copy=Boolean(copy);this.avatar=this.makeAvatar();win.body().appendChild(this.avatar.node);_8c7.publish("/dnd/start",_8ce,_8cf,this.copy);this.events=[on(win.doc,_8c8.move,lang.hitch(this,"onMouseMove")),on(win.doc,_8c8.release,lang.hitch(this,"onMouseUp")),on(win.doc,"keydown",lang.hitch(this,"onKeyDown")),on(win.doc,"keyup",lang.hitch(this,"onKeyUp")),on(win.doc,"dragstart",_8c4.stop),on(win.body(),"selectstart",_8c4.stop)];var c="dojoDnd"+(copy?"Copy":"Move");_8c5.add(win.body(),c);},canDrop:function(flag){var _8d0=Boolean(this.target&&flag);if(this.canDropFlag!=_8d0){this.canDropFlag=_8d0;this.avatar.update();}},stopDrag:function(){_8c5.remove(win.body(),["dojoDndCopy","dojoDndMove"]);_8c2.forEach(this.events,function(_8d1){_8d1.remove();});this.events=[];this.avatar.destroy();this.avatar=null;this.source=this.target=null;this.nodes=[];},makeAvatar:function(){return new _8ca(this);},updateAvatar:function(){this.avatar.update();},onMouseMove:function(e){var a=this.avatar;if(a){_8c9.autoScrollNodes(e);var s=a.node.style;s.left=(e.pageX+this.OFFSET_X)+"px";s.top=(e.pageY+this.OFFSET_Y)+"px";var copy=Boolean(this.source.copyState(dnd.getCopyKeyState(e)));if(this.copy!=copy){this._setCopyStatus(copy);}}if(has("touch")){e.preventDefault();}},onMouseUp:function(e){if(this.avatar){if(this.target&&this.canDropFlag){var copy=Boolean(this.source.copyState(dnd.getCopyKeyState(e)));_8c7.publish("/dnd/drop/before",this.source,this.nodes,copy,this.target,e);_8c7.publish("/dnd/drop",this.source,this.nodes,copy,this.target,e);}else{_8c7.publish("/dnd/cancel");}this.stopDrag();}},onKeyDown:function(e){if(this.avatar){switch(e.keyCode){case keys.CTRL:var copy=Boolean(this.source.copyState(true));if(this.copy!=copy){this._setCopyStatus(copy);}break;case keys.ESCAPE:_8c7.publish("/dnd/cancel");this.stopDrag();break;}}},onKeyUp:function(e){if(this.avatar&&e.keyCode==keys.CTRL){var copy=Boolean(this.source.copyState(false));if(this.copy!=copy){this._setCopyStatus(copy);}}},_setCopyStatus:function(copy){this.copy=copy;this.source._markDndStatus(this.copy);this.updateAvatar();_8c5.replace(win.body(),"dojoDnd"+(this.copy?"Copy":"Move"),"dojoDnd"+(this.copy?"Move":"Copy"));}});dnd._manager=null;_8cb.manager=dnd.manager=function(){if(!dnd._manager){dnd._manager=new _8cb();}return dnd._manager;};return _8cb;});},"esri/dijit/Popup":function(){define("esri/dijit/Popup",["dijit","dojo","dojox","dojo/require!esri/InfoWindowBase,esri/PopupBase,esri/utils,dijit/_Widget,dijit/_Templated,dojo/number,dojo/date/locale,dojox/charting/Chart2D,dojox/charting/themes/PlotKit/base,dojox/charting/action2d/Tooltip,dojo/i18n"],function(_8d2,dojo,_8d3){dojo.provide("esri.dijit.Popup");dojo.require("esri.InfoWindowBase");dojo.require("esri.PopupBase");dojo.require("esri.utils");dojo.require("dijit._Widget");dojo.require("dijit._Templated");dojo.require("dojo.number");dojo.require("dojo.date.locale");dojo.require("dojox.charting.Chart2D");dojo.require("dojox.charting.themes.PlotKit.base");dojo.require("dojox.charting.action2d.Tooltip");dojo.require("dojo.i18n");(function(){var dc=_8d3.charting,pk=dc.themes.PlotKit;pk.popup=pk.base.clone();pk.popup.chart.fill=pk.popup.plotarea.fill="#e7eef6";pk.popup.colors=["#284B70","#702828","#5F7143","#F6BC0C","#382C6C","#50224F","#1D7554","#4C4C4C","#0271AE","#706E41","#446A73","#0C3E69","#757575","#B7B7B7","#A3A3A3"];pk.popup.series.stroke.width=1;pk.popup.marker.stroke.width=1;}());dojo.declare("esri.dijit.Popup",[esri.InfoWindowBase,esri.PopupBase],{offsetX:3,offsetY:3,zoomFactor:4,marginLeft:25,marginTop:25,highlight:true,constructor:function(_8d4,_8d5){this.initialize();dojo.mixin(this,_8d4);this.domNode=dojo.byId(_8d5);var nls=this._nls=dojo.mixin({},esri.bundle.widgets.popup);var _8d6=this.domNode;dojo.addClass(_8d6,"esriPopup");var _8d7="<div class='esriPopupWrapper' style='position: absolute;'>"+"<div class='sizer'>"+"<div class='titlePane'>"+"<div class='spinner hidden' title='"+nls.NLS_searching+"...'></div>"+"<div class='title'></div>"+"<div class='titleButton prev hidden' title='"+nls.NLS_prevFeature+"'></div>"+"<div class='titleButton next hidden' title='"+nls.NLS_nextFeature+"'></div>"+"<div class='titleButton maximize' title='"+nls.NLS_maximize+"'></div>"+"<div class='titleButton close' title='"+nls.NLS_close+"'></div>"+"</div>"+"</div>"+"<div class='sizer content'>"+"<div class='contentPane'>"+"</div>"+"</div>"+"<div class='sizer'>"+"<div class='actionsPane'>"+"<div class='actionList hidden'>"+"<a class='action zoomTo' href='javascript:void(0);'>"+nls.NLS_zoomTo+"</a>"+"</div>"+"</div>"+"</div>"+"<div class='pointer hidden'></div>"+"</div>"+"<div class='outerPointer hidden'></div>";dojo.attr(_8d6,"innerHTML",_8d7);this._sizers=dojo.query(".sizer",_8d6);var _8d8=dojo.query(".titlePane",_8d6)[0];dojo.setSelectable(_8d8,false);this._title=dojo.query(".title",_8d8)[0];this._prevFeatureButton=dojo.query(".prev",_8d8)[0];this._nextFeatureButton=dojo.query(".next",_8d8)[0];this._maxButton=dojo.query(".maximize",_8d8)[0];this._spinner=dojo.query(".spinner",_8d8)[0];this._contentPane=dojo.query(".contentPane",_8d6)[0];this._positioner=dojo.query(".esriPopupWrapper",_8d6)[0];this._pointer=dojo.query(".pointer",_8d6)[0];this._outerPointer=dojo.query(".outerPointer",_8d6)[0];this._actionList=dojo.query(".actionsPane .actionList",_8d6)[0];this._eventConnections=[dojo.connect(dojo.query(".close",_8d8)[0],"onclick",this,this.hide),dojo.connect(this._prevFeatureButton,"onclick",this,this.selectPrevious),dojo.connect(this._nextFeatureButton,"onclick",this,this.selectNext),dojo.connect(this._maxButton,"onclick",this,this._toggleSize),dojo.connect(dojo.query(".zoomTo",this._actionList)[0],"onclick",this,this._zoomToFeature)];if(esri.isTouchEnabled){var _8d9=esri.setScrollable(this._contentPane);this._eventConnections.push(_8d9[0],_8d9[1]);}this._setVisibility(false);this.isShowing=false;},setMap:function(map){this.inherited(arguments);dojo.place(this.domNode,map.root);if(this.highlight){this.enableHighlight(map);}this._maxHeight=dojo.style(this._contentPane,"maxHeight");},unsetMap:function(){this.disableHighlight(this.map);this.inherited(arguments);},setTitle:function(_8da){if(!esri._isDefined(_8da)||_8da===""){_8da="&nbsp;";}this.destroyDijits(this._title);this.place(_8da,this._title);if(this.isShowing){this.startupDijits(this._title);this.reposition();}},setContent:function(_8db){if(!esri._isDefined(_8db)||_8db===""){_8db="&nbsp;";}this.destroyDijits(this._contentPane);this.place(_8db,this._contentPane);if(this.isShowing){this.startupDijits(this._contentPane);this.reposition();}},show:function(_8dc,_8dd){if(!_8dc){this._setVisibility(true);this.isShowing=true;return;}var map=this.map,_8de;if(_8dc.spatialReference){this._location=_8dc;_8de=map.toScreen(_8dc);}else{this._location=map.toMap(_8dc);_8de=_8dc;}var _8df=map._getFrameWidth();if(_8df!==-1){_8de.x=_8de.x%_8df;if(_8de.x<0){_8de.x+=_8df;}if(map.width>_8df){var _8e0=(map.width-_8df)/2;while(_8de.x<_8e0){_8de.x+=_8df;}}}if(this._maximized){this.restore();}else{this._setPosition(_8de);}if(_8dd&&_8dd.closestFirst){this.showClosestFirst(this._location);}if(!this.isShowing){this._setVisibility(true);this.isShowing=true;this.onShow();}},hide:function(){if(this.isShowing){this._setVisibility(false);this.isShowing=false;this.onHide();}},resize:function(_8e1,_8e2){this._sizers.style({width:_8e1+"px"});dojo.style(this._contentPane,"maxHeight",_8e2+"px");this._maxHeight=_8e2;if(this.isShowing){this.reposition();}},reposition:function(){if(this.map&&this._location&&!this._maximized&&this.isShowing){this._setPosition(this.map.toScreen(this._location));}},onShow:function(){this._followMap();this.startupDijits(this._title);this.startupDijits(this._contentPane);this.reposition();this.showHighlight();},onHide:function(){this._unfollowMap();this.hideHighlight();},maximize:function(){var map=this.map;if(!map||this._maximized){return;}this._maximized=true;var max=this._maxButton;dojo.removeClass(max,"maximize");dojo.addClass(max,"restore");dojo.attr(max,"title",this._nls.NLS_restore);var _8e3=this.marginLeft,_8e4=this.marginTop,_8e5=map.width-(2*_8e3),_8e6=map.height-(2*_8e4),_8e7=this.domNode;dojo.style(_8e7,{left:_8e3+"px",right:null,top:_8e4+"px",bottom:null});dojo.style(this._positioner,{left:null,right:null,top:null,bottom:null});this._savedWidth=dojo.style(this._sizers[0],"width");this._savedHeight=dojo.style(this._contentPane,"maxHeight");this._sizers.style({width:_8e5+"px"});dojo.style(this._contentPane,{maxHeight:(_8e6-65)+"px",height:(_8e6-65)+"px"});this._showPointer("");this._unfollowMap();dojo.addClass(this.domNode,"esriPopupMaximized");this.onMaximize();},restore:function(){var map=this.map;if(!map||!this._maximized){return;}this._maximized=false;var max=this._maxButton;dojo.removeClass(max,"restore");dojo.addClass(max,"maximize");dojo.attr(max,"title",this._nls.NLS_maximize);dojo.style(this._contentPane,"height",null);this.resize(this._savedWidth,this._savedHeight);this._savedWidth=this._savedHeight=null;this.show(this._location);this._followMap();dojo.removeClass(this.domNode,"esriPopupMaximized");this.onRestore();},destroy:function(){if(this.map){this.unsetMap();}this.cleanup();if(this.isShowing){this.hide();}this.destroyDijits(this._title);this.destroyDijits(this._content);dojo.forEach(this._eventConnections,dojo.disconnect);dojo.destroy(this.domNode);this._sizers=this._contentPane=this._actionList=this._positioner=this._pointer=this._outerPointer=this._title=this._prevFeatureButton=this._nextFeatureButton=this._spinner=this._eventConnections=this._pagerScope=this._targetLocation=this._nls=this._maxButton=null;},selectNext:function(){this.select(this.selectedIndex+1);},selectPrevious:function(){this.select(this.selectedIndex-1);},setFeatures:function(){this.inherited(arguments);this._updateUI();},onSetFeatures:function(){},onClearFeatures:function(){this.setTitle("&nbsp;");this.setContent("&nbsp;");this._setPagerCallbacks(this);this._updateUI();this.hideHighlight();},onSelectionChange:function(){var ptr=this.selectedIndex;this._updateUI();if(ptr>=0){this.setContent(this.features[ptr].getContent());this.updateHighlight(this.map,this.features[ptr]);if(this.isShowing){this.showHighlight();}}},onDfdComplete:function(){this.inherited(arguments);this._updateUI();},onMaximize:function(){},onRestore:function(){},_setVisibility:function(_8e8){dojo.style(this.domNode,"visibility",_8e8?"visible":"hidden");},_followMap:function(){this._unfollowMap();var map=this.map;this._handles=[dojo.connect(map,"onPanStart",this,this._onPanStart),dojo.connect(map,"onPan",this,this._onPan),dojo.connect(map,"onZoomStart",this,this._onZoomStart),dojo.connect(map,"onExtentChange",this,this._onExtentChange)];},_unfollowMap:function(){var _8e9=this._handles;if(_8e9){dojo.forEach(_8e9,dojo.disconnect,dojo);this._handles=null;}},_onPanStart:function(){var _8ea=this.domNode.style;this._panOrigin={left:_8ea.left,top:_8ea.top,right:_8ea.right,bottom:_8ea.bottom};},_onPan:function(_8eb,_8ec){var _8ed=this._panOrigin,dx=_8ec.x,dy=_8ec.y,left=_8ed.left,top=_8ed.top,_8ee=_8ed.right,_8ef=_8ed.bottom;if(left){left=(parseFloat(left)+dx)+"px";}if(top){top=(parseFloat(top)+dy)+"px";}if(_8ee){_8ee=(parseFloat(_8ee)-dx)+"px";}if(_8ef){_8ef=(parseFloat(_8ef)-dy)+"px";}dojo.style(this.domNode,{left:left,top:top,right:_8ee,bottom:_8ef});},_onZoomStart:function(){this._setVisibility(false);},_onExtentChange:function(_8f0,_8f1,_8f2){if(_8f2){this._setVisibility(true);this.show(this._targetLocation||this._location);}this._targetLocation=null;},_toggleSize:function(){if(this._maximized){this.restore();}else{this.maximize();}},_setPosition:function(_8f3){var posX=_8f3.x,posY=_8f3.y,offX=this.offsetX||0,offY=this.offsetY||0,_8f4=0,_8f5=0,_8f6=dojo.position(this.map.container,true),_8f7=_8f6.w,_8f8=_8f6.h,_8f9="Left",_8fa="bottom",_8fb=dojo.contentBox(this._positioner),_8fc=_8fb.w/2,_8fd=_8fb.h/2,maxH=dojo.style(this._sizers[0],"height")+this._maxHeight+dojo.style(this._sizers[2],"height"),_8fe=maxH/2,xmin=0,ymin=0,xmax=_8f7,ymax=_8f8,_8ff=posX,_900=posY;var _901=dojo.getObject("dojo.window.getBox");if(_901){_901=_901();xmin=Math.max(_901.l,_8f6.x);xmax=Math.min(_901.l+_901.w,_8f6.x+_8f6.w);ymin=Math.max(_901.t,_8f6.y);ymax=Math.min(_901.t+_901.h,_8f6.y+_8f6.h);_8ff+=_8f6.x;_900+=_8f6.y;}var _902=((_900-ymin)>_8fe),_903=((ymax-_900)>=_8fe),_904=((xmax-_8ff)>=_8fc),_905=((_8ff-xmin)>_8fc),_906=((_900-ymin)>=maxH),_907=((ymax-_900)>=maxH),_908=((xmax-_8ff)>=_8fb.w),_909=((_8ff-xmin)>=_8fb.w);if(_902&&_903){if(_908){_8fa="";_8f9="Left";}else{if(_909){_8fa="";_8f9="Right";}}}if(_8f9&&_8fa){if(_905&&_904){if(_906){_8f9="";_8fa="bottom";}else{if(_907){_8f9="";_8fa="top";}}}}if(_8f9&&_8fa){if(_908&&_906){_8f9="Left";_8fa="bottom";}else{if(_908&&_907){_8f9="Left";_8fa="top";}else{if(_909&&_907){_8f9="Right";_8fa="top";}else{if(_909&&_906){_8f9="Right";_8fa="bottom";}else{}}}}}var _90a=_8fa+_8f9;switch(_90a){case "top":case "bottom":_8f5=14;break;case "Left":case "Right":_8f4=13;break;case "topLeft":case "topRight":case "bottomLeft":case "bottomRight":_8f5=45;break;}dojo.style(this.domNode,{left:posX+"px",top:posY+"px",right:null,bottom:null});var _90b={left:null,right:null,top:null,bottom:null};if(_8f9){_90b[_8f9.toLowerCase()]=(_8f4+offX)+"px";}else{_90b.left=(-_8fc)+"px";}if(_8fa){_90b[_8fa]=(_8f5+offY)+"px";}else{_90b.top=(-_8fd)+"px";}dojo.style(this._positioner,_90b);this._showPointer(_90a);},_showPointer:function(_90c){dojo.removeClass(this._pointer,["top","bottom","right","left","topLeft","topRight","bottomRight","bottomLeft","hidden"]);dojo.removeClass(this._outerPointer,["right","left","hidden"]);if(_90c==="Right"||_90c==="Left"){_90c=_90c.toLowerCase();dojo.addClass(this._outerPointer,_90c);}else{dojo.addClass(this._pointer,_90c);}},_setPagerCallbacks:function(_90d,_90e,_90f){if(_90d===this&&(!this._pagerScope||this._pagerScope===this)){return;}if(_90d===this._pagerScope){return;}this._pagerScope=_90d;if(_90d===this){_90e=this.selectPrevious;_90f=this.selectNext;}var _910=this._eventConnections;dojo.disconnect(_910[1]);dojo.disconnect(_910[2]);if(_90e){_910[1]=dojo.connect(this._prevFeatureButton,"onclick",_90d,_90e);}if(_90f){_910[2]=dojo.connect(this._nextFeatureButton,"onclick",_90d,_90f);}},_zoomToFeature:function(){var _911=this.features,ptr=this.selectedIndex,map=this.map;if(_911){var _912=_911[ptr].geometry,_913,_914,_915=0,_916;if(_912){switch(_912.type){case "point":_913=_912;break;case "multipoint":_913=_912.getPoint(0);_914=_912.getExtent();break;case "polyline":_913=_912.getPoint(0,0);_914=_912.getExtent();if(map._getFrameWidth()!==-1){dojo.forEach(_912.paths,function(path){var _917={"paths":[path,map.spatialReference]},_918=new esri.geometry.Polyline(_917),_919=_918.getExtent(),_91a=Math.abs(_919.ymax-_919.ymin),_91b=Math.abs(_919.xmax-_919.xmin),_91c=(_91b>_91a)?_91b:_91a;if(_91c>_915){_915=_91c;_916=_919;}});_916.spatialReference=_914.spatialReference;_914=_916;}break;case "polygon":_913=_912.getPoint(0,0);_914=_912.getExtent();if(map._getFrameWidth()!==-1){dojo.forEach(_912.rings,function(ring){var _91d={"rings":[ring,map.spatialReference]},_91e=new esri.geometry.Polygon(_91d),_91f=_91e.getExtent(),_920=Math.abs(_91f.ymax-_91f.ymin),_921=Math.abs(_91f.xmax-_91f.xmin),_922=(_921>_920)?_921:_920;if(_922>_915){_915=_922;_916=_91f;}});_916.spatialReference=_914.spatialReference;_914=_916;}break;}}if(!_913){_913=this._location;}if(!_914||!_914.intersects(this._location)){this._location=_913;}if(_914){map.setExtent(_914,true);}else{var _923=map.getNumLevels(),_924=map.getLevel(),last=map.getMaxZoom(),_925=this.zoomFactor||1;if(_923>0){if(_924===last){return;}var _926=_924+_925;if(_926>last){_926=last;}map.navigationManager._wheelZoom({value:(_926-_924),mapPoint:_913},true);}else{map.navigationManager._wheelZoom({value:(1/Math.pow(2,_925))*2,mapPoint:_913},true);}}}},_updateUI:function(){var _927="&nbsp;",ptr=this.selectedIndex,_928=this.features,_929=this.deferreds,prev=this._prevFeatureButton,next=this._nextFeatureButton,_92a=this._spinner,_92b=this._actionList,nls=this._nls;if(_928&&_928.length>1){if(nls.NLS_pagingInfo){_927=esri.substitute({index:(ptr+1),total:_928.length},nls.NLS_pagingInfo);}if(ptr===0){dojo.addClass(prev,"hidden");}else{dojo.removeClass(prev,"hidden");}if(ptr===_928.length-1){dojo.addClass(next,"hidden");}else{dojo.removeClass(next,"hidden");}}else{dojo.addClass(prev,"hidden");dojo.addClass(next,"hidden");}this.setTitle(_927);if(_929&&_929.length){if(_928){dojo.removeClass(_92a,"hidden");}else{this.setContent("<div style='text-align: center;'>"+nls.NLS_searching+"...</div>");}}else{dojo.addClass(_92a,"hidden");if(!_928||!_928.length){this.setContent("<div style='text-align: center;'>"+nls.NLS_noInfo+".</div>");}}if(_928&&_928.length){dojo.removeClass(_92b,"hidden");}else{dojo.addClass(_92b,"hidden");}}});dojo.declare("esri.dijit.PopupTemplate",[esri.PopupInfoTemplate],{chartTheme:"dojox.charting.themes.PlotKit.popup",constructor:function(json,_92c){dojo.mixin(this,_92c);this.initialize(json);this._nls=dojo.mixin({},esri.bundle.widgets.popup);},getTitle:function(_92d){return this.info?this.getComponents(_92d).title:"";},getContent:function(_92e){return this.info?new esri.dijit._PopupRenderer({template:this,graphic:_92e,chartTheme:this.chartTheme,_nls:this._nls},dojo.create("div")).domNode:"";}});dojo.declare("esri.dijit._PopupRenderer",[_8d2._Widget,_8d2._Templated],{templateString:"<div class='esriViewPopup'>"+"<div class='mainSection'>"+"<div class='header' dojoAttachPoint='_title'></div>"+"<div class='hzLine'></div>"+"<div dojoAttachPoint='_description'></div>"+"<div class='break'></div>"+"</div>"+"<div class='attachmentsSection hidden'>"+"<div>${_nls.NLS_attach}:</div>"+"<ul dojoAttachPoint='_attachmentsList'>"+"</ul>"+"<div class='break'></div>"+"</div>"+"<div class='mediaSection hidden'>"+"<div class='header' dojoAttachPoint='_mediaTitle'></div>"+"<div class='hzLine'></div>"+"<div class='caption' dojoAttachPoint='_mediaCaption'></div>"+"<div class='gallery' dojoAttachPoint='_gallery'>"+"<div class='mediaHandle prev' dojoAttachPoint='_prevMedia' dojoAttachEvent='onclick: _goToPrevMedia'></div>"+"<div class='mediaHandle next' dojoAttachPoint='_nextMedia' dojoAttachEvent='onclick: _goToNextMedia'></div>"+"<ul class='summary'>"+"<li class='image mediaCount hidden' dojoAttachPoint='_imageCount'>0</li>"+"<li class='image mediaIcon hidden'></li>"+"<li class='chart mediaCount hidden' dojoAttachPoint='_chartCount'>0</li>"+"<li class='chart mediaIcon hidden'></li>"+"</ul>"+"<div class='frame' dojoAttachPoint='_mediaFrame'></div>"+"</div>"+"</div>"+"<div class='editSummarySection hidden' dojoAttachPoint='_editSummarySection'>"+"<div class='break'></div>"+"<div class='break hidden' dojoAttachPoint='_mediaBreak'></div>"+"<div class='editSummary' dojoAttachPoint='_editSummary'></div>"+"</div>"+"</div>",startup:function(){this.inherited(arguments);var _92f=this.template,_930=this.graphic,_931=_92f.getComponents(_930),_932=_931.title,_933=_931.description,_934=_931.fields,_935=_931.mediaInfos,_936=this.domNode,nls=this._nls;this._prevMedia.title=nls.NLS_prevMedia;this._nextMedia.title=nls.NLS_nextMedia;dojo.attr(this._title,"innerHTML",_932);if(!_932){dojo.addClass(this._title,"hidden");}if(!_933&&_934){_933="";dojo.forEach(_934,function(row){_933+=("<tr valign='top'>");_933+=("<td class='attrName'>"+row[0]+"</td>");_933+=("<td class='attrValue'>"+row[1].replace(/^\s*(https?:\/\/[^\s]+)\s*$/i,"<a target='_blank' href='$1' title='$1'>"+nls.NLS_moreInfo+"</a>")+"</td>");_933+=("</tr>");});if(_933){_933="<table class='attrTable' cellpadding='0px' cellspacing='0px'>"+_933+"</table>";}}dojo.attr(this._description,"innerHTML",_933);if(!_933){dojo.addClass(this._description,"hidden");}dojo.query("a",this._description).forEach(function(node){dojo.attr(node,"target","_blank");});if(_932&&_933){dojo.query(".mainSection .hzLine",_936).removeClass("hidden");}else{if(_932||_933){dojo.query(".mainSection .hzLine",_936).addClass("hidden");}else{dojo.query(".mainSection",_936).addClass("hidden");}}var dfd=(this._dfd=_92f.getAttachments(_930));if(dfd){dfd.addBoth(dojo.hitch(this,this._attListHandler,dfd));dojo.attr(this._attachmentsList,"innerHTML","<li>"+nls.NLS_searching+"...</li>");dojo.query(".attachmentsSection",_936).removeClass("hidden");}if(_935&&_935.length){dojo.query(".mediaSection",_936).removeClass("hidden");dojo.setSelectable(this._mediaFrame,false);this._mediaInfos=_935;this._mediaPtr=0;this._updateUI();this._displayMedia();}if(_931.editSummary){dojo.attr(this._editSummary,"innerHTML",_931.editSummary);if(_935&&_935.length){dojo.removeClass(this._mediaBreak,"hidden");}dojo.removeClass(this._editSummarySection,"hidden");}},destroy:function(){if(this._dfd){this._dfd.cancel();}this._destroyFrame();this.template=this.graphic=this._nls=this._mediaInfos=this._mediaPtr=this._dfd=null;this.inherited(arguments);},_goToPrevMedia:function(){var ptr=this._mediaPtr-1;if(ptr<0){return;}this._mediaPtr--;this._updateUI();this._displayMedia();},_goToNextMedia:function(){var ptr=this._mediaPtr+1;if(ptr===this._mediaInfos.length){return;}this._mediaPtr++;this._updateUI();this._displayMedia();},_updateUI:function(){var _937=this._mediaInfos,_938=_937.length,_939=this.domNode,_93a=this._prevMedia,_93b=this._nextMedia;if(_938>1){var _93c=0,_93d=0;dojo.forEach(_937,function(info){if(info.type==="image"){_93c++;}else{if(info.type.indexOf("chart")!==-1){_93d++;}}});if(_93c){dojo.attr(this._imageCount,"innerHTML",_93c);dojo.query(".summary .image",_939).removeClass("hidden");}if(_93d){dojo.attr(this._chartCount,"innerHTML",_93d);dojo.query(".summary .chart",_939).removeClass("hidden");}}else{dojo.query(".summary",_939).addClass("hidden");dojo.addClass(_93a,"hidden");dojo.addClass(_93b,"hidden");}var ptr=this._mediaPtr;if(ptr===0){dojo.addClass(_93a,"hidden");}else{dojo.removeClass(_93a,"hidden");}if(ptr===_938-1){dojo.addClass(_93b,"hidden");}else{dojo.removeClass(_93b,"hidden");}this._destroyFrame();},_displayMedia:function(){var info=this._mediaInfos[this._mediaPtr],_93e=info.title,_93f=info.caption,_940=dojo.query(".mediaSection .hzLine",this.domNode)[0];dojo.attr(this._mediaTitle,"innerHTML",_93e);dojo[_93e?"removeClass":"addClass"](this._mediaTitle,"hidden");dojo.attr(this._mediaCaption,"innerHTML",_93f);dojo[_93f?"removeClass":"addClass"](this._mediaCaption,"hidden");dojo[(_93e&&_93f)?"removeClass":"addClass"](_940,"hidden");if(info.type==="image"){this._showImage(info.value);}else{this._showChart(info.type,info.value);}},_showImage:function(_941){dojo.addClass(this._mediaFrame,"image");var _942=dojo.style(this._gallery,"height"),html="<img src='"+_941.sourceURL+"' onload='esri.dijit._PopupRenderer.prototype._imageLoaded(this,"+_942+");' />";if(_941.linkURL){html="<a target='_blank' href='"+_941.linkURL+"'>"+html+"</a>";}dojo.attr(this._mediaFrame,"innerHTML",html);},_showChart:function(type,_943){dojo.removeClass(this._mediaFrame,"image");var _944=this._chart=new _8d3.charting.Chart2D(dojo.create("div",{"class":"chart"},this._mediaFrame),{margins:{l:4,t:4,r:4,b:4}});var _945=_943.theme||this.chartTheme||"PlotKit.popup";_944.setTheme(dojo.getObject(_945)||dojo.getObject("dojox.charting.themes."+_945));switch(type){case "piechart":_944.addPlot("default",{type:"Pie",labels:false});_944.addSeries("Series A",_943.fields);break;case "linechart":_944.addPlot("default",{type:"Markers"});_944.addAxis("x",{min:0,majorTicks:false,minorTicks:false,majorLabels:false,minorLabels:false});_944.addAxis("y",{includeZero:true,vertical:true,fixUpper:"minor"});dojo.forEach(_943.fields,function(info,idx){info.x=idx+1;});_944.addSeries("Series A",_943.fields);break;case "columnchart":_944.addPlot("default",{type:"Columns",gap:3});_944.addAxis("y",{includeZero:true,vertical:true,fixUpper:"minor"});_944.addSeries("Series A",_943.fields);break;case "barchart":_944.addPlot("default",{type:"Bars",gap:3});_944.addAxis("x",{includeZero:true,fixUpper:"minor",minorLabels:false});_944.addAxis("y",{vertical:true,majorTicks:false,minorTicks:false,majorLabels:false,minorLabels:false});_944.addSeries("Series A",_943.fields);break;}this._action=new _8d3.charting.action2d.Tooltip(_944);_944.render();},_destroyFrame:function(){if(this._chart){this._chart.destroy();this._chart=null;}if(this._action){this._action.destroy();this._action=null;}dojo.attr(this._mediaFrame,"innerHTML","");},_imageLoaded:function(img,_946){var _947=img.height;if(_947<_946){var diff=Math.round((_946-_947)/2);dojo.style(img,"marginTop",diff+"px");}},_attListHandler:function(dfd,_948){if(dfd===this._dfd){this._dfd=null;var html="";if(!(_948 instanceof Error)&&_948&&_948.length){dojo.forEach(_948,function(info){html+=("<li>");html+=("<a href='"+info.url+"' target='_blank'>"+(info.name||"[No name]")+"</a>");html+=("</li>");});}dojo.attr(this._attachmentsList,"innerHTML",html||"<li>"+this._nls.NLS_noAttach+"</li>");}}});});},"dojox/widget/gauge/_Gauge":function(){define("dojox/widget/gauge/_Gauge",["dijit","dojo","dojox","dojo/require!dojox/gauges/_Gauge"],function(_949,dojo,_94a){dojo.provide("dojox.widget.gauge._Gauge");dojo.require("dojox.gauges._Gauge");_94a.widget.gauge._Gauge=_94a.gauges._Gauge;_94a.widget.gauge.Range=_94a.gauges.Range;_94a.widget.gauge._indicator=_94a.gauges._indicator;});},"dojox/charting/scaler/linear":function(){define("dojox/charting/scaler/linear",["dojo/_base/lang","./common"],function(lang,_94b){var _94c=lang.getObject("dojox.charting.scaler.linear",true);var _94d=3,_94e=_94b.getNumericLabel;function _94f(val,text){val=val.toLowerCase();for(var i=text.length-1;i>=0;--i){if(val===text[i]){return true;}}return false;};var _950=function(min,max,_951,_952,_953,_954,span){_951=lang.delegate(_951);if(!_952){if(_951.fixUpper=="major"){_951.fixUpper="minor";}if(_951.fixLower=="major"){_951.fixLower="minor";}}if(!_953){if(_951.fixUpper=="minor"){_951.fixUpper="micro";}if(_951.fixLower=="minor"){_951.fixLower="micro";}}if(!_954){if(_951.fixUpper=="micro"){_951.fixUpper="none";}if(_951.fixLower=="micro"){_951.fixLower="none";}}var _955=_94f(_951.fixLower,["major"])?Math.floor(_951.min/_952)*_952:_94f(_951.fixLower,["minor"])?Math.floor(_951.min/_953)*_953:_94f(_951.fixLower,["micro"])?Math.floor(_951.min/_954)*_954:_951.min,_956=_94f(_951.fixUpper,["major"])?Math.ceil(_951.max/_952)*_952:_94f(_951.fixUpper,["minor"])?Math.ceil(_951.max/_953)*_953:_94f(_951.fixUpper,["micro"])?Math.ceil(_951.max/_954)*_954:_951.max;if(_951.useMin){min=_955;}if(_951.useMax){max=_956;}var _957=(!_952||_951.useMin&&_94f(_951.fixLower,["major"]))?min:Math.ceil(min/_952)*_952,_958=(!_953||_951.useMin&&_94f(_951.fixLower,["major","minor"]))?min:Math.ceil(min/_953)*_953,_959=(!_954||_951.useMin&&_94f(_951.fixLower,["major","minor","micro"]))?min:Math.ceil(min/_954)*_954,_95a=!_952?0:(_951.useMax&&_94f(_951.fixUpper,["major"])?Math.round((max-_957)/_952):Math.floor((max-_957)/_952))+1,_95b=!_953?0:(_951.useMax&&_94f(_951.fixUpper,["major","minor"])?Math.round((max-_958)/_953):Math.floor((max-_958)/_953))+1,_95c=!_954?0:(_951.useMax&&_94f(_951.fixUpper,["major","minor","micro"])?Math.round((max-_959)/_954):Math.floor((max-_959)/_954))+1,_95d=_953?Math.round(_952/_953):0,_95e=_954?Math.round(_953/_954):0,_95f=_952?Math.floor(Math.log(_952)/Math.LN10):0,_960=_953?Math.floor(Math.log(_953)/Math.LN10):0,_961=span/(max-min);if(!isFinite(_961)){_961=1;}return {bounds:{lower:_955,upper:_956,from:min,to:max,scale:_961,span:span},major:{tick:_952,start:_957,count:_95a,prec:_95f},minor:{tick:_953,start:_958,count:_95b,prec:_960},micro:{tick:_954,start:_959,count:_95c,prec:0},minorPerMajor:_95d,microPerMinor:_95e,scaler:_94c};};return lang.mixin(_94c,{buildScaler:function(min,max,span,_962,_963,_964){var h={fixUpper:"none",fixLower:"none",natural:false};if(_962){if("fixUpper" in _962){h.fixUpper=String(_962.fixUpper);}if("fixLower" in _962){h.fixLower=String(_962.fixLower);}if("natural" in _962){h.natural=Boolean(_962.natural);}}_964=!_964||_964<_94d?_94d:_964;if("min" in _962){min=_962.min;}if("max" in _962){max=_962.max;}if(_962.includeZero){if(min>0){min=0;}if(max<0){max=0;}}h.min=min;h.useMin=true;h.max=max;h.useMax=true;if("from" in _962){min=_962.from;h.useMin=false;}if("to" in _962){max=_962.to;h.useMax=false;}if(max<=min){return _950(min,max,h,0,0,0,span);}if(!_963){_963=max-min;}var mag=Math.floor(Math.log(_963)/Math.LN10),_965=_962&&("majorTickStep" in _962)?_962.majorTickStep:Math.pow(10,mag),_966=0,_967=0,_968;if(_962&&("minorTickStep" in _962)){_966=_962.minorTickStep;}else{do{_966=_965/10;if(!h.natural||_966>0.9){_968=_950(min,max,h,_965,_966,0,span);if(_968.bounds.scale*_968.minor.tick>_964){break;}}_966=_965/5;if(!h.natural||_966>0.9){_968=_950(min,max,h,_965,_966,0,span);if(_968.bounds.scale*_968.minor.tick>_964){break;}}_966=_965/2;if(!h.natural||_966>0.9){_968=_950(min,max,h,_965,_966,0,span);if(_968.bounds.scale*_968.minor.tick>_964){break;}}return _950(min,max,h,_965,0,0,span);}while(false);}if(_962&&("microTickStep" in _962)){_967=_962.microTickStep;_968=_950(min,max,h,_965,_966,_967,span);}else{do{_967=_966/10;if(!h.natural||_967>0.9){_968=_950(min,max,h,_965,_966,_967,span);if(_968.bounds.scale*_968.micro.tick>_94d){break;}}_967=_966/5;if(!h.natural||_967>0.9){_968=_950(min,max,h,_965,_966,_967,span);if(_968.bounds.scale*_968.micro.tick>_94d){break;}}_967=_966/2;if(!h.natural||_967>0.9){_968=_950(min,max,h,_965,_966,_967,span);if(_968.bounds.scale*_968.micro.tick>_94d){break;}}_967=0;}while(false);}return _967?_968:_950(min,max,h,_965,_966,0,span);},buildTicks:function(_969,_96a){var step,next,tick,_96b=_969.major.start,_96c=_969.minor.start,_96d=_969.micro.start;if(_96a.microTicks&&_969.micro.tick){step=_969.micro.tick,next=_96d;}else{if(_96a.minorTicks&&_969.minor.tick){step=_969.minor.tick,next=_96c;}else{if(_969.major.tick){step=_969.major.tick,next=_96b;}else{return null;}}}var _96e=1/_969.bounds.scale;if(_969.bounds.to<=_969.bounds.from||isNaN(_96e)||!isFinite(_96e)||step<=0||isNaN(step)||!isFinite(step)){return null;}var _96f=[],_970=[],_971=[];while(next<=_969.bounds.to+_96e){if(Math.abs(_96b-next)<step/2){tick={value:_96b};if(_96a.majorLabels){tick.label=_94e(_96b,_969.major.prec,_96a);}_96f.push(tick);_96b+=_969.major.tick;_96c+=_969.minor.tick;_96d+=_969.micro.tick;}else{if(Math.abs(_96c-next)<step/2){if(_96a.minorTicks){tick={value:_96c};if(_96a.minorLabels&&(_969.minMinorStep<=_969.minor.tick*_969.bounds.scale)){tick.label=_94e(_96c,_969.minor.prec,_96a);}_970.push(tick);}_96c+=_969.minor.tick;_96d+=_969.micro.tick;}else{if(_96a.microTicks){_971.push({value:_96d});}_96d+=_969.micro.tick;}}next+=step;}return {major:_96f,minor:_970,micro:_971};},getTransformerFromModel:function(_972){var _973=_972.bounds.from,_974=_972.bounds.scale;return function(x){return (x-_973)*_974;};},getTransformerFromPlot:function(_975){var _976=_975.bounds.from,_977=_975.bounds.scale;return function(x){return x/_977+_976;};}});});},"dojox/grid/DataSelection":function(){define("dojox/grid/DataSelection",["dojo/_base/declare","./_SelectionPreserver","./Selection"],function(_978,_979,_97a){return _978("dojox.grid.DataSelection",_97a,{constructor:function(grid){if(grid.keepSelection){this.preserver=new _979(this);}},destroy:function(){if(this.preserver){this.preserver.destroy();}},getFirstSelected:function(){var idx=_97a.prototype.getFirstSelected.call(this);if(idx==-1){return null;}return this.grid.getItem(idx);},getNextSelected:function(_97b){var _97c=this.grid.getItemIndex(_97b);var idx=_97a.prototype.getNextSelected.call(this,_97c);if(idx==-1){return null;}return this.grid.getItem(idx);},getSelected:function(){var _97d=[];for(var i=0,l=this.selected.length;i<l;i++){if(this.selected[i]){_97d.push(this.grid.getItem(i));}}return _97d;},addToSelection:function(_97e){if(this.mode=="none"){return;}var idx=null;if(typeof _97e=="number"||typeof _97e=="string"){idx=_97e;}else{idx=this.grid.getItemIndex(_97e);}_97a.prototype.addToSelection.call(this,idx);},deselect:function(_97f){if(this.mode=="none"){return;}var idx=null;if(typeof _97f=="number"||typeof _97f=="string"){idx=_97f;}else{idx=this.grid.getItemIndex(_97f);}_97a.prototype.deselect.call(this,idx);},deselectAll:function(_980){var idx=null;if(_980||typeof _980=="number"){if(typeof _980=="number"||typeof _980=="string"){idx=_980;}else{idx=this.grid.getItemIndex(_980);}_97a.prototype.deselectAll.call(this,idx);}else{this.inherited(arguments);}}});});},"dojox/charting/plot2d/Bubble":function(){define("dojox/charting/plot2d/Bubble",["dojo/_base/lang","dojo/_base/declare","dojo/_base/array","./CartesianBase","./_PlotEvents","./common","dojox/lang/functional","dojox/lang/functional/reversed","dojox/lang/utils","dojox/gfx/fx"],function(lang,_981,arr,_982,_983,dc,df,dfr,du,fx){var _984=dfr.lambda("item.purgeGroup()");return _981("dojox.charting.plot2d.Bubble",[_982,_983],{defaultParams:{hAxis:"x",vAxis:"y",animate:null},optionalParams:{stroke:{},outline:{},shadow:{},fill:{},styleFunc:null,font:"",fontColor:""},constructor:function(_985,_986){this.opt=lang.clone(this.defaultParams);du.updateWithObject(this.opt,_986);du.updateWithPattern(this.opt,_986,this.optionalParams);this.series=[];this.hAxis=this.opt.hAxis;this.vAxis=this.opt.vAxis;this.animate=this.opt.animate;},render:function(dim,_987){if(this.zoom&&!this.isDataDirty()){return this.performZoom(dim,_987);}this.resetEvents();this.dirty=this.isDirty();if(this.dirty){arr.forEach(this.series,_984);this._eventSeries={};this.cleanGroup();var s=this.group;df.forEachRev(this.series,function(item){item.cleanGroup(s);});}var t=this.chart.theme,ht=this._hScaler.scaler.getTransformerFromModel(this._hScaler),vt=this._vScaler.scaler.getTransformerFromModel(this._vScaler),_988=this.events();for(var i=this.series.length-1;i>=0;--i){var run=this.series[i];if(!this.dirty&&!run.dirty){t.skip();this._reconnectEvents(run.name);continue;}run.cleanGroup();if(!run.data.length){run.dirty=false;t.skip();continue;}if(typeof run.data[0]=="number"){console.warn("dojox.charting.plot2d.Bubble: the data in the following series cannot be rendered as a bubble chart; ",run);continue;}var _989=t.next("circle",[this.opt,run]),s=run.group,_98a=arr.map(run.data,function(v,i){return v?{x:ht(v.x)+_987.l,y:dim.height-_987.b-vt(v.y),radius:this._vScaler.bounds.scale*(v.size/2)}:null;},this);var _98b=null,_98c=null,_98d=null,_98e=this.opt.styleFunc;var _98f=function(item){if(_98e){return t.addMixin(_989,"circle",[item,_98e(item)],true);}return t.addMixin(_989,"circle",item,true);};if(_989.series.shadow){_98d=arr.map(_98a,function(item,i){if(item!==null){var _990=_98f(run.data[i]),_991=_990.series.shadow;var _992=s.createCircle({cx:item.x+_991.dx,cy:item.y+_991.dy,r:item.radius}).setStroke(_991).setFill(_991.color);if(this.animate){this._animateBubble(_992,dim.height-_987.b,item.radius);}return _992;}return null;},this);if(_98d.length){run.dyn.shadow=_98d[_98d.length-1].getStroke();}}if(_989.series.outline){_98c=arr.map(_98a,function(item,i){if(item!==null){var _993=_98f(run.data[i]),_994=dc.makeStroke(_993.series.outline);_994.width=2*_994.width+_989.series.stroke.width;var _995=s.createCircle({cx:item.x,cy:item.y,r:item.radius}).setStroke(_994);if(this.animate){this._animateBubble(_995,dim.height-_987.b,item.radius);}return _995;}return null;},this);if(_98c.length){run.dyn.outline=_98c[_98c.length-1].getStroke();}}_98b=arr.map(_98a,function(item,i){if(item!==null){var _996=_98f(run.data[i]),rect={x:item.x-item.radius,y:item.y-item.radius,width:2*item.radius,height:2*item.radius};var _997=this._plotFill(_996.series.fill,dim,_987);_997=this._shapeFill(_997,rect);var _998=s.createCircle({cx:item.x,cy:item.y,r:item.radius}).setFill(_997).setStroke(_996.series.stroke);if(this.animate){this._animateBubble(_998,dim.height-_987.b,item.radius);}return _998;}return null;},this);if(_98b.length){run.dyn.fill=_98b[_98b.length-1].getFill();run.dyn.stroke=_98b[_98b.length-1].getStroke();}if(_988){var _999=new Array(_98b.length);arr.forEach(_98b,function(s,i){if(s!==null){var o={element:"circle",index:i,run:run,shape:s,outline:_98c&&_98c[i]||null,shadow:_98d&&_98d[i]||null,x:run.data[i].x,y:run.data[i].y,r:run.data[i].size/2,cx:_98a[i].x,cy:_98a[i].y,cr:_98a[i].radius};this._connectEvents(o);_999[i]=o;}},this);this._eventSeries[run.name]=_999;}else{delete this._eventSeries[run.name];}run.dirty=false;}this.dirty=false;return this;},_animateBubble:function(_99a,_99b,size){fx.animateTransform(lang.delegate({shape:_99a,duration:1200,transform:[{name:"translate",start:[0,_99b],end:[0,0]},{name:"scale",start:[0,1/size],end:[1,1]},{name:"original"}]},this.animate)).play();}});});},"url:dojox/form/resources/HorizontalRangeSlider.html":"<table class=\"dijit dijitReset dijitSlider dijitSliderH dojoxRangeSlider\" cellspacing=\"0\" cellpadding=\"0\" border=\"0\" rules=\"none\" dojoAttachEvent=\"onkeypress:_onKeyPress,onkeyup:_onKeyUp\" role=\"presentation\"\n\t><tr class=\"dijitReset\"\n\t\t><td class=\"dijitReset\" colspan=\"2\"></td\n\t\t><td dojoAttachPoint=\"topDecoration\" class=\"dijitReset dijitSliderDecoration dijitSliderDecorationT dijitSliderDecorationH\"></td\n\t\t><td class=\"dijitReset\" colspan=\"2\"></td\n\t></tr\n\t><tr class=\"dijitReset\"\n\t\t><td class=\"dijitReset dijitSliderButtonContainer dijitSliderButtonContainerH\"\n\t\t\t><div class=\"dijitSliderDecrementIconH\" tabIndex=\"-1\" style=\"display:none\" dojoAttachPoint=\"decrementButton\"><span class=\"dijitSliderButtonInner\">-</span></div\n\t\t></td\n\t\t><td class=\"dijitReset\"\n\t\t\t><div class=\"dijitSliderBar dijitSliderBumper dijitSliderBumperH dijitSliderLeftBumper\" dojoAttachEvent=\"onmousedown:_onClkDecBumper\"></div\n\t\t></td\n\t\t><td class=\"dijitReset\"\n\t\t\t><input dojoAttachPoint=\"valueNode\" type=\"hidden\" ${!nameAttrSetting}\n\t\t\t/><div role=\"presentation\" class=\"dojoxRangeSliderBarContainer\" dojoAttachPoint=\"sliderBarContainer\"\n\t\t\t\t><div dojoAttachPoint=\"sliderHandle\" tabIndex=\"${tabIndex}\" class=\"dijitSliderMoveable dijitSliderMoveableH\" dojoAttachEvent=\"onmousedown:_onHandleClick\" role=\"slider\"\n\t\t\t\t\t><div class=\"dijitSliderImageHandle dijitSliderImageHandleH\"></div\n\t\t\t\t></div\n\t\t\t\t><div role=\"presentation\" dojoAttachPoint=\"progressBar,focusNode\" class=\"dijitSliderBar dijitSliderBarH dijitSliderProgressBar dijitSliderProgressBarH\" dojoAttachEvent=\"onmousedown:_onBarClick\"></div\n\t\t\t\t><div dojoAttachPoint=\"sliderHandleMax\" tabIndex=\"${tabIndex}\" class=\"dijitSliderMoveable dijitSliderMoveableH\" dojoAttachEvent=\"onmousedown:_onHandleClickMax\" role=\"slider\"\n\t\t\t\t\t><div class=\"dijitSliderImageHandle dijitSliderImageHandleH\"></div\n\t\t\t\t></div\n\t\t\t\t><div role=\"presentation\" dojoAttachPoint=\"remainingBar\" class=\"dijitSliderBar dijitSliderBarH dijitSliderRemainingBar dijitSliderRemainingBarH\" dojoAttachEvent=\"onmousedown:_onRemainingBarClick\"></div\n\t\t\t></div\n\t\t></td\n\t\t><td class=\"dijitReset\"\n\t\t\t><div class=\"dijitSliderBar dijitSliderBumper dijitSliderBumperH dijitSliderRightBumper\" dojoAttachEvent=\"onmousedown:_onClkIncBumper\"></div\n\t\t></td\n\t\t><td class=\"dijitReset dijitSliderButtonContainer dijitSliderButtonContainerH\"\n\t\t\t><div class=\"dijitSliderIncrementIconH\" tabIndex=\"-1\" style=\"display:none\" dojoAttachPoint=\"incrementButton\"><span class=\"dijitSliderButtonInner\">+</span></div\n\t\t></td\n\t></tr\n\t><tr class=\"dijitReset\"\n\t\t><td class=\"dijitReset\" colspan=\"2\"></td\n\t\t><td dojoAttachPoint=\"containerNode,bottomDecoration\" class=\"dijitReset dijitSliderDecoration dijitSliderDecorationB dijitSliderDecorationH\"></td\n\t\t><td class=\"dijitReset\" colspan=\"2\"></td\n\t></tr\n></table>\n","dijit/form/_DateTimeTextBox":function(){require({cache:{"url:dijit/form/templates/DropDownBox.html":"<div class=\"dijit dijitReset dijitInline dijitLeft\"\n\tid=\"widget_${id}\"\n\trole=\"combobox\"\n\t><div class='dijitReset dijitRight dijitButtonNode dijitArrowButton dijitDownArrowButton dijitArrowButtonContainer'\n\t\tdata-dojo-attach-point=\"_buttonNode, _popupStateNode\" role=\"presentation\"\n\t\t><input class=\"dijitReset dijitInputField dijitArrowButtonInner\" value=\"&#9660; \" type=\"text\" tabIndex=\"-1\" readonly=\"readonly\" role=\"presentation\"\n\t\t\t${_buttonInputDisabled}\n\t/></div\n\t><div class='dijitReset dijitValidationContainer'\n\t\t><input class=\"dijitReset dijitInputField dijitValidationIcon dijitValidationInner\" value=\"&#935; \" type=\"text\" tabIndex=\"-1\" readonly=\"readonly\" role=\"presentation\"\n\t/></div\n\t><div class=\"dijitReset dijitInputField dijitInputContainer\"\n\t\t><input class='dijitReset dijitInputInner' ${!nameAttrSetting} type=\"text\" autocomplete=\"off\"\n\t\t\tdata-dojo-attach-point=\"textbox,focusNode\" role=\"textbox\" aria-haspopup=\"true\"\n\t/></div\n></div>\n"}});define("dijit/form/_DateTimeTextBox",["dojo/date","dojo/date/locale","dojo/date/stamp","dojo/_base/declare","dojo/_base/lang","./RangeBoundTextBox","../_HasDropDown","dojo/text!./templates/DropDownBox.html"],function(date,_99c,_99d,_99e,lang,_99f,_9a0,_9a1){new Date("X");var _9a2=_99e("dijit.form._DateTimeTextBox",[_99f,_9a0],{templateString:_9a1,hasDownArrow:true,cssStateNodes:{"_buttonNode":"dijitDownArrowButton"},pattern:_99c.regexp,datePackage:"",postMixInProperties:function(){this.inherited(arguments);this._set("type","text");},compare:function(val1,val2){var _9a3=this._isInvalidDate(val1);var _9a4=this._isInvalidDate(val2);return _9a3?(_9a4?0:-1):(_9a4?1:date.compare(val1,val2,this._selector));},forceWidth:true,format:function(_9a5,_9a6){if(!_9a5){return "";}return this.dateLocaleModule.format(_9a5,_9a6);},"parse":function(_9a7,_9a8){return this.dateLocaleModule.parse(_9a7,_9a8)||(this._isEmpty(_9a7)?null:undefined);},serialize:function(val,_9a9){if(val.toGregorian){val=val.toGregorian();}return _99d.toISOString(val,_9a9);},dropDownDefaultValue:new Date(),value:new Date(""),_blankValue:null,popupClass:"",_selector:"",constructor:function(_9aa){this.dateModule=_9aa.datePackage?lang.getObject(_9aa.datePackage,false):date;this.dateClassObj=this.dateModule.Date||Date;this.dateLocaleModule=_9aa.datePackage?lang.getObject(_9aa.datePackage+".locale",false):_99c;this._set("pattern",this.dateLocaleModule.regexp);this._invalidDate=this.constructor.prototype.value.toString();},buildRendering:function(){this.inherited(arguments);if(!this.hasDownArrow){this._buttonNode.style.display="none";}if(!this.hasDownArrow){this._buttonNode=this.domNode;this.baseClass+=" dijitComboBoxOpenOnClick";}},_setConstraintsAttr:function(_9ab){_9ab.selector=this._selector;_9ab.fullYear=true;var _9ac=_99d.fromISOString;if(typeof _9ab.min=="string"){_9ab.min=_9ac(_9ab.min);}if(typeof _9ab.max=="string"){_9ab.max=_9ac(_9ab.max);}this.inherited(arguments);},_isInvalidDate:function(_9ad){return !_9ad||isNaN(_9ad)||typeof _9ad!="object"||_9ad.toString()==this._invalidDate;},_setValueAttr:function(_9ae,_9af,_9b0){if(_9ae!==undefined){if(typeof _9ae=="string"){_9ae=_99d.fromISOString(_9ae);}if(this._isInvalidDate(_9ae)){_9ae=null;}if(_9ae instanceof Date&&!(this.dateClassObj instanceof Date)){_9ae=new this.dateClassObj(_9ae);}}this.inherited(arguments);if(this.value instanceof Date){this.filterString="";}if(this.dropDown){this.dropDown.set("value",_9ae,false);}},_set:function(attr,_9b1){if(attr=="value"&&this.value instanceof Date&&this.compare(_9b1,this.value)==0){return;}this.inherited(arguments);},_setDropDownDefaultValueAttr:function(val){if(this._isInvalidDate(val)){val=new this.dateClassObj();}this.dropDownDefaultValue=val;},openDropDown:function(_9b2){if(this.dropDown){this.dropDown.destroy();}var _9b3=lang.isString(this.popupClass)?lang.getObject(this.popupClass,false):this.popupClass,_9b4=this,_9b5=this.get("value");this.dropDown=new _9b3({onChange:function(_9b6){_9b4.set("value",_9b6,true);},id:this.id+"_popup",dir:_9b4.dir,lang:_9b4.lang,value:_9b5,currentFocus:!this._isInvalidDate(_9b5)?_9b5:this.dropDownDefaultValue,constraints:_9b4.constraints,filterString:_9b4.filterString,datePackage:_9b4.params.datePackage,isDisabledDate:function(date){return !_9b4.rangeCheck(date,_9b4.constraints);}});this.inherited(arguments);},_getDisplayedValueAttr:function(){return this.textbox.value;},_setDisplayedValueAttr:function(_9b7,_9b8){this._setValueAttr(this.parse(_9b7,this.constraints),_9b8,_9b7);}});return _9a2;});},"dojox/gfx/Moveable":function(){define("dojox/gfx/Moveable",["dojo/_base/lang","dojo/_base/declare","dojo/_base/array","dojo/_base/event","dojo/topic","dojo/touch","dojo/dom-class","dojo/_base/window","./Mover","dojo/mouse"],function(lang,_9b9,arr,_9ba,_9bb,_9bc,_9bd,win,_9be,_9bf){return _9b9("dojox.gfx.Moveable",null,{constructor:function(_9c0,_9c1){this.shape=_9c0;this.delay=(_9c1&&_9c1.delay>0)?_9c1.delay:0;this.mover=(_9c1&&_9c1.mover)?_9c1.mover:_9be;this.leftButtonOnly=_9c1&&_9c1.leftButtonOnly;this.events=[this.shape.connect(_9bc.press,this,"onMouseDown")];},destroy:function(){arr.forEach(this.events,this.shape.disconnect,this.shape);this.events=this.shape=null;},onMouseDown:function(e){if(this.delay){this.events.push(this.shape.connect(_9bc.move,this,"onMouseMove"),this.shape.connect(_9bc.release,this,"onMouseUp"));this._lastX=e.clientX;this._lastY=e.clientY;}else{if(!this.leftButtonOnly||_9bf.isLeft(e)){new this.mover(this.shape,e,this);}}_9ba.stop(e);},onMouseMove:function(e){if(Math.abs(e.clientX-this._lastX)>this.delay||Math.abs(e.clientY-this._lastY)>this.delay){this.onMouseUp(e);new this.mover(this.shape,e,this);}_9ba.stop(e);},onMouseUp:function(e){this.shape.disconnect(this.events.pop());this.shape.disconnect(this.events.pop());this.shape.disconnect(this.events.pop());this.shape.disconnect(this.events.pop());},onMoveStart:function(_9c2){_9bb.publish("/gfx/move/start",_9c2);_9bd.add(win.body(),"dojoMove");},onMoveStop:function(_9c3){_9bb.publish("/gfx/move/stop",_9c3);_9bd.remove(win.body(),"dojoMove");},onFirstMove:function(_9c4){},onMove:function(_9c5,_9c6){this.onMoving(_9c5,_9c6);this.shape.applyLeftTransform(_9c6);this.onMoved(_9c5,_9c6);},onMoving:function(_9c7,_9c8){},onMoved:function(_9c9,_9ca){}});});},"url:dijit/templates/ProgressBar.html":"<div class=\"dijitProgressBar dijitProgressBarEmpty\" role=\"progressbar\"\n\t><div  data-dojo-attach-point=\"internalProgress\" class=\"dijitProgressBarFull\"\n\t\t><div class=\"dijitProgressBarTile\" role=\"presentation\"></div\n\t\t><span style=\"visibility:hidden\">&#160;</span\n\t></div\n\t><div data-dojo-attach-point=\"labelNode\" class=\"dijitProgressBarLabel\" id=\"${id}_label\"></div\n\t><img data-dojo-attach-point=\"indeterminateHighContrastImage\" class=\"dijitProgressBarIndeterminateHighContrastImage\" alt=\"\"\n/></div>\n","esri/dijit/editing/tools/DropDownToolBase":function(){define("esri/dijit/editing/tools/DropDownToolBase",["dijit","dojo","dojox","dojo/require!dijit/form/ComboButton,esri/dijit/editing/tools/ToolBase"],function(_9cb,dojo,_9cc){dojo.provide("esri.dijit.editing.tools.DropDownToolBase");dojo.require("dijit.form.ComboButton");dojo.require("esri.dijit.editing.tools.ToolBase");dojo.declare("esri.dijit.editing.tools.DropDownToolBase",[_9cb.form.ComboButton,esri.dijit.editing.tools.ToolBase],{_enabled:false,_checked:false,postCreate:function(){this._tools=[];this._createTools();this.inherited(arguments);if(this._setShowLabelAttr){this._setShowLabelAttr(false);}},destroy:function(){var _9cd=this._tools;for(var tool in _9cd){if(_9cd.hasOwnProperty(tool)&&esri._isDefined(_9cd[tool])){_9cd[tool].destroy();}}this.inherited(arguments);},_createTools:function(){var mnu=new _9cb.Menu();this.dropDown=mnu;for(var i in this._tools){if(this._tools.hasOwnProperty(i)){mnu.addChild(this._tools[i]);}}this._activeTool=mnu.getChildren()[0];this._updateUI();},activate:function(_9ce){this.inherited(arguments);if(!this._activeTool){this._activateDefaultTool();}else{this._activeTool.activate();}},deactivate:function(){this.inherited(arguments);if(this._activeTool){this._activeTool.deactivate();}},enable:function(_9cf){for(var tool in this._tools){if(this._tools.hasOwnProperty(tool)){this._tools[tool].enable(_9cf);}}this.setEnabled(true);this.inherited(arguments);},setChecked:function(_9d0){this._checked=_9d0;this._updateUI();},_onDrawEnd:function(_9d1){},onLayerChange:function(_9d2,type,_9d3){this._activeTool=null;this._activeType=type;this._activeTemplate=_9d3;this._activeLayer=_9d2;},onItemClicked:function(evt){if(this._activeTool){this._activeTool.deactivate();}this._activeTool=_9cb.byId(evt.currentTarget.id);if(this._checked===false){this._onClick();}else{this._updateUI();if(this._activeTool){this._activeTool.activate();this._activeTool.setChecked(true);}}},_onClick:function(evt){if(this._enabled===false){return;}this._checked=!this._checked;this.inherited(arguments);},_updateUI:function(){this.attr("disabled",!this._enabled);dojo.style(this.focusNode,{outline:"none"});dojo.style(this.titleNode,{padding:"0px",border:"none"});if(this._checked){dojo.style(this.titleNode,{backgroundColor:"#D4DFF2",border:"1px solid #316AC5"});}else{dojo.style(this.titleNode,{backgroundColor:"",border:""});}if(this._activeTool){this.attr("iconClass",this._checked?this._activeTool._enabledIcon:this._activeTool._disabledIcon);this.attr("label",this._activeTool.label);}}});});},"esri/tasks/PrintTask":function(){define("esri/tasks/PrintTask",["dijit","dojo","dojox","dojo/require!esri/tasks/_task,esri/tasks/gp"],function(_9d4,dojo,_9d5){dojo.provide("esri.tasks.PrintTask");dojo.require("esri.tasks._task");dojo.require("esri.tasks.gp");dojo.declare("esri.tasks.PrintTask",esri.tasks._Task,{constructor:function(url,_9d6){this.url=url;this.printGp=new esri.tasks.Geoprocessor(this.url);this._handler=dojo.hitch(this,this._handler);if(_9d6&&_9d6.async){this.async=_9d6.async;}},_handler:function(_9d7,io,_9d8,_9d9,dfd){try{var _9da;if(this.async){if(_9d7.jobStatus==="esriJobSucceeded"){this.printGp.getResultData(_9d7.jobId,"Output_File",dojo.hitch(this,function(_9db){_9da=_9db.value;this._successHandler([_9da],"onComplete",_9d8,dfd);}));}}else{_9da=_9d7[0].value;this._successHandler([_9da],"onComplete",_9d8,dfd);}}catch(err){this._errorHandler(err,_9d9,dfd);}},execute:function(_9dc,_9dd,_9de){var _9df=this._handler,_9e0=this._errorHandler;var _9e1=_9dc.template||new esri.tasks.PrintTemplate();var _9e2=_9e1.exportOptions;var _9e3;if(_9e2){var _9e4=_9e2.width;var _9e5=_9e2.height;var dpi=_9e2.dpi;_9e3={outputSize:[_9e4,_9e5],dpi:dpi};}if(_9e1.preserveScale===false){this._preserveScale=false;}else{this._preserveScale=true;}var _9e6=_9e1.layoutOptions;var _9e7,_9e8=[];if(_9e6){this.legendAll=false;if(!_9e6.legendLayers){this.legendAll=true;}else{dojo.forEach(_9e6.legendLayers,function(_9e9,idx){var _9ea={};_9ea.id=_9e9.layerId;if(_9e9.subLayerIds){_9ea.subLayerIds=_9e9.subLayerIds;}_9e8.push(_9ea);});}var _9eb,_9ec;if(_9e6.scalebarUnit==="Miles"||_9e6.scalebarUnit==="Kilometers"){_9eb="Kilometers";_9ec="Miles";}else{if(_9e6.scalebarUnit==="Meters"||_9e6.scalebarUnit==="Feet"){_9eb="Meters";_9ec="Feet";}}var _9ed={Miles:"mi",Kilometers:"km",Yards:"yd",Feet:"ft",Meters:"m"};_9e7={titleText:_9e6.titleText,authorText:_9e6.authorText,copyrightText:_9e6.copyrightText,customTextElements:_9e6.customTextElements,scaleBarOptions:{metricUnit:_9eb,metricLabel:_9ed[_9eb],nonMetricUnit:_9ec,nonMetricLabel:_9ed[_9ec]},legendOptions:{operationalLayers:_9e8}};}var map=_9dc.map;var _9ee=this._getPrintDefinition(map);if(_9dc.outSpatialReference){_9ee.mapOptions.spatialReference=_9dc.outSpatialReference.toJson();}if(esri._isDefined(_9dc.template.showAttribution)){_9ee.mapOptions.showAttribution=_9dc.template.showAttribution;}dojo.mixin(_9ee,{exportOptions:_9e3,layoutOptions:_9e7});if(this.allLayerslegend){dojo.mixin(_9ee.layoutOptions,{legendOptions:{operationalLayers:this.allLayerslegend}});}var _9ef=dojo.toJson(esri._sanitize(_9ee));var _9f0=_9e1.format;var _9f1=_9e1.layout;var _9f2={Web_Map_as_JSON:_9ef,Format:_9f0,Layout_Template:_9f1};if(_9dc.extraParameters){_9f2=dojo.mixin(_9f2,_9dc.extraParameters);}var dfd=new dojo.Deferred(esri._dfdCanceller);var load=function(r,i){_9df(r,i,_9dd,_9de,dfd);};var _9f3=function(r){_9e0(r,_9de,dfd);};if(this.async){dfd._pendingDfd=this.printGp.submitJob(_9f2,load,null,_9f3);}else{dfd._pendingDfd=this.printGp.execute(_9f2,load,_9f3);}return dfd;},onComplete:function(){},_multipointLayer:function(){this.layerDefinition={name:"multipointLayer",geometryType:"esriGeometryMultipoint",drawingInfo:{renderer:null}};this.featureSet={geometryType:"esriGeometryMultipoint",features:[]};},_polygonLayer:function(){this.layerDefinition={name:"polygonLayer",geometryType:"esriGeometryPolygon",drawingInfo:{renderer:null}};this.featureSet={geometryType:"esriGeometryPolygon",features:[]};},_pointLayer:function(){this.layerDefinition={name:"pointLayer",geometryType:"esriGeometryPoint",drawingInfo:{renderer:null}};this.featureSet={geometryType:"esriGeometryPoint",features:[]};},_polylineLayer:function(){this.layerDefinition={name:"polylineLayer",geometryType:"esriGeometryPolyline",drawingInfo:{renderer:null}};this.featureSet={geometryType:"esriGeometryPolyline",features:[]};},_createFeatureCollection:function(_9f4){var _9f5=new this._polygonLayer();var _9f6=new this._polylineLayer();var _9f7=new this._pointLayer();var _9f8=new this._multipointLayer();if(_9f4.declaredClass==="esri.layers.FeatureLayer"){_9f5.layerDefinition.name=_9f6.layerDefinition.name=_9f7.layerDefinition.name=_9f8.layerDefinition.name=_9f4.name||_9f4.id;}var _9f9,i;for(i=0;i<_9f4.graphics.length;i++){var g=_9f4.graphics[i];if(g.visible===false||!g.geometry){continue;}_9f9=g.toJson();if(_9f9.symbol&&_9f9.symbol.outline&&_9f9.symbol.outline.color&&_9f9.symbol.outline.color[3]){_9f9.symbol.outline.color[3]=255;}if(g.geometry.type==="polygon"){_9f5.featureSet.features.push(_9f9);if(_9f4.renderer){_9f5.layerDefinition.drawingInfo.renderer=_9f4.renderer.toJson();}else{delete _9f5.layerDefinition.drawingInfo;}if(_9f4.fields){_9f5.layerDefinition.fields=_9f4.fields;}}else{if(g.geometry.type==="polyline"){_9f6.featureSet.features.push(_9f9);if(_9f4.renderer){_9f6.layerDefinition.drawingInfo.renderer=_9f4.renderer.toJson();}else{delete _9f6.layerDefinition.drawingInfo;}if(_9f4.fields){_9f6.layerDefinition.fields=_9f4.fields;}}else{if(g.geometry.type==="point"){_9f7.featureSet.features.push(_9f9);if(_9f4.renderer){_9f7.layerDefinition.drawingInfo.renderer=_9f4.renderer.toJson();}else{delete _9f7.layerDefinition.drawingInfo;}if(_9f4.fields){_9f7.layerDefinition.fields=_9f4.fields;}}else{if(g.geometry.type==="multipoint"){_9f8.featureSet.features.push(_9f9);if(_9f4.renderer){_9f8.layerDefinition.drawingInfo.renderer=_9f4.renderer.toJson();}else{delete _9f8.layerDefinition.drawingInfo;}if(_9f4.fields){_9f8.layerDefinition.fields=_9f4.fields;}}}}}}var _9fa=[];if(_9f7.featureSet.features.length>0){_9fa.push(_9f7);}if(_9f6.featureSet.features.length>0){_9fa.push(_9f6);}if(_9f5.featureSet.features.length>0){_9fa.push(_9f5);}if(_9f8.featureSet.features.length>0){_9fa.push(_9f8);}var _9fb={layers:_9fa};var _9fc={id:_9f4.id,opacity:_9f4.opacity,minScale:_9f4.minScale||0,maxScale:_9f4.maxScale||0,featureCollection:_9fb};return _9fc;},_getPrintDefinition:function(map){var _9fd=this._createOperationalLayers(map);var _9fe={operationalLayers:_9fd};var _9ff=map.extent,sr=map.spatialReference;if(map.spatialReference._isWrappable()){_9ff=_9ff._normalize(true);sr=_9ff.spatialReference;}var _a00={mapOptions:{showAttribution:map.showAttribution,extent:_9ff.toJson(),spatialReference:sr.toJson()}};if(this._preserveScale){dojo.mixin(_a00.mapOptions,{scale:esri.geometry.getScale(map)});}if(map.timeExtent){dojo.mixin(_a00.mapOptions,{time:[map.timeExtent.startTime.getTime(),map.timeExtent.endTime.getTime()]});}var _a01={};dojo.mixin(_a01,_a00,_9fe);return _a01;},_createOperationalLayers:function(map){var i,_a02,_a03,_a04,_a05=[],_a06=[];if(this.legendAll){this.allLayerslegend=[];}else{this.allLayerslegend=null;}for(i=0;i<map.layerIds.length;i++){_a02=map.getLayer(map.layerIds[i]);if(!_a02.loaded||!_a02.visible||dojo.indexOf(_a05,_a02.id)!==-1){continue;}if(_a02.credential&&_a02.url.indexOf("token=")===-1){_a02.url+="?token="+_a02.credential.token;}_a03=_a02.declaredClass;_a04={id:_a02.id,title:_a02.id,opacity:_a02.opacity,minScale:_a02.minScale||0,maxScale:_a02.maxScale||0};switch(_a03){case "esri.layers.ArcGISDynamicMapServiceLayer":var _a07=[];if(_a02._params.dynamicLayers){var _a08=dojo.fromJson(_a02._params.dynamicLayers);dojo.forEach(_a08,function(_a09,idx){_a07.push({id:_a09.id,layerDefinition:_a09});});}else{dojo.forEach(_a02.layerInfos,function(_a0a,idx){var _a0b={id:_a0a.id,layerDefinition:{definitionExpression:null,layerTimeOptions:null}};if(_a02.layerDefinitions&&_a02.layerDefinitions[_a0a.id]){_a0b.layerDefinition.definitionExpression=_a02.layerDefinitions[_a0a.id];}if(_a02.layerTimeOptions&&_a02.layerTimeOptions[_a0a.id]){_a0b.layerDefinition.layerTimeOptions=_a02.layerTimeOptions[_a0a.id];}if(_a0b.layerDefinition.definitionExpression||_a0b.layerDefinition.layerTimeOptions){_a07.push(_a0b);}});}var _a0c=_a02._params.layers?_a02.visibleLayers:null;_a04=dojo.mixin(_a04,{url:_a02.url,visibleLayers:_a0c,layers:_a07});_a06.push(_a04);if(this.allLayerslegend){this.allLayerslegend.push({id:_a02.id,subLayerIds:_a02.visibleLayers});}break;case "esri.layers.ArcGISImageServiceLayer":_a04=dojo.mixin(_a04,{url:_a02.url,bandIds:_a02.bandIds,compressionQuality:_a02.compressionQuality,format:_a02.format,interpolation:_a02.interpolation});if(_a02.mosaicRule){dojo.mixin(_a04,{mosaicRule:_a02.mosaicRule.toJson()});}if(_a02.renderingRule){dojo.mixin(_a04,{renderingRule:_a02.renderingRule.toJson()});}_a06.push(_a04);if(this.allLayerslegend){this.allLayerslegend.push({id:_a02.id});}break;case "esri.layers.WMSLayer":_a04=dojo.mixin(_a04,{url:_a02.url,title:_a02.title,type:"wms",version:_a02.version,transparentBackground:_a02.imageTransparency,visibleLayers:_a02.visibleLayers});_a06.push(_a04);if(this.allLayerslegend){this.allLayerslegend.push({id:_a02.id,subLayerIds:_a02.visibleLayers});}break;case "esri.virtualearth.VETiledLayer":var _a0d=_a02.mapStyle;if(_a0d==="aerialWithLabels"){_a0d="Hybrid";}_a04=dojo.mixin(_a04,{visibility:_a02.visible,type:"BingMaps"+_a0d,culture:_a02.culture});_a06.push(_a04);break;case "esri.layers.OpenStreetMapLayer":_a04=dojo.mixin(_a04,{type:"OpenStreetMap",url:_a02.tileServers[0]});_a06.push(_a04);break;case "esri.layers.WMTSLayer":_a04=dojo.mixin(_a04,{url:_a02.url,type:"wmts",layer:_a02.layerInfos[0].identifier,style:_a02.layerInfos[0].style,format:_a02.layerInfos[0].format,tileMatrixSet:_a02.layerInfos[0].tileMatrixSet});_a06.push(_a04);break;case "esri.layers.MapImageLayer":var _a0e=_a02.getImages();dojo.forEach(_a0e,function(_a0f,idx){if(_a0f.href){_a04={id:_a02.id+"_image"+idx,type:"image",title:_a02.id,minScale:_a02.minScale||0,maxScale:_a02.maxScale||0,opacity:_a02.opacity,extent:_a0f.extent.toJson(),url:_a0f.href};_a06.push(_a04);}});break;default:if(_a02 instanceof esri.layers.TiledMapServiceLayer||_a02 instanceof esri.layers.DynamicMapServiceLayer){_a04=dojo.mixin(_a04,{url:_a02.url});_a06.push(_a04);}}}for(i=0;i<map.graphicsLayerIds.length;i++){_a02=map.getLayer(map.graphicsLayerIds[i]);if(!_a02.loaded||!_a02.visible||dojo.indexOf(_a05,_a02.id)!==-1){continue;}_a03=_a02.declaredClass;switch(_a03){case "esri.layers.FeatureLayer":if(_a02.url){if(_a02.credential&&_a02.url.indexOf("token=")===-1){_a02.url+="?token="+_a02.credential.token;}_a04={id:_a02.id,url:_a02.url,title:_a02.id,opacity:_a02.opacity,minScale:_a02.minScale||0,maxScale:_a02.maxScale||0,layerDefinition:{drawingInfo:{renderer:_a02.renderer.toJson()}}};if(_a02.getDefinitionExpression()){dojo.mixin(_a04.layerDefinition,{definitionExpression:_a02.getDefinitionExpression()});}if(_a02.mode!==2){if(_a02.getSelectedFeatures().length>0){var _a10=dojo.map(_a02.getSelectedFeatures(),function(_a11){return _a11.attributes[_a02.objectIdField];});if(_a10.length>0&&_a02.getSelectionSymbol()){dojo.mixin(_a04,{selectionObjectIds:_a10,selectionSymbol:_a02.getSelectionSymbol().toJson()});}}}else{var _a12=dojo.map(_a02.getSelectedFeatures(),function(_a13){return _a13.attributes[_a02.objectIdField];});if(_a12.length===0||!_a02._params.drawMode){break;}dojo.mixin(_a04.layerDefinition,{objectIds:_a12});var _a14=null;if(_a02.getSelectionSymbol()){_a14=new esri.renderer.SimpleRenderer(_a02.getSelectionSymbol());}dojo.mixin(_a04.layerDefinition.drawingInfo,{renderer:_a14&&_a14.toJson()});}}else{_a04=this._createFeatureCollection(_a02);}_a06.push(_a04);if(this.allLayerslegend){this.allLayerslegend.push({id:_a02.id});}break;case "esri.layers.GraphicsLayer":_a04=this._createFeatureCollection(_a02);_a06.push(_a04);if(this.allLayerslegend){this.allLayerslegend.push({id:_a02.id});}break;default:}}if(map.graphics&&map.graphics.graphics.length>0){_a04=this._createFeatureCollection(map.graphics);_a06.push(_a04);}return _a06;}});dojo.declare("esri.tasks.PrintParameters",null,{map:null,template:null,outSpatialReference:null,extraParameters:null});dojo.declare("esri.tasks.PrintTemplate",null,{label:null,exportOptions:{width:800,height:1100,dpi:96},layoutOptions:null,format:"PNG32",layout:"MAP_ONLY",preserveScale:true,showAttribution:null});dojo.declare("esri.tasks.LegendLayer",null,{layerId:null,subLayerIds:null});});},"esri/dijit/editing/Util":function(){define("esri/dijit/editing/Util",["dijit","dojo","dojox","dojo/require!dojo/DeferredList"],function(_a15,dojo,_a16){dojo.provide("esri.dijit.editing.Util");dojo.require("dojo.DeferredList");esri.dijit.editing.Util.LayerHelper={findFeatures:function(ids,_a17,_a18){var _a19=_a17.objectIdField;var _a1a=_a17.graphics;var _a1b=dojo.filter(_a1a,function(_a1c){return dojo.some(ids,function(id){return _a1c.attributes[_a19]===id.objectId;});});if(_a18){_a18(_a1b);}else{return _a1b;}},getSelection:function(_a1d){var _a1e=[];dojo.forEach(_a1d,function(_a1f){var _a20=_a1f.getSelectedFeatures();dojo.forEach(_a20,function(_a21){_a1e.push(_a21);});});return _a1e;}};});},"dojox/gauges/AnalogIndicatorBase":function(){define("dojox/gauges/AnalogIndicatorBase",["dojo/_base/lang","dojo/_base/declare","dojo/_base/connect","dojo/_base/fx","dojox/gfx","./_Indicator"],function(lang,_a22,_a23,fx,gfx,_a24){return _a22("dojox.gauges.AnalogIndicatorBase",[_a24],{draw:function(_a25,_a26){if(this.shape){this._move(_a26);}else{if(this.text){this.text.parent.remove(this.text);this.text=null;}var a=this._gauge._getAngle(Math.min(Math.max(this.value,this._gauge.min),this._gauge.max));this.color=this.color||"#000000";this.length=this.length||this._gauge.radius;this.width=this.width||1;this.offset=this.offset||0;this.highlight=this.highlight||"#D0D0D0";var _a27=this._getShapes(_a25,this._gauge,this);if(_a27){if(_a27.length>1){this.shape=_a25.createGroup();for(var s=0;s<_a27.length;s++){this.shape.add(_a27[s]);}}else{this.shape=_a27[0];}this.shape.setTransform([{dx:this._gauge.cx,dy:this._gauge.cy},gfx.matrix.rotateg(a)]);this.shape.connect("onmouseover",this,this.handleMouseOver);this.shape.connect("onmouseout",this,this.handleMouseOut);this.shape.connect("onmousedown",this,this.handleMouseDown);this.shape.connect("touchstart",this,this.handleTouchStart);}if(this.label){var _a28=this.direction;if(!_a28){_a28="outside";}var len;if(_a28=="inside"){len=-this.length+this.offset-5;}else{len=this.length+this.offset+5;}var rad=this._gauge._getRadians(90-a);this._layoutLabel(_a25,this.label+"",this._gauge.cx,this._gauge.cy,len,rad,_a28);}this.currentValue=this.value;}},_layoutLabel:function(_a29,txt,ox,oy,lrad,_a2a,_a2b){var font=this.font?this.font:gfx.defaultFont;var box=gfx._base._getTextBox(txt,{font:gfx.makeFontString(gfx.makeParameters(gfx.defaultFont,font))});var tw=box.w;var fz=font.size;var th=gfx.normalizedLength(fz);var tfx=ox+Math.cos(_a2a)*lrad-tw/2;var tfy=oy-Math.sin(_a2a)*lrad-th/2;var side;var _a2c=[];side=tfx;var ipx=side;var ipy=-Math.tan(_a2a)*side+oy+Math.tan(_a2a)*ox;if(ipy>=tfy&&ipy<=tfy+th){_a2c.push({x:ipx,y:ipy});}side=tfx+tw;ipx=side;ipy=-Math.tan(_a2a)*side+oy+Math.tan(_a2a)*ox;if(ipy>=tfy&&ipy<=tfy+th){_a2c.push({x:ipx,y:ipy});}side=tfy;ipx=-1/Math.tan(_a2a)*side+ox+1/Math.tan(_a2a)*oy;ipy=side;if(ipx>=tfx&&ipx<=tfx+tw){_a2c.push({x:ipx,y:ipy});}side=tfy+th;ipx=-1/Math.tan(_a2a)*side+ox+1/Math.tan(_a2a)*oy;ipy=side;if(ipx>=tfx&&ipx<=tfx+tw){_a2c.push({x:ipx,y:ipy});}var dif;if(_a2b=="inside"){for(var it=0;it<_a2c.length;it++){var ip=_a2c[it];dif=this._distance(ip.x,ip.y,ox,oy)-lrad;if(dif>=0){tfx=ox+Math.cos(_a2a)*(lrad-dif)-tw/2;tfy=oy-Math.sin(_a2a)*(lrad-dif)-th/2;break;}}}else{for(it=0;it<_a2c.length;it++){ip=_a2c[it];dif=this._distance(ip.x,ip.y,ox,oy)-lrad;if(dif<=0){tfx=ox+Math.cos(_a2a)*(lrad-dif)-tw/2;tfy=oy-Math.sin(_a2a)*(lrad-dif)-th/2;break;}}}this.text=this._gauge.drawText(_a29,txt,tfx+tw/2,tfy+th,"middle",this.color,this.font);},_distance:function(x1,y1,x2,y2){return Math.sqrt((x2-x1)*(x2-x1)+(y2-y1)*(y2-y1));},_move:function(_a2d){var v=Math.min(Math.max(this.value,this._gauge.min),this._gauge.max),c=this.currentValue;if(_a2d){var _a2e=this._gauge._getAngle(v);this.shape.setTransform([{dx:this._gauge.cx,dy:this._gauge.cy},gfx.matrix.rotateg(_a2e)]);this.currentValue=v;}else{if(c!=v){var anim=new fx.Animation({curve:[c,v],duration:this.duration,easing:this.easing});_a23.connect(anim,"onAnimate",lang.hitch(this,function(step){this.shape.setTransform([{dx:this._gauge.cx,dy:this._gauge.cy},gfx.matrix.rotateg(this._gauge._getAngle(step))]);this.currentValue=step;}));anim.play();}}}});});},"url:dijit/templates/Menu.html":"<table class=\"dijit dijitMenu dijitMenuPassive dijitReset dijitMenuTable\" role=\"menu\" tabIndex=\"${tabIndex}\"\n\t   data-dojo-attach-event=\"onkeypress:_onKeyPress\" cellspacing=\"0\">\n\t<tbody class=\"dijitReset\" data-dojo-attach-point=\"containerNode\"></tbody>\n</table>\n","esri/dijit/editing/editOperation":function(){define("esri/dijit/editing/editOperation",["dijit","dojo","dojox","dojo/require!esri/undoManager"],function(_a2f,dojo,_a30){dojo.provide("esri.dijit.editing.editOperation");dojo.require("esri.undoManager");dojo.declare("esri.dijit.editing.Add",esri.OperationBase,{type:"edit",label:"Add Features",constructor:function(_a31){_a31=_a31||{};if(!_a31.featureLayer){console.error("In constructor of 'esri.dijit.editing.Add', featureLayer is not provided");return;}this._featureLayer=_a31.featureLayer;if(!_a31.addedGraphics){console.error("In constructor of 'esri.dijit.editing.Add', no graphics provided");return;}this._addedGraphics=_a31.addedGraphics;},performUndo:function(){this._featureLayer.applyEdits(null,null,this._addedGraphics);},performRedo:function(){this._featureLayer.applyEdits(this._addedGraphics,null,null);}});dojo.declare("esri.dijit.editing.Delete",esri.OperationBase,{type:"edit",label:"Delete Features",constructor:function(_a32){_a32=_a32||{};this._add=new esri.dijit.editing.Add({featureLayer:_a32.featureLayer,addedGraphics:_a32.deletedGraphics});},performUndo:function(){this._add.performRedo();},performRedo:function(){this._add.performUndo();}});dojo.declare("esri.dijit.editing.Update",esri.OperationBase,{type:"edit",label:"Update Features",constructor:function(_a33){_a33=_a33||{};if(!_a33.featureLayer){console.error("In constructor of 'esri.dijit.editing.Update', featureLayer not provided");return;}this._featureLayer=_a33.featureLayer;if(!_a33.preUpdatedGraphics){console.error("In constructor of 'esri.dijit.editing.Update', preUpdatedGraphics not provided");return;}this._preUpdatedGraphicsGeometries=[];this._preUpdatedGraphicsAttributes=[];for(var i=0;i<_a33.preUpdatedGraphics.length;i++){this._preUpdatedGraphicsGeometries.push(_a33.preUpdatedGraphics[i].geometry.toJson());this._preUpdatedGraphicsAttributes.push(_a33.preUpdatedGraphics[i].attributes);}if(!_a33.postUpdatedGraphics){console.error("In constructor of 'esri.dijit.editing.Update', postUpdatedGraphics not provided");return;}this._postUpdatedGraphics=_a33.postUpdatedGraphics;this._postUpdatedGraphicsGeometries=[];this._postUpdatedGraphicsAttributes=[];for(i=0;i<_a33.postUpdatedGraphics.length;i++){this._postUpdatedGraphicsGeometries.push(_a33.postUpdatedGraphics[i].geometry.toJson());this._postUpdatedGraphicsAttributes.push(dojo.clone(_a33.postUpdatedGraphics[i].attributes));}},performUndo:function(){for(var i=0;i<this._postUpdatedGraphics.length;i++){this._postUpdatedGraphics[i].setGeometry(esri.geometry.fromJson(this._preUpdatedGraphicsGeometries[i]));this._postUpdatedGraphics[i].setAttributes(this._preUpdatedGraphicsAttributes[i]);}this._featureLayer.applyEdits(null,this._postUpdatedGraphics,null);},performRedo:function(){for(var i=0;i<this._postUpdatedGraphics.length;i++){this._postUpdatedGraphics[i].setGeometry(esri.geometry.fromJson(this._postUpdatedGraphicsGeometries[i]));this._postUpdatedGraphics[i].setAttributes(this._postUpdatedGraphicsAttributes[i]);}this._featureLayer.applyEdits(null,this._postUpdatedGraphics,null);}});dojo.declare("esri.dijit.editing.Cut",esri.OperationBase,{type:"edit",label:"Cut Features",constructor:function(_a34){_a34=_a34||{};if(!_a34.featureLayer){console.error("In constructor of 'esri.dijit.editing.Cut', featureLayer not provided");return;}this._featureLayer=_a34.featureLayer;if(!_a34.addedGraphics){console.error("In constructor of 'esri.dijit.editing.Cut', addedGraphics for cut not provided");return;}this._addedGraphics=_a34.addedGraphics;if(!_a34.preUpdatedGraphics){console.error("In constructor of 'esri.dijit.editing.Cut', preUpdatedGraphics not provided");return;}this._preUpdatedGraphicsGeometries=[];this._preUpdatedGraphicsAttributes=[];for(var i=0;i<_a34.preUpdatedGraphics.length;i++){this._preUpdatedGraphicsGeometries.push(_a34.preUpdatedGraphics[i].geometry.toJson());this._preUpdatedGraphicsAttributes.push(_a34.preUpdatedGraphics[i].attributes);}if(!_a34.postUpdatedGraphics){console.error("In constructor of 'esri.dijit.editing.Cut', postUpdatedGraphics not provided");return;}this._postUpdatedGraphics=_a34.postUpdatedGraphics;this._postUpdatedGraphicsGeometries=[];this._postUpdatedGraphicsAttributes=[];for(i=0;i<_a34.postUpdatedGraphics.length;i++){this._postUpdatedGraphicsGeometries.push(_a34.postUpdatedGraphics[i].geometry.toJson());this._postUpdatedGraphicsAttributes.push(dojo.clone(_a34.postUpdatedGraphics[i].attributes));}},performUndo:function(){for(var i=0;i<this._postUpdatedGraphics.length;i++){this._postUpdatedGraphics[i].setGeometry(esri.geometry.fromJson(this._preUpdatedGraphicsGeometries[i]));this._postUpdatedGraphics[i].setAttributes(this._preUpdatedGraphicsAttributes[i]);}this._featureLayer.applyEdits(null,this._postUpdatedGraphics,this._addedGraphics);},performRedo:function(){for(var i=0;i<this._postUpdatedGraphics.length;i++){this._postUpdatedGraphics[i].setGeometry(esri.geometry.fromJson(this._postUpdatedGraphicsGeometries[i]));this._postUpdatedGraphics[i].setAttributes(this._postUpdatedGraphicsAttributes[i]);}this._featureLayer.applyEdits(this._addedGraphics,this._postUpdatedGraphics,null);}});dojo.declare("esri.dijit.editing.Union",esri.OperationBase,{type:"edit",label:"Union Features",constructor:function(_a35){_a35=_a35||{};this._cut=new esri.dijit.editing.Cut({featureLayer:_a35.featureLayer,addedGraphics:_a35.deletedGraphics,preUpdatedGraphics:_a35.preUpdatedGraphics,postUpdatedGraphics:_a35.postUpdatedGraphics});},performUndo:function(){this._cut.performRedo();},performRedo:function(){this._cut.performUndo();}});});},"esri/dijit/editing/Editor":function(){define("esri/dijit/editing/Editor",["dijit","dojo","dojox","dojo/require!dijit/ProgressBar,dijit/_Widget,dijit/_Templated,esri/toolbars/edit,esri/toolbars/draw,esri/layers/FeatureLayer,esri/dijit/editing/Util,esri/dijit/editing/toolbars/Drawing,esri/dijit/editing/TemplatePicker,esri/dijit/AttributeInspector,esri/dijit/editing/SelectionHelper,esri/undoManager,esri/dijit/editing/editOperation"],function(_a36,dojo,_a37){dojo.provide("esri.dijit.editing.Editor");dojo.require("dijit.ProgressBar");dojo.require("dijit._Widget");dojo.require("dijit._Templated");dojo.require("esri.toolbars.edit");dojo.require("esri.toolbars.draw");dojo.require("esri.layers.FeatureLayer");dojo.require("esri.dijit.editing.Util");dojo.require("esri.dijit.editing.toolbars.Drawing");dojo.require("esri.dijit.editing.TemplatePicker");dojo.require("esri.dijit.AttributeInspector");dojo.require("esri.dijit.editing.SelectionHelper");dojo.require("esri.undoManager");dojo.require("esri.dijit.editing.editOperation");dojo.declare("esri.dijit.editing.Editor",[_a36._Widget,_a36._Templated],{widgetsInTemplate:true,templateString:"<div class=\"esriEditor\">\r\n    <div class=\"esriTemplatePicker\" dojoAttachPoint=\"templatePickerDiv\"></div>\r\n    <div class=\"esriDrawingToolbar\" dojoAttachPoint=\"drawingToolbarDiv\"></div>\r\n    <div class=\"progressBar\" dojoAttachPoint=\"progressBar\" indeterminate=\"true\" dojoType=\"dijit.ProgressBar\" />\r\n</div>",constructor:function(_a38,_a39){_a38=_a38||{};if(!_a38.settings){console.error("Editor: please provide 'settings' parameter in the constructor");}if(!_a38.settings.layerInfos){console.error("Editor: please provide 'layerInfos' parameter in the constructor");}this._settings=_a38.settings;this._eConnects=[];},postCreate:function(){this._setDefaultOptions();this._initLayers();this._connectEvents();this._createWidgets();this._reset();this._enableMapClickHandler();},stopEditing:function(_a3a){this._updateCurrentFeature(dojo.hitch(this,function(){this._clearSelection(false);_a3a&&_a3a();}));},destroy:function(){if(this.drawingToolbar){this.drawingToolbar.destroy();}if(this.attributeInspector){this.attributeInspector.destroy();}if(this.templatePicker){this.templatePicker.destroy();}if(this._selectionHelper){this._selectionHelper.destroy();}if(this._drawToolbar){this._drawToolbar.deactivate();}this._reset();this._disableMapClickHandler();dojo.forEach(this._eConnects,"dojo.disconnect(item);");dojo.disconnect(this._dtConnect);dojo.disconnect(this._templatePickerOnSelectionChangeEvent);this._layer=this._currentGraphic=this._activeType=this._activeTemplate=this._drawingTool=this._drawToolbar=this._editToolbar=this.drawingToolbar=this.attributeInspector=this.templatePicker=this.undoManager=null;if(this._settings.map.infoWindow&&this._settings.map.infoWindow.clearFeatures){this._settings.map.infoWindow.clearFeatures();}this.inherited(arguments);},_setDefaultOptions:function(){this._drawToolbar=this._settings.drawToolbar||new esri.toolbars.Draw(this._settings.map);this._settings.drawToolbar=this._drawToolbar;this._editToolbar=this._settings.editToolbar||new esri.toolbars.Edit(this._settings.map);this._settings.editToolbar=this._editToolbar;this._settings.toolbarVisible=this._settings.toolbarVisible||false;this._settings.toolbarOptions=dojo.mixin({reshapeVisible:false,cutVisible:false,mergeVisible:false},this._settings.toolbarOptions);this._settings.createOptions=dojo.mixin({polylineDrawTools:[esri.dijit.editing.Editor.CREATE_TOOL_POLYLINE],polygonDrawTools:[esri.dijit.editing.Editor.CREATE_TOOL_POLYGON],editAttributesImmediately:true},this._settings.createOptions);this._settings.singleSelectionTolerance=this._settings.singleSelectionTolerance||3;this._settings.maxUndoRedoOperations=this._settings.maxUndoRedoOperations||10;this._settings.editor=this;this._usePopup=this._settings.usePopup=this._settings.map.infoWindow._setPagerCallbacks?true:false;this._datePackage=this._settings.datePackage;var _a3b=esri.config.defaults;this._settings.geometryService=this._settings.geometryService||_a3b.geometryService;_a3b.geometryService=_a3b.geometryService||this._settings.geometryService;},_initLayers:function(){this._settings.layers=[];this._settings.userIds={};this._settings.createOnlyLayer={};var _a3c=this._settings.layerInfos;dojo.forEach(_a3c,function(_a3d){if(_a3d.featureLayer&&_a3d.featureLayer.loaded){this._settings.layers.push(_a3d.featureLayer);var _a3e=_a3d.featureLayer.id;if(_a3d.featureLayer.credential){this._settings.userIds[_a3e]=_a3d.featureLayer.credential.userId;}if(_a3d.userId){this._settings.userIds[_a3e]=_a3d.userId;}var _a3f=_a3d.featureLayer.getEditCapabilities();if(_a3f.canCreate&&!_a3f.canUpdate){this._settings.createOnlyLayer[_a3e]=true;}else{this._settings.createOnlyLayer[_a3e]=false;}}},this);},_reset:function(){this._hideAttributeInspector();this._editToolbar.deactivate();this._editVertices=true;this._layer=null;this._currentGraphic=null;this._activeType=null;this._activeTemplate=null;this._drawingTool=null;this._attributeChanged=false;},_saveFeatureOnClient:function(_a40){var _a41=this.templatePicker.getSelected();var _a42;if(_a41.template){_a42=_a41.featureLayer.renderer.getSymbol(_a41.template.prototype);}else{_a42=_a41.symbolInfo.symbol;}var _a43=_a41.featureLayer.fields;var att={};dojo.forEach(_a43,function(_a44,idx){att[_a44.name]=null;});this._tempGraphic=new esri.Graphic(_a40,_a42,att,null);var map=this._settings.map;map.graphics.add(this._tempGraphic);var _a45=this._findCenterPoint(_a40);this._createAttributeInspector(true);map.infoWindow.setTitle(_a41.featureLayer?_a41.featureLayer.name:esri.bundle.widgets.attributeInspector.NLS_title);this.attributeInspector.showFeature(this._tempGraphic,_a41.featureLayer);this._showInfoWindow(_a45,map.getInfoWindowAnchor(_a45));if(this._settings.createOnlyLayer[_a41.featureLayer.id]){this._infoWindowHideEvent=dojo.connect(map.infoWindow,"onHide",this,"_infoWindowHide");}dojo.disconnect(this._templatePickerOnSelectionChangeEvent);this.templatePicker.clearSelection();this._drawToolbar.deactivate();this._enableMapClickHandler();if(this.drawingToolbar){this.drawingToolbar.deactivate();}this._templatePickerOnSelectionChangeEvent=dojo.connect(this.templatePicker,"onSelectionChange",dojo.hitch(this,"_onCreateFeature"));},_saveAttributesOnClient:function(_a46,_a47,_a48){this._tempGraphic.attributes[_a47]=(typeof (_a48)==="number"&&isNaN(_a48))?null:_a48;},_infoWindowHide:function(){this._createFeature(this._tempGraphic.geometry,this._tempGraphic.attributes);dojo.disconnect(this._infoWindowHideEvent);},_createFeature:function(_a49,_a4a){this._editClickPoint=this._findCenterPoint(_a49);if(!_a49.rings){this._applyEdits([{layer:this._layer,adds:[this._createGraphic(_a49,_a4a)]}]);return;}this._simplify(_a49,dojo.hitch(this,function(_a4b){if(this._drawingTool!==esri.layers.FeatureTemplate.TOOL_AUTO_COMPLETE_POLYGON){this._applyEdits([{layer:this._layer,adds:[this._createGraphic(_a4b,_a4a)]}]);}else{this._autoComplete(_a4b,dojo.hitch(this,function(_a4c){if(_a4c&&_a4c.length){this._applyEdits([{layer:this._layer,adds:dojo.map(_a4c,dojo.hitch(this,function(_a4d){return this._createGraphic(_a4d,_a4a);}))}]);}}));}}));},_updateCurrentFeature:function(_a4e){var _a4f=this._isModified();if(_a4f){this._updateFeature(_a4f,_a4e);}else{if(_a4e){_a4e(false);}}},_updateFeature:function(_a50,_a51){var geom=_a50.geometry;if(!geom.rings){this._applyEdits([{layer:_a50.getLayer(),updates:[_a50]}],_a51);}else{this._simplify(geom,dojo.hitch(this,function(_a52){this._applyEdits([{layer:_a50.getLayer(),updates:[dojo.mixin(_a50,{geometry:_a52})]}],_a51);}));}},_deleteFeature:function(_a53,_a54){var _a55=[];if(!_a53){var _a56=this._settings.layers;_a55=dojo.map(dojo.filter(_a56,function(_a57){return _a57.getSelectedFeatures().length>0;}),"return {layer:item, deletes: item.getSelectedFeatures()}");if((!_a55||!_a55.length)&&this._currentGraphic){_a55.push({layer:this._layer,deletes:[this._currentGraphic]});}}else{_a55.push({layer:_a53.getLayer(),deletes:[_a53]});}this._applyEdits(_a55,(_a54));},_stopEditing:function(_a58,adds,_a59,_a5a){esri.hide(this.progressBar.domNode);this._undoRedoAdd();var _a5b;if(_a58._isSelOnly===true){if(adds&&adds.length){this.templatePicker.clearSelection();var _a5c=new esri.tasks.Query();_a5c.objectIds=[adds[0].objectId];if(!this._settings.createOnlyLayer[_a58.id]){this._selectFeatures([_a58],_a5c,dojo.hitch(this,"_onEditFeature"));}else{this._settings.map.graphics.remove(this._tempGraphic);}}}else{_a5b=this._selectionHelper.findMapService(this._settings.map,_a58);if(_a5b){_a5b.refresh();}if(adds&&adds.length){this.templatePicker.clearSelection();if(!this._settings.createOnlyLayer[_a58.id]){esri.dijit.editing.Util.LayerHelper.findFeatures(adds,_a58,dojo.hitch(this,"_onEditFeature"));}else{this._settings.map.graphics.remove(this._tempGraphic);}}}if(_a5a&&_a5a.length){this._clearSelection(true);if(this._undoRedo){_a5b=this._selectionHelper.findMapService(_a58,this._settings.map);if(_a5b){_a5b.refresh();}}}if(this._undoRedo&&_a59&&_a59.length){_a5b=this._selectionHelper.findMapService(_a58,this._settings.map);if(_a5b){_a5b.refresh();}this.attributeInspector.refresh();this._undoRedo=false;}if(this.drawingToolbar){this.drawingToolbar._updateUI();}this._undoRedo=false;},_undoRedoAdd:function(){this._settings._isApplyEditsCall=false;if(!this._settings.undoManager){return;}if(this._activeTool==="CUT"||this._activeTool==="UNION"){return;}var edit=(this._edits&&this._edits.length)?this._edits[0]:null;if(!edit){return;}var adds=edit.adds||[];var _a5d=edit.updates||[];var _a5e=edit.deletes||[];var _a5f={featureLayer:edit.layer};if(adds.length){this.undoManager.add(new esri.dijit.editing.Add(dojo.mixin(_a5f,{addedGraphics:adds})));}else{if(_a5e.length){this.undoManager.add(new esri.dijit.editing.Delete(dojo.mixin(_a5f,{deletedGraphics:_a5e})));}else{if(_a5d.length){this.undoManager.add(new esri.dijit.editing.Update(dojo.mixin(_a5f,{preUpdatedGraphics:[this._preUpdates],postUpdatedGraphics:_a5d})));}}}this._edits=null;this._preUpdates=null;},_activateDrawToolbar:function(_a60){this._layer=_a60.featureLayer;this._activeType=_a60.type;this._activeTemplate=_a60.template;this._drawingTool=this._activeTemplate?this._activeTemplate.drawingTool:null;this._drawTool=this._toDrawTool(this._drawingTool,_a60.featureLayer);dojo.disconnect(this._dtConnect);if(this._settings.createOnlyLayer[_a60.featureLayer.id]){this._dtConnect=dojo.connect(this._drawToolbar,"onDrawEnd",this,"_saveFeatureOnClient");}else{this._dtConnect=dojo.connect(this._drawToolbar,"onDrawEnd",this,"_createFeature");}this._editToolbar.deactivate();this._disableMapClickHandler();if(!this.drawingToolbar){this._drawToolbar.activate(this._drawTool);}else{this.drawingToolbar.activateEditing(this._drawTool,this._layer);}},_activateEditToolbar:function(_a61,info){var _a62=_a61.getLayer();var _a63=_a62?_a62.geometryType:null;var _a64=esri.toolbars.Edit.MOVE;if(_a63!=="esriGeometryPoint"&&this._isNotesFeature(_a61)===true){_a64=_a64|esri.toolbars.Edit.ROTATE|esri.toolbars.Edit.SCALE;this._editVertices=false;}else{if(_a63!=="esriGeometryPoint"&&this._editVertices===true){_a64=_a64|esri.toolbars.Edit.ROTATE|esri.toolbars.Edit.SCALE;this._editVertices=false;}else{_a64=_a64|esri.toolbars.Edit.EDIT_VERTICES;this._editVertices=true;}}this._attributeChanged=this._isModified();this._preUpdates=new esri.Graphic(dojo.clone(_a61.toJson()));var _a65=_a62.getEditCapabilities({feature:_a61,userId:this._settings.userIds[_a62.id]});var _a66=dojo.filter(this._settings.layerInfos,function(item){return item.featureLayer["layerId"]===_a62.layerId;})[0];if(_a65.canUpdate&&!_a66.disableGeometryUpdate&&_a62.allowGeometryUpdates){this._editToolbar.activate(_a64,_a61);}if(!this._settings.map.infoWindow.isShowing){var _a67=(info&&info.screenPoint)||this._findCenterPoint(_a61);this._showInfoWindow(_a67,this._settings.map.getInfoWindowAnchor(_a67));}},_createGraphic:function(_a68,_a69){var _a6a=(this._activeType&&this._activeType.symbol)||this._layer.defaultSymbol;var _a6b=new esri.Graphic(_a68,_a6a,_a69);if(this._activeTemplate||_a69){_a6b.attributes=_a69||dojo.mixin({},this._activeTemplate.prototype.attributes);}else{_a6b.attributes=_a6b.attributes||[];dojo.forEach(this._layer.fields,function(_a6c){_a6b.attributes[_a6c.name]=null;},this);}return _a6b;},_connectEvents:function(){var _a6d=this._settings.layers;dojo.forEach(_a6d,"this._connect(item, 'onEditsComplete', dojo.hitch(this, '_stopEditing', item))",this);dojo.forEach(_a6d,"this._connect(item, 'onBeforeApplyEdits', dojo.hitch(this, function() { esri.show(this.progressBar.domNode); this._settings._isApplyEditsCall = true;  }))",this);this._connect(this._editToolbar,"onGraphicClick",dojo.hitch(this,"_activateEditToolbar"));this._connect(this._editToolbar,"onGraphicFirstMove",dojo.hitch(this,"_hideAttributeInspector"));this._connect(this._editToolbar,"onVertexFirstMove",dojo.hitch(this,"_hideAttributeInspector"));this._connect(this._editToolbar,"onScaleStart",dojo.hitch(this,"_hideAttributeInspector"));this._connect(this._editToolbar,"onRotateStart",dojo.hitch(this,"_hideAttributeInspector"));},_connect:function(node,evt,func){this._eConnects.push(dojo.connect(node,evt,func));},_createWidgets:function(){this._selectionHelper=new esri.dijit.editing.SelectionHelper(this._settings);this._createTemplatePicker();this._createAttributeInspector();this._createDrawingToolbar();this._createUndoRedoManager();},_createTemplatePicker:function(){if(!this._settings.templatePicker){var _a6e=dojo.filter(this._settings.layers,function(item){return item.getEditCapabilities().canCreate;});this.templatePicker=new esri.dijit.editing.TemplatePicker({"class":"esriTemplatePicker",featureLayers:_a6e,showTooltip:true,maxLabelLength:this._settings.typesCharacterLimit,columns:"auto",rows:"auto"},this.templatePickerDiv);this.templatePicker.startup();this._settings.templatePicker=this.templatePicker;}else{this.templatePicker=this._settings.templatePicker;esri.hide(this.templatePickerDiv);}this._templatePickerOnSelectionChangeEvent=dojo.connect(this.templatePicker,"onSelectionChange",dojo.hitch(this,"_onCreateFeature"));},_createAttributeInspector:function(_a6f){if(!this._settings.attributeInspector){this._customAttributeInspector=false;var map=this._settings.map;this.attributeInspector=new esri.dijit.AttributeInspector({layerInfos:this._settings.layerInfos,hideNavButtons:this._usePopup,datePackage:this._datePackage},dojo.create("div"));this.attributeInspector.startup();map.infoWindow.setContent(this.attributeInspector.domNode);map.infoWindow.setTitle(esri.bundle.widgets.attributeInspector.NLS_title);map.infoWindow.resize(350,375);dojo.query(".esriAttributeInspector .atiLayerName").style({display:"none"});}else{this._customAttributeInspector=true;this.attributeInspector=this._settings.attributeInspector;}this._connect(this.attributeInspector,"onDelete",dojo.hitch(this,"_deleteFeature"));this._connect(this.attributeInspector,"onNext",dojo.hitch(this,function(_a70){this._updateCurrentFeature(dojo.hitch(this,function(){this._attributeChanged=false;this._onEditFeature(_a70);}));}));if(this._usePopup){this._settings.map.infoWindow._setPagerCallbacks(this.attributeInspector,dojo.hitch(this.attributeInspector,"next"),dojo.hitch(this.attributeInspector,"previous"));}if(_a6f){this._connect(this.attributeInspector,"onAttributeChange",dojo.hitch(this,"_saveAttributesOnClient"));}else{this._connect(this.attributeInspector,"onAttributeChange",dojo.hitch(this,function(_a71,_a72,_a73){this._preUpdates=new esri.Graphic(dojo.clone(_a71.toJson()));this._currentGraphic.attributes[_a72]=(typeof (_a73)==="number"&&isNaN(_a73))?null:_a73;this._updateFeature(this._currentGraphic,null);this._attributeChanged=false;}));}},_createDrawingToolbar:function(){if(this._settings.toolbarVisible===true){this.drawingToolbar=new esri.dijit.editing.toolbars.Drawing({"class":"esriDrawingToolbar",drawToolbar:this._drawToolbar,editToolbar:this._editToolbar,settings:this._settings,onDelete:dojo.hitch(this,"_deleteFeature"),onApplyEdits:dojo.hitch(this,"_applyEdits"),onShowAttributeInspector:dojo.hitch(this,"_onEditFeature")},this.drawingToolbarDiv);}},_createUndoRedoManager:function(){if(!this._settings.enableUndoRedo&&!this._settings.undoManager){return;}this._settings.enableUndoRedo=true;this.undoManager=this._settings.undoManager;if(!this.undoManager){this.undoManager=this._settings.undoManager=new esri.UndoManager({maxOperations:this._settings.maxUndoRedoOperations});}this._connect(document,"onkeypress",dojo.hitch(this,function(evt){if(evt.metaKey||evt.ctrlKey){if(evt.charOrCode==="z"){this._undo();}if(evt.charOrCode==="y"){this._redo();}}}));},_enableMapClickHandler:function(){this._mapClickHandler=dojo.connect(this._settings.map,"onClick",dojo.hitch(this,function(evt){if(this._drawToolbar._geometryType){return;}if(this._activeTool==="SELECT"){this._activeTool="";return;}this._updateCurrentFeature(dojo.hitch(this,function(){this._reset();this._updateSelection(evt);}));}));},_disableMapClickHandler:function(){dojo.disconnect(this._mapClickHandler);},_onCreateFeature:function(){var _a74=this.templatePicker.getSelected();if(_a74){this._updateCurrentFeature(dojo.hitch(this,function(){if(this._currentGraphic){this._clearSelection(false);}this._reset();this._activateDrawToolbar(_a74);}));}else{this._reset();dojo.disconnect(this._dtConnect);this._drawToolbar.deactivate();this._enableMapClickHandler();if(this.drawingToolbar){this.drawingToolbar.deactivate();}}},_onEditFeature:function(_a75,_a76){_a75=(dojo.isArray(_a75)?_a75[0]:_a75)||null;if(!_a75){return;}if(!this._customAttributeInspector){_a76=_a76||this._editClickPoint||this._findCenterPoint(_a75);var _a77=_a75.getLayer();this._settings.map.infoWindow.setTitle(_a77?_a77.name:esri.bundle.widgets.attributeInspector.NLS_title);if(this.drawingToolbar||!this._settings.map.infoWindow.isShowing){this._showInfoWindow(_a76,this._settings.map.getInfoWindowAnchor(_a76));}this._editClickPoint=null;}if(_a75===this._currentGraphic){return;}this._editVertices=true;this._layer=_a75.getLayer();this._currentGraphic=_a75;if(_a75.getDojoShape()){_a75.getDojoShape().moveToFront();}this._activateEditToolbar(_a75);},_applyEdits:function(_a78,_a79){_a78=_a78||[];if(_a78.length<=0){return;}this._edits=_a78;var _a7a=dojo.map(_a78,function(edit){return edit.layer.applyEdits(edit.adds,edit.updates,edit.deletes);});this._deferredsList=new dojo.DeferredList(_a7a).addCallback(dojo.hitch(this,function(){esri.hide(this.progressBar.domNode);if(_a79){_a79();}var map=this._settings.map;if(map&&map.infoWindow.reposition&&map.infoWindow.isShowing){map.infoWindow.reposition();}}));},_undo:function(){if(this._settings.undoManager&&!this._settings._isApplyEditsCall){this._editToolbar.deactivate();this._undoRedo=true;this._settings.undoManager.undo();}},_redo:function(){if(this._settings.undoManager&&!this._settings._isApplyEditsCall){this._editToolbar.deactivate();this._undoRedo=true;this._settings.undoManager.redo();}},_simplify:function(_a7b,_a7c){if(esri.geometry.polygonSelfIntersecting(_a7b)){this._settings.geometryService.simplify([_a7b],function(_a7d){var _a7e=(_a7d&&_a7d.length)?_a7d[0]:_a7e;if(_a7c){_a7c(_a7e);}});}else{if(_a7c){_a7c(_a7b);}}},_autoComplete:function(_a7f,_a80){var _a81=this._getLayers("esriGeometryPolygon");var _a82=new esri.tasks.Query();_a82.geometry=_a7f;_a82.returnGeometry=true;this._selectFeatures(_a81,_a82,dojo.hitch(this,function(_a83){if(!_a83||_a83.length<=0){if(_a80){_a80([_a7f]);}}else{this._settings.geometryService.autoComplete(esri.getGeometries(_a83),this._toPolylines([_a82.geometry]),function(_a84){if(_a80){_a80(_a84);}});}}));},_getLayers:function(_a85){var _a86=this._settings.layers;return dojo.filter(_a86,function(_a87){return _a87.geometryType===_a85;});},_selectFeatures:function(_a88,_a89,_a8a,mode){this._selectionHelper.selectFeatures(_a88,_a89,mode||esri.layers.FeatureLayer.SELECTION_NEW,_a8a);},_updateSelection:function(evt){var _a8b=evt.mapPoint;var _a8c=evt.graphic;this._selectionHelper.selectFeaturesByGeometry(this._settings.layers,_a8b,esri.layers.FeatureLayer.SELECTION_NEW,dojo.hitch(this,function(_a8d){var _a8e=dojo.some(_a8d,dojo.hitch(this,function(item){return item==_a8c;}));if(_a8c&&!_a8e){var _a8f=_a8c.getLayer();if(this._isValidLayer(_a8f)){var _a90=new esri.tasks.Query();_a90.objectIds=[_a8c.attributes[_a8f.objectIdField]];this._selectionHelper.selectFeatures([_a8f],_a90,esri.layers.FeatureLayer.SELECTION_ADD,dojo.hitch(this,function(_a91){this._updatePopupButtons(_a91);this._onEditFeature(_a91,_a8b);}));}else{this._clearSelection();}}else{if(_a8d&&_a8d.length){this._updatePopupButtons(_a8d);this._onEditFeature(_a8d,_a8b);}else{this._clearSelection();}}}));},_updatePopupButtons:function(_a92){if(!this._usePopup||!_a92){return;}var _a93=_a92.length;var _a94=[this._settings.map.infoWindow._prevFeatureButton,this._settings.map.infoWindow._nextFeatureButton];dojo.forEach(_a94,dojo.hitch(this,function(item){(_a93>1)?dojo.removeClass(item,"hidden"):dojo.addClass(item,"hidden");}));},_clearSelection:function(_a95){this._selectionHelper.clearSelection(_a95||false);this._reset();},_findCenterPoint:function(_a96){var _a97=_a96.geometry||_a96;var _a98;switch(_a97.type){case "point":_a98=_a97;break;case "polyline":var _a99=_a97.paths[0].length;_a98=_a97.getPoint(0,Math.ceil(_a99/2));break;case "polygon":var _a9a=_a97.rings.length-1;var _a9b=_a97.rings[_a9a].length-1;_a98=_a97.getPoint(_a9a,_a9b);break;}return this._settings.map.toScreen(_a98);},_hideAttributeInspector:function(){if(!this._customAttributeInspector&&this._settings.map.infoWindow){this._settings.map.infoWindow.hide();}},_toPolylines:function(_a9c){var _a9d=dojo.map(_a9c,function(_a9e){var _a9f=new esri.geometry.Polyline(_a9e.spatialReference);dojo.forEach(_a9e.rings,function(ring){_a9f.addPath(ring);});return _a9f;});return _a9d;},_isNotesFeature:function(_aa0){var _aa1=_aa0.getLayer();var _aa2=_aa1?_aa1.types||null:null;if(!_aa2){return false;}var _aa3=_aa0.attributes[_aa1.typeIdField];var _aa4;dojo.some(_aa2,function(type){if(type.id===_aa3){_aa4=type.templates;return true;}return false;});if(!_aa4){return false;}var _aa5=_aa4[0]||null;if(!_aa5){return false;}var _aa6=this._isShapeTool(_aa5.drawingTool)||null;return _aa6?true:false;},_isValidLayer:function(_aa7){var _aa8=this._settings.layerInfos;for(var i=0;i<_aa8.length;i++){var _aa9=_aa8[i];if(_aa7.id==_aa9.layerId){return true;}}return false;},_isShapeTool:function(_aaa){switch(_aaa){case esri.layers.FeatureTemplate.TOOL_ARROW:return esri.toolbars.Draw.ARROW;case esri.layers.FeatureTemplate.TOOL_LEFT_ARROW:return esri.toolbars.Draw.LEFT_ARROW;case esri.layers.FeatureTemplate.TOOL_RIGHT_ARROW:return esri.toolbars.Draw.RIGHT_ARROW;case esri.layers.FeatureTemplate.TOOL_UP_ARROW:return esri.toolbars.Draw.UP_ARROW;case esri.layers.FeatureTemplate.TOOL_DOWN_ARROW:return esri.toolbars.Draw.DOWN_ARROW;case esri.layers.FeatureTemplate.TOOL_CIRCLE:return esri.toolbars.Draw.CIRCLE;case esri.layers.FeatureTemplate.TOOL_ELLIPSE:return esri.toolbars.Draw.ELLIPSE;case esri.layers.FeatureTemplate.TOOL_TRIANGLE:return esri.toolbars.Draw.TRIANGLE;case esri.layers.FeatureTemplate.TOOL_RECTANGLE:return esri.toolbars.Draw.RECTANGLE;default:return null;}},_toDrawTool:function(_aab,_aac){var _aad=_aac.geometryType;switch(_aab){case esri.layers.FeatureTemplate.TOOL_POINT:return esri.toolbars.Draw.POINT;case esri.layers.FeatureTemplate.TOOL_ARROW:return esri.toolbars.Draw.ARROW;case esri.layers.FeatureTemplate.TOOL_LEFT_ARROW:return esri.toolbars.Draw.LEFT_ARROW;case esri.layers.FeatureTemplate.TOOL_RIGHT_ARROW:return esri.toolbars.Draw.RIGHT_ARROW;case esri.layers.FeatureTemplate.TOOL_UP_ARROW:return esri.toolbars.Draw.UP_ARROW;case esri.layers.FeatureTemplate.TOOL_DOWN_ARROW:return esri.toolbars.Draw.DOWN_ARROW;case esri.layers.FeatureTemplate.TOOL_CIRCLE:return esri.toolbars.Draw.CIRCLE;case esri.layers.FeatureTemplate.TOOL_ELLIPSE:return esri.toolbars.Draw.ELLIPSE;case esri.layers.FeatureTemplate.TOOL_TRIANGLE:return esri.toolbars.Draw.TRIANGLE;case esri.layers.FeatureTemplate.TOOL_RECTANGLE:return esri.toolbars.Draw.RECTANGLE;case esri.layers.FeatureTemplate.TOOL_LINE:return esri.toolbars.Draw.POLYLINE;case esri.layers.FeatureTemplate.TOOL_POLYGON:return esri.toolbars.Draw.POLYGON;case esri.layers.FeatureTemplate.TOOL_FREEHAND:if(_aad==="esriGeometryPolyline"){return esri.toolbars.Draw.FREEHAND_POLYLINE;}else{return esri.toolbars.Draw.FREEHAND_POLYGON;}break;default:var _aae=esri.toolbars.Draw.POINT;if(_aad==="esriGeometryPolyline"){_aae=esri.toolbars.Draw.POLYLINE;if(this._settings.createOptions.polylineDrawTools[0]===esri.dijit.editing.Editor.CREATE_TOOL_FREEHAND_POLYLINE){_aae=esri.toolbars.Draw.FREEHAND_POLYLINE;}}else{if(_aad==="esriGeometryPolygon"){_aae=esri.toolbars.Draw.POLYGON;if(this._settings.createOptions.polygonDrawTools[0]===esri.dijit.editing.Editor.CREATE_TOOL_FREEHAND_POLYGON){_aae=esri.toolbars.Draw.FREEHAND_POLYGON;}}}return _aae;}},_isModified:function(){var _aaf=this._editToolbar.getCurrentState();return ((_aaf.isModified||this._attributeChanged)&&_aaf.graphic)?_aaf.graphic:null;},_showInfoWindow:function(_ab0,_ab1){if(!this._customAttributeInspector){this._settings.map.infoWindow.show(_ab0,_ab1);}}});dojo.mixin(esri.dijit.editing.Editor,{CREATE_TOOL_POLYLINE:"polyline",CREATE_TOOL_FREEHAND_POLYLINE:"freehandpolyline",CREATE_TOOL_POLYGON:"polygon",CREATE_TOOL_FREEHAND_POLYGON:"freehandpolygon",CREATE_TOOL_AUTOCOMPLETE:"autocomplete",CREATE_TOOL_RECTANGLE:"rectangle",CREATE_TOOL_TRIANGLE:"triangle",CREATE_TOOL_CIRCLE:"circle",CREATE_TOOL_ELLIPSE:"ellipse",CREATE_TOOL_ARROW:"arrow",CREATE_TOOL_UP_ARROW:"uparrow",CREATE_TOOL_DOWN_ARROW:"downarrow",CREATE_TOOL_RIGHT_ARROW:"rightarrow",CREATE_TOOL_LEFT_ARROW:"leftarrow"});});},"dojo/dnd/Selector":function(){define(["../_base/array","../_base/declare","../_base/event","../_base/kernel","../_base/lang","../dom","../dom-construct","../mouse","../_base/NodeList","../on","../touch","./common","./Container"],function(_ab2,_ab3,_ab4,_ab5,lang,dom,_ab6,_ab7,_ab8,on,_ab9,dnd,_aba){var _abb=_ab3("dojo.dnd.Selector",_aba,{constructor:function(node,_abc){if(!_abc){_abc={};}this.singular=_abc.singular;this.autoSync=_abc.autoSync;this.selection={};this.anchor=null;this.simpleSelection=false;this.events.push(on(this.node,_ab9.press,lang.hitch(this,"onMouseDown")),on(this.node,_ab9.release,lang.hitch(this,"onMouseUp")));},singular:false,getSelectedNodes:function(){var t=new _ab8();var e=dnd._empty;for(var i in this.selection){if(i in e){continue;}t.push(dom.byId(i));}return t;},selectNone:function(){return this._removeSelection()._removeAnchor();},selectAll:function(){this.forInItems(function(data,id){this._addItemClass(dom.byId(id),"Selected");this.selection[id]=1;},this);return this._removeAnchor();},deleteSelectedNodes:function(){var e=dnd._empty;for(var i in this.selection){if(i in e){continue;}var n=dom.byId(i);this.delItem(i);_ab6.destroy(n);}this.anchor=null;this.selection={};return this;},forInSelectedItems:function(f,o){o=o||_ab5.global;var s=this.selection,e=dnd._empty;for(var i in s){if(i in e){continue;}f.call(o,this.getItem(i),i,this);}},sync:function(){_abb.superclass.sync.call(this);if(this.anchor){if(!this.getItem(this.anchor.id)){this.anchor=null;}}var t=[],e=dnd._empty;for(var i in this.selection){if(i in e){continue;}if(!this.getItem(i)){t.push(i);}}_ab2.forEach(t,function(i){delete this.selection[i];},this);return this;},insertNodes:function(_abd,data,_abe,_abf){var _ac0=this._normalizedCreator;this._normalizedCreator=function(item,hint){var t=_ac0.call(this,item,hint);if(_abd){if(!this.anchor){this.anchor=t.node;this._removeItemClass(t.node,"Selected");this._addItemClass(this.anchor,"Anchor");}else{if(this.anchor!=t.node){this._removeItemClass(t.node,"Anchor");this._addItemClass(t.node,"Selected");}}this.selection[t.node.id]=1;}else{this._removeItemClass(t.node,"Selected");this._removeItemClass(t.node,"Anchor");}return t;};_abb.superclass.insertNodes.call(this,data,_abe,_abf);this._normalizedCreator=_ac0;return this;},destroy:function(){_abb.superclass.destroy.call(this);this.selection=this.anchor=null;},onMouseDown:function(e){if(this.autoSync){this.sync();}if(!this.current){return;}if(!this.singular&&!dnd.getCopyKeyState(e)&&!e.shiftKey&&(this.current.id in this.selection)){this.simpleSelection=true;if(_ab7.isLeft(e)){_ab4.stop(e);}return;}if(!this.singular&&e.shiftKey){if(!dnd.getCopyKeyState(e)){this._removeSelection();}var c=this.getAllNodes();if(c.length){if(!this.anchor){this.anchor=c[0];this._addItemClass(this.anchor,"Anchor");}this.selection[this.anchor.id]=1;if(this.anchor!=this.current){var i=0,node;for(;i<c.length;++i){node=c[i];if(node==this.anchor||node==this.current){break;}}for(++i;i<c.length;++i){node=c[i];if(node==this.anchor||node==this.current){break;}this._addItemClass(node,"Selected");this.selection[node.id]=1;}this._addItemClass(this.current,"Selected");this.selection[this.current.id]=1;}}}else{if(this.singular){if(this.anchor==this.current){if(dnd.getCopyKeyState(e)){this.selectNone();}}else{this.selectNone();this.anchor=this.current;this._addItemClass(this.anchor,"Anchor");this.selection[this.current.id]=1;}}else{if(dnd.getCopyKeyState(e)){if(this.anchor==this.current){delete this.selection[this.anchor.id];this._removeAnchor();}else{if(this.current.id in this.selection){this._removeItemClass(this.current,"Selected");delete this.selection[this.current.id];}else{if(this.anchor){this._removeItemClass(this.anchor,"Anchor");this._addItemClass(this.anchor,"Selected");}this.anchor=this.current;this._addItemClass(this.current,"Anchor");this.selection[this.current.id]=1;}}}else{if(!(this.current.id in this.selection)){this.selectNone();this.anchor=this.current;this._addItemClass(this.current,"Anchor");this.selection[this.current.id]=1;}}}}_ab4.stop(e);},onMouseUp:function(){if(!this.simpleSelection){return;}this.simpleSelection=false;this.selectNone();if(this.current){this.anchor=this.current;this._addItemClass(this.anchor,"Anchor");this.selection[this.current.id]=1;}},onMouseMove:function(){this.simpleSelection=false;},onOverEvent:function(){this.onmousemoveEvent=on(this.node,_ab9.move,lang.hitch(this,"onMouseMove"));},onOutEvent:function(){if(this.onmousemoveEvent){this.onmousemoveEvent.remove();delete this.onmousemoveEvent;}},_removeSelection:function(){var e=dnd._empty;for(var i in this.selection){if(i in e){continue;}var node=dom.byId(i);if(node){this._removeItemClass(node,"Selected");}}this.selection={};return this;},_removeAnchor:function(){if(this.anchor){this._removeItemClass(this.anchor,"Anchor");this.anchor=null;}return this;}});return _abb;});},"url:dijit/templates/Calendar.html":"<table cellspacing=\"0\" cellpadding=\"0\" class=\"dijitCalendarContainer\" role=\"grid\" aria-labelledby=\"${id}_mddb ${id}_year\">\n\t<thead>\n\t\t<tr class=\"dijitReset dijitCalendarMonthContainer\" valign=\"top\">\n\t\t\t<th class='dijitReset dijitCalendarArrow' data-dojo-attach-point=\"decrementMonth\">\n\t\t\t\t<img src=\"${_blankGif}\" alt=\"\" class=\"dijitCalendarIncrementControl dijitCalendarDecrease\" role=\"presentation\"/>\n\t\t\t\t<span data-dojo-attach-point=\"decreaseArrowNode\" class=\"dijitA11ySideArrow\">-</span>\n\t\t\t</th>\n\t\t\t<th class='dijitReset' colspan=\"5\">\n\t\t\t\t<div data-dojo-attach-point=\"monthNode\">\n\t\t\t\t</div>\n\t\t\t</th>\n\t\t\t<th class='dijitReset dijitCalendarArrow' data-dojo-attach-point=\"incrementMonth\">\n\t\t\t\t<img src=\"${_blankGif}\" alt=\"\" class=\"dijitCalendarIncrementControl dijitCalendarIncrease\" role=\"presentation\"/>\n\t\t\t\t<span data-dojo-attach-point=\"increaseArrowNode\" class=\"dijitA11ySideArrow\">+</span>\n\t\t\t</th>\n\t\t</tr>\n\t\t<tr role=\"row\">\n\t\t\t${!dayCellsHtml}\n\t\t</tr>\n\t</thead>\n\t<tbody data-dojo-attach-point=\"dateRowsNode\" data-dojo-attach-event=\"onclick: _onDayClick\" class=\"dijitReset dijitCalendarBodyContainer\">\n\t\t\t${!dateRowsHtml}\n\t</tbody>\n\t<tfoot class=\"dijitReset dijitCalendarYearContainer\">\n\t\t<tr>\n\t\t\t<td class='dijitReset' valign=\"top\" colspan=\"7\" role=\"presentation\">\n\t\t\t\t<div class=\"dijitCalendarYearLabel\">\n\t\t\t\t\t<span data-dojo-attach-point=\"previousYearLabelNode\" class=\"dijitInline dijitCalendarPreviousYear\" role=\"button\"></span>\n\t\t\t\t\t<span data-dojo-attach-point=\"currentYearLabelNode\" class=\"dijitInline dijitCalendarSelectedYear\" role=\"button\" id=\"${id}_year\"></span>\n\t\t\t\t\t<span data-dojo-attach-point=\"nextYearLabelNode\" class=\"dijitInline dijitCalendarNextYear\" role=\"button\"></span>\n\t\t\t\t</div>\n\t\t\t</td>\n\t\t</tr>\n\t</tfoot>\n</table>\n","dojox/charting/Chart2D":function(){define("dojox/charting/Chart2D",["dojo/_base/kernel","dojo/_base/lang","..","./Chart","./axis2d/Default","./axis2d/Invisible","./plot2d/Default","./plot2d/Lines","./plot2d/Areas","./plot2d/Markers","./plot2d/MarkersOnly","./plot2d/Scatter","./plot2d/Stacked","./plot2d/StackedLines","./plot2d/StackedAreas","./plot2d/Columns","./plot2d/StackedColumns","./plot2d/ClusteredColumns","./plot2d/Bars","./plot2d/StackedBars","./plot2d/ClusteredBars","./plot2d/Grid","./plot2d/Pie","./plot2d/Bubble","./plot2d/Candlesticks","./plot2d/OHLC","./plot2d/Spider"],function(_ac1,lang,_ac2,_ac3){_ac1.deprecated("dojox.charting.Chart2D","Use dojox.charting.Chart instead and require all other components explicitly","2.0");return lang.setObject("dojox.charting.Chart2D",_ac3);});},"dojox/gauges/AnalogLineIndicator":function(){define("dojox/gauges/AnalogLineIndicator",["dojo/_base/declare","./AnalogIndicatorBase"],function(_ac4,_ac5){return _ac4("dojox.gauges.AnalogLineIndicator",[_ac5],{_getShapes:function(_ac6){var _ac7=this.direction;var _ac8=this.length;if(_ac7=="inside"){_ac8=-_ac8;}return [_ac6.createLine({x1:0,y1:-this.offset,x2:0,y2:-_ac8-this.offset}).setStroke({color:this.color,width:this.width})];}});});},"dojox/grid/_Scroller":function(){define("dojox/grid/_Scroller",["dijit/registry","dojo/_base/declare","dojo/_base/lang","./util","dojo/_base/html"],function(_ac9,_aca,lang,util,html){var _acb=function(_acc){var i=0,n,p=_acc.parentNode;while((n=p.childNodes[i++])){if(n==_acc){return i-1;}}return -1;};var _acd=function(_ace){if(!_ace){return;}dojo.forEach(_ac9.toArray(),function(w){if(w.domNode&&html.isDescendant(w.domNode,_ace,true)){w.destroy();}});};var _acf=function(_ad0){var node=html.byId(_ad0);return (node&&node.tagName?node.tagName.toLowerCase():"");};var _ad1=function(_ad2,_ad3){var _ad4=[];var i=0,n;while((n=_ad2.childNodes[i])){i++;if(_acf(n)==_ad3){_ad4.push(n);}}return _ad4;};var _ad5=function(_ad6){return _ad1(_ad6,"div");};return _aca("dojox.grid._Scroller",null,{constructor:function(_ad7){this.setContentNodes(_ad7);this.pageHeights=[];this.pageNodes=[];this.stack=[];},rowCount:0,defaultRowHeight:32,keepRows:100,contentNode:null,scrollboxNode:null,defaultPageHeight:0,keepPages:10,pageCount:0,windowHeight:0,firstVisibleRow:0,lastVisibleRow:0,averageRowHeight:0,page:0,pageTop:0,init:function(_ad8,_ad9,_ada){switch(arguments.length){case 3:this.rowsPerPage=_ada;case 2:this.keepRows=_ad9;case 1:this.rowCount=_ad8;default:break;}this.defaultPageHeight=this.defaultRowHeight*this.rowsPerPage;this.pageCount=this._getPageCount(this.rowCount,this.rowsPerPage);this.setKeepInfo(this.keepRows);this.invalidate();if(this.scrollboxNode){this.scrollboxNode.scrollTop=0;this.scroll(0);this.scrollboxNode.onscroll=lang.hitch(this,"onscroll");}},_getPageCount:function(_adb,_adc){return _adb?(Math.ceil(_adb/_adc)||1):0;},destroy:function(){this.invalidateNodes();delete this.contentNodes;delete this.contentNode;delete this.scrollboxNode;},setKeepInfo:function(_add){this.keepRows=_add;this.keepPages=!this.keepRows?this.keepPages:Math.max(Math.ceil(this.keepRows/this.rowsPerPage),2);},setContentNodes:function(_ade){this.contentNodes=_ade;this.colCount=(this.contentNodes?this.contentNodes.length:0);this.pageNodes=[];for(var i=0;i<this.colCount;i++){this.pageNodes[i]=[];}},getDefaultNodes:function(){return this.pageNodes[0]||[];},invalidate:function(){this._invalidating=true;this.invalidateNodes();this.pageHeights=[];this.height=(this.pageCount?(this.pageCount-1)*this.defaultPageHeight+this.calcLastPageHeight():0);this.resize();this._invalidating=false;},updateRowCount:function(_adf){this.invalidateNodes();this.rowCount=_adf;var _ae0=this.pageCount;if(_ae0===0){this.height=1;}this.pageCount=this._getPageCount(this.rowCount,this.rowsPerPage);if(this.pageCount<_ae0){for(var i=_ae0-1;i>=this.pageCount;i--){this.height-=this.getPageHeight(i);delete this.pageHeights[i];}}else{if(this.pageCount>_ae0){this.height+=this.defaultPageHeight*(this.pageCount-_ae0-1)+this.calcLastPageHeight();}}this.resize();},pageExists:function(_ae1){return Boolean(this.getDefaultPageNode(_ae1));},measurePage:function(_ae2){if(this.grid.rowHeight){var _ae3=this.grid.rowHeight+1;return ((_ae2+1)*this.rowsPerPage>this.rowCount?this.rowCount-_ae2*this.rowsPerPage:this.rowsPerPage)*_ae3;}var n=this.getDefaultPageNode(_ae2);return (n&&n.innerHTML)?n.offsetHeight:undefined;},positionPage:function(_ae4,_ae5){for(var i=0;i<this.colCount;i++){this.pageNodes[i][_ae4].style.top=_ae5+"px";}},repositionPages:function(_ae6){var _ae7=this.getDefaultNodes();var last=0;for(var i=0;i<this.stack.length;i++){last=Math.max(this.stack[i],last);}var n=_ae7[_ae6];var y=(n?this.getPageNodePosition(n)+this.getPageHeight(_ae6):0);for(var p=_ae6+1;p<=last;p++){n=_ae7[p];if(n){if(this.getPageNodePosition(n)==y){return;}this.positionPage(p,y);}y+=this.getPageHeight(p);}},installPage:function(_ae8){for(var i=0;i<this.colCount;i++){this.contentNodes[i].appendChild(this.pageNodes[i][_ae8]);}},preparePage:function(_ae9,_aea){var p=(_aea?this.popPage():null);for(var i=0;i<this.colCount;i++){var _aeb=this.pageNodes[i];var _aec=(p===null?this.createPageNode():this.invalidatePageNode(p,_aeb));_aec.pageIndex=_ae9;_aeb[_ae9]=_aec;}},renderPage:function(_aed){var _aee=[];var i,j;for(i=0;i<this.colCount;i++){_aee[i]=this.pageNodes[i][_aed];}for(i=0,j=_aed*this.rowsPerPage;(i<this.rowsPerPage)&&(j<this.rowCount);i++,j++){this.renderRow(j,_aee);}},removePage:function(_aef){for(var i=0,j=_aef*this.rowsPerPage;i<this.rowsPerPage;i++,j++){this.removeRow(j);}},destroyPage:function(_af0){for(var i=0;i<this.colCount;i++){var n=this.invalidatePageNode(_af0,this.pageNodes[i]);if(n){html.destroy(n);}}},pacify:function(_af1){},pacifying:false,pacifyTicks:200,setPacifying:function(_af2){if(this.pacifying!=_af2){this.pacifying=_af2;this.pacify(this.pacifying);}},startPacify:function(){this.startPacifyTicks=new Date().getTime();},doPacify:function(){var _af3=(new Date().getTime()-this.startPacifyTicks)>this.pacifyTicks;this.setPacifying(true);this.startPacify();return _af3;},endPacify:function(){this.setPacifying(false);},resize:function(){if(this.scrollboxNode){this.windowHeight=this.scrollboxNode.clientHeight;}for(var i=0;i<this.colCount;i++){util.setStyleHeightPx(this.contentNodes[i],Math.max(1,this.height));}var _af4=(!this._invalidating);if(!_af4){var ah=this.grid.get("autoHeight");if(typeof ah=="number"&&ah<=Math.min(this.rowsPerPage,this.rowCount)){_af4=true;}}if(_af4){this.needPage(this.page,this.pageTop);}var _af5=(this.page<this.pageCount-1)?this.rowsPerPage:((this.rowCount%this.rowsPerPage)||this.rowsPerPage);var _af6=this.getPageHeight(this.page);this.averageRowHeight=(_af6>0&&_af5>0)?(_af6/_af5):0;},calcLastPageHeight:function(){if(!this.pageCount){return 0;}var _af7=this.pageCount-1;var _af8=((this.rowCount%this.rowsPerPage)||(this.rowsPerPage))*this.defaultRowHeight;this.pageHeights[_af7]=_af8;return _af8;},updateContentHeight:function(inDh){this.height+=inDh;this.resize();},updatePageHeight:function(_af9,_afa,_afb){if(this.pageExists(_af9)){var oh=this.getPageHeight(_af9);var h=(this.measurePage(_af9));if(h===undefined){h=oh;}this.pageHeights[_af9]=h;if(oh!=h){this.updateContentHeight(h-oh);var ah=this.grid.get("autoHeight");if((typeof ah=="number"&&ah>this.rowCount)||(ah===true&&!_afa)){if(!_afb){this.grid.sizeChange();}else{var ns=this.grid.viewsNode.style;ns.height=parseInt(ns.height)+h-oh+"px";this.repositionPages(_af9);}}else{this.repositionPages(_af9);}}return h;}return 0;},rowHeightChanged:function(_afc,_afd){this.updatePageHeight(Math.floor(_afc/this.rowsPerPage),false,_afd);},invalidateNodes:function(){while(this.stack.length){this.destroyPage(this.popPage());}},createPageNode:function(){var p=document.createElement("div");html.attr(p,"role","presentation");p.style.position="absolute";p.style[this.grid.isLeftToRight()?"left":"right"]="0";return p;},getPageHeight:function(_afe){var ph=this.pageHeights[_afe];return (ph!==undefined?ph:this.defaultPageHeight);},pushPage:function(_aff){return this.stack.push(_aff);},popPage:function(){return this.stack.shift();},findPage:function(_b00){var i=0,h=0;for(var ph=0;i<this.pageCount;i++,h+=ph){ph=this.getPageHeight(i);if(h+ph>=_b00){break;}}this.page=i;this.pageTop=h;},buildPage:function(_b01,_b02,_b03){this.preparePage(_b01,_b02);this.positionPage(_b01,_b03);this.installPage(_b01);this.renderPage(_b01);this.pushPage(_b01);},needPage:function(_b04,_b05){var h=this.getPageHeight(_b04),oh=h;if(!this.pageExists(_b04)){this.buildPage(_b04,(!this.grid._autoHeight&&this.keepPages&&(this.stack.length>=this.keepPages)),_b05);h=this.updatePageHeight(_b04,true);}else{this.positionPage(_b04,_b05);}return h;},onscroll:function(){this.scroll(this.scrollboxNode.scrollTop);},scroll:function(_b06){this.grid.scrollTop=_b06;if(this.colCount){this.startPacify();this.findPage(_b06);var h=this.height;var b=this.getScrollBottom(_b06);for(var p=this.page,y=this.pageTop;(p<this.pageCount)&&((b<0)||(y<b));p++){y+=this.needPage(p,y);}this.firstVisibleRow=this.getFirstVisibleRow(this.page,this.pageTop,_b06);this.lastVisibleRow=this.getLastVisibleRow(p-1,y,b);if(h!=this.height){this.repositionPages(p-1);}this.endPacify();}},getScrollBottom:function(_b07){return (this.windowHeight>=0?_b07+this.windowHeight:-1);},processNodeEvent:function(e,_b08){var t=e.target;while(t&&(t!=_b08)&&t.parentNode&&(t.parentNode.parentNode!=_b08)){t=t.parentNode;}if(!t||!t.parentNode||(t.parentNode.parentNode!=_b08)){return false;}var page=t.parentNode;e.topRowIndex=page.pageIndex*this.rowsPerPage;e.rowIndex=e.topRowIndex+_acb(t);e.rowTarget=t;return true;},processEvent:function(e){return this.processNodeEvent(e,this.contentNode);},renderRow:function(_b09,_b0a){},removeRow:function(_b0b){},getDefaultPageNode:function(_b0c){return this.getDefaultNodes()[_b0c];},positionPageNode:function(_b0d,_b0e){},getPageNodePosition:function(_b0f){return _b0f.offsetTop;},invalidatePageNode:function(_b10,_b11){var p=_b11[_b10];if(p){delete _b11[_b10];this.removePage(_b10,p);_acd(p);p.innerHTML="";}return p;},getPageRow:function(_b12){return _b12*this.rowsPerPage;},getLastPageRow:function(_b13){return Math.min(this.rowCount,this.getPageRow(_b13+1))-1;},getFirstVisibleRow:function(_b14,_b15,_b16){if(!this.pageExists(_b14)){return 0;}var row=this.getPageRow(_b14);var _b17=this.getDefaultNodes();var rows=_ad5(_b17[_b14]);for(var i=0,l=rows.length;i<l&&_b15<_b16;i++,row++){_b15+=rows[i].offsetHeight;}return (row?row-1:row);},getLastVisibleRow:function(_b18,_b19,_b1a){if(!this.pageExists(_b18)){return 0;}var _b1b=this.getDefaultNodes();var row=this.getLastPageRow(_b18);var rows=_ad5(_b1b[_b18]);for(var i=rows.length-1;i>=0&&_b19>_b1a;i--,row--){_b19-=rows[i].offsetHeight;}return row+1;},findTopRow:function(_b1c){var _b1d=this.getDefaultNodes();var rows=_ad5(_b1d[this.page]);for(var i=0,l=rows.length,t=this.pageTop,h;i<l;i++){h=rows[i].offsetHeight;t+=h;if(t>=_b1c){this.offset=h-(t-_b1c);return i+this.page*this.rowsPerPage;}}return -1;},findScrollTop:function(_b1e){var _b1f=Math.floor(_b1e/this.rowsPerPage);var t=0;var i,l;for(i=0;i<_b1f;i++){t+=this.getPageHeight(i);}this.pageTop=t;this.page=_b1f;this.needPage(_b1f,this.pageTop);var _b20=this.getDefaultNodes();var rows=_ad5(_b20[_b1f]);var r=_b1e-this.rowsPerPage*_b1f;for(i=0,l=rows.length;i<l&&i<r;i++){t+=rows[i].offsetHeight;}return t;},dummy:0});});},"esri/dijit/editing/tools/ToolBase":function(){define("esri/dijit/editing/tools/ToolBase",["dijit","dojo","dojox","dojo/require!esri/toolbars/draw"],function(_b21,dojo,_b22){dojo.provide("esri.dijit.editing.tools.ToolBase");dojo.require("esri.toolbars.draw");dojo.declare("esri.dijit.editing.tools.ToolBase",null,{_enabled:true,showLabel:false,constructor:function(_b23,_b24){_b23=_b23||{};dojo.mixin(this,_b23);this.label=this._label?esri.bundle.widgets.editor.tools[this._label]:"";this._settings=_b23.settings;this._toolbar=_b23.settings.drawToolbar;this._editToolbar=_b23.settings.editToolbar;this._initializeTool();},onFinished:function(){},onDrawEnd:function(){},onApplyEdits:function(){},postCreate:function(){this.deactivate();this.inherited(arguments);},destroy:function(){},activate:function(_b25){if(this._toolbar){this._toolbar.deactivate();}if(this._editToolbar){this._editToolbar.deactivate();}if(!this._enabled){return;}this._checked=true;this._layer=_b25;if(this._toolbar&&this._drawType){this._toolbar.activate(this._drawType);}},deactivate:function(){if(this._toolbar){this._toolbar.deactivate();}if(this._editToolbar){this._editToolbar.deactivate();}this.setChecked(false);this._updateUI();},setEnabled:function(_b26){this._enabled=_b26;this._updateUI();},setChecked:function(_b27){this._checked=_b27;},enable:function(_b28){this._updateUI();},isEnabled:function(){return _enabled;},getToolName:function(){return this._toolName;},_initializeTool:function(){},_updateUI:function(){this.disabled=!this._enabled;this.attr("iconClass",this._enabled?this._enabledIcon:this._disabledIcon);}});});},"esri/dijit/Gallery":function(){define("esri/dijit/Gallery",["dijit","dojo","dojox","dojo/require!esri/dijit/_TouchBase"],function(_b29,dojo,_b2a){dojo.provide("esri.dijit.Gallery");dojo.require("esri.dijit._TouchBase");dojo.declare("esri.dijit.Gallery",null,{container:null,_items:[],_currentIndex:0,_left:0,_offset:10,_slideDiv:null,_thumbnailStyle:"default",_focusedIndex:null,_selectedIndex:-1,_slideStep:1,_showTitle:true,constructor:function(_b2b,_b2c){this.container=dojo.byId(_b2c);this._touchBase=esri.dijit._TouchBase(this.container,null);this._slideDiv=dojo.create("div",{"class":"slideContainer"},this.container,"first");this.events=[dojo.connect(this._touchBase,"onTouchStart",this,this._onTouchStartHandler),dojo.connect(this._touchBase,"onTouchMove",this,this._onTouchMoveHandler),dojo.connect(this._touchBase,"onTouchEnd",this,this._onTouchEndHandler),dojo.connect(this._touchBase,"onclick",this,this._onClickHandler)];this._resizeHandle=dojo.connect(window,"onorientationchange",dojo.hitch(this,this._onResizeHandler));this._items=_b2b.items;if(_b2b.thumbnailStyle&&_b2b.thumbnailStyle=="small"){this._thumbnailStyle="small";this._offset=4;this._slideStep=3;this._thumbnailWidth=100;}else{this._thumbnailStyle="default";this._offset=10;this._slideStep=1;this._thumbnailWidth=200;}if(_b2b.showTitle==false){this._showTitle=false;}this.container.setAttribute((document.all?"className":"class"),"esriMobileGallery");var _b2d,_b2e;for(var i=0;i<this._items.length;i++){var div,_b2f,_b30,img;div=dojo.create("div",{"class":"thumbnailcontainer"},this._slideDiv);img=dojo.create("img",{"class":"thumbnail",src:this._items[i].thumbnailUrl},div);img._index=i;img._item=this._items[i];_b2f=dojo.create("div",{"class":"title","innerHTML":this._items[i].title},div);_b30=dojo.create("div",{"class":"title"},div);if(this._thumbnailStyle=="small"){dojo.addClass(div,"small");dojo.addClass(img,"small");dojo.addClass(_b2f,"small");dojo.addClass(_b30,"small");dojo.addClass(this._slideDiv,"small");}if(!this._showTitle){_b2f.style.display="none";}_b2e=dojo.contentBox(div).h;if(!_b2d){_b2d=_b2e;}if(_b2e>_b2d){_b2d=_b2e;}}for(var i=0;i<this._slideDiv.childNodes.length;i++){dojo.contentBox(this._slideDiv.childNodes[i],{h:_b2d});}this._thumbnailWidth=dojo.contentBox(this._slideDiv.childNodes[0]).w;this._slideDiv.style.width=this._items.length*(this._thumbnailWidth+this._offset)+"px";if(window.orientation){if(window.orientation==90||window.orientation==-90){dojo.addClass(this.container,"galleryLandscape");}}this._calculateSlideStep();},startup:function(){this._focusedIndex=0;this.onFocus(this._items[this._focusedIndex]);},destroy:function(){dojo.forEach(this.events,dojo.disconnect);dojo.disconnect(this._resizeHandle);this._touchBase=null;dojo.query("img",this.container).forEach(function(node){node._index=null;node._item=null;dojo.destroy(node);node=null;});this._items=null;dojo.destroy(this._slideDiv);dojo.destroy(this.container);this.container=this._slideDiv=null;},setFocus:function(item){if(!item){return;}for(var i=0,il=this._items.length;i<il;i++){if(this._items[i]==item){this._setFocus(i);this.onFocus(this._items[this._focusedIndex]);}}},select:function(item){if(!item){return;}for(var i=0,il=this._items.length;i<il;i++){if(this._items[i]==item){if(this._selectedIndex!=-1){this.onUnSelect(this._items[this._selectedIndex]);}this._select(i);this.onSelect(this._items[this._selectedIndex]);break;}}},getFocusedItem:function(){return this._items[this._focusedIndex];},getSelectedItem:function(){return this._items[this._selectedIndex];},next:function(){this._next();this._startTransition();this.onFocus(this._items[this._currentIndex]);},previous:function(){this._previous();this._startTransition();this.onFocus(this._items[this._currentIndex]);},getTitleNode:function(item){if(!item){return;}for(var i=0,il=this._items.length;i<il;i++){if(this._items[i]==item){return this._slideDiv.childNodes[i].childNodes[1];break;}}},getInfoNode:function(item){if(!item){return;}for(var i=0,il=this._items.length;i<il;i++){if(this._items[i]==item){return this._slideDiv.childNodes[i].childNodes[2];break;}}},showTitle:function(item){if(!item){return;}for(var i=0,il=this._items.length;i<il;i++){if(this._items[i]==item){this._slideDiv.childNodes[i].childNodes[1].style.display="block";break;}}},hideTitle:function(item){if(!item){return;}for(var i=0,il=this._items.length;i<il;i++){if(this._items[i]==item){this._slideDiv.childNodes[i].childNodes[1].style.display="none";break;}}},onFocus:function(item){},onSelect:function(item){},onUnSelect:function(item){},_onClickHandler:function(e){if(e.target instanceof HTMLImageElement){var _b31=e.target._index;if(this._selectedIndex!=-1){this.onUnSelect(this._items[this._selectedIndex]);}this._select(_b31);this.onSelect(this._items[this._selectedIndex]);}},_onTouchStartHandler:function(e){this._moveDirection=null;this._left=this._currentIndex*(-(this._thumbnailWidth)-this._offset);this._slideDiv.style.WebkitTransitionDuration="0s";},_onTouchMoveHandler:function(e){if(!this._moveDirection){if(Math.abs(e.curY)>Math.abs(e.curX)){this._moveDirection="vertical";}else{this._moveDirection="horizontal";}}if(this._moveDirection=="vertical"){if(!this._touchBase._preventDefault==false){this._touchBase._preventDefault=false;}return;}else{if(this._moveDirection=="horizontal"){if(!this._touchBase._preventDefault){this._touchBase._preventDefault=true;}var _b32=this._left+e.curX;this._slideDiv.style.webkitTransform="translate3d("+_b32+"px, 0, 0)";}}},_onTouchEndHandler:function(e){var _b33=this._currentIndex;this._slideDiv.style.WebkitTransitionDuration="0.5s";if(e.swipeDirection=="left"){this._next();}else{if(e.swipeDirection=="right"){this._previous();}}this._left=this._currentIndex*(-(this._thumbnailWidth)-this._offset);this._slideDiv.style.webkitTransform="translate3d("+this._left+"px, 0, 0)";if(_b33!=this._currentIndex){this.onFocus(this._items[this._currentIndex]);}},_onResizeHandler:function(e){var _b34=window.orientation;switch(_b34){case 0:dojo.removeClass(this.container,"galleryLandscape");break;case 90:case -90:dojo.addClass(this.container,"galleryLandscape");break;}this._calculateSlideStep();},_startTransition:function(){this._slideDiv.style.WebkitTransitionDuration="0.5s";this._left=this._currentIndex*(-(this._thumbnailWidth)-this._offset);this._slideDiv.style.webkitTransform="translate3d("+this._left+"px, 0, 0)";},_markUnSelected:function(_b35){dojo.removeClass(_b35,"selected");dojo.removeClass(_b35.parentNode,"selected");dojo.removeClass(_b35.parentNode.childNodes[1],"selected");dojo.removeClass(_b35.parentNode.childNodes[2],"selected");},_markSelected:function(_b36){dojo.addClass(_b36,"selected");dojo.addClass(_b36.parentNode,"selected");dojo.addClass(_b36.parentNode.childNodes[1],"selected");dojo.addClass(_b36.parentNode.childNodes[2],"selected");},_next:function(){if(this._currentIndex+this._slideStep<this._items.length){this._currentIndex+=this._slideStep;this._focusedIndex=this._currentIndex;}},_previous:function(){if(this._currentIndex-this._slideStep>=0){this._currentIndex-=this._slideStep;}this._focusedIndex=this._currentIndex;},_setFocus:function(_b37){this._focusedIndex=_b37;this._currentIndex=Math.floor(_b37/this._slideStep)*this._slideStep;this._startTransition();},_select:function(_b38){if(this._selectedIndex!=-1){this._markUnSelected(this._slideDiv.childNodes[this._selectedIndex].childNodes[0]);}this._selectedIndex=_b38;this._markSelected(this._slideDiv.childNodes[this._selectedIndex].childNodes[0]);},_calculateSlideStep:function(){var _b39=dojo.contentBox(this.container);var step=Math.floor((_b39.w+this._offset)/(this._thumbnailWidth+this._offset));if(step>=1){var _b3a=_b39.w-(this._thumbnailWidth+this._offset)*step;if(_b3a>0){this._slideDiv.style.marginLeft=Math.floor(_b3a/2)+"px";}else{this._slideDiv.style.marginLeft="0px";}this._slideStep=step;}else{this._slideStep=1;}if(this._selectedIndex!=-1){this._setFocus(this._selectedIndex);}else{this._setFocus(this._focusedIndex);}}});});},"dojox/charting/Theme":function(){define("dojox/charting/Theme",["dojo/_base/lang","dojo/_base/declare","dojo/_base/Color","./SimpleTheme","dojox/color/_base","dojox/color/Palette","dojox/gfx/gradutils"],function(lang,_b3b,_b3c,_b3d,_b3e,_b3f){var _b40=_b3b("dojox.charting.Theme",_b3d,{});lang.mixin(_b40,{defineColors:function(_b41){_b41=_b41||{};var l,c=[],n=_b41.num||5;if(_b41.colors){l=_b41.colors.length;for(var i=0;i<n;i++){c.push(_b41.colors[i%l]);}return c;}if(_b41.hue){var s=_b41.saturation||100,st=_b41.low||30,end=_b41.high||90;l=(end+st)/2;return _b3f.generate(_b3e.fromHsv(_b41.hue,s,l),"monochromatic").colors;}if(_b41.generator){return _b3e.Palette.generate(_b41.base,_b41.generator).colors;}return c;},generateGradient:function(_b42,_b43,_b44){var fill=lang.delegate(_b42);fill.colors=[{offset:0,color:_b43},{offset:1,color:_b44}];return fill;},generateHslColor:function(_b45,_b46){_b45=new _b3c(_b45);var hsl=_b45.toHsl(),_b47=_b3e.fromHsl(hsl.h,hsl.s,_b46);_b47.a=_b45.a;return _b47;},generateHslGradient:function(_b48,_b49,_b4a,_b4b){_b48=new _b3c(_b48);var hsl=_b48.toHsl(),_b4c=_b3e.fromHsl(hsl.h,hsl.s,_b4a),_b4d=_b3e.fromHsl(hsl.h,hsl.s,_b4b);_b4c.a=_b4d.a=_b48.a;return _b40.generateGradient(_b49,_b4c,_b4d);}});_b40.defaultMarkers=_b3d.defaultMarkers;_b40.defaultColors=_b3d.defaultColors;_b40.defaultTheme=_b3d.defaultTheme;return _b40;});},"dojo/data/util/sorter":function(){define(["../../_base/lang"],function(lang){var _b4e={};lang.setObject("dojo.data.util.sorter",_b4e);_b4e.basicComparator=function(a,b){var r=-1;if(a===null){a=undefined;}if(b===null){b=undefined;}if(a==b){r=0;}else{if(a>b||a==null){r=1;}}return r;};_b4e.createSortFunction=function(_b4f,_b50){var _b51=[];function _b52(attr,dir,comp,s){return function(_b53,_b54){var a=s.getValue(_b53,attr);var b=s.getValue(_b54,attr);return dir*comp(a,b);};};var _b55;var map=_b50.comparatorMap;var bc=_b4e.basicComparator;for(var i=0;i<_b4f.length;i++){_b55=_b4f[i];var attr=_b55.attribute;if(attr){var dir=(_b55.descending)?-1:1;var comp=bc;if(map){if(typeof attr!=="string"&&("toString" in attr)){attr=attr.toString();}comp=map[attr]||bc;}_b51.push(_b52(attr,dir,comp,_b50));}}return function(rowA,rowB){var i=0;while(i<_b51.length){var ret=_b51[i++](rowA,rowB);if(ret!==0){return ret;}}return 0;};};return _b4e;});},"esri/toolbars/_VertexMover":function(){define("esri/toolbars/_VertexMover",["dijit","dojo","dojox","dojo/require!dojox/gfx/move"],function(_b56,dojo,_b57){dojo.provide("esri.toolbars._VertexMover");dojo.require("dojox.gfx.move");dojo.declare("esri.toolbars.VertexMover",null,{constructor:function(_b58,_b59,_b5a,_b5b,_b5c,_b5d,_b5e,_b5f){this.point=_b58;this.symbol=_b59;this.relatedGraphic=_b5a;this.segIndex=_b5b;this.ptIndex=_b5c;this.segLength=_b5d;this.editor=_b5e;this.map=_b5e.map;this._scratchGL=_b5e.toolbar._scratchGL;this._placeholder=_b5f||false;this._type=_b5a.geometry.type;this._init();this._enable();},refresh:function(_b60){if(_b60||this._needRefresh()){this._disable();this._enable();}},destroy:function(){this._disable();if(this.graphic){this._scratchGL.remove(this.graphic);}this.point=this.symbol=this.graphic=this.relatedGraphic=this.segIndex=this.ptIndex=this.segLength=this.editor=this.map=this._scratchGL=null;},_init:function(){var _b61=new esri.geometry.Point(this.point.toJson());var _b62=new esri.Graphic(_b61,this.symbol);switch(this._type){case "multipoint":_b62._shape=this.relatedGraphic.getDojoShape().children[this.ptIndex];break;case "polyline":case "polygon":this._scratchGL.add(_b62);break;}this.graphic=_b62;},_enable:function(){var _b63=this.graphic.getDojoShape();if(_b63){_b63._hasMover=true;this._moveable=this._getMoveable(_b63);var node=_b63.getEventSource();if(node){dojo.style(node,"cursor",this.editor.toolbar._cursors[this._placeholder?"move-gv":"move-v"]);}}},_disable:function(){var _b64=this._moveable;if(_b64){dojo.disconnect(this._startHandle);dojo.disconnect(this._firstHandle);dojo.disconnect(this._movingHandle);dojo.disconnect(this._stopHandle);var _b65=_b64.shape;if(_b65){var node=_b65.getEventSource();if(node){dojo.style(node,"cursor",null);}}_b64.destroy();this._moveable=null;}},_needRefresh:function(){var _b66=this.graphic.getDojoShape(),need=false;if(_b66){switch(this._type){case "multipoint":var _b67=this.relatedGraphic.getDojoShape();if(_b67){var _b68=_b67.children[this.ptIndex];if(_b66!==_b68){_b66=_b68;this.graphic._shape=_b66;need=true;}}break;case "polyline":case "polygon":need=!_b66._hasMover;break;}}return need;},_getMoveable:function(_b69){var _b6a=new _b57.gfx.Moveable(_b69,dojo.isMac&&dojo.isFF&&!esri.isTouchEnabled&&{leftButtonOnly:true});this._startHandle=dojo.connect(_b6a,"onMoveStart",this,this._moveStartHandler);this._firstHandle=dojo.connect(_b6a,"onFirstMove",this,this._firstMoveHandler);this._movingHandle=dojo.connect(_b6a,"onMoving",this,this._movingHandler);this._stopHandle=dojo.connect(_b6a,"onMoveStop",this,this._moveStopHandler);return _b6a;},_getPtIndex:function(){return this.ptIndex+(this._placeholder?1:0);},_getInfo:function(){return {graphic:this.graphic,isGhost:this._placeholder,segmentIndex:this.segIndex,pointIndex:this._getPtIndex()};},_moveStartHandler:function(_b6b){var map=this.map;if(map.snappingManager){map.snappingManager._setUpSnapping();}_b6b.shape.moveToFront();this.constructor.onMoveStart(this);this.editor.toolbar.onVertexMoveStart(this.relatedGraphic,this._getInfo());},_firstMoveHandler:function(_b6c){var _b6d=_b6c.shape;var _b6e=this._getControlEdges();var _b6f=this._scratchGL._div;var i,_b70=[],_b71=_b6c.host.shape._wrapOffsets[0]||0;for(i=0;i<_b6e.length;i++){var edge=_b6e[i];edge.x1+=_b71;edge.x2+=_b71;_b70.push([_b6f.createLine({x1:edge.x1,y1:edge.y1,x2:edge.x2,y2:edge.y2}).setStroke(this.editor._lineStroke),edge.x1,edge.y1,edge.x2,edge.y2]);}_b6d._lines=_b70;_b6c.shape.moveToFront();this.constructor.onFirstMove(this);this.editor.toolbar.onVertexFirstMove(this.relatedGraphic,this._getInfo());},_movingHandler:function(_b72){var _b73=_b72.shape,tx=_b73.getTransform();var i,_b74=_b73._lines;for(i=0;i<_b74.length;i++){var line=_b74[i];line[0].setShape({x1:line[1]+tx.dx,y1:line[2]+tx.dy,x2:line[3],y2:line[4]});}this.editor.toolbar.onVertexMove(this.relatedGraphic,this._getInfo(),tx);},_moveStopHandler:function(_b75){var _b76=_b75.shape,_b77=this.editor.toolbar,tx=_b76.getTransform(),map=this.map,host=this.graphic,_b78=_b77._geo?esri.geometry.geographicToWebMercator(host.geometry):host.geometry;var i,_b79=_b76._lines;if(_b79){for(i=0;i<_b79.length;i++){_b79[i][0].removeShape();}_b76._lines=null;}var ph=false,_b7a=true,info=this._getInfo();if(tx&&(tx.dx||tx.dy)){if(this._placeholder){this._placeholder=false;ph=true;}}else{_b7a=false;}var _b7b;if(map.snappingManager){_b7b=map.snappingManager._snappingPoint;}var _b7c=_b7b||map.toMap(map.toScreen(_b78).offset(tx.dx,tx.dy));if(map.snappingManager){map.snappingManager._killOffSnapping();}_b76.setTransform(null);host.setGeometry(_b77._geo?esri.geometry.webMercatorToGeographic(_b7c,true):_b7c);this.constructor.onMoveStop(this,tx);_b77.onVertexMoveStop(this.relatedGraphic,info,tx);if(!_b7a){_b77.onVertexClick(this.relatedGraphic,info);}if(ph){_b77.onVertexAdd(this.relatedGraphic,this._getInfo());}},_getControlEdges:function(){var map=this.map;var _b7d=this.relatedGraphic.geometry;var _b7e=this.segIndex,_b7f=this.ptIndex,_b80=this.segLength;var _b81=this._scratchGL._div;var _b82=_b81.getTransform();var sdx=_b82.dx,sdy=_b82.dy;var pt=map.toScreen(this.graphic.geometry);var x=pt.x-sdx,y=pt.y-sdy;var _b83=[];var _b84=this.editor._getControlPoints(this,_b7d,_b7e,_b7f,_b80);if(_b84[0]){_b83.push({x1:x,y1:y,x2:_b84[0].x-sdx,y2:_b84[0].y-sdy});}if(_b84[1]){_b83.push({x1:x,y1:y,x2:_b84[1].x-sdx,y2:_b84[1].y-sdy});}return _b83;}});dojo.mixin(esri.toolbars.VertexMover,{onMoveStart:function(){},onFirstMove:function(){},onMoveStop:function(){}});});},"dojo/DeferredList":function(){define(["./_base/kernel","./_base/Deferred","./_base/array"],function(dojo,_b85,_b86){dojo.DeferredList=function(list,_b87,_b88,_b89,_b8a){var _b8b=[];_b85.call(this);var self=this;if(list.length===0&&!_b87){this.resolve([0,[]]);}var _b8c=0;_b86.forEach(list,function(item,i){item.then(function(_b8d){if(_b87){self.resolve([i,_b8d]);}else{_b8e(true,_b8d);}},function(_b8f){if(_b88){self.reject(_b8f);}else{_b8e(false,_b8f);}if(_b89){return null;}throw _b8f;});function _b8e(_b90,_b91){_b8b[i]=[_b90,_b91];_b8c++;if(_b8c===list.length){self.resolve(_b8b);}};});};dojo.DeferredList.prototype=new _b85();dojo.DeferredList.prototype.gatherResults=function(_b92){var d=new dojo.DeferredList(_b92,false,true,false);d.addCallback(function(_b93){var ret=[];_b86.forEach(_b93,function(_b94){ret.push(_b94[1]);});return ret;});return d;};return dojo.DeferredList;});},"esri/dijit/editing/tools/MenuItemBase":function(){define("esri/dijit/editing/tools/MenuItemBase",["dijit","dojo","dojox","dojo/require!esri/dijit/editing/tools/ToolBase,dijit/MenuItem,esri/toolbars/draw"],function(_b95,dojo,_b96){dojo.provide("esri.dijit.editing.tools.MenuItemBase");dojo.require("esri.dijit.editing.tools.ToolBase");dojo.require("dijit.MenuItem");dojo.require("esri.toolbars.draw");dojo.declare("esri.dijit.editing.tools.MenuItemBase",[_b95.MenuItem,esri.dijit.editing.tools.ToolBase],{destroy:function(){_b95.MenuItem.prototype.destroy.apply(this,arguments);esri.dijit.editing.tools.ToolBase.prototype.destroy.apply(this,arguments);}});});},"dojox/charting/plot2d/StackedLines":function(){define("dojox/charting/plot2d/StackedLines",["dojo/_base/declare","./Stacked"],function(_b97,_b98){return _b97("dojox.charting.plot2d.StackedLines",_b98,{constructor:function(){this.opt.lines=true;}});});},"dojox/charting/axis2d/Default":function(){define("dojox/charting/axis2d/Default",["dojo/_base/lang","dojo/_base/array","dojo/_base/sniff","dojo/_base/declare","dojo/_base/connect","dojo/dom-geometry","./Invisible","../scaler/common","../scaler/linear","./common","dojox/gfx","dojox/lang/utils","dojox/lang/functional"],function(lang,arr,has,_b99,_b9a,_b9b,_b9c,_b9d,lin,_b9e,g,du,df){var _b9f=45;return _b99("dojox.charting.axis2d.Default",_b9c,{defaultParams:{vertical:false,fixUpper:"none",fixLower:"none",natural:false,leftBottom:true,includeZero:false,fixed:true,majorLabels:true,minorTicks:true,minorLabels:true,microTicks:false,rotation:0,htmlLabels:true,enableCache:false,dropLabels:true,labelSizeChange:false},optionalParams:{min:0,max:1,from:0,to:1,majorTickStep:4,minorTickStep:2,microTickStep:1,labels:[],labelFunc:null,maxLabelSize:0,maxLabelCharCount:0,trailingSymbol:null,stroke:{},majorTick:{},minorTick:{},microTick:{},tick:{},font:"",fontColor:"",title:"",titleGap:0,titleFont:"",titleFontColor:"",titleOrientation:""},constructor:function(_ba0,_ba1){this.opt=lang.clone(this.defaultParams);du.updateWithObject(this.opt,_ba1);du.updateWithPattern(this.opt,_ba1,this.optionalParams);if(this.opt.enableCache){this._textFreePool=[];this._lineFreePool=[];this._textUsePool=[];this._lineUsePool=[];}this._invalidMaxLabelSize=true;},setWindow:function(_ba2,_ba3){if(_ba2!=this.scale){this._invalidMaxLabelSize=true;}return this.inherited(arguments);},_groupLabelWidth:function(_ba4,font,_ba5){if(!_ba4.length){return 0;}if(_ba4.length>50){_ba4.length=50;}if(lang.isObject(_ba4[0])){_ba4=df.map(_ba4,function(_ba6){return _ba6.text;});}if(_ba5){_ba4=df.map(_ba4,function(_ba7){return lang.trim(_ba7).length==0?"":_ba7.substring(0,_ba5)+this.trailingSymbol;},this);}var s=_ba4.join("<br>");return g._base._getTextBox(s,{font:font}).w||0;},_getMaxLabelSize:function(min,max,span,_ba8,font,size){if(this._maxLabelSize==null&&arguments.length==6){var o=this.opt;this.scaler.minMinorStep=this._prevMinMinorStep=0;var ob=lang.clone(o);delete ob.to;delete ob.from;var sb=lin.buildScaler(min,max,span,ob,o.to-o.from);sb.minMinorStep=0;this._majorStart=sb.major.start;var tb=lin.buildTicks(sb,o);if(size&&tb){var _ba9=0,_baa=0;var _bab=function(tick){if(tick.label){this.push(tick.label);}};var _bac=[];if(this.opt.majorLabels){arr.forEach(tb.major,_bab,_bac);_ba9=this._groupLabelWidth(_bac,font,ob.maxLabelCharCount);if(ob.maxLabelSize){_ba9=Math.min(ob.maxLabelSize,_ba9);}}_bac=[];if(this.opt.dropLabels&&this.opt.minorLabels){arr.forEach(tb.minor,_bab,_bac);_baa=this._groupLabelWidth(_bac,font,ob.maxLabelCharCount);if(ob.maxLabelSize){_baa=Math.min(ob.maxLabelSize,_baa);}}this._maxLabelSize={majLabelW:_ba9,minLabelW:_baa,majLabelH:size,minLabelH:size};}else{this._maxLabelSize=null;}}return this._maxLabelSize;},calculate:function(min,max,span){this.inherited(arguments);this.scaler.minMinorStep=this._prevMinMinorStep;if((this._invalidMaxLabelSize||span!=this._oldSpan)&&(min!=Infinity&&max!=-Infinity)){this._invalidMaxLabelSize=false;if(this.opt.labelSizeChange){this._maxLabelSize=null;}this._oldSpan=span;var o=this.opt;var ta=this.chart.theme.axis,_bad=o.rotation%360,_bae=this.chart.theme.axis.tick.labelGap,font=o.font||(ta.majorTick&&ta.majorTick.font)||(ta.tick&&ta.tick.font),size=font?g.normalizedLength(g.splitFontString(font).size):0,_baf=this._getMaxLabelSize(min,max,span,_bad,font,size);if(typeof _bae!="number"){_bae=4;}if(_baf&&o.dropLabels){var cosr=Math.abs(Math.cos(_bad*Math.PI/180)),sinr=Math.abs(Math.sin(_bad*Math.PI/180));var _bb0,_bb1;if(_bad<0){_bad+=360;}switch(_bad){case 0:case 180:if(this.vertical){_bb0=_bb1=size;}else{_bb0=_baf.majLabelW;_bb1=_baf.minLabelW;}break;case 90:case 270:if(this.vertical){_bb0=_baf.majLabelW;_bb1=_baf.minLabelW;}else{_bb0=_bb1=size;}break;default:_bb0=this.vertical?Math.min(_baf.majLabelW,size/cosr):Math.min(_baf.majLabelW,size/sinr);var gap1=Math.sqrt(_baf.minLabelW*_baf.minLabelW+size*size),gap2=this.vertical?size*cosr+_baf.minLabelW*sinr:_baf.minLabelW*cosr+size*sinr;_bb1=Math.min(gap1,gap2);break;}this.scaler.minMinorStep=this._prevMinMinorStep=Math.max(_bb0,_bb1)+_bae;var _bb2=this.scaler.minMinorStep<=this.scaler.minor.tick*this.scaler.bounds.scale;if(!_bb2){this._skipInterval=Math.floor((_bb0+_bae)/(this.scaler.major.tick*this.scaler.bounds.scale));}else{this._skipInterval=0;}}else{this._skipInterval=0;}}this.ticks=lin.buildTicks(this.scaler,this.opt);return this;},getOffsets:function(){var s=this.scaler,_bb3={l:0,r:0,t:0,b:0};if(!s){return _bb3;}var o=this.opt,a,b,c,d,gl=_b9d.getNumericLabel,_bb4=0,ma=s.major,mi=s.minor,ta=this.chart.theme.axis,_bb5=this.chart.theme.axis.tick.labelGap,_bb6=o.titleFont||(ta.title&&ta.title.font),_bb7=(o.titleGap==0)?0:o.titleGap||(ta.title&&ta.title.gap),_bb8=this.chart.theme.getTick("major",o),_bb9=this.chart.theme.getTick("minor",o),_bba=_bb6?g.normalizedLength(g.splitFontString(_bb6).size):0,_bbb=o.rotation%360,_bbc=o.leftBottom,cosr=Math.abs(Math.cos(_bbb*Math.PI/180)),sinr=Math.abs(Math.sin(_bbb*Math.PI/180));this.trailingSymbol=(o.trailingSymbol===undefined||o.trailingSymbol===null)?this.trailingSymbol:o.trailingSymbol;if(typeof _bb5!="number"){_bb5=4;}if(_bbb<0){_bbb+=360;}var _bbd=this._getMaxLabelSize();if(_bbd){var side;var _bbe=Math.ceil(Math.max(_bbd.majLabelW,_bbd.minLabelW))+1,size=Math.ceil(Math.max(_bbd.majLabelH,_bbd.minLabelH))+1;if(this.vertical){side=_bbc?"l":"r";switch(_bbb){case 0:case 180:_bb3[side]=_bbe;_bb3.t=_bb3.b=size/2;break;case 90:case 270:_bb3[side]=size;_bb3.t=_bb3.b=_bbe/2;break;default:if(_bbb<=_b9f||(180<_bbb&&_bbb<=(180+_b9f))){_bb3[side]=size*sinr/2+_bbe*cosr;_bb3[_bbc?"t":"b"]=size*cosr/2+_bbe*sinr;_bb3[_bbc?"b":"t"]=size*cosr/2;}else{if(_bbb>(360-_b9f)||(180>_bbb&&_bbb>(180-_b9f))){_bb3[side]=size*sinr/2+_bbe*cosr;_bb3[_bbc?"b":"t"]=size*cosr/2+_bbe*sinr;_bb3[_bbc?"t":"b"]=size*cosr/2;}else{if(_bbb<90||(180<_bbb&&_bbb<270)){_bb3[side]=size*sinr+_bbe*cosr;_bb3[_bbc?"t":"b"]=size*cosr+_bbe*sinr;}else{_bb3[side]=size*sinr+_bbe*cosr;_bb3[_bbc?"b":"t"]=size*cosr+_bbe*sinr;}}}break;}_bb3[side]+=_bb5+Math.max(_bb8.length,_bb9.length)+(o.title?(_bba+_bb7):0);}else{side=_bbc?"b":"t";switch(_bbb){case 0:case 180:_bb3[side]=size;_bb3.l=_bb3.r=_bbe/2;break;case 90:case 270:_bb3[side]=_bbe;_bb3.l=_bb3.r=size/2;break;default:if((90-_b9f)<=_bbb&&_bbb<=90||(270-_b9f)<=_bbb&&_bbb<=270){_bb3[side]=size*cosr/2+_bbe*sinr;_bb3[_bbc?"r":"l"]=size*sinr/2+_bbe*cosr;_bb3[_bbc?"l":"r"]=size*sinr/2;}else{if(90<=_bbb&&_bbb<=(90+_b9f)||270<=_bbb&&_bbb<=(270+_b9f)){_bb3[side]=size*cosr/2+_bbe*sinr;_bb3[_bbc?"l":"r"]=size*sinr/2+_bbe*cosr;_bb3[_bbc?"r":"l"]=size*sinr/2;}else{if(_bbb<_b9f||(180<_bbb&&_bbb<(180+_b9f))){_bb3[side]=size*cosr+_bbe*sinr;_bb3[_bbc?"r":"l"]=size*sinr+_bbe*cosr;}else{_bb3[side]=size*cosr+_bbe*sinr;_bb3[_bbc?"l":"r"]=size*sinr+_bbe*cosr;}}}break;}_bb3[side]+=_bb5+Math.max(_bb8.length,_bb9.length)+(o.title?(_bba+_bb7):0);}}return _bb3;},cleanGroup:function(_bbf){if(this.opt.enableCache&&this.group){this._lineFreePool=this._lineFreePool.concat(this._lineUsePool);this._lineUsePool=[];this._textFreePool=this._textFreePool.concat(this._textUsePool);this._textUsePool=[];}this.inherited(arguments);},createText:function(_bc0,_bc1,x,y,_bc2,_bc3,font,_bc4,_bc5){if(!this.opt.enableCache||_bc0=="html"){return _b9e.createText[_bc0](this.chart,_bc1,x,y,_bc2,_bc3,font,_bc4,_bc5);}var text;if(this._textFreePool.length>0){text=this._textFreePool.pop();text.setShape({x:x,y:y,text:_bc3,align:_bc2});_bc1.add(text);}else{text=_b9e.createText[_bc0](this.chart,_bc1,x,y,_bc2,_bc3,font,_bc4);}this._textUsePool.push(text);return text;},createLine:function(_bc6,_bc7){var line;if(this.opt.enableCache&&this._lineFreePool.length>0){line=this._lineFreePool.pop();line.setShape(_bc7);_bc6.add(line);}else{line=_bc6.createLine(_bc7);}if(this.opt.enableCache){this._lineUsePool.push(line);}return line;},render:function(dim,_bc8){if(!this.dirty||!this.scaler){return this;}var o=this.opt,ta=this.chart.theme.axis,_bc9=o.leftBottom,_bca=o.rotation%360,_bcb,stop,_bcc,_bcd=0,_bce,_bcf,_bd0,_bd1,_bd2,_bd3,_bd4=this.chart.theme.axis.tick.labelGap,_bd5=o.font||(ta.majorTick&&ta.majorTick.font)||(ta.tick&&ta.tick.font),_bd6=o.titleFont||(ta.title&&ta.title.font),_bd7=o.fontColor||(ta.majorTick&&ta.majorTick.fontColor)||(ta.tick&&ta.tick.fontColor)||"black",_bd8=o.titleFontColor||(ta.title&&ta.title.fontColor)||"black",_bd9=(o.titleGap==0)?0:o.titleGap||(ta.title&&ta.title.gap)||15,_bda=o.titleOrientation||(ta.title&&ta.title.orientation)||"axis",_bdb=this.chart.theme.getTick("major",o),_bdc=this.chart.theme.getTick("minor",o),_bdd=this.chart.theme.getTick("micro",o),_bde=Math.max(_bdb.length,_bdc.length,_bdd.length),_bdf="stroke" in o?o.stroke:ta.stroke,size=_bd5?g.normalizedLength(g.splitFontString(_bd5).size):0,cosr=Math.abs(Math.cos(_bca*Math.PI/180)),sinr=Math.abs(Math.sin(_bca*Math.PI/180)),_be0=_bd6?g.normalizedLength(g.splitFontString(_bd6).size):0;if(typeof _bd4!="number"){_bd4=4;}if(_bca<0){_bca+=360;}var _be1=this._getMaxLabelSize();_be1=_be1&&_be1.majLabelW;if(this.vertical){_bcb={y:dim.height-_bc8.b};stop={y:_bc8.t};_bcc={y:(dim.height-_bc8.b+_bc8.t)/2};_bce=size*sinr+(_be1||0)*cosr+_bd4+Math.max(_bdb.length,_bdc.length)+_be0+_bd9;_bcf={x:0,y:-1};_bd2={x:0,y:0};_bd0={x:1,y:0};_bd1={x:_bd4,y:0};switch(_bca){case 0:_bd3="end";_bd2.y=size*0.4;break;case 90:_bd3="middle";_bd2.x=-size;break;case 180:_bd3="start";_bd2.y=-size*0.4;break;case 270:_bd3="middle";break;default:if(_bca<_b9f){_bd3="end";_bd2.y=size*0.4;}else{if(_bca<90){_bd3="end";_bd2.y=size*0.4;}else{if(_bca<(180-_b9f)){_bd3="start";}else{if(_bca<(180+_b9f)){_bd3="start";_bd2.y=-size*0.4;}else{if(_bca<270){_bd3="start";_bd2.x=_bc9?0:size*0.4;}else{if(_bca<(360-_b9f)){_bd3="end";_bd2.x=_bc9?0:size*0.4;}else{_bd3="end";_bd2.y=size*0.4;}}}}}}}if(_bc9){_bcb.x=stop.x=_bc8.l;_bcd=(_bda&&_bda=="away")?90:270;_bcc.x=_bc8.l-_bce+(_bcd==270?_be0:0);_bd0.x=-1;_bd1.x=-_bd1.x;}else{_bcb.x=stop.x=dim.width-_bc8.r;_bcd=(_bda&&_bda=="axis")?90:270;_bcc.x=dim.width-_bc8.r+_bce-(_bcd==270?0:_be0);switch(_bd3){case "start":_bd3="end";break;case "end":_bd3="start";break;case "middle":_bd2.x+=size;break;}}}else{_bcb={x:_bc8.l};stop={x:dim.width-_bc8.r};_bcc={x:(dim.width-_bc8.r+_bc8.l)/2};_bce=size*cosr+(_be1||0)*sinr+_bd4+Math.max(_bdb.length,_bdc.length)+_be0+_bd9;_bcf={x:1,y:0};_bd2={x:0,y:0};_bd0={x:0,y:1};_bd1={x:0,y:_bd4};switch(_bca){case 0:_bd3="middle";_bd2.y=size;break;case 90:_bd3="start";_bd2.x=-size*0.4;break;case 180:_bd3="middle";break;case 270:_bd3="end";_bd2.x=size*0.4;break;default:if(_bca<(90-_b9f)){_bd3="start";_bd2.y=_bc9?size:0;}else{if(_bca<(90+_b9f)){_bd3="start";_bd2.x=-size*0.4;}else{if(_bca<180){_bd3="start";_bd2.y=_bc9?0:-size;}else{if(_bca<(270-_b9f)){_bd3="end";_bd2.y=_bc9?0:-size;}else{if(_bca<(270+_b9f)){_bd3="end";_bd2.y=_bc9?size*0.4:0;}else{_bd3="end";_bd2.y=_bc9?size:0;}}}}}}if(_bc9){_bcb.y=stop.y=dim.height-_bc8.b;_bcd=(_bda&&_bda=="axis")?180:0;_bcc.y=dim.height-_bc8.b+_bce-(_bcd?_be0:0);}else{_bcb.y=stop.y=_bc8.t;_bcd=(_bda&&_bda=="away")?180:0;_bcc.y=_bc8.t-_bce+(_bcd?0:_be0);_bd0.y=-1;_bd1.y=-_bd1.y;switch(_bd3){case "start":_bd3="end";break;case "end":_bd3="start";break;case "middle":_bd2.y-=size;break;}}}this.cleanGroup();var s=this.group,c=this.scaler,t=this.ticks,f=lin.getTransformerFromModel(this.scaler),_be2=(!o.title||!_bcd)&&!_bca&&this.opt.htmlLabels&&!has("ie")&&!has("opera")?"html":"gfx",dx=_bd0.x*_bdb.length,dy=_bd0.y*_bdb.length,skip=this._skipInterval;s.createLine({x1:_bcb.x,y1:_bcb.y,x2:stop.x,y2:stop.y}).setStroke(_bdf);if(o.title){var _be3=_b9e.createText[_be2](this.chart,s,_bcc.x,_bcc.y,"middle",o.title,_bd6,_bd8);if(_be2=="html"){this.htmlElements.push(_be3);}else{_be3.setTransform(g.matrix.rotategAt(_bcd,_bcc.x,_bcc.y));}}if(t==null){this.dirty=false;return this;}var rel=(t.major.length>0)?(t.major[0].value-this._majorStart)/c.major.tick:0;var _be4=this.opt.majorLabels;arr.forEach(t.major,function(tick,i){var _be5=f(tick.value),elem,x=_bcb.x+_bcf.x*_be5,y=_bcb.y+_bcf.y*_be5;i+=rel;this.createLine(s,{x1:x,y1:y,x2:x+dx,y2:y+dy}).setStroke(_bdb);if(tick.label&&(!skip||(i-(1+skip))%(1+skip)==0)){var _be6=o.maxLabelCharCount?this.getTextWithLimitCharCount(tick.label,_bd5,o.maxLabelCharCount):{text:tick.label,truncated:false};_be6=o.maxLabelSize?this.getTextWithLimitLength(_be6.text,_bd5,o.maxLabelSize,_be6.truncated):_be6;elem=this.createText(_be2,s,x+dx+_bd1.x+(_bca?0:_bd2.x),y+dy+_bd1.y+(_bca?0:_bd2.y),_bd3,_be6.text,_bd5,_bd7);if(this.chart.truncateBidi&&_be6.truncated){this.chart.truncateBidi(elem,tick.label,_be2);}_be6.truncated&&this.labelTooltip(elem,this.chart,tick.label,_be6.text,_bd5,_be2);if(_be2=="html"){this.htmlElements.push(elem);}else{if(_bca){elem.setTransform([{dx:_bd2.x,dy:_bd2.y},g.matrix.rotategAt(_bca,x+dx+_bd1.x,y+dy+_bd1.y)]);}}}},this);dx=_bd0.x*_bdc.length;dy=_bd0.y*_bdc.length;_be4=this.opt.minorLabels&&c.minMinorStep<=c.minor.tick*c.bounds.scale;arr.forEach(t.minor,function(tick){var _be7=f(tick.value),elem,x=_bcb.x+_bcf.x*_be7,y=_bcb.y+_bcf.y*_be7;this.createLine(s,{x1:x,y1:y,x2:x+dx,y2:y+dy}).setStroke(_bdc);if(_be4&&tick.label){var _be8=o.maxLabelCharCount?this.getTextWithLimitCharCount(tick.label,_bd5,o.maxLabelCharCount):{text:tick.label,truncated:false};_be8=o.maxLabelSize?this.getTextWithLimitLength(_be8.text,_bd5,o.maxLabelSize,_be8.truncated):_be8;elem=this.createText(_be2,s,x+dx+_bd1.x+(_bca?0:_bd2.x),y+dy+_bd1.y+(_bca?0:_bd2.y),_bd3,_be8.text,_bd5,_bd7);if(this.chart.getTextDir&&_be8.truncated){this.chart.truncateBidi(elem,tick.label,_be2);}_be8.truncated&&this.labelTooltip(elem,this.chart,tick.label,_be8.text,_bd5,_be2);if(_be2=="html"){this.htmlElements.push(elem);}else{if(_bca){elem.setTransform([{dx:_bd2.x,dy:_bd2.y},g.matrix.rotategAt(_bca,x+dx+_bd1.x,y+dy+_bd1.y)]);}}}},this);dx=_bd0.x*_bdd.length;dy=_bd0.y*_bdd.length;arr.forEach(t.micro,function(tick){var _be9=f(tick.value),elem,x=_bcb.x+_bcf.x*_be9,y=_bcb.y+_bcf.y*_be9;this.createLine(s,{x1:x,y1:y,x2:x+dx,y2:y+dy}).setStroke(_bdd);},this);this.dirty=false;return this;},labelTooltip:function(elem,_bea,_beb,_bec,font,_bed){var _bee=["dijit/Tooltip"];var _bef={type:"rect"},_bf0=["above","below"],_bf1=g._base._getTextBox(_bec,{font:font}).w||0,_bf2=font?g.normalizedLength(g.splitFontString(font).size):0;if(_bed=="html"){lang.mixin(_bef,_b9b.position(elem.firstChild,true));_bef.width=Math.ceil(_bf1);_bef.height=Math.ceil(_bf2);this._events.push({shape:dojo,handle:_b9a.connect(elem.firstChild,"onmouseover",this,function(e){require(_bee,function(_bf3){_bf3.show(_beb,_bef,_bf0);});})});this._events.push({shape:dojo,handle:_b9a.connect(elem.firstChild,"onmouseout",this,function(e){require(_bee,function(_bf4){_bf4.hide(_bef);});})});}else{var shp=elem.getShape(),lt=_bea.getCoords();_bef=lang.mixin(_bef,{x:shp.x-_bf1/2,y:shp.y});_bef.x+=lt.x;_bef.y+=lt.y;_bef.x=Math.round(_bef.x);_bef.y=Math.round(_bef.y);_bef.width=Math.ceil(_bf1);_bef.height=Math.ceil(_bf2);this._events.push({shape:elem,handle:elem.connect("onmouseenter",this,function(e){require(_bee,function(_bf5){_bf5.show(_beb,_bef,_bf0);});})});this._events.push({shape:elem,handle:elem.connect("onmouseleave",this,function(e){require(_bee,function(_bf6){_bf6.hide(_bef);});})});}}});});},"dojox/charting/Chart":function(){define("dojox/charting/Chart",["../main","dojo/_base/lang","dojo/_base/array","dojo/_base/declare","dojo/dom-style","dojo/dom","dojo/dom-geometry","dojo/dom-construct","dojo/_base/Color","dojo/_base/sniff","./Element","./SimpleTheme","./Series","./axis2d/common","dojox/gfx/shape","dojox/gfx","dojox/lang/functional","dojox/lang/functional/fold","dojox/lang/functional/reversed"],function(_bf7,lang,arr,_bf8,_bf9,dom,_bfa,_bfb,_bfc,has,_bfd,_bfe,_bff,_c00,_c01,g,func,_c02,_c03){var dc=lang.getObject("charting",true,_bf7),_c04=func.lambda("item.clear()"),_c05=func.lambda("item.purgeGroup()"),_c06=func.lambda("item.destroy()"),_c07=func.lambda("item.dirty = false"),_c08=func.lambda("item.dirty = true"),_c09=func.lambda("item.name");var _c0a=_bf8("dojox.charting.Chart",null,{constructor:function(node,_c0b){if(!_c0b){_c0b={};}this.margins=_c0b.margins?_c0b.margins:{l:10,t:10,r:10,b:10};this.stroke=_c0b.stroke;this.fill=_c0b.fill;this.delayInMs=_c0b.delayInMs||200;this.title=_c0b.title;this.titleGap=_c0b.titleGap;this.titlePos=_c0b.titlePos;this.titleFont=_c0b.titleFont;this.titleFontColor=_c0b.titleFontColor;this.chartTitle=null;this.theme=null;this.axes={};this.stack=[];this.plots={};this.series=[];this.runs={};this.dirty=true;this.node=dom.byId(node);var box=_bfa.getMarginBox(node);this.surface=g.createSurface(this.node,box.w||400,box.h||300);if(this.surface.declaredClass.indexOf("vml")==-1){this.plotGroup=this.surface.createGroup();}},destroy:function(){arr.forEach(this.series,_c06);arr.forEach(this.stack,_c06);func.forIn(this.axes,_c06);if(this.chartTitle&&this.chartTitle.tagName){_bfb.destroy(this.chartTitle);}if(this.plotGroup){this.plotGroup.destroy();}this.surface.destroy();},getCoords:function(){var node=this.node;var s=_bf9.getComputedStyle(node),_c0c=_bfa.getMarginBox(node,s);var abs=_bfa.position(node,true);_c0c.x=abs.x;_c0c.y=abs.y;return _c0c;},setTheme:function(_c0d){this.theme=_c0d.clone();this.dirty=true;return this;},addAxis:function(name,_c0e){var axis,_c0f=_c0e&&_c0e.type||"Default";if(typeof _c0f=="string"){if(!dc.axis2d||!dc.axis2d[_c0f]){throw Error("Can't find axis: "+_c0f+" - Check "+"require() dependencies.");}axis=new dc.axis2d[_c0f](this,_c0e);}else{axis=new _c0f(this,_c0e);}axis.name=name;axis.dirty=true;if(name in this.axes){this.axes[name].destroy();}this.axes[name]=axis;this.dirty=true;return this;},getAxis:function(name){return this.axes[name];},removeAxis:function(name){if(name in this.axes){this.axes[name].destroy();delete this.axes[name];this.dirty=true;}return this;},addPlot:function(name,_c10){var plot,_c11=_c10&&_c10.type||"Default";if(typeof _c11=="string"){if(!dc.plot2d||!dc.plot2d[_c11]){throw Error("Can't find plot: "+_c11+" - didn't you forget to dojo"+".require() it?");}plot=new dc.plot2d[_c11](this,_c10);}else{plot=new _c11(this,_c10);}plot.name=name;plot.dirty=true;if(name in this.plots){this.stack[this.plots[name]].destroy();this.stack[this.plots[name]]=plot;}else{this.plots[name]=this.stack.length;this.stack.push(plot);}this.dirty=true;return this;},getPlot:function(name){return this.stack[this.plots[name]];},removePlot:function(name){if(name in this.plots){var _c12=this.plots[name];delete this.plots[name];this.stack[_c12].destroy();this.stack.splice(_c12,1);func.forIn(this.plots,function(idx,name,_c13){if(idx>_c12){_c13[name]=idx-1;}});var ns=arr.filter(this.series,function(run){return run.plot!=name;});if(ns.length<this.series.length){arr.forEach(this.series,function(run){if(run.plot==name){run.destroy();}});this.runs={};arr.forEach(ns,function(run,_c14){this.runs[run.plot]=_c14;},this);this.series=ns;}this.dirty=true;}return this;},getPlotOrder:function(){return func.map(this.stack,_c09);},setPlotOrder:function(_c15){var _c16={},_c17=func.filter(_c15,function(name){if(!(name in this.plots)||(name in _c16)){return false;}_c16[name]=1;return true;},this);if(_c17.length<this.stack.length){func.forEach(this.stack,function(plot){var name=plot.name;if(!(name in _c16)){_c17.push(name);}});}var _c18=func.map(_c17,function(name){return this.stack[this.plots[name]];},this);func.forEach(_c18,function(plot,i){this.plots[plot.name]=i;},this);this.stack=_c18;this.dirty=true;return this;},movePlotToFront:function(name){if(name in this.plots){var _c19=this.plots[name];if(_c19){var _c1a=this.getPlotOrder();_c1a.splice(_c19,1);_c1a.unshift(name);return this.setPlotOrder(_c1a);}}return this;},movePlotToBack:function(name){if(name in this.plots){var _c1b=this.plots[name];if(_c1b<this.stack.length-1){var _c1c=this.getPlotOrder();_c1c.splice(_c1b,1);_c1c.push(name);return this.setPlotOrder(_c1c);}}return this;},addSeries:function(name,data,_c1d){var run=new _bff(this,data,_c1d);run.name=name;if(name in this.runs){this.series[this.runs[name]].destroy();this.series[this.runs[name]]=run;}else{this.runs[name]=this.series.length;this.series.push(run);}this.dirty=true;if(!("ymin" in run)&&"min" in run){run.ymin=run.min;}if(!("ymax" in run)&&"max" in run){run.ymax=run.max;}return this;},getSeries:function(name){return this.series[this.runs[name]];},removeSeries:function(name){if(name in this.runs){var _c1e=this.runs[name];delete this.runs[name];this.series[_c1e].destroy();this.series.splice(_c1e,1);func.forIn(this.runs,function(idx,name,runs){if(idx>_c1e){runs[name]=idx-1;}});this.dirty=true;}return this;},updateSeries:function(name,data,_c1f){if(name in this.runs){var run=this.series[this.runs[name]];run.update(data);if(_c1f){this.dirty=true;}else{this._invalidateDependentPlots(run.plot,false);this._invalidateDependentPlots(run.plot,true);}}return this;},getSeriesOrder:function(_c20){return func.map(func.filter(this.series,function(run){return run.plot==_c20;}),_c09);},setSeriesOrder:function(_c21){var _c22,_c23={},_c24=func.filter(_c21,function(name){if(!(name in this.runs)||(name in _c23)){return false;}var run=this.series[this.runs[name]];if(_c22){if(run.plot!=_c22){return false;}}else{_c22=run.plot;}_c23[name]=1;return true;},this);func.forEach(this.series,function(run){var name=run.name;if(!(name in _c23)&&run.plot==_c22){_c24.push(name);}});var _c25=func.map(_c24,function(name){return this.series[this.runs[name]];},this);this.series=_c25.concat(func.filter(this.series,function(run){return run.plot!=_c22;}));func.forEach(this.series,function(run,i){this.runs[run.name]=i;},this);this.dirty=true;return this;},moveSeriesToFront:function(name){if(name in this.runs){var _c26=this.runs[name],_c27=this.getSeriesOrder(this.series[_c26].plot);if(name!=_c27[0]){_c27.splice(_c26,1);_c27.unshift(name);return this.setSeriesOrder(_c27);}}return this;},moveSeriesToBack:function(name){if(name in this.runs){var _c28=this.runs[name],_c29=this.getSeriesOrder(this.series[_c28].plot);if(name!=_c29[_c29.length-1]){_c29.splice(_c28,1);_c29.push(name);return this.setSeriesOrder(_c29);}}return this;},resize:function(_c2a,_c2b){var box;switch(arguments.length){case 1:box=lang.mixin({},_c2a);_bfa.setMarginBox(this.node,box);break;case 2:box={w:_c2a,h:_c2b};_bfa.setMarginBox(this.node,box);break;}box=_bfa.getMarginBox(this.node);var d=this.surface.getDimensions();if(d.width!=box.w||d.height!=box.h){this.surface.setDimensions(box.w,box.h);this.dirty=true;return this.render();}else{return this;}},getGeometry:function(){var ret={};func.forIn(this.axes,function(axis){if(axis.initialized()){ret[axis.name]={name:axis.name,vertical:axis.vertical,scaler:axis.scaler,ticks:axis.ticks};}});return ret;},setAxisWindow:function(name,_c2c,_c2d,zoom){var axis=this.axes[name];if(axis){axis.setWindow(_c2c,_c2d);arr.forEach(this.stack,function(plot){if(plot.hAxis==name||plot.vAxis==name){plot.zoom=zoom;}});}return this;},setWindow:function(sx,sy,dx,dy,zoom){if(!("plotArea" in this)){this.calculateGeometry();}func.forIn(this.axes,function(axis){var _c2e,_c2f,_c30=axis.getScaler().bounds,s=_c30.span/(_c30.upper-_c30.lower);if(axis.vertical){_c2e=sy;_c2f=dy/s/_c2e;}else{_c2e=sx;_c2f=dx/s/_c2e;}axis.setWindow(_c2e,_c2f);});arr.forEach(this.stack,function(plot){plot.zoom=zoom;});return this;},zoomIn:function(name,_c31,_c32){var axis=this.axes[name];if(axis){var _c33,_c34,_c35=axis.getScaler().bounds;var _c36=Math.min(_c31[0],_c31[1]);var _c37=Math.max(_c31[0],_c31[1]);_c36=_c31[0]<_c35.lower?_c35.lower:_c36;_c37=_c31[1]>_c35.upper?_c35.upper:_c37;_c33=(_c35.upper-_c35.lower)/(_c37-_c36);_c34=_c36-_c35.lower;this.setAxisWindow(name,_c33,_c34);if(_c32){this.delayedRender();}else{this.render();}}},calculateGeometry:function(){if(this.dirty){return this.fullGeometry();}var _c38=arr.filter(this.stack,function(plot){return plot.dirty||(plot.hAxis&&this.axes[plot.hAxis].dirty)||(plot.vAxis&&this.axes[plot.vAxis].dirty);},this);_c39(_c38,this.plotArea);return this;},fullGeometry:function(){this._makeDirty();arr.forEach(this.stack,_c04);if(!this.theme){this.setTheme(new _bfe());}arr.forEach(this.series,function(run){if(!(run.plot in this.plots)){if(!dc.plot2d||!dc.plot2d.Default){throw Error("Can't find plot: Default - didn't you forget to dojo"+".require() it?");}var plot=new dc.plot2d.Default(this,{});plot.name=run.plot;this.plots[run.plot]=this.stack.length;this.stack.push(plot);}this.stack[this.plots[run.plot]].addSeries(run);},this);arr.forEach(this.stack,function(plot){if(plot.assignAxes){plot.assignAxes(this.axes);}},this);var dim=this.dim=this.surface.getDimensions();dim.width=g.normalizedLength(dim.width);dim.height=g.normalizedLength(dim.height);func.forIn(this.axes,_c04);_c39(this.stack,dim);var _c3a=this.offsets={l:0,r:0,t:0,b:0};func.forIn(this.axes,function(axis){func.forIn(axis.getOffsets(),function(o,i){_c3a[i]=Math.max(o,_c3a[i]);});});if(this.title){this.titleGap=(this.titleGap==0)?0:this.titleGap||this.theme.chart.titleGap||20;this.titlePos=this.titlePos||this.theme.chart.titlePos||"top";this.titleFont=this.titleFont||this.theme.chart.titleFont;this.titleFontColor=this.titleFontColor||this.theme.chart.titleFontColor||"black";var _c3b=g.normalizedLength(g.splitFontString(this.titleFont).size);_c3a[this.titlePos=="top"?"t":"b"]+=(_c3b+this.titleGap);}func.forIn(this.margins,function(o,i){_c3a[i]+=o;});this.plotArea={width:dim.width-_c3a.l-_c3a.r,height:dim.height-_c3a.t-_c3a.b};func.forIn(this.axes,_c04);_c39(this.stack,this.plotArea);return this;},render:function(){if(this._delayedRenderHandle){clearTimeout(this._delayedRenderHandle);this._delayedRenderHandle=null;}if(this.theme){this.theme.clear();}if(this.dirty){return this.fullRender();}this.calculateGeometry();func.forEachRev(this.stack,function(plot){plot.render(this.dim,this.offsets);},this);func.forIn(this.axes,function(axis){axis.render(this.dim,this.offsets);},this);this._makeClean();return this;},fullRender:function(){this.fullGeometry();var _c3c=this.offsets,dim=this.dim;var w=Math.max(0,dim.width-_c3c.l-_c3c.r),h=Math.max(0,dim.height-_c3c.t-_c3c.b);arr.forEach(this.series,_c05);func.forIn(this.axes,_c05);arr.forEach(this.stack,_c05);var _c3d=this.surface.children;for(var i=0;i<_c3d.length;++i){_c01.dispose(_c3d[i]);}if(this.chartTitle&&this.chartTitle.tagName){_bfb.destroy(this.chartTitle);}if(this.plotGroup){this.plotGroup.clear();}this.surface.clear();this.chartTitle=null;if(this.plotGroup){this._renderChartBackground(dim,_c3c);this._renderPlotBackground(dim,_c3c,w,h);this.surface.add(this.plotGroup);this.plotGroup.setClip({x:_c3c.l,y:_c3c.t,width:w,height:h});}else{this._renderPlotBackground(dim,_c3c,w,h);}func.foldr(this.stack,function(z,plot){return plot.render(dim,_c3c),0;},0);if(!this.plotGroup){this._renderChartBackground(dim,_c3c);}if(this.title){var _c3e=(g.renderer=="canvas"),_c3f=_c3e||!has("ie")&&!has("opera")?"html":"gfx",_c40=g.normalizedLength(g.splitFontString(this.titleFont).size);this.chartTitle=_c00.createText[_c3f](this,this.surface,dim.width/2,this.titlePos=="top"?_c40+this.margins.t:dim.height-this.margins.b,"middle",this.title,this.titleFont,this.titleFontColor);}func.forIn(this.axes,function(axis){axis.render(dim,_c3c);});this._makeClean();return this;},_renderChartBackground:function(dim,_c41){var t=this.theme,rect;var fill=this.fill!==undefined?this.fill:(t.chart&&t.chart.fill);var _c42=this.stroke!==undefined?this.stroke:(t.chart&&t.chart.stroke);if(fill=="inherit"){var node=this.node;fill=new _bfc(_bf9.get(node,"backgroundColor"));while(fill.a==0&&node!=document.documentElement){fill=new _bfc(_bf9.get(node,"backgroundColor"));node=node.parentNode;}}if(fill){if(this.plotGroup){fill=_bfd.prototype._shapeFill(_bfd.prototype._plotFill(fill,dim),{x:0,y:0,width:dim.width+1,height:dim.height+1});this.surface.createRect({width:dim.width+1,height:dim.height+1}).setFill(fill);}else{fill=_bfd.prototype._plotFill(fill,dim,_c41);if(_c41.l){rect={x:0,y:0,width:_c41.l,height:dim.height+1};this.surface.createRect(rect).setFill(_bfd.prototype._shapeFill(fill,rect));}if(_c41.r){rect={x:dim.width-_c41.r,y:0,width:_c41.r+1,height:dim.height+2};this.surface.createRect(rect).setFill(_bfd.prototype._shapeFill(fill,rect));}if(_c41.t){rect={x:0,y:0,width:dim.width+1,height:_c41.t};this.surface.createRect(rect).setFill(_bfd.prototype._shapeFill(fill,rect));}if(_c41.b){rect={x:0,y:dim.height-_c41.b,width:dim.width+1,height:_c41.b+2};this.surface.createRect(rect).setFill(_bfd.prototype._shapeFill(fill,rect));}}}if(_c42){this.surface.createRect({width:dim.width-1,height:dim.height-1}).setStroke(_c42);}},_renderPlotBackground:function(dim,_c43,w,h){var t=this.theme;var fill=t.plotarea&&t.plotarea.fill;var _c44=t.plotarea&&t.plotarea.stroke;var rect={x:_c43.l-1,y:_c43.t-1,width:w+2,height:h+2};if(fill){fill=_bfd.prototype._shapeFill(_bfd.prototype._plotFill(fill,dim,_c43),rect);this.surface.createRect(rect).setFill(fill);}if(_c44){this.surface.createRect({x:_c43.l,y:_c43.t,width:w+1,height:h+1}).setStroke(_c44);}},delayedRender:function(){if(!this._delayedRenderHandle){this._delayedRenderHandle=setTimeout(lang.hitch(this,function(){this.render();}),this.delayInMs);}return this;},connectToPlot:function(name,_c45,_c46){return name in this.plots?this.stack[this.plots[name]].connect(_c45,_c46):null;},fireEvent:function(_c47,_c48,_c49){if(_c47 in this.runs){var _c4a=this.series[this.runs[_c47]].plot;if(_c4a in this.plots){var plot=this.stack[this.plots[_c4a]];if(plot){plot.fireEvent(_c47,_c48,_c49);}}}return this;},_makeClean:function(){arr.forEach(this.axes,_c07);arr.forEach(this.stack,_c07);arr.forEach(this.series,_c07);this.dirty=false;},_makeDirty:function(){arr.forEach(this.axes,_c08);arr.forEach(this.stack,_c08);arr.forEach(this.series,_c08);this.dirty=true;},_invalidateDependentPlots:function(_c4b,_c4c){if(_c4b in this.plots){var plot=this.stack[this.plots[_c4b]],axis,_c4d=_c4c?"vAxis":"hAxis";if(plot[_c4d]){axis=this.axes[plot[_c4d]];if(axis&&axis.dependOnData()){axis.dirty=true;arr.forEach(this.stack,function(p){if(p[_c4d]&&p[_c4d]==plot[_c4d]){p.dirty=true;}});}}else{plot.dirty=true;}}}});function _c4e(_c4f){return {min:_c4f.hmin,max:_c4f.hmax};};function _c50(_c51){return {min:_c51.vmin,max:_c51.vmax};};function _c52(_c53,h){_c53.hmin=h.min;_c53.hmax=h.max;};function _c54(_c55,v){_c55.vmin=v.min;_c55.vmax=v.max;};function _c56(_c57,_c58){if(_c57&&_c58){_c57.min=Math.min(_c57.min,_c58.min);_c57.max=Math.max(_c57.max,_c58.max);}return _c57||_c58;};function _c39(_c59,_c5a){var _c5b={},axes={};arr.forEach(_c59,function(plot){var _c5c=_c5b[plot.name]=plot.getSeriesStats();if(plot.hAxis){axes[plot.hAxis]=_c56(axes[plot.hAxis],_c4e(_c5c));}if(plot.vAxis){axes[plot.vAxis]=_c56(axes[plot.vAxis],_c50(_c5c));}});arr.forEach(_c59,function(plot){var _c5d=_c5b[plot.name];if(plot.hAxis){_c52(_c5d,axes[plot.hAxis]);}if(plot.vAxis){_c54(_c5d,axes[plot.vAxis]);}plot.initializeScalers(_c5a,_c5d);});};return _c0a;});},"dijit/_MenuBase":function(){define("dijit/_MenuBase",["dojo/_base/array","dojo/_base/declare","dojo/dom","dojo/dom-attr","dojo/dom-class","dojo/_base/lang","dojo/mouse","dojo/on","dojo/window","./a11yclick","./popup","./registry","./_Widget","./_KeyNavContainer","./_TemplatedMixin"],function(_c5e,_c5f,dom,_c60,_c61,lang,_c62,on,_c63,_c64,pm,_c65,_c66,_c67,_c68){return _c5f("dijit._MenuBase",[_c66,_c68,_c67],{parentMenu:null,popupDelay:500,autoFocus:false,postCreate:function(){var self=this,_c69=function(node){return _c61.contains(node,"dijitMenuItem");};this.own(on(this.containerNode,on.selector(_c69,_c62.enter),function(){self.onItemHover(_c65.byNode(this));}),on(this.containerNode,on.selector(_c69,_c62.leave),function(){self.onItemUnhover(_c65.byNode(this));}),on(this.containerNode,on.selector(_c69,_c64),function(evt){self.onItemClick(_c65.byNode(this),evt);evt.stopPropagation();evt.preventDefault();}));this.inherited(arguments);},onExecute:function(){},onCancel:function(){},_moveToPopup:function(evt){if(this.focusedChild&&this.focusedChild.popup&&!this.focusedChild.disabled){this.onItemClick(this.focusedChild,evt);}else{var _c6a=this._getTopMenu();if(_c6a&&_c6a._isMenuBar){_c6a.focusNext();}}},_onPopupHover:function(){if(this.currentPopup&&this.currentPopup._pendingClose_timer){var _c6b=this.currentPopup.parentMenu;if(_c6b.focusedChild){_c6b.focusedChild._setSelected(false);}_c6b.focusedChild=this.currentPopup.from_item;_c6b.focusedChild._setSelected(true);this._stopPendingCloseTimer(this.currentPopup);}},onItemHover:function(item){if(this.isActive){this.focusChild(item);if(this.focusedChild.popup&&!this.focusedChild.disabled&&!this.hover_timer){this.hover_timer=this.defer("_openPopup",this.popupDelay);}}if(this.focusedChild){this.focusChild(item);}this._hoveredChild=item;item._set("hovering",true);},_onChildBlur:function(item){this._stopPopupTimer();item._setSelected(false);var _c6c=item.popup;if(_c6c){this._stopPendingCloseTimer(_c6c);_c6c._pendingClose_timer=this.defer(function(){_c6c._pendingClose_timer=null;if(_c6c.parentMenu){_c6c.parentMenu.currentPopup=null;}pm.close(_c6c);},this.popupDelay);}},onItemUnhover:function(item){if(this.isActive){this._stopPopupTimer();}if(this._hoveredChild==item){this._hoveredChild=null;}item._set("hovering",false);},_stopPopupTimer:function(){if(this.hover_timer){this.hover_timer=this.hover_timer.remove();}},_stopPendingCloseTimer:function(_c6d){if(_c6d._pendingClose_timer){_c6d._pendingClose_timer=_c6d._pendingClose_timer.remove();}},_stopFocusTimer:function(){if(this._focus_timer){this._focus_timer=this._focus_timer.remove();}},_getTopMenu:function(){for(var top=this;top.parentMenu;top=top.parentMenu){}return top;},onItemClick:function(item,evt){if(typeof this.isShowingNow=="undefined"){this._markActive();}this.focusChild(item);if(item.disabled){return false;}if(item.popup){this._openPopup(evt.type=="keypress");}else{this.onExecute();item._onClick?item._onClick(evt):item.onClick(evt);}},_openPopup:function(_c6e){this._stopPopupTimer();var _c6f=this.focusedChild;if(!_c6f){return;}var _c70=_c6f.popup;if(!_c70.isShowingNow){if(this.currentPopup){this._stopPendingCloseTimer(this.currentPopup);pm.close(this.currentPopup);}_c70.parentMenu=this;_c70.from_item=_c6f;var self=this;pm.open({parent:this,popup:_c70,around:_c6f.domNode,orient:this._orient||["after","before"],onCancel:function(){self.focusChild(_c6f);self._cleanUp();_c6f._setSelected(true);self.focusedChild=_c6f;},onExecute:lang.hitch(this,"_cleanUp")});this.currentPopup=_c70;_c70.connect(_c70.domNode,"onmouseenter",lang.hitch(self,"_onPopupHover"));}if(_c6e&&_c70.focus){_c70._focus_timer=this.defer(lang.hitch(_c70,function(){this._focus_timer=null;this.focus();}));}},_markActive:function(){this.isActive=true;_c61.replace(this.domNode,"dijitMenuActive","dijitMenuPassive");},onOpen:function(){this.isShowingNow=true;this._markActive();},_markInactive:function(){this.isActive=false;_c61.replace(this.domNode,"dijitMenuPassive","dijitMenuActive");},onClose:function(){this._stopFocusTimer();this._markInactive();this.isShowingNow=false;this.parentMenu=null;},_closeChild:function(){this._stopPopupTimer();if(this.currentPopup){if(_c5e.indexOf(this._focusManager.activeStack,this.id)>=0){_c60.set(this.focusedChild.focusNode,"tabIndex",this.tabIndex);this.focusedChild.focusNode.focus();}pm.close(this.currentPopup);this.currentPopup=null;}if(this.focusedChild){this.focusedChild._setSelected(false);this.onItemUnhover(this.focusedChild);this.focusedChild=null;}},_onItemFocus:function(item){if(this._hoveredChild&&this._hoveredChild!=item){this.onItemUnhover(this._hoveredChild);}},_onBlur:function(){this._cleanUp();this.inherited(arguments);},_cleanUp:function(){this._closeChild();if(typeof this.isShowingNow=="undefined"){this._markInactive();}}});});},"dijit/_editor/_Plugin":function(){define("dijit/_editor/_Plugin",["dojo/_base/connect","dojo/_base/declare","dojo/_base/lang","../form/Button"],function(_c71,_c72,lang,_c73){var _c74=_c72("dijit._editor._Plugin",null,{constructor:function(args){this.params=args||{};lang.mixin(this,this.params);this._connects=[];this._attrPairNames={};},editor:null,iconClassPrefix:"dijitEditorIcon",button:null,command:"",useDefaultCommand:true,buttonClass:_c73,disabled:false,getLabel:function(key){return this.editor.commands[key];},_initButton:function(){if(this.command.length){var _c75=this.getLabel(this.command),_c76=this.editor,_c77=this.iconClassPrefix+" "+this.iconClassPrefix+this.command.charAt(0).toUpperCase()+this.command.substr(1);if(!this.button){var _c78=lang.mixin({label:_c75,ownerDocument:_c76.ownerDocument,dir:_c76.dir,lang:_c76.lang,showLabel:false,iconClass:_c77,dropDown:this.dropDown,tabIndex:"-1"},this.params||{});this.button=new this.buttonClass(_c78);}}if(this.get("disabled")&&this.button){this.button.set("disabled",this.get("disabled"));}},destroy:function(){var h;while(h=this._connects.pop()){h.remove();}if(this.dropDown){this.dropDown.destroyRecursive();}},connect:function(o,f,tf){this._connects.push(_c71.connect(o,f,this,tf));},updateState:function(){var e=this.editor,c=this.command,_c79,_c7a;if(!e||!e.isLoaded||!c.length){return;}var _c7b=this.get("disabled");if(this.button){try{_c7a=!_c7b&&e.queryCommandEnabled(c);if(this.enabled!==_c7a){this.enabled=_c7a;this.button.set("disabled",!_c7a);}if(_c7a){if(typeof this.button.checked=="boolean"){_c79=e.queryCommandState(c);if(this.checked!==_c79){this.checked=_c79;this.button.set("checked",e.queryCommandState(c));}}}}catch(e){console.log(e);}}},setEditor:function(_c7c){this.editor=_c7c;this._initButton();if(this.button&&this.useDefaultCommand){if(this.editor.queryCommandAvailable(this.command)){this.connect(this.button,"onClick",lang.hitch(this.editor,"execCommand",this.command,this.commandArg));}else{this.button.domNode.style.display="none";}}this.connect(this.editor,"onNormalizedDisplayChanged","updateState");},setToolbar:function(_c7d){if(this.button){_c7d.addChild(this.button);}},set:function(name,_c7e){if(typeof name==="object"){for(var x in name){this.set(x,name[x]);}return this;}var _c7f=this._getAttrNames(name);if(this[_c7f.s]){var _c80=this[_c7f.s].apply(this,Array.prototype.slice.call(arguments,1));}else{this._set(name,_c7e);}return _c80||this;},get:function(name){var _c81=this._getAttrNames(name);return this[_c81.g]?this[_c81.g]():this[name];},_setDisabledAttr:function(_c82){this.disabled=_c82;this.updateState();},_getAttrNames:function(name){var apn=this._attrPairNames;if(apn[name]){return apn[name];}var uc=name.charAt(0).toUpperCase()+name.substr(1);return (apn[name]={s:"_set"+uc+"Attr",g:"_get"+uc+"Attr"});},_set:function(name,_c83){this[name]=_c83;}});_c74.registry={};return _c74;});},"dojox/date/islamic/locale":function(){define("dojox/date/islamic/locale",["../..","dojo/_base/lang","dojo/_base/array","dojo/date","dojo/i18n","dojo/regexp","dojo/string","./Date","dojo/i18n!dojo/cldr/nls/islamic"],function(_c84,lang,arr,dd,i18n,_c85,_c86,_c87,_c88){var _c89=lang.getObject("date.islamic.locale",true,_c84);function _c8a(_c8b,_c8c,_c8d,_c8e,_c8f){return _c8f.replace(/([a-z])\1*/ig,function(_c90){var s,pad;var c=_c90.charAt(0);var l=_c90.length;var _c91=["abbr","wide","narrow"];switch(c){case "G":s=_c8c["eraAbbr"][0];break;case "y":s=String(_c8b.getFullYear());break;case "M":var m=_c8b.getMonth();if(l<3){s=m+1;pad=true;}else{var _c92=["months","format",_c91[l-3]].join("-");s=_c8c[_c92][m];}break;case "d":s=_c8b.getDate(true);pad=true;break;case "E":var d=_c8b.getDay();if(l<3){s=d+1;pad=true;}else{var _c93=["days","format",_c91[l-3]].join("-");s=_c8c[_c93][d];}break;case "a":var _c94=(_c8b.getHours()<12)?"am":"pm";s=_c8c["dayPeriods-format-wide-"+_c94];break;case "h":case "H":case "K":case "k":var h=_c8b.getHours();switch(c){case "h":s=(h%12)||12;break;case "H":s=h;break;case "K":s=(h%12);break;case "k":s=h||24;break;}pad=true;break;case "m":s=_c8b.getMinutes();pad=true;break;case "s":s=_c8b.getSeconds();pad=true;break;case "S":s=Math.round(_c8b.getMilliseconds()*Math.pow(10,l-3));pad=true;break;case "z":s=dd.getTimezoneName(_c8b.toGregorian());if(s){break;}l=4;case "Z":var _c95=_c8b.toGregorian().getTimezoneOffset();var tz=[(_c95<=0?"+":"-"),_c86.pad(Math.floor(Math.abs(_c95)/60),2),_c86.pad(Math.abs(_c95)%60,2)];if(l==4){tz.splice(0,0,"GMT");tz.splice(3,0,":");}s=tz.join("");break;default:throw new Error("dojox.date.islamic.locale.formatPattern: invalid pattern char: "+_c8f);}if(pad){s=_c86.pad(s,l);}return s;});};_c89.format=function(_c96,_c97){_c97=_c97||{};var _c98=i18n.normalizeLocale(_c97.locale);var _c99=_c97.formatLength||"short";var _c9a=_c89._getIslamicBundle(_c98);var str=[];var _c9b=lang.hitch(this,_c8a,_c96,_c9a,_c98,_c97.fullYear);if(_c97.selector=="year"){var year=_c96.getFullYear();return year;}if(_c97.selector!="time"){var _c9c=_c97.datePattern||_c9a["dateFormat-"+_c99];if(_c9c){str.push(_c9d(_c9c,_c9b));}}if(_c97.selector!="date"){var _c9e=_c97.timePattern||_c9a["timeFormat-"+_c99];if(_c9e){str.push(_c9d(_c9e,_c9b));}}var _c9f=str.join(" ");return _c9f;};_c89.regexp=function(_ca0){return _c89._parseInfo(_ca0).regexp;};_c89._parseInfo=function(_ca1){_ca1=_ca1||{};var _ca2=i18n.normalizeLocale(_ca1.locale);var _ca3=_c89._getIslamicBundle(_ca2);var _ca4=_ca1.formatLength||"short";var _ca5=_ca1.datePattern||_ca3["dateFormat-"+_ca4];var _ca6=_ca1.timePattern||_ca3["timeFormat-"+_ca4];var _ca7;if(_ca1.selector=="date"){_ca7=_ca5;}else{if(_ca1.selector=="time"){_ca7=_ca6;}else{_ca7=(typeof (_ca6)=="undefined")?_ca5:_ca5+" "+_ca6;}}var _ca8=[];var re=_c9d(_ca7,lang.hitch(this,_ca9,_ca8,_ca3,_ca1));return {regexp:re,tokens:_ca8,bundle:_ca3};};_c89.parse=function(_caa,_cab){_caa=_caa.replace(/[\u200E\u200F\u202A\u202E]/g,"");if(!_cab){_cab={};}var info=_c89._parseInfo(_cab);var _cac=info.tokens,_c88=info.bundle;var _cad=info.regexp.replace(/[\u200E\u200F\u202A\u202E]/g,"");var re=new RegExp("^"+_cad+"$");var _cae=re.exec(_caa);var _caf=i18n.normalizeLocale(_cab.locale);if(!_cae){return null;}var date,_cb0;var _cb1=[1389,0,1,0,0,0,0];var amPm="";var _cb2=0;var _cb3=["abbr","wide","narrow"];var _cb4=arr.every(_cae,function(v,i){if(!i){return true;}var _cb5=_cac[i-1];var l=_cb5.length;switch(_cb5.charAt(0)){case "y":_cb1[0]=Number(v);break;case "M":if(l>2){var _cb6=_c88["months-format-"+_cb3[l-3]].concat();if(!_cab.strict){v=v.replace(".","").toLowerCase();_cb6=arr.map(_cb6,function(s){return s?s.replace(".","").toLowerCase():s;});}v=arr.indexOf(_cb6,v);if(v==-1){return false;}_cb2=l;}else{v--;}_cb1[1]=Number(v);break;case "D":_cb1[1]=0;case "d":_cb1[2]=Number(v);break;case "a":var am=_cab.am||_c88["dayPeriods-format-wide-am"],pm=_cab.pm||_c88["dayPeriods-format-wide-pm"];if(!_cab.strict){var _cb7=/\./g;v=v.replace(_cb7,"").toLowerCase();am=am.replace(_cb7,"").toLowerCase();pm=pm.replace(_cb7,"").toLowerCase();}if(_cab.strict&&v!=am&&v!=pm){return false;}amPm=(v==pm)?"p":(v==am)?"a":"";break;case "K":if(v==24){v=0;}case "h":case "H":case "k":_cb1[3]=Number(v);break;case "m":_cb1[4]=Number(v);break;case "s":_cb1[5]=Number(v);break;case "S":_cb1[6]=Number(v);}return true;});var _cb8=+_cb1[3];if(amPm==="p"&&_cb8<12){_cb1[3]=_cb8+12;}else{if(amPm==="a"&&_cb8==12){_cb1[3]=0;}}var _cb9=new _c87(_cb1[0],_cb1[1],_cb1[2],_cb1[3],_cb1[4],_cb1[5],_cb1[6]);return _cb9;};function _c9d(_cba,_cbb,_cbc,_cbd){var _cbe=function(x){return x;};_cbb=_cbb||_cbe;_cbc=_cbc||_cbe;_cbd=_cbd||_cbe;var _cbf=_cba.match(/(''|[^'])+/g);var _cc0=_cba.charAt(0)=="'";arr.forEach(_cbf,function(_cc1,i){if(!_cc1){_cbf[i]="";}else{_cbf[i]=(_cc0?_cbc:_cbb)(_cc1);_cc0=!_cc0;}});return _cbd(_cbf.join(""));};function _ca9(_cc2,_cc3,_cc4,_cc5){_cc5=_c85.escapeString(_cc5);var _cc6=i18n.normalizeLocale(_cc4.locale);return _cc5.replace(/([a-z])\1*/ig,function(_cc7){var s;var c=_cc7.charAt(0);var l=_cc7.length;var p2="",p3="";if(_cc4.strict){if(l>1){p2="0"+"{"+(l-1)+"}";}if(l>2){p3="0"+"{"+(l-2)+"}";}}else{p2="0?";p3="0{0,2}";}switch(c){case "y":s="\\d+";break;case "M":s=(l>2)?"\\S+ ?\\S+":p2+"[1-9]|1[0-2]";break;case "d":s="[12]\\d|"+p2+"[1-9]|3[01]";break;case "E":s="\\S+";break;case "h":s=p2+"[1-9]|1[0-2]";break;case "k":s=p2+"\\d|1[01]";break;case "H":s=p2+"\\d|1\\d|2[0-3]";break;case "K":s=p2+"[1-9]|1\\d|2[0-4]";break;case "m":case "s":s=p2+"\\d|[0-5]\\d";break;case "S":s="\\d{"+l+"}";break;case "a":var am=_cc4.am||_cc3["dayPeriods-format-wide-am"],pm=_cc4.pm||_cc3["dayPeriods-format-wide-pm"];if(_cc4.strict){s=am+"|"+pm;}else{s=am+"|"+pm;if(am!=am.toLowerCase()){s+="|"+am.toLowerCase();}if(pm!=pm.toLowerCase()){s+="|"+pm.toLowerCase();}}break;default:s=".*";}if(_cc2){_cc2.push(_cc7);}return "("+s+")";}).replace(/[\xa0 ]/g,"[\\s\\xa0]");};var _cc8=[];_c89.addCustomFormats=function(_cc9,_cca){_cc8.push({pkg:_cc9,name:_cca});};_c89._getIslamicBundle=function(_ccb){var _ccc={};arr.forEach(_cc8,function(desc){var _ccd=i18n.getLocalization(desc.pkg,desc.name,_ccb);_ccc=lang.mixin(_ccc,_ccd);},this);return _ccc;};_c89.addCustomFormats("dojo.cldr","islamic");_c89.getNames=function(item,type,_cce,_ccf,date){var _cd0;var _cd1=_c89._getIslamicBundle(_ccf);var _cd2=[item,_cce,type];if(_cce=="standAlone"){var key=_cd2.join("-");_cd0=_cd1[key];if(_cd0[0]==1){_cd0=undefined;}}_cd2[1]="format";return (_cd0||_cd1[_cd2.join("-")]).concat();};_c89.weekDays=_c89.getNames("days","wide","format");_c89.months=_c89.getNames("months","wide","format");return _c89;});},"dijit/form/_ListMouseMixin":function(){define("dijit/form/_ListMouseMixin",["dojo/_base/declare","dojo/mouse","dojo/on","dojo/touch","./_ListBase"],function(_cd3,_cd4,on,_cd5,_cd6){return _cd3("dijit.form._ListMouseMixin",_cd6,{postCreate:function(){this.inherited(arguments);this.own(on(this.domNode,_cd5.press,function(evt){evt.preventDefault();}));this._listConnect(_cd5.press,"_onMouseDown");this._listConnect(_cd5.release,"_onMouseUp");this._listConnect(_cd4.enter,"_onMouseOver");this._listConnect(_cd4.leave,"_onMouseOut");},_onMouseDown:function(evt,_cd7){if(this._hoveredNode){this.onUnhover(this._hoveredNode);this._hoveredNode=null;}this._isDragging=true;this._setSelectedAttr(_cd7);},_onMouseUp:function(evt,_cd8){this._isDragging=false;var _cd9=this.selected;var _cda=this._hoveredNode;if(_cd9&&_cd8==_cd9){this.onClick(_cd9);}else{if(_cda&&_cd8==_cda){this._setSelectedAttr(_cda);this.onClick(_cda);}}},_onMouseOut:function(evt,_cdb){if(this._hoveredNode){this.onUnhover(this._hoveredNode);this._hoveredNode=null;}if(this._isDragging){this._cancelDrag=(new Date()).getTime()+1000;}},_onMouseOver:function(evt,_cdc){if(this._cancelDrag){var time=(new Date()).getTime();if(time>this._cancelDrag){this._isDragging=false;}this._cancelDrag=null;}this._hoveredNode=_cdc;this.onHover(_cdc);if(this._isDragging){this._setSelectedAttr(_cdc);}}});});},"dojox/charting/plot2d/Bars":function(){define("dojox/charting/plot2d/Bars",["dojo/_base/kernel","dojo/_base/lang","dojo/_base/array","dojo/_base/declare","./CartesianBase","./_PlotEvents","./common","dojox/gfx/fx","dojox/lang/utils","dojox/lang/functional","dojox/lang/functional/reversed"],function(dojo,lang,arr,_cdd,_cde,_cdf,dc,fx,du,df,dfr){var _ce0=dfr.lambda("item.purgeGroup()");return _cdd("dojox.charting.plot2d.Bars",[_cde,_cdf],{defaultParams:{hAxis:"x",vAxis:"y",gap:0,animate:null,enableCache:false},optionalParams:{minBarSize:1,maxBarSize:1,stroke:{},outline:{},shadow:{},fill:{},styleFunc:null,font:"",fontColor:""},constructor:function(_ce1,_ce2){this.opt=lang.clone(this.defaultParams);du.updateWithObject(this.opt,_ce2);du.updateWithPattern(this.opt,_ce2,this.optionalParams);this.series=[];this.hAxis=this.opt.hAxis;this.vAxis=this.opt.vAxis;this.animate=this.opt.animate;},getSeriesStats:function(){var _ce3=dc.collectSimpleStats(this.series),t;_ce3.hmin-=0.5;_ce3.hmax+=0.5;t=_ce3.hmin,_ce3.hmin=_ce3.vmin,_ce3.vmin=t;t=_ce3.hmax,_ce3.hmax=_ce3.vmax,_ce3.vmax=t;return _ce3;},createRect:function(run,_ce4,_ce5){var rect;if(this.opt.enableCache&&run._rectFreePool.length>0){rect=run._rectFreePool.pop();rect.setShape(_ce5);_ce4.add(rect);}else{rect=_ce4.createRect(_ce5);}if(this.opt.enableCache){run._rectUsePool.push(rect);}return rect;},render:function(dim,_ce6){if(this.zoom&&!this.isDataDirty()){return this.performZoom(dim,_ce6);}this.dirty=this.isDirty();this.resetEvents();var s;if(this.dirty){arr.forEach(this.series,_ce0);this._eventSeries={};this.cleanGroup();s=this.group;df.forEachRev(this.series,function(item){item.cleanGroup(s);});}var t=this.chart.theme,ht=this._hScaler.scaler.getTransformerFromModel(this._hScaler),vt=this._vScaler.scaler.getTransformerFromModel(this._vScaler),_ce7=Math.max(0,this._hScaler.bounds.lower),_ce8=ht(_ce7),_ce9=this.events();var bar=this.getBarProperties();for(var i=this.series.length-1;i>=0;--i){var run=this.series[i];if(!this.dirty&&!run.dirty){t.skip();this._reconnectEvents(run.name);continue;}run.cleanGroup();if(this.opt.enableCache){run._rectFreePool=(run._rectFreePool?run._rectFreePool:[]).concat(run._rectUsePool?run._rectUsePool:[]);run._rectUsePool=[];}var _cea=t.next("bar",[this.opt,run]),_ceb=new Array(run.data.length);s=run.group;var l=this.getDataLength(run);var _cec=arr.some(run.data,function(item){return typeof item=="number"||(item&&!item.hasOwnProperty("x"));});for(var j=0;j<l;++j){var _ced=run.data[j];if(_ced!=null){var val=this.getValue(_ced,j,i,_cec),hv=ht(val.y),w=Math.abs(hv-_ce8),_cee,_cef;if(this.opt.styleFunc||typeof _ced!="number"){var _cf0=typeof _ced!="number"?[_ced]:[];if(this.opt.styleFunc){_cf0.push(this.opt.styleFunc(_ced));}_cee=t.addMixin(_cea,"bar",_cf0,true);}else{_cee=t.post(_cea,"bar");}if(w>=0&&bar.height>=1){var rect={x:_ce6.l+(val.y<_ce7?hv:_ce8),y:dim.height-_ce6.b-vt(val.x+1.5)+bar.gap+bar.thickness*(this.series.length-i-1),width:w,height:bar.height};if(_cee.series.shadow){var _cf1=lang.clone(rect);_cf1.x+=_cee.series.shadow.dx;_cf1.y+=_cee.series.shadow.dy;_cef=this.createRect(run,s,_cf1).setFill(_cee.series.shadow.color).setStroke(_cee.series.shadow);if(this.animate){this._animateBar(_cef,_ce6.l+_ce8,-w);}}var _cf2=this._plotFill(_cee.series.fill,dim,_ce6);_cf2=this._shapeFill(_cf2,rect);var _cf3=this.createRect(run,s,rect).setFill(_cf2).setStroke(_cee.series.stroke);run.dyn.fill=_cf3.getFill();run.dyn.stroke=_cf3.getStroke();if(_ce9){var o={element:"bar",index:j,run:run,shape:_cf3,shadow:_cef,x:val.y,y:val.x+1.5};this._connectEvents(o);_ceb[j]=o;}if(this.animate){this._animateBar(_cf3,_ce6.l+_ce8,-w);}}}}this._eventSeries[run.name]=_ceb;run.dirty=false;}this.dirty=false;return this;},getDataLength:function(run){return Math.min(run.data.length,Math.ceil(this._vScaler.bounds.to));},getValue:function(_cf4,j,_cf5,_cf6){var y,x;if(_cf6){if(typeof _cf4=="number"){y=_cf4;}else{y=_cf4.y;}x=j;}else{y=_cf4.y;x=_cf4.x-1;}return {y:y,x:x};},getBarProperties:function(){var f=dc.calculateBarSize(this._vScaler.bounds.scale,this.opt);return {gap:f.gap,height:f.size,thickness:0};},_animateBar:function(_cf7,_cf8,_cf9){if(_cf9==0){_cf9=1;}fx.animateTransform(lang.delegate({shape:_cf7,duration:1200,transform:[{name:"translate",start:[_cf8-(_cf8/_cf9),0],end:[0,0]},{name:"scale",start:[1/_cf9,1],end:[1,1]},{name:"original"}]},this.animate)).play();}});});},"dojox/charting/plot2d/Candlesticks":function(){define("dojox/charting/plot2d/Candlesticks",["dojo/_base/lang","dojo/_base/declare","dojo/_base/array","./CartesianBase","./_PlotEvents","./common","dojox/lang/functional","dojox/lang/functional/reversed","dojox/lang/utils","dojox/gfx/fx"],function(lang,_cfa,arr,_cfb,_cfc,dc,df,dfr,du,fx){var _cfd=dfr.lambda("item.purgeGroup()");return _cfa("dojox.charting.plot2d.Candlesticks",[_cfb,_cfc],{defaultParams:{hAxis:"x",vAxis:"y",gap:2,animate:null},optionalParams:{minBarSize:1,maxBarSize:1,stroke:{},outline:{},shadow:{},fill:{},font:"",fontColor:""},constructor:function(_cfe,_cff){this.opt=lang.clone(this.defaultParams);du.updateWithObject(this.opt,_cff);du.updateWithPattern(this.opt,_cff,this.optionalParams);this.series=[];this.hAxis=this.opt.hAxis;this.vAxis=this.opt.vAxis;this.animate=this.opt.animate;},collectStats:function(_d00){var _d01=lang.delegate(dc.defaultStats);for(var i=0;i<_d00.length;i++){var run=_d00[i];if(!run.data.length){continue;}var _d02=_d01.vmin,_d03=_d01.vmax;if(!("ymin" in run)||!("ymax" in run)){arr.forEach(run.data,function(val,idx){if(val!==null){var x=val.x||idx+1;_d01.hmin=Math.min(_d01.hmin,x);_d01.hmax=Math.max(_d01.hmax,x);_d01.vmin=Math.min(_d01.vmin,val.open,val.close,val.high,val.low);_d01.vmax=Math.max(_d01.vmax,val.open,val.close,val.high,val.low);}});}if("ymin" in run){_d01.vmin=Math.min(_d02,run.ymin);}if("ymax" in run){_d01.vmax=Math.max(_d03,run.ymax);}}return _d01;},getSeriesStats:function(){var _d04=this.collectStats(this.series);_d04.hmin-=0.5;_d04.hmax+=0.5;return _d04;},render:function(dim,_d05){if(this.zoom&&!this.isDataDirty()){return this.performZoom(dim,_d05);}this.resetEvents();this.dirty=this.isDirty();if(this.dirty){arr.forEach(this.series,_cfd);this._eventSeries={};this.cleanGroup();var s=this.group;df.forEachRev(this.series,function(item){item.cleanGroup(s);});}var t=this.chart.theme,f,gap,_d06,ht=this._hScaler.scaler.getTransformerFromModel(this._hScaler),vt=this._vScaler.scaler.getTransformerFromModel(this._vScaler),_d07=Math.max(0,this._vScaler.bounds.lower),_d08=vt(_d07),_d09=this.events();f=dc.calculateBarSize(this._hScaler.bounds.scale,this.opt);gap=f.gap;_d06=f.size;for(var i=this.series.length-1;i>=0;--i){var run=this.series[i];if(!this.dirty&&!run.dirty){t.skip();this._reconnectEvents(run.name);continue;}run.cleanGroup();var _d0a=t.next("candlestick",[this.opt,run]),s=run.group,_d0b=new Array(run.data.length);for(var j=0;j<run.data.length;++j){var v=run.data[j];if(v!==null){var _d0c=t.addMixin(_d0a,"candlestick",v,true);var x=ht(v.x||(j+0.5))+_d05.l+gap,y=dim.height-_d05.b,open=vt(v.open),_d0d=vt(v.close),high=vt(v.high),low=vt(v.low);if("mid" in v){var mid=vt(v.mid);}if(low>high){var tmp=high;high=low;low=tmp;}if(_d06>=1){var _d0e=open>_d0d;var line={x1:_d06/2,x2:_d06/2,y1:y-high,y2:y-low},rect={x:0,y:y-Math.max(open,_d0d),width:_d06,height:Math.max(_d0e?open-_d0d:_d0d-open,1)};var _d0f=s.createGroup();_d0f.setTransform({dx:x,dy:0});var _d10=_d0f.createGroup();_d10.createLine(line).setStroke(_d0c.series.stroke);_d10.createRect(rect).setStroke(_d0c.series.stroke).setFill(_d0e?_d0c.series.fill:"white");if("mid" in v){_d10.createLine({x1:(_d0c.series.stroke.width||1),x2:_d06-(_d0c.series.stroke.width||1),y1:y-mid,y2:y-mid}).setStroke(_d0e?"white":_d0c.series.stroke);}run.dyn.fill=_d0c.series.fill;run.dyn.stroke=_d0c.series.stroke;if(_d09){var o={element:"candlestick",index:j,run:run,shape:_d10,x:x,y:y-Math.max(open,_d0d),cx:_d06/2,cy:(y-Math.max(open,_d0d))+(Math.max(_d0e?open-_d0d:_d0d-open,1)/2),width:_d06,height:Math.max(_d0e?open-_d0d:_d0d-open,1),data:v};this._connectEvents(o);_d0b[j]=o;}}if(this.animate){this._animateCandlesticks(_d0f,y-low,high-low);}}}this._eventSeries[run.name]=_d0b;run.dirty=false;}this.dirty=false;return this;},_animateCandlesticks:function(_d11,_d12,_d13){fx.animateTransform(lang.delegate({shape:_d11,duration:1200,transform:[{name:"translate",start:[0,_d12-(_d12/_d13)],end:[0,0]},{name:"scale",start:[1,1/_d13],end:[1,1]},{name:"original"}]},this.animate)).play();}});});},"esri/dijit/AttributeInspector":function(){define("esri/dijit/AttributeInspector",["dijit","dojo","dojox","dojo/require!dojo/fx,dojox/gfx,dijit/_Widget,dijit/_Templated,dijit/Editor,dijit/_editor/plugins/LinkDialog,dijit/_editor/plugins/TextColor,esri/dijit/editing/AttachmentEditor,esri/dijit/editing/Util,esri/tasks/query,dijit/form/DateTextBox,dijit/form/TextBox,dijit/form/NumberTextBox,dijit/form/FilteringSelect,dijit/form/NumberSpinner,dijit/form/Button,dijit/form/SimpleTextarea,dijit/Tooltip,dojo/data/ItemFileReadStore,dojox/date/islamic,dojox/date/islamic/Date,dojox/date/islamic/locale"],function(_d14,dojo,_d15){dojo.provide("esri.dijit.AttributeInspector");dojo.require("dojo.fx");dojo.require("dojox.gfx");dojo.require("dijit._Widget");dojo.require("dijit._Templated");dojo.require("dijit.Editor");dojo.require("dijit._editor.plugins.LinkDialog");dojo.require("dijit._editor.plugins.TextColor");dojo.require("esri.dijit.editing.AttachmentEditor");dojo.require("esri.dijit.editing.Util");dojo.require("esri.tasks.query");dojo.require("dijit.form.DateTextBox");dojo.require("dijit.form.TextBox");dojo.require("dijit.form.NumberTextBox");dojo.require("dijit.form.FilteringSelect");dojo.require("dijit.form.NumberSpinner");dojo.require("dijit.form.Button");dojo.require("dijit.form.SimpleTextarea");dojo.require("dijit.Tooltip");dojo.require("dojo.data.ItemFileReadStore");dojo.require("dojox.date.islamic");dojo.require("dojox.date.islamic.Date");dojo.require("dojox.date.islamic.locale");dojo.declare("esri.dijit.AttributeInspector",[_d14._Widget,_d14._Templated],{widgetsInTemplate:true,templateString:"<div class=\"esriAttributeInspector\">\r\n    <div class=\"atiLayerName\" dojoAttachPoint=\"layerName\"></div>\r\n    <div class=\"atiAttributes\" dojoAttachPoint=\"attributeTable\"></div>\r\n    <div dojoAttachPoint=\"attachmentEditor\"></div>\r\n    <div class=\"atiEditorTrackingInfo\" dojoAttachPoint=\"editorTrackingInfoDiv\"></div>\r\n    <div class=\"atiButtons\" dojoAttachPoint=\"editButtons\">\r\n        <button  dojoType=\"dijit.form.Button\" class=\"atiButton atiDeleteButton\"  dojoAttachPoint=\"deleteBtn\" dojoAttachEvent=\"onClick: onDeleteBtn\" showLabel=\"true\" type=\"button\">${NLS_deleteFeature}</button>\r\n        <div class=\"atiNavButtons\" dojoAttachPoint=\"navButtons\">\r\n            <div class=\"atiNavMessage\" dojoAttachPoint=\"navMessage\"></div>\r\n            <button  dojoType=\"dijit.form.Button\" iconClass=\"atiButton atiFirstIcon\" dojoAttachPoint=\"firstFeatureButton\" dojoAttachEvent=\"onClick: onFirstFeature\" showLabel=\"false\" type=\"button\">${NLS_first}</button>\r\n            <button  dojoType=\"dijit.form.Button\" iconClass=\"atiButton atiPrevIcon\" dojoAttachPoint=\"prevFeatureButton\" dojoAttachEvent=\"onClick: onPreviousFeature\" showLabel=\"false\" type=\"button\">${NLS_previous}</button>\r\n            <button  dojoType=\"dijit.form.Button\" iconClass=\"atiButton atiNextIcon\" dojoAttachPoint=\"nextFeatureButton\" dojoAttachEvent=\"onClick: onNextFeature\" showLabel=\"false\" type=\"button\">${NLS_next}</button>\r\n            <button  dojoType=\"dijit.form.Button\" iconClass=\"atiButton atiLastIcon\" dojoAttachPoint=\"lastFeatureButton\" dojoAttachEvent=\"onClick: onLastFeature\" showLabel=\"false\" type=\"button\">${NLS_last}</button>\r\n        </div>\r\n    </div>\r\n</div>\r\n",_navMessage:"( ${idx} ${of} ${numFeatures} )",onUpdate:function(){},onDelete:function(){},onAttributeChange:function(){},onNext:function(){},onReset:function(){},onCancel:function(){},constructor:function(_d16,_d17){dojo.mixin(this,esri.bundle.widgets.attributeInspector);_d16=_d16||{};if(!_d16.featureLayer&&!_d16.layerInfos){console.error("esri.AttributeInspector: please provide correct parameter in the constructor");}this._userIds={};if(_d16.featureLayer&&_d16.featureLayer.credential){var _d18=_d16.featureLayer.id;this._userIds[_d18]=_d16.featureLayer.credential.userId;}else{if(_d16.layerInfos){var _d19=_d16.layerInfos;dojo.forEach(_d19,function(_d1a){if(_d1a.featureLayer){var _d1b=_d1a.featureLayer.id;if(_d1a.featureLayer.credential){this._userIds[_d1b]=_d1a.featureLayer.credential.userId;}if(_d1a.userId){this._userIds[_d1b]=_d1a.userId;}}},this);}}this._datePackage=this._getDatePackage(_d16);this._layerInfos=_d16.layerInfos||[{featureLayer:_d16.featureLayer,options:_d16.options||[]}];this._aiConnects=[];this._selection=[];this._toolTips=[];this._numFeatures=0;this._featureIdx=0;this._currentLInfo=null;this._currentFeature=null;this._hideNavButtons=_d16.hideNavButtons||false;},postCreate:function(){this._initLayerInfos();this._createAttachmentEditor();this.onFirstFeature();},destroy:function(){this._destroyAttributeTable();dojo.forEach(this._aiConnects,dojo.disconnect);delete this._aiConnects;if(this._attachmentEditor){this._attachmentEditor.destroy();delete this._attachmentEditor;}delete this._layerInfos;this._selection=this._currentFeature=this._currentLInfo=this._attributes=this._layerInfos=null;this.inherited(arguments);},refresh:function(){this._updateSelection();},first:function(){this.onFirstFeature();},last:function(){this.onLastFeature();},next:function(){this.onNextFeature();},previous:function(){this.onPreviousFeature();},showFeature:function(_d1c,_d1d){if(_d1d){this._createOnlyFirstTime=true;}this._updateSelection([_d1c],_d1d);this._updateUI();},onLayerSelectionChange:function(_d1e,_d1f,_d20){this._createOnlyFirstTime=false;this._featureIdx=(_d20===esri.layers.FeatureLayer.SELECTION_NEW)?0:this._featureIdx;this._updateSelection();this._updateUI();},onLayerSelectionClear:function(){if(!this._selection||this._selection.length<=0){return;}this._numFeatures=0;this._featureIdx=0;this._selection=[];this._currentFeature=null;this._currentLInfo=null;this._updateUI();},onLayerEditsComplete:function(_d21,adds,_d22,_d23){_d23=_d23||[];if(_d23.length){var _d24=this._selection;var _d25=_d21.featureLayer.objectIdField;dojo.forEach(_d23,dojo.hitch(this,function(del){dojo.some(_d24,dojo.hitch(this,function(item,idx){if(item.attributes[_d25]!==del.objectId){return false;}this._selection.splice(idx,1);return true;}));}));}adds=adds||[];if(adds.length){this._selection=esri.dijit.editing.Util.LayerHelper.findFeatures(adds,_d21.featureLayer);this._featureIdx=0;}var _d26=this._numFeatures=this._selection?this._selection.length:0;if(adds.length){var _d27=_d26?this._selection[this._featureIdx]:null;if(_d27){var _d28=_d27.getLayer();var _d29=_d28.getEditCapabilities();if(!(_d29.canCreate&&!_d29.canUpdate)){this._showFeature(_d27);}}}this._updateUI();},onFieldValueChange:function(_d2a,_d2b){_d2b=(typeof _d2b==="undefined")?null:_d2b;var _d2c=_d2a.field;if(_d2c.type==="esriFieldTypeDate"){_d2b=(_d2b&&_d2b.getTime)?_d2b.getTime():(_d2b&&_d2b.toGregorian?_d2b.toGregorian().getTime():_d2b);}if(this._currentFeature.attributes[_d2c.name]===_d2b){return;}var _d2d=this._currentLInfo;var _d2e=this._currentFeature;var _d2f=_d2c.name;if(_d2f===_d2d.typeIdField){var type=this._findFirst(_d2d.types,"id",_d2b);var _d30=_d2d.fieldInfos;dojo.forEach(_d30,function(_d31){_d2c=_d31.field;if(!_d2c||_d2c.name===_d2d.typeIdField){return;}var node=_d31.dijit;var _d32=this._setFieldDomain(node,type,_d2c);if(_d32&&node){this._setValue(node,_d2e.attributes[_d2c.name]+"");if(node.isValid()===false){this._setValue(node,null);}}},this);}this.onAttributeChange(_d2e,_d2f,_d2b);},onDeleteBtn:function(evt){this._deleteFeature();},onNextFeature:function(evt){this._onNextFeature(1);},onPreviousFeature:function(evt){this._onNextFeature(-1);},onFirstFeature:function(evt){this._onNextFeature(this._featureIdx*-1);},onLastFeature:function(evt){this._onNextFeature((this._numFeatures-1)-this._featureIdx);},_initLayerInfos:function(){var _d33=this._layerInfos;this._editorTrackingInfos={};dojo.forEach(_d33,this._initLayerInfo,this);},_initLayerInfo:function(_d34){var _d35=_d34.featureLayer;this._connect(_d35,"onSelectionComplete",dojo.hitch(this,"onLayerSelectionChange",_d34));this._connect(_d35,"onSelectionClear",dojo.hitch(this,"onLayerSelectionClear",_d34));this._connect(_d35,"onEditsComplete",dojo.hitch(this,"onLayerEditsComplete",_d34));_d34.showAttachments=_d35.hasAttachments?(esri._isDefined(_d34.showAttachments)?_d34.showAttachments:true):false;_d34.hideFields=_d34.hideFields||[];_d34.htmlFields=_d34.htmlFields||[];_d34.isEditable=_d35.isEditable()?(esri._isDefined(_d34.isEditable)?_d34.isEditable:true):false;_d34.typeIdField=_d35.typeIdField;_d34.layerId=_d35.id;_d34.types=_d35.types;if(!_d34.showGlobalID&&_d35.globalIdField){_d34.hideFields.push(_d35.globalIdField);}if(!_d34.showObjectID){_d34.hideFields.push(_d35.objectIdField);}var _d36=this._getFields(_d34.featureLayer);if(!_d36){return;}var _d37=_d34.fieldInfos||[];_d37=dojo.map(_d37,function(_d38){return dojo.mixin({},_d38);});if(!_d37.length){_d36=dojo.filter(_d36,dojo.hitch(this,function(_d39){return !this._isInFields(_d39.name,_d34.hideFields);}));_d34.fieldInfos=dojo.map(_d36,dojo.hitch(this,function(_d3a){var _d3b=(this._isInFields(_d3a.name,_d34.htmlFields)?esri.dijit.AttributeInspector.STRING_FIELD_OPTION_RICHTEXT:esri.dijit.AttributeInspector.STRING_FIELD_OPTION_TEXTBOX);return {"fieldName":_d3a.name,"field":_d3a,"stringFieldOption":_d3b};}));}else{_d34.fieldInfos=dojo.filter(dojo.map(_d37,dojo.hitch(this,function(_d3c){var _d3d=_d3c.stringFieldOption||(this._isInFields(_d3c.fieldName,_d34.htmlFields)?esri.dijit.AttributeInspector.STRING_FIELD_OPTION_RICHTEXT:esri.dijit.AttributeInspector.STRING_FIELD_OPTION_TEXTBOX);return dojo.mixin(_d3c,{"field":this._findFirst(_d36,"name",_d3c.fieldName),"stringFieldOption":_d3d});})),"return item.field;");}var _d3e=[];if(_d35.editFieldsInfo){if(_d35.editFieldsInfo.creatorField){_d3e.push(_d35.editFieldsInfo.creatorField);}if(_d35.editFieldsInfo.creationDateField){_d3e.push(_d35.editFieldsInfo.creationDateField);}if(_d35.editFieldsInfo.editorField){_d3e.push(_d35.editFieldsInfo.editorField);}if(_d35.editFieldsInfo.editDateField){_d3e.push(_d35.editFieldsInfo.editDateField);}}this._editorTrackingInfos[_d35.id]=_d3e;},_createAttachmentEditor:function(){this._attachmentEditor=null;var _d3f=this._layerInfos;var _d40=dojo.filter(_d3f,"return item.showAttachments");if(!_d40||!_d40.length){return;}this._attachmentEditor=new esri.dijit.editing.AttachmentEditor({"class":"atiAttachmentEditor"},this.attachmentEditor);this._attachmentEditor.startup();},_setCurrentLInfo:function(_d41){var _d42=this._currentLInfo?this._currentLInfo.featureLayer:null;var _d43=_d41.featureLayer;if(_d42&&_d42.id===_d43.id&&!_d42.ownershipBasedAccessControlForFeatures){var _d44=_d43.getEditCapabilities();if(!(_d44.canCreate&&!_d44.canUpdate)){return;}}this._currentLInfo=_d41;this._createTable();},_updateSelection:function(_d45,_d46){this._selection=_d45||[];var _d47=this._layerInfos;dojo.forEach(_d47,this._getSelection,this);var _d48=this._numFeatures=this._selection.length;var _d49=_d48?this._selection[this._featureIdx]:null;this._showFeature(_d49,_d46);},_getSelection:function(_d4a){var _d4b=_d4a.featureLayer.getSelectedFeatures();this._selection=this._selection.concat(_d4b);},_updateUI:function(){var _d4c=this._numFeatures;var _d4d=this._currentLInfo;this.layerName.innerHTML=(!_d4d||_d4c===0)?this.NLS_noFeaturesSelected:(_d4d.featureLayer?_d4d.featureLayer.name:"");dojo.style(this.attributeTable,"display",_d4c?"":"none");dojo.style(this.editButtons,"display",_d4c?"":"none");dojo.style(this.navButtons,"display",(!this._hideNavButtons&&(_d4c>1)?"":"none"));this.navMessage.innerHTML=esri.substitute({idx:this._featureIdx+1,of:this.NLS_of,numFeatures:this._numFeatures},this._navMessage);if(this._attachmentEditor){dojo.style(this._attachmentEditor.domNode,"display",((_d4d&&_d4d.showAttachments)&&_d4c)?"":"none");}var _d4e=((_d4d&&_d4d.showDeleteButton===false)||!this._canDelete)?false:true;dojo.style(this.deleteBtn.domNode,"display",_d4e?"":"none");if(this.domNode.parentNode&&this.domNode.parentNode.scrollTop>0){this.domNode.parentNode.scrollTop=0;}},_onNextFeature:function(_d4f){this._featureIdx+=_d4f;if(this._featureIdx<0){this._featureIdx=this._numFeatures-1;}else{if(this._featureIdx>=this._numFeatures){this._featureIdx=0;}}var _d50=this._selection.length?this._selection[this._featureIdx]:null;this._showFeature(_d50);this._updateUI();this.onNext(_d50);},_deleteFeature:function(){this.onDelete(this._currentFeature);},_showFeature:function(_d51,_d52){if(!_d51){return;}this._currentFeature=_d51;var _d53=_d52?_d52:_d51.getLayer();var _d54=_d53.getEditCapabilities({feature:_d51,userId:this._userIds[_d53.id]});this._canUpdate=_d54.canUpdate;this._canDelete=_d54.canDelete;var _d55=this._getLInfoFromFeatureLayer(_d53);if(!_d55){return;}this._setCurrentLInfo(_d55);var _d56=_d51.attributes;var type=this._findFirst(_d55.types,"id",_d56[_d55.typeIdField]);var node,_d57=null;var _d58=_d55.fieldInfos;dojo.forEach(_d58,function(_d59){_d57=_d59.field;node=_d59.dijit||null;if(!node){return;}var _d5a=this._setFieldDomain(node,type,_d57);var _d5b=_d56[_d57.name];_d5b=(_d5b&&_d5a&&_d5a.codedValues&&_d5a.codedValues.length)?(_d5a.codedValues[_d5b]?_d5a.codedValues[_d5b].name:_d5b):_d5b;if(!esri._isDefined(_d5b)){_d5b="";}if(node.declaredClass==="dijit.form.DateTextBox"){_d5b=(_d5b==="")?null:new Date(_d5b);}else{if(node.declaredClass==="dijit.form.FilteringSelect"){node._lastValueReported=null;_d5b=_d56[_d57.name]+"";}}try{this._setValue(node,_d5b);if(node.declaredClass==="dijit.form.FilteringSelect"&&node.isValid()===false){this._setValue(node,null);}}catch(error){node.set("displayedValue",this.NLS_errorInvalid,false);}},this);if(this._attachmentEditor&&_d55.showAttachments){this._attachmentEditor.showAttachments(this._currentFeature);}var _d5c=_d53.getEditSummary(_d51);if(_d5c){this.editorTrackingInfoDiv.innerHTML=_d5c;esri.show(this.editorTrackingInfoDiv);}else{esri.hide(this.editorTrackingInfoDiv);}},_setFieldDomain:function(node,type,_d5d){if(!node){return null;}var _d5e=_d5d.domain;if(type&&type.domains){if(type.domains[_d5d.name]&&type.domains[_d5d.name] instanceof esri.layers.InheritedDomain===false){_d5e=type.domains[_d5d.name];}}if(!_d5e){return null;}if(_d5e.codedValues&&_d5e.codedValues.length>0){node.set("store",this._toStore(dojo.map(_d5e.codedValues,"return { id: item.code += '', name: item.name };")));this._setValue(node,_d5e.codedValues[0].code);}else{node.constraints={min:esri._isDefined(_d5e.minValue)?_d5e.minValue:Number.MIN_VALUE,max:esri._isDefined(_d5e.maxValue)?_d5e.maxValue:Number.MAX_VALUE};this._setValue(node,node.constraints.min);}return _d5e;},_setValue:function(node,_d5f){if(!node.set){return;}node._onChangeActive=false;node.set("value",_d5f,true);node._onChangeActive=true;},_getFields:function(_d60){var _d61=_d60._getOutFields();if(!_d61){return null;}var _d62=_d60.fields;return (_d61=="*")?_d62:dojo.filter(dojo.map(_d61,dojo.hitch(this,"_findFirst",_d62,"name")),esri._isDefined);},_isInFields:function(_d63,_d64){if(!_d63||!_d64&&!_d64.length){return false;}return dojo.some(_d64,function(name){return name.toLowerCase()===_d63.toLowerCase();});},_findFirst:function(_d65,_d66,_d67){var _d68=dojo.filter(_d65,function(item){return item.hasOwnProperty(_d66)&&item[_d66]===_d67;});return (_d68&&_d68.length)?_d68[0]:null;},_getLInfoFromFeatureLayer:function(_d69){var _d6a=_d69?_d69.id:null;return this._findFirst(this._layerInfos,"layerId",_d6a);},_createTable:function(){this._destroyAttributeTable();this.attributeTable.innerHTML="";this._attributes=dojo.create("table",{cellspacing:"0",cellpadding:"0"},this.attributeTable);var _d6b=dojo.create("tbody",null,this._attributes);var _d6c=this._currentFeature;var _d6d=this._currentLInfo;var type=this._findFirst(_d6d.types,"id",_d6c.attributes[_d6d.typeIdField]);var _d6e=_d6d.fieldInfos;dojo.forEach(_d6e,dojo.hitch(this,"_createField",type,_d6b),this);this._createOnlyFirstTime=false;},_createField:function(type,_d6f,_d70){var _d71=this._currentLInfo;var _d72=_d70.field;if(this._isInFields(_d72.name,_d71.hideFields)){return;}if(this._isInFields(_d72.name,this._editorTrackingInfos[_d71.featureLayer.id])){return;}var node=dojo.create("tr",null,_d6f);var td=dojo.create("td",{innerHTML:_d70.label||_d72.alias||_d72.name,"class":"atiLabel"},node);td=dojo.create("td",null,node);var _d73=null;var _d74=false;if(_d70.customField){dojo.place(_d70.customField.domNode||_d70.customField,dojo.create("div",null,td),"first");_d73=_d70.customField;}else{if(_d71.isEditable===false||_d72.editable===false||_d70.isEditable===false||_d72.type==="esriFieldTypeOID"||_d72.type==="esriFieldTypeGlobalID"||(!this._canUpdate&&!this._createOnlyFirstTime)){_d74=true;}}if(!_d73&&(_d71.typeIdField&&_d72.name.toLowerCase()==_d71.typeIdField.toLowerCase())){_d73=this._createTypeField(_d72,_d70,td);}else{if(!_d73){_d73=this._createDomainField(_d72,_d70,type,td);}}if(!_d73){switch(_d72.type){case "esriFieldTypeString":_d73=this._createStringField(_d72,_d70,td);break;case "esriFieldTypeDate":_d73=this._createDateField(_d72,_d70,td);break;case "esriFieldTypeInteger":case "esriFieldTypeSmallInteger":_d73=this._createIntField(_d72,_d70,td);break;case "esriFieldTypeSingle":case "esriFieldTypeDouble":_d73=this._createFltField(_d72,_d70,td);break;default:_d73=this._createStringField(_d72,_d70,td);break;}}if(_d70.tooltip&&_d70.tooltip.length){this._toolTips.push(new _d14.Tooltip({connectId:[_d73.id],label:_d70.tooltip}));}_d73.onChange=dojo.hitch(this,"onFieldValueChange",_d70);_d73.set("disabled",_d74);_d70.dijit=_d73;},_createTypeField:function(_d75,_d76,node){return new _d14.form.FilteringSelect({"class":"atiField",name:_d75.alias||_d75.name,store:this._toStore(dojo.map(this._currentLInfo.types,"return { id: item.id, name: item.name };")),searchAttr:"name"},dojo.create("div",null,node));},_createDomainField:function(_d77,_d78,type,node){var _d79=_d77.domain;if(type&&type.domains){if(type.domains[_d77.name]&&type.domains[_d77.name] instanceof esri.layers.InheritedDomain===false){_d79=type.domains[_d77.name];}}if(!_d79){return null;}if(_d79.codedValues){return new _d14.form.FilteringSelect({"class":"atiField",name:_d77.alias||_d77.name,searchAttr:"name",required:_d77.nullable||false},dojo.create("div",null,node));}else{return new _d14.form.NumberSpinner({"class":"atiField"},dojo.create("div",null,node));}},_createStringField:function(_d7a,_d7b,node){var _d7c={"class":"atiField",trim:true,maxLength:_d7a.length};if(_d7b.stringFieldOption===esri.dijit.AttributeInspector.STRING_FIELD_OPTION_TEXTAREA){_d7c["class"]+=" atiTextAreaField";return new _d14.form.SimpleTextarea(_d7c,dojo.create("div",null,node));}else{if(_d7b.stringFieldOption===esri.dijit.AttributeInspector.STRING_FIELD_OPTION_RICHTEXT){_d7c["class"]+=" atiRichTextField";_d7c.height="100%";_d7c.width="100%";_d7c.plugins=_d7b.richTextPlugins||["bold","italic","underline","foreColor","hiliteColor","|","justifyLeft","justifyCenter","justifyRight","justifyFull","|","insertOrderedList","insertUnorderedList","indent","outdent","|","createLink"];return new _d14.Editor(_d7c,dojo.create("div",null,node));}else{return new _d14.form.TextBox(_d7c,dojo.create("div",null,node));}}},_createDateField:function(_d7d,_d7e,node){var _d7f={"class":"atiField","trim":true};if(this._datePackage){_d7f.datePackage=this._datePackage;}return new _d14.form.DateTextBox(_d7f,dojo.create("div",null,node));},_createIntField:function(_d80,_d81,node){return new _d14.form.NumberTextBox({"class":"atiField",constraints:{places:0},invalidMessage:this.NLS_validationInt,trim:true},dojo.create("div",null,node));},_createFltField:function(_d82,_d83,node){return new _d14.form.NumberTextBox({"class":"atiField",trim:true,invalidMessage:this.NLS_validationFlt},dojo.create("div",null,node));},_toStore:function(_d84){return new dojo.data.ItemFileReadStore({data:{identifier:"id",label:"name",items:_d84}});},_connect:function(node,evt,func){this._aiConnects.push(dojo.connect(node,evt,func));},_getDatePackage:function(_d85){if(_d85.datePackage===null){return null;}else{if(_d85.datePackage){return _d85.datePackage;}else{if(dojo.locale==="ar"){return "dojox.date.islamic";}}}return null;},_destroyAttributeTable:function(){var _d86=this._layerInfos;dojo.forEach(_d86,function(_d87){var _d88=_d87.fieldInfos;dojo.forEach(_d88,function(_d89){var _d8a=_d89.dijit;if(_d8a){_d8a._onChangeHandle=null;if(_d89.customField){return;}if(_d8a.destroyRecursive){_d8a.destroyRecursive();}else{if(_d8a.destroy){_d8a.destroy();}}}_d89.dijit=null;},this);},this);var _d8b=this._toolTips;dojo.forEach(_d8b,"item.destroy(); delete item;");this._toolTips=[];if(this._attributes){dojo.destroy(this._attributes);}}});dojo.mixin(esri.dijit.AttributeInspector,{STRING_FIELD_OPTION_RICHTEXT:"richtext",STRING_FIELD_OPTION_TEXTAREA:"textarea",STRING_FIELD_OPTION_TEXTBOX:"textbox"});});},"dojox/charting/plot2d/OHLC":function(){define("dojox/charting/plot2d/OHLC",["dojo/_base/lang","dojo/_base/array","dojo/_base/declare","./CartesianBase","./_PlotEvents","./common","dojox/lang/functional","dojox/lang/functional/reversed","dojox/lang/utils","dojox/gfx/fx"],function(lang,arr,_d8c,_d8d,_d8e,dc,df,dfr,du,fx){var _d8f=dfr.lambda("item.purgeGroup()");return _d8c("dojox.charting.plot2d.OHLC",[_d8d,_d8e],{defaultParams:{hAxis:"x",vAxis:"y",gap:2,animate:null},optionalParams:{minBarSize:1,maxBarSize:1,stroke:{},outline:{},shadow:{},fill:{},font:"",fontColor:""},constructor:function(_d90,_d91){this.opt=lang.clone(this.defaultParams);du.updateWithObject(this.opt,_d91);du.updateWithPattern(this.opt,_d91,this.optionalParams);this.series=[];this.hAxis=this.opt.hAxis;this.vAxis=this.opt.vAxis;this.animate=this.opt.animate;},collectStats:function(_d92){var _d93=lang.delegate(dc.defaultStats);for(var i=0;i<_d92.length;i++){var run=_d92[i];if(!run.data.length){continue;}var _d94=_d93.vmin,_d95=_d93.vmax;if(!("ymin" in run)||!("ymax" in run)){arr.forEach(run.data,function(val,idx){if(val!==null){var x=val.x||idx+1;_d93.hmin=Math.min(_d93.hmin,x);_d93.hmax=Math.max(_d93.hmax,x);_d93.vmin=Math.min(_d93.vmin,val.open,val.close,val.high,val.low);_d93.vmax=Math.max(_d93.vmax,val.open,val.close,val.high,val.low);}});}if("ymin" in run){_d93.vmin=Math.min(_d94,run.ymin);}if("ymax" in run){_d93.vmax=Math.max(_d95,run.ymax);}}return _d93;},getSeriesStats:function(){var _d96=this.collectStats(this.series);_d96.hmin-=0.5;_d96.hmax+=0.5;return _d96;},render:function(dim,_d97){if(this.zoom&&!this.isDataDirty()){return this.performZoom(dim,_d97);}this.resetEvents();this.dirty=this.isDirty();if(this.dirty){arr.forEach(this.series,_d8f);this._eventSeries={};this.cleanGroup();var s=this.group;df.forEachRev(this.series,function(item){item.cleanGroup(s);});}var t=this.chart.theme,f,gap,_d98,ht=this._hScaler.scaler.getTransformerFromModel(this._hScaler),vt=this._vScaler.scaler.getTransformerFromModel(this._vScaler),_d99=Math.max(0,this._vScaler.bounds.lower),_d9a=vt(_d99),_d9b=this.events();f=dc.calculateBarSize(this._hScaler.bounds.scale,this.opt);gap=f.gap;_d98=f.size;for(var i=this.series.length-1;i>=0;--i){var run=this.series[i];if(!this.dirty&&!run.dirty){t.skip();this._reconnectEvents(run.name);continue;}run.cleanGroup();var _d9c=t.next("candlestick",[this.opt,run]),s=run.group,_d9d=new Array(run.data.length);for(var j=0;j<run.data.length;++j){var v=run.data[j];if(v!==null){var _d9e=t.addMixin(_d9c,"candlestick",v,true);var x=ht(v.x||(j+0.5))+_d97.l+gap,y=dim.height-_d97.b,open=vt(v.open),_d9f=vt(v.close),high=vt(v.high),low=vt(v.low);if(low>high){var tmp=high;high=low;low=tmp;}if(_d98>=1){var hl={x1:_d98/2,x2:_d98/2,y1:y-high,y2:y-low},op={x1:0,x2:((_d98/2)+((_d9e.series.stroke.width||1)/2)),y1:y-open,y2:y-open},cl={x1:((_d98/2)-((_d9e.series.stroke.width||1)/2)),x2:_d98,y1:y-_d9f,y2:y-_d9f};var _da0=s.createGroup();_da0.setTransform({dx:x,dy:0});var _da1=_da0.createGroup();_da1.createLine(hl).setStroke(_d9e.series.stroke);_da1.createLine(op).setStroke(_d9e.series.stroke);_da1.createLine(cl).setStroke(_d9e.series.stroke);run.dyn.stroke=_d9e.series.stroke;if(_d9b){var o={element:"candlestick",index:j,run:run,shape:_da1,x:x,y:y-Math.max(open,_d9f),cx:_d98/2,cy:(y-Math.max(open,_d9f))+(Math.max(open>_d9f?open-_d9f:_d9f-open,1)/2),width:_d98,height:Math.max(open>_d9f?open-_d9f:_d9f-open,1),data:v};this._connectEvents(o);_d9d[j]=o;}}if(this.animate){this._animateOHLC(_da0,y-low,high-low);}}}this._eventSeries[run.name]=_d9d;run.dirty=false;}this.dirty=false;return this;},_animateOHLC:function(_da2,_da3,_da4){fx.animateTransform(lang.delegate({shape:_da2,duration:1200,transform:[{name:"translate",start:[0,_da3-(_da3/_da4)],end:[0,0]},{name:"scale",start:[1,1/_da4],end:[1,1]},{name:"original"}]},this.animate)).play();}});});},"url:dijit/templates/MenuItem.html":"<tr class=\"dijitReset dijitMenuItem\" data-dojo-attach-point=\"focusNode\" role=\"menuitem\" tabIndex=\"-1\">\n\t<td class=\"dijitReset dijitMenuItemIconCell\" role=\"presentation\">\n\t\t<img src=\"${_blankGif}\" alt=\"\" class=\"dijitIcon dijitMenuItemIcon\" data-dojo-attach-point=\"iconNode\"/>\n\t</td>\n\t<td class=\"dijitReset dijitMenuItemLabel\" colspan=\"2\" data-dojo-attach-point=\"containerNode\"></td>\n\t<td class=\"dijitReset dijitMenuItemAccelKey\" style=\"display: none\" data-dojo-attach-point=\"accelKeyNode\"></td>\n\t<td class=\"dijitReset dijitMenuArrowCell\" role=\"presentation\">\n\t\t<div data-dojo-attach-point=\"arrowWrapper\" style=\"visibility: hidden\">\n\t\t\t<img src=\"${_blankGif}\" alt=\"\" class=\"dijitMenuExpand\"/>\n\t\t\t<span class=\"dijitMenuExpandA11y\">+</span>\n\t\t</div>\n\t</td>\n</tr>\n","dijit/form/DateTextBox":function(){define("dijit/form/DateTextBox",["dojo/_base/declare","../Calendar","./_DateTimeTextBox"],function(_da5,_da6,_da7){return _da5("dijit.form.DateTextBox",_da7,{baseClass:"dijitTextBox dijitComboBox dijitDateTextBox",popupClass:_da6,_selector:"date",value:new Date("")});});},"dojox/color/_base":function(){define("dojox/color/_base",["../main","dojo/_base/lang","dojo/_base/Color","dojo/colors"],function(_da8,lang,_da9,_daa){var cx=lang.getObject("color",true,_da8);cx.Color=_da9;cx.blend=_da9.blendColors;cx.fromRgb=_da9.fromRgb;cx.fromHex=_da9.fromHex;cx.fromArray=_da9.fromArray;cx.fromString=_da9.fromString;cx.greyscale=_daa.makeGrey;lang.mixin(cx,{fromCmy:function(cyan,_dab,_dac){if(lang.isArray(cyan)){_dab=cyan[1],_dac=cyan[2],cyan=cyan[0];}else{if(lang.isObject(cyan)){_dab=cyan.m,_dac=cyan.y,cyan=cyan.c;}}cyan/=100,_dab/=100,_dac/=100;var r=1-cyan,g=1-_dab,b=1-_dac;return new _da9({r:Math.round(r*255),g:Math.round(g*255),b:Math.round(b*255)});},fromCmyk:function(cyan,_dad,_dae,_daf){if(lang.isArray(cyan)){_dad=cyan[1],_dae=cyan[2],_daf=cyan[3],cyan=cyan[0];}else{if(lang.isObject(cyan)){_dad=cyan.m,_dae=cyan.y,_daf=cyan.b,cyan=cyan.c;}}cyan/=100,_dad/=100,_dae/=100,_daf/=100;var r,g,b;r=1-Math.min(1,cyan*(1-_daf)+_daf);g=1-Math.min(1,_dad*(1-_daf)+_daf);b=1-Math.min(1,_dae*(1-_daf)+_daf);return new _da9({r:Math.round(r*255),g:Math.round(g*255),b:Math.round(b*255)});},fromHsl:function(hue,_db0,_db1){if(lang.isArray(hue)){_db0=hue[1],_db1=hue[2],hue=hue[0];}else{if(lang.isObject(hue)){_db0=hue.s,_db1=hue.l,hue=hue.h;}}_db0/=100;_db1/=100;while(hue<0){hue+=360;}while(hue>=360){hue-=360;}var r,g,b;if(hue<120){r=(120-hue)/60,g=hue/60,b=0;}else{if(hue<240){r=0,g=(240-hue)/60,b=(hue-120)/60;}else{r=(hue-240)/60,g=0,b=(360-hue)/60;}}r=2*_db0*Math.min(r,1)+(1-_db0);g=2*_db0*Math.min(g,1)+(1-_db0);b=2*_db0*Math.min(b,1)+(1-_db0);if(_db1<0.5){r*=_db1,g*=_db1,b*=_db1;}else{r=(1-_db1)*r+2*_db1-1;g=(1-_db1)*g+2*_db1-1;b=(1-_db1)*b+2*_db1-1;}return new _da9({r:Math.round(r*255),g:Math.round(g*255),b:Math.round(b*255)});}});cx.fromHsv=function(hue,_db2,_db3){if(lang.isArray(hue)){_db2=hue[1],_db3=hue[2],hue=hue[0];}else{if(lang.isObject(hue)){_db2=hue.s,_db3=hue.v,hue=hue.h;}}if(hue==360){hue=0;}_db2/=100;_db3/=100;var r,g,b;if(_db2==0){r=_db3,b=_db3,g=_db3;}else{var _db4=hue/60,i=Math.floor(_db4),f=_db4-i;var p=_db3*(1-_db2);var q=_db3*(1-(_db2*f));var t=_db3*(1-(_db2*(1-f)));switch(i){case 0:r=_db3,g=t,b=p;break;case 1:r=q,g=_db3,b=p;break;case 2:r=p,g=_db3,b=t;break;case 3:r=p,g=q,b=_db3;break;case 4:r=t,g=p,b=_db3;break;case 5:r=_db3,g=p,b=q;break;}}return new _da9({r:Math.round(r*255),g:Math.round(g*255),b:Math.round(b*255)});};lang.extend(_da9,{toCmy:function(){var cyan=1-(this.r/255),_db5=1-(this.g/255),_db6=1-(this.b/255);return {c:Math.round(cyan*100),m:Math.round(_db5*100),y:Math.round(_db6*100)};},toCmyk:function(){var cyan,_db7,_db8,_db9;var r=this.r/255,g=this.g/255,b=this.b/255;_db9=Math.min(1-r,1-g,1-b);cyan=(1-r-_db9)/(1-_db9);_db7=(1-g-_db9)/(1-_db9);_db8=(1-b-_db9)/(1-_db9);return {c:Math.round(cyan*100),m:Math.round(_db7*100),y:Math.round(_db8*100),b:Math.round(_db9*100)};},toHsl:function(){var r=this.r/255,g=this.g/255,b=this.b/255;var min=Math.min(r,b,g),max=Math.max(r,g,b);var _dba=max-min;var h=0,s=0,l=(min+max)/2;if(l>0&&l<1){s=_dba/((l<0.5)?(2*l):(2-2*l));}if(_dba>0){if(max==r&&max!=g){h+=(g-b)/_dba;}if(max==g&&max!=b){h+=(2+(b-r)/_dba);}if(max==b&&max!=r){h+=(4+(r-g)/_dba);}h*=60;}return {h:h,s:Math.round(s*100),l:Math.round(l*100)};},toHsv:function(){var r=this.r/255,g=this.g/255,b=this.b/255;var min=Math.min(r,b,g),max=Math.max(r,g,b);var _dbb=max-min;var h=null,s=(max==0)?0:(_dbb/max);if(s==0){h=0;}else{if(r==max){h=60*(g-b)/_dbb;}else{if(g==max){h=120+60*(b-r)/_dbb;}else{h=240+60*(r-g)/_dbb;}}if(h<0){h+=360;}}return {h:h,s:Math.round(s*100),v:Math.round(max*100)};}});return cx;});},"dojox/charting/plot2d/Base":function(){define("dojox/charting/plot2d/Base",["dojo/_base/declare","../Element","dojo/_base/array","./common"],function(_dbc,_dbd,arr,_dbe){return _dbc("dojox.charting.plot2d.Base",_dbd,{constructor:function(_dbf,_dc0){},clear:function(){this.series=[];this.dirty=true;return this;},setAxis:function(axis){return this;},assignAxes:function(axes){arr.forEach(this.axes,function(axis){if(this[axis]){this.setAxis(axes[this[axis]]);}},this);},addSeries:function(run){this.series.push(run);return this;},getSeriesStats:function(){return _dbe.collectSimpleStats(this.series);},calculateAxes:function(dim){this.initializeScalers(dim,this.getSeriesStats());return this;},initializeScalers:function(){return this;},isDataDirty:function(){return arr.some(this.series,function(item){return item.dirty;});},render:function(dim,_dc1){return this;},getRequiredColors:function(){return this.series.length;}});});},"dojox/lang/functional/fold":function(){define("dojox/lang/functional/fold",["dojo/_base/lang","dojo/_base/array","dojo/_base/kernel","./lambda"],function(lang,arr,_dc2,df){var _dc3={};lang.mixin(df,{foldl:function(a,f,z,o){if(typeof a=="string"){a=a.split("");}o=o||_dc2.global;f=df.lambda(f);var i,n;if(lang.isArray(a)){for(i=0,n=a.length;i<n;z=f.call(o,z,a[i],i,a),++i){}}else{if(typeof a.hasNext=="function"&&typeof a.next=="function"){for(i=0;a.hasNext();z=f.call(o,z,a.next(),i++,a)){}}else{for(i in a){if(!(i in _dc3)){z=f.call(o,z,a[i],i,a);}}}}return z;},foldl1:function(a,f,o){if(typeof a=="string"){a=a.split("");}o=o||_dc2.global;f=df.lambda(f);var z,i,n;if(lang.isArray(a)){z=a[0];for(i=1,n=a.length;i<n;z=f.call(o,z,a[i],i,a),++i){}}else{if(typeof a.hasNext=="function"&&typeof a.next=="function"){if(a.hasNext()){z=a.next();for(i=1;a.hasNext();z=f.call(o,z,a.next(),i++,a)){}}}else{var _dc4=true;for(i in a){if(!(i in _dc3)){if(_dc4){z=a[i];_dc4=false;}else{z=f.call(o,z,a[i],i,a);}}}}}return z;},foldr:function(a,f,z,o){if(typeof a=="string"){a=a.split("");}o=o||_dc2.global;f=df.lambda(f);for(var i=a.length;i>0;--i,z=f.call(o,z,a[i],i,a)){}return z;},foldr1:function(a,f,o){if(typeof a=="string"){a=a.split("");}o=o||_dc2.global;f=df.lambda(f);var n=a.length,z=a[n-1],i=n-1;for(;i>0;--i,z=f.call(o,z,a[i],i,a)){}return z;},reduce:function(a,f,z){return arguments.length<3?df.foldl1(a,f):df.foldl(a,f,z);},reduceRight:function(a,f,z){return arguments.length<3?df.foldr1(a,f):df.foldr(a,f,z);},unfold:function(pr,f,g,z,o){o=o||_dc2.global;f=df.lambda(f);g=df.lambda(g);pr=df.lambda(pr);var t=[];for(;!pr.call(o,z);t.push(f.call(o,z)),z=g.call(o,z)){}return t;}});});},"dojox/gauges/AnalogGauge":function(){define("dojox/gauges/AnalogGauge",["dojo/_base/kernel","dojo/_base/declare","dojo/_base/array","dojo/_base/lang","dojo/_base/html","dojo/_base/event","dojox/gfx","./_Gauge","./AnalogLineIndicator","dojo/dom-geometry"],function(dojo,_dc5,arr,lang,html,_dc6,gfx,_dc7,_dc8,_dc9){return _dc5("dojox.gauges.AnalogGauge",_dc7,{startAngle:-90,endAngle:90,cx:0,cy:0,radius:0,orientation:"clockwise",_defaultIndicator:_dc8,startup:function(){if(this.getChildren){arr.forEach(this.getChildren(),function(_dca){_dca.startup();});}this.startAngle=Number(this.startAngle);this.endAngle=Number(this.endAngle);this.cx=Number(this.cx);if(!this.cx){this.cx=this.width/2;}this.cy=Number(this.cy);if(!this.cy){this.cy=this.height/2;}this.radius=Number(this.radius);if(!this.radius){this.radius=Math.min(this.cx,this.cy)-25;}this.inherited(arguments);},_getAngle:function(_dcb){var v=Number(_dcb);var _dcc;if(_dcb==null||isNaN(v)||v<=this.min){_dcc=this._mod360(this.startAngle);}else{if(v>=this.max){_dcc=this._mod360(this.endAngle);}else{var _dcd=this._mod360(this.startAngle);var _dce=(v-this.min);if(this.orientation!="clockwise"){_dce=-_dce;}_dcc=this._mod360(_dcd+this._getAngleRange()*_dce/Math.abs(this.min-this.max));}}return _dcc;},_getValueForAngle:function(_dcf){var _dd0=this._mod360(this.startAngle);var _dd1=this._mod360(this.endAngle);if(!this._angleInRange(_dcf)){var min1=this._mod360(_dd0-_dcf);var min2=360-min1;var max1=this._mod360(_dd1-_dcf);var max2=360-max1;if(Math.min(min1,min2)<Math.min(max1,max2)){return this.min;}else{return this.max;}}else{var _dd2=Math.abs(this.max-this.min);var _dd3=this._mod360(this.orientation=="clockwise"?(_dcf-_dd0):(-_dcf+_dd0));return this.min+_dd2*_dd3/this._getAngleRange();}},_getAngleRange:function(){var _dd4;var _dd5=this._mod360(this.startAngle);var _dd6=this._mod360(this.endAngle);if(_dd5==_dd6){return 360;}if(this.orientation=="clockwise"){if(_dd6<_dd5){_dd4=360-(_dd5-_dd6);}else{_dd4=_dd6-_dd5;}}else{if(_dd6<_dd5){_dd4=_dd5-_dd6;}else{_dd4=360-(_dd6-_dd5);}}return _dd4;},_angleInRange:function(_dd7){var _dd8=this._mod360(this.startAngle);var _dd9=this._mod360(this.endAngle);if(_dd8==_dd9){return true;}_dd7=this._mod360(_dd7);if(this.orientation=="clockwise"){if(_dd8<_dd9){return _dd7>=_dd8&&_dd7<=_dd9;}else{return !(_dd7>_dd9&&_dd7<_dd8);}}else{if(_dd8<_dd9){return !(_dd7>_dd8&&_dd7<_dd9);}else{return _dd7>=_dd9&&_dd7<=_dd8;}}},_isScaleCircular:function(){return (this._mod360(this.startAngle)==this._mod360(this.endAngle));},_mod360:function(v){while(v>360){v=v-360;}while(v<0){v=v+360;}return v;},_getRadians:function(_dda){return _dda*Math.PI/180;},_getDegrees:function(_ddb){return _ddb*180/Math.PI;},drawRange:function(_ddc,_ddd){var path;if(_ddd.shape){_ddd.shape.parent.remove(_ddd.shape);_ddd.shape=null;}var a1,a2;if((_ddd.low==this.min)&&(_ddd.high==this.max)&&((this._mod360(this.endAngle)==this._mod360(this.startAngle)))){path=_ddc.createCircle({cx:this.cx,cy:this.cy,r:this.radius});}else{a1=this._getRadians(this._getAngle(_ddd.low));a2=this._getRadians(this._getAngle(_ddd.high));if(this.orientation=="cclockwise"){var a=a2;a2=a1;a1=a;}var x1=this.cx+this.radius*Math.sin(a1),y1=this.cy-this.radius*Math.cos(a1),x2=this.cx+this.radius*Math.sin(a2),y2=this.cy-this.radius*Math.cos(a2),big=0;var _dde;if(a1<=a2){_dde=a2-a1;}else{_dde=2*Math.PI-a1+a2;}if(_dde>Math.PI){big=1;}path=_ddc.createPath();if(_ddd.size){path.moveTo(this.cx+(this.radius-_ddd.size)*Math.sin(a1),this.cy-(this.radius-_ddd.size)*Math.cos(a1));}else{path.moveTo(this.cx,this.cy);}path.lineTo(x1,y1);path.arcTo(this.radius,this.radius,0,big,1,x2,y2);if(_ddd.size){path.lineTo(this.cx+(this.radius-_ddd.size)*Math.sin(a2),this.cy-(this.radius-_ddd.size)*Math.cos(a2));path.arcTo((this.radius-_ddd.size),(this.radius-_ddd.size),0,big,0,this.cx+(this.radius-_ddd.size)*Math.sin(a1),this.cy-(this.radius-_ddd.size)*Math.cos(a1));}path.closePath();}if(lang.isArray(_ddd.color)||lang.isString(_ddd.color)){path.setStroke({color:_ddd.color});path.setFill(_ddd.color);}else{if(_ddd.color.type){a1=this._getRadians(this._getAngle(_ddd.low));a2=this._getRadians(this._getAngle(_ddd.high));_ddd.color.x1=this.cx+(this.radius*Math.sin(a1))/2;_ddd.color.x2=this.cx+(this.radius*Math.sin(a2))/2;_ddd.color.y1=this.cy-(this.radius*Math.cos(a1))/2;_ddd.color.y2=this.cy-(this.radius*Math.cos(a2))/2;path.setFill(_ddd.color);path.setStroke({color:_ddd.color.colors[0].color});}else{if(gfx.svg){path.setStroke({color:"green"});path.setFill("green");path.getEventSource().setAttribute("class",_ddd.color.style);}}}path.connect("onmouseover",lang.hitch(this,this._handleMouseOverRange,_ddd));path.connect("onmouseout",lang.hitch(this,this._handleMouseOutRange,_ddd));_ddd.shape=path;},getRangeUnderMouse:function(e){var _ddf=null,pos=_dc9.getContentBox(this.gaugeContent),x=e.clientX-pos.x,y=e.clientY-pos.y,r=Math.sqrt((y-this.cy)*(y-this.cy)+(x-this.cx)*(x-this.cx));if(r<this.radius){var _de0=this._getDegrees(Math.atan2(y-this.cy,x-this.cx)+Math.PI/2),_de1=this._getValueForAngle(_de0);if(this._rangeData){for(var i=0;(i<this._rangeData.length)&&!_ddf;i++){if((Number(this._rangeData[i].low)<=_de1)&&(Number(this._rangeData[i].high)>=_de1)){_ddf=this._rangeData[i];}}}}return _ddf;},_dragIndicator:function(_de2,e){this._dragIndicatorAt(_de2,e.pageX,e.pageY);_dc6.stop(e);},_dragIndicatorAt:function(_de3,x,y){var pos=_dc9.position(_de3.gaugeContent,true),xf=x-pos.x,yf=y-pos.y,_de4=_de3._getDegrees(Math.atan2(yf-_de3.cy,xf-_de3.cx)+Math.PI/2);var _de5=_de3._getValueForAngle(_de4);_de5=Math.min(Math.max(_de5,_de3.min),_de3.max);_de3._drag.value=_de3._drag.currentValue=_de5;_de3._drag.onDragMove(_de3._drag);_de3._drag.draw(this._indicatorsGroup,true);_de3._drag.valueChanged();}});});},"dijit/form/_AutoCompleterMixin":function(){define("dijit/form/_AutoCompleterMixin",["dojo/data/util/filter","dojo/_base/declare","dojo/dom-attr","dojo/_base/event","dojo/keys","dojo/_base/lang","dojo/query","dojo/regexp","dojo/sniff","dojo/string","./DataList","../registry","./_TextBoxMixin","./_SearchMixin"],function(_de6,_de7,_de8,_de9,keys,lang,_dea,_deb,has,_dec,_ded,_dee,_def,_df0){return _de7("dijit.form._AutoCompleterMixin",_df0,{item:null,autoComplete:true,highlightMatch:"first",labelAttr:"",labelType:"text",maxHeight:-1,_stopClickEvents:false,_getCaretPos:function(_df1){var pos=0;if(typeof (_df1.selectionStart)=="number"){pos=_df1.selectionStart;}else{if(has("ie")){var tr=_df1.ownerDocument.selection.createRange().duplicate();var ntr=_df1.createTextRange();tr.move("character",0);ntr.move("character",0);try{ntr.setEndPoint("EndToEnd",tr);pos=String(ntr.text).replace(/\r/g,"").length;}catch(e){}}}return pos;},_setCaretPos:function(_df2,_df3){_df3=parseInt(_df3);_def.selectInputText(_df2,_df3,_df3);},_setDisabledAttr:function(_df4){this.inherited(arguments);this.domNode.setAttribute("aria-disabled",_df4?"true":"false");},_onKey:function(evt){if(evt.charCode>=32){return;}var key=evt.charCode||evt.keyCode;if(key==keys.ALT||key==keys.CTRL||key==keys.META||key==keys.SHIFT){return;}var pw=this.dropDown;var _df5=null;this._abortQuery();this.inherited(arguments);if(evt.altKey||evt.ctrlKey||evt.metaKey){return;}if(this._opened){_df5=pw.getHighlightedOption();}switch(key){case keys.PAGE_DOWN:case keys.DOWN_ARROW:case keys.PAGE_UP:case keys.UP_ARROW:if(this._opened){this._announceOption(_df5);}_de9.stop(evt);break;case keys.ENTER:if(_df5){if(_df5==pw.nextButton){this._nextSearch(1);_de9.stop(evt);break;}else{if(_df5==pw.previousButton){this._nextSearch(-1);_de9.stop(evt);break;}}_de9.stop(evt);}else{this._setBlurValue();this._setCaretPos(this.focusNode,this.focusNode.value.length);}case keys.TAB:var _df6=this.get("displayedValue");if(pw&&(_df6==pw._messages["previousMessage"]||_df6==pw._messages["nextMessage"])){break;}if(_df5){this._selectOption(_df5);}case keys.ESCAPE:if(this._opened){this._lastQuery=null;this.closeDropDown();}break;}},_autoCompleteText:function(text){var fn=this.focusNode;_def.selectInputText(fn,fn.value.length);var _df7=this.ignoreCase?"toLowerCase":"substr";if(text[_df7](0).indexOf(this.focusNode.value[_df7](0))==0){var cpos=this.autoComplete?this._getCaretPos(fn):fn.value.length;if((cpos+1)>fn.value.length){fn.value=text;_def.selectInputText(fn,cpos);}}else{fn.value=text;_def.selectInputText(fn);}},_openResultList:function(_df8,_df9,_dfa){var _dfb=this.dropDown.getHighlightedOption();this.dropDown.clearResultList();if(!_df8.length&&_dfa.start==0){this.closeDropDown();return;}this._nextSearch=this.dropDown.onPage=lang.hitch(this,function(_dfc){_df8.nextPage(_dfc!==-1);this.focus();});this.dropDown.createOptions(_df8,_dfa,lang.hitch(this,"_getMenuLabelFromItem"));this._showResultList();if("direction" in _dfa){if(_dfa.direction){this.dropDown.highlightFirstOption();}else{if(!_dfa.direction){this.dropDown.highlightLastOption();}}if(_dfb){this._announceOption(this.dropDown.getHighlightedOption());}}else{if(this.autoComplete&&!this._prev_key_backspace&&!/^[*]+$/.test(_df9[this.searchAttr].toString())){this._announceOption(this.dropDown.containerNode.firstChild.nextSibling);}}},_showResultList:function(){this.closeDropDown(true);this.openDropDown();this.domNode.setAttribute("aria-expanded","true");},loadDropDown:function(){this._startSearchAll();},isLoaded:function(){return false;},closeDropDown:function(){this._abortQuery();if(this._opened){this.inherited(arguments);this.domNode.setAttribute("aria-expanded","false");this.focusNode.removeAttribute("aria-activedescendant");}},_setBlurValue:function(){var _dfd=this.get("displayedValue");var pw=this.dropDown;if(pw&&(_dfd==pw._messages["previousMessage"]||_dfd==pw._messages["nextMessage"])){this._setValueAttr(this._lastValueReported,true);}else{if(typeof this.item=="undefined"){this.item=null;this.set("displayedValue",_dfd);}else{if(this.value!=this._lastValueReported){this._handleOnChange(this.value,true);}this._refreshState();}}},_setItemAttr:function(item,_dfe,_dff){var _e00="";if(item){if(!_dff){_dff=this.store._oldAPI?this.store.getValue(item,this.searchAttr):item[this.searchAttr];}_e00=this._getValueField()!=this.searchAttr?this.store.getIdentity(item):_dff;}this.set("value",_e00,_dfe,_dff,item);},_announceOption:function(node){if(!node){return;}var _e01;if(node==this.dropDown.nextButton||node==this.dropDown.previousButton){_e01=node.innerHTML;this.item=undefined;this.value="";}else{var item=this.dropDown.items[node.getAttribute("item")];_e01=(this.store._oldAPI?this.store.getValue(item,this.searchAttr):item[this.searchAttr]).toString();this.set("item",item,false,_e01);}this.focusNode.value=this.focusNode.value.substring(0,this._lastInput.length);this.focusNode.setAttribute("aria-activedescendant",_de8.get(node,"id"));this._autoCompleteText(_e01);},_selectOption:function(_e02){this.closeDropDown();if(_e02){this._announceOption(_e02);}this._setCaretPos(this.focusNode,this.focusNode.value.length);this._handleOnChange(this.value,true);},_startSearchAll:function(){this._startSearch("");},_startSearchFromInput:function(){this.item=undefined;this.inherited(arguments);},_startSearch:function(key){if(!this.dropDown){var _e03=this.id+"_popup",_e04=lang.isString(this.dropDownClass)?lang.getObject(this.dropDownClass,false):this.dropDownClass;this.dropDown=new _e04({onChange:lang.hitch(this,this._selectOption),id:_e03,dir:this.dir,textDir:this.textDir});this.focusNode.removeAttribute("aria-activedescendant");this.textbox.setAttribute("aria-owns",_e03);}this._lastInput=key;this.inherited(arguments);},_getValueField:function(){return this.searchAttr;},postMixInProperties:function(){this.inherited(arguments);if(!this.store){var _e05=this.srcNodeRef;this.store=new _ded({},_e05);if(!("value" in this.params)){var item=(this.item=this.store.fetchSelectedItem());if(item){var _e06=this._getValueField();this.value=this.store._oldAPI?this.store.getValue(item,_e06):item[_e06];}}}},postCreate:function(){var _e07=_dea("label[for=\""+this.id+"\"]");if(_e07.length){if(!_e07[0].id){_e07[0].id=this.id+"_label";}this.domNode.setAttribute("aria-labelledby",_e07[0].id);}this.inherited(arguments);this.connect(this,"onSearch","_openResultList");},_getMenuLabelFromItem:function(item){var _e08=this.labelFunc(item,this.store),_e09=this.labelType;if(this.highlightMatch!="none"&&this.labelType=="text"&&this._lastInput){_e08=this.doHighlight(_e08,this._lastInput);_e09="html";}return {html:_e09=="html",label:_e08};},doHighlight:function(_e0a,find){var _e0b=(this.ignoreCase?"i":"")+(this.highlightMatch=="all"?"g":""),i=this.queryExpr.indexOf("${0}");find=_deb.escapeString(find);return this._escapeHtml(_e0a.replace(new RegExp((i==0?"^":"")+"("+find+")"+(i==(this.queryExpr.length-4)?"$":""),_e0b),"￿$1￿")).replace(/\uFFFF([^\uFFFF]+)\uFFFF/g,"<span class=\"dijitComboBoxHighlightMatch\">$1</span>");},_escapeHtml:function(str){str=String(str).replace(/&/gm,"&amp;").replace(/</gm,"&lt;").replace(/>/gm,"&gt;").replace(/"/gm,"&quot;");return str;},reset:function(){this.item=null;this.inherited(arguments);},labelFunc:function(item,_e0c){return (_e0c._oldAPI?_e0c.getValue(item,this.labelAttr||this.searchAttr):item[this.labelAttr||this.searchAttr]).toString();},_setValueAttr:function(_e0d,_e0e,_e0f,item){this._set("item",item||null);if(_e0d==null){_e0d="";}this.inherited(arguments);},_setTextDirAttr:function(_e10){this.inherited(arguments);if(this.dropDown){this.dropDown._set("textDir",_e10);}}});});},"dojo/dnd/Container":function(){define(["../_base/array","../_base/declare","../_base/event","../_base/kernel","../_base/lang","../_base/window","../dom","../dom-class","../dom-construct","../Evented","../has","../on","../query","../ready","../touch","./common"],function(_e11,_e12,_e13,_e14,lang,win,dom,_e15,_e16,_e17,has,on,_e18,_e19,_e1a,dnd){var _e1b=_e12("dojo.dnd.Container",_e17,{skipForm:false,allowNested:false,constructor:function(node,_e1c){this.node=dom.byId(node);if(!_e1c){_e1c={};}this.creator=_e1c.creator||null;this.skipForm=_e1c.skipForm;this.parent=_e1c.dropParent&&dom.byId(_e1c.dropParent);this.map={};this.current=null;this.containerState="";_e15.add(this.node,"dojoDndContainer");if(!(_e1c&&_e1c._skipStartup)){this.startup();}this.events=[on(this.node,_e1a.over,lang.hitch(this,"onMouseOver")),on(this.node,_e1a.out,lang.hitch(this,"onMouseOut")),on(this.node,"dragstart",lang.hitch(this,"onSelectStart")),on(this.node,"selectstart",lang.hitch(this,"onSelectStart"))];},creator:function(){},getItem:function(key){return this.map[key];},setItem:function(key,data){this.map[key]=data;},delItem:function(key){delete this.map[key];},forInItems:function(f,o){o=o||_e14.global;var m=this.map,e=dnd._empty;for(var i in m){if(i in e){continue;}f.call(o,m[i],i,this);}return o;},clearItems:function(){this.map={};},getAllNodes:function(){return _e18((this.allowNested?"":"> ")+".dojoDndItem",this.parent);},sync:function(){var map={};this.getAllNodes().forEach(function(node){if(node.id){var item=this.getItem(node.id);if(item){map[node.id]=item;return;}}else{node.id=dnd.getUniqueId();}var type=node.getAttribute("dndType"),data=node.getAttribute("dndData");map[node.id]={data:data||node.innerHTML,type:type?type.split(/\s*,\s*/):["text"]};},this);this.map=map;return this;},insertNodes:function(data,_e1d,_e1e){if(!this.parent.firstChild){_e1e=null;}else{if(_e1d){if(!_e1e){_e1e=this.parent.firstChild;}}else{if(_e1e){_e1e=_e1e.nextSibling;}}}var i,t;if(_e1e){for(i=0;i<data.length;++i){t=this._normalizedCreator(data[i]);this.setItem(t.node.id,{data:t.data,type:t.type});_e1e.parentNode.insertBefore(t.node,_e1e);}}else{for(i=0;i<data.length;++i){t=this._normalizedCreator(data[i]);this.setItem(t.node.id,{data:t.data,type:t.type});this.parent.appendChild(t.node);}}return this;},destroy:function(){_e11.forEach(this.events,function(_e1f){_e1f.remove();});this.clearItems();this.node=this.parent=this.current=null;},markupFactory:function(_e20,node,Ctor){_e20._skipStartup=true;return new Ctor(node,_e20);},startup:function(){if(!this.parent){this.parent=this.node;if(this.parent.tagName.toLowerCase()=="table"){var c=this.parent.getElementsByTagName("tbody");if(c&&c.length){this.parent=c[0];}}}this.defaultCreator=dnd._defaultCreator(this.parent);this.sync();},onMouseOver:function(e){var n=e.relatedTarget;while(n){if(n==this.node){break;}try{n=n.parentNode;}catch(x){n=null;}}if(!n){this._changeState("Container","Over");this.onOverEvent();}n=this._getChildByEvent(e);if(this.current==n){return;}if(this.current){this._removeItemClass(this.current,"Over");}if(n){this._addItemClass(n,"Over");}this.current=n;},onMouseOut:function(e){for(var n=e.relatedTarget;n;){if(n==this.node){return;}try{n=n.parentNode;}catch(x){n=null;}}if(this.current){this._removeItemClass(this.current,"Over");this.current=null;}this._changeState("Container","");this.onOutEvent();},onSelectStart:function(e){if(!this.skipForm||!dnd.isFormElement(e)){_e13.stop(e);}},onOverEvent:function(){},onOutEvent:function(){},_changeState:function(type,_e21){var _e22="dojoDnd"+type;var _e23=type.toLowerCase()+"State";_e15.replace(this.node,_e22+_e21,_e22+this[_e23]);this[_e23]=_e21;},_addItemClass:function(node,type){_e15.add(node,"dojoDndItem"+type);},_removeItemClass:function(node,type){_e15.remove(node,"dojoDndItem"+type);},_getChildByEvent:function(e){var node=e.target;if(node){for(var _e24=node.parentNode;_e24;node=_e24,_e24=node.parentNode){if((_e24==this.parent||this.allowNested)&&_e15.contains(node,"dojoDndItem")){return node;}}}return null;},_normalizedCreator:function(item,hint){var t=(this.creator||this.defaultCreator).call(this,item,hint);if(!lang.isArray(t.type)){t.type=["text"];}if(!t.node.id){t.node.id=dnd.getUniqueId();}_e15.add(t.node,"dojoDndItem");return t;}});dnd._createNode=function(tag){if(!tag){return dnd._createSpan;}return function(text){return _e16.create(tag,{innerHTML:text});};};dnd._createTrTd=function(text){var tr=_e16.create("tr");_e16.create("td",{innerHTML:text},tr);return tr;};dnd._createSpan=function(text){return _e16.create("span",{innerHTML:text});};dnd._defaultCreatorNodes={ul:"li",ol:"li",div:"div",p:"div"};dnd._defaultCreator=function(node){var tag=node.tagName.toLowerCase();var c=tag=="tbody"||tag=="thead"?dnd._createTrTd:dnd._createNode(dnd._defaultCreatorNodes[tag]);return function(item,hint){var _e25=item&&lang.isObject(item),data,type,n;if(_e25&&item.tagName&&item.nodeType&&item.getAttribute){data=item.getAttribute("dndData")||item.innerHTML;type=item.getAttribute("dndType");type=type?type.split(/\s*,\s*/):["text"];n=item;}else{data=(_e25&&item.data)?item.data:item;type=(_e25&&item.type)?item.type:["text"];n=(hint=="avatar"?dnd._createSpan:c)(String(data));}if(!n.id){n.id=dnd.getUniqueId();}return {node:n,data:data,type:type};};};return _e1b;});},"esri/layers/FeatureLayer":function(){define("esri/layers/FeatureLayer",["dijit","dojo","dojox","dojo/require!esri/layers/graphics,esri/tasks/query,dojo/io/iframe,esri/layers/agscommon,dojo/date/locale"],function(_e26,dojo,_e27){dojo.provide("esri.layers.FeatureLayer");dojo.require("esri.layers.graphics");dojo.require("esri.tasks.query");dojo.require("dojo.io.iframe");dojo.require("esri.layers.agscommon");dojo.require("dojo.date.locale");dojo.declare("esri.layers.FeatureLayer",esri.layers.GraphicsLayer,{constructor:function(url,_e28){this._outFields=_e28&&_e28.outFields;this._loadCallback=_e28&&_e28.loadCallback;var _e29=_e28&&_e28._usePatch;this._usePatch=(_e29===null||_e29===undefined)?true:_e29;this._trackIdField=_e28&&_e28.trackIdField;this.objectIdField=_e28&&_e28.objectIdField;this._maxOffset=_e28&&_e28.maxAllowableOffset;this._optEditable=_e28&&_e28.editable;this._optAutoGen=_e28&&_e28.autoGeneralize;this.editSummaryCallback=_e28&&_e28.editSummaryCallback;this.userId=_e28&&_e28.userId;this.userIsAdmin=_e28&&_e28.userIsAdmin;this.useMapTime=(_e28&&_e28.hasOwnProperty("useMapTime"))?(!!_e28.useMapTime):true;this.source=_e28&&_e28.source;this.gdbVersion=_e28&&_e28.gdbVersion;this._selectedFeatures={};this._selectedFeaturesArr=[];this._newFeatures=[];this._deletedFeatures={};this._ulid=this._getUniqueId();var ctor=this.constructor,mode=this.mode=(esri._isDefined(_e28&&_e28.mode)?_e28.mode:ctor.MODE_ONDEMAND);switch(mode){case ctor.MODE_SNAPSHOT:this._mode=new esri.layers._SnapshotMode(this);this._isSnapshot=true;break;case ctor.MODE_ONDEMAND:this._tileWidth=(_e28&&_e28.tileWidth)||512;this._tileHeight=(_e28&&_e28.tileHeight)||512;this._mode=new esri.layers._OnDemandMode(this);var _e2a=_e28&&_e28.latticeTiling;this.latticeTiling=_e2a;break;case ctor.MODE_SELECTION:this._mode=new esri.layers._SelectionMode(this);this._isSelOnly=true;break;}this._initLayer=dojo.hitch(this,this._initLayer);this._selectHandler=dojo.hitch(this,this._selectHandler);this._editable=false;if(dojo.isObject(url)&&url.layerDefinition){var json=url;this._collection=true;this.mode=ctor.MODE_SNAPSHOT;this._initLayer(json);return this;}this._task=new esri.tasks.QueryTask(this.url,{source:this.source,gdbVersion:this.gdbVersion});var _e2b=this._url.path;this._fserver=false;if(_e2b.search(/\/FeatureServer\//i)!==-1){this._fserver=true;}var _e2c=_e28&&_e28.resourceInfo;if(_e2c){this._initLayer(_e2c);}else{if(this.source){var _e2d={source:this.source.toJson()};this._url.query=dojo.mixin(this._url.query,{layer:dojo.toJson(_e2d)});}if(this.gdbVersion){this._url.query=dojo.mixin(this._url.query,{gdbVersion:this.gdbVersion});}esri.request({url:_e2b,content:dojo.mixin({f:"json"},this._url.query),callbackParamName:"callback",load:this._initLayer,error:this._errorHandler});}},_initLayer:function(_e2e,io){if(_e2e||io){this._json=_e2e;this._findCredential();var ssl=(this.credential&&this.credential.ssl)||(_e2e&&_e2e._ssl);if(ssl){this._useSSL();this._task._useSSL();}if(this._collection){this._mode=new esri.layers._SnapshotMode(this);this._isSnapshot=true;this._featureSet=_e2e.featureSet;this._nextId=_e2e.nextObjectId;_e2e=_e2e.layerDefinition;}if(_e2e.hasOwnProperty("capabilities")){var _e2f=(this.capabilities=_e2e.capabilities);if(_e2f&&_e2f.toLowerCase().indexOf("editing")!==-1){this._editable=true;}else{this._editable=false;}}else{if(!this._collection){this._editable=this._fserver;}}if(esri._isDefined(this._optEditable)){this._editable=this._optEditable;delete this._optEditable;}this._json=dojo.toJson(this._json);if(this.isEditable()){delete this._maxOffset;}else{if(this.mode!==this.constructor.MODE_SNAPSHOT&&((_e2e.geometryType==="esriGeometryPolyline")||(_e2e.geometryType==="esriGeometryPolygon"))){this._autoGeneralize=esri._isDefined(this._optAutoGen)?this._optAutoGen:(this.mode===this.constructor.MODE_ONDEMAND);delete this._optAutoGen;}}var _e30=_e2e.effectiveMinScale||_e2e.minScale,_e31=_e2e.effectiveMaxScale||_e2e.maxScale;if(!this._hasMin&&_e30){this.setMinScale(_e30);}if(!this._hasMax&&_e31){this.setMaxScale(_e31);}this.layerId=_e2e.id;this.name=_e2e.name;this.description=_e2e.description;this.copyright=_e2e.copyrightText;this.type=_e2e.type;this.geometryType=_e2e.geometryType;this.displayField=_e2e.displayField;this.defaultDefinitionExpression=_e2e.definitionExpression;this.fullExtent=new esri.geometry.Extent(_e2e.extent);this.initialExtent=new esri.geometry.Extent(this.fullExtent.toJson());if(this.fullExtent.spatialReference){this.spatialReference=new esri.SpatialReference(this.fullExtent.spatialReference.toJson());}this.defaultVisibility=_e2e.defaultVisibility;if((this.geometryType==="esriGeometryPoint")||(this.geometryType==="esriGeometryMultipoint")){this.latticeTiling=false;}this.indexedFields=_e2e.indexedFields;this.maxRecordCount=_e2e.maxRecordCount;this.canModifyLayer=_e2e.canModifyLayer;this.supportsStatistics=_e2e.supportsStatistics;this.supportsAdvancedQueries=_e2e.supportsAdvancedQueries;this.hasLabels=_e2e.hasLabels;this.canScaleSymbols=_e2e.canScaleSymbols;this.supportsRollbackOnFailure=_e2e.supportsRollbackOnFailure;this.syncCanReturnChanges=_e2e.syncCanReturnChanges;this.isDataVersioned=_e2e.isDataVersioned;this.editFieldsInfo=_e2e.editFieldsInfo;this.ownershipBasedAccessControlForFeatures=_e2e.ownershipBasedAccessControlForFeatures;if(this.editFieldsInfo&&this.ownershipBasedAccessControlForFeatures){this.creatorField=this.editFieldsInfo.creatorField;}this.relationships=_e2e.relationships;this.allowGeometryUpdates=esri._isDefined(_e2e.allowGeometryUpdates)?_e2e.allowGeometryUpdates:true;this._isTable=(this.type==="Table");var _e32=(this.fields=[]),_e33=_e2e.fields,i;for(i=0;i<_e33.length;i++){_e32.push(new esri.layers.Field(_e33[i]));}if(!this.objectIdField){this.objectIdField=_e2e.objectIdField;if(!this.objectIdField){_e33=_e2e.fields;for(i=0;i<_e33.length;i++){var _e34=_e33[i];if(_e34.type==="esriFieldTypeOID"){this.objectIdField=_e34.name;break;}}}if(!this.objectIdField){console.debug("esri.layers.FeatureLayer: "+esri.substitute({url:this.url},esri.bundle.layers.FeatureLayer.noOIDField));}}if(!esri._isDefined(this._nextId)){var _e35=this.objectIdField,_e36=-1;if(this._collection&&_e35){var fset=this._featureSet,_e37=fset&&fset.features,il=_e37?_e37.length:0,oid,attr;for(i=0;i<il;i++){attr=_e37[i].attributes;oid=attr&&attr[_e35];if(oid>_e36){_e36=oid;}}}this._nextId=(_e36+1);}this.globalIdField=_e2e.globalIdField;var _e38=(this.typeIdField=_e2e.typeIdField),_e39;if(_e38){_e39=!this._getField(_e38)&&this._getField(_e38,true);if(_e39){this.typeIdField=_e39.name;}}this.visibilityField=_e2e.visibilityField;var _e3a=_e2e.defaultSymbol;if(_e3a){this.defaultSymbol=esri.symbol.fromJson(_e3a);}var _e3b=this.types=[],_e3c=_e2e.types,_e3d,_e3e,_e3f,_e40=this.editFieldsInfo,_e41=_e40&&_e40.creatorField,_e42=_e40&&_e40.editorField,fix=(_e41||_e42),_e43=[];if(_e3c){for(i=0;i<_e3c.length;i++){_e3d=new esri.layers.FeatureType(_e3c[i]);_e3e=_e3d.templates;if(fix&&_e3e&&_e3e.length){_e43=_e43.concat(_e3e);}_e3b.push(_e3d);}}var _e44=_e2e.templates,_e45,_e46=this.templates=[];if(_e44){for(i=0;i<_e44.length;i++){_e45=new esri.layers.FeatureTemplate(_e44[i]);if(fix){_e43.push(_e45);}_e46.push(_e45);}}for(i=0;i<_e43.length;i++){_e3f=dojo.getObject("prototype.attributes",false,_e43[i]);if(_e3f){if(_e41){delete _e3f[_e41];}if(_e42){delete _e3f[_e42];}}}var _e47=_e2e.timeInfo;if(_e47){this.timeInfo=new esri.layers.TimeInfo(_e47);this._startTimeField=_e47.startTimeField;this._endTimeField=_e47.endTimeField;if(this._startTimeField&&this._endTimeField){this._twoTimeFields=true;}if(this._trackIdField){_e47.trackIdField=this._trackIdField;}else{this._trackIdField=_e47.trackIdField;}}this.hasAttachments=(!this._collection&&_e2e.hasAttachments)?true:false;this.htmlPopupType=_e2e.htmlPopupType;var _e48=_e2e.drawingInfo,_e49;if(!this.renderer){if(_e48&&_e48.renderer){_e49=_e48.renderer;this.setRenderer(esri.renderer.fromJson(_e49));if(_e49.type==="classBreaks"){this.renderer.setMaxInclusive(true);}if(!this._collection){var _e4a=_e49.type,_e4b=[];_e49=this.renderer;switch(_e4a){case "simple":_e4b.push(_e49.symbol);break;case "uniqueValue":case "classBreaks":_e4b.push(_e49.defaultSymbol);_e4b=_e4b.concat(dojo.map(_e49.infos,function(info){return info.symbol;}));break;}_e4b=dojo.filter(_e4b,esri._isDefined);var _e4c=this._url.path+"/images/",_e4d=this._getToken();dojo.forEach(_e4b,function(sym){var url=sym.url;if(url){if((url.search(/https?\:/)===-1)&&(url.indexOf("data:")===-1)){sym.url=_e4c+url;}if(_e4d&&sym.url.search(/https?\:/)!==-1){sym.url+=("?token="+_e4d);}}});}}else{if(_e3a){_e3c=this.types;if(_e3c.length>0){_e49=new esri.renderer.UniqueValueRenderer(this.defaultSymbol,this.typeIdField);dojo.forEach(_e3c,function(type){_e49.addValue(type.id,type.symbol);});}else{_e49=new esri.renderer.SimpleRenderer(this.defaultSymbol);}this.setRenderer(_e49);}else{if(!this._isTable){var _e4e;switch(this.geometryType){case "esriGeometryPoint":case "esriGeometryMultipoint":_e4e=new esri.symbol.SimpleMarkerSymbol();break;case "esriGeometryPolyline":_e4e=new esri.symbol.SimpleLineSymbol();break;case "esriGeometryPolygon":_e4e=new esri.symbol.SimpleFillSymbol();break;}this.setRenderer(_e4e?new esri.renderer.SimpleRenderer(_e4e):null);}}}}var _e4f=(_e48&&_e48.transparency)||0;if(!esri._isDefined(this.opacity)&&_e4f>0){this.opacity=1-(_e4f/100);}this.version=_e2e.currentVersion;if(!this.version){var ver;if("capabilities" in _e2e||"drawingInfo" in _e2e||"hasAttachments" in _e2e||"htmlPopupType" in _e2e||"relationships" in _e2e||"timeInfo" in _e2e||"typeIdField" in _e2e||"types" in _e2e){ver=10;}else{ver=9.3;}this.version=ver;}if((dojo.isIE||dojo.isSafari)&&this.isEditable()&&this.version<10.02){this._ts=true;}this.loaded=true;this._fixRendererFields();this._checkFields();this._updateCaps();var _e50=function(){this.onLoad(this);var _e51=this._loadCallback;if(_e51){delete this._loadCallback;_e51(this);}};if(this._collection){this._fireUpdateStart();var _e52=this._featureSet;delete this._featureSet;this._mode._drawFeatures(new esri.tasks.FeatureSet(_e52));this._fcAdded=true;_e50.call(this);}else{this._forceIdentity(_e50);}}},setRenderer:function(ren){this.inherited("setRenderer",arguments);var _e53=this.renderer;if(_e53){this._ager=(_e53.declaredClass.indexOf("TemporalRenderer")!==-1&&_e53.observationAger&&_e53.observationRenderer);var _e54=dojo.filter([_e53,_e53.observationRenderer,_e53.latestObservationRenderer,_e53.trackRenderer],esri._isDefined);var _e55=[];dojo.forEach(_e54,function(rnd){if(!dojo.isFunction(rnd.attributeField)){_e55.push(rnd.attributeField);}_e55.push(rnd.attributeField2);_e55.push(rnd.attributeField3);},this);this._rendererFields=dojo.filter(_e55,esri._isDefined);}else{this._ager=false;this._rendererFields=[];}if(this.loaded&&this._rendererFields.length>0){this._fixRendererFields();this._checkFields(this._rendererFields);}if(this.loaded&&this._collection){this._typesDirty=true;}},_unsetMap:function(map,_e56){var mode=this._mode;if(mode){mode.suspend();}if(this._trackManager){this._trackManager.destroy();this._trackManager=null;}dojo.disconnect(this._zoomConnect);this._zoomConnect=null;this._toggleTime(false);this.inherited("_unsetMap",arguments);},refresh:function(){var mode=this._mode;if(mode){mode.refresh();}},setEditable:function(_e57){if(!this._collection){console.log("FeatureLayer:setEditable - this functionality is not yet supported for layer in a feature service");return this;}if(!this.loaded){this._optEditable=_e57;return this;}var _e58=this._editable;this._editable=_e57;this._updateCaps();if(_e58!==_e57){this.onCapabilitiesChange();}return this;},getEditCapabilities:function(_e59){var _e5a={"canCreate":false,"canUpdate":false,"canDelete":false};if(!this.loaded||!this.isEditable()){return _e5a;}var _e5b=_e59&&_e59.feature,_e5c=_e59&&_e59.userId,caps=dojo.map((this.capabilities?this.capabilities.toLowerCase().split(","):[]),dojo.trim),_e5d=dojo.indexOf(caps,"editing")>-1,_e5e=_e5d&&(dojo.indexOf(caps,"create")>-1),_e5f=_e5d&&(dojo.indexOf(caps,"update")>-1),_e60=_e5d&&(dojo.indexOf(caps,"delete")>-1),_e61=this.ownershipBasedAccessControlForFeatures,_e62=this.editFieldsInfo,_e63=_e62&&_e62.creatorField,_e64=_e62&&_e62.realm,_e65=_e5b&&_e5b.attributes,_e66=(_e65&&_e63)?_e65[_e63]:undefined,_e67,_e68=!!this.userIsAdmin,_e69=!_e61||_e68||!!(_e61.allowOthersToUpdate||_e61.allowUpdateToOthers),_e6a=!_e61||_e68||!!(_e61.allowOthersToDelete||_e61.allowDeleteToOthers);if(_e68||(_e5d&&!(_e5e||_e5f||_e60))){_e5e=_e5f=_e60=true;}_e67={"canCreate":_e5e,"canUpdate":_e5f,"canDelete":_e60};if(_e66===null){_e67.canUpdate=_e5f&&_e69;_e67.canDelete=_e60&&_e6a;}else{if(_e66===""){return _e67;}else{if(_e66){_e5c=_e5c||this.getUserId();if(_e5c&&_e64){_e5c=_e5c+"@"+_e64;}if(_e5c.toLowerCase()===_e66.toLowerCase()){return _e67;}else{_e67.canUpdate=_e5f&&_e69;_e67.canDelete=_e60&&_e6a;}}}}return _e67;},getUserId:function(){var _e6b;if(this.loaded){_e6b=(this.credential&&this.credential.userId)||this.userId||"";}return _e6b;},setUserIsAdmin:function(_e6c){this.userIsAdmin=_e6c;},setEditSummaryCallback:function(_e6d){this.editSummaryCallback=_e6d;},getEditSummary:function(_e6e,_e6f,_e70){_e70=esri._isDefined(_e70)?_e70:(new Date()).getTime();var _e71="",info=this.getEditInfo(_e6e,_e6f,_e70),_e72=(_e6f&&_e6f.callback)||this.editSummaryCallback;if(_e72){info=_e72(_e6e,info)||"";}if(dojo.isString(info)){_e71=info;}else{if(info){var _e73=info.action,_e74=info.userId,_e75=info.timeValue,_e76=0;if(_e73){_e76++;}if(_e74){_e76++;}if(esri._isDefined(_e75)){_e76++;}if(_e76>1){_e71=(_e73==="edit"?"edit":"create")+(_e74?"User":"")+(esri._isDefined(_e75)?info.displayPattern:"");}}_e71=_e71&&esri.substitute(info,esri.bundle.layers.FeatureLayer[_e71]);}return _e71;},getEditInfo:function(_e77,_e78,_e79){if(!this.loaded){return;}_e79=esri._isDefined(_e79)?_e79:(new Date()).getTime();var _e7a=(_e78&&_e78.action)||"last",_e7b=this.editFieldsInfo,_e7c=_e7b&&_e7b.creatorField,_e7d=_e7b&&_e7b.creationDateField,_e7e=_e7b&&_e7b.editorField,_e7f=_e7b&&_e7b.editDateField,_e80=_e7b&&_e7b.realm,_e81=_e77&&_e77.attributes,_e82=(_e81&&_e7c)?_e81[_e7c]:undefined,_e83=(_e81&&_e7d)?_e81[_e7d]:null,_e84=(_e81&&_e7e)?_e81[_e7e]:undefined,_e85=(_e81&&_e7f)?_e81[_e7f]:null,_e86=this._getEditData(_e82,_e83,_e79),_e87=this._getEditData(_e84,_e85,_e79),_e88;switch(_e7a){case "creation":_e88=_e86;break;case "edit":_e88=_e87;break;case "last":_e88=_e87||_e86;break;}if(_e88){_e88.action=(_e88===_e87)?"edit":"creation";}return _e88;},_getEditData:function(_e89,_e8a,_e8b){var data,_e8c,_e8d,_e8e=60000,_e8f=3600000,_e90=2*_e8f,_e91=24*_e8f,_e92=7*_e91;if(esri._isDefined(_e8a)){_e8c=_e8b-_e8a;if(_e8c<0){_e8d="Full";}else{if(_e8c<_e8e){_e8d="Seconds";}else{if(_e8c<(2*_e8e)){_e8d="Minute";}else{if(_e8c<_e8f){_e8d="Minutes";}else{if(_e8c<_e90){_e8d="Hour";}else{if(_e8c<_e91){_e8d="Hours";}else{if(_e8c<_e92){_e8d="WeekDay";}else{_e8d="Full";}}}}}}}}if((_e89!==undefined)||_e8d){data=data||{};data.userId=_e89;if(_e8d){var _e93=dojo.date.locale.format,_e94=new Date(_e8a);data.minutes=Math.floor(_e8c/_e8e);data.hours=Math.floor(_e8c/_e8f);data.weekDay=_e93(_e94,{datePattern:"EEEE",selector:"date"});data.formattedDate=_e93(_e94,{selector:"date"});data.formattedTime=_e93(_e94,{selector:"time"});data.displayPattern=_e8d;data.timeValue=_e8a;}}return data;},isEditable:function(){return !!(this._editable||this.userIsAdmin);},setMaxAllowableOffset:function(_e95){if(!this.isEditable()){this._maxOffset=_e95;}return this;},getMaxAllowableOffset:function(){return this._maxOffset;},setAutoGeneralize:function(_e96){if(!this.loaded){this._optAutoGen=_e96;}else{if(!this.isEditable()&&(this.mode!==this.constructor.MODE_SNAPSHOT)&&((this.geometryType==="esriGeometryPolyline")||(this.geometryType==="esriGeometryPolygon"))){this._autoGeneralize=_e96;if(_e96){var map=this._map;if(map&&map.loaded){this._maxOffset=Math.floor(map.extent.getWidth()/map.width);}}else{delete this._maxOffset;}}}return this;},setGDBVersion:function(_e97){if(!this._collection&&(_e97!==this.gdbVersion)&&(_e97||this.gdbVersion)){this.gdbVersion=_e97;this._task.gdbVersion=_e97;this._url.query=dojo.mixin(this._url.query,{gdbVersion:_e97});if(this.loaded){this.clearSelection();if(this._map){this.refresh();}}this.onGDBVersionChange();}return this;},setDefinitionExpression:function(expr){this._defnExpr=expr;var mode=this._mode;if(mode){mode.propertyChangeHandler(1);}return this;},getDefinitionExpression:function(){return this._defnExpr;},setTimeDefinition:function(_e98){if(this._isSnapshot){this._timeDefn=_e98;var mode=this._mode;if(mode){mode.propertyChangeHandler(2);}}else{console.log("FeatureLayer.setTimeDefinition: layer in on-demand or selection mode does not support time definitions. Layer id = "+this.id+", Layer URL = "+this.url);}return this;},getTimeDefinition:function(){return this._timeDefn;},setTimeOffset:function(_e99,_e9a){this._timeOffset=_e99;this._timeOffsetUnits=_e9a;var mode=this._mode;if(mode){mode.propertyChangeHandler(0);}return this;},setUseMapTime:function(use){this.useMapTime=use;this._toggleTime(!this.suspended);var mode=this._mode;if(mode){mode.propertyChangeHandler(0);}},selectFeatures:function(_e9b,_e9c,_e9d,_e9e){_e9c=_e9c||this.constructor.SELECTION_NEW;var _e9f=this._getShallowClone(_e9b),map=this._map,_ea0,dfd=esri._fixDfd(new dojo.Deferred(esri._dfdCanceller));_e9f.outFields=this._getOutFields();_e9f.returnGeometry=true;if(map){_e9f.outSpatialReference=new esri.SpatialReference(map.spatialReference.toJson());}if(!this._applyQueryFilters(_e9f)){_ea0={features:[]};this._selectHandler(_ea0,_e9c,_e9d,_e9e,dfd);return dfd;}var _ea1=this._canDoClientSideQuery(_e9f);if(_ea1){_ea0={features:this._doQuery(_e9f,_ea1)};this._selectHandler(_ea0,_e9c,_e9d,_e9e,dfd);return dfd;}else{if(this._collection){var err=new Error("FeatureLayer::selectFeatures - "+esri.bundle.layers.FeatureLayer.invalidParams);this._resolve([err],null,_e9e,dfd,true);return dfd;}var self=this;if(this._ts){_e9f._ts=(new Date()).getTime();}var temp=dfd._pendingDfd=this._task.execute(_e9f);temp.addCallbacks(function(_ea2){self._selectHandler(_ea2,_e9c,_e9d,_e9e,dfd);},function(err){self._resolve([err],null,_e9e,dfd,true);});return dfd;}},getSelectedFeatures:function(){var _ea3=this._selectedFeatures,_ea4=[],item;for(item in _ea3){if(_ea3.hasOwnProperty(item)){_ea4.push(_ea3[item]);}}return _ea4;},clearSelection:function(_ea5){var _ea6=this._selectedFeatures,mode=this._mode,item;for(item in _ea6){if(_ea6.hasOwnProperty(item)){this._unSelectFeatureIIf(item,mode);mode._removeFeatureIIf(item);}}this._selectedFeatures={};if(this._isSelOnly){mode._applyTimeFilter(true);}if(!_ea5){this.onSelectionClear();}return this;},setSelectionSymbol:function(_ea7){this._selectionSymbol=_ea7;if(_ea7){var _ea8=this._selectedFeatures,item;for(item in _ea8){if(_ea8.hasOwnProperty(item)){_ea8[item].setSymbol(_ea7);}}}return this;},getSelectionSymbol:function(){return this._selectionSymbol;},__msigns:[{n:"applyEdits",c:5,a:[{i:0},{i:1}],e:4,f:1}],applyEdits:function(adds,_ea9,_eaa,_eab,_eac,_ead){var _eae=_ead.assembly,dfd=_ead.dfd;this._applyNormalized(adds,_eae&&_eae[0]);this._applyNormalized(_ea9,_eae&&_eae[1]);this.onBeforeApplyEdits(adds,_ea9,_eaa);var i,_eaf={},_eb0=this.objectIdField,_eb1={f:"json"},_eb2=false;if(this._collection){var _eb3={};_eb3.addResults=adds?dojo.map(adds,function(){_eb2=true;return {objectId:this._nextId++,success:true};},this):null;_eb3.updateResults=_ea9?dojo.map(_ea9,function(_eb4){_eb2=true;var oid=_eb4.attributes[_eb0];_eaf[oid]=_eb4;return {objectId:oid,success:true};},this):null;_eb3.deleteResults=_eaa?dojo.map(_eaa,function(_eb5){_eb2=true;return {objectId:_eb5.attributes[_eb0],success:true};},this):null;if(_eb2){this._editHandler(_eb3,adds,_eaf,_eab,_eac,dfd);}return;}if(adds&&adds.length>0){_eb1.adds=this._convertFeaturesToJson(adds,0,1);_eb2=true;}if(_ea9&&_ea9.length>0){for(i=0;i<_ea9.length;i++){var _eb6=_ea9[i];_eaf[_eb6.attributes[_eb0]]=_eb6;}_eb1.updates=this._convertFeaturesToJson(_ea9,0,0,1);_eb2=true;}if(_eaa&&_eaa.length>0){var ids=[];for(i=0;i<_eaa.length;i++){ids.push(_eaa[i].attributes[_eb0]);}_eb1.deletes=ids.join(",");_eb2=true;}if(_eb2){var self=this;return esri.request({url:this._url.path+"/applyEdits",content:dojo.mixin(_eb1,this._url.query),callbackParamName:"callback",load:function(_eb7){self._editHandler(_eb7,adds,_eaf,_eab,_eac,dfd);},error:function(err){self._resolve([err],null,_eac,dfd,true);}},{usePost:true});}},queryFeatures:function(_eb8,_eb9,_eba){return this._query("execute","onQueryFeaturesComplete",_eb8,_eb9,_eba);},queryRelatedFeatures:function(_ebb,_ebc,_ebd){return this._query("executeRelationshipQuery","onQueryRelatedFeaturesComplete",_ebb,_ebc,_ebd);},queryIds:function(_ebe,_ebf,_ec0){return this._query("executeForIds","onQueryIdsComplete",_ebe,_ebf,_ec0);},queryCount:function(_ec1,_ec2,_ec3){return this._query("executeForCount","onQueryCountComplete",_ec1,_ec2,_ec3);},queryAttachmentInfos:function(_ec4,_ec5,_ec6){var url=this._url.path+"/"+_ec4+"/attachments",dfd=new dojo.Deferred(esri._dfdCanceller),self=this;dfd._pendingDfd=esri.request({url:url,content:dojo.mixin({f:"json"},this._url.query),callbackParamName:"callback",load:function(_ec7){var _ec8=_ec7.attachmentInfos,_ec9;dojo.forEach(_ec8,function(info){_ec9=dojo.objectToQuery({gdbVersion:self._url.query&&self._url.query.gdbVersion,layer:self._url.query&&self._url.query.layer,token:self._getToken()});info.url=url+"/"+info.id+(_ec9?("?"+_ec9):"");info.objectId=_ec4;});self._resolve([_ec8],"onQueryAttachmentInfosComplete",_ec5,dfd);},error:function(err){self._resolve([err],null,_ec6,dfd,true);}});return dfd;},addAttachment:function(_eca,_ecb,_ecc,_ecd){return this._sendAttachment("add",_eca,_ecb,_ecc,_ecd);},updateAttachment:function(_ece,_ecf,_ed0,_ed1,_ed2){_ed0.appendChild(dojo.create("input",{type:"hidden",name:"attachmentId",value:_ecf}));return this._sendAttachment("update",_ece,_ed0,_ed1,_ed2);},deleteAttachments:function(_ed3,_ed4,_ed5,_ed6){var url=this._url.path+"/"+_ed3+"/deleteAttachments",dfd=new dojo.Deferred(esri._dfdCanceller),self=this,_ed7={f:"json",attachmentIds:_ed4.join(",")};dfd._pendingDfd=esri.request({url:url,content:dojo.mixin(_ed7,this._url.query),callbackParamName:"callback",load:dojo.hitch(this,function(_ed8){var _ed9=_ed8.deleteAttachmentResults;_ed9=dojo.map(_ed9,function(_eda){var res=new esri.layers.FeatureEditResult(_eda);res.attachmentId=res.objectId;res.objectId=_ed3;return res;});self._resolve([_ed9],"onDeleteAttachmentsComplete",_ed5,dfd);}),error:function(err){self._resolve([err],null,_ed6,dfd,true);}},{usePost:true});return dfd;},addType:function(_edb){var _edc=this.types;if(_edc){var _edd=dojo.some(_edc,function(type){if(type.id==_edb.id){return true;}return false;});if(_edd){return false;}else{_edc.push(_edb);}}else{this.types=[_edb];}this._typesDirty=true;return true;},deleteType:function(_ede){if(!this._collection){return;}var _edf=this.types;if(_edf){var _ee0=-1;dojo.some(_edf,function(type,_ee1){if(type.id==_ede){_ee0=_ee1;return true;}return false;});if(_ee0>-1){this._typesDirty=true;return _edf.splice(_ee0,1)[0];}}},toJson:function(){var _ee2=this._json,json=dojo.isString(_ee2)?dojo.fromJson(_ee2):dojo.clone(_ee2);if(!json){return;}json=json.layerDefinition?json:{layerDefinition:json};var _ee3=json.layerDefinition,_ee4=this._collection;if(_ee4&&this._typesDirty){_ee3.types=dojo.map(this.types||[],function(type){return type.toJson();});var _ee5=this.renderer,_ee6=_ee3.drawingInfo;if(_ee6&&_ee5&&_ee5.declaredClass.indexOf("TemporalRenderer")===-1){_ee6.renderer=_ee5.toJson();}}var _ee7=null;if(!(_ee4&&!this._fcAdded)){_ee7={geometryType:_ee3.geometryType,features:this._convertFeaturesToJson(this.graphics,true)};}json.featureSet=dojo.mixin({},json.featureSet||{},_ee7);if(_ee4){json.nextObjectId=this._nextId;_ee3.capabilities=this.capabilities;}return json;},onSelectionComplete:function(){},onSelectionClear:function(){},onBeforeApplyEdits:function(){},onEditsComplete:function(){},onQueryFeaturesComplete:function(){},onQueryRelatedFeaturesComplete:function(){},onQueryIdsComplete:function(){},onQueryCountComplete:function(){},onQueryAttachmentInfosComplete:function(){},onAddAttachmentComplete:function(){},onUpdateAttachmentComplete:function(){},onDeleteAttachmentsComplete:function(){},onCapabilitiesChange:function(){},onGDBVersionChange:function(){},onQueryLimitExceeded:function(){},_forceIdentity:function(_ee8){var self=this,path=this._url&&this._url.path;if((this.ownershipBasedAccessControlForFeatures||this.userIsAdmin)&&!this._getToken()&&path&&esri.id&&esri.id._hasPortalSession()&&esri.id._doPortalSignIn(path)){esri.id.getCredential(path).then(function(){self._findCredential();_ee8.call(self);},function(){_ee8.call(self);});}else{_ee8.call(this);}},_updateCaps:function(){var _ee9=this._editable,_eea=dojo.trim(this.capabilities||""),_eeb=dojo.map((_eea?_eea.split(","):[]),dojo.trim),caps=dojo.map((_eea?_eea.toLowerCase().split(","):[]),dojo.trim),_eec=dojo.indexOf(caps,"editing"),cap,i,_eed,_eee={"Create":dojo.indexOf(caps,"create"),"Update":dojo.indexOf(caps,"update"),"Delete":dojo.indexOf(caps,"delete")};if(_ee9&&_eec===-1){_eeb.push("Editing");}else{if(!_ee9&&_eec>-1){_eed=[_eec];for(cap in _eee){if(_eee[cap]>-1){_eed.push(_eee[cap]);}}_eed.sort();for(i=_eed.length-1;i>=0;i--){_eeb.splice(_eed[i],1);}}}this.capabilities=_eeb.join(",");},_counter:{value:0},_getUniqueId:function(){return this._counter.value++;},onSuspend:function(){this.inherited(arguments);this._toggleTime(false);var mode=this._mode;if(mode){mode.suspend();}},onResume:function(evt){this.inherited(arguments);this._toggleTime(true);this._updateMaxOffset();var mode=this._mode,map=this._map,_eef=this.renderer;if(evt.firstOccurrence){this.clearSelection();if(this.timeInfo){if(this._trackIdField||(_eef&&(_eef.latestObservationRenderer||_eef.trackRenderer))){this._trackManager=new esri.layers._TrackManager(this);this._trackManager.initialize(map);}}this._zoomConnect=dojo.connect(map,"onZoomEnd",this,this._updateMaxOffset);}if(mode){evt.firstOccurrence?mode.initialize(map):mode.resume();}},_updateMaxOffset:function(){var map=this._map;if(map&&map.loaded){if(this._autoGeneralize){this._maxOffset=Math.floor(map.extent.getWidth()/map.width);}}},_toggleTime:function(_ef0){var map=this._map;if(_ef0&&this.timeInfo&&this.useMapTime&&map){this._mapTimeExtent=map.timeExtent;if(!this._timeConnect){this._timeConnect=dojo.connect(map,"onTimeExtentChange",this,this._timeChangeHandler);}}else{this._mapTimeExtent=null;dojo.disconnect(this._timeConnect);this._timeConnect=null;}},_timeChangeHandler:function(_ef1){this._mapTimeExtent=_ef1;var mode=this._mode;if(mode){mode.propertyChangeHandler(0);}},_getOffsettedTE:function(_ef2){var _ef3=this._timeOffset,_ef4=this._timeOffsetUnits;return (_ef2&&_ef3&&_ef4)?_ef2.offset(-1*_ef3,_ef4):_ef2;},_getTimeOverlap:function(_ef5,_ef6){if(_ef5&&_ef6){return _ef5.intersection(_ef6);}else{return _ef5||_ef6;}},_getTimeFilter:function(_ef7){var _ef8=this.getTimeDefinition(),_ef9=null,_efa;if(_ef8||_ef9){_efa=this._getTimeOverlap(_ef8,_ef9);if(!_efa){return [false];}}if(_ef7){_ef7=_efa?this._getTimeOverlap(_ef7,_efa):_ef7;if(!_ef7){return [false];}}else{_ef7=_efa;}return [true,_ef7];},_getAttributeFilter:function(_efb){var _efc=this.getDefinitionExpression();if(_efb){_efb=_efc?"("+_efc+") AND ("+_efb+")":_efb;}else{_efb=_efc;}return _efb;},_applyQueryFilters:function(_efd){_efd.where=this._getAttributeFilter(_efd.where);_efd.maxAllowableOffset=this._maxOffset;if(this.timeInfo){var _efe=this._getTimeFilter(_efd.timeExtent);if(!_efe[0]){return false;}else{_efd.timeExtent=_efe[1];}}return true;},_add:function(_eff){var _f00=this._selectionSymbol,attr=_eff.attributes,_f01=this.visibilityField;if(_f00&&this._isSelOnly){_eff.setSymbol(_f00);}if(_f01&&attr&&attr.hasOwnProperty(_f01)){_eff[attr[_f01]?"show":"hide"]();}return this.add.apply(this,arguments);},_remove:function(){return this.remove.apply(this,arguments);},_canDoClientSideQuery:function(_f02){var _f03=[],map=this._map;if(this._isTable||!map){return;}if(_f02.text||(_f02.where&&_f02.where!==this.getDefinitionExpression())){return;}var _f04=this._isSnapshot,_f05=this._isSelOnly;var _f06=_f02.geometry;if(_f06){if(!_f05&&_f02.spatialRelationship===esri.tasks.Query.SPATIAL_REL_INTERSECTS&&(_f06.type==="extent"&&(_f04||map.extent.contains(_f06)))){_f03.push(1);}else{return;}}var ids=_f02.objectIds;if(ids){if(_f04){_f03.push(2);}else{var len=ids.length,mode=this._mode,_f07=0,i;for(i=0;i<len;i++){if(mode._getFeature(ids[i])){_f07++;}}if(_f07===len){_f03.push(2);}else{return;}}}if(this.timeInfo){var _f08=_f02.timeExtent,_f09=this._mapTimeExtent;if(_f04){if(_f08){_f03.push(3);}}else{if(_f05){if(_f08){return;}}else{if(_f09){if(dojo.indexOf(_f03,2)!==-1){if(_f08){_f03.push(3);}}else{return;}}else{if(_f03.length>0){if(_f08){_f03.push(3);}}else{if(_f08){return;}}}}}}return _f03.length>0?_f03:null;},_doQuery:function(_f0a,_f0b,_f0c){var _f0d=[],mode=this._mode,_f0e=this.objectIdField,i,len,_f0f;if(dojo.indexOf(_f0b,2)!==-1){_f0d=[];var ids=_f0a.objectIds;len=ids.length;for(i=0;i<len;i++){var obj=mode._getFeature(ids[i]);if(obj){_f0d.push(obj);}}if(_f0d.length===0){return [];}}if(dojo.indexOf(_f0b,1)!==-1){_f0f=_f0d.length>0?_f0d:this.graphics;len=_f0f.length;var _f10=_f0a.geometry._normalize(null,true);_f0d=[];for(i=0;i<len;i++){var _f11=_f0f[i],_f12=_f11.geometry;if(_f12){if(this.normalization&&_f10.length){if(_f10[0].intersects(_f12)||_f10[1].intersects(_f12)){_f0d.push(_f11);}}else{if(_f10.intersects(_f12)){_f0d.push(_f11);}}}}if(_f0d.length===0){return [];}}if(dojo.indexOf(_f0b,3)!==-1){if(this.timeInfo){_f0f=_f0d.length>0?_f0d:this.graphics;var time=_f0a.timeExtent,_f13=this._filterByTime(_f0f,time.startTime,time.endTime);_f0d=_f13.match;}}if(_f0c){return dojo.map(_f0d,function(obj){return obj.attributes[_f0e];},this);}else{return _f0d;}},_filterByTime:function(_f14,_f15,_f16){var _f17=this._startTimeField,_f18=this._endTimeField,_f19;if(!this._twoTimeFields){_f19=_f17||_f18;}var _f1a=esri._isDefined,yea=[],nay=[],i,len=_f14.length,_f1b,_f1c;_f15=_f15?_f15.getTime():-Infinity;_f16=_f16?_f16.getTime():Infinity;if(_f19){for(i=0;i<len;i++){_f1b=_f14[i];_f1c=_f1b.attributes;var time=_f1c[_f19];if(time>=_f15&&time<=_f16){yea.push(_f1b);}else{nay.push(_f1b);}}}else{for(i=0;i<len;i++){_f1b=_f14[i];_f1c=_f1b.attributes;var _f1d=_f1c[_f17],end=_f1c[_f18];_f1d=_f1a(_f1d)?_f1d:-Infinity;end=_f1a(end)?end:Infinity;if((_f1d>=_f15&&_f1d<=_f16)||(end>=_f15&&end<=_f16)||(_f15>=_f1d&&_f16<=end)){yea.push(_f1b);}else{nay.push(_f1b);}}}return {match:yea,noMatch:nay};},_resolve:function(args,_f1e,_f1f,dfd,_f20){if(_f1e){this[_f1e].apply(this,args);}if(_f1f){_f1f.apply(null,args);}if(dfd){esri._resDfd(dfd,args,_f20);}},_getShallowClone:function(_f21){var _f22=new esri.tasks.Query(),prop;for(prop in _f21){if(_f21.hasOwnProperty(prop)){_f22[prop]=_f21[prop];}}return _f22;},_query:function(type,_f23,_f24,_f25,_f26){var that=this,map=this._map,dfd=new dojo.Deferred(esri._dfdCanceller),_f27=_f24;var _f28=function(_f29,_f2a){if(!_f2a&&type==="execute"&&!that._isTable){var _f2b=_f29.features,mode=that._mode,_f2c=that.objectIdField,il=_f2b.length,i;for(i=il-1;i>=0;i--){var oid=_f2b[i].attributes[_f2c];var _f2d=mode._getFeature(oid);if(_f2d){_f2b.splice(i,1,_f2d);}}}that._resolve([_f29],_f23,_f25,dfd);};if(type!=="executeRelationshipQuery"){_f27=this._getShallowClone(_f24);_f27.outFields=this._getOutFields();_f27.returnGeometry=(!map&&_f24.hasOwnProperty("returnGeometry"))?_f24.returnGeometry:true;var _f2e;if(map){_f27.outSpatialReference=new esri.SpatialReference(map.spatialReference.toJson());}if(!this._applyQueryFilters(_f27)){switch(type){case "execute":_f2e=new esri.tasks.FeatureSet({features:[]});break;case "executeForIds":_f2e=[];break;case "executeForCount":_f2e=0;break;}_f28(_f2e,true);return dfd;}var _f2f=this._canDoClientSideQuery(_f27);if(_f2f){var _f30=this._doQuery(_f27,_f2f,(type==="executeForIds"||type==="executeForCount"));switch(type){case "execute":_f2e=new esri.tasks.FeatureSet();_f2e.features=_f30;break;case "executeForIds":_f2e=_f30;break;case "executeForCount":_f2e=_f30.length;break;}_f28(_f2e,true);return dfd;}}if(this._collection){var err=new Error("FeatureLayer::_query - "+esri.bundle.layers.FeatureLayer.invalidParams);this._resolve([err],null,_f26,dfd,true);return dfd;}if(this._ts){_f27._ts=(new Date()).getTime();}var temp=dfd._pendingDfd=this._task[type](_f27);temp.addCallbacks(_f28,function(err){that._resolve([err],null,_f26,dfd,true);});return dfd;},_convertFeaturesToJson:function(_f31,_f32,_f33,_f34){var json=[],_f35=this._selectionSymbol,_f36=this.visibilityField,i,_f37,_f38=this.objectIdField;if(this.loaded&&(_f33||_f34)){_f37=dojo.filter(this.fields,function(_f39){return (_f39.editable===false)&&(!_f34||(_f39.name!==_f38));});}for(i=0;i<_f31.length;i++){var _f3a=_f31[i],_f3b={},_f3c=_f3a.geometry,attr=_f3a.attributes,_f3d=_f3a.symbol;if(_f3c&&(!_f34||!this.loaded||this.allowGeometryUpdates)){_f3b.geometry=_f3c.toJson();}if(_f36){_f3b.attributes=attr=dojo.mixin({},attr);attr[_f36]=_f3a.visible?1:0;}else{if(attr){_f3b.attributes=dojo.mixin({},attr);}}if(_f3b.attributes&&_f37&&_f37.length){dojo.forEach(_f37,function(_f3e){delete _f3b.attributes[_f3e.name];});}if(_f3d&&(_f3d!==_f35)){_f3b.symbol=_f3d.toJson();}json.push(_f3b);}return _f32?json:dojo.toJson(json);},_selectHandler:function(_f3f,_f40,_f41,_f42,dfd){var _f43,ctor=this.constructor;switch(_f40){case ctor.SELECTION_NEW:this.clearSelection(true);_f43=true;break;case ctor.SELECTION_ADD:_f43=true;break;case ctor.SELECTION_SUBTRACT:_f43=false;break;}var i,_f44=_f3f.features,mode=this._mode,_f45=[],_f46=this.objectIdField,_f47,oid;if(_f43){for(i=0;i<_f44.length;i++){_f47=_f44[i];oid=_f47.attributes[_f46];var _f48=mode._addFeatureIIf(oid,_f47);_f45.push(_f48);this._selectFeatureIIf(oid,_f48,mode);}}else{for(i=0;i<_f44.length;i++){_f47=_f44[i];oid=_f47.attributes[_f46];this._unSelectFeatureIIf(oid,mode);var _f49=mode._removeFeatureIIf(oid);_f45.push(_f49||_f47);}}if(this._isSelOnly){mode._applyTimeFilter(true);}this._resolve([_f45,_f40,_f3f.exceededTransferLimit?{queryLimitExceeded:true}:null],"onSelectionComplete",_f41,dfd);if(_f3f.exceededTransferLimit){this.onQueryLimitExceeded();}},_selectFeatureIIf:function(oid,_f4a,mode){var _f4b=this._selectedFeatures,_f4c=_f4b[oid];if(!_f4c){mode._incRefCount(oid);_f4b[oid]=_f4a;if(!this._isTable){this._setSelectSymbol(_f4a);}}return _f4c||_f4a;},_unSelectFeatureIIf:function(oid,mode){var _f4d=this._selectedFeatures[oid];if(_f4d){mode._decRefCount(oid);delete this._selectedFeatures[oid];if(!this._isTable){this._setUnSelectSymbol(_f4d);}}return _f4d;},_isSelected:function(_f4e){},_setSelectSymbol:function(_f4f){var _f50=this._selectionSymbol;if(_f50&&!this._isSelOnly){_f4f.setSymbol(_f50);}},_setUnSelectSymbol:function(_f51){var _f52=this._selectionSymbol;if(_f52&&!this._isSelOnly){if(_f52===_f51.symbol){_f51.setSymbol(null,true);}}},_getOutFields:function(){var _f53=dojo.filter([this.objectIdField,this.typeIdField,this.creatorField,this._startTimeField,this._endTimeField,this._trackIdField].concat(this._rendererFields),function(_f54,_f55,arr){return !!_f54&&(dojo.indexOf(arr,_f54)===_f55);});var _f56=dojo.clone(this._outFields);if(_f56){if(dojo.indexOf(_f56,"*")!==-1){return _f56;}dojo.forEach(_f53,function(_f57){if(dojo.indexOf(_f56,_f57)===-1){_f56.push(_f57);}});return _f56;}else{return _f53;}},_checkFields:function(_f58){var _f59=_f58||this._getOutFields();dojo.forEach(_f59,function(_f5a){if(_f5a==="*"){return;}if(!this._getField(_f5a)){console.debug("esri.layers.FeatureLayer: "+esri.substitute({url:this.url,field:_f5a},esri.bundle.layers.FeatureLayer.fieldNotFound));}},this);if(!_f58&&!this._isTable&&!this._fserver&&!this._collection){var _f5b=dojo.some(this.fields,function(_f5c){return (_f5c&&_f5c.type==="esriFieldTypeGeometry")?true:false;});if(!_f5b){console.debug("esri.layers.FeatureLayer: "+esri.substitute({url:this.url},esri.bundle.layers.FeatureLayer.noGeometryField));}}},_fixRendererFields:function(){var _f5d=this.renderer;if(_f5d&&this.fields.length>0){var _f5e=dojo.filter([_f5d,_f5d.observationRenderer,_f5d.latestObservationRenderer,_f5d.trackRenderer],esri._isDefined);var _f5f=[];dojo.forEach(_f5e,function(rnd){var _f60,_f61;_f61=rnd.attributeField;if(_f61&&!dojo.isFunction(_f61)){_f60=!this._getField(_f61)&&this._getField(_f61,true);if(_f60){rnd.attributeField=_f60.name;}}_f61=rnd.attributeField2;if(_f61){_f60=!this._getField(_f61)&&this._getField(_f61,true);if(_f60){rnd.attributeField2=_f60.name;}}_f61=rnd.attributeField3;if(_f61){_f60=!this._getField(_f61)&&this._getField(_f61,true);if(_f60){rnd.attributeField3=_f60.name;}}if(!dojo.isFunction(rnd.attributeField)){_f5f.push(rnd.attributeField);}_f5f.push(rnd.attributeField2);_f5f.push(rnd.attributeField3);},this);this._rendererFields=dojo.filter(_f5f,esri._isDefined);}},_getField:function(_f62,_f63){var _f64=this.fields;if(_f64.length===0){return null;}var _f65;if(_f63){_f62=_f62.toLowerCase();}dojo.some(_f64,function(_f66){var _f67=false;if(_f63){_f67=(_f66&&_f66.name.toLowerCase()===_f62)?true:false;}else{_f67=(_f66&&_f66.name===_f62)?true:false;}if(_f67){_f65=_f66;}return _f67;});return _f65;},_getDateOpts:function(){if(!this._dtOpts){var _f68=dojo.map(dojo.filter(this.fields,function(_f69){return !!(_f69&&_f69.type==="esriFieldTypeDate");}),function(_f6a){return _f6a.name;});this._dtOpts={properties:_f68};}return this._dtOpts;},_applyNormalized:function(_f6b,_f6c){if(_f6b&&_f6c){dojo.forEach(_f6b,function(_f6d,_f6e){if(_f6d&&_f6c[_f6e]){_f6d.setGeometry(_f6c[_f6e]);}});}},_editHandler:function(_f6f,adds,_f70,_f71,_f72,dfd){var _f73=_f6f.addResults,_f74=_f6f.updateResults,_f75=_f6f.deleteResults,i,_f76,oid,_f77,attr,_f78=this.objectIdField,mode=this._mode,_f79=this._isTable;var _f7a=this.editFieldsInfo,_f7b=this._getOutFields()||[],_f7c=_f7a&&_f7a.creatorField,_f7d=_f7a&&_f7a.creationDateField,_f7e=_f7a&&_f7a.editorField,_f7f=_f7a&&_f7a.editDateField,_f80=_f7a&&_f7a.realm;if(dojo.indexOf(_f7b,"*")===-1){if(_f7c&&dojo.indexOf(_f7b,_f7c)===-1){_f7c=null;}if(_f7d&&dojo.indexOf(_f7b,_f7d)===-1){_f7d=null;}if(_f7e&&dojo.indexOf(_f7b,_f7e)===-1){_f7e=null;}if(_f7f&&dojo.indexOf(_f7b,_f7f)===-1){_f7f=null;}}var _f81=(_f7d||_f7f)?(new Date()).getTime():null,_f82=(_f7c||_f7e)?this.getUserId():undefined;if(_f82&&_f80){_f82=_f82+"@"+_f80;}if(_f73){for(i=0;i<_f73.length;i++){_f73[i]=new esri.layers.FeatureEditResult(_f73[i]);if(_f79){continue;}_f76=_f73[i];if(_f76.success){oid=_f76.objectId;_f77=adds[i];var gl=_f77._graphicsLayer;if(gl&&gl!==this){gl.remove(_f77);}attr=_f77.attributes||{};attr[_f78]=oid;if(_f7c){attr[_f7c]=_f82;}if(_f7e){attr[_f7e]=_f82;}if(_f7d){attr[_f7d]=_f81;}if(_f7f){attr[_f7f]=_f81;}_f77.setAttributes(attr);if(mode._init){mode.drawFeature(_f77);}}}}if(_f74){for(i=0;i<_f74.length;i++){_f74[i]=new esri.layers.FeatureEditResult(_f74[i]);if(_f79){continue;}_f76=_f74[i];if(_f76.success){oid=_f76.objectId;_f77=_f70[oid];var _f83=mode._getFeature(oid);if(_f83){if(_f83.geometry!==_f77.geometry){_f83.setGeometry(esri.geometry.fromJson(_f77.geometry.toJson()));}this._repaint(_f83,oid);}_f77=_f83||_f77;attr=_f77.attributes||{};if(_f7e){attr[_f7e]=_f82;}if(_f7f){attr[_f7f]=_f81;}_f77.setAttributes(attr);}}}if(_f75){var _f84=[];for(i=0;i<_f75.length;i++){_f75[i]=new esri.layers.FeatureEditResult(_f75[i]);if(_f79){continue;}_f76=_f75[i];if(_f76.success){oid=_f76.objectId;_f77=mode._getFeature(oid);if(_f77){if(this._unSelectFeatureIIf(oid,mode)){_f84.push(_f77);}_f77._count=0;mode._removeFeatureIIf(oid);}}}if(_f84.length>0){this.onSelectionComplete(_f84,this.constructor.SELECTION_SUBTRACT);}}this._resolve([_f73,_f74,_f75],"onEditsComplete",_f71,dfd);},_sendAttachment:function(type,_f85,_f86,_f87,_f88){var _f89=(type==="add")?"addAttachment":"updateAttachment",url=this._url.path+"/"+_f85+"/"+_f89,self=this;var dfd=esri.request({url:url,form:_f86,content:dojo.mixin(this._url.query,{f:"json",token:this._getToken()||undefined}),callbackParamName:"callback.html",handleAs:"json"}).addCallback(function(_f8a){var _f8b=(type==="add")?"addAttachmentResult":"updateAttachmentResult",_f8c=(type==="add")?"onAddAttachmentComplete":"onUpdateAttachmentComplete",_f8d=new esri.layers.FeatureEditResult(_f8a[_f8b]);_f8d.attachmentId=_f8d.objectId;_f8d.objectId=_f85;self._resolve([_f8d],_f8c,_f87);return _f8d;}).addErrback(function(_f8e){self._resolve([_f8e],null,_f88,null,true);});return dfd;},_repaint:function(_f8f,oid,_f90){oid=esri._isDefined(oid)?oid:_f8f.attributes[this.objectIdField];if(!(oid in this._selectedFeatures)||!this._selectionSymbol){_f8f.setSymbol(_f8f.symbol,_f90);}},_getKind:function(_f91){var _f92=this._trackManager;if(_f92){return _f92.isLatestObservation(_f91)?1:0;}return 0;}});dojo.mixin(esri.layers.FeatureLayer,{MODE_SNAPSHOT:0,MODE_ONDEMAND:1,MODE_SELECTION:2,SELECTION_NEW:3,SELECTION_ADD:4,SELECTION_SUBTRACT:5,POPUP_NONE:"esriServerHTMLPopupTypeNone",POPUP_HTML_TEXT:"esriServerHTMLPopupTypeAsHTMLText",POPUP_URL:"esriServerHTMLPopupTypeAsURL"});esri._createWrappers("esri.layers.FeatureLayer");dojo.declare("esri.layers.FeatureType",null,{constructor:function(json){if(json&&dojo.isObject(json)){this.id=json.id;this.name=json.name;var _f93=json.symbol;if(_f93){this.symbol=esri.symbol.fromJson(_f93);}var _f94=json.domains,_f95,i;var _f96=this.domains={};for(_f95 in _f94){if(_f94.hasOwnProperty(_f95)){var _f97=_f94[_f95];switch(_f97.type){case "range":_f96[_f95]=new esri.layers.RangeDomain(_f97);break;case "codedValue":_f96[_f95]=new esri.layers.CodedValueDomain(_f97);break;case "inherited":_f96[_f95]=new esri.layers.InheritedDomain(_f97);break;}}}var _f98=json.templates;if(_f98){var _f99=this.templates=[];for(i=0;i<_f98.length;i++){_f99.push(new esri.layers.FeatureTemplate(_f98[i]));}}}},toJson:function(){var json={id:this.id,name:this.name,symbol:this.symbol&&this.symbol.toJson()};var _f9a,_f9b=this.domains,_f9c=this.templates,_f9d=esri._sanitize;if(_f9b){var _f9e=json.domains={};for(_f9a in _f9b){if(_f9b.hasOwnProperty(_f9a)){_f9e[_f9a]=_f9b[_f9a]&&_f9b[_f9a].toJson();}}_f9d(_f9e);}if(_f9c){json.templates=dojo.map(_f9c,function(_f9f){return _f9f.toJson();});}return _f9d(json);}});dojo.declare("esri.layers.FeatureTemplate",null,{constructor:function(json){if(json&&dojo.isObject(json)){this.name=json.name;this.description=json.description;this.drawingTool=json.drawingTool;var _fa0=json.prototype;this.prototype=new esri.Graphic(_fa0.geometry,null,_fa0.attributes);}},toJson:function(){return esri._sanitize({name:this.name,description:this.description,drawingTool:this.drawingTool,prototype:this.prototype&&this.prototype.toJson()});}});dojo.mixin(esri.layers.FeatureTemplate,{TOOL_AUTO_COMPLETE_POLYGON:"esriFeatureEditToolAutoCompletePolygon",TOOL_CIRCLE:"esriFeatureEditToolCircle",TOOL_ELLIPSE:"esriFeatureEditToolEllipse",TOOL_FREEHAND:"esriFeatureEditToolFreehand",TOOL_LINE:"esriFeatureEditToolLine",TOOL_NONE:"esriFeatureEditToolNone",TOOL_POINT:"esriFeatureEditToolPoint",TOOL_POLYGON:"esriFeatureEditToolPolygon",TOOL_RECTANGLE:"esriFeatureEditToolRectangle",TOOL_ARROW:"esriFeatureEditToolArrow",TOOL_TRIANGLE:"esriFeatureEditToolTriangle",TOOL_LEFT_ARROW:"esriFeatureEditToolLeftArrow",TOOL_RIGHT_ARROW:"esriFeatureEditToolRightArrow",TOOL_UP_ARROW:"esriFeatureEditToolUpArrow",TOOL_DOWN_ARROW:"esriFeatureEditToolDownArrow"});dojo.declare("esri.layers.FeatureEditResult",null,{constructor:function(json){if(json&&dojo.isObject(json)){this.objectId=json.objectId;this.success=json.success;if(!json.success){var err=json.error;this.error=new Error();this.error.code=err.code;this.error.message=err.description;}}}});dojo.declare("esri.layers._RenderMode",null,{constructor:function(){this._prefix="jsonp_"+(dojo._scopeName||"dojo")+"IoScript";},initialize:function(map){},propertyChangeHandler:function(type){},destroy:function(){},drawFeature:function(_fa1){},suspend:function(){},resume:function(){},refresh:function(){},_incRefCount:function(oid){var _fa2=this._featureMap[oid];if(_fa2){_fa2._count++;}},_decRefCount:function(oid){var _fa3=this._featureMap[oid];if(_fa3){_fa3._count--;}},_getFeature:function(oid){return this._featureMap[oid];},_addFeatureIIf:function(oid,_fa4){var fmap=this._featureMap,_fa5=fmap[oid],_fa6=this.featureLayer;if(!_fa5){fmap[oid]=_fa4;_fa6._add(_fa4);_fa4._count=0;}return _fa5||_fa4;},_removeFeatureIIf:function(oid){var _fa7=this._featureMap[oid],_fa8=this.featureLayer;if(_fa7){if(_fa7._count){return;}delete this._featureMap[oid];_fa8._remove(_fa7);}return _fa7;},_clearIIf:function(){var i,_fa9=this.featureLayer,_faa=_fa9.graphics,_fab=_fa9._selectedFeatures,_fac=_fa9.objectIdField;for(i=_faa.length-1;i>=0;i--){var _fad=_faa[i];var oid=_fad.attributes[_fac];if(oid in _fab){_fad._count=1;continue;}_fad._count=0;this._removeFeatureIIf(oid);}},_isPending:function(id){var dfd=dojo.io.script[this._prefix+id];return dfd?true:false;},_cancelPendingRequest:function(dfd,id){dfd=dfd||dojo.io.script[this._prefix+id];if(dfd){try{dfd.cancel();dojo.io.script._validCheck(dfd);}catch(e){}}},_purgeRequests:function(){dojo.io.script._validCheck(null);},_toggleVisibility:function(show){var _fae=this.featureLayer,_faf=_fae.graphics,_fb0=show?"show":"hide",i,len=_faf.length;show=show&&_fae._ager;for(i=0;i<len;i++){var _fb1=_faf[i];_fb1[_fb0]();if(show){_fae._repaint(_fb1);}}},_applyTimeFilter:function(_fb2){var _fb3=this.featureLayer;if(!_fb3.timeInfo||_fb3.suspended){return;}if(!_fb2){_fb3._fireUpdateStart();}var _fb4=_fb3._trackManager;if(_fb4){_fb4.clearTracks();}var defn=_fb3.getTimeDefinition(),_fb5=_fb3._getOffsettedTE(_fb3._mapTimeExtent);if(_fb5){_fb5=_fb3._getTimeOverlap(defn,_fb5);if(_fb5){var _fb6=_fb3._filterByTime(_fb3.graphics,_fb5.startTime,_fb5.endTime);if(_fb4){_fb4.addFeatures(_fb6.match);}dojo.forEach(_fb6.match,function(_fb7){var _fb8=_fb7._shape;if(!_fb7.visible){_fb7.show();_fb8=_fb7._shape;_fb8&&_fb8._moveToFront();}if(_fb3._ager&&_fb8){_fb3._repaint(_fb7);}});dojo.forEach(_fb6.noMatch,function(_fb9){if(_fb9.visible){_fb9.hide();}});}else{this._toggleVisibility(false);}}else{if(_fb4){_fb4.addFeatures(_fb3.graphics);}this._toggleVisibility(true);}if(_fb4){_fb4.moveLatestToFront();_fb4.drawTracks();}if(!_fb2){_fb3._fireUpdateEnd();}}});dojo.declare("esri.layers._SelectionMode",[esri.layers._RenderMode],{constructor:function(_fba){this.featureLayer=_fba;this._featureMap={};},initialize:function(map){this.map=map;this._init=true;},propertyChangeHandler:function(type){if(this._init&&type===0){this._applyTimeFilter();}},destroy:function(){this._init=false;},resume:function(){this.propertyChangeHandler(0);}});dojo.declare("esri.layers._SnapshotMode",[esri.layers._RenderMode],{constructor:function(_fbb){this.featureLayer=_fbb;this._featureMap={};this._drawFeatures=dojo.hitch(this,this._drawFeatures);this._queryErrorHandler=dojo.hitch(this,this._queryErrorHandler);},initialize:function(map){this.map=map;var _fbc=this.featureLayer;if(_fbc._collection){this._applyTimeFilter();}else{this._fetchAll();}this._init=true;},propertyChangeHandler:function(type){if(this._init){if(type){if(this.featureLayer._collection){console.log("FeatureLayer: layer created by value (from a feature collection) does not support definition expressions and time definitions. Layer id = "+this.featureLayer.id);}else{this._fetchAll();}}else{this._applyTimeFilter();}}},destroy:function(){this._init=false;},drawFeature:function(_fbd){var _fbe=this.featureLayer,_fbf=_fbe.objectIdField,oid=_fbd.attributes[_fbf];this._addFeatureIIf(oid,_fbd);this._incRefCount(oid);},resume:function(){this.propertyChangeHandler(0);},refresh:function(){var _fc0=this.featureLayer;if(_fc0._collection){_fc0._fireUpdateStart();_fc0._refresh(true);_fc0._fireUpdateEnd();}else{this._fetchAll();}},_getRequestId:function(_fc1){var id="_"+_fc1.name+_fc1.layerId+_fc1._ulid;return id.replace(/[^a-zA-Z0-9\_]+/g,"_");},_fetchAll:function(){var _fc2=this.featureLayer;if(_fc2._collection){return;}_fc2._fireUpdateStart();this._clearIIf();this._sendRequest();},_sendRequest:function(){var map=this.map,_fc3=this.featureLayer,_fc4=_fc3.getDefinitionExpression();var _fc5=new esri.tasks.Query();_fc5.outFields=_fc3._getOutFields();_fc5.where=_fc4||"1=1";_fc5.returnGeometry=true;_fc5.outSpatialReference=new esri.SpatialReference(map.spatialReference.toJson());_fc5.timeExtent=_fc3.getTimeDefinition();_fc5.maxAllowableOffset=_fc3._maxOffset;if(_fc3._ts){_fc5._ts=(new Date()).getTime();}var _fc6;if(_fc3._usePatch){_fc6=this._getRequestId(_fc3);this._cancelPendingRequest(null,_fc6);}_fc3._task.execute(_fc5,this._drawFeatures,this._queryErrorHandler,_fc6);},_drawFeatures:function(_fc7){this._purgeRequests();var _fc8=_fc7.features,_fc9=this.featureLayer,_fca=_fc9.objectIdField,i,len=_fc8.length,_fcb,oid;for(i=0;i<len;i++){_fcb=_fc8[i];oid=_fcb.attributes[_fca];this._addFeatureIIf(oid,_fcb);this._incRefCount(oid);}this._applyTimeFilter(true);_fc9._fireUpdateEnd(null,_fc7.exceededTransferLimit?{queryLimitExceeded:true}:null);if(_fc7.exceededTransferLimit){_fc9.onQueryLimitExceeded();}},_queryErrorHandler:function(err){this._purgeRequests();var _fcc=this.featureLayer;_fcc._errorHandler(err);_fcc._fireUpdateEnd(err);}});dojo.declare("esri.layers._OnDemandMode",[esri.layers._RenderMode],{constructor:function(_fcd){this.featureLayer=_fcd;this._featureMap={};this._queryErrorHandler=dojo.hitch(this,this._queryErrorHandler);},initialize:function(map){this.map=map;this._initialize();this._init=true;},propertyChangeHandler:function(type){if(this._init){if(type<2){this._zoomHandler();}else{console.log("FeatureLayer: layer in on-demand mode does not support time definitions. Layer id = "+this.featureLayer.id+", Layer URL = "+this.featureLayer.url);}}},destroy:function(){this._disableConnectors();this._init=false;},drawFeature:function(_fce){var _fcf=this._gridLayer,geom=_fce.geometry,_fd0=[];if(!geom){return;}_fd0=_fcf.getCellsInExtent((geom.type==="point")?{xmin:geom.x,ymin:geom.y,xmax:geom.x,ymax:geom.y}:geom.getExtent(),false).cells;var _fd1=this._cellMap,i,cell,oid=_fce.attributes[this.featureLayer.objectIdField],_fd2,row,col;for(i=0;i<_fd0.length;i++){cell=_fd0[i];_fd2=cell.latticeID;row=cell.row;col=cell.col;if(_fd2){cell=(_fd1[_fd2]=(_fd1[_fd2]||cell));}else{_fd1[row]=_fd1[row]||{};cell=(_fd1[row][col]=(_fd1[row][col]||cell));}cell.features=cell.features||[];cell.features.push(_fce);this._addFeatureIIf(oid,_fce);this._incRefCount(oid);}},suspend:function(){if(!this._init){return;}this._disableConnectors();},resume:function(){if(!this._init){return;}this._enableConnectors();this._zoomHandler();},refresh:function(){this._zoomHandler();},_initialize:function(){var map=this.map,_fd3=this.featureLayer;var _fd4=_fd3._srInfo;this._gridLayer=new esri.layers._GridLayout(new esri.geometry.Point(_fd4?_fd4.valid[0]:map.extent.xmin,map.extent.ymax,map.spatialReference),{width:_fd3._tileWidth,height:_fd3._tileHeight},{width:map.width,height:map.height},_fd4);this._ioQueue=[];if(!_fd3.suspended){this._zoomHandler();this._enableConnectors();}},_enableConnectors:function(){var map=this.map;this._zoomConnect=dojo.connect(map,"onZoomEnd",this,this._zoomHandler);this._panConnect=dojo.connect(map,"onPanEnd",this,this._panHandler);this._resizeConnect=dojo.connect(map,"onResize",this,this._panHandler);},_disableConnectors:function(){dojo.disconnect(this._zoomConnect);dojo.disconnect(this._panConnect);dojo.disconnect(this._resizeConnect);},_zoomHandler:function(){this._processIOQueue(true);var _fd5=this.featureLayer,map=this.map;if(_fd5.suspended){return;}_fd5._fireUpdateStart();this._clearIIf();var _fd6=_fd5._trackManager;if(_fd6){_fd6.clearTracks();}this._cellMap={};this._gridLayer.setResolution(map.extent);this._sendRequest();},_panHandler:function(){this.featureLayer._fireUpdateStart();this._sendRequest(this.featureLayer._resized&&arguments[0]);},_getRequestId:function(_fd7,cell){var id="_"+_fd7.name+_fd7.layerId+_fd7._ulid+"_"+cell.resolution+"_"+(cell.latticeID||(cell.row+"_"+cell.col));return id.replace(/[^a-zA-Z0-9\_]+/g,"_");},_sendRequest:function(_fd8){this._exceeds=false;var _fd9=this.featureLayer,map=this.map,_fda=_fd8||map.extent,_fdb=this._gridLayer.getCellsInExtent(_fda,_fd9.latticeTiling),_fdc=_fdb.cells;if(!_fd9.isEditable()){var _fdd=this._cellMap;_fdc=dojo.filter(_fdc,function(cell){if(cell.lattice){if(_fdd[cell.latticeID]){return false;}}else{if(_fdd[cell.row]&&_fdd[cell.row][cell.col]){return false;}}return true;});}var _fde=_fd9._getOutFields(),_fdf=_fd9.getDefinitionExpression(),time=_fd9._getOffsettedTE(_fd9._mapTimeExtent),_fe0=_fd9._usePatch,_fe1=this._ioQueue,i,self=this,func=this._drawFeatures,cell,_fe2,_fe3;this._pending=this._pending||0;for(i=0;i<_fdc.length;i++){cell=_fdc[i];_fe2=new esri.tasks.Query();_fe2.geometry=cell.extent||cell.lattice;_fe2.outFields=_fde;_fe2.where=_fdf;if(_fd9.latticeTiling&&cell.extent){_fe2.spatialRelationship=esri.tasks.Query.SPATIAL_REL_CONTAINS;}_fe2.returnGeometry=true;_fe2.timeExtent=time;_fe2.maxAllowableOffset=_fd9._maxOffset;if(_fd9._ts){_fe2._ts=(new Date()).getTime();}_fe3=null;if(_fe0){_fe3=this._getRequestId(_fd9,cell);if(this._isPending(_fe3)){continue;}}this._pending++;_fe1.push(_fd9._task.execute(_fe2,function(){var _fe4=cell;return function(_fe5){func.apply(self,[_fe5,_fe4]);};}.call(this),this._queryErrorHandler,_fe3));}this._removeOldCells(_fda);this._endCheck();},_drawFeatures:function(_fe6,cell){this._exceeds=this._exceeds||_fe6.exceededTransferLimit;this._finalizeIO();var _fe7=this.featureLayer,map=this.map,_fe8=map.extent,_fe9=cell.extent,row=cell.row,col=cell.col,_fea=_fe7.objectIdField,_feb=_fe6.features,_fec=this._gridLayer,_fed=this._cellMap,i,len,_fee=cell.latticeID,_fef=_fee?_fed[_fee]:(_fed[row]&&_fed[row][col]);if((cell.resolution!=_fec._resolution)||(_fee?(_fee!==_fec.getLatticeID(_fe8)):(!_fec.intersects(_fe9,_fe8)))){if(_fef){this._removeCell(row,col,_fee);}}else{if(_fef){this._updateCell(_fef,_feb);}else{cell.features=_feb;if(_fee){_fed[_fee]=cell;}else{_fed[row]=_fed[row]||{};_fed[row][col]=cell;}len=_feb.length;for(i=0;i<len;i++){var _ff0=_feb[i];var oid=_ff0.attributes[_fea];this._addFeatureIIf(oid,_ff0);this._incRefCount(oid);}}}this._endCheck();},_queryErrorHandler:function(err){this._finalizeIO();this.featureLayer._errorHandler(err);this._endCheck(true);},_finalizeIO:function(){this._purgeRequests();this._pending--;},_endCheck:function(_ff1){if(this._pending===0){this._processIOQueue();var _ff2=this.featureLayer,_ff3=_ff2._trackManager;if(_ff3){_ff3.clearTracks();_ff3.addFeatures(_ff2.graphics);if(_ff2._ager){dojo.forEach(_ff2.graphics,function(_ff4){if(_ff4._shape){_ff2._repaint(_ff4);}});}_ff3.moveLatestToFront();_ff3.drawTracks();}this.featureLayer._fireUpdateEnd(_ff1&&new Error("FeatureLayer: "+esri.bundle.layers.FeatureLayer.updateError),this._exceeds?{queryLimitExceeded:true}:null);if(this._exceeds){_ff2.onQueryLimitExceeded();}}},_processIOQueue:function(_ff5){this._ioQueue=dojo.filter(this._ioQueue,function(dfd){var keep=dfd.fired>-1?false:true;return keep;});if(_ff5){dojo.forEach(this._ioQueue,this._cancelPendingRequest);}},_removeOldCells:function(_ff6){var _ff7=this._cellMap,_ff8=this._gridLayer,_ff9,_ffa;for(_ff9 in _ff7){if(_ff7[_ff9]){var row=_ff7[_ff9],_ffb=row.latticeID,_ffc=0,_ffd=0;if(_ffb){_ffc++;if(_ffb!==_ff8.getLatticeID(_ff6)){this._removeCell(null,null,_ffb);_ffd++;}}else{for(_ffa in row){if(row[_ffa]){_ffc++;var _ffe=row[_ffa].extent;if(!_ff8.intersects(_ffe,_ff6)){this._removeCell(_ff9,_ffa);_ffd++;}}}}if(_ffd===_ffc){delete _ff7[_ff9];}}}},_updateCell:function(cell,_fff){var layer=this.featureLayer,_1000=layer.objectIdField,_1001=layer._selectedFeatures,i,len=_fff.length;cell.features=cell.features||[];for(i=0;i<len;i++){var _1002=_fff[i];var oid=_1002.attributes[_1000];var found=this._addFeatureIIf(oid,_1002);if(found===_1002){this._incRefCount(oid);cell.features.push(found);}else{if(!(oid in _1001)){found.setGeometry(_1002.geometry);found.setAttributes(_1002.attributes);}}}},_removeCell:function(row,col,_1003){var _1004=this._cellMap,layer=this.featureLayer,_1005=layer.objectIdField;var cell=_1003?_1004[_1003]:(_1004[row]&&_1004[row][col]);if(cell){if(_1003){delete _1004[_1003];}else{delete _1004[row][col];}var _1006=cell.features,i;for(i=0;i<_1006.length;i++){var _1007=_1006[i];var oid=_1007.attributes[_1005];this._decRefCount(oid);if(oid in layer._selectedFeatures){continue;}this._removeFeatureIIf(oid);}}}});dojo.declare("esri.layers._GridLayout",null,{constructor:function(_1008,_1009,_100a,_100b){this.origin=_1008;this.cellWidth=_1009.width;this.cellHeight=_1009.height;this.mapWidth=_100a.width;this.mapHeight=_100a.height;this.srInfo=_100b;},setResolution:function(_100c){this._resolution=(_100c.xmax-_100c.xmin)/this.mapWidth;if(this.srInfo){var _100d=Math.round((2*this.srInfo.valid[1])/this._resolution),_100e=Math.round(_100d/this.cellWidth);this._frameStats=[_100e,0,_100e-1];}},getCellCoordinates:function(point){var res=this._resolution,_100f=this.origin;return {row:Math.floor((_100f.y-point.y)/(this.cellHeight*res)),col:Math.floor((point.x-_100f.x)/(this.cellWidth*res))};},normalize:function(col){var _1010=this._frameStats;if(_1010){var _1011=_1010[0],m180=_1010[1],p180=_1010[2];if(col<m180){col=col%_1011;col=col<m180?col+_1011:col;}else{if(col>p180){col=col%_1011;}}}return col;},intersects:function(_1012,_1013){var _1014=this.srInfo;if(_1014){return dojo.some(_1013._getParts(_1014),function(_1015){return _1012.intersects(_1015.extent);});}else{return _1012.intersects(_1013);}},getCellExtent:function(row,col){var res=this._resolution,_1016=this.origin,_1017=this.cellWidth,_1018=this.cellHeight;return new esri.geometry.Extent((col*_1017*res)+_1016.x,_1016.y-((row+1)*_1018*res),((col+1)*_1017*res)+_1016.x,_1016.y-(row*_1018*res),new esri.SpatialReference(_1016.spatialReference.toJson()));},getLatticeID:function(_1019){var _101a=this.getCellCoordinates({x:_1019.xmin,y:_1019.ymax}),_101b=this.getCellCoordinates({x:_1019.xmax,y:_1019.ymin}),_101c=_101a.row,_101d=_101b.row,_101e=this.normalize(_101a.col),_101f=this.normalize(_101b.col);return _101c+"_"+_101d+"_"+_101e+"_"+_101f;},sorter:function(a,b){return (a<b)?-1:1;},getCellsInExtent:function(_1020,_1021){var _1022=this.getCellCoordinates({x:_1020.xmin,y:_1020.ymax}),_1023=this.getCellCoordinates({x:_1020.xmax,y:_1020.ymin}),_1024=_1022.row,_1025=_1023.row,_1026=_1022.col,_1027=_1023.col,cells=[],i,j,nj,_1028=[],_1029=[],len,xmin,xmax,ymin,ymax,paths=[],_102a,_102b;for(i=_1024;i<=_1025;i++){for(j=_1026;j<=_1027;j++){nj=this.normalize(j);_1020=this.getCellExtent(i,nj);cells.push({row:i,col:nj,extent:_1020,resolution:this._resolution});if(_1021){_1028.push(_1020.xmin,_1020.xmax);_1029.push(_1020.ymin,_1020.ymax);}}}_1026=this.normalize(_1026);_1027=this.normalize(_1027);_1028.sort(this.sorter);_1029.sort(this.sorter);len=_1028.length;for(i=len-1;i>=0;i--){if(i<(len-1)){if(_1028[i]===_1028[i+1]){_1028.splice(i,1);}}}len=_1029.length;for(i=len-1;i>=0;i--){if(i<(len-1)){if(_1029[i]===_1029[i+1]){_1029.splice(i,1);}}}if(_1028.length&&_1029.length){xmin=_1028[0];xmax=_1028[_1028.length-1];ymin=_1029[0];ymax=_1029[_1029.length-1];len=_1028.length;for(i=0;i<len;i++){paths.push([[_1028[i],ymax],[_1028[i],ymin]]);}len=_1029.length;for(i=0;i<len;i++){paths.push([[xmin,_1029[i]],[xmax,_1029[i]]]);}_102a=new esri.geometry.Polyline({paths:paths,spatialReference:this.origin.spatialReference.toJson()});_102b=_1024+"_"+_1025+"_"+_1026+"_"+_1027;cells.push({latticeID:_102b,lattice:_102a,resolution:this._resolution});}return {minRow:_1024,maxRow:_1025,minCol:_1026,maxCol:_1027,cells:cells};}});dojo.declare("esri.layers._TrackManager",null,{constructor:function(layer){this.layer=layer;this.trackMap={};},initialize:function(map){this.map=map;var layer=this.layer,_102c=layer.renderer.trackRenderer;if(_102c&&(layer.geometryType==="esriGeometryPoint")){var _102d=(this.container=new esri.layers._GraphicsLayer({id:layer.id+"_tracks",_child:true}));_102d.loaded=true;_102d.onLoad(_102d);_102d._setMap(map,layer._div);_102d.setRenderer(_102c);}},addFeatures:function(_102e){var tkid,_102f=this.trackMap,layer=this.layer,_1030=layer._trackIdField;dojo.forEach(_102e,function(_1031){var _1032=_1031.attributes;tkid=_1032[_1030];var ary=(_102f[tkid]=(_102f[tkid]||[]));ary.push(_1031);});var _1033=layer._startTimeField,_1034=layer.objectIdField;var _1035=function(a,b){var time1=a.attributes[_1033],time2=b.attributes[_1033];if(time1===time2){return (a.attributes[_1034]<b.attributes[_1034])?-1:1;}else{return (time1<time2)?-1:1;}};for(tkid in _102f){_102f[tkid].sort(_1035);}},drawTracks:function(){var _1036=this.container;if(!_1036){return;}var _1037=this.trackMap,sr=this.map.spatialReference,tkid,ary,path,i,point,_1038=this.layer._trackIdField,attrs;for(tkid in _1037){ary=_1037[tkid];path=[];for(i=ary.length-1;i>=0;i--){point=ary[i].geometry;if(point){path.push([point.x,point.y]);}}attrs={};attrs[_1038]=tkid;if(path.length>0){_1036.add(new esri.Graphic(new esri.geometry.Polyline({paths:[path],spatialReference:sr}),null,attrs));}}},moveLatestToFront:function(){dojo.forEach(this.getLatestObservations(),function(_1039){var shape=_1039._shape;shape&&shape._moveToFront();this._repaint(_1039,null,true);},this.layer);},getLatestObservations:function(){var _103a=[];if(!this.layer.renderer.latestObservationRenderer){return _103a;}var _103b=this.trackMap,tkid;for(tkid in _103b){var ary=_103b[tkid];_103a.push(ary[ary.length-1]);}return _103a;},clearTracks:function(){var _103c=this.getLatestObservations();this.trackMap={};var _103d=this.container;if(_103d){_103d.clear();}dojo.forEach(_103c,function(_103e){this._repaint(_103e,null,true);},this.layer);},isLatestObservation:function(_103f){var _1040=this.layer._trackIdField;var track=this.trackMap[_103f.attributes[_1040]];if(track){return (track[track.length-1]===_103f);}return false;},destroy:function(){var _1041=this.container;if(_1041){_1041.clear();_1041._unsetMap(this.map,this.layer._div);this.container=null;}this.map=null;this.layer=null;this.trackMap=null;}});});},"dijit/layout/_LayoutWidget":function(){define("dijit/layout/_LayoutWidget",["dojo/_base/lang","../_Widget","../_Container","../_Contained","../Viewport","dojo/_base/declare","dojo/dom-class","dojo/dom-geometry","dojo/dom-style"],function(lang,_1042,_1043,_1044,_1045,_1046,_1047,_1048,_1049){return _1046("dijit.layout._LayoutWidget",[_1042,_1043,_1044],{baseClass:"dijitLayoutContainer",isLayoutContainer:true,buildRendering:function(){this.inherited(arguments);_1047.add(this.domNode,"dijitContainer");},startup:function(){if(this._started){return;}this.inherited(arguments);var _104a=this.getParent&&this.getParent();if(!(_104a&&_104a.isLayoutContainer)){this.resize();this.own(_1045.on("resize",lang.hitch(this,"resize")));}},resize:function(_104b,_104c){var node=this.domNode;if(_104b){_1048.setMarginBox(node,_104b);}var mb=_104c||{};lang.mixin(mb,_104b||{});if(!("h" in mb)||!("w" in mb)){mb=lang.mixin(_1048.getMarginBox(node),mb);}var cs=_1049.getComputedStyle(node);var me=_1048.getMarginExtents(node,cs);var be=_1048.getBorderExtents(node,cs);var bb=(this._borderBox={w:mb.w-(me.w+be.w),h:mb.h-(me.h+be.h)});var pe=_1048.getPadExtents(node,cs);this._contentBox={l:_1049.toPixelValue(node,cs.paddingLeft),t:_1049.toPixelValue(node,cs.paddingTop),w:bb.w-pe.w,h:bb.h-pe.h};this.layout();},layout:function(){},_setupChild:function(child){var cls=this.baseClass+"-child "+(child.baseClass?this.baseClass+"-"+child.baseClass:"");_1047.add(child.domNode,cls);},addChild:function(child,_104d){this.inherited(arguments);if(this._started){this._setupChild(child);}},removeChild:function(child){var cls=this.baseClass+"-child"+(child.baseClass?" "+this.baseClass+"-"+child.baseClass:"");_1047.remove(child.domNode,cls);this.inherited(arguments);}});});},"dojo/colors":function(){define(["./_base/kernel","./_base/lang","./_base/Color","./_base/array"],function(dojo,lang,Color,_104e){var _104f={};lang.setObject("dojo.colors",_104f);var _1050=function(m1,m2,h){if(h<0){++h;}if(h>1){--h;}var h6=6*h;if(h6<1){return m1+(m2-m1)*h6;}if(2*h<1){return m2;}if(3*h<2){return m1+(m2-m1)*(2/3-h)*6;}return m1;};dojo.colorFromRgb=Color.fromRgb=function(color,obj){var m=color.toLowerCase().match(/^(rgba?|hsla?)\(([\s\.\-,%0-9]+)\)/);if(m){var c=m[2].split(/\s*,\s*/),l=c.length,t=m[1],a;if((t=="rgb"&&l==3)||(t=="rgba"&&l==4)){var r=c[0];if(r.charAt(r.length-1)=="%"){a=_104e.map(c,function(x){return parseFloat(x)*2.56;});if(l==4){a[3]=c[3];}return Color.fromArray(a,obj);}return Color.fromArray(c,obj);}if((t=="hsl"&&l==3)||(t=="hsla"&&l==4)){var H=((parseFloat(c[0])%360)+360)%360/360,S=parseFloat(c[1])/100,L=parseFloat(c[2])/100,m2=L<=0.5?L*(S+1):L+S-L*S,m1=2*L-m2;a=[_1050(m1,m2,H+1/3)*256,_1050(m1,m2,H)*256,_1050(m1,m2,H-1/3)*256,1];if(l==4){a[3]=c[3];}return Color.fromArray(a,obj);}}return null;};var _1051=function(c,low,high){c=Number(c);return isNaN(c)?high:c<low?low:c>high?high:c;};Color.prototype.sanitize=function(){var t=this;t.r=Math.round(_1051(t.r,0,255));t.g=Math.round(_1051(t.g,0,255));t.b=Math.round(_1051(t.b,0,255));t.a=_1051(t.a,0,1);return this;};_104f.makeGrey=Color.makeGrey=function(g,a){return Color.fromArray([g,g,g,a]);};lang.mixin(Color.named,{"aliceblue":[240,248,255],"antiquewhite":[250,235,215],"aquamarine":[127,255,212],"azure":[240,255,255],"beige":[245,245,220],"bisque":[255,228,196],"blanchedalmond":[255,235,205],"blueviolet":[138,43,226],"brown":[165,42,42],"burlywood":[222,184,135],"cadetblue":[95,158,160],"chartreuse":[127,255,0],"chocolate":[210,105,30],"coral":[255,127,80],"cornflowerblue":[100,149,237],"cornsilk":[255,248,220],"crimson":[220,20,60],"cyan":[0,255,255],"darkblue":[0,0,139],"darkcyan":[0,139,139],"darkgoldenrod":[184,134,11],"darkgray":[169,169,169],"darkgreen":[0,100,0],"darkgrey":[169,169,169],"darkkhaki":[189,183,107],"darkmagenta":[139,0,139],"darkolivegreen":[85,107,47],"darkorange":[255,140,0],"darkorchid":[153,50,204],"darkred":[139,0,0],"darksalmon":[233,150,122],"darkseagreen":[143,188,143],"darkslateblue":[72,61,139],"darkslategray":[47,79,79],"darkslategrey":[47,79,79],"darkturquoise":[0,206,209],"darkviolet":[148,0,211],"deeppink":[255,20,147],"deepskyblue":[0,191,255],"dimgray":[105,105,105],"dimgrey":[105,105,105],"dodgerblue":[30,144,255],"firebrick":[178,34,34],"floralwhite":[255,250,240],"forestgreen":[34,139,34],"gainsboro":[220,220,220],"ghostwhite":[248,248,255],"gold":[255,215,0],"goldenrod":[218,165,32],"greenyellow":[173,255,47],"grey":[128,128,128],"honeydew":[240,255,240],"hotpink":[255,105,180],"indianred":[205,92,92],"indigo":[75,0,130],"ivory":[255,255,240],"khaki":[240,230,140],"lavender":[230,230,250],"lavenderblush":[255,240,245],"lawngreen":[124,252,0],"lemonchiffon":[255,250,205],"lightblue":[173,216,230],"lightcoral":[240,128,128],"lightcyan":[224,255,255],"lightgoldenrodyellow":[250,250,210],"lightgray":[211,211,211],"lightgreen":[144,238,144],"lightgrey":[211,211,211],"lightpink":[255,182,193],"lightsalmon":[255,160,122],"lightseagreen":[32,178,170],"lightskyblue":[135,206,250],"lightslategray":[119,136,153],"lightslategrey":[119,136,153],"lightsteelblue":[176,196,222],"lightyellow":[255,255,224],"limegreen":[50,205,50],"linen":[250,240,230],"magenta":[255,0,255],"mediumaquamarine":[102,205,170],"mediumblue":[0,0,205],"mediumorchid":[186,85,211],"mediumpurple":[147,112,219],"mediumseagreen":[60,179,113],"mediumslateblue":[123,104,238],"mediumspringgreen":[0,250,154],"mediumturquoise":[72,209,204],"mediumvioletred":[199,21,133],"midnightblue":[25,25,112],"mintcream":[245,255,250],"mistyrose":[255,228,225],"moccasin":[255,228,181],"navajowhite":[255,222,173],"oldlace":[253,245,230],"olivedrab":[107,142,35],"orange":[255,165,0],"orangered":[255,69,0],"orchid":[218,112,214],"palegoldenrod":[238,232,170],"palegreen":[152,251,152],"paleturquoise":[175,238,238],"palevioletred":[219,112,147],"papayawhip":[255,239,213],"peachpuff":[255,218,185],"peru":[205,133,63],"pink":[255,192,203],"plum":[221,160,221],"powderblue":[176,224,230],"rosybrown":[188,143,143],"royalblue":[65,105,225],"saddlebrown":[139,69,19],"salmon":[250,128,114],"sandybrown":[244,164,96],"seagreen":[46,139,87],"seashell":[255,245,238],"sienna":[160,82,45],"skyblue":[135,206,235],"slateblue":[106,90,205],"slategray":[112,128,144],"slategrey":[112,128,144],"snow":[255,250,250],"springgreen":[0,255,127],"steelblue":[70,130,180],"tan":[210,180,140],"thistle":[216,191,216],"tomato":[255,99,71],"turquoise":[64,224,208],"violet":[238,130,238],"wheat":[245,222,179],"whitesmoke":[245,245,245],"yellowgreen":[154,205,50]});return Color;});},"dojox/grid/cells/_base":function(){define("dojox/grid/cells/_base",["dojo/_base/kernel","dojo/_base/declare","dojo/_base/lang","dojo/_base/event","dojo/_base/connect","dojo/_base/array","dojo/_base/sniff","dojo/dom","dojo/dom-attr","dojo/dom-construct","dijit/_Widget","../util"],function(dojo,_1052,lang,event,_1053,array,has,dom,_1054,_1055,_1056,util){var _1057=_1052("dojox.grid._DeferredTextWidget",_1056,{deferred:null,_destroyOnRemove:true,postCreate:function(){if(this.deferred){this.deferred.addBoth(lang.hitch(this,function(text){if(this.domNode){this.domNode.innerHTML=text;}}));}}});var _1058=function(_1059){try{util.fire(_1059,"focus");util.fire(_1059,"select");}catch(e){}};var _105a=function(){setTimeout(lang.hitch.apply(dojo,arguments),0);};var _105b=_1052("dojox.grid.cells._Base",null,{styles:"",classes:"",editable:false,alwaysEditing:false,formatter:null,defaultValue:"...",value:null,hidden:false,noresize:false,draggable:true,_valueProp:"value",_formatPending:false,constructor:function(_105c){this._props=_105c||{};lang.mixin(this,_105c);if(this.draggable===undefined){this.draggable=true;}},_defaultFormat:function(_105d,_105e){var s=this.grid.formatterScope||this;var f=this.formatter;if(f&&s&&typeof f=="string"){f=this.formatter=s[f];}var v=(_105d!=this.defaultValue&&f)?f.apply(s,_105e):_105d;if(typeof v=="undefined"){return this.defaultValue;}if(v&&v.addBoth){v=new _1057({deferred:v},_1055.create("span",{innerHTML:this.defaultValue}));}if(v&&v.declaredClass&&v.startup){return "<div class='dojoxGridStubNode' linkWidget='"+v.id+"' cellIdx='"+this.index+"'>"+this.defaultValue+"</div>";}return v;},format:function(_105f,_1060){var f,i=this.grid.edit.info,d=this.get?this.get(_105f,_1060):(this.value||this.defaultValue);d=(d&&d.replace&&this.grid.escapeHTMLInData)?d.replace(/&(?![a-z0-9]{1,8}\;)/ig,"&amp;").replace(/</g,"&lt;"):d;if(this.editable&&(this.alwaysEditing||(i.rowIndex==_105f&&i.cell==this))){return this.formatEditing(d,_105f);}else{return this._defaultFormat(d,[d,_105f,this]);}},formatEditing:function(_1061,_1062){},getNode:function(_1063){return this.view.getCellNode(_1063,this.index);},getHeaderNode:function(){return this.view.getHeaderCellNode(this.index);},getEditNode:function(_1064){return (this.getNode(_1064)||0).firstChild||0;},canResize:function(){var uw=this.unitWidth;return uw&&(uw!=="auto");},isFlex:function(){var uw=this.unitWidth;return uw&&lang.isString(uw)&&(uw=="auto"||uw.slice(-1)=="%");},applyEdit:function(_1065,_1066){if(this.getNode(_1066)){this.grid.edit.applyCellEdit(_1065,this,_1066);}},cancelEdit:function(_1067){this.grid.doCancelEdit(_1067);},_onEditBlur:function(_1068){if(this.grid.edit.isEditCell(_1068,this.index)){this.grid.edit.apply();}},registerOnBlur:function(_1069,_106a){if(this.commitOnBlur){_1053.connect(_1069,"onblur",function(e){setTimeout(lang.hitch(this,"_onEditBlur",_106a),250);});}},needFormatNode:function(_106b,_106c){this._formatPending=true;_105a(this,"_formatNode",_106b,_106c);},cancelFormatNode:function(){this._formatPending=false;},_formatNode:function(_106d,_106e){if(this._formatPending){this._formatPending=false;if(!has("ie")){dom.setSelectable(this.grid.domNode,true);}this.formatNode(this.getEditNode(_106e),_106d,_106e);}},formatNode:function(_106f,_1070,_1071){if(has("ie")){_105a(this,"focus",_1071,_106f);}else{this.focus(_1071,_106f);}},dispatchEvent:function(m,e){if(m in this){return this[m](e);}},getValue:function(_1072){return this.getEditNode(_1072)[this._valueProp];},setValue:function(_1073,_1074){var n=this.getEditNode(_1073);if(n){n[this._valueProp]=_1074;}},focus:function(_1075,_1076){_1058(_1076||this.getEditNode(_1075));},save:function(_1077){this.value=this.value||this.getValue(_1077);},restore:function(_1078){this.setValue(_1078,this.value);},_finish:function(_1079){dom.setSelectable(this.grid.domNode,false);this.cancelFormatNode();},apply:function(_107a){this.applyEdit(this.getValue(_107a),_107a);this._finish(_107a);},cancel:function(_107b){this.cancelEdit(_107b);this._finish(_107b);}});_105b.markupFactory=function(node,_107c){var _107d=lang.trim(_1054.get(node,"formatter")||"");if(_107d){_107c.formatter=lang.getObject(_107d)||_107d;}var get=lang.trim(_1054.get(node,"get")||"");if(get){_107c.get=lang.getObject(get);}var _107e=function(attr,cell,_107f){var value=lang.trim(_1054.get(node,attr)||"");if(value){cell[_107f||attr]=!(value.toLowerCase()=="false");}};_107e("sortDesc",_107c);_107e("editable",_107c);_107e("alwaysEditing",_107c);_107e("noresize",_107c);_107e("draggable",_107c);var value=lang.trim(_1054.get(node,"loadingText")||_1054.get(node,"defaultValue")||"");if(value){_107c.defaultValue=value;}var _1080=function(attr,cell,_1081){var value=lang.trim(_1054.get(node,attr)||"")||undefined;if(value){cell[_1081||attr]=value;}};_1080("styles",_107c);_1080("headerStyles",_107c);_1080("cellStyles",_107c);_1080("classes",_107c);_1080("headerClasses",_107c);_1080("cellClasses",_107c);};var Cell=_1052("dojox.grid.cells.Cell",_105b,{constructor:function(){this.keyFilter=this.keyFilter;},keyFilter:null,formatEditing:function(_1082,_1083){this.needFormatNode(_1082,_1083);return "<input class=\"dojoxGridInput\" type=\"text\" value=\""+_1082+"\">";},formatNode:function(_1084,_1085,_1086){this.inherited(arguments);this.registerOnBlur(_1084,_1086);},doKey:function(e){if(this.keyFilter){var key=String.fromCharCode(e.charCode);if(key.search(this.keyFilter)==-1){event.stop(e);}}},_finish:function(_1087){this.inherited(arguments);var n=this.getEditNode(_1087);try{util.fire(n,"blur");}catch(e){}}});Cell.markupFactory=function(node,_1088){_105b.markupFactory(node,_1088);var _1089=lang.trim(_1054.get(node,"keyFilter")||"");if(_1089){_1088.keyFilter=new RegExp(_1089);}};var _108a=_1052("dojox.grid.cells.RowIndex",Cell,{name:"Row",postscript:function(){this.editable=false;},get:function(_108b){return _108b+1;}});_108a.markupFactory=function(node,_108c){Cell.markupFactory(node,_108c);};var _108d=_1052("dojox.grid.cells.Select",Cell,{options:null,values:null,returnIndex:-1,constructor:function(_108e){this.values=this.values||this.options;},formatEditing:function(_108f,_1090){this.needFormatNode(_108f,_1090);var h=["<select class=\"dojoxGridSelect\">"];for(var i=0,o,v;((o=this.options[i])!==undefined)&&((v=this.values[i])!==undefined);i++){v=v.replace?v.replace(/&/g,"&amp;").replace(/</g,"&lt;"):v;o=o.replace?o.replace(/&/g,"&amp;").replace(/</g,"&lt;"):o;h.push("<option",(_108f==v?" selected":"")," value=\""+v+"\"",">",o,"</option>");}h.push("</select>");return h.join("");},_defaultFormat:function(_1091,_1092){var v=this.inherited(arguments);if(!this.formatter&&this.values&&this.options){var i=array.indexOf(this.values,v);if(i>=0){v=this.options[i];}}return v;},getValue:function(_1093){var n=this.getEditNode(_1093);if(n){var i=n.selectedIndex,o=n.options[i];return this.returnIndex>-1?i:o.value||o.innerHTML;}}});_108d.markupFactory=function(node,cell){Cell.markupFactory(node,cell);var _1094=lang.trim(_1054.get(node,"options")||"");if(_1094){var o=_1094.split(",");if(o[0]!=_1094){cell.options=o;}}var _1095=lang.trim(_1054.get(node,"values")||"");if(_1095){var v=_1095.split(",");if(v[0]!=_1095){cell.values=v;}}};var _1096=_1052("dojox.grid.cells.AlwaysEdit",Cell,{alwaysEditing:true,_formatNode:function(_1097,_1098){this.formatNode(this.getEditNode(_1098),_1097,_1098);},applyStaticValue:function(_1099){var e=this.grid.edit;e.applyCellEdit(this.getValue(_1099),this,_1099);e.start(this,_1099,true);}});_1096.markupFactory=function(node,cell){Cell.markupFactory(node,cell);};var Bool=_1052("dojox.grid.cells.Bool",_1096,{_valueProp:"checked",formatEditing:function(_109a,_109b){return "<input class=\"dojoxGridInput\" type=\"checkbox\""+(_109a?" checked=\"checked\"":"")+" style=\"width: auto\" />";},doclick:function(e){if(e.target.tagName=="INPUT"){this.applyStaticValue(e.rowIndex);}}});Bool.markupFactory=function(node,cell){_1096.markupFactory(node,cell);};return _105b;});},"dojox/charting/plot2d/Spider":function(){define("dojox/charting/plot2d/Spider",["dojo/_base/lang","dojo/_base/declare","dojo/_base/connect","dojo/_base/array","dojo/dom-geometry","dojo/_base/fx","dojo/fx","dojo/_base/sniff","./Base","./_PlotEvents","dojo/_base/Color","dojox/color/_base","./common","../axis2d/common","../scaler/primitive","dojox/gfx","dojox/gfx/matrix","dojox/gfx/fx","dojox/lang/functional","dojox/lang/utils","dojo/fx/easing"],function(lang,_109c,hub,arr,_109d,_109e,_109f,has,Base,_10a0,Color,_10a1,dc,da,_10a2,g,m,gfxfx,df,du,_10a3){var _10a4=0.2;var _10a5=_109c("dojox.charting.plot2d.Spider",[Base,_10a0],{defaultParams:{labels:true,ticks:false,fixed:true,precision:1,labelOffset:-10,labelStyle:"default",htmlLabels:true,startAngle:-90,divisions:3,axisColor:"",axisWidth:0,spiderColor:"",spiderWidth:0,seriesWidth:0,seriesFillAlpha:0.2,spiderOrigin:0.16,markerSize:3,spiderType:"polygon",animationType:_10a3.backOut,axisTickFont:"",axisTickFontColor:"",axisFont:"",axisFontColor:""},optionalParams:{radius:0,font:"",fontColor:""},constructor:function(chart,_10a6){this.opt=lang.clone(this.defaultParams);du.updateWithObject(this.opt,_10a6);du.updateWithPattern(this.opt,_10a6,this.optionalParams);this.dyn=[];this.datas={};this.labelKey=[];this.oldSeriePoints={};this.animations={};},clear:function(){this.inherited(arguments);this.dyn=[];this.axes=[];this.datas={};this.labelKey=[];this.oldSeriePoints={};this.animations={};return this;},setAxis:function(axis){if(axis){if(axis.opt.min!=undefined){this.datas[axis.name].min=axis.opt.min;}if(axis.opt.max!=undefined){this.datas[axis.name].max=axis.opt.max;}}return this;},addSeries:function(run){var _10a7=false;this.series.push(run);for(var key in run.data){var val=run.data[key],data=this.datas[key];if(data){data.vlist.push(val);data.min=Math.min(data.min,val);data.max=Math.max(data.max,val);}else{var _10a8="__"+key;this.axes.push(_10a8);this[_10a8]=key;this.datas[key]={min:val,max:val,vlist:[val]};}}if(this.labelKey.length<=0){for(var key in run.data){this.labelKey.push(key);}}return this;},getSeriesStats:function(){return dc.collectSimpleStats(this.series);},render:function(dim,_10a9){if(!this.dirty){return this;}this.dirty=false;this.cleanGroup();var s=this.group,t=this.chart.theme;this.resetEvents();if(!this.series||!this.series.length){return this;}var o=this.opt,ta=t.axis,rx=(dim.width-_10a9.l-_10a9.r)/2,ry=(dim.height-_10a9.t-_10a9.b)/2,r=Math.min(rx,ry),_10aa=o.font||(ta.majorTick&&ta.majorTick.font)||(ta.tick&&ta.tick.font)||"normal normal normal 7pt Tahoma",_10ab=o.axisFont||(ta.tick&&ta.tick.titleFont)||"normal normal normal 11pt Tahoma",_10ac=o.axisTickFontColor||(ta.majorTick&&ta.majorTick.fontColor)||(ta.tick&&ta.tick.fontColor)||"silver",_10ad=o.axisFontColor||(ta.tick&&ta.tick.titleFontColor)||"black",_10ae=o.axisColor||(ta.tick&&ta.tick.axisColor)||"silver",_10af=o.spiderColor||(ta.tick&&ta.tick.spiderColor)||"silver",_10b0=o.axisWidth||(ta.stroke&&ta.stroke.width)||2,_10b1=o.spiderWidth||(ta.stroke&&ta.stroke.width)||2,_10b2=o.seriesWidth||(ta.stroke&&ta.stroke.width)||2,asize=g.normalizedLength(g.splitFontString(_10ab).size),_10b3=m._degToRad(o.startAngle),start=_10b3,step,_10b4,_10b5,_10b6,shift,_10b7,_10b8,_10b9,_10ba,_10bb,_10bc,ro=o.spiderOrigin,dv=o.divisions>=3?o.divisions:3,ms=o.markerSize,spt=o.spiderType,at=o.animationType,_10bd=o.labelOffset<-10?o.labelOffset:-10,_10be=0.2;if(o.labels){_10b6=arr.map(this.series,function(s){return s.name;},this);shift=df.foldl1(df.map(_10b6,function(label,i){var font=t.series.font;return g._base._getTextBox(label,{font:font}).w;},this),"Math.max(a, b)")/2;r=Math.min(rx-2*shift,ry-asize)+_10bd;_10b7=r-_10bd;}if("radius" in o){r=o.radius;_10b7=r-_10bd;}r/=(1+_10be);var _10bf={cx:_10a9.l+rx,cy:_10a9.t+ry,r:r};for(var i=this.series.length-1;i>=0;i--){var _10c0=this.series[i];if(!this.dirty&&!_10c0.dirty){t.skip();continue;}_10c0.cleanGroup();var run=_10c0.data;if(run!==null){var len=this._getObjectLength(run);if(!_10b8||_10b8.length<=0){_10b8=[],_10b9=[],_10bc=[];this._buildPoints(_10b8,len,_10bf,r,start,true);this._buildPoints(_10b9,len,_10bf,r*ro,start,true);this._buildPoints(_10bc,len,_10bf,_10b7,start);if(dv>2){_10ba=[],_10bb=[];for(var j=0;j<dv-2;j++){_10ba[j]=[];this._buildPoints(_10ba[j],len,_10bf,r*(ro+(1-ro)*(j+1)/(dv-1)),start,true);_10bb[j]=r*(ro+(1-ro)*(j+1)/(dv-1));}}}}}var _10c1=s.createGroup(),_10c2={color:_10ae,width:_10b0},_10c3={color:_10af,width:_10b1};for(var j=_10b8.length-1;j>=0;--j){var point=_10b8[j],st={x:point.x+(point.x-_10bf.cx)*_10be,y:point.y+(point.y-_10bf.cy)*_10be},nd={x:point.x+(point.x-_10bf.cx)*_10be/2,y:point.y+(point.y-_10bf.cy)*_10be/2};_10c1.createLine({x1:_10bf.cx,y1:_10bf.cy,x2:st.x,y2:st.y}).setStroke(_10c2);this._drawArrow(_10c1,st,nd,_10c2);}var _10c4=s.createGroup();for(var j=_10bc.length-1;j>=0;--j){var point=_10bc[j],_10c5=g._base._getTextBox(this.labelKey[j],{font:_10ab}).w||0,_10c6=this.opt.htmlLabels&&g.renderer!="vml"?"html":"gfx",elem=da.createText[_10c6](this.chart,_10c4,(!_109d.isBodyLtr()&&_10c6=="html")?(point.x+_10c5-dim.width):point.x,point.y,"middle",this.labelKey[j],_10ab,_10ad);if(this.opt.htmlLabels){this.htmlElements.push(elem);}}var _10c7=s.createGroup();if(spt=="polygon"){_10c7.createPolyline(_10b8).setStroke(_10c3);_10c7.createPolyline(_10b9).setStroke(_10c3);if(_10ba.length>0){for(var j=_10ba.length-1;j>=0;--j){_10c7.createPolyline(_10ba[j]).setStroke(_10c3);}}}else{var _10c8=this._getObjectLength(this.datas);_10c7.createCircle({cx:_10bf.cx,cy:_10bf.cy,r:r}).setStroke(_10c3);_10c7.createCircle({cx:_10bf.cx,cy:_10bf.cy,r:r*ro}).setStroke(_10c3);if(_10bb.length>0){for(var j=_10bb.length-1;j>=0;--j){_10c7.createCircle({cx:_10bf.cx,cy:_10bf.cy,r:_10bb[j]}).setStroke(_10c3);}}}var _10c9=s.createGroup(),len=this._getObjectLength(this.datas),k=0;for(var key in this.datas){var data=this.datas[key],min=data.min,max=data.max,_10ca=max-min,end=start+2*Math.PI*k/len;for(var i=0;i<dv;i++){var text=min+_10ca*i/(dv-1),point=this._getCoordinate(_10bf,r*(ro+(1-ro)*i/(dv-1)),end);text=this._getLabel(text);var _10c5=g._base._getTextBox(text,{font:_10aa}).w||0,_10c6=this.opt.htmlLabels&&g.renderer!="vml"?"html":"gfx";if(this.opt.htmlLabels){this.htmlElements.push(da.createText[_10c6](this.chart,_10c9,(!_109d.isBodyLtr()&&_10c6=="html")?(point.x+_10c5-dim.width):point.x,point.y,"start",text,_10aa,_10ac));}}k++;}this.chart.seriesShapes={};var _10cb=[];for(var i=this.series.length-1;i>=0;i--){var _10c0=this.series[i],run=_10c0.data;if(run!==null){var _10cc=[],k=0,_10cd=[];for(var key in run){var data=this.datas[key],min=data.min,max=data.max,_10ca=max-min,entry=run[key],end=start+2*Math.PI*k/len,point=this._getCoordinate(_10bf,r*(ro+(1-ro)*(entry-min)/_10ca),end);_10cc.push(point);_10cd.push({sname:_10c0.name,key:key,data:entry});k++;}_10cc[_10cc.length]=_10cc[0];_10cd[_10cd.length]=_10cd[0];var _10ce=this._getBoundary(_10cc),theme=t.next("spider",[o,_10c0]),ts=_10c0.group,f=g.normalizeColor(theme.series.fill),sk={color:theme.series.fill,width:_10b2};f.a=o.seriesFillAlpha;_10c0.dyn={fill:f,stroke:sk};var osps=this.oldSeriePoints[_10c0.name];var cs=this._createSeriesEntry(ts,(osps||_10b9),_10cc,f,sk,r,ro,ms,at);this.chart.seriesShapes[_10c0.name]=cs;this.oldSeriePoints[_10c0.name]=_10cc;var po={element:"spider_poly",index:i,id:"spider_poly_"+_10c0.name,run:_10c0,plot:this,shape:cs.poly,parent:ts,brect:_10ce,cx:_10bf.cx,cy:_10bf.cy,cr:r,f:f,s:s};this._connectEvents(po);var so={element:"spider_plot",index:i,id:"spider_plot_"+_10c0.name,run:_10c0,plot:this,shape:_10c0.group};this._connectEvents(so);arr.forEach(cs.circles,function(c,i){var shape=c.getShape(),co={element:"spider_circle",index:i,id:"spider_circle_"+_10c0.name+i,run:_10c0,plot:this,shape:c,parent:ts,tdata:_10cd[i],cx:_10cc[i].x,cy:_10cc[i].y,f:f,s:s};this._connectEvents(co);},this);}}return this;},_createSeriesEntry:function(ts,osps,sps,f,sk,r,ro,ms,at){var spoly=ts.createPolyline(osps).setFill(f).setStroke(sk),_10cf=[];for(var j=0;j<osps.length;j++){var point=osps[j],cr=ms;var _10d0=ts.createCircle({cx:point.x,cy:point.y,r:cr}).setFill(f).setStroke(sk);_10cf.push(_10d0);}var anims=arr.map(sps,function(np,j){var sp=osps[j],anim=new _109e.Animation({duration:1000,easing:at,curve:[sp.y,np.y]});var spl=spoly,sc=_10cf[j];hub.connect(anim,"onAnimate",function(y){var _10d1=spl.getShape();_10d1.points[j].y=y;spl.setShape(_10d1);var _10d2=sc.getShape();_10d2.cy=y;sc.setShape(_10d2);});return anim;});var _10d3=arr.map(sps,function(np,j){var sp=osps[j],anim=new _109e.Animation({duration:1000,easing:at,curve:[sp.x,np.x]});var spl=spoly,sc=_10cf[j];hub.connect(anim,"onAnimate",function(x){var _10d4=spl.getShape();_10d4.points[j].x=x;spl.setShape(_10d4);var _10d5=sc.getShape();_10d5.cx=x;sc.setShape(_10d5);});return anim;});var _10d6=_109f.combine(anims.concat(_10d3));_10d6.play();return {group:ts,poly:spoly,circles:_10cf};},plotEvent:function(o){var _10d7=o.id?o.id:"default",a;if(_10d7 in this.animations){a=this.animations[_10d7];a.anim&&a.anim.stop(true);}else{a=this.animations[_10d7]={};}if(o.element=="spider_poly"){if(!a.color){var color=o.shape.getFill();if(!color||!(color instanceof Color)){return;}a.color={start:color,end:_10d8(color)};}var start=a.color.start,end=a.color.end;if(o.type=="onmouseout"){var t=start;start=end;end=t;}a.anim=gfxfx.animateFill({shape:o.shape,duration:800,easing:_10a3.backOut,color:{start:start,end:end}});a.anim.play();}else{if(o.element=="spider_circle"){var init,scale,_10d9=1.5;if(o.type=="onmouseover"){init=m.identity;scale=_10d9;var _10da={type:"rect"};_10da.x=o.cx;_10da.y=o.cy;_10da.w=_10da.h=1;var lt=this.chart.getCoords();_10da.x+=lt.x;_10da.y+=lt.y;_10da.x=Math.round(_10da.x);_10da.y=Math.round(_10da.y);this.aroundRect=_10da;var _10db=["after-centered","before-centered"];dc.doIfLoaded("dijit/Tooltip",lang.hitch(this,function(_10dc){_10dc.show(o.tdata.sname+"<br/>"+o.tdata.key+"<br/>"+o.tdata.data,this.aroundRect,_10db);}));}else{init=m.scaleAt(_10d9,o.cx,o.cy);scale=1/_10d9;dc.doIfLoaded("dijit/Tooltip",lang.hitch(this,function(_10dd){this.aroundRect&&_10dd.hide(this.aroundRect);}));}var cs=o.shape.getShape(),init=m.scaleAt(_10d9,cs.cx,cs.cy),_10de={shape:o.shape,duration:200,easing:_10a3.backOut,transform:[{name:"scaleAt",start:[1,cs.cx,cs.cy],end:[scale,cs.cx,cs.cy]},init]};a.anim=gfxfx.animateTransform(_10de);a.anim.play();}else{if(o.element=="spider_plot"){if(o.type=="onmouseover"&&!has("ie")){o.shape.moveToFront();}}}}},_getBoundary:function(_10df){var xmax=_10df[0].x,xmin=_10df[0].x,ymax=_10df[0].y,ymin=_10df[0].y;for(var i=0;i<_10df.length;i++){var point=_10df[i];xmax=Math.max(point.x,xmax);ymax=Math.max(point.y,ymax);xmin=Math.min(point.x,xmin);ymin=Math.min(point.y,ymin);}return {x:xmin,y:ymin,width:xmax-xmin,height:ymax-ymin};},_drawArrow:function(s,start,end,_10e0){var len=Math.sqrt(Math.pow(end.x-start.x,2)+Math.pow(end.y-start.y,2)),sin=(end.y-start.y)/len,cos=(end.x-start.x)/len,_10e1={x:end.x+(len/3)*(-sin),y:end.y+(len/3)*cos},_10e2={x:end.x+(len/3)*sin,y:end.y+(len/3)*(-cos)};s.createPolyline([start,_10e1,_10e2]).setFill(_10e0.color).setStroke(_10e0);},_buildPoints:function(_10e3,count,_10e4,_10e5,angle,_10e6){for(var i=0;i<count;i++){var end=angle+2*Math.PI*i/count;_10e3.push(this._getCoordinate(_10e4,_10e5,end));}if(_10e6){_10e3.push(this._getCoordinate(_10e4,_10e5,angle+2*Math.PI));}},_getCoordinate:function(_10e7,_10e8,angle){return {x:_10e7.cx+_10e8*Math.cos(angle),y:_10e7.cy+_10e8*Math.sin(angle)};},_getObjectLength:function(obj){var count=0;if(lang.isObject(obj)){for(var key in obj){count++;}}return count;},_getLabel:function(_10e9){return dc.getLabel(_10e9,this.opt.fixed,this.opt.precision);}});function _10d8(color){var a=new _10a1.Color(color),x=a.toHsl();if(x.s==0){x.l=x.l<50?100:0;}else{x.s=100;if(x.l<50){x.l=75;}else{if(x.l>75){x.l=50;}else{x.l=x.l-50>75-x.l?50:75;}}}var color=_10a1.fromHsl(x);color.a=0.7;return color;};return _10a5;});},"dojox/charting/plot2d/commonStacked":function(){define("dojox/charting/plot2d/commonStacked",["dojo/_base/lang","./common"],function(lang,_10ea){var _10eb=lang.getObject("dojox.charting.plot2d.commonStacked",true);return lang.mixin(_10eb,{collectStats:function(_10ec){var stats=lang.delegate(_10ea.defaultStats);for(var i=0;i<_10ec.length;++i){var run=_10ec[i];for(var j=0;j<run.data.length;j++){var x,y;if(run.data[j]!==null){if(typeof run.data[j]=="number"||!run.data[j].x){y=_10eb.getIndexValue(_10ec,i,j);x=j+1;}else{x=run.data[j].x;if(x){y=_10eb.getValue(_10ec,i,x);y=y!=null&&y.y?y.y:null;}}stats.hmin=Math.min(stats.hmin,x);stats.hmax=Math.max(stats.hmax,x);stats.vmin=Math.min(stats.vmin,y);stats.vmax=Math.max(stats.vmax,y);}}}return stats;},getIndexValue:function(_10ed,i,index){var value=0,v,j;for(j=0;j<=i;++j){v=_10ed[j].data[index];if(v!=null){if(isNaN(v)){v=v.y||0;}value+=v;}}return value;},getValue:function(_10ee,i,x){var value=null,j,z;for(j=0;j<=i;++j){for(z=0;z<_10ee[j].data.length;z++){v=_10ee[j].data[z];if(v!==null){if(v.x==x){if(!value){value={x:x};}if(v.y!=null){if(value.y==null){value.y=0;}value.y+=v.y;}break;}else{if(v.x>x){break;}}}}}return value;}});});},"esri/dijit/editing/tools/ButtonToolBase":function(){define("esri/dijit/editing/tools/ButtonToolBase",["dijit","dojo","dojox","dojo/require!esri/dijit/editing/tools/ToolBase,dijit/form/Button"],function(dijit,dojo,dojox){dojo.provide("esri.dijit.editing.tools.ButtonToolBase");dojo.require("esri.dijit.editing.tools.ToolBase");dojo.require("dijit.form.Button");dojo.declare("esri.dijit.editing.tools.ButtonToolBase",[dijit.form.Button,esri.dijit.editing.tools.ToolBase],{postCreate:function(){this.inherited(arguments);if(this._setShowLabelAttr){this._setShowLabelAttr(false);}},destroy:function(){dijit.form.Button.prototype.destroy.apply(this,arguments);esri.dijit.editing.tools.ToolBase.prototype.destroy.apply(this,arguments);}});});},"esri/dijit/Scalebar":function(){define("esri/dijit/Scalebar",["dojo/_base/declare","dojo/_base/lang","dojo/_base/array","dojo/_base/connect","dojo/dom-class","dojo/dom-construct","dojo/dom-geometry","dojo/dom-style","dojo/has","dojo/query","esri","esri/utils","esri/geometry","esri/WKIDUnitConversion"],function(_10ef,lang,array,conn,_10f0,_10f1,_10f2,_10f3,has,query,esri){var _10f4=_10ef("esri.dijit.Scalebar",null,{map:null,mapUnit:null,scalebarUnit:null,unitsDictionary:[],domNode:null,screenPt1:null,screenPt2:null,constructor:function(_10f5,_10f6){this.domNode=_10f1.create("div",{innerHTML:"<div class='esriScalebarRuler'><div class='esriScalebarRulerBlock upper_firstpiece'></div><div class='esriScalebarRulerBlock upper_secondpiece'></div><div class='esriScalebarRulerBlock lower_firstpiece'></div><div class='esriScalebarRulerBlock lower_secondpiece'></div></div><div class='scaleLabelDiv'><div class='esriScalebarLabel' style='left: -3%'>0</div><div class='esriScalebarLabel esriScalebarFirstNumber'></div><div class='esriScalebarLabel esriScalebarSecondNumber'></div></div>"});_10f5=_10f5||{};if(!_10f5.map){console.error("scalebar: unable to find the 'map' property in parameters");return;}if(!_10f5.scalebarUnit){this.scalebarUnit="mi";}else{if(_10f5.scalebarUnit!=="english"&&_10f5.scalebarUnit!=="metric"){console.error("scalebar unit only accepts english or metric");return;}else{this.scalebarUnit=(_10f5.scalebarUnit==="english")?"mi":"km";}}this.map=_10f5.map;if(_10f6){_10f6.appendChild(this.domNode);}else{this.map.container.appendChild(this.domNode);if(_10f5.attachTo){_10f0.add(this.domNode,"scalebar_"+_10f5.attachTo);}else{_10f0.add(this.domNode,"scalebar_bottom-left");}}_10f0.add(this.domNode,"esriScalebar");if(this.map.loaded){this._getDistance(this.map.extent);this._checkBingMaps();}else{var _10f7=conn.connect(this.map,"onLoad",this,function(){dojo.disconnect(_10f7);_10f7=null;this._getDistance(this.map.extent);this._checkBingMaps();});}this._mapOnPan=conn.connect(this.map,"onPan",this,this._getDistance);this._mapOnExtentChange=conn.connect(this.map,"onExtentChange",this,this._getDistance);array.forEach(this.map.layerIds,function(_10f8,idx){if(this.map.getLayer(_10f8).declaredClass==="esri.virtualearth.VETiledLayer"){conn.connect(this.map.getLayer(_10f8),"onVisibilityChange",lang.hitch(this,function(_10f9){this._checkBingMaps();}));}},this);this._mapOnLayerAdd=conn.connect(this.map,"onLayerAdd",lang.hitch(this,function(layer){if(layer.declaredClass==="esri.virtualearth.VETiledLayer"){conn.connect(layer,"onVisibilityChange",lang.hitch(this,function(_10fa){this._checkBingMaps();}));}this._checkBingMaps();}));this._mapOnLayerRemove=conn.connect(this.map,"onLayerRemove",lang.hitch(this,this._checkBingMaps));},hide:function(){this._hidden=true;esri.hide(this.domNode);},show:function(){this._hidden=false;esri.show(this.domNode);},destroy:function(){conn.disconnect(this._mapOnPan);conn.disconnect(this._mapOnExtentChange);conn.disconnect(this._mapOnLayerAdd);conn.disconnect(this._mapOnLayerRemove);this.hide();this.map=null;_10f1.destroy(this.domNode);},_checkBingMaps:function(){if(_10f0.contains(this.domNode,"scalebar_bottom-left")){_10f3.set(this.domNode,"left","25px");array.forEach(this.map.layerIds,function(_10fb,idx){if(this.map.getLayer(_10fb).declaredClass==="esri.virtualearth.VETiledLayer"&&this.map.getLayer(_10fb).visible){var _10fc="95px";if(this.map._mapParams.nav){_10fc="115px";}_10f3.set(this.domNode,"left",_10fc);}},this);}},_getDistance:function(_10fd){var _10fe=_10f2.position(this.domNode,true);var _10ff=_10fe.y-this.map.position.y;_10ff=(_10ff>this.map.height)?this.map.height:_10ff;_10ff=(_10ff<0)?0:_10ff;var _1100=new esri.geometry.ScreenPoint(0,_10ff);var _1101=new esri.geometry.ScreenPoint(this.map.width,_10ff);var _1102,_1103;this.mapUnit="esriDecimalDegrees";var pt1=esri.geometry.toMapPoint(_10fd,this.map.width,this.map.height,_1100);var pt2=esri.geometry.toMapPoint(_10fd,this.map.width,this.map.height,_1101);var _1104=new esri.geometry.Point(_10fd.xmin,(_10fd.ymin+_10fd.ymax)/2,this.map.spatialReference);var _1105=new esri.geometry.Point(_10fd.xmax,(_10fd.ymin+_10fd.ymax)/2,this.map.spatialReference);if(this.map.spatialReference.wkid===3857||this.map.spatialReference.wkid===102100||this.map.spatialReference.wkid===102113||(this.map.spatialReference.wkt&&this.map.spatialReference.wkt.indexOf("WGS_1984_Web_Mercator")!=-1)){pt1=esri.geometry.webMercatorToGeographic(pt1,true);pt2=esri.geometry.webMercatorToGeographic(pt2,true);_1104=esri.geometry.webMercatorToGeographic(_1104,true);_1105=esri.geometry.webMercatorToGeographic(_1105,true);}else{if(esri.isDefined(esri.WKIDUnitConversion[this.map.spatialReference.wkid])||(this.map.spatialReference.wkt&&this.map.spatialReference.wkt.indexOf("PROJCS")===0)){this.mapUnit="linearUnit";_1102=Math.abs(_10fd.xmax-_10fd.xmin);var coeff;if(esri.isDefined(esri.WKIDUnitConversion[this.map.spatialReference.wkid])){coeff=esri.WKIDUnitConversion.values[esri.WKIDUnitConversion[this.map.spatialReference.wkid]];}else{var wkt=this.map.spatialReference.wkt;var start=wkt.lastIndexOf(",")+1;var end=wkt.lastIndexOf("]]");coeff=parseFloat(wkt.substring(start,end));}_1102*=coeff;if(this.scalebarUnit==="mi"){_1102/=1609;}else{_1102/=1000;}}}if(this.mapUnit==="esriDecimalDegrees"){var line=new esri.geometry.Polyline(new esri.SpatialReference({wkid:4326}));line.addPath([pt1,pt2]);var _1106=esri.geometry._straightLineDensify(line,10);_1102=esri.geometry.geodesicLengths([_1106],esri.Units.KILOMETERS)[0];var _1107=new esri.geometry.Polyline(new esri.SpatialReference({wkid:4326}));_1107.addPath([_1104,_1105]);var _1108=esri.geometry._straightLineDensify(_1107,10);_1103=esri.geometry.geodesicLengths([_1108],esri.Units.KILOMETERS)[0];if(this.scalebarUnit==="mi"){_1102/=1.609;_1103/=1.609;}}this._getScaleBarLength(_1102);if(_1103){if(_1102/_1103>0.1){if(!this._hidden){esri.show(this.domNode);}}else{esri.hide(this.domNode);}}},_getScaleBarLength:function(_1109){var _110a=50;var _110b=_110a*_1109/this.map.width;var _110c=_110b;var i=0;var _110d=this.scalebarUnit;if(_110c<0.1){if(this.scalebarUnit==="mi"){_110c*=5280;_110d="ft";}else{if(this.scalebarUnit==="km"){_110c*=1000;_110d="m";}}}while(_110c>=1){_110c/=10;i++;}var _110e,_110f;if(_110c>0.5){_110e=1;_110f=0.5;}else{if(_110c>0.3){_110e=0.5;_110f=0.3;}else{if(_110c>0.2){_110e=0.3;_110f=0.2;}else{if(_110c>0.15){_110e=0.2;_110f=0.15;}else{if(_110c>0.1){_110e=0.15;_110f=0.1;}}}}}var _1110=((_110e/_110c)>=(_110c/_110f))?_110f:_110e;var _1111=_1110/_110c;var _1112=_110a*_1111;var _1113=Math.pow(10,i)*_1110;this._drawScaleBar(_1112,_1113,_110d);},_drawScaleBar:function(_1114,_1115,_1116){var _1117=2*Math.round(_1114)+"px";this.domNode.style.width=_1117;array.forEach(query(".esriScalebarFirstNumber",this.domNode),function(_1118,idx){_1118.innerHTML=_1115;},this);array.forEach(query(".esriScalebarSecondNumber",this.domNode),function(_1119,idx){if(this.mapUnit!=="esriUnknown"){_1119.innerHTML=2*_1115+_1116;}else{_1119.innerHTML=2*_1115+"Unknown Unit";}},this);}});if(has("extend-esri")){lang.setObject("dijit.Scalebar",_10f4,esri);}return _10f4;});},"dijit/Editor":function(){define("dijit/Editor",["dojo/_base/array","dojo/_base/declare","dojo/_base/Deferred","dojo/i18n","dojo/dom-attr","dojo/dom-class","dojo/dom-geometry","dojo/dom-style","dojo/_base/event","dojo/keys","dojo/_base/lang","dojo/sniff","dojo/string","dojo/topic","dojo/_base/window","./_base/focus","./_Container","./Toolbar","./ToolbarSeparator","./layout/_LayoutWidget","./form/ToggleButton","./_editor/_Plugin","./_editor/plugins/EnterKeyHandling","./_editor/html","./_editor/range","./_editor/RichText","./main","dojo/i18n!./_editor/nls/commands"],function(array,_111a,_111b,i18n,_111c,_111d,_111e,_111f,event,keys,lang,has,_1120,topic,win,_1121,_1122,_1123,_1124,_1125,_1126,_1127,_1128,html,_1129,_112a,dijit){var _112b=_111a("dijit.Editor",_112a,{plugins:null,extraPlugins:null,constructor:function(){if(!lang.isArray(this.plugins)){this.plugins=["undo","redo","|","cut","copy","paste","|","bold","italic","underline","strikethrough","|","insertOrderedList","insertUnorderedList","indent","outdent","|","justifyLeft","justifyRight","justifyCenter","justifyFull",_1128];}this._plugins=[];this._editInterval=this.editActionInterval*1000;if(has("ie")){this.events.push("onBeforeDeactivate");this.events.push("onBeforeActivate");}},postMixInProperties:function(){this.setValueDeferred=new _111b();this.inherited(arguments);},postCreate:function(){this._steps=this._steps.slice(0);this._undoedSteps=this._undoedSteps.slice(0);if(lang.isArray(this.extraPlugins)){this.plugins=this.plugins.concat(this.extraPlugins);}this.inherited(arguments);this.commands=i18n.getLocalization("dijit._editor","commands",this.lang);if(!this.toolbar){this.toolbar=new _1123({ownerDocument:this.ownerDocument,dir:this.dir,lang:this.lang});this.header.appendChild(this.toolbar.domNode);}array.forEach(this.plugins,this.addPlugin,this);this.setValueDeferred.resolve(true);_111d.add(this.iframe.parentNode,"dijitEditorIFrameContainer");_111d.add(this.iframe,"dijitEditorIFrame");_111c.set(this.iframe,"allowTransparency",true);if(has("webkit")){_111f.set(this.domNode,"KhtmlUserSelect","none");}this.toolbar.startup();this.onNormalizedDisplayChanged();},destroy:function(){array.forEach(this._plugins,function(p){if(p&&p.destroy){p.destroy();}});this._plugins=[];this.toolbar.destroyRecursive();delete this.toolbar;this.inherited(arguments);},addPlugin:function(_112c,index){var args=lang.isString(_112c)?{name:_112c}:lang.isFunction(_112c)?{ctor:_112c}:_112c;if(!args.setEditor){var o={"args":args,"plugin":null,"editor":this};if(args.name){if(_1127.registry[args.name]){o.plugin=_1127.registry[args.name](args);}else{topic.publish(dijit._scopeName+".Editor.getPlugin",o);}}if(!o.plugin){try{var pc=args.ctor||lang.getObject(args.name)||require(args.name);if(pc){o.plugin=new pc(args);}}catch(e){throw new Error(this.id+": cannot find plugin ["+args.name+"]");}}if(!o.plugin){throw new Error(this.id+": cannot find plugin ["+args.name+"]");}_112c=o.plugin;}if(arguments.length>1){this._plugins[index]=_112c;}else{this._plugins.push(_112c);}_112c.setEditor(this);if(lang.isFunction(_112c.setToolbar)){_112c.setToolbar(this.toolbar);}},resize:function(size){if(size){_1125.prototype.resize.apply(this,arguments);}},layout:function(){var _112d=(this._contentBox.h-(this.getHeaderHeight()+this.getFooterHeight()+_111e.getPadBorderExtents(this.iframe.parentNode).h+_111e.getMarginExtents(this.iframe.parentNode).h));this.editingArea.style.height=_112d+"px";if(this.iframe){this.iframe.style.height="100%";}this._layoutMode=true;},_onIEMouseDown:function(e){var _112e;var b=this.document.body;var _112f=b.clientWidth;var _1130=b.clientHeight;var _1131=b.clientLeft;var _1132=b.offsetWidth;var _1133=b.offsetHeight;var _1134=b.offsetLeft;if(/^rtl$/i.test(b.dir||"")){if(_112f<_1132&&e.x>_112f&&e.x<_1132){_112e=true;}}else{if(e.x<_1131&&e.x>_1134){_112e=true;}}if(!_112e){if(_1130<_1133&&e.y>_1130&&e.y<_1133){_112e=true;}}if(!_112e){delete this._cursorToStart;delete this._savedSelection;if(e.target.tagName=="BODY"){this.defer("placeCursorAtEnd");}this.inherited(arguments);}},onBeforeActivate:function(){this._restoreSelection();},onBeforeDeactivate:function(e){if(this.customUndo){this.endEditing(true);}if(e.target.tagName!="BODY"){this._saveSelection();}},customUndo:true,editActionInterval:3,beginEditing:function(cmd){if(!this._inEditing){this._inEditing=true;this._beginEditing(cmd);}if(this.editActionInterval>0){if(this._editTimer){this._editTimer.remove();}this._editTimer=this.defer("endEditing",this._editInterval);}},_steps:[],_undoedSteps:[],execCommand:function(cmd){if(this.customUndo&&(cmd=="undo"||cmd=="redo")){return this[cmd]();}else{if(this.customUndo){this.endEditing();this._beginEditing();}var r=this.inherited(arguments);if(this.customUndo){this._endEditing();}return r;}},_pasteImpl:function(){return this._clipboardCommand("paste");},_cutImpl:function(){return this._clipboardCommand("cut");},_copyImpl:function(){return this._clipboardCommand("copy");},_clipboardCommand:function(cmd){var r;try{r=this.document.execCommand(cmd,false,null);if(has("webkit")&&!r){throw {code:1011};}}catch(e){if(e.code==1011||(e.code==9&&has("opera"))){var sub=_1120.substitute,accel={cut:"X",copy:"C",paste:"V"};alert(sub(this.commands.systemShortcut,[this.commands[cmd],sub(this.commands[has("mac")?"appleKey":"ctrlKey"],[accel[cmd]])]));}r=false;}return r;},queryCommandEnabled:function(cmd){if(this.customUndo&&(cmd=="undo"||cmd=="redo")){return cmd=="undo"?(this._steps.length>1):(this._undoedSteps.length>0);}else{return this.inherited(arguments);}},_moveToBookmark:function(b){var _1135=b.mark;var mark=b.mark;var col=b.isCollapsed;var r,sNode,eNode,sel;if(mark){if(has("ie")<9){if(lang.isArray(mark)){_1135=[];array.forEach(mark,function(n){_1135.push(_1129.getNode(n,this.editNode));},this);win.withGlobal(this.window,"moveToBookmark",_1121,[{mark:_1135,isCollapsed:col}]);}else{if(mark.startContainer&&mark.endContainer){sel=_1129.getSelection(this.window);if(sel&&sel.removeAllRanges){sel.removeAllRanges();r=_1129.create(this.window);sNode=_1129.getNode(mark.startContainer,this.editNode);eNode=_1129.getNode(mark.endContainer,this.editNode);if(sNode&&eNode){r.setStart(sNode,mark.startOffset);r.setEnd(eNode,mark.endOffset);sel.addRange(r);}}}}}else{sel=_1129.getSelection(this.window);if(sel&&sel.removeAllRanges){sel.removeAllRanges();r=_1129.create(this.window);sNode=_1129.getNode(mark.startContainer,this.editNode);eNode=_1129.getNode(mark.endContainer,this.editNode);if(sNode&&eNode){r.setStart(sNode,mark.startOffset);r.setEnd(eNode,mark.endOffset);sel.addRange(r);}}}}},_changeToStep:function(from,to){this.setValue(to.text);var b=to.bookmark;if(!b){return;}this._moveToBookmark(b);},undo:function(){var ret=false;if(!this._undoRedoActive){this._undoRedoActive=true;this.endEditing(true);var s=this._steps.pop();if(s&&this._steps.length>0){this.focus();this._changeToStep(s,this._steps[this._steps.length-1]);this._undoedSteps.push(s);this.onDisplayChanged();delete this._undoRedoActive;ret=true;}delete this._undoRedoActive;}return ret;},redo:function(){var ret=false;if(!this._undoRedoActive){this._undoRedoActive=true;this.endEditing(true);var s=this._undoedSteps.pop();if(s&&this._steps.length>0){this.focus();this._changeToStep(this._steps[this._steps.length-1],s);this._steps.push(s);this.onDisplayChanged();ret=true;}delete this._undoRedoActive;}return ret;},endEditing:function(_1136){if(this._editTimer){this._editTimer=this._editTimer.remove();}if(this._inEditing){this._endEditing(_1136);this._inEditing=false;}},_getBookmark:function(){var b=win.withGlobal(this.window,_1121.getBookmark);var tmp=[];if(b&&b.mark){var mark=b.mark;if(has("ie")<9){var sel=_1129.getSelection(this.window);if(!lang.isArray(mark)){if(sel){var range;if(sel.rangeCount){range=sel.getRangeAt(0);}if(range){b.mark=range.cloneRange();}else{b.mark=win.withGlobal(this.window,_1121.getBookmark);}}}else{array.forEach(b.mark,function(n){tmp.push(_1129.getIndex(n,this.editNode).o);},this);b.mark=tmp;}}try{if(b.mark&&b.mark.startContainer){tmp=_1129.getIndex(b.mark.startContainer,this.editNode).o;b.mark={startContainer:tmp,startOffset:b.mark.startOffset,endContainer:b.mark.endContainer===b.mark.startContainer?tmp:_1129.getIndex(b.mark.endContainer,this.editNode).o,endOffset:b.mark.endOffset};}}catch(e){b.mark=null;}}return b;},_beginEditing:function(){if(this._steps.length===0){this._steps.push({"text":html.getChildrenHtml(this.editNode),"bookmark":this._getBookmark()});}},_endEditing:function(){var v=html.getChildrenHtml(this.editNode);this._undoedSteps=[];this._steps.push({text:v,bookmark:this._getBookmark()});},onKeyDown:function(e){if(!has("ie")&&!this.iframe&&e.keyCode==keys.TAB&&!this.tabIndent){this._saveSelection();}if(!this.customUndo){this.inherited(arguments);return;}var k=e.keyCode;if(e.ctrlKey&&!e.altKey){if(k==90||k==122){event.stop(e);this.undo();return;}else{if(k==89||k==121){event.stop(e);this.redo();return;}}}this.inherited(arguments);switch(k){case keys.ENTER:case keys.BACKSPACE:case keys.DELETE:this.beginEditing();break;case 88:case 86:if(e.ctrlKey&&!e.altKey&&!e.metaKey){this.endEditing();if(e.keyCode==88){this.beginEditing("cut");}else{this.beginEditing("paste");}this.defer("endEditing",1);break;}default:if(!e.ctrlKey&&!e.altKey&&!e.metaKey&&(e.keyCode<keys.F1||e.keyCode>keys.F15)){this.beginEditing();break;}case keys.ALT:this.endEditing();break;case keys.UP_ARROW:case keys.DOWN_ARROW:case keys.LEFT_ARROW:case keys.RIGHT_ARROW:case keys.HOME:case keys.END:case keys.PAGE_UP:case keys.PAGE_DOWN:this.endEditing(true);break;case keys.CTRL:case keys.SHIFT:case keys.TAB:break;}},_onBlur:function(){this.inherited(arguments);this.endEditing(true);},_saveSelection:function(){try{this._savedSelection=this._getBookmark();}catch(e){}},_restoreSelection:function(){if(this._savedSelection){delete this._cursorToStart;if(win.withGlobal(this.window,"isCollapsed",_1121)){this._moveToBookmark(this._savedSelection);}delete this._savedSelection;}},onClick:function(){this.endEditing(true);this.inherited(arguments);},replaceValue:function(html){if(!this.customUndo){this.inherited(arguments);}else{if(this.isClosed){this.setValue(html);}else{this.beginEditing();if(!html){html="&#160;";}this.setValue(html);this.endEditing();}}},_setDisabledAttr:function(value){this.setValueDeferred.then(lang.hitch(this,function(){if((!this.disabled&&value)||(!this._buttonEnabledPlugins&&value)){array.forEach(this._plugins,function(p){p.set("disabled",true);});}else{if(this.disabled&&!value){array.forEach(this._plugins,function(p){p.set("disabled",false);});}}}));this.inherited(arguments);},_setStateClass:function(){try{this.inherited(arguments);if(this.document&&this.document.body){_111f.set(this.document.body,"color",_111f.get(this.iframe,"color"));}}catch(e){}}});function _1137(args){return new _1127({command:args.name});};function _1138(args){return new _1127({buttonClass:_1126,command:args.name});};lang.mixin(_1127.registry,{"undo":_1137,"redo":_1137,"cut":_1137,"copy":_1137,"paste":_1137,"insertOrderedList":_1137,"insertUnorderedList":_1137,"indent":_1137,"outdent":_1137,"justifyCenter":_1137,"justifyFull":_1137,"justifyLeft":_1137,"justifyRight":_1137,"delete":_1137,"selectAll":_1137,"removeFormat":_1137,"unlink":_1137,"insertHorizontalRule":_1137,"bold":_1138,"italic":_1138,"underline":_1138,"strikethrough":_1138,"subscript":_1138,"superscript":_1138,"|":function(){return new _1127({setEditor:function(_1139){this.editor=_1139;this.button=new _1124({ownerDocument:_1139.ownerDocument});}});}});return _112b;});},"dojox/grid/Selection":function(){define("dojox/grid/Selection",["dojo/_base/declare","dojo/_base/array","dojo/_base/lang","dojo/dom-attr"],function(_113a,array,lang,_113b){return _113a("dojox.grid.Selection",null,{constructor:function(_113c){this.grid=_113c;this.selected=[];this.setMode(_113c.selectionMode);},mode:"extended",selected:null,updating:0,selectedIndex:-1,setMode:function(mode){if(this.selected.length){this.deselectAll();}if(mode!="extended"&&mode!="multiple"&&mode!="single"&&mode!="none"){this.mode="extended";}else{this.mode=mode;}},onCanSelect:function(_113d){return this.grid.onCanSelect(_113d);},onCanDeselect:function(_113e){return this.grid.onCanDeselect(_113e);},onSelected:function(_113f){},onDeselected:function(_1140){},onChanging:function(){},onChanged:function(){},isSelected:function(_1141){if(this.mode=="none"){return false;}return this.selected[_1141];},getFirstSelected:function(){if(!this.selected.length||this.mode=="none"){return -1;}for(var i=0,l=this.selected.length;i<l;i++){if(this.selected[i]){return i;}}return -1;},getNextSelected:function(_1142){if(this.mode=="none"){return -1;}for(var i=_1142+1,l=this.selected.length;i<l;i++){if(this.selected[i]){return i;}}return -1;},getSelected:function(){var _1143=[];for(var i=0,l=this.selected.length;i<l;i++){if(this.selected[i]){_1143.push(i);}}return _1143;},getSelectedCount:function(){var c=0;for(var i=0;i<this.selected.length;i++){if(this.selected[i]){c++;}}return c;},_beginUpdate:function(){if(this.updating===0){this.onChanging();}this.updating++;},_endUpdate:function(){this.updating--;if(this.updating===0){this.onChanged();}},select:function(_1144){if(this.mode=="none"){return;}if(this.mode!="multiple"){this.deselectAll(_1144);this.addToSelection(_1144);}else{this.toggleSelect(_1144);}},addToSelection:function(_1145){if(this.mode=="none"){return;}if(lang.isArray(_1145)){array.forEach(_1145,this.addToSelection,this);return;}_1145=Number(_1145);if(this.selected[_1145]){this.selectedIndex=_1145;}else{if(this.onCanSelect(_1145)!==false){this.selectedIndex=_1145;var _1146=this.grid.getRowNode(_1145);if(_1146){_113b.set(_1146,"aria-selected","true");}this._beginUpdate();this.selected[_1145]=true;this.onSelected(_1145);this._endUpdate();}}},deselect:function(_1147){if(this.mode=="none"){return;}if(lang.isArray(_1147)){array.forEach(_1147,this.deselect,this);return;}_1147=Number(_1147);if(this.selectedIndex==_1147){this.selectedIndex=-1;}if(this.selected[_1147]){if(this.onCanDeselect(_1147)===false){return;}var _1148=this.grid.getRowNode(_1147);if(_1148){_113b.set(_1148,"aria-selected","false");}this._beginUpdate();delete this.selected[_1147];this.onDeselected(_1147);this._endUpdate();}},setSelected:function(_1149,_114a){this[(_114a?"addToSelection":"deselect")](_1149);},toggleSelect:function(_114b){if(lang.isArray(_114b)){array.forEach(_114b,this.toggleSelect,this);return;}this.setSelected(_114b,!this.selected[_114b]);},_range:function(_114c,inTo,func){var s=(_114c>=0?_114c:inTo),e=inTo;if(s>e){e=s;s=inTo;}for(var i=s;i<=e;i++){func(i);}},selectRange:function(_114d,inTo){this._range(_114d,inTo,lang.hitch(this,"addToSelection"));},deselectRange:function(_114e,inTo){this._range(_114e,inTo,lang.hitch(this,"deselect"));},insert:function(_114f){this.selected.splice(_114f,0,false);if(this.selectedIndex>=_114f){this.selectedIndex++;}},remove:function(_1150){this.selected.splice(_1150,1);if(this.selectedIndex>=_1150){this.selectedIndex--;}},deselectAll:function(_1151){for(var i in this.selected){if((i!=_1151)&&(this.selected[i]===true)){this.deselect(i);}}},clickSelect:function(_1152,_1153,_1154){if(this.mode=="none"){return;}this._beginUpdate();if(this.mode!="extended"){this.select(_1152);}else{var _1155=this.selectedIndex;if(!_1153){this.deselectAll(_1152);}if(_1154){this.selectRange(_1155,_1152);}else{if(_1153){this.toggleSelect(_1152);}else{this.addToSelection(_1152);}}}this._endUpdate();},clickSelectEvent:function(e){this.clickSelect(e.rowIndex,dojo.isCopyKey(e),e.shiftKey);},clear:function(){this._beginUpdate();this.deselectAll();this._endUpdate();}});});},"dijit/_editor/plugins/EnterKeyHandling":function(){define("dijit/_editor/plugins/EnterKeyHandling",["dojo/_base/declare","dojo/dom-construct","dojo/_base/event","dojo/keys","dojo/_base/lang","dojo/sniff","dojo/_base/window","dojo/window","../_Plugin","../RichText","../range","../../_base/focus"],function(_1156,_1157,event,keys,lang,has,win,_1158,_1159,_115a,_115b,_115c){return _1156("dijit._editor.plugins.EnterKeyHandling",_1159,{blockNodeForEnter:"BR",constructor:function(args){if(args){if("blockNodeForEnter" in args){args.blockNodeForEnter=args.blockNodeForEnter.toUpperCase();}lang.mixin(this,args);}},setEditor:function(_115d){if(this.editor===_115d){return;}this.editor=_115d;if(this.blockNodeForEnter=="BR"){this.editor.customUndo=true;_115d.onLoadDeferred.then(lang.hitch(this,function(d){this.connect(_115d.document,"onkeypress",function(e){if(e.charOrCode==keys.ENTER){var ne=lang.mixin({},e);ne.shiftKey=true;if(!this.handleEnterKey(ne)){event.stop(e);}}});if(has("ie")==9){this.connect(_115d.document,"onpaste",function(e){setTimeout(dojo.hitch(this,function(){var r=this.editor.document.selection.createRange();r.move("character",-1);r.select();r.move("character",1);r.select();}),0);});}return d;}));}else{if(this.blockNodeForEnter){var h=lang.hitch(this,this.handleEnterKey);_115d.addKeyHandler(13,0,0,h);_115d.addKeyHandler(13,0,1,h);this.connect(this.editor,"onKeyPressed","onKeyPressed");}}},onKeyPressed:function(){if(this._checkListLater){if(win.withGlobal(this.editor.window,"isCollapsed",_115c)){var _115e=this.editor._sCall("getAncestorElement",["LI"]);if(!_115e){_115a.prototype.execCommand.call(this.editor,"formatblock",this.blockNodeForEnter);var block=this.editor._sCall("getAncestorElement",[this.blockNodeForEnter]);if(block){block.innerHTML=this.bogusHtmlContent;if(has("ie")){var r=this.editor.document.selection.createRange();r.move("character",-1);r.select();}}else{console.error("onKeyPressed: Cannot find the new block node");}}else{if(has("mozilla")){if(_115e.parentNode.parentNode.nodeName=="LI"){_115e=_115e.parentNode.parentNode;}}var fc=_115e.firstChild;if(fc&&fc.nodeType==1&&(fc.nodeName=="UL"||fc.nodeName=="OL")){_115e.insertBefore(fc.ownerDocument.createTextNode(" "),fc);var _115f=_115b.create(this.editor.window);_115f.setStart(_115e.firstChild,0);var _1160=_115b.getSelection(this.editor.window,true);_1160.removeAllRanges();_1160.addRange(_115f);}}}this._checkListLater=false;}if(this._pressedEnterInBlock){if(this._pressedEnterInBlock.previousSibling){this.removeTrailingBr(this._pressedEnterInBlock.previousSibling);}delete this._pressedEnterInBlock;}},bogusHtmlContent:"&#160;",blockNodes:/^(?:P|H1|H2|H3|H4|H5|H6|LI)$/,handleEnterKey:function(e){var _1161,range,_1162,_1163,_1164,_1165,doc=this.editor.document,br,rs,txt;if(e.shiftKey){var _1166=this.editor._sCall("getParentElement",[]);var _1167=_115b.getAncestor(_1166,this.blockNodes);if(_1167){if(_1167.tagName=="LI"){return true;}_1161=_115b.getSelection(this.editor.window);range=_1161.getRangeAt(0);if(!range.collapsed){range.deleteContents();_1161=_115b.getSelection(this.editor.window);range=_1161.getRangeAt(0);}if(_115b.atBeginningOfContainer(_1167,range.startContainer,range.startOffset)){br=doc.createElement("br");_1162=_115b.create(this.editor.window);_1167.insertBefore(br,_1167.firstChild);_1162.setStartAfter(br);_1161.removeAllRanges();_1161.addRange(_1162);}else{if(_115b.atEndOfContainer(_1167,range.startContainer,range.startOffset)){_1162=_115b.create(this.editor.window);br=doc.createElement("br");_1167.appendChild(br);_1167.appendChild(doc.createTextNode(" "));_1162.setStart(_1167.lastChild,0);_1161.removeAllRanges();_1161.addRange(_1162);}else{rs=range.startContainer;if(rs&&rs.nodeType==3){txt=rs.nodeValue;_1163=doc.createTextNode(txt.substring(0,range.startOffset));_1164=doc.createTextNode(txt.substring(range.startOffset));_1165=doc.createElement("br");if(_1164.nodeValue==""&&has("webkit")){_1164=doc.createTextNode(" ");}_1157.place(_1163,rs,"after");_1157.place(_1165,_1163,"after");_1157.place(_1164,_1165,"after");_1157.destroy(rs);_1162=_115b.create(this.editor.window);_1162.setStart(_1164,0);_1161.removeAllRanges();_1161.addRange(_1162);return false;}return true;}}}else{_1161=_115b.getSelection(this.editor.window);if(_1161.rangeCount){range=_1161.getRangeAt(0);if(range&&range.startContainer){if(!range.collapsed){range.deleteContents();_1161=_115b.getSelection(this.editor.window);range=_1161.getRangeAt(0);}rs=range.startContainer;if(rs&&rs.nodeType==3){var _1168=false;var _1169=range.startOffset;if(rs.length<_1169){ret=this._adjustNodeAndOffset(rs,_1169);rs=ret.node;_1169=ret.offset;}txt=rs.nodeValue;_1163=doc.createTextNode(txt.substring(0,_1169));_1164=doc.createTextNode(txt.substring(_1169));_1165=doc.createElement("br");if(!_1164.length){_1164=doc.createTextNode(" ");_1168=true;}if(_1163.length){_1157.place(_1163,rs,"after");}else{_1163=rs;}_1157.place(_1165,_1163,"after");_1157.place(_1164,_1165,"after");_1157.destroy(rs);_1162=_115b.create(this.editor.window);_1162.setStart(_1164,0);_1162.setEnd(_1164,_1164.length);_1161.removeAllRanges();_1161.addRange(_1162);if(_1168&&!has("webkit")){this.editor._sCall("remove",[]);}else{this.editor._sCall("collapse",[true]);}}else{var _116a;if(range.startOffset>=0){_116a=rs.childNodes[range.startOffset];}var _1165=doc.createElement("br");var _1164=doc.createTextNode(" ");if(!_116a){rs.appendChild(_1165);rs.appendChild(_1164);}else{_1157.place(_1165,_116a,"before");_1157.place(_1164,_1165,"after");}_1162=_115b.create(this.editor.window);_1162.setStart(_1164,0);_1162.setEnd(_1164,_1164.length);_1161.removeAllRanges();_1161.addRange(_1162);this.editor._sCall("collapse",[true]);}}}else{_115a.prototype.execCommand.call(this.editor,"inserthtml","<br>");}}return false;}var _116b=true;_1161=_115b.getSelection(this.editor.window);range=_1161.getRangeAt(0);if(!range.collapsed){range.deleteContents();_1161=_115b.getSelection(this.editor.window);range=_1161.getRangeAt(0);}var block=_115b.getBlockAncestor(range.endContainer,null,this.editor.editNode);var _116c=block.blockNode;if((this._checkListLater=(_116c&&(_116c.nodeName=="LI"||_116c.parentNode.nodeName=="LI")))){if(has("mozilla")){this._pressedEnterInBlock=_116c;}if(/^(\s|&nbsp;|&#160;|\xA0|<span\b[^>]*\bclass=['"]Apple-style-span['"][^>]*>(\s|&nbsp;|&#160;|\xA0)<\/span>)?(<br>)?$/.test(_116c.innerHTML)){_116c.innerHTML="";if(has("webkit")){_1162=_115b.create(this.editor.window);_1162.setStart(_116c,0);_1161.removeAllRanges();_1161.addRange(_1162);}this._checkListLater=false;}return true;}if(!block.blockNode||block.blockNode===this.editor.editNode){try{_115a.prototype.execCommand.call(this.editor,"formatblock",this.blockNodeForEnter);}catch(e2){}block={blockNode:this.editor._sCall("getAncestorElement",[this.blockNodeForEnter]),blockContainer:this.editor.editNode};if(block.blockNode){if(block.blockNode!=this.editor.editNode&&(!(block.blockNode.textContent||block.blockNode.innerHTML).replace(/^\s+|\s+$/g,"").length)){this.removeTrailingBr(block.blockNode);return false;}}else{block.blockNode=this.editor.editNode;}_1161=_115b.getSelection(this.editor.window);range=_1161.getRangeAt(0);}var _116d=doc.createElement(this.blockNodeForEnter);_116d.innerHTML=this.bogusHtmlContent;this.removeTrailingBr(block.blockNode);var _116e=range.endOffset;var node=range.endContainer;if(node.length<_116e){var ret=this._adjustNodeAndOffset(node,_116e);node=ret.node;_116e=ret.offset;}if(_115b.atEndOfContainer(block.blockNode,node,_116e)){if(block.blockNode===block.blockContainer){block.blockNode.appendChild(_116d);}else{_1157.place(_116d,block.blockNode,"after");}_116b=false;_1162=_115b.create(this.editor.window);_1162.setStart(_116d,0);_1161.removeAllRanges();_1161.addRange(_1162);if(this.editor.height){_1158.scrollIntoView(_116d);}}else{if(_115b.atBeginningOfContainer(block.blockNode,range.startContainer,range.startOffset)){_1157.place(_116d,block.blockNode,block.blockNode===block.blockContainer?"first":"before");if(_116d.nextSibling&&this.editor.height){_1162=_115b.create(this.editor.window);_1162.setStart(_116d.nextSibling,0);_1161.removeAllRanges();_1161.addRange(_1162);_1158.scrollIntoView(_116d.nextSibling);}_116b=false;}else{if(block.blockNode===block.blockContainer){block.blockNode.appendChild(_116d);}else{_1157.place(_116d,block.blockNode,"after");}_116b=false;if(block.blockNode.style){if(_116d.style){if(block.blockNode.style.cssText){_116d.style.cssText=block.blockNode.style.cssText;}}}rs=range.startContainer;var _116f;if(rs&&rs.nodeType==3){var _1170,tNode;_116e=range.endOffset;if(rs.length<_116e){ret=this._adjustNodeAndOffset(rs,_116e);rs=ret.node;_116e=ret.offset;}txt=rs.nodeValue;_1163=doc.createTextNode(txt.substring(0,_116e));_1164=doc.createTextNode(txt.substring(_116e,txt.length));_1157.place(_1163,rs,"before");_1157.place(_1164,rs,"after");_1157.destroy(rs);var _1171=_1163.parentNode;while(_1171!==block.blockNode){var tg=_1171.tagName;var newTg=doc.createElement(tg);if(_1171.style){if(newTg.style){if(_1171.style.cssText){newTg.style.cssText=_1171.style.cssText;}}}if(_1171.tagName==="FONT"){if(_1171.color){newTg.color=_1171.color;}if(_1171.face){newTg.face=_1171.face;}if(_1171.size){newTg.size=_1171.size;}}_1170=_1164;while(_1170){tNode=_1170.nextSibling;newTg.appendChild(_1170);_1170=tNode;}_1157.place(newTg,_1171,"after");_1163=_1171;_1164=newTg;_1171=_1171.parentNode;}_1170=_1164;if(_1170.nodeType==1||(_1170.nodeType==3&&_1170.nodeValue)){_116d.innerHTML="";}_116f=_1170;while(_1170){tNode=_1170.nextSibling;_116d.appendChild(_1170);_1170=tNode;}}_1162=_115b.create(this.editor.window);var _1172;var _1173=_116f;if(this.blockNodeForEnter!=="BR"){while(_1173){_1172=_1173;tNode=_1173.firstChild;_1173=tNode;}if(_1172&&_1172.parentNode){_116d=_1172.parentNode;_1162.setStart(_116d,0);_1161.removeAllRanges();_1161.addRange(_1162);if(this.editor.height){_1158.scrollIntoView(_116d);}if(has("mozilla")){this._pressedEnterInBlock=block.blockNode;}}else{_116b=true;}}else{_1162.setStart(_116d,0);_1161.removeAllRanges();_1161.addRange(_1162);if(this.editor.height){_1158.scrollIntoView(_116d);}if(has("mozilla")){this._pressedEnterInBlock=block.blockNode;}}}}return _116b;},_adjustNodeAndOffset:function(node,_1174){while(node.length<_1174&&node.nextSibling&&node.nextSibling.nodeType==3){_1174=_1174-node.length;node=node.nextSibling;}return {"node":node,"offset":_1174};},removeTrailingBr:function(_1175){var para=/P|DIV|LI/i.test(_1175.tagName)?_1175:this.editor._sCall("getParentOfType",[_1175,["P","DIV","LI"]]);if(!para){return;}if(para.lastChild){if((para.childNodes.length>1&&para.lastChild.nodeType==3&&/^[\s\xAD]*$/.test(para.lastChild.nodeValue))||para.lastChild.tagName=="BR"){_1157.destroy(para.lastChild);}}if(!para.childNodes.length){para.innerHTML=this.bogusHtmlContent;}}});});},"dojox/charting/themes/PlotKit/base":function(){define("dojox/charting/themes/PlotKit/base",["dojo/_base/lang","dojo/_base/Color","../../Theme","../common"],function(lang,Color,Theme,_1176){var pk=lang.getObject("PlotKit",true,_1176);pk.base=new Theme({chart:{stroke:null,fill:"yellow"},plotarea:{stroke:null,fill:"yellow"},axis:{stroke:{color:"#fff",width:1},line:{color:"#fff",width:0.5},majorTick:{color:"#fff",width:0.5,length:6},minorTick:{color:"#fff",width:0.5,length:3},tick:{font:"normal normal normal 7pt Helvetica,Arial,sans-serif",fontColor:"#999"}},series:{stroke:{width:2.5,color:"#fff"},fill:"#666",font:"normal normal normal 7.5pt Helvetica,Arial,sans-serif",fontColor:"#666"},marker:{stroke:{width:2},fill:"#333",font:"normal normal normal 7pt Helvetica,Arial,sans-serif",fontColor:"#666"},colors:["red","green","blue"]});pk.base.next=function(_1177,mixin,_1178){var theme=Theme.prototype.next.apply(this,arguments);if(_1177=="line"){theme.marker.outline={width:2,color:"#fff"};theme.series.stroke.width=3.5;theme.marker.stroke.width=2;}else{if(_1177=="candlestick"){theme.series.stroke.width=1;}else{if(theme.series.stroke.color&&(theme.series.stroke.color.toString()==new Color(this.colors[(this._current-1)%this.colors.length]).toString())){theme.series.stroke.color="#fff";}}}return theme;};return pk;});},"dojox/color/Palette":function(){define("dojox/color/Palette",["dojo/_base/lang","dojo/_base/array","./_base"],function(lang,arr,dxc){dxc.Palette=function(base){this.colors=[];if(base instanceof dxc.Palette){this.colors=base.colors.slice(0);}else{if(base instanceof dxc.Color){this.colors=[null,null,base,null,null];}else{if(lang.isArray(base)){this.colors=arr.map(base.slice(0),function(item){if(lang.isString(item)){return new dxc.Color(item);}return item;});}else{if(lang.isString(base)){this.colors=[null,null,new dxc.Color(base),null,null];}}}}};function tRGBA(p,param,val){var ret=new dxc.Palette();ret.colors=[];arr.forEach(p.colors,function(item){var r=(param=="dr")?item.r+val:item.r,g=(param=="dg")?item.g+val:item.g,b=(param=="db")?item.b+val:item.b,a=(param=="da")?item.a+val:item.a;ret.colors.push(new dxc.Color({r:Math.min(255,Math.max(0,r)),g:Math.min(255,Math.max(0,g)),b:Math.min(255,Math.max(0,b)),a:Math.min(1,Math.max(0,a))}));});return ret;};function tCMY(p,param,val){var ret=new dxc.Palette();ret.colors=[];arr.forEach(p.colors,function(item){var o=item.toCmy(),c=(param=="dc")?o.c+val:o.c,m=(param=="dm")?o.m+val:o.m,y=(param=="dy")?o.y+val:o.y;ret.colors.push(dxc.fromCmy(Math.min(100,Math.max(0,c)),Math.min(100,Math.max(0,m)),Math.min(100,Math.max(0,y))));});return ret;};function tCMYK(p,param,val){var ret=new dxc.Palette();ret.colors=[];arr.forEach(p.colors,function(item){var o=item.toCmyk(),c=(param=="dc")?o.c+val:o.c,m=(param=="dm")?o.m+val:o.m,y=(param=="dy")?o.y+val:o.y,k=(param=="dk")?o.b+val:o.b;ret.colors.push(dxc.fromCmyk(Math.min(100,Math.max(0,c)),Math.min(100,Math.max(0,m)),Math.min(100,Math.max(0,y)),Math.min(100,Math.max(0,k))));});return ret;};function tHSL(p,param,val){var ret=new dxc.Palette();ret.colors=[];arr.forEach(p.colors,function(item){var o=item.toHsl(),h=(param=="dh")?o.h+val:o.h,s=(param=="ds")?o.s+val:o.s,l=(param=="dl")?o.l+val:o.l;ret.colors.push(dxc.fromHsl(h%360,Math.min(100,Math.max(0,s)),Math.min(100,Math.max(0,l))));});return ret;};function tHSV(p,param,val){var ret=new dxc.Palette();ret.colors=[];arr.forEach(p.colors,function(item){var o=item.toHsv(),h=(param=="dh")?o.h+val:o.h,s=(param=="ds")?o.s+val:o.s,v=(param=="dv")?o.v+val:o.v;ret.colors.push(dxc.fromHsv(h%360,Math.min(100,Math.max(0,s)),Math.min(100,Math.max(0,v))));});return ret;};function _1179(val,low,high){return high-((high-val)*((high-low)/high));};lang.extend(dxc.Palette,{transform:function(_117a){var fn=tRGBA;if(_117a.use){var use=_117a.use.toLowerCase();if(use.indexOf("hs")==0){if(use.charAt(2)=="l"){fn=tHSL;}else{fn=tHSV;}}else{if(use.indexOf("cmy")==0){if(use.charAt(3)=="k"){fn=tCMYK;}else{fn=tCMY;}}}}else{if("dc" in _117a||"dm" in _117a||"dy" in _117a){if("dk" in _117a){fn=tCMYK;}else{fn=tCMY;}}else{if("dh" in _117a||"ds" in _117a){if("dv" in _117a){fn=tHSV;}else{fn=tHSL;}}}}var _117b=this;for(var p in _117a){if(p=="use"){continue;}_117b=fn(_117b,p,_117a[p]);}return _117b;},clone:function(){return new dxc.Palette(this);}});lang.mixin(dxc.Palette,{generators:{analogous:function(args){var high=args.high||60,low=args.low||18,base=lang.isString(args.base)?new dxc.Color(args.base):args.base,hsv=base.toHsv();var h=[(hsv.h+low+360)%360,(hsv.h+Math.round(low/2)+360)%360,hsv.h,(hsv.h-Math.round(high/2)+360)%360,(hsv.h-high+360)%360];var s1=Math.max(10,(hsv.s<=95)?hsv.s+5:(100-(hsv.s-95))),s2=(hsv.s>1)?hsv.s-1:21-hsv.s,v1=(hsv.v>=92)?hsv.v-9:Math.max(hsv.v+9,20),v2=(hsv.v<=90)?Math.max(hsv.v+5,20):(95+Math.ceil((hsv.v-90)/2)),s=[s1,s2,hsv.s,s1,s1],v=[v1,v2,hsv.v,v1,v2];return new dxc.Palette(arr.map(h,function(hue,i){return dxc.fromHsv(hue,s[i],v[i]);}));},monochromatic:function(args){var base=lang.isString(args.base)?new dxc.Color(args.base):args.base,hsv=base.toHsv();var s1=(hsv.s-30>9)?hsv.s-30:hsv.s+30,s2=hsv.s,v1=_1179(hsv.v,20,100),v2=(hsv.v-20>20)?hsv.v-20:hsv.v+60,v3=(hsv.v-50>20)?hsv.v-50:hsv.v+30;return new dxc.Palette([dxc.fromHsv(hsv.h,s1,v1),dxc.fromHsv(hsv.h,s2,v3),base,dxc.fromHsv(hsv.h,s1,v3),dxc.fromHsv(hsv.h,s2,v2)]);},triadic:function(args){var base=lang.isString(args.base)?new dxc.Color(args.base):args.base,hsv=base.toHsv();var h1=(hsv.h+57+360)%360,h2=(hsv.h-157+360)%360,s1=(hsv.s>20)?hsv.s-10:hsv.s+10,s2=(hsv.s>90)?hsv.s-10:hsv.s+10,s3=(hsv.s>95)?hsv.s-5:hsv.s+5,v1=(hsv.v-20>20)?hsv.v-20:hsv.v+20,v2=(hsv.v-30>20)?hsv.v-30:hsv.v+30,v3=(hsv.v-30>70)?hsv.v-30:hsv.v+30;return new dxc.Palette([dxc.fromHsv(h1,s1,hsv.v),dxc.fromHsv(hsv.h,s2,v2),base,dxc.fromHsv(h2,s2,v1),dxc.fromHsv(h2,s3,v3)]);},complementary:function(args){var base=lang.isString(args.base)?new dxc.Color(args.base):args.base,hsv=base.toHsv();var h1=((hsv.h*2)+137<360)?(hsv.h*2)+137:Math.floor(hsv.h/2)-137,s1=Math.max(hsv.s-10,0),s2=_1179(hsv.s,10,100),s3=Math.min(100,hsv.s+20),v1=Math.min(100,hsv.v+30),v2=(hsv.v>20)?hsv.v-30:hsv.v+30;return new dxc.Palette([dxc.fromHsv(hsv.h,s1,v1),dxc.fromHsv(hsv.h,s2,v2),base,dxc.fromHsv(h1,s3,v2),dxc.fromHsv(h1,hsv.s,hsv.v)]);},splitComplementary:function(args){var base=lang.isString(args.base)?new dxc.Color(args.base):args.base,_117c=args.da||30,hsv=base.toHsv();var baseh=((hsv.h*2)+137<360)?(hsv.h*2)+137:Math.floor(hsv.h/2)-137,h1=(baseh-_117c+360)%360,h2=(baseh+_117c)%360,s1=Math.max(hsv.s-10,0),s2=_1179(hsv.s,10,100),s3=Math.min(100,hsv.s+20),v1=Math.min(100,hsv.v+30),v2=(hsv.v>20)?hsv.v-30:hsv.v+30;return new dxc.Palette([dxc.fromHsv(h1,s1,v1),dxc.fromHsv(h1,s2,v2),base,dxc.fromHsv(h2,s3,v2),dxc.fromHsv(h2,hsv.s,hsv.v)]);},compound:function(args){var base=lang.isString(args.base)?new dxc.Color(args.base):args.base,hsv=base.toHsv();var h1=((hsv.h*2)+18<360)?(hsv.h*2)+18:Math.floor(hsv.h/2)-18,h2=((hsv.h*2)+120<360)?(hsv.h*2)+120:Math.floor(hsv.h/2)-120,h3=((hsv.h*2)+99<360)?(hsv.h*2)+99:Math.floor(hsv.h/2)-99,s1=(hsv.s-40>10)?hsv.s-40:hsv.s+40,s2=(hsv.s-10>80)?hsv.s-10:hsv.s+10,s3=(hsv.s-25>10)?hsv.s-25:hsv.s+25,v1=(hsv.v-40>10)?hsv.v-40:hsv.v+40,v2=(hsv.v-20>80)?hsv.v-20:hsv.v+20,v3=Math.max(hsv.v,20);return new dxc.Palette([dxc.fromHsv(h1,s1,v1),dxc.fromHsv(h1,s2,v2),base,dxc.fromHsv(h2,s3,v3),dxc.fromHsv(h3,s2,v2)]);},shades:function(args){var base=lang.isString(args.base)?new dxc.Color(args.base):args.base,hsv=base.toHsv();var s=(hsv.s==100&&hsv.v==0)?0:hsv.s,v1=(hsv.v-50>20)?hsv.v-50:hsv.v+30,v2=(hsv.v-25>=20)?hsv.v-25:hsv.v+55,v3=(hsv.v-75>=20)?hsv.v-75:hsv.v+5,v4=Math.max(hsv.v-10,20);return new dxc.Palette([new dxc.fromHsv(hsv.h,s,v1),new dxc.fromHsv(hsv.h,s,v2),base,new dxc.fromHsv(hsv.h,s,v3),new dxc.fromHsv(hsv.h,s,v4)]);}},generate:function(base,type){if(lang.isFunction(type)){return type({base:base});}else{if(dxc.Palette.generators[type]){return dxc.Palette.generators[type]({base:base});}}throw new Error("dojox.color.Palette.generate: the specified generator ('"+type+"') does not exist.");}});return dxc.Palette;});},"esri/dijit/Gauge":function(){require({cache:{"url:esri/dijit/templates/Gauge.html":"<div class=\"gaugeContainer\">\r\n  <div data-dojo-attach-point=\"titleNode\" class=\"gaugeTitle\">${title}</div>\r\n  <div data-dojo-attach-point=\"dataLabelWrapperNode\">\r\n    <div data-dojo-attach-point=\"dataLabelNode\">${dataLabel}</div>\r\n  </div>\r\n  <div data-dojo-attach-point=\"gaugeNode\" style=\"margin: -10px auto 10px auto; width: 240px; height: 120px;\"></div>\r\n  <div data-dojo-attach-point=\"captionNode\" class=\"gaugeCaption\">${caption}</div>\r\n</div>\r\n"}});define("esri/dijit/Gauge",["dojo/_base/declare","dojo/_base/lang","dojo/_base/connect","dojo/dom-construct","dojo/dom-geometry","dojo/dom-style","dojo/number","dojo/text!esri/dijit/templates/Gauge.html","dijit/_WidgetBase","dijit/_TemplatedMixin","dojox/widget/AnalogGauge","dojox/widget/gauge/AnalogArcIndicator"],function(_117d,lang,conn,_117e,_117f,style,_1180,_1181,_1182,_1183,_1184,_1185){var Gauge=_117d("esri.dijit.Gauge",[_1182,_1183],{templateString:_1181,widgetsInTemplate:false,constructor:function(_1186,_1187){this.caption="&nbsp;";this.color="#000";this.dataFormat="value";this.maxDataValue=100;this.title="&nbsp;";this.unitLabel="";this.fromWebmap=false;this.feature=null;this.dataLabel="&nbsp;";lang.mixin(this,_1186);this._majorTicks="";this.value=0;this.numberFormat=this.numberFormat||{"places":0};if(this.fromWebmap){this.dataField=this.field;this.dataFormat=this.valueLabel;this.dataLabelField=this.displayField;this.maxDataValue=this.target;this.unitLabel="";}if(this.dataFormat=="percentage"){this.unitLabel="%";this._majorTicks={offset:90,interval:25,length:3,color:"black"};}this.watch("caption",this._updateCaption);this.watch("dataLabel",this._updateDataLabel);this.watch("title",this._updateTitle);this.watch("value",this._updateValue);this.watch("feature",this._updateFeature);},startup:function(){this.inherited(arguments);var _1188=new _1185({interactionMode:"indicator",noChange:true,value:this.maxDataValue,width:20,offset:65,color:[204,204,204,1],title:"value",hideValue:true,duration:100});var _1189=new _1185({interactionMode:"indicator",noChange:false,value:this.value,width:20,offset:65,color:this.color,title:"value",hideValue:true,onDragMove:"",duration:100});this.gaugeWidget=new _1184({background:[204,204,204,0],width:parseInt(this.gaugeNode.style.width),height:parseInt(this.gaugeNode.style.height)+10,cx:parseInt(this.gaugeNode.style.width)/2,cy:parseInt(this.gaugeNode.style.height),style:"position: absolute;",radius:parseInt(this.gaugeNode.style.width)/2,useTooltip:false,ranges:[{low:0,high:this.maxDataValue,color:"rgba(255,0,0,0)"}],majorTicks:this._majorTicks,indicators:[_1188,_1189]},_117e.create("div",null,this.gaugeNode));this.gaugeWidget.startup();this.gaugeWidget._handleMouseDownIndicator=function(){};this.valueNode=_117e.create("div",{"innerHTML":"0"+this.unitLabel,"style":{"bottom":parseInt(this.gaugeNode.style.height)-(this.gaugeWidget.cy-20)+"px","color":"#000","font-family":"arial","font-size":"1em","left":"-1000px","position":"absolute"}},this.gaugeWidget.domNode);var _118a=_117f.getContentBox(this.valueNode);style.set(this.valueNode,"left",this.gaugeWidget.cx+"px");style.set(this.valueNode,"marginLeft",(-_118a.w/2)+"px");if(this.gaugeWidget.cx){style.set(this.valueNode,"marginBottom",(-_118a.h/2)+"px");}if(this.layer){this._connectMouseOver();}},destroy:function(){if(this._mouseOverHandler){conn.disconnect(this._mouseOverHandler);}this.gaugeWidget.destroy();_117e.empty(this.domNode);},_connectMouseOver:function(){this._mouseOverHandler=conn.connect(this.layer,"onMouseOver",lang.hitch(this,function(e){this.set("feature",e);}));},_formatValue:function(val){if(this.dataFormat=="percentage"){val=Math.round((val/this.maxDataValue)*100);}return _1180.format(val,this.numberFormat);},_updateCaption:function(attr,_118b,_118c){this.captionNode.innerHTML=_118c;},_updateTitle:function(attr,_118d,_118e){this.titleNode.innerHTML=_118e;},_updateValue:function(attr,_118f,_1190){var val=this._formatValue(_1190);this.valueNode.innerHTML=val+this.unitLabel;this.gaugeWidget.indicators[1].update(parseInt(val));},_updateDataLabel:function(attr,_1191,_1192){this.dataLabelNode.innerHTML=_1192;},_updateFeature:function(attr,_1193,_1194){if(!_1194||(_1194.hasOwnPropety&&!_1194.hasOwnProperty("graphic")&&!_1194.declaredClass=="esri.Graphic")){console.log("Gauge Dijit:  a graphic is required to update the gauge.");return;}this.feature=_1194.graphic||_1194;this.set("value",this.feature.attributes[this.dataField]||0);this.set("dataLabel",this.feature.attributes[this.dataLabelField]||this.noDataLabel);}});return Gauge;});},"url:dijit/form/templates/Spinner.html":"<div class=\"dijit dijitReset dijitInline dijitLeft\"\n\tid=\"widget_${id}\" role=\"presentation\"\n\t><div class=\"dijitReset dijitButtonNode dijitSpinnerButtonContainer\"\n\t\t><input class=\"dijitReset dijitInputField dijitSpinnerButtonInner\" type=\"text\" tabIndex=\"-1\" readonly=\"readonly\" role=\"presentation\"\n\t\t/><div class=\"dijitReset dijitLeft dijitButtonNode dijitArrowButton dijitUpArrowButton\"\n\t\t\tdata-dojo-attach-point=\"upArrowNode\"\n\t\t\t><div class=\"dijitArrowButtonInner\"\n\t\t\t\t><input class=\"dijitReset dijitInputField\" value=\"&#9650; \" type=\"text\" tabIndex=\"-1\" readonly=\"readonly\" role=\"presentation\"\n\t\t\t\t\t${_buttonInputDisabled}\n\t\t\t/></div\n\t\t></div\n\t\t><div class=\"dijitReset dijitLeft dijitButtonNode dijitArrowButton dijitDownArrowButton\"\n\t\t\tdata-dojo-attach-point=\"downArrowNode\"\n\t\t\t><div class=\"dijitArrowButtonInner\"\n\t\t\t\t><input class=\"dijitReset dijitInputField\" value=\"&#9660; \" type=\"text\" tabIndex=\"-1\" readonly=\"readonly\" role=\"presentation\"\n\t\t\t\t\t${_buttonInputDisabled}\n\t\t\t/></div\n\t\t></div\n\t></div\n\t><div class='dijitReset dijitValidationContainer'\n\t\t><input class=\"dijitReset dijitInputField dijitValidationIcon dijitValidationInner\" value=\"&#935; \" type=\"text\" tabIndex=\"-1\" readonly=\"readonly\" role=\"presentation\"\n\t/></div\n\t><div class=\"dijitReset dijitInputField dijitInputContainer\"\n\t\t><input class='dijitReset dijitInputInner' data-dojo-attach-point=\"textbox,focusNode\" type=\"${type}\" data-dojo-attach-event=\"onkeypress:_onKeyPress\"\n\t\t\trole=\"spinbutton\" autocomplete=\"off\" ${!nameAttrSetting}\n\t/></div\n></div>\n","dojox/charting/plot2d/Grid":function(){define("dojox/charting/plot2d/Grid",["dojo/_base/lang","dojo/_base/declare","dojo/_base/connect","dojo/_base/array","./CartesianBase","./common","dojox/lang/utils","dojox/gfx/fx"],function(lang,_1195,hub,arr,_1196,dc,du,fx){return _1195("dojox.charting.plot2d.Grid",_1196,{defaultParams:{hAxis:"x",vAxis:"y",hMajorLines:true,hMinorLines:false,vMajorLines:true,vMinorLines:false,hStripes:false,vStripes:false,animate:null,enableCache:false,renderOnAxis:true},optionalParams:{majorHLine:{},minorHLine:{},majorVLine:{},minorVLine:{}},constructor:function(chart,_1197){this.opt=lang.clone(this.defaultParams);du.updateWithObject(this.opt,_1197);du.updateWithPattern(this.opt,_1197,this.optionalParams);this.hAxis=this.opt.hAxis;this.vAxis=this.opt.vAxis;this.animate=this.opt.animate;if(this.opt.enableCache){this._lineFreePool=[];this._lineUsePool=[];}},addSeries:function(run){return this;},getSeriesStats:function(){return lang.delegate(dc.defaultStats);},cleanGroup:function(){this.inherited(arguments);if(this.opt.enableCache){this._lineFreePool=this._lineFreePool.concat(this._lineUsePool);this._lineUsePool=[];}},createLine:function(_1198,_1199){var line;if(this.opt.enableCache&&this._lineFreePool.length>0){line=this._lineFreePool.pop();line.setShape(_1199);_1198.add(line);}else{line=_1198.createLine(_1199);}if(this.opt.enableCache){this._lineUsePool.push(line);}return line;},render:function(dim,_119a){if(this.zoom){return this.performZoom(dim,_119a);}this.dirty=this.isDirty();if(!this.dirty){return this;}this.cleanGroup();var s=this.group,ta=this.chart.theme,_119b;var _119c=this.opt.renderOnAxis;if(this._vAxis){var _119d=this._vAxis.getScaler();if(_119d){var vt=_119d.scaler.getTransformerFromModel(_119d);var ticks;ticks=this._vAxis.getTicks();if(ticks!=null){if(this.opt.hMinorLines){_119b=this.opt.minorHLine||(ta.grid&&ta.grid.minorLine)||ta.axis.minorTick;arr.forEach(ticks.minor,function(tick){if(!_119c&&tick.value==(this._vAxis.opt.leftBottom?_119d.bounds.from:_119d.bounds.to)){return;}var y=dim.height-_119a.b-vt(tick.value);var _119e=this.createLine(s,{x1:_119a.l,y1:y,x2:dim.width-_119a.r,y2:y}).setStroke(_119b);if(this.animate){this._animateGrid(_119e,"h",_119a.l,_119a.r+_119a.l-dim.width);}},this);}if(this.opt.hMajorLines){_119b=this.opt.majorHLine||(ta.grid&&ta.grid.majorLine)||ta.axis.majorTick;arr.forEach(ticks.major,function(tick){if(!_119c&&tick.value==(this._vAxis.opt.leftBottom?_119d.bounds.from:_119d.bounds.to)){return;}var y=dim.height-_119a.b-vt(tick.value);var _119f=this.createLine(s,{x1:_119a.l,y1:y,x2:dim.width-_119a.r,y2:y}).setStroke(_119b);if(this.animate){this._animateGrid(_119f,"h",_119a.l,_119a.r+_119a.l-dim.width);}},this);}}}}if(this._hAxis){var _11a0=this._hAxis.getScaler();if(_11a0){var ht=_11a0.scaler.getTransformerFromModel(_11a0);ticks=this._hAxis.getTicks();if(this!=null){if(ticks&&this.opt.vMinorLines){_119b=this.opt.minorVLine||(ta.grid&&ta.grid.minorLine)||ta.axis.minorTick;arr.forEach(ticks.minor,function(tick){if(!_119c&&tick.value==(this._hAxis.opt.leftBottom?_11a0.bounds.from:_11a0.bounds.to)){return;}var x=_119a.l+ht(tick.value);var _11a1=this.createLine(s,{x1:x,y1:_119a.t,x2:x,y2:dim.height-_119a.b}).setStroke(_119b);if(this.animate){this._animateGrid(_11a1,"v",dim.height-_119a.b,dim.height-_119a.b-_119a.t);}},this);}if(ticks&&this.opt.vMajorLines){_119b=this.opt.majorVLine||(ta.grid&&ta.grid.majorLine)||ta.axis.majorTick;arr.forEach(ticks.major,function(tick){if(!_119c&&tick.value==(this._hAxis.opt.leftBottom?_11a0.bounds.from:_11a0.bounds.to)){return;}var x=_119a.l+ht(tick.value);var _11a2=this.createLine(s,{x1:x,y1:_119a.t,x2:x,y2:dim.height-_119a.b}).setStroke(_119b);if(this.animate){this._animateGrid(_11a2,"v",dim.height-_119a.b,dim.height-_119a.b-_119a.t);}},this);}}}}this.dirty=false;return this;},_animateGrid:function(shape,type,_11a3,size){var _11a4=type=="h"?[_11a3,0]:[0,_11a3];var _11a5=type=="h"?[1/size,1]:[1,1/size];fx.animateTransform(lang.delegate({shape:shape,duration:1200,transform:[{name:"translate",start:_11a4,end:[0,0]},{name:"scale",start:_11a5,end:[1,1]},{name:"original"}]},this.animate)).play();}});});},"dojox/lang/utils":function(){define("dojox/lang/utils",["..","dojo/_base/lang"],function(dojox,lang){var du=lang.getObject("lang.utils",true,dojox);var empty={},opts=Object.prototype.toString;var clone=function(o){if(o){switch(opts.call(o)){case "[object Array]":return o.slice(0);case "[object Object]":return lang.delegate(o);}}return o;};lang.mixin(du,{coerceType:function(_11a6,_11a7){switch(typeof _11a6){case "number":return Number(eval("("+_11a7+")"));case "string":return String(_11a7);case "boolean":return Boolean(eval("("+_11a7+")"));}return eval("("+_11a7+")");},updateWithObject:function(_11a8,_11a9,conv){if(!_11a9){return _11a8;}for(var x in _11a8){if(x in _11a9&&!(x in empty)){var t=_11a8[x];if(t&&typeof t=="object"){du.updateWithObject(t,_11a9[x],conv);}else{_11a8[x]=conv?du.coerceType(t,_11a9[x]):clone(_11a9[x]);}}}return _11a8;},updateWithPattern:function(_11aa,_11ab,_11ac,conv){if(!_11ab||!_11ac){return _11aa;}for(var x in _11ac){if(x in _11ab&&!(x in empty)){_11aa[x]=conv?du.coerceType(_11ac[x],_11ab[x]):clone(_11ab[x]);}}return _11aa;},merge:function(_11ad,mixin){if(mixin){var otype=opts.call(_11ad),mtype=opts.call(mixin),t,i,l,m;switch(mtype){case "[object Array]":if(mtype==otype){t=new Array(Math.max(_11ad.length,mixin.length));for(i=0,l=t.length;i<l;++i){t[i]=du.merge(_11ad[i],mixin[i]);}return t;}return mixin.slice(0);case "[object Object]":if(mtype==otype&&_11ad){t=lang.delegate(_11ad);for(i in mixin){if(i in _11ad){l=_11ad[i];m=mixin[i];if(m!==l){t[i]=du.merge(l,m);}}else{t[i]=lang.clone(mixin[i]);}}return t;}return lang.clone(mixin);}}return mixin;}});return du;});},"esri/toolbars/_Box":function(){define("esri/toolbars/_Box",["dijit","dojo","dojox","dojo/require!dojox/gfx/Moveable,dojox/gfx/matrix"],function(dijit,dojo,dojox){dojo.provide("esri.toolbars._Box");dojo.require("dojox.gfx.Moveable");dojo.require("dojox.gfx.matrix");dojo.declare("esri.toolbars._Box",null,{constructor:function(_11ae,map,_11af,scale,_11b0,_11b1){this._graphic=_11ae;this._map=map;this._toolbar=_11af;this._scale=scale;this._rotate=_11b0;this._defaultEventArgs={};this._scaleEvent="Scale";this._rotateEvent="Rotate";this._uniformScaling=_11b1;var _11b2=_11af._options;this._markerSymbol=_11b2.boxHandleSymbol;this._lineSymbol=_11b2.boxLineSymbol;this._moveStartHandler=dojo.hitch(this,this._moveStartHandler);this._firstMoveHandler=dojo.hitch(this,this._firstMoveHandler);this._moveStopHandler=dojo.hitch(this,this._moveStopHandler);this._moveHandler=dojo.hitch(this,this._moveHandler);this._init();},destroy:function(){this._cleanUp();this._graphic=this._map=this._toolbar=this._markerSymbol=this._lineSymbol=null;},refresh:function(){this._draw();},suspend:function(){dojo.forEach(this._getAllGraphics(),function(g){g.hide();});},resume:function(){dojo.forEach(this._getAllGraphics(),function(g){g.show();});this._draw();},_init:function(){this._draw();},_cleanUp:function(){if(this._connects){dojo.forEach(this._connects,dojo.disconnect,dojo);}var _11b3=this._toolbar._scratchGL;if(this._anchors){dojo.forEach(this._anchors,function(info){_11b3.remove(info.graphic);var mov=info.moveable;if(mov){mov.destroy();}});}if(this._box){_11b3.remove(this._box);}this._box=this._anchors=this._connects=null;},_draw:function(){if(!this._graphic.getDojoShape()){this._cleanUp();return;}var map=this._map,_11b4=this._toolbar._scratchGL;var _11b5=this._getBoxCoords();var _11b6=new esri.geometry.Polyline(map.spatialReference);var path=dojo.clone(dojo.filter(_11b5,function(pt,index){return (index!==8&&index%2===0);}));if(path[0]){path.push([path[0][0],path[0][1]]);}_11b6.addPath(path);if(this._rotate){_11b6.addPath([_11b5[1],_11b5[8]]);}if(this._box){this._box.setGeometry(_11b6);}else{this._box=new esri.Graphic(_11b6,this._lineSymbol);_11b4.add(this._box);}if(this._anchors){dojo.forEach(this._anchors,function(info,index){if(!this._scale){index=8;}var point=new esri.geometry.Point(_11b5[index],map.spatialReference);info.graphic.setGeometry(point);var mov=info.moveable,shape=info.graphic.getDojoShape();if(shape){if(!mov){info.moveable=this._getMoveable(info.graphic,index);}else{if(shape!==mov.shape){mov.destroy();info.moveable=this._getMoveable(info.graphic,index);}}}},this);}else{this._anchors=[];this._connects=[];dojo.forEach(_11b5,function(point,index){if(!this._scale&&index<8){return;}point=new esri.geometry.Point(point,map.spatialReference);var _11b7=new esri.Graphic(point,this._markerSymbol);_11b4.add(_11b7);this._anchors.push({graphic:_11b7,moveable:this._getMoveable(_11b7,index)});},this);}},_getBoxCoords:function(_11b8){var _11b9=this._graphic,map=this._map,bbox=this._getTransformedBoundingBox(_11b9),_11ba=[],pt,next,midpt;dojo.forEach(bbox,function(coord,index,arr){pt=coord;next=arr[index+1];if(!next){next=arr[0];}midpt={x:(pt.x+next.x)/2,y:(pt.y+next.y)/2};if(!_11b8){pt=map.toMap(pt);midpt=map.toMap(midpt);}_11ba.push([pt.x,pt.y]);_11ba.push([midpt.x,midpt.y]);});if(this._rotate){var _11bb=dojo.clone(_11ba[1]);_11bb=_11b8?{x:_11bb[0],y:_11bb[1]}:map.toScreen({x:_11bb[0],y:_11bb[1],spatialReference:map.spatialReference});_11bb.y-=this._toolbar._options.rotateHandleOffset;if(!_11b8){_11bb=map.toMap(_11bb);}_11ba.push([_11bb.x,_11bb.y]);}return _11ba;},_getTransformedBoundingBox:function(_11bc){var map=this._map,_11bd=_11bc.geometry.getExtent(),_11be=_11bc.geometry.spatialReference,_11bf=new esri.geometry.Point(_11bd.xmin,_11bd.ymax,_11be),_11c0=new esri.geometry.Point(_11bd.xmax,_11bd.ymin,_11be);_11bf=map.toScreen(_11bf);_11c0=map.toScreen(_11c0);return [{x:_11bf.x,y:_11bf.y},{x:_11c0.x,y:_11bf.y},{x:_11c0.x,y:_11c0.y},{x:_11bf.x,y:_11c0.y}];},_getAllGraphics:function(){var _11c1=[this._box];if(this._anchors){dojo.forEach(this._anchors,function(_11c2){_11c1.push(_11c2.graphic);});}_11c1=dojo.filter(_11c1,esri._isDefined);return _11c1;},_getMoveable:function(_11c3,index){var shape=_11c3.getDojoShape();if(!shape){return;}var _11c4=new dojox.gfx.Moveable(shape);_11c4._index=index;this._connects.push(dojo.connect(_11c4,"onMoveStart",this._moveStartHandler));this._connects.push(dojo.connect(_11c4,"onFirstMove",this._firstMoveHandler));this._connects.push(dojo.connect(_11c4,"onMoveStop",this._moveStopHandler));_11c4.onMove=this._moveHandler;var node=shape.getEventSource();if(node){dojo.style(node,"cursor",this._toolbar._cursors["box"+index]);}return _11c4;},_moveStartHandler:function(mover){this._toolbar["on"+(mover.host._index===8?this._rotateEvent:this._scaleEvent)+"Start"](this._graphic);},_firstMoveHandler:function(mover){var index=mover.host._index,_11c5=(this._wrapOffset=mover.host.shape._wrapOffsets[0]||0),_11c6=this._graphic.getLayer()._div.getTransform(),mx=dojox.gfx.matrix,_11c7,_11c8,_11c9,_11ca=dojo.map(this._getBoxCoords(true),function(arr){return {x:arr[0]+_11c5,y:arr[1]};});_11c9={x:_11ca[1].x,y:_11ca[3].y};this._centerCoord=mx.multiplyPoint(mx.invert(_11c6),_11c9);if(index===8){_11c7=mx.multiplyPoint(mx.invert(_11c6),_11ca[1]);this._startLine=[this._centerCoord,_11c7];this._moveLine=dojo.clone(this._startLine);}else{_11c7=mx.multiplyPoint(mx.invert(_11c6),_11ca[index]);_11c8=mx.multiplyPoint(mx.invert(_11c6),_11ca[(index+4)%8]);this._firstMoverToCenter=Math.sqrt((_11c7.x-this._centerCoord.x)*(_11c7.x-this._centerCoord.x)+(_11c7.y-this._centerCoord.y)*(_11c7.y-this._centerCoord.y));this._startBox=_11c8;this._startBox.width=(_11ca[4].x-_11ca[0].x);this._startBox.height=(_11ca[4].y-_11ca[0].y);this._moveBox=dojo.clone(this._startBox);this._xfactor=_11c7.x>_11c8.x?1:-1;this._yfactor=_11c7.y>_11c8.y?1:-1;if(index===1||index===5){this._xfactor=0;}else{if(index===3||index===7){this._yfactor=0;}}}this._toolbar._beginOperation("BOX");this._toolbar["on"+(index===8?this._rotateEvent:this._scaleEvent)+"FirstMove"](this._graphic);},_moveHandler:function(mover,shift){var index=mover.host._index,args=this._defaultEventArgs,start,move,tx,pt,angle,_11cb,_11cc,_11cd=0,_11ce=0,_11cf,_11d0,_11d1;args.angle=0;args.scaleX=1;args.scaleY=1;if(index===8){start=this._startLine;move=this._moveLine;pt=move[1];pt.x+=shift.dx;pt.y+=shift.dy;angle=this._getAngle(start,move);tx=dojox.gfx.matrix.rotategAt(angle,start[0]);this._graphic.getDojoShape().setTransform(tx);args.transform=tx;args.angle=angle;args.around=start[0];}else{start=this._startBox;move=this._moveBox;move.width+=(shift.dx*this._xfactor);move.height+=(shift.dy*this._yfactor);if(this._uniformScaling){_11cf=move.x+this._xfactor*move.width;_11d0=move.y+this._yfactor*move.height;_11d1=Math.sqrt((_11cf-this._centerCoord.x)*(_11cf-this._centerCoord.x)+(_11d0-this._centerCoord.y)*(_11d0-this._centerCoord.y));_11cb=_11cc=_11d1/this._firstMoverToCenter;_11cd=this._xfactor*start.width/2;_11ce=this._yfactor*start.height/2;}else{_11cb=move.width/start.width;_11cc=move.height/start.height;}if(isNaN(_11cb)||_11cb===Infinity||_11cb===-Infinity){_11cb=1;}if(isNaN(_11cc)||_11cc===Infinity||_11cc===-Infinity){_11cc=1;}tx=dojox.gfx.matrix.scaleAt(_11cb,_11cc,start.x+_11cd,start.y+_11ce);this._graphic.getDojoShape().setTransform(tx);args.transform=tx;args.scaleX=_11cb;args.scaleY=_11cc;args.around={x:start.x+_11cd,y:start.y+_11ce};}this._toolbar["on"+(index===8?this._rotateEvent:this._scaleEvent)](this._graphic,args);},_moveStopHandler:function(mover){var _11d2=this._graphic,_11d3=this._toolbar,_11d4=_11d3._geo?esri.geometry.geographicToWebMercator(_11d2.geometry):_11d2.geometry,_11d5=_11d4.spatialReference,shape=_11d2.getDojoShape(),_11d6=shape.getTransform(),_11d7=_11d2.getLayer()._div.getTransform();_11d4=_11d4.toJson();this._updateSegments(_11d4.paths||_11d4.rings,_11d6,_11d7,_11d5);shape.setTransform(null);_11d4=esri.geometry.fromJson(_11d4);_11d2.setGeometry(_11d3._geo?esri.geometry.webMercatorToGeographic(_11d4,true):_11d4);this._draw();this._startBox=this._moveBox=this._xfactor=this._yfactor=null;this._startLine=this._moveLine=null;_11d3._endOperation("BOX");this._defaultEventArgs.transform=_11d6;_11d3["on"+(mover.host._index===8?this._rotateEvent:this._scaleEvent)+"Stop"](this._graphic,this._defaultEventArgs);},_updateSegments:function(_11d8,_11d9,_11da,_11db){var mx=dojox.gfx.matrix,map=this._map,_11dc=this._wrapOffset||0;dojo.forEach(_11d8,function(_11dd){dojo.forEach(_11dd,function(point){var _11de=map.toScreen({x:point[0],y:point[1],spatialReference:_11db},true);_11de.x+=_11dc;_11de=mx.multiplyPoint([_11da,_11d9,mx.invert(_11da)],_11de);_11de.x-=_11dc;var mapPt=map.toMap(_11de);point[0]=mapPt.x;point[1]=mapPt.y;});});},_getAngle:function(line1,line2){var _11df=Math.atan2(line1[0].y-line1[1].y,line1[0].x-line1[1].x)*180/Math.PI,_11e0=Math.atan2(line2[0].y-line2[1].y,line2[0].x-line2[1].x)*180/Math.PI;return _11e0-_11df;}});});},"dojox/charting/plot2d/Markers":function(){define("dojox/charting/plot2d/Markers",["dojo/_base/declare","./Default"],function(_11e1,_11e2){return _11e1("dojox.charting.plot2d.Markers",_11e2,{constructor:function(){this.opt.markers=true;}});});},"dojox/charting/plot2d/Columns":function(){define("dojox/charting/plot2d/Columns",["dojo/_base/lang","dojo/_base/array","dojo/_base/declare","./CartesianBase","./_PlotEvents","./common","dojox/lang/functional","dojox/lang/functional/reversed","dojox/lang/utils","dojox/gfx/fx"],function(lang,arr,_11e3,_11e4,_11e5,dc,df,dfr,du,fx){var _11e6=dfr.lambda("item.purgeGroup()");return _11e3("dojox.charting.plot2d.Columns",[_11e4,_11e5],{defaultParams:{hAxis:"x",vAxis:"y",gap:0,animate:null,enableCache:false},optionalParams:{minBarSize:1,maxBarSize:1,stroke:{},outline:{},shadow:{},fill:{},styleFunc:null,font:"",fontColor:""},constructor:function(chart,_11e7){this.opt=lang.clone(this.defaultParams);du.updateWithObject(this.opt,_11e7);du.updateWithPattern(this.opt,_11e7,this.optionalParams);this.series=[];this.hAxis=this.opt.hAxis;this.vAxis=this.opt.vAxis;this.animate=this.opt.animate;},getSeriesStats:function(){var stats=dc.collectSimpleStats(this.series);stats.hmin-=0.5;stats.hmax+=0.5;return stats;},createRect:function(run,_11e8,_11e9){var rect;if(this.opt.enableCache&&run._rectFreePool.length>0){rect=run._rectFreePool.pop();rect.setShape(_11e9);_11e8.add(rect);}else{rect=_11e8.createRect(_11e9);}if(this.opt.enableCache){run._rectUsePool.push(rect);}return rect;},render:function(dim,_11ea){if(this.zoom&&!this.isDataDirty()){return this.performZoom(dim,_11ea);}this.getSeriesStats();this.resetEvents();this.dirty=this.isDirty();var s;if(this.dirty){arr.forEach(this.series,_11e6);this._eventSeries={};this.cleanGroup();s=this.group;df.forEachRev(this.series,function(item){item.cleanGroup(s);});}var t=this.chart.theme,ht=this._hScaler.scaler.getTransformerFromModel(this._hScaler),vt=this._vScaler.scaler.getTransformerFromModel(this._vScaler),_11eb=Math.max(0,this._vScaler.bounds.lower),_11ec=vt(_11eb),min=Math.max(0,Math.floor(this._hScaler.bounds.from-1)),_11ed=this.events();var bar=this.getBarProperties();for(var i=this.series.length-1;i>=0;--i){var run=this.series[i];if(!this.dirty&&!run.dirty){t.skip();this._reconnectEvents(run.name);continue;}run.cleanGroup();if(this.opt.enableCache){run._rectFreePool=(run._rectFreePool?run._rectFreePool:[]).concat(run._rectUsePool?run._rectUsePool:[]);run._rectUsePool=[];}var theme=t.next("column",[this.opt,run]),_11ee=new Array(run.data.length);s=run.group;var l=this.getDataLength(run);var _11ef=arr.some(run.data,function(item){return typeof item=="number"||(item&&!item.hasOwnProperty("x"));});for(var j=min;j<l;++j){var value=run.data[j];if(value!=null){var val=this.getValue(value,j,i,_11ef),vv=vt(val.y),h=Math.abs(vv-_11ec),_11f0,_11f1;if(this.opt.styleFunc||typeof value!="number"){var _11f2=typeof value!="number"?[value]:[];if(this.opt.styleFunc){_11f2.push(this.opt.styleFunc(value));}_11f0=t.addMixin(theme,"column",_11f2,true);}else{_11f0=t.post(theme,"column");}if(bar.width>=1&&h>=0){var rect={x:_11ea.l+ht(val.x+0.5)+bar.gap+bar.thickness*i,y:dim.height-_11ea.b-(val.y>_11eb?vv:_11ec),width:bar.width,height:h};if(_11f0.series.shadow){var srect=lang.clone(rect);srect.x+=_11f0.series.shadow.dx;srect.y+=_11f0.series.shadow.dy;_11f1=this.createRect(run,s,srect).setFill(_11f0.series.shadow.color).setStroke(_11f0.series.shadow);if(this.animate){this._animateColumn(_11f1,dim.height-_11ea.b+_11ec,h);}}var _11f3=this._plotFill(_11f0.series.fill,dim,_11ea);_11f3=this._shapeFill(_11f3,rect);var shape=this.createRect(run,s,rect).setFill(_11f3).setStroke(_11f0.series.stroke);run.dyn.fill=shape.getFill();run.dyn.stroke=shape.getStroke();if(_11ed){var o={element:"column",index:j,run:run,shape:shape,shadow:_11f1,x:val.x+0.5,y:val.y};this._connectEvents(o);_11ee[j]=o;}if(this.animate){this._animateColumn(shape,dim.height-_11ea.b-_11ec,h);}}}}this._eventSeries[run.name]=_11ee;run.dirty=false;}this.dirty=false;return this;},getDataLength:function(run){return Math.min(run.data.length,Math.ceil(this._hScaler.bounds.to));},getValue:function(value,j,_11f4,_11f5){var y,x;if(_11f5){if(typeof value=="number"){y=value;}else{y=value.y;}x=j;}else{y=value.y;x=value.x-1;}return {y:y,x:x};},getBarProperties:function(){var f=dc.calculateBarSize(this._hScaler.bounds.scale,this.opt);return {gap:f.gap,width:f.size,thickness:0};},_animateColumn:function(shape,_11f6,vsize){if(vsize==0){vsize=1;}fx.animateTransform(lang.delegate({shape:shape,duration:1200,transform:[{name:"translate",start:[0,_11f6-(_11f6/vsize)],end:[0,0]},{name:"scale",start:[1,1/vsize],end:[1,1]},{name:"original"}]},this.animate)).play();}});});},"dojox/gfx/move":function(){define("dojox/gfx/move",["dojo/_base/lang","./Mover","./Moveable"],function(lang){return lang.getObject("dojox.gfx.move",true);});},"dojo/data/util/simpleFetch":function(){define(["../../_base/lang","../../_base/kernel","./sorter"],function(lang,_11f7,_11f8){var _11f9={};lang.setObject("dojo.data.util.simpleFetch",_11f9);_11f9.errorHandler=function(_11fa,_11fb){if(_11fb.onError){var scope=_11fb.scope||_11f7.global;_11fb.onError.call(scope,_11fa,_11fb);}};_11f9.fetchHandler=function(items,_11fc){var _11fd=_11fc.abort||null,_11fe=false,_11ff=_11fc.start?_11fc.start:0,_1200=(_11fc.count&&(_11fc.count!==Infinity))?(_11ff+_11fc.count):items.length;_11fc.abort=function(){_11fe=true;if(_11fd){_11fd.call(_11fc);}};var scope=_11fc.scope||_11f7.global;if(!_11fc.store){_11fc.store=this;}if(_11fc.onBegin){_11fc.onBegin.call(scope,items.length,_11fc);}if(_11fc.sort){items.sort(_11f8.createSortFunction(_11fc.sort,this));}if(_11fc.onItem){for(var i=_11ff;(i<items.length)&&(i<_1200);++i){var item=items[i];if(!_11fe){_11fc.onItem.call(scope,item,_11fc);}}}if(_11fc.onComplete&&!_11fe){var _1201=null;if(!_11fc.onItem){_1201=items.slice(_11ff,_1200);}_11fc.onComplete.call(scope,_1201,_11fc);}};_11f9.fetch=function(_1202){_1202=_1202||{};if(!_1202.store){_1202.store=this;}this._fetchItems(_1202,lang.hitch(this,"fetchHandler"),lang.hitch(this,"errorHandler"));return _1202;};return _11f9;});},"dojo/dnd/Source":function(){define(["../_base/array","../_base/connect","../_base/declare","../_base/kernel","../_base/lang","../dom-class","../dom-geometry","../mouse","../ready","../topic","./common","./Selector","./Manager"],function(array,_1203,_1204,_1205,lang,_1206,_1207,mouse,ready,topic,dnd,_1208,_1209){if(!_1205.isAsync){ready(0,function(){var _120a=["dojo/dnd/AutoSource","dojo/dnd/Target"];require(_120a);});}var _120b=_1204("dojo.dnd.Source",_1208,{isSource:true,horizontal:false,copyOnly:false,selfCopy:false,selfAccept:true,skipForm:false,withHandles:false,autoSync:false,delay:0,accept:["text"],generateText:true,constructor:function(node,_120c){lang.mixin(this,lang.mixin({},_120c));var type=this.accept;if(type.length){this.accept={};for(var i=0;i<type.length;++i){this.accept[type[i]]=1;}}this.isDragging=false;this.mouseDown=false;this.targetAnchor=null;this.targetBox=null;this.before=true;this._lastX=0;this._lastY=0;this.sourceState="";if(this.isSource){_1206.add(this.node,"dojoDndSource");}this.targetState="";if(this.accept){_1206.add(this.node,"dojoDndTarget");}if(this.horizontal){_1206.add(this.node,"dojoDndHorizontal");}this.topics=[topic.subscribe("/dnd/source/over",lang.hitch(this,"onDndSourceOver")),topic.subscribe("/dnd/start",lang.hitch(this,"onDndStart")),topic.subscribe("/dnd/drop",lang.hitch(this,"onDndDrop")),topic.subscribe("/dnd/cancel",lang.hitch(this,"onDndCancel"))];},checkAcceptance:function(_120d,nodes){if(this==_120d){return !this.copyOnly||this.selfAccept;}for(var i=0;i<nodes.length;++i){var type=_120d.getItem(nodes[i].id).type;var flag=false;for(var j=0;j<type.length;++j){if(type[j] in this.accept){flag=true;break;}}if(!flag){return false;}}return true;},copyState:function(_120e,self){if(_120e){return true;}if(arguments.length<2){self=this==_1209.manager().target;}if(self){if(this.copyOnly){return this.selfCopy;}}else{return this.copyOnly;}return false;},destroy:function(){_120b.superclass.destroy.call(this);array.forEach(this.topics,function(t){t.remove();});this.targetAnchor=null;},onMouseMove:function(e){if(this.isDragging&&this.targetState=="Disabled"){return;}_120b.superclass.onMouseMove.call(this,e);var m=_1209.manager();if(!this.isDragging){if(this.mouseDown&&this.isSource&&(Math.abs(e.pageX-this._lastX)>this.delay||Math.abs(e.pageY-this._lastY)>this.delay)){var nodes=this.getSelectedNodes();if(nodes.length){m.startDrag(this,nodes,this.copyState(dnd.getCopyKeyState(e),true));}}}if(this.isDragging){var _120f=false;if(this.current){if(!this.targetBox||this.targetAnchor!=this.current){this.targetBox=_1207.position(this.current,true);}if(this.horizontal){_120f=(e.pageX-this.targetBox.x<this.targetBox.w/2)==_1207.isBodyLtr(this.current.ownerDocument);}else{_120f=(e.pageY-this.targetBox.y)<(this.targetBox.h/2);}}if(this.current!=this.targetAnchor||_120f!=this.before){this._markTargetAnchor(_120f);m.canDrop(!this.current||m.source!=this||!(this.current.id in this.selection));}}},onMouseDown:function(e){if(!this.mouseDown&&this._legalMouseDown(e)&&(!this.skipForm||!dnd.isFormElement(e))){this.mouseDown=true;this._lastX=e.pageX;this._lastY=e.pageY;_120b.superclass.onMouseDown.call(this,e);}},onMouseUp:function(e){if(this.mouseDown){this.mouseDown=false;_120b.superclass.onMouseUp.call(this,e);}},onDndSourceOver:function(_1210){if(this!==_1210){this.mouseDown=false;if(this.targetAnchor){this._unmarkTargetAnchor();}}else{if(this.isDragging){var m=_1209.manager();m.canDrop(this.targetState!="Disabled"&&(!this.current||m.source!=this||!(this.current.id in this.selection)));}}},onDndStart:function(_1211,nodes,copy){if(this.autoSync){this.sync();}if(this.isSource){this._changeState("Source",this==_1211?(copy?"Copied":"Moved"):"");}var _1212=this.accept&&this.checkAcceptance(_1211,nodes);this._changeState("Target",_1212?"":"Disabled");if(this==_1211){_1209.manager().overSource(this);}this.isDragging=true;},onDndDrop:function(_1213,nodes,copy,_1214){if(this==_1214){this.onDrop(_1213,nodes,copy);}this.onDndCancel();},onDndCancel:function(){if(this.targetAnchor){this._unmarkTargetAnchor();this.targetAnchor=null;}this.before=true;this.isDragging=false;this.mouseDown=false;this._changeState("Source","");this._changeState("Target","");},onDrop:function(_1215,nodes,copy){if(this!=_1215){this.onDropExternal(_1215,nodes,copy);}else{this.onDropInternal(nodes,copy);}},onDropExternal:function(_1216,nodes,copy){var _1217=this._normalizedCreator;if(this.creator){this._normalizedCreator=function(node,hint){return _1217.call(this,_1216.getItem(node.id).data,hint);};}else{if(copy){this._normalizedCreator=function(node){var t=_1216.getItem(node.id);var n=node.cloneNode(true);n.id=dnd.getUniqueId();return {node:n,data:t.data,type:t.type};};}else{this._normalizedCreator=function(node){var t=_1216.getItem(node.id);_1216.delItem(node.id);return {node:node,data:t.data,type:t.type};};}}this.selectNone();if(!copy&&!this.creator){_1216.selectNone();}this.insertNodes(true,nodes,this.before,this.current);if(!copy&&this.creator){_1216.deleteSelectedNodes();}this._normalizedCreator=_1217;},onDropInternal:function(nodes,copy){var _1218=this._normalizedCreator;if(this.current&&this.current.id in this.selection){return;}if(copy){if(this.creator){this._normalizedCreator=function(node,hint){return _1218.call(this,this.getItem(node.id).data,hint);};}else{this._normalizedCreator=function(node){var t=this.getItem(node.id);var n=node.cloneNode(true);n.id=dnd.getUniqueId();return {node:n,data:t.data,type:t.type};};}}else{if(!this.current){return;}this._normalizedCreator=function(node){var t=this.getItem(node.id);return {node:node,data:t.data,type:t.type};};}this._removeSelection();this.insertNodes(true,nodes,this.before,this.current);this._normalizedCreator=_1218;},onDraggingOver:function(){},onDraggingOut:function(){},onOverEvent:function(){_120b.superclass.onOverEvent.call(this);_1209.manager().overSource(this);if(this.isDragging&&this.targetState!="Disabled"){this.onDraggingOver();}},onOutEvent:function(){_120b.superclass.onOutEvent.call(this);_1209.manager().outSource(this);if(this.isDragging&&this.targetState!="Disabled"){this.onDraggingOut();}},_markTargetAnchor:function(_1219){if(this.current==this.targetAnchor&&this.before==_1219){return;}if(this.targetAnchor){this._removeItemClass(this.targetAnchor,this.before?"Before":"After");}this.targetAnchor=this.current;this.targetBox=null;this.before=_1219;if(this.targetAnchor){this._addItemClass(this.targetAnchor,this.before?"Before":"After");}},_unmarkTargetAnchor:function(){if(!this.targetAnchor){return;}this._removeItemClass(this.targetAnchor,this.before?"Before":"After");this.targetAnchor=null;this.targetBox=null;this.before=true;},_markDndStatus:function(copy){this._changeState("Source",copy?"Copied":"Moved");},_legalMouseDown:function(e){if(e.type!="touchstart"&&!mouse.isLeft(e)){return false;}if(!this.withHandles){return true;}for(var node=e.target;node&&node!==this.node;node=node.parentNode){if(_1206.contains(node,"dojoDndHandle")){return true;}if(_1206.contains(node,"dojoDndItem")||_1206.contains(node,"dojoDndIgnore")){break;}}return false;}});return _120b;});},"dojox/charting/action2d/Tooltip":function(){define("dojox/charting/action2d/Tooltip",["dojo/_base/kernel","dijit/Tooltip","dojo/_base/lang","dojo/_base/declare","dojo/dom-style","./PlotAction","dojox/gfx/matrix","dojox/lang/functional","dojox/lang/functional/scan","dojox/lang/functional/fold"],function(dojo,_121a,lang,_121b,_121c,_121d,m,df,dfs,dff){var _121e=function(o){var t=o.run&&o.run.data&&o.run.data[o.index];if(t&&typeof t!="number"&&(t.tooltip||t.text)){return t.tooltip||t.text;}if(o.element=="candlestick"){return "<table cellpadding=\"1\" cellspacing=\"0\" border=\"0\" style=\"font-size:0.9em;\">"+"<tr><td>Open:</td><td align=\"right\"><strong>"+o.data.open+"</strong></td></tr>"+"<tr><td>High:</td><td align=\"right\"><strong>"+o.data.high+"</strong></td></tr>"+"<tr><td>Low:</td><td align=\"right\"><strong>"+o.data.low+"</strong></td></tr>"+"<tr><td>Close:</td><td align=\"right\"><strong>"+o.data.close+"</strong></td></tr>"+(o.data.mid!==undefined?"<tr><td>Mid:</td><td align=\"right\"><strong>"+o.data.mid+"</strong></td></tr>":"")+"</table>";}return o.element=="bar"?o.x:o.y;};var pi4=Math.PI/4,pi2=Math.PI/2;return _121b("dojox.charting.action2d.Tooltip",_121d,{defaultParams:{text:_121e},optionalParams:{},constructor:function(chart,plot,_121f){this.text=_121f&&_121f.text?_121f.text:_121e;this.connect();},process:function(o){if(o.type==="onplotreset"||o.type==="onmouseout"){_121a.hide(this.aroundRect);this.aroundRect=null;if(o.type==="onplotreset"){delete this.angles;}return;}if(!o.shape||o.type!=="onmouseover"){return;}var _1220={type:"rect"},_1221=["after-centered","before-centered"];switch(o.element){case "marker":_1220.x=o.cx;_1220.y=o.cy;_1220.w=_1220.h=1;break;case "circle":_1220.x=o.cx-o.cr;_1220.y=o.cy-o.cr;_1220.w=_1220.h=2*o.cr;break;case "spider_circle":_1220.x=o.cx;_1220.y=o.cy;_1220.w=_1220.h=1;break;case "spider_plot":return;case "column":_1221=["above-centered","below-centered"];case "bar":_1220=lang.clone(o.shape.getShape());_1220.w=_1220.width;_1220.h=_1220.height;break;case "candlestick":_1220.x=o.x;_1220.y=o.y;_1220.w=o.width;_1220.h=o.height;break;default:if(!this.angles){if(typeof o.run.data[0]=="number"){this.angles=df.map(df.scanl(o.run.data,"+",0),"* 2 * Math.PI / this",df.foldl(o.run.data,"+",0));}else{this.angles=df.map(df.scanl(o.run.data,"a + b.y",0),"* 2 * Math.PI / this",df.foldl(o.run.data,"a + b.y",0));}}var _1222=m._degToRad(o.plot.opt.startAngle),angle=(this.angles[o.index]+this.angles[o.index+1])/2+_1222;_1220.x=o.cx+o.cr*Math.cos(angle);_1220.y=o.cy+o.cr*Math.sin(angle);_1220.w=_1220.h=1;if(angle<pi4){}else{if(angle<pi2+pi4){_1221=["below-centered","above-centered"];}else{if(angle<Math.PI+pi4){_1221=["before-centered","after-centered"];}else{if(angle<2*Math.PI-pi4){_1221=["above-centered","below-centered"];}}}}break;}var lt=this.chart.getCoords();_1220.x+=lt.x;_1220.y+=lt.y;_1220.x=Math.round(_1220.x);_1220.y=Math.round(_1220.y);_1220.w=Math.ceil(_1220.w);_1220.h=Math.ceil(_1220.h);this.aroundRect=_1220;var _1223=this.text(o);if(this.chart.getTextDir){var _1224=(_121c.get(this.chart.node,"direction")=="rtl");var _1225=(this.chart.getTextDir(_1223)=="rtl");}if(_1223){if(_1225&&!_1224){_121a.show("<span dir = 'rtl'>"+_1223+"</span>",this.aroundRect,_1221);}else{if(!_1225&&_1224){_121a.show("<span dir = 'ltr'>"+_1223+"</span>",this.aroundRect,_1221);}else{_121a.show(_1223,this.aroundRect,_1221);}}}}});});},"esri/PopupBase":function(){define(["dijit","dojo","dojox"],function(dijit,dojo,dojox){dojo.provide("esri.PopupBase");dojo.declare("esri.PopupBase",null,{onSetFeatures:function(){},onClearFeatures:function(){},onSelectionChange:function(){},onDfdComplete:function(){var _1226=this._marked;if(_1226){this._marked=null;this.showClosestFirst(_1226);}},initialize:function(){this.count=0;this.selectedIndex=-1;},cleanup:function(){this.features=this.deferreds=null;},setFeatures:function(arg){if(!arg||!arg.length){return;}this.clearFeatures();var _1227,_1228;if(arg[0] instanceof dojo.Deferred){_1228=arg;}else{_1227=arg;}if(_1227){this._updateFeatures(null,_1227);}else{this.deferreds=_1228;_1228=_1228.slice(0);dojo.forEach(_1228,function(dfd){dfd.addBoth(dojo.hitch(this,this._updateFeatures,dfd));},this);}},clearFeatures:function(){this.features=this.deferreds=this._marked=null;this.count=0;var _1229=this.selectedIndex;this.selectedIndex=-1;if(_1229>-1){this.onSelectionChange();}this.onClearFeatures();},getSelectedFeature:function(){var _122a=this.features;if(_122a){return _122a[this.selectedIndex];}},select:function(index){if(index<0||index>=this.count){return;}this.selectedIndex=index;this.onSelectionChange();},enableHighlight:function(map){this._highlighted=map.graphics.add(new esri.Graphic(new esri.geometry.Point(0,0,map.spatialReference)));this._highlighted.hide();var ESYM=esri.symbol;if(!this.markerSymbol){var _122b=(this.markerSymbol=new ESYM.SimpleMarkerSymbol());_122b.setStyle(ESYM.SimpleMarkerSymbol.STYLE_TARGET);_122b._setDim(16,16,7);_122b.setOutline(new ESYM.CartographicLineSymbol(ESYM.SimpleLineSymbol.STYLE_SOLID,new dojo.Color([0,255,255]),2,ESYM.CartographicLineSymbol.CAP_ROUND,ESYM.CartographicLineSymbol.JOIN_ROUND));_122b.setColor(new dojo.Color([0,0,0,0]));}if(!this.lineSymbol){this.lineSymbol=new ESYM.SimpleLineSymbol(ESYM.SimpleLineSymbol.STYLE_SOLID,new dojo.Color([0,255,255]),2);}if(!this.fillSymbol){this.fillSymbol=new ESYM.SimpleFillSymbol(ESYM.SimpleFillSymbol.STYLE_NULL,new ESYM.SimpleLineSymbol(ESYM.SimpleLineSymbol.STYLE_SOLID,new dojo.Color([0,255,255]),2),new dojo.Color([0,0,0,0]));}},disableHighlight:function(map){var _122c=this._highlighted;if(_122c){_122c.hide();map.graphics.remove(_122c);delete this._highlighted;}this.markerSymbol=this.lineSymbol=this.fillSymbol=null;},showHighlight:function(){var _122d=this.features&&this.features[this.selectedIndex];if(this._highlighted&&_122d&&_122d.geometry){this._highlighted.show();}},hideHighlight:function(){if(this._highlighted){this._highlighted.hide();}},updateHighlight:function(map,_122e){var _122f=_122e.geometry,_1230=this._highlighted;if(!_122f||!_1230){if(_1230){_1230.hide();}return;}_1230.hide();if(!_1230.getLayer()&&map){map.graphics.add(_1230);}_1230.setGeometry(esri.geometry.fromJson(_122f.toJson()));var _1231;switch(_122f.type){case "point":case "multipoint":_1231=this.markerSymbol;_1231.setOffset(0,0);_1231.setAngle(0);var lyr=_122e.getLayer();if(lyr){var _1232=lyr._getSymbol(_122e),width,_1233,xoff=0,yoff=0,angle=0;if(_1232){switch(_1232.type){case "simplemarkersymbol":width=_1233=(_1232.size||0);break;case "picturemarkersymbol":width=(_1232.width||0);_1233=(_1232.height||0);break;}xoff=_1232.xoffset||0;yoff=_1232.yoffset||0;angle=_1232.angle||0;}if(width&&_1233){_1231._setDim(width+1,_1233+1,7);}_1231.setOffset(xoff,yoff);_1231.setAngle(angle);}break;case "polyline":_1231=this.lineSymbol;break;case "polygon":_1231=this.fillSymbol;break;}_1230.setSymbol(_1231);},showClosestFirst:function(_1234){var _1235=this.features;if(_1235&&_1235.length){if(_1235.length>1){var i,_1236=Infinity,_1237=-1,geom,_1238=esri.geometry.getLength,_1239,locSR=_1234.spatialReference,_123a,_123b;_1234=_1234.normalize();for(i=_1235.length-1;i>=0;i--){geom=_1235[i].geometry;if(!geom){continue;}_123a=geom.spatialReference;_1239=0;try{_123b=(geom.type==="point")?geom:geom.getExtent().getCenter();_123b=_123b.normalize();if(locSR&&_123a&&!locSR.equals(_123a)&&locSR._canProject(_123a)){_123b=locSR.isWebMercator()?esri.geometry.geographicToWebMercator(_123b):esri.geometry.webMercatorToGeographic(_123b);}_1239=_1238(_1234,_123b);}catch(e){}if(_1239>0&&_1239<_1236){_1236=_1239;_1237=i;}}if(_1237>0){_1235.splice(0,0,_1235.splice(_1237,1)[0]);this.select(0);}}}else{if(this.deferreds){this._marked=_1234;}}},_unbind:function(dfd){var index=dojo.indexOf(this.deferreds,dfd);if(index===-1){return;}this.deferreds.splice(index,1);if(!this.deferreds.length){this.deferreds=null;return 2;}return 1;},_updateFeatures:function(dfd,_123c){if(dfd){if(this.deferreds){var res=this._unbind(dfd);if(!res){return;}if(_123c&&_123c instanceof Error){this.onDfdComplete(_123c);if(res===2){this.onSetFeatures();}return;}if(_123c&&_123c.length){if(!this.features){this.features=_123c;this.count=_123c.length;this.selectedIndex=0;this.onDfdComplete();if(res===2){this.onSetFeatures();}this.select(0);}else{var _123d=dojo.filter(_123c,function(_123e){return dojo.indexOf(this.features,_123e)===-1;},this);this.features=this.features.concat(_123d);this.count=this.features.length;this.onDfdComplete();if(res===2){this.onSetFeatures();}}}else{this.onDfdComplete();if(res===2){this.onSetFeatures();}}}}else{this.features=_123c;this.count=_123c.length;this.selectedIndex=0;this.onSetFeatures();this.select(0);}}});dojo.declare("esri.PopupInfoTemplate",[esri.InfoTemplate],{"-chains-":{constructor:"manual"},initialize:function(json){if(!json){return;}this.info=json;this.title=this.getTitle;this.content=this.getContent;var _123f=(this._fieldLabels={}),fmaps=(this._fieldsMap={});if(json.fieldInfos){dojo.forEach(json.fieldInfos,function(_1240){_123f[_1240.fieldName]=_1240.label;fmaps[_1240.fieldName]=_1240;});}},toJson:function(){return dojo.fromJson(dojo.toJson(this.info));},getTitle:function(){},getContent:function(){},getComponents:function(_1241){var _1242=this.info,layer=_1241.getLayer(),_1243=dojo.clone(_1241.attributes)||{},_1244=dojo.clone(_1243),_1245=_1242.fieldInfos,_1246="",_1247="",_1248,_1249,value,_124a=layer&&layer._getDateOpts&&layer._getDateOpts().properties,_124b={dateFormat:{properties:_124a,formatter:"DateFormat"+this._dateFormats["shortDateShortTime"]}};if(_1245){dojo.forEach(_1245,function(_124c){var _124d=_124c.fieldName,val=_1244[_124d];_1244[_124d]=this._formatValue(val,_124d,_124b);if(_124a&&_124c.format&&_124c.format.dateFormat){var pos=dojo.indexOf(_124a,_124d);if(pos>-1){_124a.splice(pos,1);}}},this);}if(layer){var types=layer.types,_124e=layer.typeIdField,_124f=_124e&&_1243[_124e];for(_1249 in _1243){value=_1243[_1249];if(esri._isDefined(value)){var _1250=this._getDomainName(layer,types,_124f,_1249,value);if(esri._isDefined(_1250)){_1244[_1249]=_1250;}else{if(_1249===_124e){var _1251=this._getTypeName(layer,value);if(esri._isDefined(_1251)){_1244[_1249]=_1251;}}}}}}if(_1242.title){_1246=dojo.trim(esri.substitute(_1244,this._fixTokens(_1242.title),_124b)||"");}if(_1242.description){_1247=dojo.trim(esri.substitute(_1244,this._fixTokens(_1242.description),_124b)||"");}if(_1245){_1248=[];dojo.forEach(_1245,function(_1252){_1249=_1252.fieldName;if(_1249&&_1252.visible){_1248.push([_1252.label||_1249,esri.substitute(_1244,"${"+_1249+"}",_124b)||""]);}});}var _1253,valid;if(_1242.mediaInfos){_1253=[];dojo.forEach(_1242.mediaInfos,function(minfo){valid=0;value=minfo.value;switch(minfo.type){case "image":var url=value.sourceURL;url=url&&dojo.trim(esri.substitute(_1243,this._fixTokens(url)));valid=!!url;break;case "piechart":case "linechart":case "columnchart":case "barchart":valid=dojo.some(value.fields,function(field){return esri._isDefined(_1243[field]);});break;default:return;}if(valid){minfo=dojo.clone(minfo);value=minfo.value;minfo.title=minfo.title?dojo.trim(esri.substitute(_1244,this._fixTokens(minfo.title),_124b)||""):"";minfo.caption=minfo.caption?dojo.trim(esri.substitute(_1244,this._fixTokens(minfo.caption),_124b)||""):"";if(minfo.type==="image"){value.sourceURL=esri.substitute(_1243,this._fixTokens(value.sourceURL));if(value.linkURL){value.linkURL=dojo.trim(esri.substitute(_1243,this._fixTokens(value.linkURL))||"");}}else{var _1254=_1243[value.normalizeField]||0;value.fields=dojo.map(value.fields,function(_1255){var data=_1243[_1255];data=(data===undefined)?null:data;if(data&&_1254){data=data/_1254;}return {y:data,tooltip:(this._fieldLabels[_1255]||_1255)+":<br/>"+this._formatValue(data,_1255,_124b,!!_1254)};},this);}_1253.push(minfo);}},this);}return {title:_1246,description:_1247,fields:(_1248&&_1248.length)?_1248:null,mediaInfos:(_1253&&_1253.length)?_1253:null,formatted:_1244,editSummary:(layer&&layer.getEditSummary)?layer.getEditSummary(_1241):""};},getAttachments:function(_1256){var layer=_1256.getLayer(),_1257=_1256.attributes;if(this.info.showAttachments&&layer&&layer.hasAttachments&&layer.objectIdField){var oid=_1257&&_1257[layer.objectIdField];if(oid){return layer.queryAttachmentInfos(oid);}}},_dateFormats:{"shortDate":"(datePattern: 'M/d/y', selector: 'date')","longMonthDayYear":"(datePattern: 'MMMM d, y', selector: 'date')","dayShortMonthYear":"(datePattern: 'd MMM y', selector: 'date')","longDate":"(datePattern: 'EEEE, MMMM d, y', selector: 'date')","shortDateShortTime":"(datePattern: 'M/d/y', timePattern: 'h:mm a', selector: 'date and time')","shortDateShortTime24":"(datePattern: 'M/d/y', timePattern: 'H:mm', selector: 'date and time')","shortDateLongTime":"(datePattern: 'M/d/y', timePattern: 'h:mm:ss a', selector: 'date and time')","shortDateLongTime24":"(datePattern: 'M/d/y', timePattern: 'H:mm:ss', selector: 'date and time')","longMonthYear":"(datePattern: 'MMMM y', selector: 'date')","shortMonthYear":"(datePattern: 'MMM y', selector: 'date')","year":"(datePattern: 'y', selector: 'date')"},_fixTokens:function(_1258){return _1258.replace(/(\{[^\{\r\n]+\})/g,"$$$1");},_formatValue:function(val,_1259,_125a,_125b){var _125c=this._fieldsMap[_1259],fmt=_125c&&_125c.format;if(!esri._isDefined(val)||!_125c||!esri._isDefined(fmt)){return val;}var _125d="",_125e=[],_125f=fmt.hasOwnProperty("places")||fmt.hasOwnProperty("digitSeparator"),_1260=fmt.hasOwnProperty("digitSeparator")?fmt.digitSeparator:true;if(_125f){_125d="NumberFormat";_125e.push("places: "+((esri._isDefined(fmt.places)&&(!_125b||fmt.places>0))?Number(fmt.places):"Infinity"));if(_125e.length){_125d+=("("+_125e.join(",")+")");}}else{if(fmt.dateFormat){_125d="DateFormat"+(this._dateFormats[fmt.dateFormat]||this._dateFormats["shortDateShortTime"]);}else{return val;}}var _1261=esri.substitute({"myKey":val},"${myKey:"+_125d+"}",_125a)||"";if(_125f&&!_1260){var _1262=dojo.i18n.getLocalization("dojo.cldr","number");if(_1262.group){_1261=_1261.replace(new RegExp("\\"+_1262.group,"g"),"");}}return _1261;},_getDomainName:function(layer,types,_1263,_1264,value){var _1265,stop;if(types&&esri._isDefined(_1263)){dojo.some(types,function(_1266){if(_1266.id==_1263){_1265=_1266.domains&&_1266.domains[_1264];if(_1265&&_1265.type==="inherited"){_1265=this._getLayerDomain(layer,_1264);stop=true;}return true;}return false;},this);}if(!stop&&!_1265){_1265=this._getLayerDomain(layer,_1264);}if(_1265&&_1265.codedValues){var _1267;dojo.some(_1265.codedValues,function(_1268){if(_1268.code==value){_1267=_1268.name;return true;}return false;});return _1267;}},_getLayerDomain:function(layer,_1269){var _126a=layer.fields;if(_126a){var _126b;dojo.some(_126a,function(_126c){if(_126c.name===_1269){_126b=_126c.domain;return true;}return false;});return _126b;}},_getTypeName:function(layer,id){var types=layer.types;if(types){var _126d;dojo.some(types,function(_126e){if(_126e.id==id){_126d=_126e.name;return true;}return false;});return _126d;}}});});},"dijit/form/FilteringSelect":function(){define("dijit/form/FilteringSelect",["dojo/data/util/filter","dojo/_base/declare","dojo/_base/lang","dojo/when","./MappedTextBox","./ComboBoxMixin"],function(_126f,_1270,lang,when,_1271,_1272){return _1270("dijit.form.FilteringSelect",[_1271,_1272],{required:true,_lastDisplayedValue:"",_isValidSubset:function(){return this._opened;},isValid:function(){return !!this.item||(!this.required&&this.get("displayedValue")=="");},_refreshState:function(){if(!this.searchTimer){this.inherited(arguments);}},_callbackSetLabel:function(_1273,query,_1274,_1275){if((query&&query[this.searchAttr]!==this._lastQuery)||(!query&&_1273.length&&this.store.getIdentity(_1273[0])!=this._lastQuery)){return;}if(!_1273.length){this.set("value","",_1275||(_1275===undefined&&!this.focused),this.textbox.value,null);}else{this.set("item",_1273[0],_1275);}},_openResultList:function(_1276,query,_1277){if(query[this.searchAttr]!==this._lastQuery){return;}this.inherited(arguments);if(this.item===undefined){this.validate(true);}},_getValueAttr:function(){return this.valueNode.value;},_getValueField:function(){return "value";},_setValueAttr:function(value,_1278,_1279,item){if(!this._onChangeActive){_1278=null;}if(item===undefined){if(value===null||value===""){value="";if(!lang.isString(_1279)){this._setDisplayedValueAttr(_1279||"",_1278);return;}}var self=this;this._lastQuery=value;when(this.store.get(value),function(item){self._callbackSetLabel(item?[item]:[],undefined,undefined,_1278);});}else{this.valueNode.value=value;this.inherited(arguments);}},_setItemAttr:function(item,_127a,_127b){this.inherited(arguments);this._lastDisplayedValue=this.textbox.value;},_getDisplayQueryString:function(text){return text.replace(/([\\\*\?])/g,"\\$1");},_setDisplayedValueAttr:function(label,_127c){if(label==null){label="";}if(!this._created){if(!("displayedValue" in this.params)){return;}_127c=false;}if(this.store){this.closeDropDown();var query=lang.clone(this.query);var qs=this._getDisplayQueryString(label),q;if(this.store._oldAPI){q=qs;}else{q=_126f.patternToRegExp(qs,this.ignoreCase);q.toString=function(){return qs;};}this._lastQuery=query[this.searchAttr]=q;this.textbox.value=label;this._lastDisplayedValue=label;this._set("displayedValue",label);var _127d=this;var _127e={ignoreCase:this.ignoreCase,deep:true};lang.mixin(_127e,this.fetchProperties);this._fetchHandle=this.store.query(query,_127e);when(this._fetchHandle,function(_127f){_127d._fetchHandle=null;_127d._callbackSetLabel(_127f||[],query,_127e,_127c);},function(err){_127d._fetchHandle=null;if(!_127d._cancelingQuery){console.error("dijit.form.FilteringSelect: "+err.toString());}});}},undo:function(){this.set("displayedValue",this._lastDisplayedValue);}});});},"esri/dijit/Measurement":function(){define(["dijit","dojo","dojox","dojo/require!dijit/_Widget,dijit/_Templated,esri/map,esri/geometry,esri/symbol,dojo/parser,dijit/layout/ContentPane,dijit/Menu,dijit/form/Button,esri/tasks/geometry,esri/WKIDUnitConversion"],function(dijit,dojo,dojox){dojo.provide("esri.dijit.Measurement");dojo.require("dijit._Widget");dojo.require("dijit._Templated");dojo.require("esri.map");dojo.require("esri.geometry");dojo.require("esri.symbol");dojo.require("dojo.parser");dojo.require("dijit.layout.ContentPane");dojo.require("dijit.Menu");dojo.require("dijit.form.Button");dojo.require("esri.tasks.geometry");dojo.require("esri.WKIDUnitConversion");dojo.declare("esri.dijit.Measurement",[dijit._Widget,dijit._Templated],{widgetsInTemplate:true,templateString:"<div class=\"esriMeasurement\">\r\n  <div dojoType='dijit.form.ToggleButton' baseClass='esriButton' dojoAttachPoint='area' checked='false' iconClass='areaIcon' showLabel='false' dojoAttachEvent='onClick:areaToggleButton'></div>\r\n  <div dojoType='dijit.form.ToggleButton' baseClass='esriButton' dojoAttachPoint='distance' iconClass='distanceIcon' showLabel='false' dojoAttachEvent='onClick:distanceToggleButton'></div>\r\n  <div dojoType='dijit.form.ToggleButton' baseClass='esriButton' dojoAttachPoint='location' iconClass='locationIcon' showLabel='false' dojoAttachEvent='onClick:locationToggleButton'></div>\r\n  <div style=\"display:inline;margin-left:2px;margin-right:2px;padding-top:2px;\">|</div>\r\n  <button dojoType='dijit.form.DropDownButton' baseClass='esriToggleButton' dojoAttachPoint='unit' label='unit' value='unit' style='visibility:hidden;'></button>\r\n  <div dojoType='dijit.layout.ContentPane' dojoAttachPoint='resultLabel' class='resultLabel'></div>\r\n  <div dojoType='dijit.layout.ContentPane' dojoAttachPoint='resultValue' align='left' class='result'></div>\r\n</div>",unitDictionary:[],result:null,inputPoints:[],measureGraphics:[],numberPattern:"#,###,###,##0.0",constructor:function(_1280,_1281){_1280=_1280||{};if(!_1280.map){console.log("dijit.MeasureTool: unable to find the 'map' property in parameters");return;}this._map=_1280.map;this._map.cs=this._checkCS(this._map.spatialReference);this._geometryService=esri.config.defaults.geometryService;if(_1280.pointSymbol){this._pointSymbol=_1280.pointSymbol;}else{var url=dojo.moduleUrl("esri.dijit","./images/flag.png").toString();this._pointSymbol=new esri.symbol.PictureMarkerSymbol(url,24,24);this._pointSymbol.setOffset(9,11);}if(_1280.lineSymbol){this._lineSymbol=_1280.lineSymbol;}else{this._lineSymbol=new esri.symbol.SimpleLineSymbol(esri.symbol.SimpleLineSymbol.STYLE_SOLID,new dojo.Color([0,128,255]),3);}if(_1280.defaultLengthUnit){this._defaultLengthUnit=_1280.defaultLengthUnit;}else{this._defaultLengthUnit=esri.Units.MILES;}if(_1280.defaultAreaUnit){this._defaultAreaUnit=_1280.defaultAreaUnit;}else{this._defaultAreaUnit=esri.Units.ACRES;}if(_1280.defaultLocationUnit){this._defaultLocationUnit=_1280.defaultLocationUnit;}else{this._defaultLocationUnit=esri.Units.DECIMAL_DEGREES;}this._snappingCallback=dojo.hitch(this,this._snappingCallback);},startup:function(){var _1282=esri.bundle.widgets.measurement;this.unitDictionary[_1282.NLS_length_miles]=1;this.unitDictionary[_1282.NLS_length_kilometers]=1.609344;this.unitDictionary[_1282.NLS_length_feet]=5280;this.unitDictionary[_1282.NLS_length_meters]=1609.34;this.unitDictionary[_1282.NLS_length_yards]=1760;this.unitDictionary["Nautical Miles"]=0.869;this.unitDictionary[_1282.NLS_area_acres]=1;this.unitDictionary[_1282.NLS_area_sq_kilometers]=0.004047;this.unitDictionary[_1282.NLS_area_sq_miles]=0.0015625;this.unitDictionary[_1282.NLS_area_sq_feet]=43560;this.unitDictionary[_1282.NLS_area_sq_meters]=4046.87;this.unitDictionary[_1282.NLS_area_hectares]=0.4047;this.unitDictionary[_1282.NLS_area_sq_yards]=4840;this.units={"esriMiles":_1282.NLS_length_miles,"esriKilometers":_1282.NLS_length_kilometers,"esriFeet":_1282.NLS_length_feet,"esriMeters":_1282.NLS_length_meters,"esriYards":_1282.NLS_length_yards,"esriAcres":_1282.NLS_area_acres,"esriSquareKilometers":_1282.NLS_area_sq_kilometers,"esriSquareMiles":_1282.NLS_area_sq_miles,"esriSquareFeet":_1282.NLS_area_sq_feet,"esriSquareMeters":_1282.NLS_area_sq_meters,"esriHectares":_1282.NLS_area_hectares,"esriSquareYards":_1282.NLS_area_sq_yards,"esriDecimalDegrees":_1282.NLS_decimal_degrees,"esriDegreeMinuteSeconds":_1282.NLS_deg_min_sec};dijit.byNode(this.distance.domNode).setLabel(esri.bundle.widgets.measurement.NLS_distance);dijit.byNode(this.area.domNode).setLabel(esri.bundle.widgets.measurement.NLS_area);dijit.byNode(this.location.domNode).setLabel(esri.bundle.widgets.measurement.NLS_location);dijit.byNode(this.resultLabel.domNode).setContent(esri.bundle.widgets.measurement.NLS_resultLabel);},measureArea:function(){this._map.navigationManager.setImmediateClick(true);this._createAreaUnitList();this.inputPoints=[];this.tempGraphic=new esri.Graphic();this.tempGraphic.setSymbol(this._lineSymbol);this.tempGraphic.setGeometry(new esri.geometry.Polyline(this._map.spatialReference));this._map.graphics.add(this.tempGraphic);if(this._map.cs==="PCS"){this._geometryAreaHandler=dojo.connect(this._geometryService,"onAreasAndLengthsComplete",this,"_outputArea");}this.mouseClickMapHandler=dojo.connect(this._map,"onClick",this,"_measureAreaMouseClickHandler");this.doubleClickMapHandler=dojo.connect(this._map,"onDblClick",this,"_measureAreaDblClickHandler");},measureDistance:function(){this._map.navigationManager.setImmediateClick(true);if(this._map.cs==="PCS"){this._projectMapExtent(this._map.extent);this._mapExtentChangeHandler=dojo.connect(this._map,"onExtentChange",this,"_projectMapExtent");}this.inputPoints=[];this._createLengthUnitList();this.mouseClickMapHandler=dojo.connect(this._map,"onClick",this,"_measureDistanceMouseClickHandler");this.doubleClickMapHandler=dojo.connect(this._map,"onDblClick",this,"_measureDistanceDblClickHandler");},measureLocation:function(){this._map.navigationManager.setImmediateClick(true);this.measureGraphics=[];this._createLocationUnitList();this._map.graphics.remove(this.locationGraphic);if(this._map.cs==="PCS"){this._projectMapExtent(this._map.extent);this._mapExtentChangeHandler=dojo.connect(this._map,"onExtentChange",dojo.hitch(this,this._projectMapExtent));}this._clickMapHandler=dojo.connect(this._map,"onClick",this,"_measureLocationClickHandler");this.mouseMoveMapHandler=dojo.connect(this._map,"onMouseMove",this,"_showCoordinates");this.mouseDragMapHandler=dojo.connect(this._map,"onMouseDrag",dojo.hitch(this,function(){dijit.byNode(this.resultValue.domNode).setAttribute("disabled",true);}));},setTool:function(_1283,_1284){this.closeTool();var _1285=dijit.byNode(this[_1283].domNode).checked;dojo.style(this.unit.domNode,"visibility","visible");dijit.byNode(this.area.domNode).setAttribute("checked",false);dijit.byNode(this.distance.domNode).setAttribute("checked",false);dijit.byNode(this.location.domNode).setAttribute("checked",false);if(_1284===true||_1284===false){_1285=_1284;}dijit.byNode(this[_1283].domNode).setAttribute("checked",_1285);if(_1285){this.activeTool=_1283;if(this.map.isDoubleClickZoom){this._map.disableDoubleClickZoom();}if(_1283==="area"){this.measureArea();}else{if(_1283==="distance"){this.measureDistance();}else{if(_1283==="location"){this.measureLocation();}}}if(this._map.snappingManager){this._map.snappingManager._startSelectionLayerQuery();this._map.snappingManager._setUpSnapping();}}},areaToggleButton:function(){this.clearResult();this.setTool("area");},distanceToggleButton:function(){this.clearResult();this.setTool("distance");},locationToggleButton:function(){this.clearResult();this.setTool("location");},closeTool:function(){var map=this._map;map.navigationManager.setImmediateClick(false);if(!map.isDoubleClickZoom){map.enableDoubleClickZoom();}this.inputPoints=[];if(map.snappingManager&&map.snappingManager._snappingGraphic){map.graphics.remove(map.snappingManager._snappingGraphic);}dojo.disconnect(this.mouseClickMapHandler);dojo.disconnect(this.mouseMoveMapHandler);dojo.disconnect(this.doubleClickMapHandler);dojo.disconnect(this.mouseDragMapHandler);dojo.disconnect(this._clickMapHandler);dojo.disconnect(this._mapExtentChangeHandler);dojo.disconnect(this._geometryAreaHandler);this.mouseClickMapHandler=this.mouseMoveMapHandler=this.doubleClickMapHandler=this.mouseDragMapHandler=this._clickMapHandler=this._mapExtentChangeHandler=this._geometryAreaHandler=null;if(this._map.snappingManager){this._map.snappingManager._stopSelectionLayerQuery();this._map.snappingManager._killOffSnapping();}},clearResult:function(){var map=this._map;this.result=0;dijit.byNode(this.resultValue.domNode).setAttribute("content","");var i;for(i=0;i<this.measureGraphics.length;i++){map.graphics.remove(this.measureGraphics[i]);}this.measureGraphics=[];map.graphics.remove(this.tempGraphic);},show:function(){esri.show(this.domNode);},hide:function(){esri.hide(this.domNode);},showTool:function(_1286){var tool=this[_1286].domNode;tool.style.display="inline";},hideTool:function(_1287){var tool=this[_1287].domNode;tool.style.display="none";},destroy:function(){this.closeTool();this.clearResult();this.inherited(arguments);this._map=this._geometryService=this.measureGraphic=this.measureGraphic=this.tempGraphic=null;},onMeasureEnd:function(){},_densifyGeometry:function(geom){if(this._map.cs==="Web Mercator"){geom=esri.geometry.webMercatorToGeographic(geom);}var _1288;if(this._map.cs==="PCS"){_1288=geom;}else{_1288=esri.geometry.geodesicDensify(geom,500000);}if(this._map.cs==="Web Mercator"){_1288=esri.geometry.geographicToWebMercator(_1288);}return _1288;},_measureAreaMouseClickHandler:function(evt){var _1289;if(this._map.snappingManager){_1289=this._map.snappingManager._snappingPoint;}var _128a=_1289||evt.mapPoint;this.inputPoints.push(_128a);this._currentStartPt=_128a;if(this.inputPoints.length===1){this.tempGraphic.setGeometry(new esri.geometry.Polyline(this._map.spatialReference));var i;for(i=0;i<this.measureGraphics.length;i++){this._map.graphics.remove(this.measureGraphics[i]);}this.measureGraphics=[];this.result=0;this._outputResult(this.result,esri.bundle.widgets.measurement.NLS_area_acres);this.mouseMoveMapHandler=dojo.connect(this._map,"onMouseMove",this,"_measureAreaMouseMoveHandler");}this.measureGraphic=new esri.Graphic();this.measureGraphic.setSymbol(this._lineSymbol);this.measureGraphics.push(this.measureGraphic);if(this.inputPoints.length>1){var line=new esri.geometry.Polyline(this._map.spatialReference);line.addPath([this.inputPoints[this.inputPoints.length-2],_128a]);var _128b=new esri.geometry.Polyline(this._map.spatialReference);_128b.addPath([this.inputPoints[0],_128a]);var _128c=this._densifyGeometry(line);var _128d=this._densifyGeometry(_128b);this.tempGraphic.setGeometry(_128d);this.measureGraphic.setGeometry(_128c);this._map.graphics.add(this.measureGraphic);}},_measureAreaMouseMoveHandler:function(evt){var _128e;if(this.inputPoints.length>0){var line=new esri.geometry.Polyline(this._map.spatialReference);var _128f;if(this._map.snappingManager){_128f=this._map.snappingManager._snappingPoint;}_128e=_128f||evt.mapPoint;line.addPath([this._currentStartPt,_128e]);var _1290=this._densifyGeometry(line);this.tempGraphic.setGeometry(_1290);}if(this.inputPoints.length>1){var _1291=new esri.geometry.Polyline(this._map.spatialReference);_1291.addPath([_128e,this.inputPoints[0]]);var _1292=this._densifyGeometry(_1291);this.tempGraphic.setGeometry(this.tempGraphic.geometry.addPath(_1292.paths[0]));}},_measureAreaDblClickHandler:function(evt){dojo.disconnect(this.mouseMoveMapHandler);this.mouseMoveMapHandler=null;var _1293=new esri.geometry.Polygon(this._map.spatialReference);var ring=[];var i;for(i=0;i<this.inputPoints.length;i++){ring.push([this.inputPoints[i].x,this.inputPoints[i].y]);}ring.push([this.inputPoints[0].x,this.inputPoints[0].y]);_1293.addRing(ring);this.inputPoints=[];this.measurementGeometry=this._densifyGeometry(_1293);this._getArea(_1293);},_getArea:function(_1294){var _1295=[];var _1296=new esri.tasks.AreasAndLengthsParameters();_1296.areaUnit=esri.tasks.GeometryService.UNIT_ACRES;_1296.calculationType="geodesic";if(esri.geometry.polygonSelfIntersecting(_1294)){this._geometryService.simplify([_1294],dojo.hitch(this,function(_1297){dojo.forEach(_1297,dojo.hitch(this,function(_1298,idx){if(this._map.cs==="PCS"){_1296.polygons=_1297;this._geometryService.areasAndLengths(_1296);return;}else{if(this._map.cs==="Web Mercator"){_1298=esri.geometry.webMercatorToGeographic(_1298);}}_1295.push(_1298);}));var areas=esri.geometry.geodesicAreas(_1295,esri.Units.ACRES);this._showArea(areas[0]);}));}else{if(this._map.cs==="Web Mercator"){_1294=esri.geometry.webMercatorToGeographic(_1294);}_1295.push(_1294);if(this._map.cs==="PCS"){_1296.polygons=_1295;this._geometryService.areasAndLengths(_1296);return;}var areas=esri.geometry.geodesicAreas(_1295,esri.Units.ACRES);this._showArea(Math.abs(areas[0]));}},_outputArea:function(_1299){this._showArea(Math.abs(_1299.areas[0]));},_showArea:function(area){if(area){this.result=area;var unit=dijit.byNode(this.unit.domNode).label;this._outputResult(this.result,unit);}this.onMeasureEnd(this.activeTool,this.measurementGeometry);},_measureDistanceDblClickHandler:function(evt){dojo.disconnect(this.mouseMoveMapHandler);this.mouseMoveMapHandler=null;var _129a=new esri.geometry.Polyline(this._map.spatialReference);_129a.addPath(this.inputPoints);_129a=this._densifyGeometry(_129a);if(this._map.cs==="PCS"){var _129b=new esri.tasks.LengthsParameters();_129b.polylines=[_129a];_129b.lengthUnit=9093;_129b.calculationType="geodesic";this._geometryService.lengths(_129b,dojo.hitch(this,function(_129c){this.result=_129c.lengths[0];this._showDistance(this.result);}));}this.inputPoints=[];this.onMeasureEnd(this.activeTool,_129a);},_measureDistanceMouseClickHandler:function(evt){var _129d;if(this._map.snappingManager){_129d=this._map.snappingManager._snappingPoint;}var _129e=_129d||evt.mapPoint;this.inputPoints.push(_129e);this._currentStartPt=_129e;if(this.inputPoints.length===1){var i;for(i=0;i<this.measureGraphics.length;i++){this._map.graphics.remove(this.measureGraphics[i]);}this._map.graphics.remove(this.tempGraphic);this.measureGraphics=[];this.result=0;this._outputResult(this.result,esri.bundle.widgets.measurement.NLS_length_miles);this.tempGraphic=new esri.Graphic();this.tempGraphic.setSymbol(this._lineSymbol);this._map.graphics.add(this.tempGraphic);this.mouseMoveMapHandler=dojo.connect(this._map,"onMouseMove",this,"_measureDistanceMouseMoveHandler");}this.tempGraphic.setGeometry(new esri.geometry.Polyline(this._map.spatialReference));this.flagGraphic=new esri.Graphic();this.flagGraphic.setSymbol(this._pointSymbol);this.flagGraphic.setGeometry(_129e);this.measureGraphics.push(this.flagGraphic);this._map.graphics.add(this.flagGraphic);if(this.inputPoints.length>1){this.measureGraphic=new esri.Graphic();this.measureGraphic.setSymbol(this._lineSymbol);this.measureGraphics.push(this.measureGraphic);var line=new esri.geometry.Polyline(this._map.spatialReference);line.addPath([this.inputPoints[this.inputPoints.length-2],_129e]);var _129f=this._densifyGeometry(line);this.measureGraphic.setGeometry(_129f);this._map.graphics.add(this.measureGraphic);this.result+=this._geodesicDistance(this.inputPoints[this.inputPoints.length-2],_129e);this._showDistance(this.result);}},_measureDistanceMouseMoveHandler:function(evt){if(this.inputPoints.length>0){var line=new esri.geometry.Polyline(this._map.spatialReference);var _12a0;if(this._map.snappingManager){_12a0=this._map.snappingManager._snappingPoint;}var _12a1=_12a0||evt.mapPoint;line.addPath([this._currentStartPt,_12a1]);var _12a2=this._densifyGeometry(line);this.tempGraphic.setGeometry(_12a2);var _12a3=this._geodesicDistance(this._currentStartPt,_12a1);this._showDistance(_12a3+this.result);}},_geodesicDistance:function(pt1,pt2){var _12a4=new esri.geometry.Polyline(this._map.spatialReference);if(this._map.cs==="PCS"){pt1=this._getGCSLocation(pt1);pt2=this._getGCSLocation(pt2);}_12a4.addPath([pt1,pt2]);if(this._map.cs==="Web Mercator"){_12a4=esri.geometry.webMercatorToGeographic(_12a4);}return esri.geometry.geodesicLengths([_12a4],esri.Units.MILES)[0];},_showDistance:function(_12a5){if(_12a5){this._outputResult(_12a5,dijit.byNode(this.unit.domNode).label);}},_measureLocationClickHandler:function(evt){dijit.byNode(this.location.domNode).setAttribute("checked",false);var _12a6;if(this._map.snappingManager){_12a6=this._map.snappingManager._snappingPoint;}var mapPt=_12a6||evt.mapPoint;this.locationToggleButton();this.locationGraphic=new esri.Graphic();this.locationGraphic.setGeometry(mapPt);this.locationGraphic.setSymbol(this._pointSymbol);this._map.graphics.add(this.locationGraphic);this.measureGraphics.push(this.locationGraphic);var _12a7={mapPoint:mapPt};if(this._map.cs==="PCS"){this._showCoordinates(_12a7,true);}else{this._showCoordinates(_12a7);}this.onMeasureEnd(this.activeTool,mapPt);},_getGCSLocation:function(pt){var mapPt=pt;if(this._map.cs==="Web Mercator"){mapPt=esri.geometry.webMercatorToGeographic(mapPt);}else{if(this._map.cs==="PCS"){if(this._map._newExtent){var _12a8=Math.abs((this._map._newExtent.xmax-this._map._newExtent.xmin)/(this._map.extent.xmax-this._map.extent.xmin));var _12a9=Math.abs((this._map._newExtent.ymax-this._map._newExtent.ymin)/(this._map.extent.ymax-this._map.extent.ymin));var newX=(mapPt.x-this._map.extent.xmin)*_12a8+this._map._newExtent.xmin;var newY=(mapPt.y-this._map.extent.ymin)*_12a9+this._map._newExtent.ymin;mapPt=new esri.geometry.Point(newX,newY,this._map.spatialReference);}}}return mapPt;},_projectMapExtent:function(_12aa){var _12ab=new esri.Graphic(_12aa);var outSR=new esri.SpatialReference({wkid:4326});this._geometryService.project([_12ab.geometry],outSR,dojo.hitch(this,function(_12ac){if(!this.mouseMoveMapHandler&&this.activeTool==="location"){this.mouseMoveMapHandler=dojo.connect(this._map,"onMouseMove",dojo.hitch(this,this._showCoordinates));this.mouseDragMapHandler=dojo.connect(this._map,"onMouseDrag",dojo.hitch(this,function(){dijit.byNode(this.resultValue.domNode).setAttribute("disabled",true);}));}this._map._newExtent=_12ac[0];}));},_showCoordinates:function(evt,_12ad){var _12ae;if(this._map.snappingManager){_12ae=this._map.snappingManager._snappingPoint;}var _12af=_12ae||evt.mapPoint;var mapPt;if(!_12ad){mapPt=this._getGCSLocation(_12af);this.locationX=mapPt.x;this.locationY=mapPt.y;this._outputLocationResult(mapPt.x,mapPt.y,dijit.byNode(this.unit.domNode).label);}else{var outSR=new esri.SpatialReference({wkid:4326});this._geometryService.project([_12af],outSR,dojo.hitch(this,function(_12b0){mapPt=_12b0[0];this.locationX=mapPt.x;this.locationY=mapPt.y;this._outputLocationResult(mapPt.x,mapPt.y,dijit.byNode(this.unit.domNode).label);}));}},_checkCS:function(_12b1){if(_12b1.wkid){if(_12b1.wkid===3857||_12b1.wkid===102100||_12b1.wkid===102113){return "Web Mercator";}if(esri._isDefined(esri.WKIDUnitConversion[_12b1.wkid])){return "PCS";}return "GCS";}if(_12b1.wkt){if(_12b1.wkt.indexOf("WGS_1984_Web_Mercator")!==-1){return "Web Mercator";}if(_12b1.wkt.indexOf("PROJCS")===0){return "PCS";}return "GCS";}},_switchUnit:function(unit){dijit.byNode(this.unit.domNode).setAttribute("label",unit);if(this.result===null){return;}this._outputResult(this.result,unit);},_outputResult:function(_12b2,unit){var _12b3=_12b2*this.unitDictionary[unit];if(_12b3===0){dijit.byNode(this.resultValue.domNode).setAttribute("content","");}else{if(_12b3>1000000){dijit.byNode(this.resultValue.domNode).setAttribute("content",dojo.number.format(_12b3.toPrecision(9),{pattern:this.numberPattern})+" "+unit);}else{dijit.byNode(this.resultValue.domNode).setAttribute("content",dojo.number.format(_12b3.toFixed(2),{pattern:this.numberPattern})+" "+unit);}}},_switchLocationUnit:function(unit){dijit.byNode(this.unit.domNode).setAttribute("label",unit);if(this.result===null||this.resultValue.domNode.innerHTML===""){return;}this._outputLocationResult(this.locationX,this.locationY,unit);},_outputLocationResult:function(x,y,unit){var lon,lat;var _12b4=esri.bundle.widgets.measurement;if(unit===_12b4.NLS_decimal_degrees){lon=x.toFixed(6);lat=y.toFixed(6);}else{if(unit===_12b4.NLS_deg_min_sec){var _12b5=false;var _12b6=false;if(x<0){_12b5=true;x=Math.abs(x);}if(y<0){_12b6=true;y=Math.abs(y);}lon=Math.floor(x)+"°"+Math.floor((x-Math.floor(x))*60)+"'"+Math.floor(((x-Math.floor(x))*60-Math.floor((x-Math.floor(x))*60))*60)+"\"";lat=Math.floor(y)+"°"+Math.floor((y-Math.floor(y))*60)+"'"+Math.floor(((y-Math.floor(y))*60-Math.floor((y-Math.floor(y))*60))*60)+"\"";if(_12b5){lon="-"+lon;}if(_12b6){lat="-"+lat;}}}dijit.byNode(this.resultValue.domNode).setAttribute("content",esri.bundle.widgets.measurement.NLS_longitude+": "+lon+"<br/>"+esri.bundle.widgets.measurement.NLS_latitude+": "+lat);},_createLengthUnitList:function(){var menu=new dijit.Menu({style:"display: none;"});var _12b7=esri.bundle.widgets.measurement;var _12b8=[_12b7.NLS_length_miles,_12b7.NLS_length_kilometers,_12b7.NLS_length_feet,_12b7.NLS_length_meters,_12b7.NLS_length_yards];dojo.forEach(_12b8,dojo.hitch(this,function(_12b9,idx){var _12ba=new dijit.MenuItem({label:_12b9,onClick:dojo.hitch(this,function(){this._switchUnit(_12b9);})});_12ba.setAttribute("class","unitDropDown");menu.addChild(_12ba);}));dijit.byNode(this.unit.domNode).setAttribute("dropDown",menu);var _12bb=this.units[this._defaultLengthUnit];dijit.byNode(this.unit.domNode).setAttribute("label",_12bb);},_createAreaUnitList:function(){var menu=new dijit.Menu({style:"display: none;"});var _12bc=esri.bundle.widgets.measurement;var _12bd=[_12bc.NLS_area_acres,_12bc.NLS_area_sq_miles,_12bc.NLS_area_sq_kilometers,_12bc.NLS_area_hectares,_12bc.NLS_area_sq_yards,_12bc.NLS_area_sq_feet,_12bc.NLS_area_sq_meters];dojo.forEach(_12bd,dojo.hitch(this,function(_12be,idx){var _12bf=new dijit.MenuItem({label:_12be,onClick:dojo.hitch(this,function(){this._switchUnit(_12be);})});_12bf.setAttribute("class","unitDropDown");menu.addChild(_12bf);}));dijit.byNode(this.unit.domNode).setAttribute("dropDown",menu);var _12c0=this.units[this._defaultAreaUnit];dijit.byNode(this.unit.domNode).setAttribute("label",_12c0);},_createLocationUnitList:function(){var menu=new dijit.Menu({style:"display: none;"});var _12c1=esri.bundle.widgets.measurement;var _12c2=[_12c1.NLS_decimal_degrees,_12c1.NLS_deg_min_sec];dojo.forEach(_12c2,dojo.hitch(this,function(_12c3,idx){var _12c4=new dijit.MenuItem({label:_12c3,onClick:dojo.hitch(this,function(){this._switchLocationUnit(_12c3);})});_12c4.setAttribute("class","unitDropDown");menu.addChild(_12c4);}));dijit.byNode(this.unit.domNode).setAttribute("dropDown",menu);var _12c5=this.units[this._defaultLocationUnit];dijit.byNode(this.unit.domNode).setAttribute("label",_12c5);}});});},"dijit/_editor/html":function(){define("dijit/_editor/html",["dojo/_base/array","dojo/_base/lang","dojo/sniff"],function(array,lang,has){var _12c6={};lang.setObject("dijit._editor.html",_12c6);var _12c7=_12c6.escapeXml=function(str,_12c8){str=str.replace(/&/gm,"&amp;").replace(/</gm,"&lt;").replace(/>/gm,"&gt;").replace(/"/gm,"&quot;");if(!_12c8){str=str.replace(/'/gm,"&#39;");}return str;};_12c6.getNodeHtml=function(node){var _12c9=[];_12c6.getNodeHtmlHelper(node,_12c9);return _12c9.join("");};_12c6.getNodeHtmlHelper=function(node,_12ca){switch(node.nodeType){case 1:var lName=node.nodeName.toLowerCase();if(!lName||lName.charAt(0)=="/"){return "";}_12ca.push("<",lName);var _12cb=[],_12cc={};var attr;if(has("dom-attributes-explicit")||has("dom-attributes-specified-flag")){var i=0;while((attr=node.attributes[i++])){var n=attr.name;if(n.substr(0,3)!=="_dj"&&(!has("dom-attributes-specified-flag")||attr.specified)&&!(n in _12cc)){var v=attr.value;if(n=="src"||n=="href"){if(node.getAttribute("_djrealurl")){v=node.getAttribute("_djrealurl");}}if(has("ie")===8&&n==="style"){v=v.replace("HEIGHT:","height:").replace("WIDTH:","width:");}_12cb.push([n,v]);_12cc[n]=v;}}}else{var clone=/^input$|^img$/i.test(node.nodeName)?node:node.cloneNode(false);var s=clone.outerHTML;var _12cd=/[\w-]+=("[^"]*"|'[^']*'|\S*)/gi;var _12ce=s.match(_12cd);s=s.substr(0,s.indexOf(">"));array.forEach(_12ce,function(attr){if(attr){var idx=attr.indexOf("=");if(idx>0){var key=attr.substring(0,idx);if(key.substr(0,3)!="_dj"){if(key=="src"||key=="href"){if(node.getAttribute("_djrealurl")){_12cb.push([key,node.getAttribute("_djrealurl")]);return;}}var val,match;switch(key){case "style":val=node.style.cssText.toLowerCase();break;case "class":val=node.className;break;case "width":if(lName==="img"){match=/width=(\S+)/i.exec(s);if(match){val=match[1];}break;}case "height":if(lName==="img"){match=/height=(\S+)/i.exec(s);if(match){val=match[1];}break;}default:val=node.getAttribute(key);}if(val!=null){_12cb.push([key,val.toString()]);}}}}},this);}_12cb.sort(function(a,b){return a[0]<b[0]?-1:(a[0]==b[0]?0:1);});var j=0;while((attr=_12cb[j++])){_12ca.push(" ",attr[0],"=\"",(typeof attr[1]==="string"?_12c7(attr[1],true):attr[1]),"\"");}switch(lName){case "br":case "hr":case "img":case "input":case "base":case "meta":case "area":case "basefont":_12ca.push(" />");break;case "script":_12ca.push(">",node.innerHTML,"</",lName,">");break;default:_12ca.push(">");if(node.hasChildNodes()){_12c6.getChildrenHtmlHelper(node,_12ca);}_12ca.push("</",lName,">");}break;case 4:case 3:_12ca.push(_12c7(node.nodeValue,true));break;case 8:_12ca.push("<!--",_12c7(node.nodeValue,true),"-->");break;default:_12ca.push("<!-- Element not recognized - Type: ",node.nodeType," Name: ",node.nodeName,"-->");}};_12c6.getChildrenHtml=function(node){var _12cf=[];_12c6.getChildrenHtmlHelper(node,_12cf);return _12cf.join("");};_12c6.getChildrenHtmlHelper=function(dom,_12d0){if(!dom){return;}var nodes=dom["childNodes"]||dom;var _12d1=!has("ie")||nodes!==dom;var node,i=0;while((node=nodes[i++])){if(!_12d1||node.parentNode==dom){_12c6.getNodeHtmlHelper(node,_12d0);}}};return _12c6;});},"dojox/widget/AnalogGauge":function(){define("dojox/widget/AnalogGauge",["dijit","dojo","dojox","dojo/require!dojox/widget/gauge/_Gauge,dojox/gauges/AnalogGauge"],function(dijit,dojo,dojox){dojo.provide("dojox.widget.AnalogGauge");dojo.require("dojox.widget.gauge._Gauge");dojo.require("dojox.gauges.AnalogGauge");dojox.widget.AnalogGauge=dojox.gauges.AnalogGauge;dojox.widget.gauge.AnalogLineIndicator=dojox.gauges.AnalogLineIndicator;});},"dojox/charting/scaler/primitive":function(){define("dojox/charting/scaler/primitive",["dojo/_base/lang"],function(lang){var _12d2=lang.getObject("dojox.charting.scaler.primitive",true);return lang.mixin(_12d2,{buildScaler:function(min,max,span,_12d3){if(min==max){min-=0.5;max+=0.5;}return {bounds:{lower:min,upper:max,from:min,to:max,scale:span/(max-min),span:span},scaler:_12d2};},buildTicks:function(_12d4,_12d5){return {major:[],minor:[],micro:[]};},getTransformerFromModel:function(_12d6){var _12d7=_12d6.bounds.from,scale=_12d6.bounds.scale;return function(x){return (x-_12d7)*scale;};},getTransformerFromPlot:function(_12d8){var _12d9=_12d8.bounds.from,scale=_12d8.bounds.scale;return function(x){return x/scale+_12d9;};}});});},"dojox/gauges/Range":function(){define("dojox/gauges/Range",["dojo/_base/declare","dijit/_Widget"],function(_12da,_12db){return _12da("dojox.gauges.Range",[_12db],{low:0,high:0,hover:"",color:null,size:0,startup:function(){this.color=this.color?(this.color.color||this.color):"black";}});});},"dojox/lang/functional/reversed":function(){define("dojox/lang/functional/reversed",["dojo/_base/lang","dojo/_base/kernel","./lambda"],function(lang,_12dc,df){lang.mixin(df,{filterRev:function(a,f,o){if(typeof a=="string"){a=a.split("");}o=o||_12dc.global;f=df.lambda(f);var t=[],v,i=a.length-1;for(;i>=0;--i){v=a[i];if(f.call(o,v,i,a)){t.push(v);}}return t;},forEachRev:function(a,f,o){if(typeof a=="string"){a=a.split("");}o=o||_12dc.global;f=df.lambda(f);for(var i=a.length-1;i>=0;f.call(o,a[i],i,a),--i){}},mapRev:function(a,f,o){if(typeof a=="string"){a=a.split("");}o=o||_12dc.global;f=df.lambda(f);var n=a.length,t=new Array(n),i=n-1,j=0;for(;i>=0;t[j++]=f.call(o,a[i],i,a),--i){}return t;},everyRev:function(a,f,o){if(typeof a=="string"){a=a.split("");}o=o||_12dc.global;f=df.lambda(f);for(var i=a.length-1;i>=0;--i){if(!f.call(o,a[i],i,a)){return false;}}return true;},someRev:function(a,f,o){if(typeof a=="string"){a=a.split("");}o=o||_12dc.global;f=df.lambda(f);for(var i=a.length-1;i>=0;--i){if(f.call(o,a[i],i,a)){return true;}}return false;}});return df;});},"dojox/timing/_base":function(){define("dojox/timing/_base",["dojo/_base/kernel","dojo/_base/lang"],function(dojo){dojo.experimental("dojox.timing");dojo.getObject("timing",true,dojox);dojox.timing.Timer=function(_12dd){this.timer=null;this.isRunning=false;this.interval=_12dd;this.onStart=null;this.onStop=null;};dojo.extend(dojox.timing.Timer,{onTick:function(){},setInterval:function(_12de){if(this.isRunning){window.clearInterval(this.timer);}this.interval=_12de;if(this.isRunning){this.timer=window.setInterval(dojo.hitch(this,"onTick"),this.interval);}},start:function(){if(typeof this.onStart=="function"){this.onStart();}this.isRunning=true;this.timer=window.setInterval(dojo.hitch(this,"onTick"),this.interval);},stop:function(){if(typeof this.onStop=="function"){this.onStop();}this.isRunning=false;window.clearInterval(this.timer);}});return dojox.timing;});},"dojo/fx/easing":function(){define(["../_base/lang"],function(lang){var _12df={linear:function(n){return n;},quadIn:function(n){return Math.pow(n,2);},quadOut:function(n){return n*(n-2)*-1;},quadInOut:function(n){n=n*2;if(n<1){return Math.pow(n,2)/2;}return -1*((--n)*(n-2)-1)/2;},cubicIn:function(n){return Math.pow(n,3);},cubicOut:function(n){return Math.pow(n-1,3)+1;},cubicInOut:function(n){n=n*2;if(n<1){return Math.pow(n,3)/2;}n-=2;return (Math.pow(n,3)+2)/2;},quartIn:function(n){return Math.pow(n,4);},quartOut:function(n){return -1*(Math.pow(n-1,4)-1);},quartInOut:function(n){n=n*2;if(n<1){return Math.pow(n,4)/2;}n-=2;return -1/2*(Math.pow(n,4)-2);},quintIn:function(n){return Math.pow(n,5);},quintOut:function(n){return Math.pow(n-1,5)+1;},quintInOut:function(n){n=n*2;if(n<1){return Math.pow(n,5)/2;}n-=2;return (Math.pow(n,5)+2)/2;},sineIn:function(n){return -1*Math.cos(n*(Math.PI/2))+1;},sineOut:function(n){return Math.sin(n*(Math.PI/2));},sineInOut:function(n){return -1*(Math.cos(Math.PI*n)-1)/2;},expoIn:function(n){return (n==0)?0:Math.pow(2,10*(n-1));},expoOut:function(n){return (n==1)?1:(-1*Math.pow(2,-10*n)+1);},expoInOut:function(n){if(n==0){return 0;}if(n==1){return 1;}n=n*2;if(n<1){return Math.pow(2,10*(n-1))/2;}--n;return (-1*Math.pow(2,-10*n)+2)/2;},circIn:function(n){return -1*(Math.sqrt(1-Math.pow(n,2))-1);},circOut:function(n){n=n-1;return Math.sqrt(1-Math.pow(n,2));},circInOut:function(n){n=n*2;if(n<1){return -1/2*(Math.sqrt(1-Math.pow(n,2))-1);}n-=2;return 1/2*(Math.sqrt(1-Math.pow(n,2))+1);},backIn:function(n){var s=1.70158;return Math.pow(n,2)*((s+1)*n-s);},backOut:function(n){n=n-1;var s=1.70158;return Math.pow(n,2)*((s+1)*n+s)+1;},backInOut:function(n){var s=1.70158*1.525;n=n*2;if(n<1){return (Math.pow(n,2)*((s+1)*n-s))/2;}n-=2;return (Math.pow(n,2)*((s+1)*n+s)+2)/2;},elasticIn:function(n){if(n==0||n==1){return n;}var p=0.3;var s=p/4;n=n-1;return -1*Math.pow(2,10*n)*Math.sin((n-s)*(2*Math.PI)/p);},elasticOut:function(n){if(n==0||n==1){return n;}var p=0.3;var s=p/4;return Math.pow(2,-10*n)*Math.sin((n-s)*(2*Math.PI)/p)+1;},elasticInOut:function(n){if(n==0){return 0;}n=n*2;if(n==2){return 1;}var p=0.3*1.5;var s=p/4;if(n<1){n-=1;return -0.5*(Math.pow(2,10*n)*Math.sin((n-s)*(2*Math.PI)/p));}n-=1;return 0.5*(Math.pow(2,-10*n)*Math.sin((n-s)*(2*Math.PI)/p))+1;},bounceIn:function(n){return (1-_12df.bounceOut(1-n));},bounceOut:function(n){var s=7.5625;var p=2.75;var l;if(n<(1/p)){l=s*Math.pow(n,2);}else{if(n<(2/p)){n-=(1.5/p);l=s*Math.pow(n,2)+0.75;}else{if(n<(2.5/p)){n-=(2.25/p);l=s*Math.pow(n,2)+0.9375;}else{n-=(2.625/p);l=s*Math.pow(n,2)+0.984375;}}}return l;},bounceInOut:function(n){if(n<0.5){return _12df.bounceIn(n*2)/2;}return (_12df.bounceOut(n*2-1)/2)+0.5;}};lang.setObject("dojo.fx.easing",_12df);return _12df;});},"esri/dijit/_TouchBase":function(){define(["dijit","dojo","dojox"],function(dijit,dojo,dojox){dojo.provide("esri.dijit._TouchBase");dojo.declare("esri.dijit._TouchBase",null,{_preventDefault:true,_swipeThreshold:20,constructor:function(node,_12e0){this.domNode=dojo.byId(node);this.events=[dojo.connect(this.domNode,"touchstart",this,this._touchStartHandler),dojo.connect(this.domNode,"touchmove",this,this._touchMoveHandler),dojo.connect(this.domNode,"touchend",this,this._touchEndHandler),dojo.connect(this.domNode,"onclick",this,this._clickHandler)];},setPreventDefault:function(args){this._preventDefault=args;},disableOnClick:function(){dojo.disconnect(this.events.pop());},_clickHandler:function(e){if(!this._moved){this.onclick(e);}else{e.preventDefault();}},_touchStartHandler:function(e){this._moved=false;this.client_x=e.targetTouches[0].clientX;this.client_y=e.targetTouches[0].clientY;this.down_x=e.targetTouches[0].pageX;this.down_y=e.targetTouches[0].pageY;e.downX=this.down_x;e.downY=this.down_y;this.onTouchStart(e);},_touchMoveHandler:function(e){if(this._preventDefault){e.preventDefault();}this._moved=true;this.up_x=e.targetTouches[0].pageX;this.cur_x=e.targetTouches[0].pageX-this.down_x;this.cur_y=e.targetTouches[0].pageY-this.down_y;e.curX=this.cur_x;e.curY=this.cur_y;this.onTouchMove(e);},_touchEndHandler:function(e){if(!this._moved){e.clientX=this.client_x;e.clientY=this.client_y;}else{e.curX=this.cur_x;e.curY=this.cur_y;if(this.down_x-this.up_x>this._swipeThreshold){e.swipeDirection="left";}else{if(this.up_x-this.down_x>this._swipeThreshold){e.swipeDirection="right";}}}this.onTouchEnd(e);},onTouchStart:function(evt){},onTouchMove:function(evt){},onTouchEnd:function(evt){},onclick:function(evt){}});});},"dojox/charting/axis2d/Invisible":function(){define("dojox/charting/axis2d/Invisible",["dojo/_base/lang","dojo/_base/declare","./Base","../scaler/linear","dojox/gfx","dojox/lang/utils"],function(lang,_12e1,Base,lin,g,du){return _12e1("dojox.charting.axis2d.Invisible",Base,{defaultParams:{vertical:false,fixUpper:"none",fixLower:"none",natural:false,leftBottom:true,includeZero:false,fixed:true},optionalParams:{min:0,max:1,from:0,to:1,majorTickStep:4,minorTickStep:2,microTickStep:1},constructor:function(chart,_12e2){this.opt=lang.clone(this.defaultParams);du.updateWithObject(this.opt,_12e2);du.updateWithPattern(this.opt,_12e2,this.optionalParams);},dependOnData:function(){return !("min" in this.opt)||!("max" in this.opt);},clear:function(){delete this.scaler;delete this.ticks;this.dirty=true;return this;},initialized:function(){return "scaler" in this&&!(this.dirty&&this.dependOnData());},setWindow:function(scale,_12e3){this.scale=scale;this.offset=_12e3;return this.clear();},getWindowScale:function(){return "scale" in this?this.scale:1;},getWindowOffset:function(){return "offset" in this?this.offset:0;},calculate:function(min,max,span){if(this.initialized()){return this;}var o=this.opt;this.labels=o.labels;this.scaler=lin.buildScaler(min,max,span,o);var tsb=this.scaler.bounds;if("scale" in this){o.from=tsb.lower+this.offset;o.to=(tsb.upper-tsb.lower)/this.scale+o.from;if(!isFinite(o.from)||isNaN(o.from)||!isFinite(o.to)||isNaN(o.to)||o.to-o.from>=tsb.upper-tsb.lower){delete o.from;delete o.to;delete this.scale;delete this.offset;}else{if(o.from<tsb.lower){o.to+=tsb.lower-o.from;o.from=tsb.lower;}else{if(o.to>tsb.upper){o.from+=tsb.upper-o.to;o.to=tsb.upper;}}this.offset=o.from-tsb.lower;}this.scaler=lin.buildScaler(min,max,span,o);tsb=this.scaler.bounds;if(this.scale==1&&this.offset==0){delete this.scale;delete this.offset;}}return this;},getScaler:function(){return this.scaler;},getTicks:function(){return this.ticks;}});});},"dojox/widget/gauge/AnalogArcIndicator":function(){define("dojox/widget/gauge/AnalogArcIndicator",["dijit","dojo","dojox","dojo/require!dojox/gauges/AnalogArcIndicator"],function(dijit,dojo,dojox){dojo.provide("dojox.widget.gauge.AnalogArcIndicator");dojo.require("dojox.gauges.AnalogArcIndicator");dojox.widget.gauge.AnalogArcIndicator=dojox.gauges.AnalogArcIndicator;});},"dijit/form/NumberSpinner":function(){define("dijit/form/NumberSpinner",["dojo/_base/declare","dojo/_base/event","dojo/keys","./_Spinner","./NumberTextBox"],function(_12e4,event,keys,_12e5,_12e6){return _12e4("dijit.form.NumberSpinner",[_12e5,_12e6.Mixin],{adjust:function(val,delta){var tc=this.constraints,v=isNaN(val),_12e7=!isNaN(tc.max),_12e8=!isNaN(tc.min);if(v&&delta!=0){val=(delta>0)?_12e8?tc.min:_12e7?tc.max:0:_12e7?this.constraints.max:_12e8?tc.min:0;}var _12e9=val+delta;if(v||isNaN(_12e9)){return val;}if(_12e7&&(_12e9>tc.max)){_12e9=tc.max;}if(_12e8&&(_12e9<tc.min)){_12e9=tc.min;}return _12e9;},_onKeyPress:function(e){if((e.charOrCode==keys.HOME||e.charOrCode==keys.END)&&!(e.ctrlKey||e.altKey||e.metaKey)&&typeof this.get("value")!="undefined"){var value=this.constraints[(e.charOrCode==keys.HOME?"min":"max")];if(typeof value=="number"){this._setValueAttr(value,false);}event.stop(e);}}});});},"dijit/MenuItem":function(){require({cache:{"url:dijit/templates/MenuItem.html":"<tr class=\"dijitReset dijitMenuItem\" data-dojo-attach-point=\"focusNode\" role=\"menuitem\" tabIndex=\"-1\">\n\t<td class=\"dijitReset dijitMenuItemIconCell\" role=\"presentation\">\n\t\t<img src=\"${_blankGif}\" alt=\"\" class=\"dijitIcon dijitMenuItemIcon\" data-dojo-attach-point=\"iconNode\"/>\n\t</td>\n\t<td class=\"dijitReset dijitMenuItemLabel\" colspan=\"2\" data-dojo-attach-point=\"containerNode\"></td>\n\t<td class=\"dijitReset dijitMenuItemAccelKey\" style=\"display: none\" data-dojo-attach-point=\"accelKeyNode\"></td>\n\t<td class=\"dijitReset dijitMenuArrowCell\" role=\"presentation\">\n\t\t<div data-dojo-attach-point=\"arrowWrapper\" style=\"visibility: hidden\">\n\t\t\t<img src=\"${_blankGif}\" alt=\"\" class=\"dijitMenuExpand\"/>\n\t\t\t<span class=\"dijitMenuExpandA11y\">+</span>\n\t\t</div>\n\t</td>\n</tr>\n"}});define("dijit/MenuItem",["dojo/_base/declare","dojo/dom","dojo/dom-attr","dojo/dom-class","dojo/_base/kernel","dojo/sniff","./_Widget","./_TemplatedMixin","./_Contained","./_CssStateMixin","dojo/text!./templates/MenuItem.html"],function(_12ea,dom,_12eb,_12ec,_12ed,has,_12ee,_12ef,_12f0,_12f1,_12f2){return _12ea("dijit.MenuItem",[_12ee,_12ef,_12f0,_12f1],{templateString:_12f2,baseClass:"dijitMenuItem",label:"",_setLabelAttr:function(val){this.containerNode.innerHTML=val;this._set("label",val);if(this.textDir==="auto"){this.applyTextDir(this.focusNode,this.label);}},iconClass:"dijitNoIcon",_setIconClassAttr:{node:"iconNode",type:"class"},accelKey:"",disabled:false,_fillContent:function(_12f3){if(_12f3&&!("label" in this.params)){this.set("label",_12f3.innerHTML);}},buildRendering:function(){this.inherited(arguments);var label=this.id+"_text";_12eb.set(this.containerNode,"id",label);if(this.accelKeyNode){_12eb.set(this.accelKeyNode,"id",this.id+"_accel");label+=" "+this.id+"_accel";}this.domNode.setAttribute("aria-labelledby",label);dom.setSelectable(this.domNode,false);},onClick:function(){},focus:function(){try{if(has("ie")==8){this.containerNode.focus();}this.focusNode.focus();}catch(e){}},_onFocus:function(){this._setSelected(true);this.getParent()._onItemFocus(this);this.inherited(arguments);},_setSelected:function(_12f4){_12ec.toggle(this.domNode,"dijitMenuItemSelected",_12f4);},setLabel:function(_12f5){_12ed.deprecated("dijit.MenuItem.setLabel() is deprecated.  Use set('label', ...) instead.","","2.0");this.set("label",_12f5);},setDisabled:function(_12f6){_12ed.deprecated("dijit.Menu.setDisabled() is deprecated.  Use set('disabled', bool) instead.","","2.0");this.set("disabled",_12f6);},_setDisabledAttr:function(value){this.focusNode.setAttribute("aria-disabled",value?"true":"false");this._set("disabled",value);},_setAccelKeyAttr:function(value){this.accelKeyNode.style.display=value?"":"none";this.accelKeyNode.innerHTML=value;_12eb.set(this.containerNode,"colSpan",value?"1":"2");this._set("accelKey",value);},_setTextDirAttr:function(_12f7){if(!this._created||this.textDir!=_12f7){this._set("textDir",_12f7);this.applyTextDir(this.focusNode,this.label);}}});});},"dojox/charting/axis2d/common":function(){define("dojox/charting/axis2d/common",["dojo/_base/lang","dojo/_base/window","dojo/dom-geometry","dojox/gfx"],function(lang,win,_12f8,g){var _12f9=lang.getObject("dojox.charting.axis2d.common",true);var _12fa=function(s){s.marginLeft="0px";s.marginTop="0px";s.marginRight="0px";s.marginBottom="0px";s.paddingLeft="0px";s.paddingTop="0px";s.paddingRight="0px";s.paddingBottom="0px";s.borderLeftWidth="0px";s.borderTopWidth="0px";s.borderRightWidth="0px";s.borderBottomWidth="0px";};var _12fb=function(n){if(n["getBoundingClientRect"]){var bcr=n.getBoundingClientRect();return bcr.width||(bcr.right-bcr.left);}else{return _12f8.getMarginBox(n).w;}};return lang.mixin(_12f9,{createText:{gfx:function(chart,_12fc,x,y,align,text,font,_12fd){return _12fc.createText({x:x,y:y,text:text,align:align}).setFont(font).setFill(_12fd);},html:function(chart,_12fe,x,y,align,text,font,_12ff,_1300){var p=win.doc.createElement("div"),s=p.style,_1301;if(chart.getTextDir){p.dir=chart.getTextDir(text);}_12fa(s);s.font=font;p.innerHTML=String(text).replace(/\s/g,"&nbsp;");s.color=_12ff;s.position="absolute";s.left="-10000px";win.body().appendChild(p);var size=g.normalizedLength(g.splitFontString(font).size);if(!_1300){_1301=_12fb(p);}if(p.dir=="rtl"){x+=_1300?_1300:_1301;}win.body().removeChild(p);s.position="relative";if(_1300){s.width=_1300+"px";switch(align){case "middle":s.textAlign="center";s.left=(x-_1300/2)+"px";break;case "end":s.textAlign="right";s.left=(x-_1300)+"px";break;default:s.left=x+"px";s.textAlign="left";break;}}else{switch(align){case "middle":s.left=Math.floor(x-_1301/2)+"px";break;case "end":s.left=Math.floor(x-_1301)+"px";break;default:s.left=Math.floor(x)+"px";break;}}s.top=Math.floor(y-size)+"px";s.whiteSpace="nowrap";var wrap=win.doc.createElement("div"),w=wrap.style;_12fa(w);w.width="0px";w.height="0px";wrap.appendChild(p);chart.node.insertBefore(wrap,chart.node.firstChild);return wrap;}}});});},"dojox/grid/_EditManager":function(){define("dojox/grid/_EditManager",["dojo/_base/lang","dojo/_base/array","dojo/_base/declare","dojo/_base/connect","dojo/_base/sniff","./util"],function(lang,array,_1302,_1303,has,util){return _1302("dojox.grid._EditManager",null,{constructor:function(_1304){this.grid=_1304;if(has("ie")){this.connections=[_1303.connect(document.body,"onfocus",lang.hitch(this,"_boomerangFocus"))];}else{this.connections=[_1303.connect(this.grid,"onBlur",this,"apply")];}},info:{},destroy:function(){array.forEach(this.connections,_1303.disconnect);},cellFocus:function(_1305,_1306){if(this.grid.singleClickEdit||this.isEditRow(_1306)){this.setEditCell(_1305,_1306);}else{this.apply();}if(this.isEditing()||(_1305&&_1305.editable&&_1305.alwaysEditing)){this._focusEditor(_1305,_1306);}},rowClick:function(e){if(this.isEditing()&&!this.isEditRow(e.rowIndex)){this.apply();}},styleRow:function(inRow){if(inRow.index==this.info.rowIndex){inRow.customClasses+=" dojoxGridRowEditing";}},dispatchEvent:function(e){var c=e.cell,ed=(c&&c["editable"])?c:0;return ed&&ed.dispatchEvent(e.dispatch,e);},isEditing:function(){return this.info.rowIndex!==undefined;},isEditCell:function(_1307,_1308){return (this.info.rowIndex===_1307)&&(this.info.cell.index==_1308);},isEditRow:function(_1309){return this.info.rowIndex===_1309;},setEditCell:function(_130a,_130b){if(!this.isEditCell(_130b,_130a.index)&&this.grid.canEdit&&this.grid.canEdit(_130a,_130b)){this.start(_130a,_130b,this.isEditRow(_130b)||_130a.editable);}},_focusEditor:function(_130c,_130d){util.fire(_130c,"focus",[_130d]);},focusEditor:function(){if(this.isEditing()){this._focusEditor(this.info.cell,this.info.rowIndex);}},_boomerangWindow:500,_shouldCatchBoomerang:function(){return this._catchBoomerang>new Date().getTime();},_boomerangFocus:function(){if(this._shouldCatchBoomerang()){this.grid.focus.focusGrid();this.focusEditor();this._catchBoomerang=0;}},_doCatchBoomerang:function(){if(has("ie")){this._catchBoomerang=new Date().getTime()+this._boomerangWindow;}},start:function(_130e,_130f,_1310){if(!this._isValidInput()){return;}this.grid.beginUpdate();this.editorApply();if(this.isEditing()&&!this.isEditRow(_130f)){this.applyRowEdit();this.grid.updateRow(_130f);}if(_1310){this.info={cell:_130e,rowIndex:_130f};this.grid.doStartEdit(_130e,_130f);this.grid.updateRow(_130f);}else{this.info={};}this.grid.endUpdate();this.grid.focus.focusGrid();this._focusEditor(_130e,_130f);this._doCatchBoomerang();},_editorDo:function(_1311){var c=this.info.cell;if(c&&c.editable){c[_1311](this.info.rowIndex);}},editorApply:function(){this._editorDo("apply");},editorCancel:function(){this._editorDo("cancel");},applyCellEdit:function(_1312,_1313,_1314){if(this.grid.canEdit(_1313,_1314)){this.grid.doApplyCellEdit(_1312,_1314,_1313.field);}},applyRowEdit:function(){this.grid.doApplyEdit(this.info.rowIndex,this.info.cell.field);},apply:function(){if(this.isEditing()&&this._isValidInput()){this.grid.beginUpdate();this.editorApply();this.applyRowEdit();this.info={};this.grid.endUpdate();this.grid.focus.focusGrid();this._doCatchBoomerang();}},cancel:function(){if(this.isEditing()){this.grid.beginUpdate();this.editorCancel();this.info={};this.grid.endUpdate();this.grid.focus.focusGrid();this._doCatchBoomerang();}},save:function(_1315,_1316){var c=this.info.cell;if(this.isEditRow(_1315)&&(!_1316||c.view==_1316)&&c.editable){c.save(c,this.info.rowIndex);}},restore:function(_1317,_1318){var c=this.info.cell;if(this.isEditRow(_1318)&&c.view==_1317&&c.editable){c.restore(this.info.rowIndex);}},_isValidInput:function(){var w=(this.info.cell||{}).widget;if(!w||!w.isValid){return true;}w.focused=true;return w.isValid(true);}});});},"dojox/grid/_ViewManager":function(){define("dojox/grid/_ViewManager",["dojo/_base/declare","dojo/_base/sniff","dojo/dom-class"],function(_1319,has,_131a){return _1319("dojox.grid._ViewManager",null,{constructor:function(_131b){this.grid=_131b;},defaultWidth:200,views:[],resize:function(){this.onEach("resize");},render:function(){this.onEach("render");},addView:function(_131c){_131c.idx=this.views.length;this.views.push(_131c);},destroyViews:function(){for(var i=0,v;v=this.views[i];i++){v.destroy();}this.views=[];},getContentNodes:function(){var nodes=[];for(var i=0,v;v=this.views[i];i++){nodes.push(v.contentNode);}return nodes;},forEach:function(_131d){for(var i=0,v;v=this.views[i];i++){_131d(v,i);}},onEach:function(_131e,_131f){_131f=_131f||[];for(var i=0,v;v=this.views[i];i++){if(_131e in v){v[_131e].apply(v,_131f);}}},normalizeHeaderNodeHeight:function(){var _1320=[];for(var i=0,v;(v=this.views[i]);i++){if(v.headerContentNode.firstChild){_1320.push(v.headerContentNode);}}this.normalizeRowNodeHeights(_1320);},normalizeRowNodeHeights:function(_1321){var h=0;var _1322=[];if(this.grid.rowHeight){h=this.grid.rowHeight;}else{if(_1321.length<=1){return;}for(var i=0,n;(n=_1321[i]);i++){if(!_131a.contains(n,"dojoxGridNonNormalizedCell")){_1322[i]=n.firstChild.offsetHeight;h=Math.max(h,_1322[i]);}}h=(h>=0?h:0);if((has("mozilla")||has("ie")>8)&&h){h++;}}for(i=0;(n=_1321[i]);i++){if(_1322[i]!=h){n.firstChild.style.height=h+"px";}}},resetHeaderNodeHeight:function(){for(var i=0,v,n;(v=this.views[i]);i++){n=v.headerContentNode.firstChild;if(n){n.style.height="";}}},renormalizeRow:function(_1323){var _1324=[];for(var i=0,v,n;(v=this.views[i])&&(n=v.getRowNode(_1323));i++){n.firstChild.style.height="";_1324.push(n);}this.normalizeRowNodeHeights(_1324);},getViewWidth:function(_1325){return this.views[_1325].getWidth()||this.defaultWidth;},measureHeader:function(){this.resetHeaderNodeHeight();this.forEach(function(_1326){_1326.headerContentNode.style.height="";});var h=0;this.forEach(function(_1327){h=Math.max(_1327.headerNode.offsetHeight,h);});return h;},measureContent:function(){var h=0;this.forEach(function(_1328){h=Math.max(_1328.domNode.offsetHeight,h);});return h;},findClient:function(_1329){var c=this.grid.elasticView||-1;if(c<0){for(var i=1,v;(v=this.views[i]);i++){if(v.viewWidth){for(i=1;(v=this.views[i]);i++){if(!v.viewWidth){c=i;break;}}break;}}}if(c<0){c=Math.floor(this.views.length/2);}return c;},arrange:function(l,w){var i,v,vw,len=this.views.length,self=this;var c=(w<=0?len:this.findClient());var _132a=function(v,l){var ds=v.domNode.style;var hs=v.headerNode.style;if(!self.grid.isLeftToRight()){ds.right=l+"px";if(has("ff")<4){hs.right=l+v.getScrollbarWidth()+"px";}else{hs.right=l+"px";}if(!has("webkit")){hs.width=parseInt(hs.width,10)-v.getScrollbarWidth()+"px";}}else{ds.left=l+"px";hs.left=l+"px";}ds.top=0+"px";hs.top=0;};for(i=0;(v=this.views[i])&&(i<c);i++){vw=this.getViewWidth(i);v.setSize(vw,0);_132a(v,l);if(v.headerContentNode&&v.headerContentNode.firstChild){vw=v.getColumnsWidth()+v.getScrollbarWidth();}else{vw=v.domNode.offsetWidth;}l+=vw;}i++;var r=w;for(var j=len-1;(v=this.views[j])&&(i<=j);j--){vw=this.getViewWidth(j);v.setSize(vw,0);vw=v.domNode.offsetWidth;r-=vw;_132a(v,r);}if(c<len){v=this.views[c];vw=Math.max(1,r-l);v.setSize(vw+"px",0);_132a(v,l);}return l;},renderRow:function(_132b,_132c,_132d){var _132e=[];for(var i=0,v,n,_132f;(v=this.views[i])&&(n=_132c[i]);i++){_132f=v.renderRow(_132b);n.appendChild(_132f);_132e.push(_132f);}if(!_132d){this.normalizeRowNodeHeights(_132e);}},rowRemoved:function(_1330){this.onEach("rowRemoved",[_1330]);},updateRow:function(_1331,_1332){for(var i=0,v;v=this.views[i];i++){v.updateRow(_1331);}if(!_1332){this.renormalizeRow(_1331);}},updateRowStyles:function(_1333){this.onEach("updateRowStyles",[_1333]);},setScrollTop:function(inTop){var top=inTop;for(var i=0,v;v=this.views[i];i++){top=v.setScrollTop(inTop);if(has("ie")&&v.headerNode&&v.scrollboxNode){v.headerNode.scrollLeft=v.scrollboxNode.scrollLeft;}}return top;},getFirstScrollingView:function(){for(var i=0,v;(v=this.views[i]);i++){if(v.hasHScrollbar()||v.hasVScrollbar()){return v;}}return null;}});});},"dojox/gfx/fx":function(){define("dojox/gfx/fx",["dojo/_base/lang","./_base","./matrix","dojo/_base/Color","dojo/_base/array","dojo/_base/fx","dojo/_base/connect"],function(lang,g,m,Color,arr,fx,Hub){var fxg=g.fx={};function _1334(start,end){this.start=start,this.end=end;};_1334.prototype.getValue=function(r){return (this.end-this.start)*r+this.start;};function _1335(start,end,units){this.start=start,this.end=end;this.units=units;};_1335.prototype.getValue=function(r){return (this.end-this.start)*r+this.start+this.units;};function _1336(start,end){this.start=start,this.end=end;this.temp=new Color();};_1336.prototype.getValue=function(r){return Color.blendColors(this.start,this.end,r,this.temp);};function _1337(_1338){this.values=_1338;this.length=_1338.length;};_1337.prototype.getValue=function(r){return this.values[Math.min(Math.floor(r*this.length),this.length-1)];};function _1339(_133a,def){this.values=_133a;this.def=def?def:{};};_1339.prototype.getValue=function(r){var ret=lang.clone(this.def);for(var i in this.values){ret[i]=this.values[i].getValue(r);}return ret;};function _133b(stack,_133c){this.stack=stack;this.original=_133c;};_133b.prototype.getValue=function(r){var ret=[];arr.forEach(this.stack,function(t){if(t instanceof m.Matrix2D){ret.push(t);return;}if(t.name=="original"&&this.original){ret.push(this.original);return;}if(t.name=="matrix"){if((t.start instanceof m.Matrix2D)&&(t.end instanceof m.Matrix2D)){var _133d=new m.Matrix2D();for(var p in t.start){_133d[p]=(t.end[p]-t.start[p])*r+t.start[p];}ret.push(_133d);}return;}if(!(t.name in m)){return;}var f=m[t.name];if(typeof f!="function"){ret.push(f);return;}var val=arr.map(t.start,function(v,i){return (t.end[i]-v)*r+v;}),_133e=f.apply(m,val);if(_133e instanceof m.Matrix2D){ret.push(_133e);}},this);return ret;};var _133f=new Color(0,0,0,0);function _1340(prop,obj,name,def){if(prop.values){return new _1337(prop.values);}var value,start,end;if(prop.start){start=g.normalizeColor(prop.start);}else{start=value=obj?(name?obj[name]:obj):def;}if(prop.end){end=g.normalizeColor(prop.end);}else{if(!value){value=obj?(name?obj[name]:obj):def;}end=value;}return new _1336(start,end);};function _1341(prop,obj,name,def){if(prop.values){return new _1337(prop.values);}var value,start,end;if(prop.start){start=prop.start;}else{start=value=obj?obj[name]:def;}if(prop.end){end=prop.end;}else{if(typeof value!="number"){value=obj?obj[name]:def;}end=value;}return new _1334(start,end);};fxg.animateStroke=function(args){if(!args.easing){args.easing=fx._defaultEasing;}var anim=new fx.Animation(args),shape=args.shape,_1342;Hub.connect(anim,"beforeBegin",anim,function(){_1342=shape.getStroke();var prop=args.color,_1343={},value,start,end;if(prop){_1343.color=_1340(prop,_1342,"color",_133f);}prop=args.style;if(prop&&prop.values){_1343.style=new _1337(prop.values);}prop=args.width;if(prop){_1343.width=_1341(prop,_1342,"width",1);}prop=args.cap;if(prop&&prop.values){_1343.cap=new _1337(prop.values);}prop=args.join;if(prop){if(prop.values){_1343.join=new _1337(prop.values);}else{start=prop.start?prop.start:(_1342&&_1342.join||0);end=prop.end?prop.end:(_1342&&_1342.join||0);if(typeof start=="number"&&typeof end=="number"){_1343.join=new _1334(start,end);}}}this.curve=new _1339(_1343,_1342);});Hub.connect(anim,"onAnimate",shape,"setStroke");return anim;};fxg.animateFill=function(args){if(!args.easing){args.easing=fx._defaultEasing;}var anim=new fx.Animation(args),shape=args.shape,fill;Hub.connect(anim,"beforeBegin",anim,function(){fill=shape.getFill();var prop=args.color,_1344={};if(prop){this.curve=_1340(prop,fill,"",_133f);}});Hub.connect(anim,"onAnimate",shape,"setFill");return anim;};fxg.animateFont=function(args){if(!args.easing){args.easing=fx._defaultEasing;}var anim=new fx.Animation(args),shape=args.shape,font;Hub.connect(anim,"beforeBegin",anim,function(){font=shape.getFont();var prop=args.style,_1345={},value,start,end;if(prop&&prop.values){_1345.style=new _1337(prop.values);}prop=args.variant;if(prop&&prop.values){_1345.variant=new _1337(prop.values);}prop=args.weight;if(prop&&prop.values){_1345.weight=new _1337(prop.values);}prop=args.family;if(prop&&prop.values){_1345.family=new _1337(prop.values);}prop=args.size;if(prop&&prop.units){start=parseFloat(prop.start?prop.start:(shape.font&&shape.font.size||"0"));end=parseFloat(prop.end?prop.end:(shape.font&&shape.font.size||"0"));_1345.size=new _1335(start,end,prop.units);}this.curve=new _1339(_1345,font);});Hub.connect(anim,"onAnimate",shape,"setFont");return anim;};fxg.animateTransform=function(args){if(!args.easing){args.easing=fx._defaultEasing;}var anim=new fx.Animation(args),shape=args.shape,_1346;Hub.connect(anim,"beforeBegin",anim,function(){_1346=shape.getTransform();this.curve=new _133b(args.transform,_1346);});Hub.connect(anim,"onAnimate",shape,"setTransform");return anim;};return fxg;});},"dijit/DropDownMenu":function(){require({cache:{"url:dijit/templates/Menu.html":"<table class=\"dijit dijitMenu dijitMenuPassive dijitReset dijitMenuTable\" role=\"menu\" tabIndex=\"${tabIndex}\"\n\t   data-dojo-attach-event=\"onkeypress:_onKeyPress\" cellspacing=\"0\">\n\t<tbody class=\"dijitReset\" data-dojo-attach-point=\"containerNode\"></tbody>\n</table>\n"}});define("dijit/DropDownMenu",["dojo/_base/declare","dojo/_base/event","dojo/keys","dojo/text!./templates/Menu.html","./_OnDijitClickMixin","./_MenuBase"],function(_1347,event,keys,_1348,_1349,_134a){return _1347("dijit.DropDownMenu",[_134a,_1349],{templateString:_1348,baseClass:"dijitMenu",postCreate:function(){this.inherited(arguments);var l=this.isLeftToRight();this._openSubMenuKey=l?keys.RIGHT_ARROW:keys.LEFT_ARROW;this._closeSubMenuKey=l?keys.LEFT_ARROW:keys.RIGHT_ARROW;this.connectKeyNavHandlers([keys.UP_ARROW],[keys.DOWN_ARROW]);},_onKeyPress:function(evt){if(evt.ctrlKey||evt.altKey){return;}switch(evt.charOrCode){case this._openSubMenuKey:this._moveToPopup(evt);event.stop(evt);break;case this._closeSubMenuKey:if(this.parentMenu){if(this.parentMenu._isMenuBar){this.parentMenu.focusPrev();}else{this.onCancel(false);}}else{event.stop(evt);}break;}}});});},"dijit/_editor/plugins/LinkDialog":function(){define("dijit/_editor/plugins/LinkDialog",["require","dojo/_base/declare","dojo/dom-attr","dojo/keys","dojo/_base/lang","dojo/sniff","dojo/_base/query","dojo/string","../../_Widget","../_Plugin","../../form/DropDownButton","../range"],function(_134b,_134c,_134d,keys,lang,has,query,_134e,_134f,_1350,_1351,_1352){var _1353=_134c("dijit._editor.plugins.LinkDialog",_1350,{buttonClass:_1351,useDefaultCommand:false,urlRegExp:"((https?|ftps?|file)\\://|./|../|/|)(/[a-zA-Z]{1,1}:/|)(((?:(?:[\\da-zA-Z](?:[-\\da-zA-Z]{0,61}[\\da-zA-Z])?)\\.)*(?:[a-zA-Z](?:[-\\da-zA-Z]{0,80}[\\da-zA-Z])?)\\.?)|(((\\d|[1-9]\\d|1\\d\\d|2[0-4]\\d|25[0-5])\\.){3}(\\d|[1-9]\\d|1\\d\\d|2[0-4]\\d|25[0-5])|(0[xX]0*[\\da-fA-F]?[\\da-fA-F]\\.){3}0[xX]0*[\\da-fA-F]?[\\da-fA-F]|(0+[0-3][0-7][0-7]\\.){3}0+[0-3][0-7][0-7]|(0|[1-9]\\d{0,8}|[1-3]\\d{9}|4[01]\\d{8}|42[0-8]\\d{7}|429[0-3]\\d{6}|4294[0-8]\\d{5}|42949[0-5]\\d{4}|429496[0-6]\\d{3}|4294967[01]\\d{2}|42949672[0-8]\\d|429496729[0-5])|0[xX]0*[\\da-fA-F]{1,8}|([\\da-fA-F]{1,4}\\:){7}[\\da-fA-F]{1,4}|([\\da-fA-F]{1,4}\\:){6}((\\d|[1-9]\\d|1\\d\\d|2[0-4]\\d|25[0-5])\\.){3}(\\d|[1-9]\\d|1\\d\\d|2[0-4]\\d|25[0-5])))(\\:\\d+)?(/(?:[^?#\\s/]+/)*(?:[^?#\\s/]{0,}(?:\\?[^?#\\s/]*)?(?:#.*)?)?)?",emailRegExp:"<?(mailto\\:)([!#-'*+\\-\\/-9=?A-Z^-~]+[.])*[!#-'*+\\-\\/-9=?A-Z^-~]+"+"@"+"((?:(?:[\\da-zA-Z](?:[-\\da-zA-Z]{0,61}[\\da-zA-Z])?)\\.)+(?:[a-zA-Z](?:[-\\da-zA-Z]{0,6}[\\da-zA-Z])?)\\.?)|localhost|^[^-][a-zA-Z0-9_-]*>?",htmlTemplate:"<a href=\"${urlInput}\" _djrealurl=\"${urlInput}\""+" target=\"${targetSelect}\""+">${textInput}</a>",tag:"a",_hostRxp:/^((([^\[:]+):)?([^@]+)@)?(\[([^\]]+)\]|([^\[:]*))(:([0-9]+))?$/,_userAtRxp:/^([!#-'*+\-\/-9=?A-Z^-~]+[.])*[!#-'*+\-\/-9=?A-Z^-~]+@/i,linkDialogTemplate:["<table role='presentation'><tr><td>","<label for='${id}_urlInput'>${url}</label>","</td><td>","<input data-dojo-type='dijit.form.ValidationTextBox' required='true' "+"id='${id}_urlInput' name='urlInput' data-dojo-props='intermediateChanges:true'/>","</td></tr><tr><td>","<label for='${id}_textInput'>${text}</label>","</td><td>","<input data-dojo-type='dijit.form.ValidationTextBox' required='true' id='${id}_textInput' "+"name='textInput' data-dojo-props='intermediateChanges:true'/>","</td></tr><tr><td>","<label for='${id}_targetSelect'>${target}</label>","</td><td>","<select id='${id}_targetSelect' name='targetSelect' data-dojo-type='dijit.form.Select'>","<option selected='selected' value='_self'>${currentWindow}</option>","<option value='_blank'>${newWindow}</option>","<option value='_top'>${topWindow}</option>","<option value='_parent'>${parentWindow}</option>","</select>","</td></tr><tr><td colspan='2'>","<button data-dojo-type='dijit.form.Button' type='submit' id='${id}_setButton'>${set}</button>","<button data-dojo-type='dijit.form.Button' type='button' id='${id}_cancelButton'>${buttonCancel}</button>","</td></tr></table>"].join(""),_initButton:function(){this.inherited(arguments);this.button.loadDropDown=lang.hitch(this,"_loadDropDown");this._connectTagEvents();},_loadDropDown:function(_1354){_134b(["dojo/i18n","../../TooltipDialog","../../registry","../../form/Button","../../form/Select","../../form/ValidationTextBox","dojo/i18n!../../nls/common","dojo/i18n!../nls/LinkDialog"],lang.hitch(this,function(i18n,_1355,_1356){var _1357=this;this.tag=this.command=="insertImage"?"img":"a";var _1358=lang.delegate(i18n.getLocalization("dijit","common",this.lang),i18n.getLocalization("dijit._editor","LinkDialog",this.lang));var _1359=(this.dropDown=this.button.dropDown=new _1355({title:_1358[this.command+"Title"],ownerDocument:this.editor.ownerDocument,dir:this.editor.dir,execute:lang.hitch(this,"setValue"),onOpen:function(){_1357._onOpenDialog();_1355.prototype.onOpen.apply(this,arguments);},onCancel:function(){setTimeout(lang.hitch(_1357,"_onCloseDialog"),0);}}));_1358.urlRegExp=this.urlRegExp;_1358.id=_1356.getUniqueId(this.editor.id);this._uniqueId=_1358.id;this._setContent(_1359.title+"<div style='border-bottom: 1px black solid;padding-bottom:2pt;margin-bottom:4pt'></div>"+_134e.substitute(this.linkDialogTemplate,_1358));_1359.startup();this._urlInput=_1356.byId(this._uniqueId+"_urlInput");this._textInput=_1356.byId(this._uniqueId+"_textInput");this._setButton=_1356.byId(this._uniqueId+"_setButton");this.connect(_1356.byId(this._uniqueId+"_cancelButton"),"onClick",function(){this.dropDown.onCancel();});if(this._urlInput){this.connect(this._urlInput,"onChange","_checkAndFixInput");}if(this._textInput){this.connect(this._textInput,"onChange","_checkAndFixInput");}this._urlRegExp=new RegExp("^"+this.urlRegExp+"$","i");this._emailRegExp=new RegExp("^"+this.emailRegExp+"$","i");this._urlInput.isValid=lang.hitch(this,function(){var value=this._urlInput.get("value");return this._urlRegExp.test(value)||this._emailRegExp.test(value);});this.connect(_1359.domNode,"onkeypress",function(e){if(e&&e.charOrCode==keys.ENTER&&!e.shiftKey&&!e.metaKey&&!e.ctrlKey&&!e.altKey){if(!this._setButton.get("disabled")){_1359.onExecute();_1359.execute(_1359.get("value"));}}});_1354();}));},_checkAndFixInput:function(){var self=this;var url=this._urlInput.get("value");var _135a=function(url){var _135b=false;var _135c=false;if(url&&url.length>1){url=lang.trim(url);if(url.indexOf("mailto:")!==0){if(url.indexOf("/")>0){if(url.indexOf("://")===-1){if(url.charAt(0)!=="/"&&url.indexOf("./")&&url.indexOf("../")!==0){if(self._hostRxp.test(url)){_135b=true;}}}}else{if(self._userAtRxp.test(url)){_135c=true;}}}}if(_135b){self._urlInput.set("value","http://"+url);}if(_135c){self._urlInput.set("value","mailto:"+url);}self._setButton.set("disabled",!self._isValid());};if(this._delayedCheck){clearTimeout(this._delayedCheck);this._delayedCheck=null;}this._delayedCheck=setTimeout(function(){_135a(url);},250);},_connectTagEvents:function(){this.editor.onLoadDeferred.then(lang.hitch(this,function(){this.connect(this.editor.editNode,"ondblclick",this._onDblClick);}));},_isValid:function(){return this._urlInput.isValid()&&this._textInput.isValid();},_setContent:function(_135d){this.dropDown.set({parserScope:"dojo",content:_135d});},_checkValues:function(args){if(args&&args.urlInput){args.urlInput=args.urlInput.replace(/"/g,"&quot;");}return args;},setValue:function(args){this._onCloseDialog();if(has("ie")<9){var sel=_1352.getSelection(this.editor.window);var range=sel.getRangeAt(0);var a=range.endContainer;if(a.nodeType===3){a=a.parentNode;}if(a&&(a.nodeName&&a.nodeName.toLowerCase()!==this.tag)){a=this.editor._sCall("getSelectedElement",[this.tag]);}if(a&&(a.nodeName&&a.nodeName.toLowerCase()===this.tag)){if(this.editor.queryCommandEnabled("unlink")){this.editor._sCall("selectElementChildren",[a]);this.editor.execCommand("unlink");}}}args=this._checkValues(args);this.editor.execCommand("inserthtml",_134e.substitute(this.htmlTemplate,args));query("a",this.editor.document).forEach(function(a){if(!a.innerHTML&&!_134d.has(a,"name")){a.parentNode.removeChild(a);}},this);},_onCloseDialog:function(){this.editor.focus();},_getCurrentValues:function(a){var url,text,_135e;if(a&&a.tagName.toLowerCase()===this.tag){url=a.getAttribute("_djrealurl")||a.getAttribute("href");_135e=a.getAttribute("target")||"_self";text=a.textContent||a.innerText;this.editor._sCall("selectElement",[a,true]);}else{text=this.editor._sCall("getSelectedText");}return {urlInput:url||"",textInput:text||"",targetSelect:_135e||""};},_onOpenDialog:function(){var a,b,fc;if(has("ie")){var sel=_1352.getSelection(this.editor.window);var range=sel.getRangeAt(0);a=range.endContainer;if(a.nodeType===3){a=a.parentNode;}if(a&&(a.nodeName&&a.nodeName.toLowerCase()!==this.tag)){a=this.editor._sCall("getSelectedElement",[this.tag]);}if(!a||(a.nodeName&&a.nodeName.toLowerCase()!==this.tag)){b=this.editor._sCall("getAncestorElement",[this.tag]);if(b&&(b.nodeName&&b.nodeName.toLowerCase()==this.tag)){a=b;this.editor._sCall("selectElement",[a]);}else{if(range.startContainer===range.endContainer){fc=range.startContainer.firstChild;if(fc&&(fc.nodeName&&fc.nodeName.toLowerCase()==this.tag)){a=fc;this.editor._sCall("selectElement",[a]);}}}}}else{a=this.editor._sCall("getAncestorElement",[this.tag]);}this.dropDown.reset();this._setButton.set("disabled",true);this.dropDown.set("value",this._getCurrentValues(a));},_onDblClick:function(e){if(e&&e.target){var t=e.target;var tg=t.tagName?t.tagName.toLowerCase():"";if(tg===this.tag&&_134d.get(t,"href")){var _135f=this.editor;this.editor._sCall("selectElement",[t]);_135f.onDisplayChanged();if(_135f._updateTimer){_135f._updateTimer.remove();delete _135f._updateTimer;}_135f.onNormalizedDisplayChanged();var _1360=this.button;setTimeout(function(){_1360.set("disabled",false);_1360.loadAndOpenDropDown().then(function(){if(_1360.dropDown.focus){_1360.dropDown.focus();}});},10);}}}});var _1361=_134c("dijit._editor.plugins.ImgLinkDialog",[_1353],{linkDialogTemplate:["<table role='presentation'><tr><td>","<label for='${id}_urlInput'>${url}</label>","</td><td>","<input dojoType='dijit.form.ValidationTextBox' regExp='${urlRegExp}' "+"required='true' id='${id}_urlInput' name='urlInput' data-dojo-props='intermediateChanges:true'/>","</td></tr><tr><td>","<label for='${id}_textInput'>${text}</label>","</td><td>","<input data-dojo-type='dijit.form.ValidationTextBox' required='false' id='${id}_textInput' "+"name='textInput' data-dojo-props='intermediateChanges:true'/>","</td></tr><tr><td>","</td><td>","</td></tr><tr><td colspan='2'>","<button data-dojo-type='dijit.form.Button' type='submit' id='${id}_setButton'>${set}</button>","<button data-dojo-type='dijit.form.Button' type='button' id='${id}_cancelButton'>${buttonCancel}</button>","</td></tr></table>"].join(""),htmlTemplate:"<img src=\"${urlInput}\" _djrealurl=\"${urlInput}\" alt=\"${textInput}\" />",tag:"img",_getCurrentValues:function(img){var url,text;if(img&&img.tagName.toLowerCase()===this.tag){url=img.getAttribute("_djrealurl")||img.getAttribute("src");text=img.getAttribute("alt");this.editor._sCall("selectElement",[img,true]);}else{text=this.editor._sCall("getSelectedText",[]);}return {urlInput:url||"",textInput:text||""};},_isValid:function(){return this._urlInput.isValid();},_connectTagEvents:function(){this.inherited(arguments);this.editor.onLoadDeferred.then(lang.hitch(this,function(){this.connect(this.editor.editNode,"onmousedown",this._selectTag);}));},_selectTag:function(e){if(e&&e.target){var t=e.target;var tg=t.tagName?t.tagName.toLowerCase():"";if(tg===this.tag){this.editor._sCall("selectElement",[t]);}}},_checkValues:function(args){if(args&&args.urlInput){args.urlInput=args.urlInput.replace(/"/g,"&quot;");}if(args&&args.textInput){args.textInput=args.textInput.replace(/"/g,"&quot;");}return args;},_onDblClick:function(e){if(e&&e.target){var t=e.target;var tg=t.tagName?t.tagName.toLowerCase():"";if(tg===this.tag&&_134d.get(t,"src")){var _1362=this.editor;this.editor._sCall("selectElement",[t]);_1362.onDisplayChanged();if(_1362._updateTimer){_1362._updateTimer.remove();delete _1362._updateTimer;}_1362.onNormalizedDisplayChanged();var _1363=this.button;setTimeout(function(){_1363.set("disabled",false);_1363.loadAndOpenDropDown().then(function(){if(_1363.dropDown.focus){_1363.dropDown.focus();}});},10);}}}});_1350.registry["createLink"]=function(){return new _1353({command:"createLink"});};_1350.registry["insertImage"]=function(){return new _1361({command:"insertImage"});};_1353.ImgLinkDialog=_1361;return _1353;});},"dojox/gauges/_Indicator":function(){define("dojox/gauges/_Indicator",["dojo/_base/lang","dojo/_base/declare","dojo/_base/fx","dojo/_base/html","dojo/_base/connect","dijit/_Widget","dojo/dom-construct","dojo/dom-class"],function(lang,_1364,fx,html,_1365,_1366,dom,_1367){return _1364("dojox.gauges._Indicator",[_1366],{value:0,type:"",color:"black",strokeColor:"",label:"",font:{family:"sans-serif",size:"12px"},length:0,width:0,offset:0,hover:"",front:false,easing:fx._defaultEasing,duration:1000,hideValue:false,noChange:false,interactionMode:"indicator",_gauge:null,title:"",startup:function(){if(this.onDragMove){this.onDragMove=lang.hitch(this.onDragMove);}if(this.strokeColor===""){this.strokeColor=undefined;}},postCreate:function(){if(this.title===""){html.style(this.domNode,"display","none");}if(lang.isString(this.easing)){this.easing=lang.getObject(this.easing);}},buildRendering:function(){var n=this.domNode=this.srcNodeRef?this.srcNodeRef:dom.create("div");_1367.add(n,"dojoxGaugeIndicatorDiv");var title=dom.create("label");if(this.title){title.innerHTML=this.title+":";}dom.place(title,n);this.valueNode=dom.create("input",{className:"dojoxGaugeIndicatorInput",size:5,value:this.value});dom.place(this.valueNode,n);_1365.connect(this.valueNode,"onchange",this,this._update);},_update:function(){this._updateValue(true);},_updateValue:function(_1368){var value=this.valueNode.value;if(value===""){this.value=null;}else{this.value=Number(value);this.hover=this.title+": "+value;}if(this._gauge){this.draw(this._gauge._indicatorsGroup,_1368||_1368==undefined?false:true);this.valueNode.value=this.value;if((this.title=="Target"||this.front)&&this._gauge.moveIndicator){this._gauge.moveIndicatorToFront(this);}this.valueChanged();}},valueChanged:function(){},update:function(value,_1369){if(!this.noChange){this.valueNode.value=value;this._updateValue(_1369);}},handleMouseOver:function(e){this._gauge._handleMouseOverIndicator(this,e);},handleMouseOut:function(e){this._gauge._handleMouseOutIndicator(this,e);this._gauge.gaugeContent.style.cursor="";},handleMouseDown:function(e){this._gauge._handleMouseDownIndicator(this,e);},handleTouchStart:function(e){this._gauge.handleTouchStartIndicator(this,e);},onDragMove:function(){this.value=Math.floor(this.value);this.valueNode.value=this.value;this.hover=this.title+": "+this.value;},draw:function(_136a){},remove:function(){if(this.shape){this.shape.parent.remove(this.shape);}this.shape=null;if(this.text){this.text.parent.remove(this.text);}this.text=null;}});});},"dojox/grid/_Grid":function(){require({cache:{"url:dojox/grid/resources/_Grid.html":"<div hidefocus=\"hidefocus\" role=\"grid\" dojoAttachEvent=\"onmouseout:_mouseOut\">\n\t<div class=\"dojoxGridMasterHeader\" dojoAttachPoint=\"viewsHeaderNode\" role=\"presentation\"></div>\n\t<div class=\"dojoxGridMasterView\" dojoAttachPoint=\"viewsNode\" role=\"presentation\"></div>\n\t<div class=\"dojoxGridMasterMessages\" style=\"display: none;\" dojoAttachPoint=\"messagesNode\"></div>\n\t<span dojoAttachPoint=\"lastFocusNode\" tabindex=\"0\"></span>\n</div>\n"}});define("dojox/grid/_Grid",["dojo/_base/kernel","../main","dojo/_base/declare","./_Events","./_Scroller","./_Layout","./_View","./_ViewManager","./_RowManager","./_FocusManager","./_EditManager","./Selection","./_RowSelector","./util","dijit/_Widget","dijit/_TemplatedMixin","dijit/CheckedMenuItem","dojo/text!./resources/_Grid.html","dojo/string","dojo/_base/array","dojo/_base/lang","dojo/_base/sniff","dojox/html/metrics","dojo/_base/html","dojo/query","dojo/dnd/common","dojo/i18n!dijit/nls/loading"],function(dojo,dojox,_136b,_136c,_136d,_136e,_136f,_1370,_1371,_1372,_1373,_1374,_1375,util,_1376,_1377,_1378,_1379,_137a,array,lang,has,_137b,html,query){if(!dojo.isCopyKey){dojo.isCopyKey=dojo.dnd.getCopyKeyState;}var _137c=_136b("dojox.grid._Grid",[_1376,_1377,_136c],{templateString:_1379,classTag:"dojoxGrid",rowCount:5,keepRows:75,rowsPerPage:25,autoWidth:false,initialWidth:"",autoHeight:"",rowHeight:0,autoRender:true,defaultHeight:"15em",height:"",structure:null,elasticView:-1,singleClickEdit:false,selectionMode:"extended",rowSelector:"",columnReordering:false,headerMenu:null,placeholderLabel:"GridColumns",selectable:false,_click:null,loadingMessage:"<span class='dojoxGridLoading'>${loadingState}</span>",errorMessage:"<span class='dojoxGridError'>${errorState}</span>",noDataMessage:"",escapeHTMLInData:true,formatterScope:null,editable:false,summary:"",_setSummaryAttr:"domNode",sortInfo:0,_placeholders:null,_layoutClass:_136e,buildRendering:function(){this.inherited(arguments);if(!this.domNode.getAttribute("tabIndex")){this.domNode.tabIndex="0";}this.createScroller();this.createLayout();this.createViews();this.createManagers();this.createSelection();this.connect(this.selection,"onSelected","onSelected");this.connect(this.selection,"onDeselected","onDeselected");this.connect(this.selection,"onChanged","onSelectionChanged");_137b.initOnFontResize();this.connect(_137b,"onFontResize","textSizeChanged");util.funnelEvents(this.domNode,this,"doKeyEvent",util.keyEvents);if(this.selectionMode!="none"){this.domNode.setAttribute("aria-multiselectable",this.selectionMode=="single"?"false":"true");}html.addClass(this.domNode,this.classTag);if(!this.isLeftToRight()){html.addClass(this.domNode,this.classTag+"Rtl");}},postMixInProperties:function(){this.inherited(arguments);var _137d=dojo.i18n.getLocalization("dijit","loading",this.lang);this.loadingMessage=_137a.substitute(this.loadingMessage,_137d);this.errorMessage=_137a.substitute(this.errorMessage,_137d);if(this.srcNodeRef&&this.srcNodeRef.style.height){this.height=this.srcNodeRef.style.height;}this._setAutoHeightAttr(this.autoHeight,true);this.lastScrollTop=this.scrollTop=0;},postCreate:function(){this._placeholders=[];this._setHeaderMenuAttr(this.headerMenu);this._setStructureAttr(this.structure);this._click=[];this.inherited(arguments);if(this.domNode&&this.autoWidth&&this.initialWidth){this.domNode.style.width=this.initialWidth;}if(this.domNode&&!this.editable){html.attr(this.domNode,"aria-readonly","true");}},destroy:function(){this.domNode.onReveal=null;this.domNode.onSizeChange=null;delete this._click;if(this.scroller){this.scroller.destroy();delete this.scroller;}this.edit.destroy();delete this.edit;this.views.destroyViews();if(this.focus){this.focus.destroy();delete this.focus;}if(this.headerMenu&&this._placeholders.length){array.forEach(this._placeholders,function(p){p.unReplace(true);});this.headerMenu.unBindDomNode(this.viewsHeaderNode);}this.inherited(arguments);},_setAutoHeightAttr:function(ah,_137e){if(typeof ah=="string"){if(!ah||ah=="false"){ah=false;}else{if(ah=="true"){ah=true;}else{ah=window.parseInt(ah,10);}}}if(typeof ah=="number"){if(isNaN(ah)){ah=false;}if(ah<0){ah=true;}else{if(ah===0){ah=false;}}}this.autoHeight=ah;if(typeof ah=="boolean"){this._autoHeight=ah;}else{if(typeof ah=="number"){this._autoHeight=(ah>=this.get("rowCount"));}else{this._autoHeight=false;}}if(this._started&&!_137e){this.render();}},_getRowCountAttr:function(){return this.updating&&this.invalidated&&this.invalidated.rowCount!=undefined?this.invalidated.rowCount:this.rowCount;},textSizeChanged:function(){this.render();},sizeChange:function(){this.update();},createManagers:function(){this.rows=new _1371(this);this.focus=new _1372(this);this.edit=new _1373(this);},createSelection:function(){this.selection=new _1374(this);},createScroller:function(){this.scroller=new _136d();this.scroller.grid=this;this.scroller.renderRow=lang.hitch(this,"renderRow");this.scroller.removeRow=lang.hitch(this,"rowRemoved");},createLayout:function(){this.layout=new this._layoutClass(this);this.connect(this.layout,"moveColumn","onMoveColumn");},onMoveColumn:function(){this.update();},onResizeColumn:function(_137f){},createViews:function(){this.views=new _1370(this);this.views.createView=lang.hitch(this,"createView");},createView:function(_1380,idx){var c=lang.getObject(_1380);var view=new c({grid:this,index:idx});this.viewsNode.appendChild(view.domNode);this.viewsHeaderNode.appendChild(view.headerNode);this.views.addView(view);html.attr(this.domNode,"align",this.isLeftToRight()?"left":"right");return view;},buildViews:function(){for(var i=0,vs;(vs=this.layout.structure[i]);i++){this.createView(vs.type||dojox._scopeName+".grid._View",i).setStructure(vs);}this.scroller.setContentNodes(this.views.getContentNodes());},_setStructureAttr:function(_1381){var s=_1381;if(s&&lang.isString(s)){dojo.deprecated("dojox.grid._Grid.set('structure', 'objVar')","use dojox.grid._Grid.set('structure', objVar) instead","2.0");s=lang.getObject(s);}this.structure=s;if(!s){if(this.layout.structure){s=this.layout.structure;}else{return;}}this.views.destroyViews();this.focus.focusView=null;if(s!==this.layout.structure){this.layout.setStructure(s);}this._structureChanged();},setStructure:function(_1382){dojo.deprecated("dojox.grid._Grid.setStructure(obj)","use dojox.grid._Grid.set('structure', obj) instead.","2.0");this._setStructureAttr(_1382);},getColumnTogglingItems:function(){var items,_1383=[];items=array.map(this.layout.cells,function(cell){if(!cell.menuItems){cell.menuItems=[];}var self=this;var item=new _1378({label:cell.name,checked:!cell.hidden,_gridCell:cell,onChange:function(_1384){if(self.layout.setColumnVisibility(this._gridCell.index,_1384)){var items=this._gridCell.menuItems;if(items.length>1){array.forEach(items,function(item){if(item!==this){item.setAttribute("checked",_1384);}},this);}_1384=array.filter(self.layout.cells,function(c){if(c.menuItems.length>1){array.forEach(c.menuItems,"item.set('disabled', false);");}else{c.menuItems[0].set("disabled",false);}return !c.hidden;});if(_1384.length==1){array.forEach(_1384[0].menuItems,"item.set('disabled', true);");}}},destroy:function(){var index=array.indexOf(this._gridCell.menuItems,this);this._gridCell.menuItems.splice(index,1);delete this._gridCell;_1378.prototype.destroy.apply(this,arguments);}});cell.menuItems.push(item);if(!cell.hidden){_1383.push(item);}return item;},this);if(_1383.length==1){_1383[0].set("disabled",true);}return items;},_setHeaderMenuAttr:function(menu){if(this._placeholders&&this._placeholders.length){array.forEach(this._placeholders,function(p){p.unReplace(true);});this._placeholders=[];}if(this.headerMenu){this.headerMenu.unBindDomNode(this.viewsHeaderNode);}this.headerMenu=menu;if(!menu){return;}this.headerMenu.bindDomNode(this.viewsHeaderNode);if(this.headerMenu.getPlaceholders){this._placeholders=this.headerMenu.getPlaceholders(this.placeholderLabel);}},setHeaderMenu:function(menu){dojo.deprecated("dojox.grid._Grid.setHeaderMenu(obj)","use dojox.grid._Grid.set('headerMenu', obj) instead.","2.0");this._setHeaderMenuAttr(menu);},setupHeaderMenu:function(){if(this._placeholders&&this._placeholders.length){array.forEach(this._placeholders,function(p){if(p._replaced){p.unReplace(true);}p.replace(this.getColumnTogglingItems());},this);}},_fetch:function(start){this.setScrollTop(0);},getItem:function(_1385){return null;},showMessage:function(_1386){if(_1386){this.messagesNode.innerHTML=_1386;this.messagesNode.style.display="";}else{this.messagesNode.innerHTML="";this.messagesNode.style.display="none";}},_structureChanged:function(){this.buildViews();if(this.autoRender&&this._started){this.render();}},hasLayout:function(){return this.layout.cells.length;},resize:function(_1387,_1388){if(dojo.isIE&&!_1387&&!_1388&&this._autoHeight){return;}this._pendingChangeSize=_1387;this._pendingResultSize=_1388;this.sizeChange();},_getPadBorder:function(){this._padBorder=this._padBorder||html._getPadBorderExtents(this.domNode);return this._padBorder;},_getHeaderHeight:function(){var vns=this.viewsHeaderNode.style,t=vns.display=="none"?0:this.views.measureHeader();vns.height=t+"px";this.views.normalizeHeaderNodeHeight();return t;},_resize:function(_1389,_138a){_1389=_1389||this._pendingChangeSize;_138a=_138a||this._pendingResultSize;delete this._pendingChangeSize;delete this._pendingResultSize;if(!this.domNode){return;}var pn=this.domNode.parentNode;if(!pn||pn.nodeType!=1||!this.hasLayout()||pn.style.visibility=="hidden"||pn.style.display=="none"){return;}var _138b=this._getPadBorder();var hh=undefined;var h;if(this._autoHeight){this.domNode.style.height="auto";}else{if(typeof this.autoHeight=="number"){h=hh=this._getHeaderHeight();h+=(this.scroller.averageRowHeight*this.autoHeight);this.domNode.style.height=h+"px";}else{if(this.domNode.clientHeight<=_138b.h){if(pn==document.body){this.domNode.style.height=this.defaultHeight;}else{if(this.height){this.domNode.style.height=this.height;}else{this.fitTo="parent";}}}}}if(_138a){_1389=_138a;}if(!this._autoHeight&&_1389){html.marginBox(this.domNode,_1389);this.height=this.domNode.style.height;delete this.fitTo;}else{if(this.fitTo=="parent"){h=this._parentContentBoxHeight=this._parentContentBoxHeight||html._getContentBox(pn).h;this.domNode.style.height=Math.max(0,h)+"px";}}var _138c=array.some(this.views.views,function(v){return v.flexCells;});if(!this._autoHeight&&(h||html._getContentBox(this.domNode).h)===0){this.viewsHeaderNode.style.display="none";}else{this.viewsHeaderNode.style.display="block";if(!_138c&&hh===undefined){hh=this._getHeaderHeight();}}if(_138c){hh=undefined;}this.adaptWidth();this.adaptHeight(hh);this.postresize();},adaptWidth:function(){var _138d=(!this.initialWidth&&this.autoWidth);var w=_138d?0:this.domNode.clientWidth||(this.domNode.offsetWidth-this._getPadBorder().w),vw=this.views.arrange(1,w);this.views.onEach("adaptWidth");if(_138d){this.domNode.style.width=vw+"px";}},adaptHeight:function(_138e){var t=_138e===undefined?this._getHeaderHeight():_138e;var h=(this._autoHeight?-1:Math.max(this.domNode.clientHeight-t,0)||0);this.views.onEach("setSize",[0,h]);this.views.onEach("adaptHeight");if(!this._autoHeight){var _138f=0,_1390=0;var _1391=array.filter(this.views.views,function(v){var has=v.hasHScrollbar();if(has){_138f++;}else{_1390++;}return (!has);});if(_138f>0&&_1390>0){array.forEach(_1391,function(v){v.adaptHeight(true);});}}if(this.autoHeight===true||h!=-1||(typeof this.autoHeight=="number"&&this.autoHeight>=this.get("rowCount"))){this.scroller.windowHeight=h;}else{this.scroller.windowHeight=Math.max(this.domNode.clientHeight-t,0);}},startup:function(){if(this._started){return;}this.inherited(arguments);if(this.autoRender){this.render();}},render:function(){if(!this.domNode){return;}if(!this._started){return;}if(!this.hasLayout()){this.scroller.init(0,this.keepRows,this.rowsPerPage);return;}this.update=this.defaultUpdate;this._render();},_render:function(){this.scroller.init(this.get("rowCount"),this.keepRows,this.rowsPerPage);this.prerender();this.setScrollTop(0);this.postrender();},prerender:function(){this.keepRows=this._autoHeight?0:this.keepRows;this.scroller.setKeepInfo(this.keepRows);this.views.render();this._resize();},postrender:function(){this.postresize();this.focus.initFocusView();html.setSelectable(this.domNode,this.selectable);},postresize:function(){if(this._autoHeight){var size=Math.max(this.views.measureContent())+"px";this.viewsNode.style.height=size;}},renderRow:function(_1392,_1393){this.views.renderRow(_1392,_1393,this._skipRowRenormalize);},rowRemoved:function(_1394){this.views.rowRemoved(_1394);},invalidated:null,updating:false,beginUpdate:function(){this.invalidated=[];this.updating=true;},endUpdate:function(){this.updating=false;var i=this.invalidated,r;if(i.all){this.update();}else{if(i.rowCount!=undefined){this.updateRowCount(i.rowCount);}else{for(r in i){this.updateRow(Number(r));}}}this.invalidated=[];},defaultUpdate:function(){if(!this.domNode){return;}if(this.updating){this.invalidated.all=true;return;}this.lastScrollTop=this.scrollTop;this.prerender();this.scroller.invalidateNodes();this.setScrollTop(this.lastScrollTop);this.postrender();},update:function(){this.render();},updateRow:function(_1395){_1395=Number(_1395);if(this.updating){this.invalidated[_1395]=true;}else{this.views.updateRow(_1395);this.scroller.rowHeightChanged(_1395);}},updateRows:function(_1396,_1397){_1396=Number(_1396);_1397=Number(_1397);var i;if(this.updating){for(i=0;i<_1397;i++){this.invalidated[i+_1396]=true;}}else{for(i=0;i<_1397;i++){this.views.updateRow(i+_1396,this._skipRowRenormalize);}this.scroller.rowHeightChanged(_1396);}},updateRowCount:function(_1398){if(this.updating){this.invalidated.rowCount=_1398;}else{this.rowCount=_1398;this._setAutoHeightAttr(this.autoHeight,true);if(this.layout.cells.length){this.scroller.updateRowCount(_1398);}this._resize();if(this.layout.cells.length){this.setScrollTop(this.scrollTop);}}},updateRowStyles:function(_1399){this.views.updateRowStyles(_1399);},getRowNode:function(_139a){if(this.focus.focusView&&!(this.focus.focusView instanceof _1375)){return this.focus.focusView.rowNodes[_139a];}else{for(var i=0,cView;(cView=this.views.views[i]);i++){if(!(cView instanceof _1375)){return cView.rowNodes[_139a];}}}return null;},rowHeightChanged:function(_139b){this.views.renormalizeRow(_139b);this.scroller.rowHeightChanged(_139b);},fastScroll:true,delayScroll:false,scrollRedrawThreshold:(has("ie")?100:50),scrollTo:function(inTop){if(!this.fastScroll){this.setScrollTop(inTop);return;}var delta=Math.abs(this.lastScrollTop-inTop);this.lastScrollTop=inTop;if(delta>this.scrollRedrawThreshold||this.delayScroll){this.delayScroll=true;this.scrollTop=inTop;this.views.setScrollTop(inTop);if(this._pendingScroll){window.clearTimeout(this._pendingScroll);}var _139c=this;this._pendingScroll=window.setTimeout(function(){delete _139c._pendingScroll;_139c.finishScrollJob();},200);}else{this.setScrollTop(inTop);}},finishScrollJob:function(){this.delayScroll=false;this.setScrollTop(this.scrollTop);},setScrollTop:function(inTop){this.scroller.scroll(this.views.setScrollTop(inTop));},scrollToRow:function(_139d){this.setScrollTop(this.scroller.findScrollTop(_139d)+1);},styleRowNode:function(_139e,_139f){if(_139f){this.rows.styleRowNode(_139e,_139f);}},_mouseOut:function(e){this.rows.setOverRow(-2);},getCell:function(_13a0){return this.layout.cells[_13a0];},setCellWidth:function(_13a1,_13a2){this.getCell(_13a1).unitWidth=_13a2;},getCellName:function(_13a3){return "Cell "+_13a3.index;},canSort:function(_13a4){},sort:function(){},getSortAsc:function(_13a5){_13a5=_13a5==undefined?this.sortInfo:_13a5;return Boolean(_13a5>0);},getSortIndex:function(_13a6){_13a6=_13a6==undefined?this.sortInfo:_13a6;return Math.abs(_13a6)-1;},setSortIndex:function(_13a7,inAsc){var si=_13a7+1;if(inAsc!=undefined){si*=(inAsc?1:-1);}else{if(this.getSortIndex()==_13a7){si=-this.sortInfo;}}this.setSortInfo(si);},setSortInfo:function(_13a8){if(this.canSort(_13a8)){this.sortInfo=_13a8;this.sort();this.update();}},doKeyEvent:function(e){e.dispatch="do"+e.type;this.onKeyEvent(e);},_dispatch:function(m,e){if(m in this){return this[m](e);}return false;},dispatchKeyEvent:function(e){this._dispatch(e.dispatch,e);},dispatchContentEvent:function(e){this.edit.dispatchEvent(e)||e.sourceView.dispatchContentEvent(e)||this._dispatch(e.dispatch,e);},dispatchHeaderEvent:function(e){e.sourceView.dispatchHeaderEvent(e)||this._dispatch("doheader"+e.type,e);},dokeydown:function(e){this.onKeyDown(e);},doclick:function(e){if(e.cellNode){this.onCellClick(e);}else{this.onRowClick(e);}},dodblclick:function(e){if(e.cellNode){this.onCellDblClick(e);}else{this.onRowDblClick(e);}},docontextmenu:function(e){if(e.cellNode){this.onCellContextMenu(e);}else{this.onRowContextMenu(e);}},doheaderclick:function(e){if(e.cellNode){this.onHeaderCellClick(e);}else{this.onHeaderClick(e);}},doheaderdblclick:function(e){if(e.cellNode){this.onHeaderCellDblClick(e);}else{this.onHeaderDblClick(e);}},doheadercontextmenu:function(e){if(e.cellNode){this.onHeaderCellContextMenu(e);}else{this.onHeaderContextMenu(e);}},doStartEdit:function(_13a9,_13aa){this.onStartEdit(_13a9,_13aa);},doApplyCellEdit:function(_13ab,_13ac,_13ad){this.onApplyCellEdit(_13ab,_13ac,_13ad);},doCancelEdit:function(_13ae){this.onCancelEdit(_13ae);},doApplyEdit:function(_13af){this.onApplyEdit(_13af);},addRow:function(){this.updateRowCount(this.get("rowCount")+1);},removeSelectedRows:function(){if(this.allItemsSelected){this.updateRowCount(0);}else{this.updateRowCount(Math.max(0,this.get("rowCount")-this.selection.getSelected().length));}this.selection.clear();}});_137c.markupFactory=function(props,node,ctor,_13b0){var _13b1=function(n){var w=html.attr(n,"width")||"auto";if((w!="auto")&&(w.slice(-2)!="em")&&(w.slice(-1)!="%")){w=parseInt(w,10)+"px";}return w;};if(!props.structure&&node.nodeName.toLowerCase()=="table"){props.structure=query("> colgroup",node).map(function(cg){var sv=html.attr(cg,"span");var v={noscroll:(html.attr(cg,"noscroll")=="true")?true:false,__span:(!!sv?parseInt(sv,10):1),cells:[]};if(html.hasAttr(cg,"width")){v.width=_13b1(cg);}return v;});if(!props.structure.length){props.structure.push({__span:Infinity,cells:[]});}query("thead > tr",node).forEach(function(tr,_13b2){var _13b3=0;var _13b4=0;var _13b5;var cView=null;query("> th",tr).map(function(th){if(!cView){_13b5=0;cView=props.structure[0];}else{if(_13b3>=(_13b5+cView.__span)){_13b4++;_13b5+=cView.__span;var _13b6=cView;cView=props.structure[_13b4];}}var cell={name:lang.trim(html.attr(th,"name")||th.innerHTML),colSpan:parseInt(html.attr(th,"colspan")||1,10),type:lang.trim(html.attr(th,"cellType")||""),id:lang.trim(html.attr(th,"id")||"")};_13b3+=cell.colSpan;var _13b7=html.attr(th,"rowspan");if(_13b7){cell.rowSpan=_13b7;}if(html.hasAttr(th,"width")){cell.width=_13b1(th);}if(html.hasAttr(th,"relWidth")){cell.relWidth=window.parseInt(html.attr(th,"relWidth"),10);}if(html.hasAttr(th,"hidden")){cell.hidden=(html.attr(th,"hidden")=="true"||html.attr(th,"hidden")===true);}if(_13b0){_13b0(th,cell);}cell.type=cell.type?lang.getObject(cell.type):dojox.grid.cells.Cell;if(cell.type&&cell.type.markupFactory){cell.type.markupFactory(th,cell);}if(!cView.cells[_13b2]){cView.cells[_13b2]=[];}cView.cells[_13b2].push(cell);});});}return new ctor(props,node);};return _137c;});},"dojo/store/Memory":function(){define(["../_base/declare","./util/QueryResults","./util/SimpleQueryEngine"],function(_13b8,_13b9,_13ba){var base=null;return _13b8("dojo.store.Memory",base,{constructor:function(_13bb){for(var i in _13bb){this[i]=_13bb[i];}this.setData(this.data||[]);},data:null,idProperty:"id",index:null,queryEngine:_13ba,get:function(id){return this.data[this.index[id]];},getIdentity:function(_13bc){return _13bc[this.idProperty];},put:function(_13bd,_13be){var data=this.data,index=this.index,_13bf=this.idProperty;var id=_13bd[_13bf]=(_13be&&"id" in _13be)?_13be.id:_13bf in _13bd?_13bd[_13bf]:Math.random();if(id in index){if(_13be&&_13be.overwrite===false){throw new Error("Object already exists");}data[index[id]]=_13bd;}else{index[id]=data.push(_13bd)-1;}return id;},add:function(_13c0,_13c1){(_13c1=_13c1||{}).overwrite=false;return this.put(_13c0,_13c1);},remove:function(id){var index=this.index;var data=this.data;if(id in index){data.splice(index[id],1);this.setData(data);return true;}},query:function(query,_13c2){return _13b9(this.queryEngine(query,_13c2)(this.data));},setData:function(data){if(data.items){this.idProperty=data.identifier;data=this.data=data.items;}else{this.data=data;}this.index={};for(var i=0,l=data.length;i<l;i++){this.index[data[i][this.idProperty]]=i;}}});});},"dojo/request/iframe":function(){define(["module","require","./watch","./util","./handlers","../_base/lang","../io-query","../query","../has","../dom","../dom-construct","../_base/window"],function(_13c3,_13c4,watch,util,_13c5,lang,_13c6,query,has,dom,_13c7,win){var mid=_13c3.id.replace(/[\/\.\-]/g,"_"),_13c8=mid+"_onload";if(!win.global[_13c8]){win.global[_13c8]=function(){var dfd=_13c9._currentDfd;if(!dfd){_13c9._fireNextRequest();return;}var _13ca=dfd.response,_13cb=_13ca.options,_13cc=dom.byId(_13cb.form)||dfd._tmpForm;if(_13cc){var _13cd=dfd._contentToClean;for(var i=0;i<_13cd.length;i++){var key=_13cd[i];for(var j=0;j<_13cc.childNodes.length;j++){var _13ce=_13cc.childNodes[j];if(_13ce.name===key){_13c7.destroy(_13ce);break;}}}dfd._originalAction&&_13cc.setAttribute("action",dfd._originalAction);if(dfd._originalMethod){_13cc.setAttribute("method",dfd._originalMethod);_13cc.method=dfd._originalMethod;}if(dfd._originalTarget){_13cc.setAttribute("target",dfd._originalTarget);_13cc.target=dfd._originalTarget;}}if(dfd._tmpForm){_13c7.destroy(dfd._tmpForm);delete dfd._tmpForm;}dfd._finished=true;};}function _13cf(name,_13d0,uri){if(win.global[name]){return win.global[name];}if(win.global.frames[name]){return win.global.frames[name];}if(!uri){if(has("config-useXDomain")&&!has("config-dojoBlankHtmlUrl")){console.warn("dojo/request/iframe: When using cross-domain Dojo builds,"+" please save dojo/resources/blank.html to your domain and set dojoConfig.dojoBlankHtmlUrl"+" to the path on your domain to blank.html");}uri=(has("config-dojoBlankHtmlUrl")||_13c4.toUrl("dojo/resources/blank.html"));}var frame=_13c7.place("<iframe id=\""+name+"\" name=\""+name+"\" src=\""+uri+"\" onload=\""+_13d0+"\" style=\"position: absolute; left: 1px; top: 1px; height: 1px; width: 1px; visibility: hidden\">",win.body());win.global[name]=frame;return frame;};function _13d1(_13d2,src,_13d3){var frame=win.global.frames[_13d2.name];if(frame.contentWindow){frame=frame.contentWindow;}try{if(!_13d3){frame.location=src;}else{frame.location.replace(src);}}catch(e){console.log("dojo/request/iframe.setSrc: ",e);}};function doc(_13d4){if(_13d4.contentDocument){return _13d4.contentDocument;}var name=_13d4.name;if(name){var _13d5=win.doc.getElementsByTagName("iframe");if(_13d4.document&&_13d5[name].contentWindow&&_13d5[name].contentWindow.document){return _13d5[name].contentWindow.document;}else{if(win.doc.frames[name]&&win.doc.frames[name].document){return win.doc.frames[name].document;}}}return null;};function _13d6(){return _13c7.create("form",{name:mid+"_form",style:{position:"absolute",top:"-1000px",left:"-1000px"}},win.body());};function _13d7(){var dfd;try{if(_13c9._currentDfd||!_13c9._dfdQueue.length){return;}do{dfd=_13c9._currentDfd=_13c9._dfdQueue.shift();}while(dfd&&(dfd.canceled||(dfd.isCanceled&&dfd.isCanceled()))&&_13c9._dfdQueue.length);if(!dfd||dfd.canceled||(dfd.isCanceled&&dfd.isCanceled())){_13c9._currentDfd=null;return;}var _13d8=dfd.response,_13d9=_13d8.options,c2c=dfd._contentToClean=[],_13da=dom.byId(_13d9.form),_13db=util.notify,data=_13d9.data||null,_13dc;if(!dfd._legacy&&_13d9.method==="POST"&&!_13da){_13da=dfd._tmpForm=_13d6();}else{if(_13d9.method==="GET"&&_13da&&_13d8.url.indexOf("?")>-1){_13dc=_13d8.url.slice(_13d8.url.indexOf("?")+1);data=lang.mixin(_13c6.queryToObject(_13dc),data);}}if(_13da){if(!dfd._legacy){var _13dd=_13da;while(_13dd=_13dd.parentNode&&_13dd!==win.doc.documentElement){}if(!_13dd){_13da.style.position="absolute";_13da.style.left="-1000px";_13da.style.top="-1000px";win.body().appendChild(_13da);}if(!_13da.name){_13da.name=mid+"_form";}}if(data){var _13de=function(name,value){_13c7.create("input",{type:"hidden",name:name,value:value},_13da);c2c.push(name);};for(var x in data){var val=data[x];if(lang.isArray(val)&&val.length>1){for(var i=0;i<val.length;i++){_13de(x,val[i]);}}else{if(!_13da[x]){_13de(x,val);}else{_13da[x].value=val;}}}}var _13df=_13da.getAttributeNode("action"),_13e0=_13da.getAttributeNode("method"),_13e1=_13da.getAttributeNode("target");if(_13d8.url){dfd._originalAction=_13df?_13df.value:null;if(_13df){_13df.value=_13d8.url;}else{_13da.setAttribute("action",_13d8.url);}}if(!dfd._legacy){dfd._originalMethod=_13e0?_13e0.value:null;if(_13e0){_13e0.value=_13d9.method;}else{_13da.setAttribute("method",_13d9.method);}}else{if(!_13e0||!_13e0.value){if(mthdNode){mthdNode.value=_13d9.method;}else{fn.setAttribute("method",_13d9.method);}}}dfd._originalTarget=_13e1?_13e1.value:null;if(_13e1){_13e1.value=_13c9._iframeName;}else{_13da.setAttribute("target",_13c9._iframeName);}_13da.target=_13c9._iframeName;_13db&&_13db.emit("send",_13d8,dfd.promise.cancel);_13c9._notifyStart(_13d8);_13da.submit();}else{var extra="";if(_13d8.options.data){extra=_13d8.options.data;if(typeof extra!=="string"){extra=_13c6.objectToQuery(extra);}}var _13e2=_13d8.url+(_13d8.url.indexOf("?")>-1?"&":"?")+extra;_13db&&_13db.emit("send",_13d8,dfd.promise.cancel);_13c9._notifyStart(_13d8);_13c9.setSrc(_13c9._frame,_13e2,true);}}catch(e){dfd.reject(e);}};function _13e3(_13e4){return !this.isFulfilled();};function _13e5(_13e6){return !!this._finished;};function _13e7(_13e8,error){if(!error){try{var _13e9=_13e8.options,doc=_13c9.doc(_13c9._frame),_13ea=_13e9.handleAs;if(_13ea!=="html"){if(_13ea==="xml"){if(doc.documentElement.tagName.toLowerCase()==="html"){query("a",doc.documentElement).orphan();var _13eb=doc.documentElement.innerText;_13eb=_13eb.replace(/>\s+</g,"><");_13e8.text=lang.trim(_13eb);}else{_13e8.data=doc;}}else{_13e8.text=doc.getElementsByTagName("textarea")[0].value;}_13c5(_13e8);}else{_13e8.data=doc;}}catch(e){error=e;}}if(error){this.reject(error);}else{if(this._finished){this.resolve(_13e8);}else{this.reject(new Error("Invalid dojo/request/iframe request state"));}}};function last(_13ec){this._callNext();};var _13ed={method:"POST"};function _13c9(url,_13ee,_13ef){var _13f0=util.parseArgs(url,util.deepCreate(_13ed,_13ee),true);url=_13f0.url;_13ee=_13f0.options;if(_13ee.method!=="GET"&&_13ee.method!=="POST"){throw new Error(_13ee.method+" not supported by dojo/request/iframe");}if(!_13c9._frame){_13c9._frame=_13c9.create(_13c9._iframeName,_13c8+"();");}var dfd=util.deferred(_13f0,null,_13e3,_13e5,_13e7,last);dfd._callNext=function(){if(!this._calledNext){this._calledNext=true;_13c9._currentDfd=null;_13c9._fireNextRequest();}};dfd._legacy=_13ef;_13c9._dfdQueue.push(dfd);_13c9._fireNextRequest();watch(dfd);return _13ef?dfd:dfd.promise;};_13c9.create=_13cf;_13c9.doc=doc;_13c9.setSrc=_13d1;_13c9._iframeName=mid+"_IoIframe";_13c9._notifyStart=function(){};_13c9._dfdQueue=[];_13c9._currentDfd=null;_13c9._fireNextRequest=_13d7;util.addCommonMethods(_13c9,["GET","POST"]);return _13c9;});},"dojox/grid/_Events":function(){define("dojox/grid/_Events",["dojo/keys","dojo/dom-class","dojo/_base/declare","dojo/_base/event","dojo/_base/sniff"],function(keys,_13f1,_13f2,event,has){return _13f2("dojox.grid._Events",null,{cellOverClass:"dojoxGridCellOver",onKeyEvent:function(e){this.dispatchKeyEvent(e);},onContentEvent:function(e){this.dispatchContentEvent(e);},onHeaderEvent:function(e){this.dispatchHeaderEvent(e);},onStyleRow:function(inRow){var i=inRow;i.customClasses+=(i.odd?" dojoxGridRowOdd":"")+(i.selected?" dojoxGridRowSelected":"")+(i.over?" dojoxGridRowOver":"");this.focus.styleRow(inRow);this.edit.styleRow(inRow);},onKeyDown:function(e){if(e.altKey||e.metaKey){return;}var _13f3;switch(e.keyCode){case keys.ESCAPE:this.edit.cancel();break;case keys.ENTER:if(!this.edit.isEditing()){_13f3=this.focus.getHeaderIndex();if(_13f3>=0){this.setSortIndex(_13f3);break;}else{this.selection.clickSelect(this.focus.rowIndex,dojo.isCopyKey(e),e.shiftKey);}event.stop(e);}if(!e.shiftKey){var _13f4=this.edit.isEditing();this.edit.apply();if(!_13f4){this.edit.setEditCell(this.focus.cell,this.focus.rowIndex);}}if(!this.edit.isEditing()){var _13f5=this.focus.focusView||this.views.views[0];_13f5.content.decorateEvent(e);this.onRowClick(e);event.stop(e);}break;case keys.SPACE:if(!this.edit.isEditing()){_13f3=this.focus.getHeaderIndex();if(_13f3>=0){this.setSortIndex(_13f3);break;}else{this.selection.clickSelect(this.focus.rowIndex,dojo.isCopyKey(e),e.shiftKey);}event.stop(e);}break;case keys.TAB:this.focus[e.shiftKey?"previousKey":"nextKey"](e);break;case keys.LEFT_ARROW:case keys.RIGHT_ARROW:if(!this.edit.isEditing()){var _13f6=e.keyCode;event.stop(e);_13f3=this.focus.getHeaderIndex();if(_13f3>=0&&(e.shiftKey&&e.ctrlKey)){this.focus.colSizeAdjust(e,_13f3,(_13f6==keys.LEFT_ARROW?-1:1)*5);}else{var _13f7=(_13f6==keys.LEFT_ARROW)?1:-1;if(this.isLeftToRight()){_13f7*=-1;}this.focus.move(0,_13f7);}}break;case keys.UP_ARROW:if(!this.edit.isEditing()&&this.focus.rowIndex!==0){event.stop(e);this.focus.move(-1,0);}break;case keys.DOWN_ARROW:if(!this.edit.isEditing()&&this.focus.rowIndex+1!=this.rowCount){event.stop(e);this.focus.move(1,0);}break;case keys.PAGE_UP:if(!this.edit.isEditing()&&this.focus.rowIndex!==0){event.stop(e);if(this.focus.rowIndex!=this.scroller.firstVisibleRow+1){this.focus.move(this.scroller.firstVisibleRow-this.focus.rowIndex,0);}else{this.setScrollTop(this.scroller.findScrollTop(this.focus.rowIndex-1));this.focus.move(this.scroller.firstVisibleRow-this.scroller.lastVisibleRow+1,0);}}break;case keys.PAGE_DOWN:if(!this.edit.isEditing()&&this.focus.rowIndex+1!=this.rowCount){event.stop(e);if(this.focus.rowIndex!=this.scroller.lastVisibleRow-1){this.focus.move(this.scroller.lastVisibleRow-this.focus.rowIndex-1,0);}else{this.setScrollTop(this.scroller.findScrollTop(this.focus.rowIndex+1));this.focus.move(this.scroller.lastVisibleRow-this.scroller.firstVisibleRow-1,0);}}break;default:break;}},onMouseOver:function(e){e.rowIndex==-1?this.onHeaderCellMouseOver(e):this.onCellMouseOver(e);},onMouseOut:function(e){e.rowIndex==-1?this.onHeaderCellMouseOut(e):this.onCellMouseOut(e);},onMouseDown:function(e){e.rowIndex==-1?this.onHeaderCellMouseDown(e):this.onCellMouseDown(e);},onMouseOverRow:function(e){if(!this.rows.isOver(e.rowIndex)){this.rows.setOverRow(e.rowIndex);e.rowIndex==-1?this.onHeaderMouseOver(e):this.onRowMouseOver(e);}},onMouseOutRow:function(e){if(this.rows.isOver(-1)){this.onHeaderMouseOut(e);}else{if(!this.rows.isOver(-2)){this.rows.setOverRow(-2);this.onRowMouseOut(e);}}},onMouseDownRow:function(e){if(e.rowIndex!=-1){this.onRowMouseDown(e);}},onCellMouseOver:function(e){if(e.cellNode){_13f1.add(e.cellNode,this.cellOverClass);}},onCellMouseOut:function(e){if(e.cellNode){_13f1.remove(e.cellNode,this.cellOverClass);}},onCellMouseDown:function(e){},onCellClick:function(e){this._click[0]=this._click[1];this._click[1]=e;if(!this.edit.isEditCell(e.rowIndex,e.cellIndex)){this.focus.setFocusCell(e.cell,e.rowIndex);}if(this._click.length>1&&this._click[0]==null){this._click.shift();}this.onRowClick(e);},onCellDblClick:function(e){var event;if(this._click.length>1&&has("ie")){event=this._click[1];}else{if(this._click.length>1&&this._click[0].rowIndex!=this._click[1].rowIndex){event=this._click[0];}else{event=e;}}this.focus.setFocusCell(event.cell,event.rowIndex);this.onRowClick(event);this.edit.setEditCell(event.cell,event.rowIndex);this.onRowDblClick(e);},onCellContextMenu:function(e){this.onRowContextMenu(e);},onCellFocus:function(_13f8,_13f9){this.edit.cellFocus(_13f8,_13f9);},onRowClick:function(e){this.edit.rowClick(e);this.selection.clickSelectEvent(e);},onRowDblClick:function(e){},onRowMouseOver:function(e){},onRowMouseOut:function(e){},onRowMouseDown:function(e){},onRowContextMenu:function(e){event.stop(e);},onHeaderMouseOver:function(e){},onHeaderMouseOut:function(e){},onHeaderCellMouseOver:function(e){if(e.cellNode){_13f1.add(e.cellNode,this.cellOverClass);}},onHeaderCellMouseOut:function(e){if(e.cellNode){_13f1.remove(e.cellNode,this.cellOverClass);}},onHeaderCellMouseDown:function(e){},onHeaderClick:function(e){},onHeaderCellClick:function(e){this.setSortIndex(e.cell.index);this.onHeaderClick(e);},onHeaderDblClick:function(e){},onHeaderCellDblClick:function(e){this.onHeaderDblClick(e);},onHeaderCellContextMenu:function(e){this.onHeaderContextMenu(e);},onHeaderContextMenu:function(e){if(!this.headerMenu){event.stop(e);}},onStartEdit:function(_13fa,_13fb){},onApplyCellEdit:function(_13fc,_13fd,_13fe){},onCancelEdit:function(_13ff){},onApplyEdit:function(_1400){},onCanSelect:function(_1401){return true;},onCanDeselect:function(_1402){return true;},onSelected:function(_1403){this.updateRowStyles(_1403);},onDeselected:function(_1404){this.updateRowStyles(_1404);},onSelectionChanged:function(){}});});},"dijit/form/_ListBase":function(){define("dijit/form/_ListBase",["dojo/_base/declare","dojo/on","dojo/window"],function(_1405,on,_1406){return _1405("dijit.form._ListBase",null,{selected:null,_listConnect:function(_1407,_1408){var self=this;return self.own(on(self.containerNode,on.selector(function(_1409,_140a,_140b){return _1409.parentNode==_140b;},_1407),function(evt){evt.preventDefault();self[_1408](evt,this);}));},selectFirstNode:function(){var first=this.containerNode.firstChild;while(first&&first.style.display=="none"){first=first.nextSibling;}this._setSelectedAttr(first);},selectLastNode:function(){var last=this.containerNode.lastChild;while(last&&last.style.display=="none"){last=last.previousSibling;}this._setSelectedAttr(last);},selectNextNode:function(){var _140c=this.selected;if(!_140c){this.selectFirstNode();}else{var next=_140c.nextSibling;while(next&&next.style.display=="none"){next=next.nextSibling;}if(!next){this.selectFirstNode();}else{this._setSelectedAttr(next);}}},selectPreviousNode:function(){var _140d=this.selected;if(!_140d){this.selectLastNode();}else{var prev=_140d.previousSibling;while(prev&&prev.style.display=="none"){prev=prev.previousSibling;}if(!prev){this.selectLastNode();}else{this._setSelectedAttr(prev);}}},_setSelectedAttr:function(node){if(this.selected!=node){var _140e=this.selected;if(_140e){this.onDeselect(_140e);this.selected=null;}if(node){this.selected=node;_1406.scrollIntoView(node);this.onSelect(node);}}else{if(node){this.onSelect(node);}}}});});},"dojox/charting/plot2d/Pie":function(){define("dojox/charting/plot2d/Pie",["dojo/_base/lang","dojo/_base/array","dojo/_base/declare","./Base","./_PlotEvents","./common","../axis2d/common","dojox/gfx","dojox/gfx/matrix","dojox/lang/functional","dojox/lang/utils"],function(lang,arr,_140f,Base,_1410,dc,da,g,m,df,du){var _1411=0.2;return _140f("dojox.charting.plot2d.Pie",[Base,_1410],{defaultParams:{labels:true,ticks:false,fixed:true,precision:1,labelOffset:20,labelStyle:"default",htmlLabels:true,radGrad:"native",fanSize:5,startAngle:0},optionalParams:{radius:0,omitLabels:false,stroke:{},outline:{},shadow:{},fill:{},styleFunc:null,font:"",fontColor:"",labelWiring:{}},constructor:function(chart,_1412){this.opt=lang.clone(this.defaultParams);du.updateWithObject(this.opt,_1412);du.updateWithPattern(this.opt,_1412,this.optionalParams);this.axes=[];this.run=null;this.dyn=[];},clear:function(){this.inherited(arguments);this.dyn=[];this.run=null;return this;},setAxis:function(axis){return this;},addSeries:function(run){this.run=run;return this;},getSeriesStats:function(){return lang.delegate(dc.defaultStats);},getRequiredColors:function(){return this.run?this.run.data.length:0;},render:function(dim,_1413){if(!this.dirty){return this;}this.resetEvents();this.dirty=false;this._eventSeries={};this.cleanGroup();var s=this.group,t=this.chart.theme;if(!this.run||!this.run.data.length){return this;}var rx=(dim.width-_1413.l-_1413.r)/2,ry=(dim.height-_1413.t-_1413.b)/2,r=Math.min(rx,ry),_1414="font" in this.opt?this.opt.font:t.series.font,size,_1415=m._degToRad(this.opt.startAngle),start=_1415,step,_1416,_1417,_1418,shift,_1419,run=this.run.data,_141a=this.events();this.dyn=[];if("radius" in this.opt){r=this.opt.radius;_1419=r-this.opt.labelOffset;}var _141b={cx:_1413.l+rx,cy:_1413.t+ry,r:r};if(this.opt.shadow||t.shadow){var _141c=this.opt.shadow||t.shadow;var _141d=lang.clone(_141b);_141d.cx+=_141c.dx;_141d.cy+=_141c.dy;s.createCircle(_141d).setFill(_141c.color).setStroke(_141c);}if(typeof run[0]=="number"){_1416=df.map(run,"x ? Math.max(x, 0) : 0");if(df.every(_1416,"<= 0")){s.createCircle(_141b).setStroke(t.series.stroke);this.dyn=arr.map(_1416,function(){return {};});return this;}else{_1417=df.map(_1416,"/this",df.foldl(_1416,"+",0));if(this.opt.labels){_1418=arr.map(_1417,function(x){return x>0?this._getLabel(x*100)+"%":"";},this);}}}else{_1416=df.map(run,"x ? Math.max(x.y, 0) : 0");if(df.every(_1416,"<= 0")){s.createCircle(_141b).setStroke(t.series.stroke);this.dyn=arr.map(_1416,function(){return {};});return this;}else{_1417=df.map(_1416,"/this",df.foldl(_1416,"+",0));if(this.opt.labels){_1418=arr.map(_1417,function(x,i){if(x<=0){return "";}var v=run[i];return "text" in v?v.text:this._getLabel(x*100)+"%";},this);}}}var _141e=df.map(run,function(v,i){var _141f=[this.opt,this.run];if(v!==null&&typeof v!="number"){_141f.push(v);}if(this.opt.styleFunc){_141f.push(this.opt.styleFunc(v));}return t.next("slice",_141f,true);},this);if(this.opt.labels){size=_1414?g.normalizedLength(g.splitFontString(_1414).size):0;shift=df.foldl1(df.map(_1418,function(label,i){var font=_141e[i].series.font;return g._base._getTextBox(label,{font:font}).w;},this),"Math.max(a, b)")/2;if(this.opt.labelOffset<0){r=Math.min(rx-2*shift,ry-size)+this.opt.labelOffset;}_1419=r-this.opt.labelOffset;}var _1420=new Array(_1417.length);arr.some(_1417,function(slice,i){if(slice<0){return false;}if(slice==0){this.dyn.push({fill:null,stroke:null});return false;}var v=run[i],theme=_141e[i],_1421,o;if(slice>=1){_1421=this._plotFill(theme.series.fill,dim,_1413);_1421=this._shapeFill(_1421,{x:_141b.cx-_141b.r,y:_141b.cy-_141b.r,width:2*_141b.r,height:2*_141b.r});_1421=this._pseudoRadialFill(_1421,{x:_141b.cx,y:_141b.cy},_141b.r);var shape=s.createCircle(_141b).setFill(_1421).setStroke(theme.series.stroke);this.dyn.push({fill:_1421,stroke:theme.series.stroke});if(_141a){o={element:"slice",index:i,run:this.run,shape:shape,x:i,y:typeof v=="number"?v:v.y,cx:_141b.cx,cy:_141b.cy,cr:r};this._connectEvents(o);_1420[i]=o;}return true;}var end=start+slice*2*Math.PI;if(i+1==_1417.length){end=_1415+2*Math.PI;}var step=end-start,x1=_141b.cx+r*Math.cos(start),y1=_141b.cy+r*Math.sin(start),x2=_141b.cx+r*Math.cos(end),y2=_141b.cy+r*Math.sin(end);var _1422=m._degToRad(this.opt.fanSize);if(theme.series.fill&&theme.series.fill.type==="radial"&&this.opt.radGrad==="fan"&&step>_1422){var group=s.createGroup(),nfans=Math.ceil(step/_1422),delta=step/nfans;_1421=this._shapeFill(theme.series.fill,{x:_141b.cx-_141b.r,y:_141b.cy-_141b.r,width:2*_141b.r,height:2*_141b.r});for(var j=0;j<nfans;++j){var fansx=j==0?x1:_141b.cx+r*Math.cos(start+(j-_1411)*delta),fansy=j==0?y1:_141b.cy+r*Math.sin(start+(j-_1411)*delta),fanex=j==nfans-1?x2:_141b.cx+r*Math.cos(start+(j+1+_1411)*delta),faney=j==nfans-1?y2:_141b.cy+r*Math.sin(start+(j+1+_1411)*delta),fan=group.createPath().moveTo(_141b.cx,_141b.cy).lineTo(fansx,fansy).arcTo(r,r,0,delta>Math.PI,true,fanex,faney).lineTo(_141b.cx,_141b.cy).closePath().setFill(this._pseudoRadialFill(_1421,{x:_141b.cx,y:_141b.cy},r,start+(j+0.5)*delta,start+(j+0.5)*delta));}group.createPath().moveTo(_141b.cx,_141b.cy).lineTo(x1,y1).arcTo(r,r,0,step>Math.PI,true,x2,y2).lineTo(_141b.cx,_141b.cy).closePath().setStroke(theme.series.stroke);shape=group;}else{shape=s.createPath().moveTo(_141b.cx,_141b.cy).lineTo(x1,y1).arcTo(r,r,0,step>Math.PI,true,x2,y2).lineTo(_141b.cx,_141b.cy).closePath().setStroke(theme.series.stroke);_1421=theme.series.fill;if(_1421&&_1421.type==="radial"){_1421=this._shapeFill(_1421,{x:_141b.cx-_141b.r,y:_141b.cy-_141b.r,width:2*_141b.r,height:2*_141b.r});if(this.opt.radGrad==="linear"){_1421=this._pseudoRadialFill(_1421,{x:_141b.cx,y:_141b.cy},r,start,end);}}else{if(_1421&&_1421.type==="linear"){_1421=this._plotFill(_1421,dim,_1413);_1421=this._shapeFill(_1421,shape.getBoundingBox());}}shape.setFill(_1421);}this.dyn.push({fill:_1421,stroke:theme.series.stroke});if(_141a){o={element:"slice",index:i,run:this.run,shape:shape,x:i,y:typeof v=="number"?v:v.y,cx:_141b.cx,cy:_141b.cy,cr:r};this._connectEvents(o);_1420[i]=o;}start=end;return false;},this);if(this.opt.labels){if(this.opt.labelStyle=="default"){start=_1415;arr.some(_1417,function(slice,i){if(slice<=0){return false;}var theme=_141e[i],elem;if(slice>=1){elem=da.createText[this.opt.htmlLabels&&g.renderer!="vml"?"html":"gfx"](this.chart,s,_141b.cx,_141b.cy+size/2,"middle",_1418[i],theme.series.font,theme.series.fontColor);if(this.opt.htmlLabels){this.htmlElements.push(elem);}return true;}var end=start+slice*2*Math.PI;if(i+1==_1417.length){end=_1415+2*Math.PI;}if(this.opt.omitLabels&&end-start<0.001){return false;}var _1423=(start+end)/2,x=_141b.cx+_1419*Math.cos(_1423),y=_141b.cy+_1419*Math.sin(_1423)+size/2;elem=da.createText[this.opt.htmlLabels&&g.renderer!="vml"?"html":"gfx"](this.chart,s,x,y,"middle",_1418[i],theme.series.font,theme.series.fontColor);if(this.opt.htmlLabels){this.htmlElements.push(elem);}start=end;return false;},this);}else{if(this.opt.labelStyle=="columns"){start=_1415;var _1424=this.opt.omitLabels;var _1425=[];arr.forEach(_1417,function(slice,i){var end=start+slice*2*Math.PI;if(i+1==_1417.length){end=_1415+2*Math.PI;}var _1426=(start+end)/2;_1425.push({angle:_1426,left:Math.cos(_1426)<0,theme:_141e[i],index:i,omit:_1424?end-start<0.001:false});start=end;});var _1427=g._base._getTextBox("a",{font:_1414}).h;this._getProperLabelRadius(_1425,_1427,_141b.r*1.1);arr.forEach(_1425,function(slice,i){if(!slice.omit){var _1428=_141b.cx-_141b.r*2,_1429=_141b.cx+_141b.r*2,_142a=g._base._getTextBox(_1418[i],{font:slice.theme.series.font}).w,x=_141b.cx+slice.labelR*Math.cos(slice.angle),y=_141b.cy+slice.labelR*Math.sin(slice.angle),_142b=(slice.left)?(_1428+_142a):(_1429-_142a),_142c=(slice.left)?_1428:_142b;var _142d=s.createPath().moveTo(_141b.cx+_141b.r*Math.cos(slice.angle),_141b.cy+_141b.r*Math.sin(slice.angle));if(Math.abs(slice.labelR*Math.cos(slice.angle))<_141b.r*2-_142a){_142d.lineTo(x,y);}_142d.lineTo(_142b,y).setStroke(slice.theme.series.labelWiring);var elem=da.createText[this.opt.htmlLabels&&g.renderer!="vml"?"html":"gfx"](this.chart,s,_142c,y,"left",_1418[i],slice.theme.series.font,slice.theme.series.fontColor);if(this.opt.htmlLabels){this.htmlElements.push(elem);}}},this);}}}var esi=0;this._eventSeries[this.run.name]=df.map(run,function(v){return v<=0?null:_1420[esi++];});return this;},_getProperLabelRadius:function(_142e,_142f,_1430){var _1431,_1432,_1433=1,_1434=1;if(_142e.length==1){_142e[0].labelR=_1430;return;}for(var i=0;i<_142e.length;i++){var _1435=Math.abs(Math.sin(_142e[i].angle));if(_142e[i].left){if(_1433>=_1435){_1433=_1435;_1431=_142e[i];}}else{if(_1434>=_1435){_1434=_1435;_1432=_142e[i];}}}_1431.labelR=_1432.labelR=_1430;this._calculateLabelR(_1431,_142e,_142f);this._calculateLabelR(_1432,_142e,_142f);},_calculateLabelR:function(_1436,_1437,_1438){var i=_1436.index,_1439=_1437.length,_143a=_1436.labelR,_143b;while(!(_1437[i%_1439].left^_1437[(i+1)%_1439].left)){if(!_1437[(i+1)%_1439].omit){_143b=(Math.sin(_1437[i%_1439].angle)*_143a+((_1437[i%_1439].left)?(-_1438):_1438))/Math.sin(_1437[(i+1)%_1439].angle);_143a=(_143b<_1436.labelR)?_1436.labelR:_143b;_1437[(i+1)%_1439].labelR=_143a;}i++;}i=_1436.index;var j=(i==0)?_1439-1:i-1;while(!(_1437[i].left^_1437[j].left)){if(!_1437[j].omit){_143b=(Math.sin(_1437[i].angle)*_143a+((_1437[i].left)?_1438:(-_1438)))/Math.sin(_1437[j].angle);_143a=(_143b<_1436.labelR)?_1436.labelR:_143b;_1437[j].labelR=_143a;}i--;j--;i=(i<0)?i+_1437.length:i;j=(j<0)?j+_1437.length:j;}},_getLabel:function(_143c){return dc.getLabel(_143c,this.opt.fixed,this.opt.precision);}});});},"dojox/charting/plot2d/common":function(){define("dojox/charting/plot2d/common",["dojo/_base/lang","dojo/_base/array","dojo/_base/Color","dojox/gfx","dojox/lang/functional","../scaler/common"],function(lang,arr,Color,g,df,sc){var _143d=lang.getObject("dojox.charting.plot2d.common",true);return lang.mixin(_143d,{doIfLoaded:sc.doIfLoaded,makeStroke:function(_143e){if(!_143e){return _143e;}if(typeof _143e=="string"||_143e instanceof Color){_143e={color:_143e};}return g.makeParameters(g.defaultStroke,_143e);},augmentColor:function(_143f,color){var t=new Color(_143f),c=new Color(color);c.a=t.a;return c;},augmentStroke:function(_1440,color){var s=_143d.makeStroke(_1440);if(s){s.color=_143d.augmentColor(s.color,color);}return s;},augmentFill:function(fill,color){var fc,c=new Color(color);if(typeof fill=="string"||fill instanceof Color){return _143d.augmentColor(fill,color);}return fill;},defaultStats:{vmin:Number.POSITIVE_INFINITY,vmax:Number.NEGATIVE_INFINITY,hmin:Number.POSITIVE_INFINITY,hmax:Number.NEGATIVE_INFINITY},collectSimpleStats:function(_1441){var stats=lang.delegate(_143d.defaultStats);for(var i=0;i<_1441.length;++i){var run=_1441[i];for(var j=0;j<run.data.length;j++){if(run.data[j]!==null){if(typeof run.data[j]=="number"){var _1442=stats.vmin,_1443=stats.vmax;if(!("ymin" in run)||!("ymax" in run)){arr.forEach(run.data,function(val,i){if(val!==null){var x=i+1,y=val;if(isNaN(y)){y=0;}stats.hmin=Math.min(stats.hmin,x);stats.hmax=Math.max(stats.hmax,x);stats.vmin=Math.min(stats.vmin,y);stats.vmax=Math.max(stats.vmax,y);}});}if("ymin" in run){stats.vmin=Math.min(_1442,run.ymin);}if("ymax" in run){stats.vmax=Math.max(_1443,run.ymax);}}else{var _1444=stats.hmin,_1445=stats.hmax,_1442=stats.vmin,_1443=stats.vmax;if(!("xmin" in run)||!("xmax" in run)||!("ymin" in run)||!("ymax" in run)){arr.forEach(run.data,function(val,i){if(val!==null){var x="x" in val?val.x:i+1,y=val.y;if(isNaN(x)){x=0;}if(isNaN(y)){y=0;}stats.hmin=Math.min(stats.hmin,x);stats.hmax=Math.max(stats.hmax,x);stats.vmin=Math.min(stats.vmin,y);stats.vmax=Math.max(stats.vmax,y);}});}if("xmin" in run){stats.hmin=Math.min(_1444,run.xmin);}if("xmax" in run){stats.hmax=Math.max(_1445,run.xmax);}if("ymin" in run){stats.vmin=Math.min(_1442,run.ymin);}if("ymax" in run){stats.vmax=Math.max(_1443,run.ymax);}}break;}}}return stats;},calculateBarSize:function(_1446,opt,_1447){if(!_1447){_1447=1;}var gap=opt.gap,size=(_1446-2*gap)/_1447;if("minBarSize" in opt){size=Math.max(size,opt.minBarSize);}if("maxBarSize" in opt){size=Math.min(size,opt.maxBarSize);}size=Math.max(size,1);gap=(_1446-size*_1447)/2;return {size:size,gap:gap};},collectStackedStats:function(_1448){var stats=lang.clone(_143d.defaultStats);if(_1448.length){stats.hmin=Math.min(stats.hmin,1);stats.hmax=df.foldl(_1448,"seed, run -> Math.max(seed, run.data.length)",stats.hmax);for(var i=0;i<stats.hmax;++i){var v=_1448[0].data[i];v=v&&(typeof v=="number"?v:v.y);if(isNaN(v)){v=0;}stats.vmin=Math.min(stats.vmin,v);for(var j=1;j<_1448.length;++j){var t=_1448[j].data[i];t=t&&(typeof t=="number"?t:t.y);if(isNaN(t)){t=0;}v+=t;}stats.vmax=Math.max(stats.vmax,v);}}return stats;},curve:function(a,_1449){var array=a.slice(0);if(_1449=="x"){array[array.length]=array[0];}var p=arr.map(array,function(item,i){if(i==0){return "M"+item.x+","+item.y;}if(!isNaN(_1449)){var dx=item.x-array[i-1].x,dy=array[i-1].y;return "C"+(item.x-(_1449-1)*(dx/_1449))+","+dy+" "+(item.x-(dx/_1449))+","+item.y+" "+item.x+","+item.y;}else{if(_1449=="X"||_1449=="x"||_1449=="S"){var p0,p1=array[i-1],p2=array[i],p3;var bz1x,bz1y,bz2x,bz2y;var f=1/6;if(i==1){if(_1449=="x"){p0=array[array.length-2];}else{p0=p1;}f=1/3;}else{p0=array[i-2];}if(i==(array.length-1)){if(_1449=="x"){p3=array[1];}else{p3=p2;}f=1/3;}else{p3=array[i+1];}var p1p2=Math.sqrt((p2.x-p1.x)*(p2.x-p1.x)+(p2.y-p1.y)*(p2.y-p1.y));var p0p2=Math.sqrt((p2.x-p0.x)*(p2.x-p0.x)+(p2.y-p0.y)*(p2.y-p0.y));var p1p3=Math.sqrt((p3.x-p1.x)*(p3.x-p1.x)+(p3.y-p1.y)*(p3.y-p1.y));var p0p2f=p0p2*f;var p1p3f=p1p3*f;if(p0p2f>p1p2/2&&p1p3f>p1p2/2){p0p2f=p1p2/2;p1p3f=p1p2/2;}else{if(p0p2f>p1p2/2){p0p2f=p1p2/2;p1p3f=p1p2/2*p1p3/p0p2;}else{if(p1p3f>p1p2/2){p1p3f=p1p2/2;p0p2f=p1p2/2*p0p2/p1p3;}}}if(_1449=="S"){if(p0==p1){p0p2f=0;}if(p2==p3){p1p3f=0;}}bz1x=p1.x+p0p2f*(p2.x-p0.x)/p0p2;bz1y=p1.y+p0p2f*(p2.y-p0.y)/p0p2;bz2x=p2.x-p1p3f*(p3.x-p1.x)/p1p3;bz2y=p2.y-p1p3f*(p3.y-p1.y)/p1p3;}}return "C"+(bz1x+","+bz1y+" "+bz2x+","+bz2y+" "+p2.x+","+p2.y);});return p.join(" ");},getLabel:function(_144a,fixed,_144b){return sc.doIfLoaded("dojo/number",function(_144c){return (fixed?_144c.format(_144a,{places:_144b}):_144c.format(_144a))||"";},function(){return fixed?_144a.toFixed(_144b):_144a.toString();});}});});},"esri/dijit/InfoView":function(){define(["dijit","dojo","dojox","dojo/require!esri/dijit/_TouchBase"],function(dijit,dojo,dojox){dojo.provide("esri.dijit.InfoView");dojo.require("esri.dijit._TouchBase");dojo.declare("esri.dijit.InfoView",null,{_items:[],_top:null,_sections:[],_isDecelerate:false,constructor:function(_144d,_144e){this.container=dojo.byId(_144e);this._touchBase=esri.dijit._TouchBase(this.container,null);this._slideDiv=dojo.create("div",null,this.container,"first");this.events=[];this._items=_144d.items;if(_144d.sections){this._sections=_144d.sections;}dojo.addClass(this.container,"esriMobileInfoView");if(this._sections.length===0){dojo.create("div",{},this._slideDiv);}else{for(var i=0;i<this._sections.length;i++){var _144f=dojo.create("div",{"class":"esriMobileInfoViewSection"},this._slideDiv);dojo.create("div",{innerHTML:this._sections[i].title},_144f);}}for(var i=0;i<this._items.length;i++){var node,div;var _1450=0;if(this._items[i].section){_1450=this._items[i].section;}switch(this._items[i].type){case "div":div=dojo.create("div",{"class":"esriMobileInfoViewItem",style:this._items[i].style},this._slideDiv.childNodes[_1450]);node=dojo.create("div",{innerHTML:this._items[i].text},div);break;}if(this._items[i].className){dojo.addClass(node,this._items[i].className);}node._index=i;node._item=this._items[i];this._items[i]._node=node;}this.startTouchY=0;},startup:function(){this.onCreate(this._items);this._animateTo(0);},destroy:function(){dojo.forEach(this.events,dojo.disconnect);this._touchBase=null;dojo.query("img",this.container).forEach(function(node){node._index=null;node._item=null;dojo.destroy(node);node=null;});this._items=null;dojo.destroy(this._slideDiv);dojo.destroy(this.container);this.container=this._slideDiv=null;},getItems:function(){return this._items;},setPreventDefault:function(value){this._touchBase.setPreventDefault(value);},enableTouchScroll:function(){this._touchBase.setPreventDefault(true);this.events.push(dojo.connect(this._touchBase,"onTouchStart",this,this._onTouchStartHandler));this.events.push(dojo.connect(this._touchBase,"onTouchMove",this,this._onTouchMoveHandler));this.events.push(dojo.connect(this._touchBase,"onTouchEnd",this,this._onTouchEndHandler));this._slideDiv.style.webkitTransform="translate3d(0,"+this._top+"px, 0)";},disableTouchScroll:function(){dojo.disconnect(this.events.pop());dojo.disconnect(this.events.pop());dojo.disconnect(this.events.pop());this._touchBase.setPreventDefault(false);this._slideDiv.style.webkitTransform="translate3d(0, 0px, 0)";},animateTo:function(){this._slideDiv.style.WebkitTransitionDuration="0s";this._animateTo(0);},onSelect:function(item){},onUnSelect:function(item){},onCreate:function(items){},onClick:function(e){},onSwipeLeft:function(){},onSwipeRight:function(){},_onTouchStartHandler:function(e){this._slideDiv.style.WebkitTransitionDuration="0s";this._moveDirection=null;this._startTime=new Date();this.startTouchY=e.touches[0].clientY;this.contentStartOffsetY=this.contentOffsetY;},_onTouchMoveHandler:function(e){if(!this._moveDirection){if(Math.abs(e.curY)>Math.abs(e.curX)){this._moveDirection="vertical";}else{this._moveDirection="horizontal";}}if(this._moveDirection==="horizontal"){return;}else{if(this._moveDirection==="vertical"){var _1451=e.touches[0].clientY;var _1452=_1451-this.startTouchY;var newY=_1452+this.contentStartOffsetY;this._animateTo(newY);}}},_onTouchEndHandler:function(e){this._endTime=new Date();this._deltaMovement=e.curY;if(this._moveDirection==="vertical"){if(this._shouldStartMomentum()){this._doMomentum();}else{this._snapToBounds();}}else{if(this._moveDirection==="horizontal"){if(e.swipeDirection==="left"){this.onSwipeLeft();}else{if(e.swipeDirection==="right"){this.onSwipeRight();}}}}},_shouldStartMomentum:function(){this._diff=this._endTime-this._startTime;this._velocity=this._deltaMovement/this._diff;if(Math.abs(this._velocity)>0.2&&this._diff<200){return true;}else{return false;}},_pullToStop:function(delta){if(Math.abs(delta)>80){delta=delta>0?80:(-contentBox.h+parentBox.h-10)-80;}console.log(delta);this._slideDiv.style.webkitTransition="-webkit-transform 200ms cubic-bezier(0, 0, 1, 1)";var _1453=dojo.connect(this._slideDiv,"webkitTransitionEnd",this,function(){if(delta>0){this._animateTo(0);}else{this._animateTo(-contentBox.h+parentBox.h-10);}dojo.disconnect(_1453);});this._animateTo(delta);},_doMomentum:function(){var _1454=dojo.contentBox(this.container);var _1455=this._velocity<0?0.001:-0.001;var _1456=-(this._velocity*this._velocity)/(2*_1455);var time=-this._velocity/_1455;var p0={x:0,y:0};var p1={x:0,y:0.3};var p2={x:0.6,y:1};var p3={x:1,y:1};var cx=3*(p1.x-p0.x);var bx=3*(p2.x-p1.x)-cx;var ax=p3.x-p0.x-cx-bx;var cy=3*(p1.y-p0.y);var by=3*(p2.y-p1.y)-cy;var ay=p3.y-p0.y-cy-by;var temp=0,time1=0;if(_1454.h>this._slideDiv.scrollHeight){this.contentOffsetY=0;time1=300;}else{if(this.contentOffsetY+_1456>0){for(var i=0,il=Math.floor(time/20);i<il;i++){temp=(ax*(i*20)^3)+(bx*(i*20)^2)+cx*(i*20)+p0.x;temp=this._velocity<0?-temp:temp;if(this.contentOffsetY+temp>0){time1=i*20;break;}}if(time1===0){time1=300;}this.contentOffsetY=0;}else{if(Math.abs(this.contentOffsetY+_1456)+_1454.h>this._slideDiv.scrollHeight){this.contentOffsetY=_1454.h-this._slideDiv.scrollHeight;for(var i=0,il=Math.floor(time/20);i<il;i++){temp=(ax*(i*20)^3)+(bx*(i*20)^2)+cx*(i*20)+p0.x;temp=this._velocity<0?-temp:temp;if(Math.abs(this.contentOffsetY+temp)>this._slideDiv.scrollHeight){time1=i*20;break;}}}else{time1=time;this.contentOffsetY=this.contentOffsetY+_1456;}}}this._slideDiv.style.webkitTransition="-webkit-transform "+time1+"ms cubic-bezier(0, 0.3, 0.6, 1)";this._animateTo(this.contentOffsetY);},_snapToBounds:function(){var _1457=dojo.contentBox(this.container);if(_1457.h>this._slideDiv.scrollHeight){this.contentOffsetY=0;}else{if(this.contentOffsetY>0){this.contentOffsetY=0;}else{if(Math.abs(this.contentOffsetY)+_1457.h>this._slideDiv.scrollHeight){this.contentOffsetY=_1457.h-this._slideDiv.scrollHeight;}}}this._slideDiv.style.WebkitTransitionDuration="0.5s";this._animateTo(this.contentOffsetY);},_animateTo:function(_1458){this.contentOffsetY=_1458;this._slideDiv.style.webkitTransform="translate3d(0, "+_1458+"px, 0)";},_stopMomentum:function(){if(this._isDecelerating()){var style=document.defaultView.getComputedStyle(this._slideDiv,null);var _1459=new WebKitCSSMatrix(style.webkitTransform);this._slideDiv.style.webkitTransition="";this.animateTo(_1459.m42);}},_isDecelerating:function(){if(this.isDecelerate){return true;}else{return false;}},_toggleNode:function(_145a,item){if(item.toggleState==="ON"){item.toggleState="OFF";if(item.src){_145a.src=item.src.toString();}this.onUnSelect(item);}else{item.toggleState="ON";if(item.srcAlt){_145a.src=item.srcAlt;}this.onSelect(item);}}});});},"esri/dijit/Print":function(){define(["dijit","dojo","dojox","dojo/require!dijit/Menu,dijit/form/Button,esri/tasks/PrintTask"],function(dijit,dojo,dojox){dojo.provide("esri.dijit.Print");dojo.require("dijit.Menu");dojo.require("dijit.form.Button");dojo.require("esri.tasks.PrintTask");dojo.declare("esri.dijit.Print",null,{onPrintComplete:function(){},onError:function(){},onPrintStart:function(){},constructor:function(_145b,_145c){_145b=_145b||{};this.url=_145b.url;this.async=_145b.async;this.map=_145b.map;this.templates=_145b.templates;this.extraParams=_145b.extraParameters;var _145d=esri.bundle.widgets.print;this._printText=_145d.NLS_print;this._printingText=_145d.NLS_printing;this._printoutText=_145d.NLS_printout;if(!this.templates){this.templates=[{label:this._printText,format:"PNG32",layout:"MAP_ONLY",exportOptions:{width:800,height:1100,dpi:96}}];}this.printDomNode=dojo.create("div");dojo.addClass(this.printDomNode,"esriPrint");_145c=dojo.byId(_145c);_145c.appendChild(this.printDomNode);},startup:function(){this._createPrintButton();},destroy:function(){this.map=null;dojo.destroy(this.printDomNode);},hide:function(){esri.hide(this.printDomNode);},show:function(){esri.show(this.printDomNode);},printMap:function(_145e){this.onPrintStart();this._printButton.setAttribute("label",this._printingText);this._printButton.setAttribute("disabled",true);var map=this.map;var _145f=new esri.tasks.PrintTask(this.url,{async:this.async});var _1460=new esri.tasks.PrintParameters();_1460.map=map;_1460.template=_145e;_1460.extraParameters=this.extraParams;_145f.execute(_1460,dojo.hitch(this,this._printComplete),dojo.hitch(this,this._printError));},_createPrintButton:function(){var _1461=this.templates;if(_1461.length===1){this._printButton=new dijit.form.Button({label:this._printText,onClick:dojo.hitch(this,function(){this.printMap(_1461[0]);})});this.printDomNode.appendChild(this._printButton.domNode);}else{this._printButton=new dijit.form.ComboButton({label:this._printText,onClick:dojo.hitch(this,function(){this.printMap(_1461[0]);})});this.printDomNode.appendChild(this._printButton.domNode);var menu=new dijit.Menu({style:"display: none;"});dojo.forEach(_1461,function(_1462){var _1463=new dijit.MenuItem({label:_1462.label,onClick:dojo.hitch(this,function(){this.printMap(_1462);})});menu.addChild(_1463);},this);this._printButton.setAttribute("dropDown",menu);}dojo.addClass(this._printButton.domNode,"esriPrintButton");},_printComplete:function(_1464){this.onPrintComplete(_1464);var _1465=window.location.host.split(".");var _1466=_1465.length>1?_1465[_1465.length-2]+"."+_1465[_1465.length-1]:window.location.host;var _1467=_1464.url.split("://")[1].split("/")[0].split(".");var _1468=_1467.length>1?_1467[_1467.length-2]+"."+_1467[_1467.length-1]:_1464.url.split("://")[1].split("/")[0];if(_1466.toLowerCase()===_1468.toLowerCase()){window.open(_1464.url);this._removeAllChildren(this.printDomNode);this._createPrintButton();}else{this._printButton.domNode.style.display="none";var _1469=dojo.create("a",{href:_1464.url,target:"_blank",innerHTML:this._printoutText});dojo.connect(_1469,"onclick",dojo.hitch(this,this._hyperlinkClick));this._removeAllChildren(this.printDomNode);dojo.addClass(_1469,"esriPrintout");this.printDomNode.appendChild(_1469);}},_printError:function(err){this._removeAllChildren(this.printDomNode);this._createPrintButton();console.error(err);this.onError(err);},_hyperlinkClick:function(){this._removeAllChildren(this.printDomNode);this._createPrintButton();},_removeAllChildren:function(_146a){while(_146a.hasChildNodes()){_146a.removeChild(_146a.lastChild);}}});});},"dojo/io/iframe":function(){define(["../_base/config","../_base/json","../_base/kernel","../_base/lang","../_base/xhr","../sniff","../_base/window","../dom","../dom-construct","../query","require","../aspect","../request/iframe"],function(_146b,json,_146c,lang,xhr,has,win,dom,_146d,query,_146e,_146f,_1470){dojo.deprecated("dojo/io/iframe","Use dojo/request/iframe.","2.0");var mid=_1470._iframeName;mid=mid.substring(0,mid.lastIndexOf("_"));var _1471=lang.delegate(_1470,{create:function(){return _1471._frame=_1470.create.apply(_1470,arguments);},get:null,post:null,send:function(args){var rDfd;var dfd=xhr._ioSetArgs(args,function(dfd){rDfd&&rDfd.cancel();},function(dfd){var value=null,_1472=dfd.ioArgs;try{var _1473=_1472.handleAs;if(_1473==="xml"||_1473==="html"){value=rDfd.response.data;}else{value=rDfd.response.text;if(_1473==="json"){value=json.fromJson(value);}else{if(_1473==="javascript"){value=_146c.eval(value);}}}}catch(e){value=e;}return value;},function(error,dfd){dfd.ioArgs._hasError=true;return error;});var _1474=dfd.ioArgs;var _1475="GET",form=dojo.byId(args.form);if(args.method&&args.method.toUpperCase()==="POST"&&form){_1475="POST";}var _1476={method:_1475,handleAs:args.handleAs==="json"||args.handleAs==="javascript"?"text":args.handleAs,form:args.form,query:form?null:args.content,data:form?args.content:null,timeout:args.timeout,ioArgs:_1474};if(_1476.method){_1476.method=_1476.method.toUpperCase();}if(_146b.ioPublish&&_146c.publish&&_1474.args.ioPublish!==false){var start=_146f.after(_1470,"_notifyStart",function(data){if(data.options.ioArgs===_1474){start.remove();xhr._ioNotifyStart(dfd);}},true);}rDfd=_1470(_1474.url,_1476,true);_1474._callNext=rDfd._callNext;rDfd.then(function(){dfd.resolve(dfd);}).otherwise(function(error){dfd.ioArgs.error=error;dfd.reject(error);});return dfd;},_iframeOnload:win.global[mid+"_onload"]});lang.setObject("dojo.io.iframe",_1471);return _1471;});},"dijit/form/_ComboBoxMenu":function(){define("dijit/form/_ComboBoxMenu",["dojo/_base/declare","dojo/dom-class","dojo/dom-style","dojo/keys","../_WidgetBase","../_TemplatedMixin","./_ComboBoxMenuMixin","./_ListMouseMixin"],function(_1477,_1478,_1479,keys,_147a,_147b,_147c,_147d){return _1477("dijit.form._ComboBoxMenu",[_147a,_147b,_147d,_147c],{templateString:"<div class='dijitReset dijitMenu' data-dojo-attach-point='containerNode' style='overflow: auto; overflow-x: hidden;'>"+"<div class='dijitMenuItem dijitMenuPreviousButton' data-dojo-attach-point='previousButton' role='option'></div>"+"<div class='dijitMenuItem dijitMenuNextButton' data-dojo-attach-point='nextButton' role='option'></div>"+"</div>",baseClass:"dijitComboBoxMenu",postCreate:function(){this.inherited(arguments);if(!this.isLeftToRight()){_1478.add(this.previousButton,"dijitMenuItemRtl");_1478.add(this.nextButton,"dijitMenuItemRtl");}},_createMenuItem:function(){var item=this.ownerDocument.createElement("div");item.className="dijitReset dijitMenuItem"+(this.isLeftToRight()?"":" dijitMenuItemRtl");item.setAttribute("role","option");return item;},onHover:function(node){_1478.add(node,"dijitMenuItemHover");},onUnhover:function(node){_1478.remove(node,"dijitMenuItemHover");},onSelect:function(node){_1478.add(node,"dijitMenuItemSelected");},onDeselect:function(node){_1478.remove(node,"dijitMenuItemSelected");},_page:function(up){var _147e=0;var _147f=this.domNode.scrollTop;var _1480=_1479.get(this.domNode,"height");if(!this.getHighlightedOption()){this.selectNextNode();}while(_147e<_1480){var _1481=this.getHighlightedOption();if(up){if(!_1481.previousSibling||_1481.previousSibling.style.display=="none"){break;}this.selectPreviousNode();}else{if(!_1481.nextSibling||_1481.nextSibling.style.display=="none"){break;}this.selectNextNode();}var _1482=this.domNode.scrollTop;_147e+=(_1482-_147f)*(up?-1:1);_147f=_1482;}},handleKey:function(evt){switch(evt.keyCode){case keys.DOWN_ARROW:this.selectNextNode();return false;case keys.PAGE_DOWN:this._page(false);return false;case keys.UP_ARROW:this.selectPreviousNode();return false;case keys.PAGE_UP:this._page(true);return false;default:return true;}}});});},"dijit/_KeyNavContainer":function(){define("dijit/_KeyNavContainer",["dojo/_base/kernel","./_Container","./_FocusMixin","dojo/_base/array","dojo/keys","dojo/_base/declare","dojo/_base/event","dojo/dom-attr","dojo/_base/lang"],function(_1483,_1484,_1485,array,keys,_1486,event,_1487,lang){return _1486("dijit._KeyNavContainer",[_1485,_1484],{tabIndex:"0",connectKeyNavHandlers:function(_1488,_1489){var _148a=(this._keyNavCodes={});var prev=lang.hitch(this,"focusPrev");var next=lang.hitch(this,"focusNext");array.forEach(_1488,function(code){_148a[code]=prev;});array.forEach(_1489,function(code){_148a[code]=next;});_148a[keys.HOME]=lang.hitch(this,"focusFirstChild");_148a[keys.END]=lang.hitch(this,"focusLastChild");this.connect(this.domNode,"onkeypress","_onContainerKeypress");this.connect(this.domNode,"onfocus","_onContainerFocus");},startupKeyNavChildren:function(){_1483.deprecated("startupKeyNavChildren() call no longer needed","","2.0");},startup:function(){this.inherited(arguments);array.forEach(this.getChildren(),lang.hitch(this,"_startupChild"));},addChild:function(_148b,_148c){this.inherited(arguments);this._startupChild(_148b);},focus:function(){this.focusFirstChild();},focusFirstChild:function(){this.focusChild(this._getFirstFocusableChild());},focusLastChild:function(){this.focusChild(this._getLastFocusableChild());},focusNext:function(){this.focusChild(this._getNextFocusableChild(this.focusedChild,1));},focusPrev:function(){this.focusChild(this._getNextFocusableChild(this.focusedChild,-1),true);},focusChild:function(_148d,last){if(!_148d){return;}if(this.focusedChild&&_148d!==this.focusedChild){this._onChildBlur(this.focusedChild);}_148d.set("tabIndex",this.tabIndex);_148d.focus(last?"end":"start");this._set("focusedChild",_148d);},_startupChild:function(_148e){_148e.set("tabIndex","-1");this.connect(_148e,"_onFocus",function(){_148e.set("tabIndex",this.tabIndex);});this.connect(_148e,"_onBlur",function(){_148e.set("tabIndex","-1");});},_onContainerFocus:function(evt){if(evt.target!==this.domNode||this.focusedChild){return;}this.focusFirstChild();_1487.set(this.domNode,"tabIndex","-1");},_onBlur:function(evt){if(this.tabIndex){_1487.set(this.domNode,"tabIndex",this.tabIndex);}this.focusedChild=null;this.inherited(arguments);},_onContainerKeypress:function(evt){if(evt.ctrlKey||evt.altKey){return;}var func=this._keyNavCodes[evt.charOrCode];if(func){func();event.stop(evt);}},_onChildBlur:function(){},_getFirstFocusableChild:function(){return this._getNextFocusableChild(null,1);},_getLastFocusableChild:function(){return this._getNextFocusableChild(null,-1);},_getNextFocusableChild:function(child,dir){if(child){child=this._getSiblingOfChild(child,dir);}var _148f=this.getChildren();for(var i=0;i<_148f.length;i++){if(!child){child=_148f[(dir>0)?0:(_148f.length-1)];}if(child.isFocusable()){return child;}child=this._getSiblingOfChild(child,dir);}return null;}});});},"dijit/form/DataList":function(){define("dijit/form/DataList",["dojo/_base/declare","dojo/dom","dojo/_base/lang","dojo/query","dojo/store/Memory","../registry"],function(_1490,dom,lang,query,_1491,_1492){function _1493(_1494){return {id:_1494.value,value:_1494.value,name:lang.trim(_1494.innerText||_1494.textContent||"")};};return _1490("dijit.form.DataList",_1491,{constructor:function(_1495,_1496){this.domNode=dom.byId(_1496);lang.mixin(this,_1495);if(this.id){_1492.add(this);}this.domNode.style.display="none";this.inherited(arguments,[{data:query("option",this.domNode).map(_1493)}]);},destroy:function(){_1492.remove(this.id);},fetchSelectedItem:function(){var _1497=query("> option[selected]",this.domNode)[0]||query("> option",this.domNode)[0];return _1497&&_1493(_1497);}});});},"dojox/charting/plot2d/StackedAreas":function(){define("dojox/charting/plot2d/StackedAreas",["dojo/_base/declare","./Stacked"],function(_1498,_1499){return _1498("dojox.charting.plot2d.StackedAreas",_1499,{constructor:function(){this.opt.lines=true;this.opt.areas=true;}});});},"dojox/grid/_SelectionPreserver":function(){define("dojox/grid/_SelectionPreserver",["dojo/_base/declare","dojo/_base/connect","dojo/_base/lang","dojo/_base/array"],function(_149a,_149b,lang,array){return _149a("dojox.grid._SelectionPreserver",null,{constructor:function(_149c){this.selection=_149c;var grid=this.grid=_149c.grid;this.reset();this._connects=[_149b.connect(grid,"_setStore",this,"reset"),_149b.connect(grid,"_addItem",this,"_reSelectById"),_149b.connect(_149c,"onSelected",lang.hitch(this,"_selectById",true)),_149b.connect(_149c,"onDeselected",lang.hitch(this,"_selectById",false)),_149b.connect(_149c,"deselectAll",this,"reset")];},destroy:function(){this.reset();array.forEach(this._connects,_149b.disconnect);delete this._connects;},reset:function(){this._selectedById={};},_reSelectById:function(item,index){if(item&&this.grid._hasIdentity){this.selection.selected[index]=this._selectedById[this.grid.store.getIdentity(item)];}},_selectById:function(_149d,_149e){if(this.selection.mode=="none"||!this.grid._hasIdentity){return;}var item=_149e,g=this.grid;if(typeof _149e=="number"||typeof _149e=="string"){var entry=g._by_idx[_149e];item=entry&&entry.item;}if(item){this._selectedById[g.store.getIdentity(item)]=!!_149d;}return item;}});});},"url:dijit/form/templates/DropDownBox.html":"<div class=\"dijit dijitReset dijitInline dijitLeft\"\n\tid=\"widget_${id}\"\n\trole=\"combobox\"\n\t><div class='dijitReset dijitRight dijitButtonNode dijitArrowButton dijitDownArrowButton dijitArrowButtonContainer'\n\t\tdata-dojo-attach-point=\"_buttonNode, _popupStateNode\" role=\"presentation\"\n\t\t><input class=\"dijitReset dijitInputField dijitArrowButtonInner\" value=\"&#9660; \" type=\"text\" tabIndex=\"-1\" readonly=\"readonly\" role=\"presentation\"\n\t\t\t${_buttonInputDisabled}\n\t/></div\n\t><div class='dijitReset dijitValidationContainer'\n\t\t><input class=\"dijitReset dijitInputField dijitValidationIcon dijitValidationInner\" value=\"&#935; \" type=\"text\" tabIndex=\"-1\" readonly=\"readonly\" role=\"presentation\"\n\t/></div\n\t><div class=\"dijitReset dijitInputField dijitInputContainer\"\n\t\t><input class='dijitReset dijitInputInner' ${!nameAttrSetting} type=\"text\" autocomplete=\"off\"\n\t\t\tdata-dojo-attach-point=\"textbox,focusNode\" role=\"textbox\" aria-haspopup=\"true\"\n\t/></div\n></div>\n","esri/dijit/editing/AttachmentEditor":function(){define(["dijit","dojo","dojox","dojo/require!dijit/_Widget,dijit/_Templated"],function(dijit,dojo,dojox){dojo.provide("esri.dijit.editing.AttachmentEditor");dojo.require("dijit._Widget");dojo.require("dijit._Templated");dojo.declare("esri.dijit.editing.AttachmentEditor",[dijit._Widget,dijit._Templated],{widgetsInTemplate:true,templateString:"<div class=\"attachmentEditor\">\r\n    <br />\r\n    <div>\r\n        <b>${NLS_attachments}</b>\r\n        <hr />\r\n        <div dojoAttachPoint=\"_attachmentError\" style='color:red;display:none'></div>\r\n        <br />\r\n        <span dojoAttachPoint='_attachmentList' style='word-wrap: break-word;'></span>\r\n        <br><br>\r\n        <form dojoAttachPoint='_uploadForm'> ${NLS_add}:&nbsp;&nbsp;<input type='file' name='attachment' dojoAttachPoint='_uploadField' /> </form>\r\n    </div>\r\n</div>",basePath:dojo.moduleUrl("esri.dijit.editing"),_listHtml:"<span id='node_${oid}_${attid}'><a href='${href}' target='_blank'>${name}</a>",_deleteBtnHtml:"(<span style='cursor:pointer;color:red;font-weight:bold;' class='deleteAttachment' id='${attid}');'>X</span>)",_endHtml:"<br/></span>",_aeConnects:[],_layerEditingCapChecked:{},_layerEditingCap:{},constructor:function(_149f,_14a0){dojo.mixin(this,esri.bundle.widgets.attachmentEditor);},startup:function(){this.inherited(arguments);this._uploadField_connect=dojo.connect(this._uploadField,"onchange",this,"_addAttachment");this._uploadFieldFocus_connect=dojo.connect(this._uploadField,"onfocus",dojo.hitch(this,function(e){esri.hide(this._attachmentError);}));},destroy:function(){dojo.forEach(this._aeConnects,dojo.disconnect);dojo.disconnect(this._uploadField_connect);dojo.disconnect(this._uploadFieldFocus_connect);this.inherited(arguments);},showAttachments:function(_14a1,_14a2){var list=this._attachmentList;list.innerHTML=this.NLS_none;this._uploadField.value="";dojo.forEach(this.domNode.children,function(child,idx){esri.show(child);});esri.hide(this._attachmentError);if(!_14a1){return;}this._featureLayer=_14a1.getLayer()||_14a2;if(!this._featureLayer){return;}if(this._featureLayer.declaredClass!=="esri.layers.FeatureLayer"||!this._featureLayer.getEditCapabilities){esri.hide(this._uploadForm);dojo.forEach(this.domNode.children,function(child,idx){esri.hide(child);});return;}this._currentLayerId=this._featureLayer.id;if(!this._layerEditingCapChecked[this._currentLayerId]){this._layerEditingCap[this._currentLayerId]=this._featureLayer.getEditCapabilities();this._layerEditingCapChecked[this._currentLayerId]=true;}this._featureCanUpdate=this._featureLayer.getEditCapabilities({feature:_14a1}).canUpdate;this._oid=_14a1.attributes[this._featureLayer.objectIdField];this._getAttachments(_14a1);},_getAttachments:function(_14a3){if(!this._featureLayer||!this._featureLayer.queryAttachmentInfos){return;}this._featureLayer.queryAttachmentInfos(this._oid,dojo.hitch(this,"_onQueryAttachmentInfosComplete"));},_addAttachment:function(){esri.hide(this._attachmentError);if(!this._featureLayer||!this._featureLayer.addAttachment){return;}this._featureLayer.addAttachment(this._oid,this._uploadForm,dojo.hitch(this,"_onAddAttachmentComplete"),dojo.hitch(this,"_onAddAttachmentError"));},_deleteAttachment:function(oid,attid){this._featureLayer.deleteAttachments(oid,[attid],dojo.hitch(this,"_onDeleteAttachmentComplete"));},_onQueryAttachmentInfosComplete:function(_14a4){var _14a5=this._listHtml+this._deleteBtnHtml+this._endHtml;this._uploadForm.style.display="block";if((!this._featureCanUpdate&&this._layerEditingCap[this._currentLayerId].canUpdate)||(!this._layerEditingCap[this._currentLayerId].canCreate&&!this._layerEditingCap[this._currentLayerId].canUpdate)){_14a5=this._listHtml+this._endHtml;this._uploadForm.style.display="none";}else{if(this._layerEditingCap[this._currentLayerId].canCreate&&!this._layerEditingCap[this._currentLayerId].canUpdate){_14a5=this._listHtml+this._endHtml;}}var list=this._attachmentList,links=dojo.map(_14a4,dojo.hitch(this,function(info){return esri.substitute({href:info.url,name:info.name,oid:info.objectId,attid:info.id},_14a5);}));list.innerHTML=links.join("")||this.NLS_none;this._updateConnects();},_onAddAttachmentComplete:function(_14a6){var _14a7=this._uploadField;var _14a8=_14a7.value;var pos=_14a8.lastIndexOf("\\");if(pos>-1){_14a8=_14a8.substring(pos+1,_14a8.length);}_14a8=_14a8.replace(/\ /g,"_");var list=this._attachmentList,_14a9=dojo.objectToQuery({gdbVersion:this._featureLayer.gdbVersion,token:this._featureLayer._getToken()});var _14aa=this._listHtml+this._deleteBtnHtml+this._endHtml;if(this._layerEditingCap[this._currentLayerId].canCreate&&!this._layerEditingCap[this._currentLayerId].canUpdate){_14aa=this._listHtml+this._endHtml;}var link=esri.substitute({href:this._featureLayer._url.path+"/"+_14a6.objectId+"/attachments/"+_14a6.attachmentId+(_14a9?("?"+_14a9):""),name:_14a8,oid:_14a6.objectId,attid:_14a6.attachmentId},_14aa);list.innerHTML=list.innerHTML==this.NLS_none?link:(list.innerHTML+link);this._updateConnects();_14a7.value="";},_onAddAttachmentError:function(error){if(error&&esri._isDefined(error.code)){var _14ab,_14ac=this._attachmentError;if(error.code===400){_14ab=this.NLS_fileNotSupported;}else{_14ab=error.message||(error.details&&error.details.length&&error.details[0]);}dojo.attr(_14ac,"innerHTML",(_14ab||this.NLS_error));esri.show(_14ac);}},_onDeleteAttachmentComplete:function(_14ad){var _14ae=dojo.every(_14ad,function(_14af){return _14af.success;}),list=this._attachmentList;if(_14ae){dojo.query("#node_"+_14ad[0].objectId+"_"+_14ad[0].attachmentId).orphan();if(!list.children||!list.children.length){list.innerHTML=this.NLS_none;}}},_updateConnects:function(){dojo.forEach(this._aeConnects,dojo.disconnect);dojo.query(".deleteAttachment").forEach(function(item){this._aeConnects.push(dojo.connect(item,"onclick",dojo.hitch(this,"_deleteAttachment",this._oid,item.id)));},this);}});});},"esri/dijit/editing/toolbars/Drawing":function(){define(["dijit","dojo","dojox","dojo/require!dijit/_CssStateMixin,esri/dijit/editing/toolbars/ToolbarBase,esri/dijit/editing/tools/Editing,esri/dijit/editing/tools/Selection,esri/dijit/editing/tools/AdvancedTools"],function(dijit,dojo,dojox){dojo.provide("esri.dijit.editing.toolbars.Drawing");dojo.require("dijit._CssStateMixin");dojo.require("esri.dijit.editing.toolbars.ToolbarBase");dojo.require("esri.dijit.editing.tools.Editing");dojo.require("esri.dijit.editing.tools.Selection");dojo.require("esri.dijit.editing.tools.AdvancedTools");dojo.declare("esri.dijit.editing.toolbars.Drawing",[esri.dijit.editing.toolbars.ToolbarBase,dijit._CssStateMixin],{onShowAttributeInspector:function(){},_activateTool:function(tool,_14b0){this._settings.editor._activeTool=tool;if(tool!=="EDITING"){this._settings.templatePicker.clearSelection();}if(tool!=="ATTRIBUTES"){this._settings.editor._hideAttributeInspector();}if(tool==="CLEAR"){return;}this.inherited(arguments);},_initializeToolbar:function(){var _14b1=this._settings.layers;dojo.forEach(_14b1,function(layer){this._tbConnects.push(dojo.connect(layer,"onSelectionComplete",this,"_updateUI"));},this);},activateEditing:function(_14b2,layer){this._tools.EDITING._activateTool(_14b2,layer.geometryType);this._activeTool=this._tools.EDITING;this._activeTool.setChecked(true);},_updateUI:function(){if(this._settings.undoManager){this._tools.UNDO.set("disabled",this._settings.undoManager.canUndo===false);this._tools.REDO.set("disabled",this._settings.undoManager.canRedo===false);}this._selectedFeatures=esri.dijit.editing.Util.LayerHelper.getSelection(this._settings.layers);var count=this._selectedFeatures.length;if(this._tools.DELETE){this._tools.DELETE.set("disabled",count<=0);}if(this._tools.CLEAR){this._tools.CLEAR.set("disabled",count<=0);}if(this._tools.ATTRIBUTES){this._tools.ATTRIBUTES.set("disabled",count<=0);}if(this._tools.UNION){this._tools.UNION.set("disabled",count<2);}},_toolFinished:function(tool){if(tool==="ATTRIBUTES"&&(this._selectedFeatures&&this._selectedFeatures.length)){this.onShowAttributeInspector(this._selectedFeatures[0]);}if(tool==="SELECT"||tool==="CUT"||tool==="RESHAPING"||tool==="EDITING"){this._activeTool.deactivate();this._activeTool.setChecked(false);this._activeTool=null;}if(tool==="DELETE"){this.onDelete();}this._updateUI();},_createTools:function(){this._tools.SELECT=new esri.dijit.editing.tools.Selection({settings:this._settings,onClick:dojo.hitch(this,"_activateTool","SELECT",true),onFinished:dojo.hitch(this,"_toolFinished","SELECT")});this.addChild(this._tools.SELECT);this._tools.CLEAR=new esri.dijit.editing.tools.ButtonToolBase(dojo.mixin(esri.dijit.editing.tools.SelectionTools.selectClear,{settings:this._settings,onClick:dojo.hitch(this._settings.editor,"_clearSelection",false)}));this.addChild(this._tools.CLEAR);this._createSeparator();this._tools.ATTRIBUTES=new esri.dijit.editing.tools.ButtonToolBase(dojo.mixin(esri.dijit.editing.tools.EditingTools.attributes,{settings:this._settings,onClick:dojo.hitch(this,"_toolFinished","ATTRIBUTES")}));this.addChild(this._tools.ATTRIBUTES);this._createSeparator();this._tools.EDITING=new esri.dijit.editing.tools.Editing({settings:this._settings,onClick:dojo.hitch(this,"_activateTool","EDITING",true),onApplyEdits:dojo.hitch(this,"onApplyEdits"),onFinished:dojo.hitch(this,"_toolFinished","EDITING")});this.addChild(this._tools.EDITING);this._tools.DELETE=new esri.dijit.editing.tools.ButtonToolBase(dojo.mixin(esri.dijit.editing.tools.EditingTools.del,{settings:this._settings,onClick:dojo.hitch(this,"_toolFinished","DELETE")}));this.addChild(this._tools.DELETE);if(this._settings.toolbarOptions){if(this._settings.toolbarOptions.cutVisible||this._settings.toolbarOptions.mergeVisible||this._settings.toolbarOptions.reshapeVisible){this._createSeparator();}if(this._settings.toolbarOptions.cutVisible){this._tools.CUT=new esri.dijit.editing.tools.Cut({settings:this._settings,onFinished:dojo.hitch(this,"_toolFinished","CUT"),onClick:dojo.hitch(this,"_activateTool","CUT",true),onApplyEdits:dojo.hitch(this,"onApplyEdits")});this.addChild(this._tools.CUT);}if(this._settings.toolbarOptions.mergeVisible){this._tools.UNION=new esri.dijit.editing.tools.Union({settings:this._settings,onFinished:dojo.hitch(this,"_toolFinished","UNION"),onApplyEdits:dojo.hitch(this,"onApplyEdits")});this.addChild(this._tools.UNION);}if(this._settings.toolbarOptions.reshapeVisible){this._tools.RESHAPING=new esri.dijit.editing.tools.Reshape({settings:this._settings,onClick:dojo.hitch(this,"_activateTool","RESHAPING",true),onFinished:dojo.hitch(this,"_toolFinished","RESHAPING"),onApplyEdits:dojo.hitch(this,"onApplyEdits")});this.addChild(this._tools.RESHAPING);}}if(this._settings.enableUndoRedo){this._createSeparator();this._tools.UNDO=new esri.dijit.editing.tools.ButtonToolBase(dojo.mixin(esri.dijit.editing.tools.EditingTools.undo,{settings:this._settings,onClick:dojo.hitch(this,function(){this._tools.UNDO.set("disabled",true);this._tools.REDO.set("disabled",true);this._settings.editor._undo();})}));this.addChild(this._tools.UNDO);this._tools.REDO=new esri.dijit.editing.tools.ButtonToolBase(dojo.mixin(esri.dijit.editing.tools.EditingTools.redo,{settings:this._settings,onClick:dojo.hitch(this,function(){this._tools.UNDO.set("disabled",true);this._tools.REDO.set("disabled",true);this._settings.editor._redo();})}));this.addChild(this._tools.REDO);}}});});},"dojox/charting/action2d/PlotAction":function(){define("dojox/charting/action2d/PlotAction",["dojo/_base/connect","dojo/_base/declare","./Base","dojo/fx/easing","dojox/lang/functional","dojox/lang/functional/object"],function(hub,_14b3,Base,dfe,df,dlfo){var _14b4=400,_14b5=dfe.backOut;return _14b3("dojox.charting.action2d.PlotAction",Base,{overOutEvents:{onmouseover:1,onmouseout:1},constructor:function(chart,plot,_14b6){this.anim={};if(!_14b6){_14b6={};}this.duration=_14b6.duration?_14b6.duration:_14b4;this.easing=_14b6.easing?_14b6.easing:_14b5;},connect:function(){this.handle=this.chart.connectToPlot(this.plot.name,this,"process");},disconnect:function(){if(this.handle){hub.disconnect(this.handle);this.handle=null;}},reset:function(){},destroy:function(){this.inherited(arguments);df.forIn(this.anim,function(o){df.forIn(o,function(anim){anim.action.stop(true);});});this.anim={};}});});},"url:dijit/templates/CheckedMenuItem.html":"<tr class=\"dijitReset dijitMenuItem\" data-dojo-attach-point=\"focusNode\" role=\"menuitemcheckbox\" tabIndex=\"-1\">\n\t<td class=\"dijitReset dijitMenuItemIconCell\" role=\"presentation\">\n\t\t<img src=\"${_blankGif}\" alt=\"\" class=\"dijitMenuItemIcon dijitCheckedMenuItemIcon\" data-dojo-attach-point=\"iconNode\"/>\n\t\t<span class=\"dijitCheckedMenuItemIconChar\">&#10003;</span>\n\t</td>\n\t<td class=\"dijitReset dijitMenuItemLabel\" colspan=\"2\" data-dojo-attach-point=\"containerNode,labelNode\"></td>\n\t<td class=\"dijitReset dijitMenuItemAccelKey\" style=\"display: none\" data-dojo-attach-point=\"accelKeyNode\"></td>\n\t<td class=\"dijitReset dijitMenuArrowCell\" role=\"presentation\">&#160;</td>\n</tr>\n","dojox/charting/plot2d/CartesianBase":function(){define("dojox/charting/plot2d/CartesianBase",["dojo/_base/lang","dojo/_base/declare","dojo/_base/connect","./Base","../scaler/primitive","dojox/gfx/fx"],function(lang,_14b7,hub,Base,_14b8,fx){return _14b7("dojox.charting.plot2d.CartesianBase",Base,{constructor:function(chart,_14b9){this.axes=["hAxis","vAxis"];this.zoom=null,this.zoomQueue=[];this.lastWindow={vscale:1,hscale:1,xoffset:0,yoffset:0};},clear:function(){this.inherited(arguments);this._hAxis=null;this._vAxis=null;return this;},cleanGroup:function(_14ba){this.inherited(arguments,[_14ba||this.chart.plotGroup]);},setAxis:function(axis){if(axis){this[axis.vertical?"_vAxis":"_hAxis"]=axis;}return this;},toPage:function(coord){var ah=this._hAxis,av=this._vAxis,sh=ah.getScaler(),sv=av.getScaler(),th=sh.scaler.getTransformerFromModel(sh),tv=sv.scaler.getTransformerFromModel(sv),c=this.chart.getCoords(),o=this.chart.offsets,dim=this.chart.dim;var t=function(coord){var r={};r.x=th(coord[ah.name])+c.x+o.l;r.y=c.y+dim.height-o.b-tv(coord[av.name]);return r;};return coord?t(coord):t;},toData:function(coord){var ah=this._hAxis,av=this._vAxis,sh=ah.getScaler(),sv=av.getScaler(),th=sh.scaler.getTransformerFromPlot(sh),tv=sv.scaler.getTransformerFromPlot(sv),c=this.chart.getCoords(),o=this.chart.offsets,dim=this.chart.dim;var t=function(coord){var r={};r[ah.name]=th(coord.x-c.x-o.l);r[av.name]=tv(c.y+dim.height-coord.y-o.b);return r;};return coord?t(coord):t;},isDirty:function(){return this.dirty||this._hAxis&&this._hAxis.dirty||this._vAxis&&this._vAxis.dirty;},performZoom:function(dim,_14bb){var vs=this._vAxis.scale||1,hs=this._hAxis.scale||1,_14bc=dim.height-_14bb.b,_14bd=this._hScaler.bounds,_14be=(_14bd.from-_14bd.lower)*_14bd.scale,_14bf=this._vScaler.bounds,_14c0=(_14bf.from-_14bf.lower)*_14bf.scale,_14c1=vs/this.lastWindow.vscale,_14c2=hs/this.lastWindow.hscale,_14c3=(this.lastWindow.xoffset-_14be)/((this.lastWindow.hscale==1)?hs:this.lastWindow.hscale),_14c4=(_14c0-this.lastWindow.yoffset)/((this.lastWindow.vscale==1)?vs:this.lastWindow.vscale),shape=this.group,anim=fx.animateTransform(lang.delegate({shape:shape,duration:1200,transform:[{name:"translate",start:[0,0],end:[_14bb.l*(1-_14c2),_14bc*(1-_14c1)]},{name:"scale",start:[1,1],end:[_14c2,_14c1]},{name:"original"},{name:"translate",start:[0,0],end:[_14c3,_14c4]}]},this.zoom));lang.mixin(this.lastWindow,{vscale:vs,hscale:hs,xoffset:_14be,yoffset:_14c0});this.zoomQueue.push(anim);hub.connect(anim,"onEnd",this,function(){this.zoom=null;this.zoomQueue.shift();if(this.zoomQueue.length>0){this.zoomQueue[0].play();}});if(this.zoomQueue.length==1){this.zoomQueue[0].play();}return this;},initializeScalers:function(dim,stats){if(this._hAxis){if(!this._hAxis.initialized()){this._hAxis.calculate(stats.hmin,stats.hmax,dim.width);}this._hScaler=this._hAxis.getScaler();}else{this._hScaler=_14b8.buildScaler(stats.hmin,stats.hmax,dim.width);}if(this._vAxis){if(!this._vAxis.initialized()){this._vAxis.calculate(stats.vmin,stats.vmax,dim.height);}this._vScaler=this._vAxis.getScaler();}else{this._vScaler=_14b8.buildScaler(stats.vmin,stats.vmax,dim.height);}return this;}});});},"dojox/charting/plot2d/_PlotEvents":function(){define("dojox/charting/plot2d/_PlotEvents",["dojo/_base/lang","dojo/_base/array","dojo/_base/declare","dojo/_base/connect"],function(lang,arr,_14c5,hub){return _14c5("dojox.charting.plot2d._PlotEvents",null,{constructor:function(){this._shapeEvents=[];this._eventSeries={};},destroy:function(){this.resetEvents();this.inherited(arguments);},plotEvent:function(o){},raiseEvent:function(o){this.plotEvent(o);var t=lang.delegate(o);t.originalEvent=o.type;t.originalPlot=o.plot;t.type="onindirect";arr.forEach(this.chart.stack,function(plot){if(plot!==this&&plot.plotEvent){t.plot=plot;plot.plotEvent(t);}},this);},connect:function(_14c6,_14c7){this.dirty=true;return hub.connect(this,"plotEvent",_14c6,_14c7);},events:function(){return !!this.plotEvent.after;},resetEvents:function(){if(this._shapeEvents.length){arr.forEach(this._shapeEvents,function(item){item.shape.disconnect(item.handle);});this._shapeEvents=[];}this.raiseEvent({type:"onplotreset",plot:this});},_connectSingleEvent:function(o,_14c8){this._shapeEvents.push({shape:o.eventMask,handle:o.eventMask.connect(_14c8,this,function(e){o.type=_14c8;o.event=e;this.raiseEvent(o);o.event=null;})});},_connectEvents:function(o){if(o){o.chart=this.chart;o.plot=this;o.hAxis=this.hAxis||null;o.vAxis=this.vAxis||null;o.eventMask=o.eventMask||o.shape;this._connectSingleEvent(o,"onmouseover");this._connectSingleEvent(o,"onmouseout");this._connectSingleEvent(o,"onclick");}},_reconnectEvents:function(_14c9){var a=this._eventSeries[_14c9];if(a){arr.forEach(a,this._connectEvents,this);}},fireEvent:function(_14ca,_14cb,index,_14cc){var s=this._eventSeries[_14ca];if(s&&s.length&&index<s.length){var o=s[index];o.type=_14cb;o.event=_14cc||null;this.raiseEvent(o);o.event=null;}}});});},"dojox/grid/cells":function(){define("dojox/grid/cells",["../main","./cells/_base"],function(dojox){return dojox.grid.cells;});},"url:dojox/form/resources/VerticalRangeSlider.html":"<table class=\"dijitReset dijitSlider dijitSliderV dojoxRangeSlider\" cellspacing=\"0\" cellpadding=\"0\" border=\"0\" rules=\"none\" role=\"presentation\"\n\t><tr class=\"dijitReset\"\n\t\t><td class=\"dijitReset\"></td\n\t\t><td class=\"dijitReset dijitSliderButtonContainer dijitSliderButtonContainerV\"\n\t\t\t><div class=\"dijitSliderIncrementIconV\" tabIndex=\"-1\" style=\"display:none\" dojoAttachPoint=\"decrementButton\" dojoAttachEvent=\"onclick: increment\"><span class=\"dijitSliderButtonInner\">+</span></div\n\t\t></td\n\t\t><td class=\"dijitReset\"></td\n\t></tr\n\t><tr class=\"dijitReset\"\n\t\t><td class=\"dijitReset\"></td\n\t\t><td class=\"dijitReset\"\n\t\t\t><center><div class=\"dijitSliderBar dijitSliderBumper dijitSliderBumperV dijitSliderTopBumper\" dojoAttachEvent=\"onclick:_onClkIncBumper\"></div></center\n\t\t></td\n\t\t><td class=\"dijitReset\"></td\n\t></tr\n\t><tr class=\"dijitReset\"\n\t\t><td dojoAttachPoint=\"leftDecoration\" class=\"dijitReset dijitSliderDecoration dijitSliderDecorationL dijitSliderDecorationV\" style=\"text-align:center;height:100%;\"></td\n\t\t><td class=\"dijitReset\" style=\"height:100%;\"\n\t\t\t><input dojoAttachPoint=\"valueNode\" type=\"hidden\" ${!nameAttrSetting}\n\t\t\t/><center role=\"presentation\" style=\"position:relative;height:100%;\" dojoAttachPoint=\"sliderBarContainer\"\n\t\t\t\t><div role=\"presentation\" dojoAttachPoint=\"remainingBar\" class=\"dijitSliderBar dijitSliderBarV dijitSliderRemainingBar dijitSliderRemainingBarV\" dojoAttachEvent=\"onmousedown:_onRemainingBarClick\"\n\t\t\t\t\t><div dojoAttachPoint=\"sliderHandle\" tabIndex=\"${tabIndex}\" class=\"dijitSliderMoveable dijitSliderMoveableV\" dojoAttachEvent=\"onkeypress:_onKeyPress,onmousedown:_onHandleClick\" style=\"vertical-align:top;\" role=\"slider\"\n\t\t\t\t\t\t><div class=\"dijitSliderImageHandle dijitSliderImageHandleV\"></div\n\t\t\t\t\t></div\n\t\t\t\t\t><div role=\"presentation\" dojoAttachPoint=\"progressBar,focusNode\" tabIndex=\"${tabIndex}\" class=\"dijitSliderBar dijitSliderBarV dijitSliderProgressBar dijitSliderProgressBarV\" dojoAttachEvent=\"onkeypress:_onKeyPress,onmousedown:_onBarClick\"\n\t\t\t\t\t></div\n\t\t\t\t\t><div dojoAttachPoint=\"sliderHandleMax\" tabIndex=\"${tabIndex}\" class=\"dijitSliderMoveable dijitSliderMoveableV\" dojoAttachEvent=\"onkeypress:_onKeyPress,onmousedown:_onHandleClickMax\" style=\"vertical-align:top;\" role=\"slider\"\n\t\t\t\t\t\t><div class=\"dijitSliderImageHandle dijitSliderImageHandleV\"></div\n\t\t\t\t\t></div\n\t\t\t\t></div\n\t\t\t></center\n\t\t></td\n\t\t><td dojoAttachPoint=\"containerNode,rightDecoration\" class=\"dijitReset dijitSliderDecoration dijitSliderDecorationR dijitSliderDecorationV\" style=\"text-align:center;height:100%;\"></td\n\t></tr\n\t><tr class=\"dijitReset\"\n\t\t><td class=\"dijitReset\"></td\n\t\t><td class=\"dijitReset\"\n\t\t\t><center><div class=\"dijitSliderBar dijitSliderBumper dijitSliderBumperV dijitSliderBottomBumper\" dojoAttachEvent=\"onclick:_onClkDecBumper\"></div></center\n\t\t></td\n\t\t><td class=\"dijitReset\"></td\n\t></tr\n\t><tr class=\"dijitReset\"\n\t\t><td class=\"dijitReset\"></td\n\t\t><td class=\"dijitReset dijitSliderButtonContainer dijitSliderButtonContainerV\"\n\t\t\t><div class=\"dijitSliderDecrementIconV\" tabIndex=\"-1\" style=\"display:none\" dojoAttachPoint=\"incrementButton\" dojoAttachEvent=\"onclick: decrement\"><span class=\"dijitSliderButtonInner\">-</span></div\n\t\t></td\n\t\t><td class=\"dijitReset\"></td\n\t></tr\n></table>\n","dijit/ProgressBar":function(){require({cache:{"url:dijit/templates/ProgressBar.html":"<div class=\"dijitProgressBar dijitProgressBarEmpty\" role=\"progressbar\"\n\t><div  data-dojo-attach-point=\"internalProgress\" class=\"dijitProgressBarFull\"\n\t\t><div class=\"dijitProgressBarTile\" role=\"presentation\"></div\n\t\t><span style=\"visibility:hidden\">&#160;</span\n\t></div\n\t><div data-dojo-attach-point=\"labelNode\" class=\"dijitProgressBarLabel\" id=\"${id}_label\"></div\n\t><img data-dojo-attach-point=\"indeterminateHighContrastImage\" class=\"dijitProgressBarIndeterminateHighContrastImage\" alt=\"\"\n/></div>\n"}});define("dijit/ProgressBar",["require","dojo/_base/declare","dojo/dom-class","dojo/_base/lang","dojo/number","./_Widget","./_TemplatedMixin","dojo/text!./templates/ProgressBar.html"],function(_14cd,_14ce,_14cf,lang,_14d0,_14d1,_14d2,_14d3){return _14ce("dijit.ProgressBar",[_14d1,_14d2],{progress:"0",value:"",maximum:100,places:0,indeterminate:false,label:"",name:"",templateString:_14d3,_indeterminateHighContrastImagePath:_14cd.toUrl("./themes/a11y/indeterminate_progress.gif"),postMixInProperties:function(){this.inherited(arguments);if(!(this.params&&"value" in this.params)){this.value=this.indeterminate?Infinity:this.progress;}},buildRendering:function(){this.inherited(arguments);this.indeterminateHighContrastImage.setAttribute("src",this._indeterminateHighContrastImagePath.toString());this.update();},update:function(_14d4){lang.mixin(this,_14d4||{});var tip=this.internalProgress,ap=this.domNode;var _14d5=1;if(this.indeterminate){ap.removeAttribute("aria-valuenow");ap.removeAttribute("aria-valuemin");ap.removeAttribute("aria-valuemax");}else{if(String(this.progress).indexOf("%")!=-1){_14d5=Math.min(parseFloat(this.progress)/100,1);this.progress=_14d5*this.maximum;}else{this.progress=Math.min(this.progress,this.maximum);_14d5=this.maximum?this.progress/this.maximum:0;}ap.setAttribute("aria-describedby",this.labelNode.id);ap.setAttribute("aria-valuenow",this.progress);ap.setAttribute("aria-valuemin",0);ap.setAttribute("aria-valuemax",this.maximum);}this.labelNode.innerHTML=this.report(_14d5);_14cf.toggle(this.domNode,"dijitProgressBarIndeterminate",this.indeterminate);tip.style.width=(_14d5*100)+"%";this.onChange();},_setValueAttr:function(v){this._set("value",v);if(v==Infinity){this.update({indeterminate:true});}else{this.update({indeterminate:false,progress:v});}},_setLabelAttr:function(label){this._set("label",label);this.update();},_setIndeterminateAttr:function(_14d6){this.indeterminate=_14d6;this.update();},report:function(_14d7){return this.label?this.label:(this.indeterminate?"&#160;":_14d0.format(_14d7,{type:"percent",places:this.places,locale:this.lang}));},onChange:function(){}});});},"dijit/_editor/selection":function(){define("dijit/_editor/selection",["dojo/dom","dojo/_base/lang","dojo/sniff","dojo/_base/window","../main"],function(dom,lang,has,win,dijit){var _14d8={getType:function(){if(win.doc.getSelection){var stype="text";var oSel;try{oSel=win.global.getSelection();}catch(e){}if(oSel&&oSel.rangeCount==1){var _14d9=oSel.getRangeAt(0);if((_14d9.startContainer==_14d9.endContainer)&&((_14d9.endOffset-_14d9.startOffset)==1)&&(_14d9.startContainer.nodeType!=3)){stype="control";}}return stype;}else{return win.doc.selection.type.toLowerCase();}},getSelectedText:function(){if(win.doc.getSelection){var _14da=win.global.getSelection();return _14da?_14da.toString():"";}else{if(dijit._editor.selection.getType()=="control"){return null;}return win.doc.selection.createRange().text;}},getSelectedHtml:function(){if(win.doc.getSelection){var _14db=win.global.getSelection();if(_14db&&_14db.rangeCount){var i;var html="";for(i=0;i<_14db.rangeCount;i++){var frag=_14db.getRangeAt(i).cloneContents();var div=win.doc.createElement("div");div.appendChild(frag);html+=div.innerHTML;}return html;}return null;}else{if(dijit._editor.selection.getType()=="control"){return null;}return win.doc.selection.createRange().htmlText;}},getSelectedElement:function(){if(dijit._editor.selection.getType()=="control"){if(win.doc.getSelection){var _14dc=win.global.getSelection();return _14dc.anchorNode.childNodes[_14dc.anchorOffset];}else{var range=win.doc.selection.createRange();if(range&&range.item){return win.doc.selection.createRange().item(0);}}}return null;},getParentElement:function(){if(dijit._editor.selection.getType()=="control"){var p=this.getSelectedElement();if(p){return p.parentNode;}}else{if(win.doc.getSelection){var _14dd=win.global.getSelection();if(_14dd){var node=_14dd.anchorNode;while(node&&(node.nodeType!=1)){node=node.parentNode;}return node;}}else{var r=win.doc.selection.createRange();r.collapse(true);return r.parentElement();}}return null;},hasAncestorElement:function(_14de){return this.getAncestorElement.apply(this,arguments)!=null;},getAncestorElement:function(_14df){var node=this.getSelectedElement()||this.getParentElement();return this.getParentOfType(node,arguments);},isTag:function(node,tags){if(node&&node.tagName){var _14e0=node.tagName.toLowerCase();for(var i=0;i<tags.length;i++){var _14e1=String(tags[i]).toLowerCase();if(_14e0==_14e1){return _14e1;}}}return "";},getParentOfType:function(node,tags){while(node){if(this.isTag(node,tags).length){return node;}node=node.parentNode;}return null;},collapse:function(_14e2){if(win.doc.getSelection){var _14e3=win.global.getSelection();if(_14e3.removeAllRanges){if(_14e2){_14e3.collapseToStart();}else{_14e3.collapseToEnd();}}else{_14e3.collapse(_14e2);}}else{var range=win.doc.selection.createRange();range.collapse(_14e2);range.select();}},remove:function(){var sel=win.doc.selection;if(win.doc.getSelection){sel=win.global.getSelection();sel.deleteFromDocument();return sel;}else{if(sel.type.toLowerCase()!="none"){sel.clear();}return sel;}},selectElementChildren:function(_14e4,_14e5){var doc=win.doc;var range;_14e4=dom.byId(_14e4);if(win.doc.getSelection){var _14e6=win.global.getSelection();if(has("opera")){if(_14e6.rangeCount){range=_14e6.getRangeAt(0);}else{range=doc.createRange();}range.setStart(_14e4,0);range.setEnd(_14e4,(_14e4.nodeType==3)?_14e4.length:_14e4.childNodes.length);_14e6.addRange(range);}else{_14e6.selectAllChildren(_14e4);}}else{range=_14e4.ownerDocument.body.createTextRange();range.moveToElementText(_14e4);if(!_14e5){try{range.select();}catch(e){}}}},selectElement:function(_14e7,_14e8){var range;_14e7=dom.byId(_14e7);var doc=_14e7.ownerDocument;var _14e9=win.global;if(doc.getSelection){var _14ea=_14e9.getSelection();range=doc.createRange();if(_14ea.removeAllRanges){if(has("opera")){if(_14ea.getRangeAt(0)){range=_14ea.getRangeAt(0);}}range.selectNode(_14e7);_14ea.removeAllRanges();_14ea.addRange(range);}}else{try{var tg=_14e7.tagName?_14e7.tagName.toLowerCase():"";if(tg==="img"||tg==="table"){range=win.body(doc).createControlRange();}else{range=win.body(doc).createRange();}range.addElement(_14e7);if(!_14e8){range.select();}}catch(e){this.selectElementChildren(_14e7,_14e8);}}},inSelection:function(node){if(node){var _14eb;var doc=win.doc;var range;if(win.doc.getSelection){var sel=win.global.getSelection();if(sel&&sel.rangeCount>0){range=sel.getRangeAt(0);}if(range&&range.compareBoundaryPoints&&doc.createRange){try{_14eb=doc.createRange();_14eb.setStart(node,0);if(range.compareBoundaryPoints(range.START_TO_END,_14eb)===1){return true;}}catch(e){}}}else{range=doc.selection.createRange();try{_14eb=node.ownerDocument.body.createControlRange();if(_14eb){_14eb.addElement(node);}}catch(e1){try{_14eb=node.ownerDocument.body.createTextRange();_14eb.moveToElementText(node);}catch(e2){}}if(range&&_14eb){if(range.compareEndPoints("EndToStart",_14eb)===1){return true;}}}}return false;}};lang.setObject("dijit._editor.selection",_14d8);return _14d8;});},"url:dojox/grid/resources/_Grid.html":"<div hidefocus=\"hidefocus\" role=\"grid\" dojoAttachEvent=\"onmouseout:_mouseOut\">\n\t<div class=\"dojoxGridMasterHeader\" dojoAttachPoint=\"viewsHeaderNode\" role=\"presentation\"></div>\n\t<div class=\"dojoxGridMasterView\" dojoAttachPoint=\"viewsNode\" role=\"presentation\"></div>\n\t<div class=\"dojoxGridMasterMessages\" style=\"display: none;\" dojoAttachPoint=\"messagesNode\"></div>\n\t<span dojoAttachPoint=\"lastFocusNode\" tabindex=\"0\"></span>\n</div>\n","dojox/gauges/_Gauge":function(){define("dojox/gauges/_Gauge",["dojo/_base/kernel","dojo/_base/declare","dojo/_base/lang","dojo/_base/html","dojo/_base/array","dojo/_base/event","dojo/_base/connect","dojo/dom-construct","dijit/_Widget","dojox/gfx","./Range","dojo/fx/easing"],function(_14ec,_14ed,lang,html,arr,event,_14ee,dom,_14ef,gfx,Range){_14ec.deprecated("dojox.gauges","Use the new extensible dojox.dgauges framework instead","2.0");var _14f0=0;var _14f1=0;return _14ed("dojox.gauges._Gauge",[_14ef],{width:0,height:0,background:null,image:null,useRangeStyles:0,useTooltip:true,majorTicks:null,minorTicks:null,_defaultIndicator:null,defaultColors:[[0,84,170,1],[68,119,187,1],[102,153,204,1],[153,187,238,1],[153,204,255,1],[204,238,255,1],[221,238,255,1]],min:null,max:null,surface:null,hideValues:false,gaugeContent:undefined,_backgroundDefault:{color:"#E0E0E0"},_rangeData:null,_indicatorData:null,_drag:null,_img:null,_overOverlay:false,_lastHover:"",startup:function(){if(this.image===null){this.image={};}this.connect(this.gaugeContent,"onmousedown",this.handleMouseDown);this.connect(this.gaugeContent,"onmousemove",this.handleMouseMove);this.connect(this.gaugeContent,"onmouseover",this.handleMouseOver);this.connect(this.gaugeContent,"onmouseout",this.handleMouseOut);this.connect(this.gaugeContent,"touchstart",this.handleTouchStart);this.connect(this.gaugeContent,"touchend",this.handleTouchEnd);this.connect(this.gaugeContent,"touchmove",this.handleTouchMove);if(!lang.isArray(this.ranges)){this.ranges=[];}if(!lang.isArray(this.indicators)){this.indicators=[];}var _14f2=[],_14f3=[];var i;if(this.hasChildren()){var _14f4=this.getChildren();for(i=0;i<_14f4.length;i++){if(/.*Indicator/.test(_14f4[i].declaredClass)){_14f3.push(_14f4[i]);continue;}switch(_14f4[i].declaredClass){case Range.prototype.declaredClass:_14f2.push(_14f4[i]);break;}}this.ranges=this.ranges.concat(_14f2);this.indicators=this.indicators.concat(_14f3);}if(!this.background){this.background=this._backgroundDefault;}this.background=this.background.color||this.background;if(!this.surface){this.createSurface();}this.addRanges(this.ranges);if(this.minorTicks&&this.minorTicks.interval){this.setMinorTicks(this.minorTicks);}if(this.majorTicks&&this.majorTicks.interval){this.setMajorTicks(this.majorTicks);}for(i=0;i<this.indicators.length;i++){this.addIndicator(this.indicators[i]);}this.inherited(arguments);},hasChildren:function(){return this.getChildren().length>0;},buildRendering:function(){var n=this.domNode=this.srcNodeRef?this.srcNodeRef:dom.create("div");this.gaugeContent=dom.create("div",{className:"dojoxGaugeContent"});this.containerNode=dom.create("div");this.mouseNode=dom.create("div");while(n.hasChildNodes()){this.containerNode.appendChild(n.firstChild);}dom.place(this.gaugeContent,n);dom.place(this.containerNode,n);dom.place(this.mouseNode,n);},_setTicks:function(_14f5,_14f6,major){var i;if(_14f5&&lang.isArray(_14f5._ticks)){for(i=0;i<_14f5._ticks.length;i++){this._removeScaleTick(_14f5._ticks[i]);}}var t={length:_14f6.length,offset:_14f6.offset,noChange:true};if(_14f6.color){t.color=_14f6.color;}if(_14f6.font){t.font=_14f6.font;}if(_14f6.labelPlacement){t.direction=_14f6.labelPlacement;}_14f6._ticks=[];for(i=this.min;i<=this.max;i+=_14f6.interval){if(i==this.max&&this._isScaleCircular()){continue;}t.value=i;if(major){var _14f7=this._getNumberModule();if(_14f7){t.label=(_14f6.fixedPrecision&&_14f6.precision)?_14f7.format(i,{places:_14f6.precision}):_14f7.format(i);}else{t.label=(_14f6.fixedPrecision&&_14f6.precision)?i.toFixed(_14f6.precision):i.toString();}}_14f6._ticks.push(this._addScaleTick(t,major));}return _14f6;},_isScaleCircular:function(){return false;},setMinorTicks:function(ticks){this.minorTicks=this._setTicks(this.minorTicks,ticks,false);},setMajorTicks:function(ticks){this.majorTicks=this._setTicks(this.majorTicks,ticks,true);},postCreate:function(){if(this.hideValues){html.style(this.containerNode,"display","none");}html.style(this.mouseNode,"width","0");html.style(this.mouseNode,"height","0");html.style(this.mouseNode,"position","absolute");html.style(this.mouseNode,"z-index","100");if(this.useTooltip){require(["dijit/Tooltip"],dojo.hitch(this,function(_14f8){_14f8.show("test",this.mouseNode,!this.isLeftToRight());_14f8.hide(this.mouseNode);}));}},_getNumberModule:function(){if(_14f1==0){try{_14f1=require("dojo/number");}catch(e){_14f1=null;}}return _14f1;},createSurface:function(){this.gaugeContent.style.width=this.width+"px";this.gaugeContent.style.height=this.height+"px";this.surface=gfx.createSurface(this.gaugeContent,this.width,this.height);this._backgroundGroup=this.surface.createGroup();this._rangeGroup=this.surface.createGroup();this._minorTicksGroup=this.surface.createGroup();this._majorTicksGroup=this.surface.createGroup();this._overlayGroup=this.surface.createGroup();this._indicatorsGroup=this.surface.createGroup();this._foregroundGroup=this.surface.createGroup();this._background=this._backgroundGroup.createRect({x:0,y:0,width:this.width,height:this.height});this._background.setFill(this.background);if(this.image.url){var _14f9=this._backgroundGroup;if(this.image.overlay){_14f9=this._overlayGroup;}this._img=_14f9.createImage({width:this.image.width||this.width,height:this.image.height||this.height,src:this.image.url});if(this.image.x||this.image.y){this._img.setTransform({dx:this.image.x||0,dy:this.image.y||0});}}},draw:function(){var i;if(!this.surface){return;}this.drawBackground(this._backgroundGroup);if(this._rangeData){for(i=0;i<this._rangeData.length;i++){this.drawRange(this._rangeGroup,this._rangeData[i]);}}if(this._minorTicksData){for(i=0;i<this._minorTicksData.length;i++){this._minorTicksData[i].draw(this._minorTicksGroup);}}if(this._majorTicksData){for(i=0;i<this._majorTicksData.length;i++){this._majorTicksData[i].draw(this._majorTicksGroup);}}if(this._indicatorData){for(i=0;i<this._indicatorData.length;i++){this._indicatorData[i].draw(this._indicatorsGroup);}}this.drawForeground(this._foregroundGroup);},drawBackground:function(group){},drawForeground:function(group){},setBackground:function(_14fa){if(!_14fa){_14fa=this._backgroundDefault;}this.background=_14fa.color||_14fa;this._background.setFill(this.background);},addRange:function(range){this.addRanges([range]);},addRanges:function(_14fb){if(!this._rangeData){this._rangeData=[];}var range;for(var i=0;i<_14fb.length;i++){range=_14fb[i];if((this.min===null)||(range.low<this.min)){this.min=range.low;}if((this.max===null)||(range.high>this.max)){this.max=range.high;}if(!range.color){var _14fc=this._rangeData.length%this.defaultColors.length;if(gfx.svg&&this.useRangeStyles>0){_14fc=(this._rangeData.length%this.useRangeStyles)+1;range.color={style:"dojoxGaugeRange"+_14fc};}else{_14fc=this._rangeData.length%this.defaultColors.length;range.color=this.defaultColors[_14fc];}}this._rangeData[this._rangeData.length]=range;}this.draw();},_addScaleTick:function(_14fd,major){if(!_14fd.declaredClass){_14fd=new this._defaultIndicator(_14fd);}_14fd._gauge=this;if(major){if(!this._majorTicksData){this._majorTicksData=[];}this._majorTicksData[this._majorTicksData.length]=_14fd;_14fd.draw(this._majorTicksGroup);}else{if(!this._minorTicksData){this._minorTicksData=[];}this._minorTicksData[this._minorTicksData.length]=_14fd;_14fd.draw(this._minorTicksGroup);}return _14fd;},_removeScaleTick:function(_14fe){var i;if(this._majorTicksData){for(i=0;i<this._majorTicksData.length;i++){if(this._majorTicksData[i]===_14fe){this._majorTicksData.splice(i,1);_14fe.remove();return;}}}if(this._minorTicksData){for(i=0;i<this._minorTicksData.length;i++){if(this._minorTicksData[i]===_14fe){this._minorTicksData.splice(i,1);_14fe.remove();return;}}}},addIndicator:function(_14ff){if(!_14ff.declaredClass){_14ff=new this._defaultIndicator(_14ff);}_14ff._gauge=this;if(!_14ff.hideValue){this.containerNode.appendChild(_14ff.domNode);}if(!this._indicatorData){this._indicatorData=[];}this._indicatorData[this._indicatorData.length]=_14ff;_14ff.draw(this._indicatorsGroup);return _14ff;},removeIndicator:function(_1500){for(var i=0;i<this._indicatorData.length;i++){if(this._indicatorData[i]===_1500){this._indicatorData.splice(i,1);_1500.remove();break;}}},moveIndicatorToFront:function(_1501){if(_1501.shape){_1501.shape.moveToFront();}},drawText:function(group,txt,x,y,align,color,font){var t=group.createText({x:x,y:y,text:txt,align:align});t.setFill(color?color:"black");if(font){t.setFont(font);}return t;},removeText:function(t){if(t.parent){t.parent.remove(t);}},updateTooltip:function(txt,e){if(this.useTooltip){require(["dijit/Tooltip"],dojo.hitch(this,function(_1502){if(this._lastHover!=txt){if(txt!==""){_1502.hide(this.mouseNode);_1502.show(txt,this.mouseNode,!this.isLeftToRight());}else{_1502.hide(this.mouseNode);}this._lastHover=txt;}}));}},handleMouseOver:function(e){if(this.image&&this.image.overlay){if(e.target==this._img.getEventSource()){var hover;this._overOverlay=true;var r=this.getRangeUnderMouse(e);if(r&&r.hover){hover=r.hover;}if(this.useTooltip&&!this._drag){if(hover){this.updateTooltip(hover,e);}else{this.updateTooltip("",e);}}}}},handleMouseOut:function(e){this._overOverlay=false;this._hideTooltip();},handleMouseMove:function(e){if(this.useTooltip){if(e){html.style(this.mouseNode,"left",e.pageX+1+"px");html.style(this.mouseNode,"top",e.pageY+1+"px");}if(this._overOverlay){var r=this.getRangeUnderMouse(e);if(r&&r.hover){this.updateTooltip(r.hover,e);}else{this.updateTooltip("",e);}}}},handleMouseDown:function(e){var _1503=this._getInteractiveIndicator();if(_1503){this._handleMouseDownIndicator(_1503,e);}},_handleDragInteractionMouseMove:function(e){if(this._drag){this._dragIndicator(this,e);event.stop(e);}},_handleDragInteractionMouseUp:function(e){this._drag=null;for(var i=0;i<this._mouseListeners.length;i++){_14ee.disconnect(this._mouseListeners[i]);}this._mouseListeners=[];event.stop(e);},_handleMouseDownIndicator:function(_1504,e){if(!_1504.noChange){if(!this._mouseListeners){this._mouseListeners=[];}this._drag=_1504;this._mouseListeners.push(_14ee.connect(document,"onmouseup",this,this._handleDragInteractionMouseUp));this._mouseListeners.push(_14ee.connect(document,"onmousemove",this,this._handleDragInteractionMouseMove));this._mouseListeners.push(_14ee.connect(document,"ondragstart",this,event.stop));this._mouseListeners.push(_14ee.connect(document,"onselectstart",this,event.stop));this._dragIndicator(this,e);event.stop(e);}},_handleMouseOverIndicator:function(_1505,e){if(this.useTooltip&&!this._drag){if(_1505.hover){require(["dijit/Tooltip"],dojo.hitch(this,function(_1506){html.style(this.mouseNode,"left",e.pageX+1+"px");html.style(this.mouseNode,"top",e.pageY+1+"px");_1506.show(_1505.hover,this.mouseNode,!this.isLeftToRight());}));}else{this.updateTooltip("",e);}}if(_1505.onDragMove&&!_1505.noChange){this.gaugeContent.style.cursor="pointer";}},_handleMouseOutIndicator:function(_1507,e){this._hideTooltip();this.gaugeContent.style.cursor="pointer";},_hideTooltip:function(){if(this.useTooltip&&this.mouseNode){require(["dijit/Tooltip"],dojo.hitch(this,function(_1508){_1508.hide(this.mouseNode);}));}},_handleMouseOutRange:function(range,e){this._hideTooltip();},_handleMouseOverRange:function(range,e){if(this.useTooltip&&!this._drag){if(range.hover){html.style(this.mouseNode,"left",e.pageX+1+"px");html.style(this.mouseNode,"top",e.pageY+1+"px");require(["dijit/Tooltip"],dojo.hitch(this,function(_1509){_1509.show(range.hover,this.mouseNode,!this.isLeftToRight());}));}else{this.updateTooltip("",e);}}},handleTouchStartIndicator:function(_150a,e){if(!_150a.noChange){this._drag=_150a;event.stop(e);}},handleTouchStart:function(e){this._drag=this._getInteractiveIndicator();this.handleTouchMove(e);},handleTouchEnd:function(e){if(this._drag){this._drag=null;event.stop(e);}},handleTouchMove:function(e){if(this._drag&&!this._drag.noChange){var _150b=e.touches;var _150c=_150b[0];this._dragIndicatorAt(this,_150c.pageX,_150c.pageY);event.stop(e);}},_getInteractiveIndicator:function(){for(var i=0;i<this._indicatorData.length;i++){var _150d=this._indicatorData[i];if(_150d.interactionMode=="gauge"&&!_150d.noChange){return _150d;}}return null;}});});},"dijit/_editor/plugins/TextColor":function(){define("dijit/_editor/plugins/TextColor",["require","dojo/colors","dojo/_base/declare","dojo/_base/lang","../_Plugin","../../form/DropDownButton"],function(_150e,_150f,_1510,lang,_1511,_1512){var _1513=_1510("dijit._editor.plugins.TextColor",_1511,{buttonClass:_1512,useDefaultCommand:false,_initButton:function(){this.inherited(arguments);var self=this;this.button.loadDropDown=function(_1514){_150e(["../../ColorPalette"],lang.hitch(this,function(_1515){this.dropDown=new _1515({ownerDocument:self.editor.ownerDocument,value:self.value,onChange:function(color){self.editor.execCommand(self.command,color);}});_1514();}));};},updateState:function(){var _1516=this.editor;var _1517=this.command;if(!_1516||!_1516.isLoaded||!_1517.length){return;}if(this.button){var _1518=this.get("disabled");this.button.set("disabled",_1518);if(_1518){return;}var value;try{value=_1516.queryCommandValue(_1517)||"";}catch(e){value="";}}if(value==""){value="#000000";}if(value=="transparent"){value="#ffffff";}if(typeof value=="string"){if(value.indexOf("rgb")>-1){value=_150f.fromRgb(value).toHex();}}else{value=((value&255)<<16)|(value&65280)|((value&16711680)>>>16);value=value.toString(16);value="#000000".slice(0,7-value.length)+value;}this.value=value;var _1519=this.button.dropDown;if(_1519&&value!==_1519.get("value")){_1519.set("value",value,false);}}});_1511.registry["foreColor"]=function(){return new _1513({command:"foreColor"});};_1511.registry["hiliteColor"]=function(){return new _1513({command:"hiliteColor"});};return _1513;});},"dojox/charting/plot2d/StackedColumns":function(){define("dojox/charting/plot2d/StackedColumns",["dojo/_base/declare","./Columns","./commonStacked"],function(_151a,_151b,_151c){return _151a("dojox.charting.plot2d.StackedColumns",_151b,{getSeriesStats:function(){var stats=_151c.collectStats(this.series);this._maxRunLength=stats.hmax;stats.hmin-=0.5;stats.hmax+=0.5;return stats;},getDataLength:function(run){return this._maxRunLength;},getValue:function(value,index,_151d,_151e){var y,x;if(_151e){x=index;y=_151c.getIndexValue(this.series,_151d,x);}else{x=value.x-1;y=_151c.getValue(this.series,_151d,value.x);y=y?y.y:null;}return {y:y,x:x};}});});},"dijit/form/NumberTextBox":function(){define("dijit/form/NumberTextBox",["dojo/_base/declare","dojo/_base/lang","dojo/number","./RangeBoundTextBox"],function(_151f,lang,_1520,_1521){var _1522=_151f("dijit.form.NumberTextBoxMixin",null,{pattern:_1520.regexp,value:NaN,editOptions:{pattern:"#.######"},_formatter:_1520.format,postMixInProperties:function(){this.inherited(arguments);this._set("type","text");},_setConstraintsAttr:function(_1523){var _1524=typeof _1523.places=="number"?_1523.places:0;if(_1524){_1524++;}if(typeof _1523.max!="number"){_1523.max=9*Math.pow(10,15-_1524);}if(typeof _1523.min!="number"){_1523.min=-9*Math.pow(10,15-_1524);}this.inherited(arguments,[_1523]);if(this.focusNode&&this.focusNode.value&&!isNaN(this.value)){this.set("value",this.value);}},_onFocus:function(){if(this.disabled){return;}var val=this.get("value");if(typeof val=="number"&&!isNaN(val)){var _1525=this.format(val,this.constraints);if(_1525!==undefined){this.textbox.value=_1525;}}this.inherited(arguments);},format:function(value,_1526){var _1527=String(value);if(typeof value!="number"){return _1527;}if(isNaN(value)){return "";}if(!("rangeCheck" in this&&this.rangeCheck(value,_1526))&&_1526.exponent!==false&&/\de[-+]?\d/i.test(_1527)){return _1527;}if(this.editOptions&&this.focused){_1526=lang.mixin({},_1526,this.editOptions);}return this._formatter(value,_1526);},_parser:_1520.parse,parse:function(value,_1528){var v=this._parser(value,lang.mixin({},_1528,(this.editOptions&&this.focused)?this.editOptions:{}));if(this.editOptions&&this.focused&&isNaN(v)){v=this._parser(value,_1528);}return v;},_getDisplayedValueAttr:function(){var v=this.inherited(arguments);return isNaN(v)?this.textbox.value:v;},filter:function(value){return (value==null||value==="")?NaN:this.inherited(arguments);},serialize:function(value,_1529){return (typeof value!="number"||isNaN(value))?"":this.inherited(arguments);},_setBlurValue:function(){var val=lang.hitch(lang.mixin({},this,{focused:true}),"get")("value");this._setValueAttr(val,true);},_setValueAttr:function(value,_152a,_152b){if(value!==undefined&&_152b===undefined){_152b=String(value);if(typeof value=="number"){if(isNaN(value)){_152b="";}else{if(("rangeCheck" in this&&this.rangeCheck(value,this.constraints))||this.constraints.exponent===false||!/\de[-+]?\d/i.test(_152b)){_152b=undefined;}}}else{if(!value){_152b="";value=NaN;}else{value=undefined;}}}this.inherited(arguments,[value,_152a,_152b]);},_getValueAttr:function(){var v=this.inherited(arguments);if(isNaN(v)&&this.textbox.value!==""){if(this.constraints.exponent!==false&&/\de[-+]?\d/i.test(this.textbox.value)&&(new RegExp("^"+_1520._realNumberRegexp(lang.mixin({},this.constraints))+"$").test(this.textbox.value))){var n=Number(this.textbox.value);return isNaN(n)?undefined:n;}else{return undefined;}}else{return v;}},isValid:function(_152c){if(!this.focused||this._isEmpty(this.textbox.value)){return this.inherited(arguments);}else{var v=this.get("value");if(!isNaN(v)&&this.rangeCheck(v,this.constraints)){if(this.constraints.exponent!==false&&/\de[-+]?\d/i.test(this.textbox.value)){return true;}else{return this.inherited(arguments);}}else{return false;}}}});var _152d=_151f("dijit.form.NumberTextBox",[_1521,_1522],{baseClass:"dijitTextBox dijitNumberTextBox"});_152d.Mixin=_1522;return _152d;});},"dijit/form/_ComboBoxMenuMixin":function(){define("dijit/form/_ComboBoxMenuMixin",["dojo/_base/array","dojo/_base/declare","dojo/dom-attr","dojo/i18n","dojo/i18n!./nls/ComboBox"],function(array,_152e,_152f,i18n){return _152e("dijit.form._ComboBoxMenuMixin",null,{_messages:null,postMixInProperties:function(){this.inherited(arguments);this._messages=i18n.getLocalization("dijit.form","ComboBox",this.lang);},buildRendering:function(){this.inherited(arguments);this.previousButton.innerHTML=this._messages["previousMessage"];this.nextButton.innerHTML=this._messages["nextMessage"];},_setValueAttr:function(value){this.value=value;this.onChange(value);},onClick:function(node){if(node==this.previousButton){this._setSelectedAttr(null);this.onPage(-1);}else{if(node==this.nextButton){this._setSelectedAttr(null);this.onPage(1);}else{this.onChange(node);}}},onChange:function(){},onPage:function(){},onClose:function(){this._setSelectedAttr(null);},_createOption:function(item,_1530){var _1531=this._createMenuItem();var _1532=_1530(item);if(_1532.html){_1531.innerHTML=_1532.label;}else{_1531.appendChild(_1531.ownerDocument.createTextNode(_1532.label));}if(_1531.innerHTML==""){_1531.innerHTML="&#160;";}this.applyTextDir(_1531,(_1531.innerText||_1531.textContent||""));return _1531;},createOptions:function(_1533,_1534,_1535){this.items=_1533;this.previousButton.style.display=(_1534.start==0)?"none":"";_152f.set(this.previousButton,"id",this.id+"_prev");array.forEach(_1533,function(item,i){var _1536=this._createOption(item,_1535);_1536.setAttribute("item",i);_152f.set(_1536,"id",this.id+i);this.nextButton.parentNode.insertBefore(_1536,this.nextButton);},this);var _1537=false;if(_1533.total&&!_1533.total.then&&_1533.total!=-1){if((_1534.start+_1534.count)<_1533.total){_1537=true;}else{if((_1534.start+_1534.count)>_1533.total&&_1534.count==_1533.length){_1537=true;}}}else{if(_1534.count==_1533.length){_1537=true;}}this.nextButton.style.display=_1537?"":"none";_152f.set(this.nextButton,"id",this.id+"_next");},clearResultList:function(){var _1538=this.containerNode;while(_1538.childNodes.length>2){_1538.removeChild(_1538.childNodes[_1538.childNodes.length-2]);}this._setSelectedAttr(null);},highlightFirstOption:function(){this.selectFirstNode();},highlightLastOption:function(){this.selectLastNode();},selectFirstNode:function(){this.inherited(arguments);if(this.getHighlightedOption()==this.previousButton){this.selectNextNode();}},selectLastNode:function(){this.inherited(arguments);if(this.getHighlightedOption()==this.nextButton){this.selectPreviousNode();}},getHighlightedOption:function(){return this.selected;}});});},"dojox/charting/plot2d/Stacked":function(){define("dojox/charting/plot2d/Stacked",["dojo/_base/declare","./Default","./commonStacked"],function(_1539,_153a,_153b){return _1539("dojox.charting.plot2d.Stacked",_153a,{getSeriesStats:function(){var stats=_153b.collectStats(this.series);this._maxRunLength=stats.hmax;return stats;},buildSegments:function(i,_153c){var run=this.series[i],max=_153c?Math.min(run.data.length-1,Math.ceil(this._hScaler.bounds.to-this._hScaler.bounds.from)):run.data.length-1,rseg=null,_153d=[];for(var j=0;j<=max;j++){var value=_153c?_153b.getIndexValue(this.series,i,j):_153b.getValue(this.series,i,run.data[j]?run.data[j].x:null);if(value!=null&&(_153c||value.y!=null)){if(!rseg){rseg=[];_153d.push({index:j,rseg:rseg});}rseg.push(value);}else{if(!this.opt.interpolate||_153c){rseg=null;}}}return _153d;}});});},"dijit/CalendarLite":function(){require({cache:{"url:dijit/templates/Calendar.html":"<table cellspacing=\"0\" cellpadding=\"0\" class=\"dijitCalendarContainer\" role=\"grid\" aria-labelledby=\"${id}_mddb ${id}_year\">\n\t<thead>\n\t\t<tr class=\"dijitReset dijitCalendarMonthContainer\" valign=\"top\">\n\t\t\t<th class='dijitReset dijitCalendarArrow' data-dojo-attach-point=\"decrementMonth\">\n\t\t\t\t<img src=\"${_blankGif}\" alt=\"\" class=\"dijitCalendarIncrementControl dijitCalendarDecrease\" role=\"presentation\"/>\n\t\t\t\t<span data-dojo-attach-point=\"decreaseArrowNode\" class=\"dijitA11ySideArrow\">-</span>\n\t\t\t</th>\n\t\t\t<th class='dijitReset' colspan=\"5\">\n\t\t\t\t<div data-dojo-attach-point=\"monthNode\">\n\t\t\t\t</div>\n\t\t\t</th>\n\t\t\t<th class='dijitReset dijitCalendarArrow' data-dojo-attach-point=\"incrementMonth\">\n\t\t\t\t<img src=\"${_blankGif}\" alt=\"\" class=\"dijitCalendarIncrementControl dijitCalendarIncrease\" role=\"presentation\"/>\n\t\t\t\t<span data-dojo-attach-point=\"increaseArrowNode\" class=\"dijitA11ySideArrow\">+</span>\n\t\t\t</th>\n\t\t</tr>\n\t\t<tr role=\"row\">\n\t\t\t${!dayCellsHtml}\n\t\t</tr>\n\t</thead>\n\t<tbody data-dojo-attach-point=\"dateRowsNode\" data-dojo-attach-event=\"onclick: _onDayClick\" class=\"dijitReset dijitCalendarBodyContainer\">\n\t\t\t${!dateRowsHtml}\n\t</tbody>\n\t<tfoot class=\"dijitReset dijitCalendarYearContainer\">\n\t\t<tr>\n\t\t\t<td class='dijitReset' valign=\"top\" colspan=\"7\" role=\"presentation\">\n\t\t\t\t<div class=\"dijitCalendarYearLabel\">\n\t\t\t\t\t<span data-dojo-attach-point=\"previousYearLabelNode\" class=\"dijitInline dijitCalendarPreviousYear\" role=\"button\"></span>\n\t\t\t\t\t<span data-dojo-attach-point=\"currentYearLabelNode\" class=\"dijitInline dijitCalendarSelectedYear\" role=\"button\" id=\"${id}_year\"></span>\n\t\t\t\t\t<span data-dojo-attach-point=\"nextYearLabelNode\" class=\"dijitInline dijitCalendarNextYear\" role=\"button\"></span>\n\t\t\t\t</div>\n\t\t\t</td>\n\t\t</tr>\n\t</tfoot>\n</table>\n"}});define("dijit/CalendarLite",["dojo/_base/array","dojo/_base/declare","dojo/cldr/supplemental","dojo/date","dojo/date/locale","dojo/date/stamp","dojo/dom","dojo/dom-class","dojo/_base/event","dojo/_base/lang","dojo/sniff","dojo/string","./_WidgetBase","./_TemplatedMixin","dojo/text!./templates/Calendar.html","./hccss"],function(array,_153e,_153f,date,_1540,stamp,dom,_1541,event,lang,has,_1542,_1543,_1544,_1545){var _1546=_153e("dijit.CalendarLite",[_1543,_1544],{templateString:_1545,dowTemplateString:"<th class=\"dijitReset dijitCalendarDayLabelTemplate\" role=\"columnheader\"><span class=\"dijitCalendarDayLabel\">${d}</span></th>",dateTemplateString:"<td class=\"dijitReset\" role=\"gridcell\" data-dojo-attach-point=\"dateCells\"><span class=\"dijitCalendarDateLabel\" data-dojo-attach-point=\"dateLabels\"></span></td>",weekTemplateString:"<tr class=\"dijitReset dijitCalendarWeekTemplate\" role=\"row\">${d}${d}${d}${d}${d}${d}${d}</tr>",value:new Date(""),datePackage:"",dayWidth:"narrow",tabIndex:"0",currentFocus:new Date(),baseClass:"dijitCalendar",_isValidDate:function(value){return value&&!isNaN(value)&&typeof value=="object"&&value.toString()!=this.constructor.prototype.value.toString();},_getValueAttr:function(){if(this.value&&!isNaN(this.value)){var value=new this.dateClassObj(this.value);value.setHours(0,0,0,0);if(value.getDate()<this.value.getDate()){value=this.dateModule.add(value,"hour",1);}return value;}else{return null;}},_setValueAttr:function(value,_1547){if(typeof value=="string"){value=stamp.fromISOString(value);}value=this._patchDate(value);if(this._isValidDate(value)&&!this.isDisabledDate(value,this.lang)){this._set("value",value);this.set("currentFocus",value);this._markSelectedDates([value]);if(this._created&&(_1547||typeof _1547=="undefined")){this.onChange(this.get("value"));}}else{this._set("value",null);this._markSelectedDates([]);}},_patchDate:function(value){if(value){value=new this.dateClassObj(value);value.setHours(1,0,0,0);}return value;},_setText:function(node,text){while(node.firstChild){node.removeChild(node.firstChild);}node.appendChild(node.ownerDocument.createTextNode(text));},_populateGrid:function(){var month=new this.dateClassObj(this.currentFocus);month.setDate(1);var _1548=month.getDay(),_1549=this.dateModule.getDaysInMonth(month),_154a=this.dateModule.getDaysInMonth(this.dateModule.add(month,"month",-1)),today=new this.dateClassObj(),_154b=_153f.getFirstDayOfWeek(this.lang);if(_154b>_1548){_154b-=7;}this._date2cell={};array.forEach(this.dateCells,function(_154c,idx){var i=idx+_154b;var date=new this.dateClassObj(month),_154d,clazz="dijitCalendar",adj=0;if(i<_1548){_154d=_154a-_1548+i+1;adj=-1;clazz+="Previous";}else{if(i>=(_1548+_1549)){_154d=i-_1548-_1549+1;adj=1;clazz+="Next";}else{_154d=i-_1548+1;clazz+="Current";}}if(adj){date=this.dateModule.add(date,"month",adj);}date.setDate(_154d);if(!this.dateModule.compare(date,today,"date")){clazz="dijitCalendarCurrentDate "+clazz;}if(this.isDisabledDate(date,this.lang)){clazz="dijitCalendarDisabledDate "+clazz;_154c.setAttribute("aria-disabled","true");}else{clazz="dijitCalendarEnabledDate "+clazz;_154c.removeAttribute("aria-disabled");_154c.setAttribute("aria-selected","false");}var _154e=this.getClassForDate(date,this.lang);if(_154e){clazz=_154e+" "+clazz;}_154c.className=clazz+"Month dijitCalendarDateTemplate";var _154f=date.valueOf();this._date2cell[_154f]=_154c;_154c.dijitDateValue=_154f;this._setText(this.dateLabels[idx],date.getDateLocalized?date.getDateLocalized(this.lang):date.getDate());},this);},_populateControls:function(){var month=new this.dateClassObj(this.currentFocus);month.setDate(1);this.monthWidget.set("month",month);var y=month.getFullYear()-1;var d=new this.dateClassObj();array.forEach(["previous","current","next"],function(name){d.setFullYear(y++);this._setText(this[name+"YearLabelNode"],this.dateLocaleModule.format(d,{selector:"year",locale:this.lang}));},this);},goToToday:function(){this.set("value",new this.dateClassObj());},constructor:function(_1550){this.dateModule=_1550.datePackage?lang.getObject(_1550.datePackage,false):date;this.dateClassObj=this.dateModule.Date||Date;this.dateLocaleModule=_1550.datePackage?lang.getObject(_1550.datePackage+".locale",false):_1540;},_createMonthWidget:function(){return _1546._MonthWidget({id:this.id+"_mw",lang:this.lang,dateLocaleModule:this.dateLocaleModule},this.monthNode);},buildRendering:function(){var d=this.dowTemplateString,_1551=this.dateLocaleModule.getNames("days",this.dayWidth,"standAlone",this.lang),_1552=_153f.getFirstDayOfWeek(this.lang);this.dayCellsHtml=_1542.substitute([d,d,d,d,d,d,d].join(""),{d:""},function(){return _1551[_1552++%7];});var r=_1542.substitute(this.weekTemplateString,{d:this.dateTemplateString});this.dateRowsHtml=[r,r,r,r,r,r].join("");this.dateCells=[];this.dateLabels=[];this.inherited(arguments);dom.setSelectable(this.domNode,false);var _1553=new this.dateClassObj(this.currentFocus);this.monthWidget=this._createMonthWidget();this.set("currentFocus",_1553,false);},postCreate:function(){this.inherited(arguments);this._connectControls();},_connectControls:function(){var _1554=lang.hitch(this,function(_1555,part,_1556){this.connect(this[_1555],"onclick",function(){this._setCurrentFocusAttr(this.dateModule.add(this.currentFocus,part,_1556));});});_1554("incrementMonth","month",1);_1554("decrementMonth","month",-1);_1554("nextYearLabelNode","year",1);_1554("previousYearLabelNode","year",-1);},_setCurrentFocusAttr:function(date,_1557){var _1558=this.currentFocus,_1559=this._getNodeByDate(_1558);date=this._patchDate(date);this._set("currentFocus",date);if(!this._date2cell||this.dateModule.difference(_1558,date,"month")!=0){this._populateGrid();this._populateControls();this._markSelectedDates([this.value]);}var _155a=this._getNodeByDate(date);_155a.setAttribute("tabIndex",this.tabIndex);if(this.focused||_1557){_155a.focus();}if(_1559&&_1559!=_155a){if(has("webkit")){_1559.setAttribute("tabIndex","-1");}else{_1559.removeAttribute("tabIndex");}}},focus:function(){this._setCurrentFocusAttr(this.currentFocus,true);},_onDayClick:function(evt){event.stop(evt);for(var node=evt.target;node&&!node.dijitDateValue;node=node.parentNode){}if(node&&!_1541.contains(node,"dijitCalendarDisabledDate")){this.set("value",node.dijitDateValue);}},_getNodeByDate:function(value){value=this._patchDate(value);return value&&this._date2cell?this._date2cell[value.valueOf()]:null;},_markSelectedDates:function(dates){function mark(_155b,cell){_1541.toggle(cell,"dijitCalendarSelectedDate",_155b);cell.setAttribute("aria-selected",_155b?"true":"false");};array.forEach(this._selectedCells||[],lang.partial(mark,false));this._selectedCells=array.filter(array.map(dates,this._getNodeByDate,this),function(n){return n;});array.forEach(this._selectedCells,lang.partial(mark,true));},onChange:function(){},isDisabledDate:function(){},getClassForDate:function(){}});_1546._MonthWidget=_153e("dijit.CalendarLite._MonthWidget",_1543,{_setMonthAttr:function(month){var _155c=this.dateLocaleModule.getNames("months","wide","standAlone",this.lang,month),_155d=(has("ie")==6?"":"<div class='dijitSpacer'>"+array.map(_155c,function(s){return "<div>"+s+"</div>";}).join("")+"</div>");this.domNode.innerHTML=_155d+"<div class='dijitCalendarMonthLabel dijitCalendarCurrentMonthLabel'>"+_155c[month.getMonth()]+"</div>";}});return _1546;});},"dojox/lang/functional/object":function(){define("dojox/lang/functional/object",["dojo/_base/kernel","dojo/_base/lang","./lambda"],function(_155e,lang,df){var empty={};lang.mixin(df,{keys:function(obj){var t=[];for(var i in obj){if(!(i in empty)){t.push(i);}}return t;},values:function(obj){var t=[];for(var i in obj){if(!(i in empty)){t.push(obj[i]);}}return t;},filterIn:function(obj,f,o){o=o||_155e.global;f=df.lambda(f);var t={},v,i;for(i in obj){if(!(i in empty)){v=obj[i];if(f.call(o,v,i,obj)){t[i]=v;}}}return t;},forIn:function(obj,f,o){o=o||_155e.global;f=df.lambda(f);for(var i in obj){if(!(i in empty)){f.call(o,obj[i],i,obj);}}return o;},mapIn:function(obj,f,o){o=o||_155e.global;f=df.lambda(f);var t={},i;for(i in obj){if(!(i in empty)){t[i]=f.call(o,obj[i],i,obj);}}return t;}});return df;});},"esri/dijit/editing/tools/AdvancedTools":function(){define(["dijit","dojo","dojox","dojo/require!esri/dijit/editing/tools/ToggleToolBase,esri/dijit/editing/tools/ButtonToolBase"],function(dijit,dojo,dojox){dojo.require("esri.dijit.editing.tools.ToggleToolBase");dojo.require("esri.dijit.editing.tools.ButtonToolBase");dojo.provide("esri.dijit.editing.tools.AdvancedTools");dojo.declare("esri.dijit.editing.tools.Cut",[esri.dijit.editing.tools.ToggleToolBase],{id:"btnFeatureCut",_enabledIcon:"toolbarIcon cutIcon",_disabledIcon:"toolbarIcon cutIcon",_drawType:esri.toolbars.Draw.POLYLINE,_enabled:true,_label:"NLS_cutLbl",_cutConnects:[],activate:function(){this._cutConnects.push(dojo.connect(this._toolbar,"onDrawEnd",this,"_onDrawEnd"));this.inherited(arguments);},deactivate:function(){this.inherited(arguments);dojo.forEach(this._cutConnects,"dojo.disconnect(item);");this._cutConnects=[];this._edits=[];},_onDrawEnd:function(_155f){var _1560=this._settings.layers;var _1561=this._cutLayers=dojo.filter(_1560,function(layer){return ((layer.geometryType==="esriGeometryPolygon")||(layer.geometryType==="esriGeometryPolyline")&&layer.visible&&layer._isMapAtVisibleScale());});this._cutConnects=this._cutConnects.concat(dojo.map(_1561,dojo.hitch(this,function(layer){return dojo.connect(layer,"onEditsComplete",dojo.hitch(this,function(adds,_1562,_1563){if(this._settings.undoRedoManager){var _1564=this._settings.undoRedoManager;dojo.forEach(this._edits,dojo.hitch(this,function(edit){_1564.add(new esri.dijit.editing.Cut({featureLayer:edit.layer,addedGraphics:edit.adds,preUpdatedGraphics:edit.preUpdates,postUpdatedGraphics:edit.updates}));}),this);}this.onFinished();}));})));var query=new esri.tasks.Query();query.geometry=_155f;dojo.forEach(_1561,function(layer,idx){this._settings.editor._selectionHelper.selectFeatures([layer],query,esri.layers.FeatureLayer.SELECTION_NEW,dojo.hitch(this,"_cutFeatures",layer,query));},this);},_cutFeatures:function(layer,query,_1565){if(!_1565||!_1565.length){return;}this._edits=[];var _1566=[];_1566.push(this._settings.geometryService.cut(esri.getGeometries(_1565),query.geometry,dojo.hitch(this,"_cutHandler",layer,_1565)));var _1567=new dojo.DeferredList(_1566).addCallback(dojo.hitch(this,function(){this.onApplyEdits(this._edits);}));},_cutHandler:function(layer,_1568,_1569){var _156a=[];var _156b=[];var _156c=dojo.map(_1568,"return new esri.Graphic(dojo.clone(item.toJson()))");var _156d;var _156e;dojo.forEach(_1569.cutIndexes,function(_156f,i){if(_156d!=_156f){_156d=_156f;_156b.push(_1568[_156f].setGeometry(_1569.geometries[i]));}else{_156e=new esri.Graphic(_1569.geometries[i],null,dojo.mixin({},_1568[_156f].attributes),null);_156e.attributes[_1568[0].getLayer().objectIdField]=null;_156a.push(_156e);}},this);this._edits.push({layer:layer,adds:_156a,updates:_156b,preUpdates:_156c});}});dojo.declare("esri.dijit.editing.tools.Reshape",[esri.dijit.editing.tools.ToggleToolBase],{id:"btnFeatureReshape",_enabledIcon:"toolbarIcon reshapeIcon",_disabledIcon:"toolbarIcon reshapeIcon",_drawType:esri.toolbars.Draw.POLYLINE,_enabled:true,_label:"NLS_reshapeLbl",activate:function(){dojo.disconnect(this._rConnect);this._rConnect=dojo.connect(this._toolbar,"onDrawEnd",this,"_onDrawEnd");this.inherited(arguments);},deactivate:function(){this.inherited(arguments);dojo.disconnect(this._rConnect);delete this._rConnect;},_onDrawEnd:function(_1570){var _1571=this._settings.layers;var query=new esri.tasks.Query();query.geometry=_1570;var _1572=this._reshapeLayers=dojo.filter(_1571,function(layer){return (layer.geometryType==="esriGeometryPolygon"||"esriGeometryPolyline");});this._settings.editor._selectionHelper.selectFeatures(_1572,query,esri.layers.FeatureLayer.SELECTION_NEW,dojo.hitch(this,"_reshape",query));},_reshape:function(query,_1573){var edits=[];var _1574=_1573;if(_1574.length!==1){return;}this._settings.geometryService.reshape(_1574[0].geometry,query.geometry,dojo.hitch(this,function(_1575){var _1576=[_1574[0].setGeometry(_1575)];this.onApplyEdits([{layer:_1574[0].getLayer(),updates:_1576}],dojo.hitch(this,function(){this._settings.editor._selectionHelper.clearSelection(false);this.onFinished();}));}));}});dojo.declare("esri.dijit.editing.tools.Union",[esri.dijit.editing.tools.ButtonToolBase],{id:"btnFeatureUnion",_enabledIcon:"toolbarIcon unionIcon",_disabledIcon:"toolbarIcon unionIcon",_drawType:esri.toolbars.Draw.POLYLINE,_enabled:true,_label:"NLS_unionLbl",_onClick:function(evt){this._settings.editor._activeTool="UNION";var _1577=this._settings.layers;var _1578=dojo.filter(_1577,"return (item.geometryType === 'esriGeometryPolygon') && (item.visible && item._isMapAtVisibleScale());");var edits=[];var count=0;dojo.forEach(_1578,function(layer,idx){var _1579=layer.getSelectedFeatures();if(_1579.length>=2){count++;var _157a=dojo.map(_1579,"return new esri.Graphic(dojo.clone(item.toJson()))");this._settings.geometryService.union(esri.getGeometries(_1579),dojo.hitch(this,function(_157b){var _157c=[_1579.pop().setGeometry(_157b)];edits.push({layer:layer,updates:_157c,deletes:_1579,preUpdates:_157a});count--;if(count<=0){this.onApplyEdits(edits,dojo.hitch(this,function(){if(this._settings.undoRedoManager){var _157d=this._settings.undoRedoManager;dojo.forEach(this._edits,dojo.hitch(this,function(edit){_157d.add(new esri.dijit.editing.Union({featureLayer:edit.layer,addedGraphics:edit.deletes,preUpdatedGraphics:edit.preUpdates,postUpdatedGraphics:edit.updates}));}),this);}this._settings.editor._selectionHelper.clearSelection(false);this.onFinished();}));}}));}},this);}});});},"dojox/charting/plot2d/Lines":function(){define("dojox/charting/plot2d/Lines",["dojo/_base/declare","./Default"],function(_157e,_157f){return _157e("dojox.charting.plot2d.Lines",_157f,{constructor:function(){this.opt.lines=true;}});});},"dijit/Toolbar":function(){define("dijit/Toolbar",["require","dojo/_base/declare","dojo/has","dojo/keys","dojo/ready","./_Widget","./_KeyNavContainer","./_TemplatedMixin"],function(_1580,_1581,has,keys,ready,_1582,_1583,_1584){if(has("dijit-legacy-requires")){ready(0,function(){var _1585=["dijit/ToolbarSeparator"];_1580(_1585);});}return _1581("dijit.Toolbar",[_1582,_1584,_1583],{templateString:"<div class=\"dijit\" role=\"toolbar\" tabIndex=\"${tabIndex}\" data-dojo-attach-point=\"containerNode\">"+"</div>",baseClass:"dijitToolbar",postCreate:function(){this.inherited(arguments);this.connectKeyNavHandlers(this.isLeftToRight()?[keys.LEFT_ARROW]:[keys.RIGHT_ARROW],this.isLeftToRight()?[keys.RIGHT_ARROW]:[keys.LEFT_ARROW]);}});});},"dojox/charting/SimpleTheme":function(){define("dojox/charting/SimpleTheme",["dojo/_base/lang","dojo/_base/array","dojo/_base/declare","dojo/_base/Color","dojox/lang/utils","dojox/gfx/gradutils"],function(lang,arr,_1586,Color,dlu,dgg){var _1587=_1586("dojox.charting.SimpleTheme",null,{shapeSpaces:{shape:1,shapeX:1,shapeY:1},constructor:function(_1588){_1588=_1588||{};var def=_1587.defaultTheme;arr.forEach(["chart","plotarea","axis","grid","series","marker","indicator"],function(name){this[name]=lang.delegate(def[name],_1588[name]);},this);if(_1588.seriesThemes&&_1588.seriesThemes.length){this.colors=null;this.seriesThemes=_1588.seriesThemes.slice(0);}else{this.seriesThemes=null;this.colors=(_1588.colors||_1587.defaultColors).slice(0);}this.markerThemes=null;if(_1588.markerThemes&&_1588.markerThemes.length){this.markerThemes=_1588.markerThemes.slice(0);}this.markers=_1588.markers?lang.clone(_1588.markers):lang.delegate(_1587.defaultMarkers);this.noGradConv=_1588.noGradConv;this.noRadialConv=_1588.noRadialConv;if(_1588.reverseFills){this.reverseFills();}this._current=0;this._buildMarkerArray();},clone:function(){var theme=new this.constructor({chart:this.chart,plotarea:this.plotarea,axis:this.axis,grid:this.grid,series:this.series,marker:this.marker,colors:this.colors,markers:this.markers,indicator:this.indicator,seriesThemes:this.seriesThemes,markerThemes:this.markerThemes,noGradConv:this.noGradConv,noRadialConv:this.noRadialConv});arr.forEach(["clone","clear","next","skip","addMixin","post","getTick"],function(name){if(this.hasOwnProperty(name)){theme[name]=this[name];}},this);return theme;},clear:function(){this._current=0;},next:function(_1589,mixin,_158a){var merge=dlu.merge,_158b,_158c;if(this.colors){_158b=lang.delegate(this.series);_158c=lang.delegate(this.marker);var color=new Color(this.colors[this._current%this.colors.length]),old;if(_158b.stroke&&_158b.stroke.color){_158b.stroke=lang.delegate(_158b.stroke);old=new Color(_158b.stroke.color);_158b.stroke.color=new Color(color);_158b.stroke.color.a=old.a;}else{_158b.stroke={color:color};}if(_158c.stroke&&_158c.stroke.color){_158c.stroke=lang.delegate(_158c.stroke);old=new Color(_158c.stroke.color);_158c.stroke.color=new Color(color);_158c.stroke.color.a=old.a;}else{_158c.stroke={color:color};}if(!_158b.fill||_158b.fill.type){_158b.fill=color;}else{old=new Color(_158b.fill);_158b.fill=new Color(color);_158b.fill.a=old.a;}if(!_158c.fill||_158c.fill.type){_158c.fill=color;}else{old=new Color(_158c.fill);_158c.fill=new Color(color);_158c.fill.a=old.a;}}else{_158b=this.seriesThemes?merge(this.series,this.seriesThemes[this._current%this.seriesThemes.length]):this.series;_158c=this.markerThemes?merge(this.marker,this.markerThemes[this._current%this.markerThemes.length]):_158b;}var _158d=_158c&&_158c.symbol||this._markers[this._current%this._markers.length];var theme={series:_158b,marker:_158c,symbol:_158d};++this._current;if(mixin){theme=this.addMixin(theme,_1589,mixin);}if(_158a){theme=this.post(theme,_1589);}return theme;},skip:function(){++this._current;},addMixin:function(theme,_158e,mixin,_158f){if(lang.isArray(mixin)){arr.forEach(mixin,function(m){theme=this.addMixin(theme,_158e,m);},this);}else{var t={};if("color" in mixin){if(_158e=="line"||_158e=="area"){lang.setObject("series.stroke.color",mixin.color,t);lang.setObject("marker.stroke.color",mixin.color,t);}else{lang.setObject("series.fill",mixin.color,t);}}arr.forEach(["stroke","outline","shadow","fill","font","fontColor","labelWiring"],function(name){var _1590="marker"+name.charAt(0).toUpperCase()+name.substr(1),b=_1590 in mixin;if(name in mixin){lang.setObject("series."+name,mixin[name],t);if(!b){lang.setObject("marker."+name,mixin[name],t);}}if(b){lang.setObject("marker."+name,mixin[_1590],t);}});if("marker" in mixin){t.symbol=mixin.marker;t.symbol=mixin.marker;}theme=dlu.merge(theme,t);}if(_158f){theme=this.post(theme,_158e);}return theme;},post:function(theme,_1591){var fill=theme.series.fill,t;if(!this.noGradConv&&this.shapeSpaces[fill.space]&&fill.type=="linear"){if(_1591=="bar"){t={x1:fill.y1,y1:fill.x1,x2:fill.y2,y2:fill.x2};}else{if(!this.noRadialConv&&fill.space=="shape"&&(_1591=="slice"||_1591=="circle")){t={type:"radial",cx:0,cy:0,r:100};}}if(t){return dlu.merge(theme,{series:{fill:t}});}}return theme;},getTick:function(name,mixin){var tick=this.axis.tick,_1592=name+"Tick",merge=dlu.merge;if(tick){if(this.axis[_1592]){tick=merge(tick,this.axis[_1592]);}}else{tick=this.axis[_1592];}if(mixin){if(tick){if(mixin[_1592]){tick=merge(tick,mixin[_1592]);}}else{tick=mixin[_1592];}}return tick;},inspectObjects:function(f){arr.forEach(["chart","plotarea","axis","grid","series","marker","indicator"],function(name){f(this[name]);},this);if(this.seriesThemes){arr.forEach(this.seriesThemes,f);}if(this.markerThemes){arr.forEach(this.markerThemes,f);}},reverseFills:function(){this.inspectObjects(function(o){if(o&&o.fill){o.fill=dgg.reverse(o.fill);}});},addMarker:function(name,_1593){this.markers[name]=_1593;this._buildMarkerArray();},setMarkers:function(obj){this.markers=obj;this._buildMarkerArray();},_buildMarkerArray:function(){this._markers=[];for(var p in this.markers){this._markers.push(this.markers[p]);}}});lang.mixin(_1587,{defaultMarkers:{CIRCLE:"m-3,0 c0,-4 6,-4 6,0 m-6,0 c0,4 6,4 6,0",SQUARE:"m-3,-3 l0,6 6,0 0,-6 z",DIAMOND:"m0,-3 l3,3 -3,3 -3,-3 z",CROSS:"m0,-3 l0,6 m-3,-3 l6,0",X:"m-3,-3 l6,6 m0,-6 l-6,6",TRIANGLE:"m-3,3 l3,-6 3,6 z",TRIANGLE_INVERTED:"m-3,-3 l3,6 3,-6 z"},defaultColors:["#54544c","#858e94","#6e767a","#948585","#474747"],defaultTheme:{chart:{stroke:null,fill:"white",pageStyle:null,titleGap:20,titlePos:"top",titleFont:"normal normal bold 14pt Tahoma",titleFontColor:"#333"},plotarea:{stroke:null,fill:"white"},axis:{stroke:{color:"#333",width:1},tick:{color:"#666",position:"center",font:"normal normal normal 7pt Tahoma",fontColor:"#333",labelGap:4},majorTick:{width:1,length:6},minorTick:{width:0.8,length:3},microTick:{width:0.5,length:1},title:{gap:15,font:"normal normal normal 11pt Tahoma",fontColor:"#333",orientation:"axis"}},series:{stroke:{width:1.5,color:"#333"},outline:{width:0.1,color:"#ccc"},shadow:null,fill:"#ccc",font:"normal normal normal 8pt Tahoma",fontColor:"#000",labelWiring:{width:1,color:"#ccc"}},marker:{stroke:{width:1.5,color:"#333"},outline:{width:0.1,color:"#ccc"},shadow:null,fill:"#ccc",font:"normal normal normal 8pt Tahoma",fontColor:"#000"},indicator:{lineStroke:{width:1.5,color:"#333"},lineOutline:{width:0.1,color:"#ccc"},lineShadow:null,stroke:{width:1.5,color:"#333"},outline:{width:0.1,color:"#ccc"},shadow:null,fill:"#ccc",radius:3,font:"normal normal normal 10pt Tahoma",fontColor:"#000",markerFill:"#ccc",markerSymbol:"m-3,0 c0,-4 6,-4 6,0 m-6,0 c0,4 6,4 6,0",markerStroke:{width:1.5,color:"#333"},markerOutline:{width:0.1,color:"#ccc"},markerShadow:null}}});return _1587;});},"esri/dijit/TimeSlider":function(){define(["dijit","dojo","dojox","dojo/require!dijit/_Widget,dijit/_Templated,dojox/form/RangeSlider,dijit/form/HorizontalRuleLabels,dijit/form/HorizontalRule,dojox/timing/_base"],function(dijit,dojo,dojox){dojo.provide("esri.dijit.TimeSlider");dojo.require("dijit._Widget");dojo.require("dijit._Templated");dojo.require("dojox.form.RangeSlider");dojo.require("dijit.form.HorizontalRuleLabels");dojo.require("dijit.form.HorizontalRule");dojo.require("dojox.timing._base");dojo.declare("esri.dijit.TimeSlider",[dijit._Widget,dijit._Templated],{widgetsInTemplate:true,templateString:"   <div class=\"esriTimeSlider\">\r\n   <table width=\"100%\" cellspacing=\"0\" cellpadding=\"0\" border=\"0\">\r\n   <tr>\r\n   <td align=\"right\" valign=\"middle\"><button dojoType=\"dijit.form.Button\" showLabel=\"false\" iconClass=\"tsButton tsPlayButton\" dojoAttachEvent=\"onClick:_onPlay\" dojoAttachPoint=\"playPauseBtn\" type=\"button\">${NLS_play}</button></td>\r\n   <td align=\"center\" valign=\"middle\" width=\"80%\" class=\"tsTmp\"></td>\r\n   <td align=\"left\" valign=\"middle\" width=\"30\"><button dojoType=\"dijit.form.Button\" showLabel=\"false\" iconClass=\"tsButton tsPrevButton\" dojoAttachEvent=\"onClick:_onPrev\" dojoAttachPoint=\"previousBtn\" type=\"button\">${NLS_previous}</button></td>\r\n   <td align=\"left\" valign=\"middle\"><button dojoType=\"dijit.form.Button\" showLabel=\"false\" iconClass=\"tsButton tsNextButton\" dojoAttachEvent=\"onClick:_onNext\" dojoAttachPoint=\"nextBtn\" type=\"button\">${NLS_next}</button></td>\r\n   </tr>    \r\n   </table>\r\n   </div>",basePath:dojo.moduleUrl("esri.dijit"),_slideDuration:1000,_defaultCount:10,constructor:function(_1594,_1595){dojo.mixin(this,esri.bundle.widgets.timeSlider);this._iconClass="tsButton tsPlayButton";this.playing=false;this.loop=false;this.thumbCount=1;this.thumbMovingRate=1000;this._createTimeInstants=false;this._options=dojo.mixin({excludeDataAtTrailingThumb:false,excludeDataAtLeadingThumb:false},_1594.options||{});},startup:function(){this.inherited(arguments);this._timer=new dojox.timing.Timer();this._timer.setInterval(this.thumbMovingRate);this._timer.onTick=dojo.hitch(this,"_bumpSlider",1);this._createSlider();},destroy:function(){this._timer.stop();this._timer=null;this.timeStops=null;this._slider.destroy();this._slider=null;if(this._hTicks){this._hTicks.destroyRecursive();this._hTicks=null;}if(this._hLabels){this._hLabels.destroyRecursive();this._hLabels=null;}this.inherited(arguments);},onTimeExtentChange:function(){},onPlay:function(){},onPause:function(){},onNext:function(){},onPrevious:function(){},_onHorizontalChange:function(){var _1596=this._sliderToTimeExtent();this.onTimeExtentChange(_1596);},_onPlay:function(){this.playing=!this.playing;this._updateUI();if(this.playing){this._timer.start();this.onPlay(this._sliderToTimeExtent());}else{this._timer.stop();this.onPause(this._sliderToTimeExtent());}var val=this._getSliderValue();this._offset=dojo.isArray(val)?(val[1]-val[0]):0;},_onNext:function(){if(!this.playing){this._bumpSlider(1);this.onNext(this._sliderToTimeExtent());}},_onPrev:function(){if(!this.playing){this._bumpSlider(-1);this.onPrevious(this._sliderToTimeExtent());}},createTimeStopsByCount:function(_1597,count){if(!_1597||!_1597.startTime||!_1597.endTime){console.log(this.NLS_invalidTimeExtent);return;}count=count||this._defaultCount;var _1598=Math.ceil((_1597.endTime-_1597.startTime)/(count-1));this.createTimeStopsByTimeInterval(_1597,_1598,"esriTimeUnitsMilliseconds");},createTimeStopsByTimeInterval:function(_1599,_159a,_159b,_159c){if(!_1599||!_1599.startTime||!_1599.endTime){console.log(this.NLS_invalidTimeExtent);return;}this.fullTimeExtent=new esri.TimeExtent(_1599.startTime,_1599.endTime);if(_159c&&_159c.resetStartTime===true){this._resetStartTime(this.fullTimeExtent,_159b);}this._timeIntervalUnits=_159b;var te=this.fullTimeExtent.startTime;var _159d=[];while(te<=_1599.endTime){_159d.push(te);te=_1599._getOffsettedDate(te,_159a,_159b);}if(_159d.length>0&&_159d[_159d.length-1]<_1599.endTime){_159d.push(te);}this.setTimeStops(_159d);},getCurrentTimeExtent:function(){return this._sliderToTimeExtent();},setTimeStops:function(_159e){this.timeStops=_159e||[];this._numStops=this.timeStops.length;this._numTicks=this._numStops;if(esri._isDefined(this.fullTimeExtent)===false){this.fullTimeExtent=new esri.TimeExtent(_159e[0],_159e[_159e.length-1]);}},setLoop:function(loop){this.loop=loop;},setThumbCount:function(_159f){this.thumbCount=_159f;this.singleThumbAsTimeInstant(this._createTimeInstants);if(this._slider){this._createSlider();}},setThumbIndexes:function(_15a0){this.thumbIndexes=dojo.clone(_15a0)||[0,1];this._initializeThumbs();},setThumbMovingRate:function(_15a1){this.thumbMovingRate=_15a1;if(this._timer){this._timer.setInterval(this.thumbMovingRate);}},setLabels:function(_15a2){this.labels=_15a2;if(this._slider){this._createSlider();}},setTickCount:function(ticks){this._numTicks=ticks;if(this._slider){this._createSlider();}},singleThumbAsTimeInstant:function(_15a3){this._createTimeInstants=(_15a3&&this.thumbCount===1);},next:function(){this._onNext();},pause:function(){this.playing=false;this._updateUI();this._timer.stop();},play:function(){if(this.playing===true){return;}this.playing=false;this._onPlay();},previous:function(){this._onPrev();},_updateUI:function(){dojo.removeClass(this.playPauseBtn.iconNode,this._iconClass);this._iconClass=this.playing?"tsButton tsPauseButton":"tsButton tsPlayButton";dojo.addClass(this.playPauseBtn.iconNode,this._iconClass);this.previousBtn.set("disabled",this.playing);this.nextBtn.set("disabled",this.playing);},_createSlider:function(){if(this._slider){this._slider.destroy();this._slider=null;}var node=this.domNode;while(node.parentNode&&!node.dir){node=node.parentNode;}var _15a4={onChange:dojo.hitch(this,"_onHorizontalChange"),showButtons:false,discreteValues:this._numStops,slideDuration:this._slideDuration,"class":"ts",dir:node.dir};this._ts=dojo.create("div",{},dojo.query(".tsTmp",this.domNode)[0],"first");this._timeSliderTicks=dojo.create("div",{},this._ts,"first");this._timeSliderLabels=dojo.create("div",{},this._ts);if(this.thumbCount===2){this._createRangeSlider(_15a4);}else{this._createSingleSlider(_15a4);}this.thumbIndexes=this.thumbIndexes||[0,1];this._createHorizRule();this._createLabels();if(this._createTimeInstants===true){dojo.query(".dijitSliderProgressBarH, .dijitSliderLeftBumper, .dijitSliderRightBumper").forEach("dojo.style(item, { background: 'none' });");}this._initializeThumbs();dojo.disconnect(this._onChangeConnect);this._onChangeConnect=dojo.connect(this._slider,"onChange",dojo.hitch(this,"_updateThumbIndexes"));},_createRangeSlider:function(_15a5){this._isRangeSlider=true;this._slider=new dojox.form.HorizontalRangeSlider(_15a5,this._ts);},_createSingleSlider:function(_15a6){this._isRangeSlider=false;this._slider=new dijit.form.HorizontalSlider(_15a6,this._ts);},_createHorizRule:function(){if(this._hTicks){this._hTicks.destroyRecursive();this._hTicks=null;}if(this._numTicks<2){return;}this._hTicks=new dijit.form.HorizontalRule({container:"topDecoration",ruleStyle:"","class":"tsTicks",count:this._numTicks},this._timeSliderTicks);},_createLabels:function(){if(this._hLabels){this._hLabels.destroyRecursive();this._hLabels=null;}if(this.labels&&this.labels.length>0){this._hLabels=new dijit.form.HorizontalRuleLabels({labels:this.labels,labelStyle:"","class":"tsLabels"},this._timeSliderLabels);}},_initializeThumbs:function(){if(!this._slider){return;}this._offset=this._toSliderValue(this.thumbIndexes[1])||0;var t1=this._toSliderValue(this.thumbIndexes[0]);t1=(t1>this._slider.maximum||t1<this._slider.minimum)?this._slider.minimum:t1;if(this._isRangeSlider===true){var t2=this._toSliderValue(this.thumbIndexes[1]);t2=(t2>this._slider.maximum||t2<this._slider.minimum)?this._slider.maximum:t2;t2=t2<t1?t1:t2;this._setSliderValue([t1,t2]);}else{this._setSliderValue(t1);}this._onHorizontalChange();},_bumpSlider:function(dir){var val=this._getSliderValue();var max=val,min=max;var _15a7=dir;if(dojo.isArray(val)){min=val[0];max=val[1];_15a7=[{"change":dir,"useMaxValue":true},{"change":dir,"useMaxValue":false}];}if((Math.abs(min-this._slider.minimum)<1e-10&&dir<0)||(Math.abs(max-this._slider.maximum)<1e-10&&dir>0)){if(this._timer.isRunning){if(this.loop){this._timer.stop();this._setSliderValue(this._getSliderMinValue());var _15a8=this._sliderToTimeExtent();this.onTimeExtentChange(_15a8);this._timer.start();this.playing=true;}else{this.pause();}}}else{this._slider._bumpValue(_15a7);}},_updateThumbIndexes:function(){var val=this._getSliderValue();if(dojo.isArray(val)){this.thumbIndexes[0]=this._toSliderIndex(val[0]);this.thumbIndexes[1]=this._toSliderIndex(val[1]);}else{this.thumbIndexes[0]=this._toSliderIndex(val);}},_sliderToTimeExtent:function(){if(!this.timeStops||this.timeStops.length===0){return;}var _15a9=new esri.TimeExtent();var val=this._getSliderValue();if(dojo.isArray(val)){_15a9.startTime=new Date(this.timeStops[this._toSliderIndex(val[0])]);_15a9.endTime=new Date(this.timeStops[this._toSliderIndex(val[1])]);this._adjustTimeExtent(_15a9);}else{_15a9.startTime=(this._createTimeInstants===true)?new Date(this.timeStops[this._toSliderIndex(val)]):new Date(this.fullTimeExtent.startTime);_15a9.endTime=(this._createTimeInstants===true)?_15a9.startTime:new Date(this.timeStops[this._toSliderIndex(val)]);}return _15a9;},_adjustTimeExtent:function(_15aa){if(this._options.excludeDataAtTrailingThumb===false&&this._options.excludeDataAtLeadingThumb===false){return;}if(_15aa.startTime.getTime()===_15aa.endTime.getTime()){return;}if(this._options.excludeDataAtTrailingThumb){var _15ab=_15aa.startTime;_15ab.setUTCSeconds(_15ab.getUTCSeconds()+1);}if(this._options.excludeDataAtLeadingThumb){var _15ac=_15aa.endTime;_15ac.setUTCSeconds(_15ac.getUTCSeconds()-1);}},_resetStartTime:function(_15ad,_15ae){switch(_15ae){case "esriTimeUnitsSeconds":_15ad.startTime.setUTCMilliseconds(0);break;case "esriTimeUnitsMinutes":_15ad.startTime.setUTCSeconds(0,0,0);break;case "esriTimeUnitsHours":_15ad.startTime.setUTCMinutes(0,0,0);break;case "esriTimeUnitsDays":_15ad.startTime.setUTCHours(0,0,0,0);break;case "esriTimeUnitsWeeks":_15ad.startTime.setUTCDate(_15ad.startTime.getUTCDate()-_15ad.startTime.getUTCDay());break;case "esriTimeUnitsMonths":_15ad.startTime.setUTCDate(1);_15ad.startTime.setUTCHours(0,0,0,0);break;case "esriTimeUnitsDecades":_15ad.startTime.setUTCFullYear(_15ad.startTime.getUTCFullYear()-(_15ad.startTime.getUTCFullYear()%10));break;case "esriTimeUnitsCenturies":_15ad.startTime.setUTCFullYear(_15ad.startTime.getUTCFullYear()-(_15ad.startTime.getUTCFullYear()%100));break;}},_getSliderMinValue:function(){if(this._isRangeSlider){return [this._slider.minimum,this._slider.minimum+this._offset];}else{return this._slider.minimum;}},_toSliderIndex:function(val){var idx=Math.floor((val-this._slider.minimum)*this._numStops/(this._slider.maximum-this._slider.minimum));if(idx<0){idx=0;}if(idx>=this._numStops){idx=this._numStops-1;}return idx;},_toSliderValue:function(val){return val*(this._slider.maximum-this._slider.minimum)/(this._numStops-1)+this._slider.minimum;},_getSliderValue:function(){return this._slider.get("value");},_setSliderValue:function(val){this._slider._setValueAttr(val,false,false);}});});},"esri/dijit/editing/tools/ToggleToolBase":function(){define(["dijit","dojo","dojox","dojo/require!esri/dijit/editing/tools/ToolBase,dijit/form/ToggleButton,esri/toolbars/draw"],function(dijit,dojo,dojox){dojo.provide("esri.dijit.editing.tools.ToggleToolBase");dojo.require("esri.dijit.editing.tools.ToolBase");dojo.require("dijit.form.ToggleButton");dojo.require("esri.toolbars.draw");dojo.declare("esri.dijit.editing.tools.ToggleToolBase",[dijit.form.ToggleButton,esri.dijit.editing.tools.ToolBase],{postCreate:function(){this.inherited(arguments);if(this._setShowLabelAttr){this._setShowLabelAttr(false);}},destroy:function(){dijit.form.ToggleButton.prototype.destroy.apply(this,arguments);esri.dijit.editing.tools.ToolBase.prototype.destroy.apply(this,arguments);},setChecked:function(_15af){dijit.form.ToggleButton.prototype.setChecked.apply(this,arguments);}});});},"dijit/form/_Spinner":function(){require({cache:{"url:dijit/form/templates/Spinner.html":"<div class=\"dijit dijitReset dijitInline dijitLeft\"\n\tid=\"widget_${id}\" role=\"presentation\"\n\t><div class=\"dijitReset dijitButtonNode dijitSpinnerButtonContainer\"\n\t\t><input class=\"dijitReset dijitInputField dijitSpinnerButtonInner\" type=\"text\" tabIndex=\"-1\" readonly=\"readonly\" role=\"presentation\"\n\t\t/><div class=\"dijitReset dijitLeft dijitButtonNode dijitArrowButton dijitUpArrowButton\"\n\t\t\tdata-dojo-attach-point=\"upArrowNode\"\n\t\t\t><div class=\"dijitArrowButtonInner\"\n\t\t\t\t><input class=\"dijitReset dijitInputField\" value=\"&#9650; \" type=\"text\" tabIndex=\"-1\" readonly=\"readonly\" role=\"presentation\"\n\t\t\t\t\t${_buttonInputDisabled}\n\t\t\t/></div\n\t\t></div\n\t\t><div class=\"dijitReset dijitLeft dijitButtonNode dijitArrowButton dijitDownArrowButton\"\n\t\t\tdata-dojo-attach-point=\"downArrowNode\"\n\t\t\t><div class=\"dijitArrowButtonInner\"\n\t\t\t\t><input class=\"dijitReset dijitInputField\" value=\"&#9660; \" type=\"text\" tabIndex=\"-1\" readonly=\"readonly\" role=\"presentation\"\n\t\t\t\t\t${_buttonInputDisabled}\n\t\t\t/></div\n\t\t></div\n\t></div\n\t><div class='dijitReset dijitValidationContainer'\n\t\t><input class=\"dijitReset dijitInputField dijitValidationIcon dijitValidationInner\" value=\"&#935; \" type=\"text\" tabIndex=\"-1\" readonly=\"readonly\" role=\"presentation\"\n\t/></div\n\t><div class=\"dijitReset dijitInputField dijitInputContainer\"\n\t\t><input class='dijitReset dijitInputInner' data-dojo-attach-point=\"textbox,focusNode\" type=\"${type}\" data-dojo-attach-event=\"onkeypress:_onKeyPress\"\n\t\t\trole=\"spinbutton\" autocomplete=\"off\" ${!nameAttrSetting}\n\t/></div\n></div>\n"}});define("dijit/form/_Spinner",["dojo/_base/declare","dojo/_base/event","dojo/keys","dojo/_base/lang","dojo/sniff","dojo/mouse","../typematic","./RangeBoundTextBox","dojo/text!./templates/Spinner.html","./_TextBoxMixin"],function(_15b0,event,keys,lang,has,mouse,_15b1,_15b2,_15b3,_15b4){return _15b0("dijit.form._Spinner",_15b2,{defaultTimeout:500,minimumTimeout:10,timeoutChangeRate:0.9,smallDelta:1,largeDelta:10,templateString:_15b3,baseClass:"dijitTextBox dijitSpinner",cssStateNodes:{"upArrowNode":"dijitUpArrowButton","downArrowNode":"dijitDownArrowButton"},adjust:function(val){return val;},_arrowPressed:function(_15b5,_15b6,_15b7){if(this.disabled||this.readOnly){return;}this._setValueAttr(this.adjust(this.get("value"),_15b6*_15b7),false);_15b4.selectInputText(this.textbox,this.textbox.value.length);},_arrowReleased:function(){this._wheelTimer=null;},_typematicCallback:function(count,node,evt){var inc=this.smallDelta;if(node==this.textbox){var key=evt.charOrCode;inc=(key==keys.PAGE_UP||key==keys.PAGE_DOWN)?this.largeDelta:this.smallDelta;node=(key==keys.UP_ARROW||key==keys.PAGE_UP)?this.upArrowNode:this.downArrowNode;}if(count==-1){this._arrowReleased(node);}else{this._arrowPressed(node,(node==this.upArrowNode)?1:-1,inc);}},_wheelTimer:null,_mouseWheeled:function(evt){event.stop(evt);var _15b8=evt.wheelDelta/120;if(Math.floor(_15b8)!=_15b8){_15b8=evt.wheelDelta>0?1:-1;}var _15b9=evt.detail?(evt.detail*-1):_15b8;if(_15b9!==0){var node=this[(_15b9>0?"upArrowNode":"downArrowNode")];this._arrowPressed(node,_15b9,this.smallDelta);if(this._wheelTimer){this._wheelTimer.remove();}this._wheelTimer=this.defer(function(){this._arrowReleased(node);},50);}},postCreate:function(){this.inherited(arguments);this.connect(this.domNode,mouse.wheel,"_mouseWheeled");this.own(_15b1.addListener(this.upArrowNode,this.textbox,{charOrCode:keys.UP_ARROW,ctrlKey:false,altKey:false,shiftKey:false,metaKey:false},this,"_typematicCallback",this.timeoutChangeRate,this.defaultTimeout,this.minimumTimeout),_15b1.addListener(this.downArrowNode,this.textbox,{charOrCode:keys.DOWN_ARROW,ctrlKey:false,altKey:false,shiftKey:false,metaKey:false},this,"_typematicCallback",this.timeoutChangeRate,this.defaultTimeout,this.minimumTimeout),_15b1.addListener(this.upArrowNode,this.textbox,{charOrCode:keys.PAGE_UP,ctrlKey:false,altKey:false,shiftKey:false,metaKey:false},this,"_typematicCallback",this.timeoutChangeRate,this.defaultTimeout,this.minimumTimeout),_15b1.addListener(this.downArrowNode,this.textbox,{charOrCode:keys.PAGE_DOWN,ctrlKey:false,altKey:false,shiftKey:false,metaKey:false},this,"_typematicCallback",this.timeoutChangeRate,this.defaultTimeout,this.minimumTimeout));}});});},"esri/layers/osm":function(){define(["dijit","dojo","dojox","dojo/require!esri/layers/tiled"],function(dijit,dojo,dojox){dojo.provide("esri.layers.osm");dojo.require("esri.layers.tiled");dojo.declare("esri.layers.OpenStreetMapLayer",esri.layers.TiledMapServiceLayer,{constructor:function(_15ba){this.spatialReference=new esri.SpatialReference({wkid:102100});this.tileInfo=new esri.layers.TileInfo({rows:256,cols:256,dpi:96,format:"PNG8",compressionQuality:0,origin:{x:-20037508.342787,y:20037508.342787},spatialReference:{wkid:102100},lods:[{level:0,scale:591657527.591555,resolution:156543.033928},{level:1,scale:295828763.795777,resolution:78271.5169639999},{level:2,scale:147914381.897889,resolution:39135.7584820001},{level:3,scale:73957190.948944,resolution:19567.8792409999},{level:4,scale:36978595.474472,resolution:9783.93962049996},{level:5,scale:18489297.737236,resolution:4891.96981024998},{level:6,scale:9244648.868618,resolution:2445.98490512499},{level:7,scale:4622324.434309,resolution:1222.99245256249},{level:8,scale:2311162.217155,resolution:611.49622628138},{level:9,scale:1155581.108577,resolution:305.748113140558},{level:10,scale:577790.554289,resolution:152.874056570411},{level:11,scale:288895.277144,resolution:76.4370282850732},{level:12,scale:144447.638572,resolution:38.2185141425366},{level:13,scale:72223.819286,resolution:19.1092570712683},{level:14,scale:36111.909643,resolution:9.55462853563415},{level:15,scale:18055.954822,resolution:4.77731426794937},{level:16,scale:9027.977411,resolution:2.38865713397468},{level:17,scale:4513.988705,resolution:1.19432856685505},{level:18,scale:2256.994353,resolution:0.597164283559817}]});this.fullExtent=new esri.geometry.Extent({xmin:-20037508.34,ymin:-20037508.34,xmax:20037508.34,ymax:20037508.34,spatialReference:{wkid:102100}});this.initialExtent=new esri.geometry.Extent({xmin:-20037508.34,ymin:-20037508.34,xmax:20037508.34,ymax:20037508.34,spatialReference:{wkid:102100}});this.tileServers=(_15ba&&_15ba.tileServers)||["http://a.tile.openstreetmap.org","http://b.tile.openstreetmap.org","http://c.tile.openstreetmap.org"];this.serversLength=this.tileServers.length;this._displayLevels=_15ba?_15ba.displayLevels:null;this.copyright=(_15ba&&_15ba.copyright)||"Map data &copy; OpenStreetMap contributors, CC-BY-SA";this.loaded=true;this.onLoad(this);var _15bb=_15ba&&_15ba.loadCallback;if(_15bb){_15bb(this);}},getTileUrl:function(level,row,col){return esri._getProxiedUrl(this.tileServers[row%this.serversLength]+"/"+level+"/"+col+"/"+row+".png");}});});},"dojox/grid/_View":function(){require({cache:{"url:dojox/grid/resources/View.html":"<div class=\"dojoxGridView\" role=\"presentation\">\n\t<div class=\"dojoxGridHeader\" dojoAttachPoint=\"headerNode\" role=\"presentation\">\n\t\t<div dojoAttachPoint=\"headerNodeContainer\" style=\"width:9000em\" role=\"presentation\">\n\t\t\t<div dojoAttachPoint=\"headerContentNode\" role=\"row\"></div>\n\t\t</div>\n\t</div>\n\t<input type=\"checkbox\" class=\"dojoxGridHiddenFocus\" dojoAttachPoint=\"hiddenFocusNode\" role=\"presentation\" />\n\t<input type=\"checkbox\" class=\"dojoxGridHiddenFocus\" role=\"presentation\" />\n\t<div class=\"dojoxGridScrollbox\" dojoAttachPoint=\"scrollboxNode\" role=\"presentation\">\n\t\t<div class=\"dojoxGridContent\" dojoAttachPoint=\"contentNode\" hidefocus=\"hidefocus\" role=\"presentation\"></div>\n\t</div>\n</div>\n"}});define("dojox/grid/_View",["dojo","dijit/registry","../main","dojo/_base/declare","dojo/_base/array","dojo/_base/lang","dojo/_base/connect","dojo/_base/sniff","dojo/query","dojo/_base/window","dojo/text!./resources/View.html","dojo/dnd/Source","dijit/_Widget","dijit/_TemplatedMixin","dojox/html/metrics","./util","dojo/_base/html","./_Builder","dojo/dnd/Avatar","dojo/dnd/Manager"],function(dojo,dijit,dojox,_15bc,array,lang,_15bd,has,query,win,_15be,_15bf,_15c0,_15c1,_15c2,util,html,_15c3,_15c4,_15c5){var _15c6=function(_15c7,_15c8){return _15c7.style.cssText==undefined?_15c7.getAttribute("style"):_15c7.style.cssText;};var _15c9=_15bc("dojox.grid._View",[_15c0,_15c1],{defaultWidth:"18em",viewWidth:"",templateString:_15be,classTag:"dojoxGrid",marginBottom:0,rowPad:2,_togglingColumn:-1,_headerBuilderClass:_15c3._HeaderBuilder,_contentBuilderClass:_15c3._ContentBuilder,postMixInProperties:function(){this.rowNodes={};},postCreate:function(){this.connect(this.scrollboxNode,"onscroll","doscroll");util.funnelEvents(this.contentNode,this,"doContentEvent",["mouseover","mouseout","click","dblclick","contextmenu","mousedown"]);util.funnelEvents(this.headerNode,this,"doHeaderEvent",["dblclick","mouseover","mouseout","mousemove","mousedown","click","contextmenu"]);this.content=new this._contentBuilderClass(this);this.header=new this._headerBuilderClass(this);if(!this.grid.isLeftToRight()){this.headerNodeContainer.style.width="";}},destroy:function(){html.destroy(this.headerNode);delete this.headerNode;for(var i in this.rowNodes){this._cleanupRowWidgets(this.rowNodes[i]);html.destroy(this.rowNodes[i]);}this.rowNodes={};if(this.source){this.source.destroy();}this.inherited(arguments);},focus:function(){if(has("ie")||has("webkit")||has("opera")){this.hiddenFocusNode.focus();}else{this.scrollboxNode.focus();}},setStructure:function(_15ca){var vs=(this.structure=_15ca);if(vs.width&&!isNaN(vs.width)){this.viewWidth=vs.width+"em";}else{this.viewWidth=vs.width||(vs.noscroll?"auto":this.viewWidth);}this._onBeforeRow=vs.onBeforeRow||function(){};this._onAfterRow=vs.onAfterRow||function(){};this.noscroll=vs.noscroll;if(this.noscroll){this.scrollboxNode.style.overflow="hidden";}this.simpleStructure=Boolean(vs.cells.length==1);this.testFlexCells();this.updateStructure();},_cleanupRowWidgets:function(_15cb){if(_15cb){array.forEach(query("[widgetId]",_15cb).map(dijit.byNode),function(w){if(w._destroyOnRemove){w.destroy();delete w;}else{if(w.domNode&&w.domNode.parentNode){w.domNode.parentNode.removeChild(w.domNode);}}});}},onBeforeRow:function(_15cc,cells){this._onBeforeRow(_15cc,cells);if(_15cc>=0){this._cleanupRowWidgets(this.getRowNode(_15cc));}},onAfterRow:function(_15cd,cells,_15ce){this._onAfterRow(_15cd,cells,_15ce);var g=this.grid;array.forEach(query(".dojoxGridStubNode",_15ce),function(n){if(n&&n.parentNode){var lw=n.getAttribute("linkWidget");var _15cf=window.parseInt(html.attr(n,"cellIdx"),10);var _15d0=g.getCell(_15cf);var w=dijit.byId(lw);if(w){n.parentNode.replaceChild(w.domNode,n);if(!w._started){w.startup();}dojo.destroy(n);}else{n.innerHTML="";}}},this);},testFlexCells:function(){this.flexCells=false;for(var j=0,row;(row=this.structure.cells[j]);j++){for(var i=0,cell;(cell=row[i]);i++){cell.view=this;this.flexCells=this.flexCells||cell.isFlex();}}return this.flexCells;},updateStructure:function(){this.header.update();this.content.update();},getScrollbarWidth:function(){var _15d1=this.hasVScrollbar();var _15d2=html.style(this.scrollboxNode,"overflow");if(this.noscroll||!_15d2||_15d2=="hidden"){_15d1=false;}else{if(_15d2=="scroll"){_15d1=true;}}return (_15d1?_15c2.getScrollbar().w:0);},getColumnsWidth:function(){var h=this.headerContentNode;return h&&h.firstChild?h.firstChild.offsetWidth:0;},setColumnsWidth:function(width){this.headerContentNode.firstChild.style.width=width+"px";if(this.viewWidth){this.viewWidth=width+"px";}},getWidth:function(){return this.viewWidth||(this.getColumnsWidth()+this.getScrollbarWidth())+"px";},getContentWidth:function(){return Math.max(0,html._getContentBox(this.domNode).w-this.getScrollbarWidth())+"px";},render:function(){this.scrollboxNode.style.height="";this.renderHeader();if(this._togglingColumn>=0){this.setColumnsWidth(this.getColumnsWidth()-this._togglingColumn);this._togglingColumn=-1;}var cells=this.grid.layout.cells;var _15d3=lang.hitch(this,function(node,_15d4){!this.grid.isLeftToRight()&&(_15d4=!_15d4);var inc=_15d4?-1:1;var idx=this.header.getCellNodeIndex(node)+inc;var cell=cells[idx];while(cell&&cell.getHeaderNode()&&cell.getHeaderNode().style.display=="none"){idx+=inc;cell=cells[idx];}if(cell){return cell.getHeaderNode();}return null;});if(this.grid.columnReordering&&this.simpleStructure){if(this.source){this.source.destroy();}var _15d5="dojoxGrid_bottomMarker";var _15d6="dojoxGrid_topMarker";if(this.bottomMarker){html.destroy(this.bottomMarker);}this.bottomMarker=html.byId(_15d5);if(this.topMarker){html.destroy(this.topMarker);}this.topMarker=html.byId(_15d6);if(!this.bottomMarker){this.bottomMarker=html.create("div",{"id":_15d5,"class":"dojoxGridColPlaceBottom"},win.body());this._hide(this.bottomMarker);this.topMarker=html.create("div",{"id":_15d6,"class":"dojoxGridColPlaceTop"},win.body());this._hide(this.topMarker);}this.arrowDim=html.contentBox(this.bottomMarker);var _15d7=html.contentBox(this.headerContentNode.firstChild.rows[0]).h;this.source=new _15bf(this.headerContentNode.firstChild.rows[0],{horizontal:true,accept:["gridColumn_"+this.grid.id],viewIndex:this.index,generateText:false,onMouseDown:lang.hitch(this,function(e){this.header.decorateEvent(e);if((this.header.overRightResizeArea(e)||this.header.overLeftResizeArea(e))&&this.header.canResize(e)&&!this.header.moveable){this.header.beginColumnResize(e);}else{if(this.grid.headerMenu){this.grid.headerMenu.onCancel(true);}if(e.button===(has("ie")<9?1:0)){_15bf.prototype.onMouseDown.call(this.source,e);}}}),onMouseOver:lang.hitch(this,function(e){var src=this.source;if(src._getChildByEvent(e)){_15bf.prototype.onMouseOver.apply(src,arguments);}}),_markTargetAnchor:lang.hitch(this,function(_15d8){var src=this.source;if(src.current==src.targetAnchor&&src.before==_15d8){return;}if(src.targetAnchor&&_15d3(src.targetAnchor,src.before)){src._removeItemClass(_15d3(src.targetAnchor,src.before),src.before?"After":"Before");}_15bf.prototype._markTargetAnchor.call(src,_15d8);var _15d9=_15d8?src.targetAnchor:_15d3(src.targetAnchor,src.before);var _15da=0;if(!_15d9){_15d9=src.targetAnchor;_15da=html.contentBox(_15d9).w+this.arrowDim.w/2+2;}var pos=html.position(_15d9,true);var left=Math.floor(pos.x-this.arrowDim.w/2+_15da);html.style(this.bottomMarker,"visibility","visible");html.style(this.topMarker,"visibility","visible");html.style(this.bottomMarker,{"left":left+"px","top":(_15d7+pos.y)+"px"});html.style(this.topMarker,{"left":left+"px","top":(pos.y-this.arrowDim.h)+"px"});if(src.targetAnchor&&_15d3(src.targetAnchor,src.before)){src._addItemClass(_15d3(src.targetAnchor,src.before),src.before?"After":"Before");}}),_unmarkTargetAnchor:lang.hitch(this,function(){var src=this.source;if(!src.targetAnchor){return;}if(src.targetAnchor&&_15d3(src.targetAnchor,src.before)){src._removeItemClass(_15d3(src.targetAnchor,src.before),src.before?"After":"Before");}this._hide(this.bottomMarker);this._hide(this.topMarker);_15bf.prototype._unmarkTargetAnchor.call(src);}),destroy:lang.hitch(this,function(){_15bd.disconnect(this._source_conn);_15bd.unsubscribe(this._source_sub);_15bf.prototype.destroy.call(this.source);if(this.bottomMarker){html.destroy(this.bottomMarker);delete this.bottomMarker;}if(this.topMarker){html.destroy(this.topMarker);delete this.topMarker;}}),onDndCancel:lang.hitch(this,function(){_15bf.prototype.onDndCancel.call(this.source);this._hide(this.bottomMarker);this._hide(this.topMarker);})});this._source_conn=_15bd.connect(this.source,"onDndDrop",this,"_onDndDrop");this._source_sub=_15bd.subscribe("/dnd/drop/before",this,"_onDndDropBefore");this.source.startup();}},_hide:function(node){html.style(node,{top:"-10000px","visibility":"hidden"});},_onDndDropBefore:function(_15db,nodes,copy){if(_15c5.manager().target!==this.source){return;}this.source._targetNode=this.source.targetAnchor;this.source._beforeTarget=this.source.before;var views=this.grid.views.views;var _15dc=views[_15db.viewIndex];var _15dd=views[this.index];if(_15dd!=_15dc){_15dc.convertColPctToFixed();_15dd.convertColPctToFixed();}},_onDndDrop:function(_15de,nodes,copy){if(_15c5.manager().target!==this.source){if(_15c5.manager().source===this.source){this._removingColumn=true;}return;}this._hide(this.bottomMarker);this._hide(this.topMarker);var _15df=function(n){return n?html.attr(n,"idx"):null;};var w=html.marginBox(nodes[0]).w;if(_15de.viewIndex!==this.index){var views=this.grid.views.views;var _15e0=views[_15de.viewIndex];var _15e1=views[this.index];if(_15e0.viewWidth&&_15e0.viewWidth!="auto"){_15e0.setColumnsWidth(_15e0.getColumnsWidth()-w);}if(_15e1.viewWidth&&_15e1.viewWidth!="auto"){_15e1.setColumnsWidth(_15e1.getColumnsWidth());}}var stn=this.source._targetNode;var stb=this.source._beforeTarget;!this.grid.isLeftToRight()&&(stb=!stb);var _15e2=this.grid.layout;var idx=this.index;delete this.source._targetNode;delete this.source._beforeTarget;_15e2.moveColumn(_15de.viewIndex,idx,_15df(nodes[0]),_15df(stn),stb);},renderHeader:function(){this.headerContentNode.innerHTML=this.header.generateHtml(this._getHeaderContent);if(this.flexCells){this.contentWidth=this.getContentWidth();this.headerContentNode.firstChild.style.width=this.contentWidth;}util.fire(this,"onAfterRow",[-1,this.structure.cells,this.headerContentNode]);},_getHeaderContent:function(_15e3){var n=_15e3.name||_15e3.grid.getCellName(_15e3);if(/^\s+$/.test(n)){n="&nbsp;";}var ret=["<div class=\"dojoxGridSortNode"];if(_15e3.index!=_15e3.grid.getSortIndex()){ret.push("\">");}else{ret=ret.concat([" ",_15e3.grid.sortInfo>0?"dojoxGridSortUp":"dojoxGridSortDown","\"><div class=\"dojoxGridArrowButtonChar\">",_15e3.grid.sortInfo>0?"&#9650;":"&#9660;","</div><div class=\"dojoxGridArrowButtonNode\" role=\"presentation\"></div>","<div class=\"dojoxGridColCaption\">"]);}ret=ret.concat([n,"</div></div>"]);return ret.join("");},resize:function(){this.adaptHeight();this.adaptWidth();},hasHScrollbar:function(reset){var _15e4=this._hasHScroll||false;if(this._hasHScroll==undefined||reset){if(this.noscroll){this._hasHScroll=false;}else{var style=html.style(this.scrollboxNode,"overflow");if(style=="hidden"){this._hasHScroll=false;}else{if(style=="scroll"){this._hasHScroll=true;}else{this._hasHScroll=(this.scrollboxNode.offsetWidth-this.getScrollbarWidth()<this.contentNode.offsetWidth);}}}}if(_15e4!==this._hasHScroll){this.grid.update();}return this._hasHScroll;},hasVScrollbar:function(reset){var _15e5=this._hasVScroll||false;if(this._hasVScroll==undefined||reset){if(this.noscroll){this._hasVScroll=false;}else{var style=html.style(this.scrollboxNode,"overflow");if(style=="hidden"){this._hasVScroll=false;}else{if(style=="scroll"){this._hasVScroll=true;}else{this._hasVScroll=(this.scrollboxNode.scrollHeight>this.scrollboxNode.clientHeight);}}}}if(_15e5!==this._hasVScroll){this.grid.update();}return this._hasVScroll;},convertColPctToFixed:function(){var _15e6=false;this.grid.initialWidth="";var _15e7=query("th",this.headerContentNode);var _15e8=array.map(_15e7,function(c,vIdx){var w=c.style.width;html.attr(c,"vIdx",vIdx);if(w&&w.slice(-1)=="%"){_15e6=true;}else{if(w&&w.slice(-2)=="px"){return window.parseInt(w,10);}}return html.contentBox(c).w;});if(_15e6){array.forEach(this.grid.layout.cells,function(cell,idx){if(cell.view==this){var _15e9=cell.view.getHeaderCellNode(cell.index);if(_15e9&&html.hasAttr(_15e9,"vIdx")){var vIdx=window.parseInt(html.attr(_15e9,"vIdx"));this.setColWidth(idx,_15e8[vIdx]);html.removeAttr(_15e9,"vIdx");}}},this);return true;}return false;},adaptHeight:function(_15ea){if(!this.grid._autoHeight){var h=(this.domNode.style.height&&parseInt(this.domNode.style.height.replace(/px/,""),10))||this.domNode.clientHeight;var self=this;var _15eb=function(){var v;for(var i in self.grid.views.views){v=self.grid.views.views[i];if(v!==self&&v.hasHScrollbar()){return true;}}return false;};if(_15ea||(this.noscroll&&_15eb())){h-=_15c2.getScrollbar().h;}util.setStyleHeightPx(this.scrollboxNode,h);}this.hasVScrollbar(true);},adaptWidth:function(){if(this.flexCells){this.contentWidth=this.getContentWidth();this.headerContentNode.firstChild.style.width=this.contentWidth;}var w=this.scrollboxNode.offsetWidth-this.getScrollbarWidth();if(!this._removingColumn){w=Math.max(w,this.getColumnsWidth())+"px";}else{w=Math.min(w,this.getColumnsWidth())+"px";this._removingColumn=false;}var cn=this.contentNode;cn.style.width=w;this.hasHScrollbar(true);},setSize:function(w,h){var ds=this.domNode.style;var hs=this.headerNode.style;if(w){ds.width=w;hs.width=w;}ds.height=(h>=0?h+"px":"");},renderRow:function(_15ec){var _15ed=this.createRowNode(_15ec);this.buildRow(_15ec,_15ed);return _15ed;},createRowNode:function(_15ee){var node=document.createElement("div");node.className=this.classTag+"Row";if(this instanceof dojox.grid._RowSelector){html.attr(node,"role","presentation");}else{html.attr(node,"role","row");if(this.grid.selectionMode!="none"){node.setAttribute("aria-selected","false");}}node[util.gridViewTag]=this.id;node[util.rowIndexTag]=_15ee;this.rowNodes[_15ee]=node;return node;},buildRow:function(_15ef,_15f0){this.buildRowContent(_15ef,_15f0);this.styleRow(_15ef,_15f0);},buildRowContent:function(_15f1,_15f2){_15f2.innerHTML=this.content.generateHtml(_15f1,_15f1);if(this.flexCells&&this.contentWidth){_15f2.firstChild.style.width=this.contentWidth;}util.fire(this,"onAfterRow",[_15f1,this.structure.cells,_15f2]);},rowRemoved:function(_15f3){if(_15f3>=0){this._cleanupRowWidgets(this.getRowNode(_15f3));}this.grid.edit.save(this,_15f3);delete this.rowNodes[_15f3];},getRowNode:function(_15f4){return this.rowNodes[_15f4];},getCellNode:function(_15f5,_15f6){var row=this.getRowNode(_15f5);if(row){return this.content.getCellNode(row,_15f6);}},getHeaderCellNode:function(_15f7){if(this.headerContentNode){return this.header.getCellNode(this.headerContentNode,_15f7);}},styleRow:function(_15f8,_15f9){_15f9._style=_15c6(_15f9);this.styleRowNode(_15f8,_15f9);},styleRowNode:function(_15fa,_15fb){if(_15fb){this.doStyleRowNode(_15fa,_15fb);}},doStyleRowNode:function(_15fc,_15fd){this.grid.styleRowNode(_15fc,_15fd);},updateRow:function(_15fe){var _15ff=this.getRowNode(_15fe);if(_15ff){_15ff.style.height="";this.buildRow(_15fe,_15ff);}return _15ff;},updateRowStyles:function(_1600){this.styleRowNode(_1600,this.getRowNode(_1600));},lastTop:0,firstScroll:0,_nativeScroll:false,doscroll:function(_1601){if(has("ff")>=13){this._nativeScroll=true;}var isLtr=this.grid.isLeftToRight();if(this.firstScroll<2){if((!isLtr&&this.firstScroll==1)||(isLtr&&this.firstScroll===0)){var s=html.marginBox(this.headerNodeContainer);if(has("ie")){this.headerNodeContainer.style.width=s.w+this.getScrollbarWidth()+"px";}else{if(has("mozilla")){this.headerNodeContainer.style.width=s.w-this.getScrollbarWidth()+"px";this.scrollboxNode.scrollLeft=isLtr?this.scrollboxNode.clientWidth-this.scrollboxNode.scrollWidth:this.scrollboxNode.scrollWidth-this.scrollboxNode.clientWidth;}}}this.firstScroll++;}this.headerNode.scrollLeft=this.scrollboxNode.scrollLeft;var top=this.scrollboxNode.scrollTop;if(top!==this.lastTop){this.grid.scrollTo(top);}this._nativeScroll=false;},setScrollTop:function(inTop){this.lastTop=inTop;if(!this._nativeScroll){this.scrollboxNode.scrollTop=inTop;}return this.scrollboxNode.scrollTop;},doContentEvent:function(e){if(this.content.decorateEvent(e)){this.grid.onContentEvent(e);}},doHeaderEvent:function(e){if(this.header.decorateEvent(e)){this.grid.onHeaderEvent(e);}},dispatchContentEvent:function(e){return this.content.dispatchEvent(e);},dispatchHeaderEvent:function(e){return this.header.dispatchEvent(e);},setColWidth:function(_1602,_1603){this.grid.setCellWidth(_1602,_1603+"px");},update:function(){if(!this.domNode){return;}this.content.update();this.grid.update();var left=this.scrollboxNode.scrollLeft;this.scrollboxNode.scrollLeft=left;this.headerNode.scrollLeft=left;}});var _1604=_15bc("dojox.grid._GridAvatar",_15c4,{construct:function(){var dd=win.doc;var a=dd.createElement("table");a.cellPadding=a.cellSpacing="0";a.className="dojoxGridDndAvatar";a.style.position="absolute";a.style.zIndex=1999;a.style.margin="0px";var b=dd.createElement("tbody");var tr=dd.createElement("tr");var td=dd.createElement("td");var img=dd.createElement("td");tr.className="dojoxGridDndAvatarItem";img.className="dojoxGridDndAvatarItemImage";img.style.width="16px";var _1605=this.manager.source,node;if(_1605.creator){node=_1605._normalizedCreator(_1605.getItem(this.manager.nodes[0].id).data,"avatar").node;}else{node=this.manager.nodes[0].cloneNode(true);var table,tbody;if(node.tagName.toLowerCase()=="tr"){table=dd.createElement("table");tbody=dd.createElement("tbody");tbody.appendChild(node);table.appendChild(tbody);node=table;}else{if(node.tagName.toLowerCase()=="th"){table=dd.createElement("table");tbody=dd.createElement("tbody");var r=dd.createElement("tr");table.cellPadding=table.cellSpacing="0";r.appendChild(node);tbody.appendChild(r);table.appendChild(tbody);node=table;}}}node.id="";td.appendChild(node);tr.appendChild(img);tr.appendChild(td);html.style(tr,"opacity",0.9);b.appendChild(tr);a.appendChild(b);this.node=a;var m=_15c5.manager();this.oldOffsetY=m.OFFSET_Y;m.OFFSET_Y=1;},destroy:function(){_15c5.manager().OFFSET_Y=this.oldOffsetY;this.inherited(arguments);}});var _1606=_15c5.manager().makeAvatar;_15c5.manager().makeAvatar=function(){var src=this.source;if(src.viewIndex!==undefined&&!html.hasClass(win.body(),"dijit_a11y")){return new _1604(this);}return _1606.call(_15c5.manager());};return _15c9;});},"*now":function(r){r(["dojo/i18n!*preload*esri/nls/widgets*[\"ar\",\"az\",\"ca\",\"cs\",\"da\",\"de-de\",\"el\",\"en-gb\",\"en-us\",\"es-es\",\"fi-fi\",\"fr-fr\",\"he-il\",\"hu\",\"it-it\",\"ja-jp\",\"ko-kr\",\"nl-nl\",\"nb\",\"pl\",\"pt-br\",\"pt-pt\",\"ro\",\"ru\",\"sk\",\"sl\",\"sv\",\"th\",\"tr\",\"zh-tw\",\"zh-cn\",\"ROOT\"]"]);},"*noref":1}});define("esri/widgets",["dijit","dojo","dojox","dojo/require!esri/layers/FeatureLayer,esri/toolbars/_toolbar,esri/toolbars/draw,esri/toolbars/edit,esri/tasks/geometry,esri/dijit/AttributeInspector,esri/dijit/editing/AttachmentEditor,esri/dijit/editing/Editor,esri/dijit/editing/TemplatePicker,esri/dijit/editing/Util,esri/dijit/editing/SelectionHelper,esri/dijit/_TouchBase,esri/dijit/BasemapGallery,esri/dijit/Bookmarks,esri/dijit/Gallery,esri/dijit/Gauge,esri/dijit/Geocoder,esri/dijit/InfoView,esri/dijit/InfoWindow,esri/dijit/InfoWindowLite,esri/dijit/Legend,esri/dijit/Measurement,esri/dijit/NavigationBar,esri/dijit/OverviewMap,esri/dijit/Popup,esri/dijit/PopupMobile,esri/dijit/Print,esri/dijit/Scalebar,esri/dijit/TimeSlider"],function(dijit,dojo,dojox){dojo.provide("esri.widgets");dojo.require("esri.layers.FeatureLayer");dojo.require("esri.toolbars._toolbar");dojo.require("esri.toolbars.draw");dojo.require("esri.toolbars.edit");dojo.require("esri.tasks.geometry");dojo.require("esri.dijit.AttributeInspector");dojo.require("esri.dijit.editing.AttachmentEditor");dojo.require("esri.dijit.editing.Editor");dojo.require("esri.dijit.editing.TemplatePicker");dojo.require("esri.dijit.editing.Util");dojo.require("esri.dijit.editing.SelectionHelper");dojo.require("esri.dijit._TouchBase");dojo.require("esri.dijit.BasemapGallery");dojo.require("esri.dijit.Bookmarks");dojo.require("esri.dijit.Gallery");dojo.require("esri.dijit.Gauge");dojo.require("esri.dijit.Geocoder");dojo.require("esri.dijit.InfoView");dojo.require("esri.dijit.InfoWindow");dojo.require("esri.dijit.InfoWindowLite");dojo.require("esri.dijit.Legend");dojo.require("esri.dijit.Measurement");dojo.require("esri.dijit.NavigationBar");dojo.require("esri.dijit.OverviewMap");dojo.require("esri.dijit.Popup");dojo.require("esri.dijit.PopupMobile");dojo.require("esri.dijit.Print");dojo.require("esri.dijit.Scalebar");dojo.require("esri.dijit.TimeSlider");});