/*
 COPYRIGHT 2009 ESRI

 TRADE SECRETS: ESRI PROPRIETARY AND CONFIDENTIAL
 Unpublished material - all rights reserved under the
 Copyright Laws of the United States and applicable international
 laws, treaties, and conventions.

 For additional information, contact:
 Environmental Systems Research Institute, Inc.
 Attn: Contracts and Legal Services Department
 380 New York Street
 Redlands, California, 92373
 USA

 email: contracts@esri.com
 */
//>>built
define("esri/geometry",["dijit","dojo","dojox","dojo/require!esri/main,esri/utils,dojox/gfx/_base,esri/WKIDUnitConversion,esri/geometry/utils"],function(_1,_2,_3){_2.provide("esri.geometry");_2.require("esri.main");_2.require("esri.utils");_2.require("dojox.gfx._base");_2.require("esri.WKIDUnitConversion");_2.require("esri.geometry.utils");esri.Units={CENTIMETERS:"esriCentimeters",DECIMAL_DEGREES:"esriDecimalDegrees",DEGREE_MINUTE_SECONDS:"esriDegreeMinuteSeconds",DECIMETERS:"esriDecimeters",FEET:"esriFeet",INCHES:"esriInches",KILOMETERS:"esriKilometers",METERS:"esriMeters",MILES:"esriMiles",MILLIMETERS:"esriMillimeters",NAUTICAL_MILES:"esriNauticalMiles",POINTS:"esriPoints",UNKNOWN:"esriUnknownUnits",YARDS:"esriYards",ACRES:"esriAcres",ARES:"esriAres",SQUARE_KILOMETERS:"esriSquareKilometers",SQUARE_MILES:"esriSquareMiles",SQUARE_FEET:"esriSquareFeet",SQUARE_METERS:"esriSquareMeters",HECTARES:"esriHectares",SQUARE_YARDS:"esriSquareYards",SQUARE_INCHES:"esriSquareInches",SQUARE_MILLIMETERS:"esriSquareMillimeters",SQUARE_CENTIMETERS:"esriSquareCentimeters",SQUARE_DECIMETERS:"esriSquareDecimeters"};(function(){var _4="PROJCS[\"WGS_1984_Web_Mercator_Auxiliary_Sphere\",GEOGCS[\"GCS_WGS_1984\",DATUM[\"D_WGS_1984\",SPHEROID[\"WGS_1984\",6378137.0,298.257223563]],PRIMEM[\"Greenwich\",0.0],UNIT[\"Degree\",0.0174532925199433]],PROJECTION[\"Mercator_Auxiliary_Sphere\"],PARAMETER[\"False_Easting\",0.0],PARAMETER[\"False_Northing\",0.0],PARAMETER[\"Central_Meridian\",${Central_Meridian}],PARAMETER[\"Standard_Parallel_1\",0.0],PARAMETER[\"Auxiliary_Sphere_Type\",0.0],UNIT[\"Meter\",1.0]]";var _5=[-20037508.342788905,20037508.342788905];var _6=[-20037508.342787,20037508.342787];_2.declare("esri.SpatialReference",null,{constructor:function(_7){if(_7){if(_2.isObject(_7)){_2.mixin(this,_7);}else{if(_2.isString(_7)){this.wkt=_7;}else{this.wkid=_7;}}}},wkid:null,wkt:null,_info:{"102113":{wkTemplate:"PROJCS[\"WGS_1984_Web_Mercator\",GEOGCS[\"GCS_WGS_1984_Major_Auxiliary_Sphere\",DATUM[\"D_WGS_1984_Major_Auxiliary_Sphere\",SPHEROID[\"WGS_1984_Major_Auxiliary_Sphere\",6378137.0,0.0]],PRIMEM[\"Greenwich\",0.0],UNIT[\"Degree\",0.0174532925199433]],PROJECTION[\"Mercator\"],PARAMETER[\"False_Easting\",0.0],PARAMETER[\"False_Northing\",0.0],PARAMETER[\"Central_Meridian\",${Central_Meridian}],PARAMETER[\"Standard_Parallel_1\",0.0],UNIT[\"Meter\",1.0]]",valid:_5,origin:_6,dx:0.00001},"102100":{wkTemplate:_4,valid:_5,origin:_6,dx:0.00001},"3785":{wkTemplate:"PROJCS[\"WGS_1984_Web_Mercator\",GEOGCS[\"GCS_WGS_1984_Major_Auxiliary_Sphere\",DATUM[\"D_WGS_1984_Major_Auxiliary_Sphere\",SPHEROID[\"WGS_1984_Major_Auxiliary_Sphere\",6378137.0,0.0]],PRIMEM[\"Greenwich\",0.0],UNIT[\"Degree\",0.0174532925199433]],PROJECTION[\"Mercator\"],PARAMETER[\"False_Easting\",0.0],PARAMETER[\"False_Northing\",0.0],PARAMETER[\"Central_Meridian\",${Central_Meridian}],PARAMETER[\"Standard_Parallel_1\",0.0],UNIT[\"Meter\",1.0]]",valid:_5,origin:_6,dx:0.00001},"3857":{wkTemplate:_4,valid:_5,origin:_6,dx:0.00001},"4326":{wkTemplate:"GEOGCS[\"GCS_WGS_1984\",DATUM[\"D_WGS_1984\",SPHEROID[\"WGS_1984\",6378137.0,298.257223563]],PRIMEM[\"Greenwich\",${Central_Meridian}],UNIT[\"Degree\",0.0174532925199433]]",altTemplate:"PROJCS[\"WGS_1984_Plate_Carree\",GEOGCS[\"GCS_WGS_1984\",DATUM[\"D_WGS_1984\",SPHEROID[\"WGS_1984\",6378137.0,298.257223563]],PRIMEM[\"Greenwich\",0.0],UNIT[\"Degree\",0.0174532925199433]],PROJECTION[\"Plate_Carree\"],PARAMETER[\"False_Easting\",0.0],PARAMETER[\"False_Northing\",0.0],PARAMETER[\"Central_Meridian\",${Central_Meridian}],UNIT[\"Degrees\",111319.491]]",valid:[-180,180],origin:[-180,180],dx:0.00001}},_isWebMercator:function(){return _2.indexOf([102113,102100,3857,3785],this.wkid)!==-1;},_isWrappable:function(){return _2.indexOf([102113,102100,3857,3785,4326],this.wkid)!==-1;},_getInfo:function(){return this.wkid?this._info[this.wkid]:null;},_canProject:function(_8){var _9=false;if(_8){_9=((this.isWebMercator()&&_8.wkid===4326)||(_8.isWebMercator()&&this.wkid===4326));}return _9;},isWebMercator:function(){return this._isWebMercator();},equals:function(_a){var _b=false;if(_a){if(this===_a){_b=true;}if(this.wkid||_a.wkid){_b=(this.wkid===_a.wkid)||(this.isWebMercator()&&_a.isWebMercator());}else{if(this.wkt&&_a.wkt){_b=(this.wkt.toUpperCase()===_a.wkt.toUpperCase());}}}return _b;},toJson:function(){if(this.wkid!==null){return {wkid:this.wkid};}else{if(this.wkt!==null){return {wkt:this.wkt};}}return null;}});}());_2.mixin(esri.geometry,(function(){var _c=6378137,PI=3.141592653589793,_d=57.29577951308232,_e=0.017453292519943,_f=Math.floor,log=Math.log,sin=Math.sin,exp=Math.exp,_10=Math.atan;function _11(rad){return rad*_d;};function _12(deg){return deg*_e;};function _13(lng,lat){if(lat>89.99999){lat=89.99999;}else{if(lat<-89.99999){lat=-89.99999;}}var _14=_12(lat);return [_12(lng)*_c,_c/2*log((1+sin(_14))/(1-sin(_14)))];};function _15(x,y,_16){var _17=_11(x/_c);if(_16){return [_17,_11((PI/2)-(2*_10(exp(-1*y/_c))))];}return [_17-(_f((_17+180)/360)*360),_11((PI/2)-(2*_10(exp(-1*y/_c))))];};function _18(_19,_1a,sr,_1b){if(_19 instanceof esri.geometry.Point){var pt=_1a(_19.x,_19.y,_1b);return new esri.geometry.Point(pt[0],pt[1],new esri.SpatialReference(sr));}else{if(_19 instanceof esri.geometry.Extent){var min=_1a(_19.xmin,_19.ymin,_1b),max=_1a(_19.xmax,_19.ymax,_1b);return new esri.geometry.Extent(min[0],min[1],max[0],max[1],new esri.SpatialReference(sr));}else{if(_19 instanceof esri.geometry.Polyline||_19 instanceof esri.geometry.Polygon){var _1c=_19 instanceof esri.geometry.Polyline,_1d=_1c?_19.paths:_19.rings,_1e=[],_1f;_2.forEach(_1d,function(_20){_1e.push(_1f=[]);_2.forEach(_20,function(iPt){_1f.push(_1a(iPt[0],iPt[1],_1b));});});if(_1c){return new esri.geometry.Polyline({paths:_1e,spatialReference:sr});}else{return new esri.geometry.Polygon({rings:_1e,spatialReference:sr});}}else{if(_19 instanceof esri.geometry.Multipoint){var _21=[];_2.forEach(_19.points,function(iPt){_21.push(_1a(iPt[0],iPt[1],_1b));});return new esri.geometry.Multipoint({points:_21,spatialReference:sr});}}}}};var _22=39.37,_23=20015077/180,ecd=esri.config.defaults,_24=esri.WKIDUnitConversion;return {xyToLngLat:_15,lngLatToXY:_13,geographicToWebMercator:function(_25){return _18(_25,_13,{wkid:102100});},webMercatorToGeographic:function(_26,_27){return _18(_26,_15,{wkid:4326},_27);},getScale:function(map,_28,_29){var _2a,_2b,wkt;if(arguments.length>1&&(esri.isDefined(_28)&&!_28.declaredClass)){_2a=map;_2b=_28;_28=null;}else{_2a=map.extent;_2b=map.width;var sr=map.spatialReference;if(sr){_29=sr.wkid;wkt=sr.wkt;}}var _2c;if(_29){_2c=_24.values[_24[_29]];}else{if(wkt&&(wkt.search(/^PROJCS/i)!==-1)){var _2d=/UNIT\[([^\]]+)\]\]$/i.exec(wkt);if(_2d&&_2d[1]){_2c=parseFloat(_2d[1].split(",")[1]);}}}return esri.geometry._getScale(_28||_2a,_2b,_2c);},_getScale:function(_2e,_2f,_30){return (_2e&&_2f)?((_2e.getWidth()/_2f)*(_30||_23)*_22*ecd.screenDPI):0;},getExtentForScale:function(map,_31,_32){var _33,wkt,sr=map.spatialReference;if(sr){_33=sr.wkid;wkt=sr.wkt;}var _34;if(_33){_34=_24.values[_24[_33]];}else{if(wkt&&(wkt.search(/^PROJCS/i)!==-1)){var _35=/UNIT\[([^\]]+)\]\]$/i.exec(wkt);if(_35&&_35[1]){_34=parseFloat(_35[1].split(",")[1]);}}}return esri.geometry._getExtentForScale(_32||map.extent,map.width,_34,_31,true);},_getExtentForScale:function(_36,_37,_38,_39,_3a){var _3b;if(_3a){_3b=_38;}else{_3b=_24.values[_24[_38]];}return _36.expand(((_39*_37)/((_3b||_23)*_22*ecd.screenDPI))/_36.getWidth());}};}()),{defaultPoint:{type:"point",x:0,y:0},defaultMultipoint:{type:"multipoint",points:null},defaultExtent:{type:"extent",xmin:0,ymin:0,xmax:0,ymax:0},defaultPolyline:{type:"polyline",paths:null},defaultPolygon:{type:"polygon",rings:null},_rectToExtent:function(_3c){return new esri.geometry.Extent(parseFloat(_3c.x),parseFloat(_3c.y)-parseFloat(_3c.height),parseFloat(_3c.x)+parseFloat(_3c.width),parseFloat(_3c.y),_3c.spatialReference);},_extentToRect:function(_3d){return new esri.geometry.Rect(_3d.xmin,_3d.ymax,_3d.getWidth(),_3d.getHeight(),_3d.spatialReference);},fromJson:function(_3e){if(_3e.x!==undefined&&_3e.y!==undefined){return new esri.geometry.Point(_3e);}else{if(_3e.paths!==undefined){return new esri.geometry.Polyline(_3e);}else{if(_3e.rings!==undefined){return new esri.geometry.Polygon(_3e);}else{if(_3e.points!==undefined){return new esri.geometry.Multipoint(_3e);}else{if(_3e.xmin!==undefined&&_3e.ymin!==undefined&&_3e.xmax!==undefined&&_3e.ymax!==undefined){return new esri.geometry.Extent(_3e);}}}}}},getJsonType:function(_3f){if(_3f instanceof esri.geometry.Point){return "esriGeometryPoint";}else{if(_3f instanceof esri.geometry.Polyline){return "esriGeometryPolyline";}else{if(_3f instanceof esri.geometry.Polygon){return "esriGeometryPolygon";}else{if(_3f instanceof esri.geometry.Extent){return "esriGeometryEnvelope";}else{if(_3f instanceof esri.geometry.Multipoint){return "esriGeometryMultipoint";}}}}}return null;},getGeometryType:function(_40){if(_40==="esriGeometryPoint"){return esri.geometry.Point;}else{if(_40==="esriGeometryPolyline"){return esri.geometry.Polyline;}else{if(_40==="esriGeometryPolygon"){return esri.geometry.Polygon;}else{if(_40==="esriGeometryEnvelope"){return esri.geometry.Extent;}else{if(_40==="esriGeometryMultipoint"){return esri.geometry.Multipoint;}}}}}return null;},isClockwise:function(arr){var _41=0,i,il=arr.length,_42=_2.isArray(arr[0])?function(p1,p2){return p1[0]*p2[1]-p2[0]*p1[1];}:function(p1,p2){return p1.x*p2.y-p2.x*p1.y;};for(i=0;i<il;i++){_41+=_42(arr[i],arr[(i+1)%il]);}return (_41/2)<=0;},toScreenPoint:function(ext,wd,ht,pt,_43){var _44=ext.spatialReference,_45=pt.spatialReference,_46=esri.geometry,x=pt.x,y=pt.y,_47;if(_44&&_45&&!_44.equals(_45)&&_44._canProject(_45)){_47=_44.isWebMercator()?_46.lngLatToXY(x,y):_46.xyToLngLat(x,y,true);x=_47[0];y=_47[1];}x=(x-ext.xmin)*(wd/ext.getWidth());y=(ext.ymax-y)*(ht/ext.getHeight());if(!_43){x=Math.round(x);y=Math.round(y);}return new _46.ScreenPoint(x,y);},toScreenGeometry:function(ext,wd,ht,g){var x=ext.xmin,y=ext.ymax,rwd=wd/ext.getWidth(),rht=ht/ext.getHeight(),_48=_2.forEach,_49=Math.round;if(g instanceof esri.geometry.Point){return new esri.geometry.Point(_49((g.x-x)*rwd),_49((y-g.y)*rht));}else{if(g instanceof esri.geometry.Multipoint){var mp=new esri.geometry.Multipoint(),mpp=mp.points;_48(g.points,function(pt,i){mpp[i]=[_49((pt[0]-x)*rwd),_49((y-pt[1])*rht)];});return mp;}else{if(g instanceof esri.geometry.Extent){return new esri.geometry.Extent(_49((g.xmin-x)*rwd),_49((y-g.ymin)*rht),_49((g.xmax-x)*rwd),_49((y-g.ymax)*rwd));}else{if(g instanceof esri.geometry.Polyline){var _4a=new esri.geometry.Polyline(),_4b=_4a.paths,_4c;_48(g.paths,function(_4d,i){_4c=(_4b[i]=[]);_48(_4d,function(pt,j){_4c[j]=[_49((pt[0]-x)*rwd),_49((y-pt[1])*rht)];});});return _4a;}else{if(g instanceof esri.geometry.Polygon){var _4e=new esri.geometry.Polygon(),_4f=_4e.rings,_50;_48(g.rings,function(_51,i){_50=(_4f[i]=[]);_48(_51,function(pt,j){_50[j]=[_49((pt[0]-x)*rwd),_49((y-pt[1])*rht)];});});return _4e;}}}}}},_toScreenPath:(function(){var _52=(function(){if(_2.isIE<9){return function(x,y,rwd,rht,dx,dy,_53,_54,_55){var _56=[],_57=Math.round,p,pl=_53.length,_58,_59,_5a,pt,x1,y1,x2,y2;for(p=0;p<pl;p++){_58=_53[p];pt=_54?_54(_58[0][0],_58[0][1],_55):_58[0];if((_5a=_58.length)>1){x1=_57(((pt[0]-x)*rwd)+dx);y1=_57(((y-pt[1])*rht)+dy);pt=_54?_54(_58[1][0],_58[1][1],_55):_58[1];x2=_57(((pt[0]-x)*rwd)+dx);y2=_57(((y-pt[1])*rht)+dy);_56.push("M",x1+","+y1,"L",x2+","+y2);for(_59=2;_59<_5a;_59++){pt=_54?_54(_58[_59][0],_58[_59][1],_55):_58[_59];x1=_57(((pt[0]-x)*rwd)+dx);y1=_57(((y-pt[1])*rht)+dy);_56.push(x1+","+y1);}}else{x1=_57(((pt[0]-x)*rwd)+dx);y1=_57(((y-pt[1])*rht)+dy);_56.push("M",x1+","+y1);}}return _56;};}else{return function(x,y,rwd,rht,dx,dy,_5b,_5c,_5d){var _5e=[],i,j,il,jl,_5f,pt,_60=Math.round;for(i=0,il=_5b?_5b.length:0;i<il;i++){_5f=_5b[i];_5e.push("M");for(j=0,jl=_5f?_5f.length:0;j<jl;j++){pt=_5c?_5c(_5f[j][0],_5f[j][1],_5d):_5f[j];_5e.push(_60(((pt[0]-x)*rwd)+dx)+","+_60(((y-pt[1])*rht)+dy));}}return _5e;};}}());return function(ext,wd,ht,g,dx,dy){var _61=esri.geometry,_62=g instanceof _61.Polyline,_63=ext.spatialReference,_64=g.spatialReference,_65,_66;if(_63&&_64&&!_63.equals(_64)&&_63._canProject(_64)){if(_63.isWebMercator()){_65=_61.lngLatToXY;}else{_65=_61.xyToLngLat;_66=true;}}return _52(ext.xmin,ext.ymax,wd/ext.getWidth(),ht/ext.getHeight(),dx,dy,_62?g.paths:g.rings,_65,_66);};}()),toMapPoint:function(ext,wd,ht,pt){return new esri.geometry.Point(ext.xmin+(pt.x/(wd/ext.getWidth())),ext.ymax-(pt.y/(ht/ext.getHeight())),ext.spatialReference);},toMapGeometry:function(ext,wd,ht,g){var x=ext.xmin,y=ext.ymax,sr=ext.spatialReference,rwd=wd/ext.getWidth(),rht=ht/ext.getHeight(),_67=_2.forEach;if(g instanceof esri.geometry.Point){return new esri.geometry.Point(x+(g.x/rwd),y-(g.y/rht),sr);}else{if(g instanceof esri.geometry.Multipoint){var mp=new esri.geometry.Multipoint(sr),mpp=mp.points;_67(g.points,function(pt,i){mpp[i]=[x+(pt[0]/rwd),y-(pt[1]/rht)];});return mp;}else{if(g instanceof esri.geometry.Extent){return new esri.geometry.Extent(x+(g.xmin/rwd),y-(g.ymin/rht),x+(g.xmax/rwd),y-(g.ymax/rht),sr);}else{if(g instanceof esri.geometry.Polyline){var _68=new esri.geometry.Polyline(sr),_69=_68.paths,_6a;_67(g.paths,function(_6b,i){_6a=(_69[i]=[]);_67(_6b,function(pt,j){_6a[j]=[x+(pt[0]/rwd),y-(pt[1]/rht)];});});return _68;}else{if(g instanceof esri.geometry.Polygon){var _6c=new esri.geometry.Polygon(sr),_6d=_6c.rings,_6e;_67(g.rings,function(_6f,i){_6e=(_6d[i]=[]);_67(_6f,function(pt,j){_6e[j]=[x+(pt[0]/rwd),y-(pt[1]/rht)];});});return _6c;}}}}}},getLength:function(pt1,pt2){var dx=pt2.x-pt1.x,dy=pt2.y-pt1.y;return Math.sqrt(dx*dx+dy*dy);},_getLength:function(pt1,pt2){var dx=pt2[0]-pt1[0],dy=pt2[1]-pt1[1];return Math.sqrt(dx*dx+dy*dy);},getMidpoint:function(pt0,pt1){return esri.geometry.getPointOnLine(pt0,pt1,0.5);},getPointOnLine:function(pt0,pt1,_70){if(pt0 instanceof esri.geometry.Point){return new esri.geometry.Point(pt0.x+_70*(pt1.x-pt0.x),pt0.y+_70*(pt1.y-pt0.y));}else{return [pt0[0]+_70*(pt1[0]-pt0[0]),pt0[1]+_70*(pt1[1]-pt0[1])];}},_equals:function(n1,n2){return Math.abs(n1-n2)<1e-8;},getLineIntersection:function(_71,_72,_73,_74,sr){var pt=esri.geometry._getLineIntersection([_71.x,_71.y],[_72.x,_72.y],[_73.x,_73.y],[_74.x,_74.y]);if(pt){pt=new esri.geometry.Point(pt[0],pt[1],sr);}return pt;},_getLineIntersection:function(p0,p1,p2,p3){var _75=10000000000,x,y,a0=esri.geometry._equals(p0[0],p1[0])?_75:(p0[1]-p1[1])/(p0[0]-p1[0]),a1=esri.geometry._equals(p2[0],p3[0])?_75:(p2[1]-p3[1])/(p2[0]-p3[0]),b0=p0[1]-a0*p0[0],b1=p2[1]-a1*p2[0];if(esri.geometry._equals(a0,a1)){if(!esri.geometry._equals(b0,b1)){return null;}else{if(esri.geometry._equals(p0[0],p1[0])){if(Math.min(p0[1],p1[1])<Math.max(p2[1],p3[1])||Math.max(p0[1],p1[1])>Math.min(p2[1],p3[1])){y=(p0[1]+p1[1]+p2[1]+p3[1]-Math.min(p0[1],p1[1],p2[1],p3[1])-Math.max(p0[1],p1[1],p2[1],p3[1]))/2;x=(y-b0)/a0;}else{return null;}}else{if(Math.min(p0[0],p1[0])<Math.max(p2[0],p3[0])||Math.max(p0[0],p1[0])>Math.min(p2[0],p3[0])){x=(p0[0]+p1[0]+p2[0]+p3[0]-Math.min(p0[0],p1[0],p2[0],p3[0])-Math.max(p0[0],p1[0],p2[0],p3[0]))/2;y=a0*x+b0;}else{return null;}}return [x,y];}}if(esri.geometry._equals(a0,_75)){x=p0[0];y=a1*x+b1;}else{if(esri.geometry._equals(a1,_75)){x=p2[0];y=a0*x+b0;}else{x=-(b0-b1)/(a0-a1);y=a0*x+b0;}}return [x,y];},_getLineIntersection2:function(_76,_77){var p1=_76[0],p2=_76[1],p3=_77[0],p4=_77[1],x1=p1[0],y1=p1[1],x2=p2[0],y2=p2[1],x3=p3[0],y3=p3[1],x4=p4[0],y4=p4[1],x43=x4-x3,x13=x1-x3,x21=x2-x1,y43=y4-y3,y13=y1-y3,y21=y2-y1,_78=(y43*x21)-(x43*y21),ua,ub,px,py;if(_78===0){return false;}ua=((x43*y13)-(y43*x13))/_78;ub=((x21*y13)-(y21*x13))/_78;if(ua>=0&&ua<=1&&ub>=0&&ub<=1){px=x1+(ua*(x2-x1));py=y1+(ua*(y2-y1));return [px,py];}else{return false;}},_pointLineDistance:function(_79,_7a){var p1=_7a[0],p2=_7a[1],x1=p1[0],y1=p1[1],x2=p2[0],y2=p2[1],x3=_79[0],y3=_79[1],x21=x2-x1,y21=y2-y1,x31=x3-x1,y31=y3-y1,_7b=Math.sqrt,pow=Math.pow,mag=_7b(pow(x21,2)+pow(y21,2)),u=((x31*x21)+(y31*y21))/(mag*mag),x=x1+u*x21,y=y1+u*y21;return _7b(pow(x3-x,2)+pow(y3-y,2));}});_2.declare("esri.geometry.Geometry",null,{spatialReference:null,type:null,setSpatialReference:function(sr){this.spatialReference=sr;return this;},_initSR:function(){if(!this.spatialReference){this.setSpatialReference(new esri.SpatialReference(4326));}},getExtent:function(){return null;}});_2.declare("esri.geometry.Point",esri.geometry.Geometry,{constructor:function(x,y,_7c){_2.mixin(this,esri.geometry.defaultPoint);if(_2.isArray(x)){this.x=x[0];this.y=x[1];this.spatialReference=y;}else{if(_2.isObject(x)){_2.mixin(this,x);if(esri.isDefined(this.latitude)){this.y=this.latitude;}if(esri.isDefined(this.longitude)){this.x=this.longitude;}if(this.spatialReference){this.spatialReference=new esri.SpatialReference(this.spatialReference);}}else{this.x=x;this.y=y;this.spatialReference=_7c;}}this._initSR();},offset:function(x,y){return new esri.geometry.Point(this.x+x,this.y+y,this.spatialReference);},setX:function(x){this.x=x;return this;},setY:function(y){this.y=y;return this;},setLongitude:function(_7d){var sr=this.spatialReference;if(sr){if(sr._isWebMercator()){this.x=esri.geometry.lngLatToXY(_7d,this.y)[0];}else{if(sr.wkid===4326){this.x=_7d;}}}return this;},setLatitude:function(_7e){var sr=this.spatialReference;if(sr){if(sr._isWebMercator()){this.y=esri.geometry.lngLatToXY(this.x,_7e)[1];}else{if(sr.wkid===4326){this.y=_7e;}}}return this;},getLongitude:function(){var sr=this.spatialReference,_7f;if(sr){if(sr._isWebMercator()){_7f=esri.geometry.xyToLngLat(this.x,this.y)[0];}else{if(sr.wkid===4326){_7f=this.x;}}}return _7f;},getLatitude:function(){var sr=this.spatialReference,_80;if(sr){if(sr._isWebMercator()){_80=esri.geometry.xyToLngLat(this.x,this.y)[1];}else{if(sr.wkid===4326){_80=this.y;}}}return _80;},update:function(x,y){this.x=x;this.y=y;return this;},normalize:function(){var x=this.x,sr=this.spatialReference;if(sr){var _81=sr._getInfo();if(_81){var _82=_81.valid[0],_83=_81.valid[1],_84=2*_83,_85;if(x>_83){_85=Math.ceil(Math.abs(x-_83)/_84);x-=(_85*_84);}else{if(x<_82){_85=Math.ceil(Math.abs(x-_82)/_84);x+=(_85*_84);}}}}return new esri.geometry.Point(x,this.y,sr);},toJson:function(){var _86={x:this.x,y:this.y},sr=this.spatialReference;if(sr){_86.spatialReference=sr.toJson();}return _86;}});_2.declare("esri.geometry.ScreenPoint",esri.geometry.Point,{_initSR:function(){},offset:function(x,y){return new esri.geometry.ScreenPoint(this.x+x,this.y+y);}});_2.declare("esri.geometry.Polyline",esri.geometry.Geometry,{constructor:function(obj){_2.mixin(this,esri.geometry.defaultPolyline);this.paths=[];this._path=0;if(obj){if(obj.paths){_2.mixin(this,obj);}else{this.spatialReference=obj;}if(this.spatialReference){this.spatialReference=new esri.SpatialReference(this.spatialReference);}}this._initSR();},_extent:null,addPath:function(_87){this._extent=null;this._path=this.paths.length;this.paths[this._path]=[];if(_2.isArray(_87[0])){_2.forEach(_87,this._addPointArr,this);}else{_2.forEach(_87,this._addPoint,this);}return this;},_addPointArr:function(_88){this.paths[this._path].push(_88);},_addPoint:function(_89){this.paths[this._path].push([_89.x,_89.y]);},_insertPoints:function(_8a,_8b){this._extent=null;this._path=_8b;if(!this.paths[this._path]){this.paths[this._path]=[];}_2.forEach(_8a,this._addPoint,this);},_validateInputs:function(_8c,_8d){if((_8c!==null&&_8c!==undefined)&&(_8c<0||_8c>=this.paths.length)){return false;}if((_8d!==null&&_8c!==undefined)&&(_8d<0||_8d>=this.paths[_8c].length)){return false;}return true;},getPoint:function(_8e,_8f){if(this._validateInputs(_8e,_8f)){return new esri.geometry.Point(this.paths[_8e][_8f],this.spatialReference);}},setPoint:function(_90,_91,_92){if(this._validateInputs(_90,_91)){this._extent=null;this.paths[_90][_91]=[_92.x,_92.y];return this;}},insertPoint:function(_93,_94,_95){if(this._validateInputs(_93)&&esri.isDefined(_94)&&(_94>=0&&_94<=this.paths[_93].length)){this._extent=null;this.paths[_93].splice(_94,0,[_95.x,_95.y]);return this;}},removePath:function(_96){if(this._validateInputs(_96,null)){this._extent=null;var arr=this.paths.splice(_96,1)[0],i,il=arr.length,_97=esri.geometry.Point,sr=this.spatialReference;for(i=0;i<il;i++){arr[i]=new _97(arr[i],sr);}return arr;}},removePoint:function(_98,_99){if(this._validateInputs(_98,_99)){this._extent=null;return new esri.geometry.Point(this.paths[_98].splice(_99,1)[0],this.spatialReference);}},getExtent:function(){var _9a;if(this._extent){_9a=new esri.geometry.Extent(this._extent);_9a._partwise=this._partwise;return _9a;}var _9b=this.paths,pal=_9b.length;if(!pal||!_9b[0].length){return;}var _9c,_9d,x,y,_9e,_9f,pa,pt,ptl,_a0=(_9e=_9b[0][0][0]),_a1=(_9f=_9b[0][0][1]),min=Math.min,max=Math.max,sr=this.spatialReference,_a2=[],_a3,_a4,_a5,_a6;for(pa=0;pa<pal;pa++){_9c=_9b[pa];_a3=(_a4=_9c[0]&&_9c[0][0]);_a5=(_a6=_9c[0]&&_9c[0][1]);ptl=_9c.length;for(pt=0;pt<ptl;pt++){_9d=_9c[pt];x=_9d[0];y=_9d[1];_a0=min(_a0,x);_a1=min(_a1,y);_9e=max(_9e,x);_9f=max(_9f,y);_a3=min(_a3,x);_a5=min(_a5,y);_a4=max(_a4,x);_a6=max(_a6,y);}_a2.push(new esri.geometry.Extent({xmin:_a3,ymin:_a5,xmax:_a4,ymax:_a6,spatialReference:(sr?sr.toJson():null)}));}this._extent={xmin:_a0,ymin:_a1,xmax:_9e,ymax:_9f,spatialReference:sr?sr.toJson():null};this._partwise=_a2.length>1?_a2:null;_9a=new esri.geometry.Extent(this._extent);_9a._partwise=this._partwise;return _9a;},toJson:function(){var _a7={paths:_2.clone(this.paths)},sr=this.spatialReference;if(sr){_a7.spatialReference=sr.toJson();}return _a7;}});_2.declare("esri.geometry.Polygon",esri.geometry.Geometry,{constructor:function(obj){_2.mixin(this,esri.geometry.defaultPolygon);this.rings=[];this._ring=0;if(obj){if(obj.rings){_2.mixin(this,obj);}else{this.spatialReference=obj;}if(this.spatialReference){this.spatialReference=new esri.SpatialReference(this.spatialReference);}}this._initSR();},_extent:null,addRing:function(_a8){this._extent=null;this._ring=this.rings.length;this.rings[this._ring]=[];if(_2.isArray(_a8[0])){_2.forEach(_a8,this._addPointArr,this);}else{_2.forEach(_a8,this._addPoint,this);}return this;},_addPointArr:function(_a9){this.rings[this._ring].push(_a9);},_addPoint:function(_aa){this.rings[this._ring].push([_aa.x,_aa.y]);},_insertPoints:function(_ab,_ac){this._extent=null;this._ring=_ac;if(!this.rings[this._ring]){this.rings[this._ring]=[];}_2.forEach(_ab,this._addPoint,this);},_validateInputs:function(_ad,_ae){if((_ad!==null&&_ad!==undefined)&&(_ad<0||_ad>=this.rings.length)){return false;}if((_ae!==null&&_ad!==undefined)&&(_ae<0||_ae>=this.rings[_ad].length)){return false;}return true;},getPoint:function(_af,_b0){if(this._validateInputs(_af,_b0)){return new esri.geometry.Point(this.rings[_af][_b0],this.spatialReference);}},setPoint:function(_b1,_b2,_b3){if(this._validateInputs(_b1,_b2)){this._extent=null;this.rings[_b1][_b2]=[_b3.x,_b3.y];return this;}},insertPoint:function(_b4,_b5,_b6){if(this._validateInputs(_b4)&&esri.isDefined(_b5)&&(_b5>=0&&_b5<=this.rings[_b4].length)){this._extent=null;this.rings[_b4].splice(_b5,0,[_b6.x,_b6.y]);return this;}},removeRing:function(_b7){if(this._validateInputs(_b7,null)){this._extent=null;var arr=this.rings.splice(_b7,1)[0],i,il=arr.length,_b8=esri.geometry.Point,sr=this.spatialReference;for(i=0;i<il;i++){arr[i]=new _b8(arr[i],sr);}return arr;}},removePoint:function(_b9,_ba){if(this._validateInputs(_b9,_ba)){this._extent=null;return new esri.geometry.Point(this.rings[_b9].splice(_ba,1)[0],this.spatialReference);}},getExtent:function(){var _bb;if(this._extent){_bb=new esri.geometry.Extent(this._extent);_bb._partwise=this._partwise;return _bb;}var _bc=this.rings,pal=_bc.length;if(!pal||!_bc[0].length){return;}var _bd,_be,x,y,_bf,_c0,pa,pt,ptl,_c1=(_bf=_bc[0][0][0]),_c2=(_c0=_bc[0][0][1]),min=Math.min,max=Math.max,sr=this.spatialReference,_c3=[],_c4,_c5,_c6,_c7;for(pa=0;pa<pal;pa++){_bd=_bc[pa];_c4=(_c5=_bd[0]&&_bd[0][0]);_c6=(_c7=_bd[0]&&_bd[0][1]);ptl=_bd.length;for(pt=0;pt<ptl;pt++){_be=_bd[pt];x=_be[0];y=_be[1];_c1=min(_c1,x);_c2=min(_c2,y);_bf=max(_bf,x);_c0=max(_c0,y);_c4=min(_c4,x);_c6=min(_c6,y);_c5=max(_c5,x);_c7=max(_c7,y);}_c3.push(new esri.geometry.Extent({xmin:_c4,ymin:_c6,xmax:_c5,ymax:_c7,spatialReference:(sr?sr.toJson():null)}));}this._extent={xmin:_c1,ymin:_c2,xmax:_bf,ymax:_c0,spatialReference:(sr?sr.toJson():null)};this._partwise=_c3.length>1?_c3:null;_bb=new esri.geometry.Extent(this._extent);_bb._partwise=this._partwise;return _bb;},contains:function(_c8){var _c9=this.rings,_ca,_cb=false,pi,pj,_cc,j,i,pa,pal=_c9.length,_cd=this.spatialReference,_ce=_c8.spatialReference,_cf,x=_c8.x,y=_c8.y;if(_cd&&_ce&&!_cd.equals(_ce)&&_cd._canProject(_ce)){_cf=_cd.isWebMercator()?esri.geometry.lngLatToXY(x,y):esri.geometry.xyToLngLat(x,y,true);x=_cf[0];y=_cf[1];}for(pa=0;pa<pal;pa++){_ca=_c9[pa];_cc=_ca.length;j=0;for(i=0;i<_cc;i++){j++;if(j===_cc){j=0;}pi=_ca[i];pj=_ca[j];if((pi[1]<y&&pj[1]>=y||pj[1]<y&&pi[1]>=y)&&(pi[0]+(y-pi[1])/(pj[1]-pi[1])*(pj[0]-pi[0])<x)){_cb=!_cb;}}}return _cb;},toJson:function(){var _d0={rings:_2.clone(this.rings)},sr=this.spatialReference;if(sr){_d0.spatialReference=sr.toJson();}return _d0;}});_2.declare("esri.geometry.Multipoint",esri.geometry.Geometry,{constructor:function(obj){_2.mixin(this,esri.geometry.defaultMultipoint);this.points=[];if(obj){if(obj.points){_2.mixin(this,obj);}else{this.spatialReference=obj;}if(this.spatialReference){this.spatialReference=new esri.SpatialReference(this.spatialReference);}}this._initSR();},_extent:null,addPoint:function(_d1){this._extent=null;if(_2.isArray(_d1)){this.points.push(_d1);}else{this.points.push([_d1.x,_d1.y]);}return this;},removePoint:function(_d2){if(this._validateInputs(_d2)){this._extent=null;return new esri.geometry.Point(this.points.splice(_d2,1)[0],this.spatialReference);}},getExtent:function(){if(this._extent){return new esri.geometry.Extent(this._extent);}var _d3=this.points,il=_d3.length;if(!il){return;}var _d4=_d3[0],_d5,_d6,_d7=(_d5=_d4[0]),_d8=(_d6=_d4[1]),min=Math.min,max=Math.max,sr=this.spatialReference,x,y,i;for(i=0;i<il;i++){_d4=_d3[i];x=_d4[0];y=_d4[1];_d7=min(_d7,x);_d8=min(_d8,y);_d5=max(_d5,x);_d6=max(_d6,y);}this._extent={xmin:_d7,ymin:_d8,xmax:_d5,ymax:_d6,spatialReference:sr?sr.toJson():null};return new esri.geometry.Extent(this._extent);},_validateInputs:function(_d9){if(_d9===null||_d9<0||_d9>=this.points.length){return false;}return true;},getPoint:function(_da){if(this._validateInputs(_da)){var _db=this.points[_da];return new esri.geometry.Point(_db[0],_db[1],this.spatialReference);}},setPoint:function(_dc,_dd){if(this._validateInputs(_dc)){this._extent=null;this.points[_dc]=[_dd.x,_dd.y];return this;}},toJson:function(){var _de={points:_2.clone(this.points)},sr=this.spatialReference;if(sr){_de.spatialReference=sr.toJson();}return _de;}});_2.declare("esri.geometry.Extent",esri.geometry.Geometry,{constructor:function(_df,_e0,_e1,_e2,_e3){_2.mixin(this,esri.geometry.defaultExtent);if(_2.isObject(_df)){_2.mixin(this,_df);if(this.spatialReference){this.spatialReference=new esri.SpatialReference(this.spatialReference);}}else{this.update(_df,_e0,_e1,_e2,_e3);}this._initSR();},getWidth:function(){return Math.abs(this.xmax-this.xmin);},getHeight:function(){return Math.abs(this.ymax-this.ymin);},getCenter:function(){return new esri.geometry.Point((this.xmin+this.xmax)/2,(this.ymin+this.ymax)/2,this.spatialReference);},centerAt:function(_e4){var _e5=this.getCenter(),dx=_e4.x-_e5.x,dy=_e4.y-_e5.y;return new esri.geometry.Extent(this.xmin+dx,this.ymin+dy,this.xmax+dx,this.ymax+dy,this.spatialReference);},update:function(_e6,_e7,_e8,_e9,_ea){this.xmin=_e6;this.ymin=_e7;this.xmax=_e8;this.ymax=_e9;this.spatialReference=_ea;return this;},offset:function(ox,oy){return new esri.geometry.Extent(this.xmin+ox,this.ymin+oy,this.xmax+ox,this.ymax+oy,this.spatialReference);},expand:function(_eb){var _ec=(1-_eb)/2,_ed=this.getWidth()*_ec,_ee=this.getHeight()*_ec;return new esri.geometry.Extent(this.xmin+_ed,this.ymin+_ee,this.xmax-_ed,this.ymax-_ee,this.spatialReference);},intersects:function(_ef){var _f0=_ef.type,_f1=this.spatialReference,_f2=_ef.spatialReference;if(_f1&&_f2&&!_f1.equals(_f2)&&_f1._canProject(_f2)){_ef=_f1.isWebMercator()?esri.geometry.geographicToWebMercator(_ef):esri.geometry.webMercatorToGeographic(_ef,true);}switch(_f0){case "point":return this.contains(_ef);case "multipoint":return this._intersectsMultipoint(_ef);case "extent":return this._intersectsExtent(_ef);case "polygon":return this._intersectsPolygon(_ef);case "polyline":return this._intersectsPolyline(_ef);}},_intersectsMultipoint:function(_f3){var len=_f3.points.length,i;for(i=0;i<len;i++){if(this.contains(_f3.getPoint(i))){return true;}}return false;},_intersectsExtent:function(_f4){var _f5,_f6,_f7,_f8,_f9=false;if(this.xmin<=_f4.xmin){_f5=_f4.xmin;if(this.xmax<_f5){_f9=true;}else{_f7=Math.min(this.xmax,_f4.xmax)-_f5;}}else{_f5=this.xmin;if(_f4.xmax<_f5){_f9=true;}else{_f7=Math.min(this.xmax,_f4.xmax)-_f5;}}if(this.ymin<=_f4.ymin){_f6=_f4.ymin;if(this.ymax<_f6){_f9=true;}else{_f8=Math.min(this.ymax,_f4.ymax)-_f6;}}else{_f6=this.ymin;if(_f4.ymax<_f6){_f9=true;}else{_f8=Math.min(this.ymax,_f4.ymax)-_f6;}}if(_f9){return null;}return new esri.geometry.Extent(_f5,_f6,_f5+_f7,_f6+_f8,this.spatialReference);},_intersectsPolygon:function(_fa){var _fb=[this.xmin,this.ymax],_fc=[this.xmax,this.ymax],_fd=[this.xmin,this.ymin],_fe=[this.xmax,this.ymin],_ff=[_fb,_fc,_fd,_fe],_100=[[_fd,_fb],[_fb,_fc],[_fc,_fe],[_fe,_fd]],i,j,_101=_fa.rings,_102=_101.length,ring,len,_103=new esri.geometry.Point(0,0,this.spatialReference);len=_ff.length;for(i=0;i<len;i++){_103.update(_ff[i][0],_ff[i][1]);if(_fa.contains(_103)){return true;}}_103.setSpatialReference(_fa.spatialReference);var pi,pj;for(i=0;i<_102;i++){ring=_101[i];len=ring.length;if(!len){continue;}pi=ring[0];_103.update(pi[0],pi[1]);if(this.contains(_103)){return true;}for(j=1;j<len;j++){pj=ring[j];_103.update(pj[0],pj[1]);if(this.contains(_103)||this._intersectsLine([pi,pj],_100)){return true;}pi=pj;}}return false;},_intersectsPolyline:function(_104){var _105=[[[this.xmin,this.ymin],[this.xmin,this.ymax]],[[this.xmin,this.ymax],[this.xmax,this.ymax]],[[this.xmax,this.ymax],[this.xmax,this.ymin]],[[this.xmax,this.ymin],[this.xmin,this.ymin]]];var i,j,_106=_104.paths,_107=_106.length,path,len;var pi,pj,_108=new esri.geometry.Point(0,0,_104.spatialReference);for(i=0;i<_107;i++){path=_106[i];len=path.length;if(!len){continue;}pi=path[0];_108.update(pi[0],pi[1]);if(this.contains(_108)){return true;}for(j=1;j<len;j++){pj=path[j];_108.update(pj[0],pj[1]);if(this.contains(_108)||this._intersectsLine([pi,pj],_105)){return true;}pi=pj;}}return false;},_intersectsLine:function(line,_109){var _10a=esri.geometry._getLineIntersection2,i,len=_109.length;for(i=0;i<len;i++){if(_10a(line,_109[i])){return true;}}return false;},contains:function(_10b){if(!_10b){return false;}var type=_10b.type;if(type==="point"){var _10c=this.spatialReference,_10d=_10b.spatialReference,_10e,x=_10b.x,y=_10b.y;if(_10c&&_10d&&!_10c.equals(_10d)&&_10c._canProject(_10d)){_10e=_10c.isWebMercator()?esri.geometry.lngLatToXY(x,y):esri.geometry.xyToLngLat(x,y,true);x=_10e[0];y=_10e[1];}return (x>=this.xmin&&x<=this.xmax&&y>=this.ymin&&y<=this.ymax);}else{if(type==="extent"){return this._containsExtent(_10b);}}return false;},_containsExtent:function(_10f){var xmin=_10f.xmin,ymin=_10f.ymin,xmax=_10f.xmax,ymax=_10f.ymax,sr=_10f.spatialReference,pt1=new esri.geometry.Point(xmin,ymin,sr),pt2=new esri.geometry.Point(xmin,ymax,sr),pt3=new esri.geometry.Point(xmax,ymax,sr),pt4=new esri.geometry.Point(xmax,ymin,sr);if(this.contains(pt1)&&this.contains(pt2)&&this.contains(pt3)&&this.contains(pt4)){return true;}return false;},union:function(_110){return new esri.geometry.Extent(Math.min(this.xmin,_110.xmin),Math.min(this.ymin,_110.ymin),Math.max(this.xmax,_110.xmax),Math.max(this.ymax,_110.ymax),this.spatialReference);},getExtent:function(){var sr=this.spatialReference;return new esri.geometry.Extent(this.xmin,this.ymin,this.xmax,this.ymax,sr&&new esri.SpatialReference(sr.toJson()));},_shiftCM:function(info){if(!this._shifted){var EG=esri.geometry,_111=EG.fromJson(this.toJson()),sr=_111.spatialReference;info=info||sr._getInfo();if(info){var _112=this._getCM(info);if(_112){var _113=sr._isWebMercator()?EG.webMercatorToGeographic(_112):_112;_111.xmin-=_112.x;_111.xmax-=_112.x;if(!sr._isWebMercator()){_113.x=this._normalizeX(_113.x,info).x;}_111.spatialReference.wkt=esri.substitute({Central_Meridian:_113.x},sr.wkid===4326?info.altTemplate:info.wkTemplate);_111.spatialReference.wkid=null;}}this._shifted=_111;}return this._shifted;},_getCM:function(info){var _114,_115=info.valid[0],_116=info.valid[1],xmin=this.xmin,xmax=this.xmax;var _117=(xmin>=_115&&xmin<=_116),_118=(xmax>=_115&&xmax<=_116);if(!(_117&&_118)){_114=this.getCenter();}return _114;},_normalize:function(_119,_11a,info){var EG=esri.geometry,_11b=EG.fromJson(this.toJson()),sr=_11b.spatialReference;if(sr){info=info||sr._getInfo();if(info){var _11c=_2.map(this._getParts(info),function(part){return part.extent;});if(_11c.length>2){if(_119){return this._shiftCM(info);}else{return _11b.update(info.valid[0],_11b.ymin,info.valid[1],_11b.ymax,sr);}}else{if(_11c.length===2){if(_119){return this._shiftCM(info);}else{return _11a?_11c:new EG.Polygon({"rings":_2.map(_11c,function(_11d){return [[_11d.xmin,_11d.ymin],[_11d.xmin,_11d.ymax],[_11d.xmax,_11d.ymax],[_11d.xmax,_11d.ymin],[_11d.xmin,_11d.ymin]];}),"spatialReference":sr});}}else{return _11c[0]||_11b;}}}}return _11b;},_getParts:function(info){if(!this._parts){var xmin=this.xmin,xmax=this.xmax,ymin=this.ymin,ymax=this.ymax,sr=this.spatialReference,_11e=this.getWidth(),_11f=xmin,_120=xmax,_121=0,_122=0,nrml,_123=[],_124,_125,_126;info=info||sr._getInfo();_124=info.valid[0];_125=info.valid[1];nrml=this._normalizeX(xmin,info);xmin=nrml.x;_121=nrml.frameId;nrml=this._normalizeX(xmax,info);xmax=nrml.x;_122=nrml.frameId;_126=(xmin===xmax&&_11e>0);if(_11e>(2*_125)){var E1=new esri.geometry.Extent(_11f<_120?xmin:xmax,ymin,_125,ymax,sr),E2=new esri.geometry.Extent(_124,ymin,_11f<_120?xmax:xmin,ymax,sr),E3=new esri.geometry.Extent(0,ymin,_125,ymax,sr),E4=new esri.geometry.Extent(_124,ymin,0,ymax,sr),k,_127=[],_128=[];if(E1.contains(E3)){_127.push(_121);}if(E1.contains(E4)){_128.push(_121);}if(E2.contains(E3)){_127.push(_122);}if(E2.contains(E4)){_128.push(_122);}for(k=_121+1;k<_122;k++){_127.push(k);_128.push(k);}_123.push({extent:E1,frameIds:[_121]},{extent:E2,frameIds:[_122]},{extent:E3,frameIds:_127},{extent:E4,frameIds:_128});}else{if((xmin>xmax)||_126){_123.push({extent:new esri.geometry.Extent(xmin,ymin,_125,ymax,sr),frameIds:[_121]},{extent:new esri.geometry.Extent(_124,ymin,xmax,ymax,sr),frameIds:[_122]});}else{_123.push({extent:new esri.geometry.Extent(xmin,ymin,xmax,ymax,sr),frameIds:[_121]});}}this._parts=_123;}return this._parts;},_normalizeX:function(x,info){var _129=0,_12a=info.valid[0],_12b=info.valid[1],_12c=2*_12b,_12d;if(x>_12b){_12d=Math.ceil(Math.abs(x-_12b)/_12c);x-=(_12d*_12c);_129=_12d;}else{if(x<_12a){_12d=Math.ceil(Math.abs(x-_12a)/_12c);x+=(_12d*_12c);_129=-_12d;}}return {x:x,frameId:_129};},toJson:function(){var json={xmin:this.xmin,ymin:this.ymin,xmax:this.xmax,ymax:this.ymax},sr=this.spatialReference;if(sr){json.spatialReference=sr.toJson();}return json;}});_2.declare("esri.geometry.Rect",esri.geometry.Geometry,{constructor:function(json,y,_12e,_12f,_130){_2.mixin(this,_3.gfx.defaultRect);if(_2.isObject(json)){_2.mixin(this,json);if(this.spatialReference){this.spatialReference=new esri.SpatialReference(this.spatialReference);}}else{this.x=json;this.y=y;this.width=_12e;this.height=_12f;this.spatialReference=_130;}this._initSR();},getCenter:function(){return new esri.geometry.Point(this.x+this.width/2,this.y+this.height/2,this.spatialReference);},offset:function(ox,oy){return new esri.geometry.Rect(this.x+ox,this.y+oy,this.width,this.height,this.spatialReference);},intersects:function(rect){if((rect.x+rect.width)<=this.x){return false;}if((rect.y+rect.height)<=this.y){return false;}if(rect.y>=(this.y+this.height)){return false;}if(rect.x>=(this.x+this.width)){return false;}return true;},getExtent:function(){return esri.geometry._rectToExtent(this);},update:function(x,y,_131,_132,_133){this.x=x;this.y=y;this.width=_131;this.height=_132;this.spatialReference=_133;return this;}});});