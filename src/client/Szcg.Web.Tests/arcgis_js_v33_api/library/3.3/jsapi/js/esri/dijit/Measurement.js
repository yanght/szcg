/*
 COPYRIGHT 2009 ESRI

 TRADE SECRETS: ESRI PROPRIETARY AND CONFIDENTIAL
 Unpublished material - all rights reserved under the
 Copyright Laws of the United States and applicable international
 laws, treaties, and conventions.

 For additional information, contact:
 Environmental Systems Research Institute, Inc.
 Attn: Contracts and Legal Services Department
 380 New York Street
 Redlands, California, 92373
 USA

 email: contracts@esri.com
 */
//>>built
define("esri/dijit/Measurement",["dijit","dojo","dojox","dojo/require!dijit/_Widget,dijit/_Templated,esri/map,esri/geometry,esri/symbol,dojo/parser,dijit/layout/ContentPane,dijit/Menu,dijit/form/Button,esri/tasks/geometry,esri/WKIDUnitConversion"],function(_1,_2,_3){_2.provide("esri.dijit.Measurement");_2.require("dijit._Widget");_2.require("dijit._Templated");_2.require("esri.map");_2.require("esri.geometry");_2.require("esri.symbol");_2.require("dojo.parser");_2.require("dijit.layout.ContentPane");_2.require("dijit.Menu");_2.require("dijit.form.Button");_2.require("esri.tasks.geometry");_2.require("esri.WKIDUnitConversion");_2.declare("esri.dijit.Measurement",[_1._Widget,_1._Templated],{widgetsInTemplate:true,templateString:"<div class=\"esriMeasurement\">\r\n  <div dojoType='dijit.form.ToggleButton' baseClass='esriButton' dojoAttachPoint='area' checked='false' iconClass='areaIcon' showLabel='false' dojoAttachEvent='onClick:areaToggleButton'></div>\r\n  <div dojoType='dijit.form.ToggleButton' baseClass='esriButton' dojoAttachPoint='distance' iconClass='distanceIcon' showLabel='false' dojoAttachEvent='onClick:distanceToggleButton'></div>\r\n  <div dojoType='dijit.form.ToggleButton' baseClass='esriButton' dojoAttachPoint='location' iconClass='locationIcon' showLabel='false' dojoAttachEvent='onClick:locationToggleButton'></div>\r\n  <div style=\"display:inline;margin-left:2px;margin-right:2px;padding-top:2px;\">|</div>\r\n  <button dojoType='dijit.form.DropDownButton' baseClass='esriToggleButton' dojoAttachPoint='unit' label='unit' value='unit' style='visibility:hidden;'></button>\r\n  <div dojoType='dijit.layout.ContentPane' dojoAttachPoint='resultLabel' class='resultLabel'></div>\r\n  <div dojoType='dijit.layout.ContentPane' dojoAttachPoint='resultValue' align='left' class='result'></div>\r\n</div>",unitDictionary:[],result:null,inputPoints:[],measureGraphics:[],numberPattern:"#,###,###,##0.0",constructor:function(_4,_5){_4=_4||{};if(!_4.map){console.log("dijit.MeasureTool: unable to find the 'map' property in parameters");return;}this._map=_4.map;this._map.cs=this._checkCS(this._map.spatialReference);this._geometryService=esri.config.defaults.geometryService;if(_4.pointSymbol){this._pointSymbol=_4.pointSymbol;}else{var _6=_2.moduleUrl("esri.dijit","./images/flag.png").toString();this._pointSymbol=new esri.symbol.PictureMarkerSymbol(_6,24,24);this._pointSymbol.setOffset(9,11);}if(_4.lineSymbol){this._lineSymbol=_4.lineSymbol;}else{this._lineSymbol=new esri.symbol.SimpleLineSymbol(esri.symbol.SimpleLineSymbol.STYLE_SOLID,new _2.Color([0,128,255]),3);}if(_4.defaultLengthUnit){this._defaultLengthUnit=_4.defaultLengthUnit;}else{this._defaultLengthUnit=esri.Units.MILES;}if(_4.defaultAreaUnit){this._defaultAreaUnit=_4.defaultAreaUnit;}else{this._defaultAreaUnit=esri.Units.ACRES;}if(_4.defaultLocationUnit){this._defaultLocationUnit=_4.defaultLocationUnit;}else{this._defaultLocationUnit=esri.Units.DECIMAL_DEGREES;}this._snappingCallback=_2.hitch(this,this._snappingCallback);},startup:function(){var _7=esri.bundle.widgets.measurement;this.unitDictionary[_7.NLS_length_miles]=1;this.unitDictionary[_7.NLS_length_kilometers]=1.609344;this.unitDictionary[_7.NLS_length_feet]=5280;this.unitDictionary[_7.NLS_length_meters]=1609.34;this.unitDictionary[_7.NLS_length_yards]=1760;this.unitDictionary["Nautical Miles"]=0.869;this.unitDictionary[_7.NLS_area_acres]=1;this.unitDictionary[_7.NLS_area_sq_kilometers]=0.004047;this.unitDictionary[_7.NLS_area_sq_miles]=0.0015625;this.unitDictionary[_7.NLS_area_sq_feet]=43560;this.unitDictionary[_7.NLS_area_sq_meters]=4046.87;this.unitDictionary[_7.NLS_area_hectares]=0.4047;this.unitDictionary[_7.NLS_area_sq_yards]=4840;this.units={"esriMiles":_7.NLS_length_miles,"esriKilometers":_7.NLS_length_kilometers,"esriFeet":_7.NLS_length_feet,"esriMeters":_7.NLS_length_meters,"esriYards":_7.NLS_length_yards,"esriAcres":_7.NLS_area_acres,"esriSquareKilometers":_7.NLS_area_sq_kilometers,"esriSquareMiles":_7.NLS_area_sq_miles,"esriSquareFeet":_7.NLS_area_sq_feet,"esriSquareMeters":_7.NLS_area_sq_meters,"esriHectares":_7.NLS_area_hectares,"esriSquareYards":_7.NLS_area_sq_yards,"esriDecimalDegrees":_7.NLS_decimal_degrees,"esriDegreeMinuteSeconds":_7.NLS_deg_min_sec};_1.byNode(this.distance.domNode).setLabel(esri.bundle.widgets.measurement.NLS_distance);_1.byNode(this.area.domNode).setLabel(esri.bundle.widgets.measurement.NLS_area);_1.byNode(this.location.domNode).setLabel(esri.bundle.widgets.measurement.NLS_location);_1.byNode(this.resultLabel.domNode).setContent(esri.bundle.widgets.measurement.NLS_resultLabel);},measureArea:function(){this._map.navigationManager.setImmediateClick(true);this._createAreaUnitList();this.inputPoints=[];this.tempGraphic=new esri.Graphic();this.tempGraphic.setSymbol(this._lineSymbol);this.tempGraphic.setGeometry(new esri.geometry.Polyline(this._map.spatialReference));this._map.graphics.add(this.tempGraphic);if(this._map.cs==="PCS"){this._geometryAreaHandler=_2.connect(this._geometryService,"onAreasAndLengthsComplete",this,"_outputArea");}this.mouseClickMapHandler=_2.connect(this._map,"onClick",this,"_measureAreaMouseClickHandler");this.doubleClickMapHandler=_2.connect(this._map,"onDblClick",this,"_measureAreaDblClickHandler");},measureDistance:function(){this._map.navigationManager.setImmediateClick(true);if(this._map.cs==="PCS"){this._projectMapExtent(this._map.extent);this._mapExtentChangeHandler=_2.connect(this._map,"onExtentChange",this,"_projectMapExtent");}this.inputPoints=[];this._createLengthUnitList();this.mouseClickMapHandler=_2.connect(this._map,"onClick",this,"_measureDistanceMouseClickHandler");this.doubleClickMapHandler=_2.connect(this._map,"onDblClick",this,"_measureDistanceDblClickHandler");},measureLocation:function(){this._map.navigationManager.setImmediateClick(true);this.measureGraphics=[];this._createLocationUnitList();this._map.graphics.remove(this.locationGraphic);if(this._map.cs==="PCS"){this._projectMapExtent(this._map.extent);this._mapExtentChangeHandler=_2.connect(this._map,"onExtentChange",_2.hitch(this,this._projectMapExtent));}this._clickMapHandler=_2.connect(this._map,"onClick",this,"_measureLocationClickHandler");this.mouseMoveMapHandler=_2.connect(this._map,"onMouseMove",this,"_showCoordinates");this.mouseDragMapHandler=_2.connect(this._map,"onMouseDrag",_2.hitch(this,function(){_1.byNode(this.resultValue.domNode).setAttribute("disabled",true);}));},setTool:function(_8,_9){this.closeTool();var _a=_1.byNode(this[_8].domNode).checked;_2.style(this.unit.domNode,"visibility","visible");_1.byNode(this.area.domNode).setAttribute("checked",false);_1.byNode(this.distance.domNode).setAttribute("checked",false);_1.byNode(this.location.domNode).setAttribute("checked",false);if(_9===true||_9===false){_a=_9;}_1.byNode(this[_8].domNode).setAttribute("checked",_a);if(_a){this.activeTool=_8;if(this.map.isDoubleClickZoom){this._map.disableDoubleClickZoom();}if(_8==="area"){this.measureArea();}else{if(_8==="distance"){this.measureDistance();}else{if(_8==="location"){this.measureLocation();}}}if(this._map.snappingManager){this._map.snappingManager._startSelectionLayerQuery();this._map.snappingManager._setUpSnapping();}}},areaToggleButton:function(){this.clearResult();this.setTool("area");},distanceToggleButton:function(){this.clearResult();this.setTool("distance");},locationToggleButton:function(){this.clearResult();this.setTool("location");},closeTool:function(){var _b=this._map;_b.navigationManager.setImmediateClick(false);if(!_b.isDoubleClickZoom){_b.enableDoubleClickZoom();}this.inputPoints=[];if(_b.snappingManager&&_b.snappingManager._snappingGraphic){_b.graphics.remove(_b.snappingManager._snappingGraphic);}_2.disconnect(this.mouseClickMapHandler);_2.disconnect(this.mouseMoveMapHandler);_2.disconnect(this.doubleClickMapHandler);_2.disconnect(this.mouseDragMapHandler);_2.disconnect(this._clickMapHandler);_2.disconnect(this._mapExtentChangeHandler);_2.disconnect(this._geometryAreaHandler);this.mouseClickMapHandler=this.mouseMoveMapHandler=this.doubleClickMapHandler=this.mouseDragMapHandler=this._clickMapHandler=this._mapExtentChangeHandler=this._geometryAreaHandler=null;if(this._map.snappingManager){this._map.snappingManager._stopSelectionLayerQuery();this._map.snappingManager._killOffSnapping();}},clearResult:function(){var _c=this._map;this.result=0;_1.byNode(this.resultValue.domNode).setAttribute("content","");var i;for(i=0;i<this.measureGraphics.length;i++){_c.graphics.remove(this.measureGraphics[i]);}this.measureGraphics=[];_c.graphics.remove(this.tempGraphic);},show:function(){esri.show(this.domNode);},hide:function(){esri.hide(this.domNode);},showTool:function(_d){var _e=this[_d].domNode;_e.style.display="inline";},hideTool:function(_f){var _10=this[_f].domNode;_10.style.display="none";},destroy:function(){this.closeTool();this.clearResult();this.inherited(arguments);this._map=this._geometryService=this.measureGraphic=this.measureGraphic=this.tempGraphic=null;},onMeasureEnd:function(){},_densifyGeometry:function(_11){if(this._map.cs==="Web Mercator"){_11=esri.geometry.webMercatorToGeographic(_11);}var _12;if(this._map.cs==="PCS"){_12=_11;}else{_12=esri.geometry.geodesicDensify(_11,500000);}if(this._map.cs==="Web Mercator"){_12=esri.geometry.geographicToWebMercator(_12);}return _12;},_measureAreaMouseClickHandler:function(evt){var _13;if(this._map.snappingManager){_13=this._map.snappingManager._snappingPoint;}var _14=_13||evt.mapPoint;this.inputPoints.push(_14);this._currentStartPt=_14;if(this.inputPoints.length===1){this.tempGraphic.setGeometry(new esri.geometry.Polyline(this._map.spatialReference));var i;for(i=0;i<this.measureGraphics.length;i++){this._map.graphics.remove(this.measureGraphics[i]);}this.measureGraphics=[];this.result=0;this._outputResult(this.result,esri.bundle.widgets.measurement.NLS_area_acres);this.mouseMoveMapHandler=_2.connect(this._map,"onMouseMove",this,"_measureAreaMouseMoveHandler");}this.measureGraphic=new esri.Graphic();this.measureGraphic.setSymbol(this._lineSymbol);this.measureGraphics.push(this.measureGraphic);if(this.inputPoints.length>1){var _15=new esri.geometry.Polyline(this._map.spatialReference);_15.addPath([this.inputPoints[this.inputPoints.length-2],_14]);var _16=new esri.geometry.Polyline(this._map.spatialReference);_16.addPath([this.inputPoints[0],_14]);var _17=this._densifyGeometry(_15);var _18=this._densifyGeometry(_16);this.tempGraphic.setGeometry(_18);this.measureGraphic.setGeometry(_17);this._map.graphics.add(this.measureGraphic);}},_measureAreaMouseMoveHandler:function(evt){var _19;if(this.inputPoints.length>0){var _1a=new esri.geometry.Polyline(this._map.spatialReference);var _1b;if(this._map.snappingManager){_1b=this._map.snappingManager._snappingPoint;}_19=_1b||evt.mapPoint;_1a.addPath([this._currentStartPt,_19]);var _1c=this._densifyGeometry(_1a);this.tempGraphic.setGeometry(_1c);}if(this.inputPoints.length>1){var _1d=new esri.geometry.Polyline(this._map.spatialReference);_1d.addPath([_19,this.inputPoints[0]]);var _1e=this._densifyGeometry(_1d);this.tempGraphic.setGeometry(this.tempGraphic.geometry.addPath(_1e.paths[0]));}},_measureAreaDblClickHandler:function(evt){_2.disconnect(this.mouseMoveMapHandler);this.mouseMoveMapHandler=null;var _1f=new esri.geometry.Polygon(this._map.spatialReference);var _20=[];var i;for(i=0;i<this.inputPoints.length;i++){_20.push([this.inputPoints[i].x,this.inputPoints[i].y]);}_20.push([this.inputPoints[0].x,this.inputPoints[0].y]);_1f.addRing(_20);this.inputPoints=[];this.measurementGeometry=this._densifyGeometry(_1f);this._getArea(_1f);},_getArea:function(_21){var _22=[];var _23=new esri.tasks.AreasAndLengthsParameters();_23.areaUnit=esri.tasks.GeometryService.UNIT_ACRES;_23.calculationType="geodesic";if(esri.geometry.polygonSelfIntersecting(_21)){this._geometryService.simplify([_21],_2.hitch(this,function(_24){_2.forEach(_24,_2.hitch(this,function(_25,idx){if(this._map.cs==="PCS"){_23.polygons=_24;this._geometryService.areasAndLengths(_23);return;}else{if(this._map.cs==="Web Mercator"){_25=esri.geometry.webMercatorToGeographic(_25);}}_22.push(_25);}));var _26=esri.geometry.geodesicAreas(_22,esri.Units.ACRES);this._showArea(_26[0]);}));}else{if(this._map.cs==="Web Mercator"){_21=esri.geometry.webMercatorToGeographic(_21);}_22.push(_21);if(this._map.cs==="PCS"){_23.polygons=_22;this._geometryService.areasAndLengths(_23);return;}var _27=esri.geometry.geodesicAreas(_22,esri.Units.ACRES);this._showArea(Math.abs(_27[0]));}},_outputArea:function(_28){this._showArea(Math.abs(_28.areas[0]));},_showArea:function(_29){if(_29){this.result=_29;var _2a=_1.byNode(this.unit.domNode).label;this._outputResult(this.result,_2a);}this.onMeasureEnd(this.activeTool,this.measurementGeometry);},_measureDistanceDblClickHandler:function(evt){_2.disconnect(this.mouseMoveMapHandler);this.mouseMoveMapHandler=null;var _2b=new esri.geometry.Polyline(this._map.spatialReference);_2b.addPath(this.inputPoints);_2b=this._densifyGeometry(_2b);if(this._map.cs==="PCS"){var _2c=new esri.tasks.LengthsParameters();_2c.polylines=[_2b];_2c.lengthUnit=9093;_2c.calculationType="geodesic";this._geometryService.lengths(_2c,_2.hitch(this,function(_2d){this.result=_2d.lengths[0];this._showDistance(this.result);}));}this.inputPoints=[];this.onMeasureEnd(this.activeTool,_2b);},_measureDistanceMouseClickHandler:function(evt){var _2e;if(this._map.snappingManager){_2e=this._map.snappingManager._snappingPoint;}var _2f=_2e||evt.mapPoint;this.inputPoints.push(_2f);this._currentStartPt=_2f;if(this.inputPoints.length===1){var i;for(i=0;i<this.measureGraphics.length;i++){this._map.graphics.remove(this.measureGraphics[i]);}this._map.graphics.remove(this.tempGraphic);this.measureGraphics=[];this.result=0;this._outputResult(this.result,esri.bundle.widgets.measurement.NLS_length_miles);this.tempGraphic=new esri.Graphic();this.tempGraphic.setSymbol(this._lineSymbol);this._map.graphics.add(this.tempGraphic);this.mouseMoveMapHandler=_2.connect(this._map,"onMouseMove",this,"_measureDistanceMouseMoveHandler");}this.tempGraphic.setGeometry(new esri.geometry.Polyline(this._map.spatialReference));this.flagGraphic=new esri.Graphic();this.flagGraphic.setSymbol(this._pointSymbol);this.flagGraphic.setGeometry(_2f);this.measureGraphics.push(this.flagGraphic);this._map.graphics.add(this.flagGraphic);if(this.inputPoints.length>1){this.measureGraphic=new esri.Graphic();this.measureGraphic.setSymbol(this._lineSymbol);this.measureGraphics.push(this.measureGraphic);var _30=new esri.geometry.Polyline(this._map.spatialReference);_30.addPath([this.inputPoints[this.inputPoints.length-2],_2f]);var _31=this._densifyGeometry(_30);this.measureGraphic.setGeometry(_31);this._map.graphics.add(this.measureGraphic);this.result+=this._geodesicDistance(this.inputPoints[this.inputPoints.length-2],_2f);this._showDistance(this.result);}},_measureDistanceMouseMoveHandler:function(evt){if(this.inputPoints.length>0){var _32=new esri.geometry.Polyline(this._map.spatialReference);var _33;if(this._map.snappingManager){_33=this._map.snappingManager._snappingPoint;}var _34=_33||evt.mapPoint;_32.addPath([this._currentStartPt,_34]);var _35=this._densifyGeometry(_32);this.tempGraphic.setGeometry(_35);var _36=this._geodesicDistance(this._currentStartPt,_34);this._showDistance(_36+this.result);}},_geodesicDistance:function(pt1,pt2){var _37=new esri.geometry.Polyline(this._map.spatialReference);if(this._map.cs==="PCS"){pt1=this._getGCSLocation(pt1);pt2=this._getGCSLocation(pt2);}_37.addPath([pt1,pt2]);if(this._map.cs==="Web Mercator"){_37=esri.geometry.webMercatorToGeographic(_37);}return esri.geometry.geodesicLengths([_37],esri.Units.MILES)[0];},_showDistance:function(_38){if(_38){this._outputResult(_38,_1.byNode(this.unit.domNode).label);}},_measureLocationClickHandler:function(evt){_1.byNode(this.location.domNode).setAttribute("checked",false);var _39;if(this._map.snappingManager){_39=this._map.snappingManager._snappingPoint;}var _3a=_39||evt.mapPoint;this.locationToggleButton();this.locationGraphic=new esri.Graphic();this.locationGraphic.setGeometry(_3a);this.locationGraphic.setSymbol(this._pointSymbol);this._map.graphics.add(this.locationGraphic);this.measureGraphics.push(this.locationGraphic);var _3b={mapPoint:_3a};if(this._map.cs==="PCS"){this._showCoordinates(_3b,true);}else{this._showCoordinates(_3b);}this.onMeasureEnd(this.activeTool,_3a);},_getGCSLocation:function(pt){var _3c=pt;if(this._map.cs==="Web Mercator"){_3c=esri.geometry.webMercatorToGeographic(_3c);}else{if(this._map.cs==="PCS"){if(this._map._newExtent){var _3d=Math.abs((this._map._newExtent.xmax-this._map._newExtent.xmin)/(this._map.extent.xmax-this._map.extent.xmin));var _3e=Math.abs((this._map._newExtent.ymax-this._map._newExtent.ymin)/(this._map.extent.ymax-this._map.extent.ymin));var _3f=(_3c.x-this._map.extent.xmin)*_3d+this._map._newExtent.xmin;var _40=(_3c.y-this._map.extent.ymin)*_3e+this._map._newExtent.ymin;_3c=new esri.geometry.Point(_3f,_40,this._map.spatialReference);}}}return _3c;},_projectMapExtent:function(_41){var _42=new esri.Graphic(_41);var _43=new esri.SpatialReference({wkid:4326});this._geometryService.project([_42.geometry],_43,_2.hitch(this,function(_44){if(!this.mouseMoveMapHandler&&this.activeTool==="location"){this.mouseMoveMapHandler=_2.connect(this._map,"onMouseMove",_2.hitch(this,this._showCoordinates));this.mouseDragMapHandler=_2.connect(this._map,"onMouseDrag",_2.hitch(this,function(){_1.byNode(this.resultValue.domNode).setAttribute("disabled",true);}));}this._map._newExtent=_44[0];}));},_showCoordinates:function(evt,_45){var _46;if(this._map.snappingManager){_46=this._map.snappingManager._snappingPoint;}var _47=_46||evt.mapPoint;var _48;if(!_45){_48=this._getGCSLocation(_47);this.locationX=_48.x;this.locationY=_48.y;this._outputLocationResult(_48.x,_48.y,_1.byNode(this.unit.domNode).label);}else{var _49=new esri.SpatialReference({wkid:4326});this._geometryService.project([_47],_49,_2.hitch(this,function(_4a){_48=_4a[0];this.locationX=_48.x;this.locationY=_48.y;this._outputLocationResult(_48.x,_48.y,_1.byNode(this.unit.domNode).label);}));}},_checkCS:function(_4b){if(_4b.wkid){if(_4b.wkid===3857||_4b.wkid===102100||_4b.wkid===102113){return "Web Mercator";}if(esri._isDefined(esri.WKIDUnitConversion[_4b.wkid])){return "PCS";}return "GCS";}if(_4b.wkt){if(_4b.wkt.indexOf("WGS_1984_Web_Mercator")!==-1){return "Web Mercator";}if(_4b.wkt.indexOf("PROJCS")===0){return "PCS";}return "GCS";}},_switchUnit:function(_4c){_1.byNode(this.unit.domNode).setAttribute("label",_4c);if(this.result===null){return;}this._outputResult(this.result,_4c);},_outputResult:function(_4d,_4e){var _4f=_4d*this.unitDictionary[_4e];if(_4f===0){_1.byNode(this.resultValue.domNode).setAttribute("content","");}else{if(_4f>1000000){_1.byNode(this.resultValue.domNode).setAttribute("content",_2.number.format(_4f.toPrecision(9),{pattern:this.numberPattern})+" "+_4e);}else{_1.byNode(this.resultValue.domNode).setAttribute("content",_2.number.format(_4f.toFixed(2),{pattern:this.numberPattern})+" "+_4e);}}},_switchLocationUnit:function(_50){_1.byNode(this.unit.domNode).setAttribute("label",_50);if(this.result===null||this.resultValue.domNode.innerHTML===""){return;}this._outputLocationResult(this.locationX,this.locationY,_50);},_outputLocationResult:function(x,y,_51){var lon,lat;var _52=esri.bundle.widgets.measurement;if(_51===_52.NLS_decimal_degrees){lon=x.toFixed(6);lat=y.toFixed(6);}else{if(_51===_52.NLS_deg_min_sec){var _53=false;var _54=false;if(x<0){_53=true;x=Math.abs(x);}if(y<0){_54=true;y=Math.abs(y);}lon=Math.floor(x)+"°"+Math.floor((x-Math.floor(x))*60)+"'"+Math.floor(((x-Math.floor(x))*60-Math.floor((x-Math.floor(x))*60))*60)+"\"";lat=Math.floor(y)+"°"+Math.floor((y-Math.floor(y))*60)+"'"+Math.floor(((y-Math.floor(y))*60-Math.floor((y-Math.floor(y))*60))*60)+"\"";if(_53){lon="-"+lon;}if(_54){lat="-"+lat;}}}_1.byNode(this.resultValue.domNode).setAttribute("content",esri.bundle.widgets.measurement.NLS_longitude+": "+lon+"<br/>"+esri.bundle.widgets.measurement.NLS_latitude+": "+lat);},_createLengthUnitList:function(){var _55=new _1.Menu({style:"display: none;"});var _56=esri.bundle.widgets.measurement;var _57=[_56.NLS_length_miles,_56.NLS_length_kilometers,_56.NLS_length_feet,_56.NLS_length_meters,_56.NLS_length_yards];_2.forEach(_57,_2.hitch(this,function(_58,idx){var _59=new _1.MenuItem({label:_58,onClick:_2.hitch(this,function(){this._switchUnit(_58);})});_59.setAttribute("class","unitDropDown");_55.addChild(_59);}));_1.byNode(this.unit.domNode).setAttribute("dropDown",_55);var _5a=this.units[this._defaultLengthUnit];_1.byNode(this.unit.domNode).setAttribute("label",_5a);},_createAreaUnitList:function(){var _5b=new _1.Menu({style:"display: none;"});var _5c=esri.bundle.widgets.measurement;var _5d=[_5c.NLS_area_acres,_5c.NLS_area_sq_miles,_5c.NLS_area_sq_kilometers,_5c.NLS_area_hectares,_5c.NLS_area_sq_yards,_5c.NLS_area_sq_feet,_5c.NLS_area_sq_meters];_2.forEach(_5d,_2.hitch(this,function(_5e,idx){var _5f=new _1.MenuItem({label:_5e,onClick:_2.hitch(this,function(){this._switchUnit(_5e);})});_5f.setAttribute("class","unitDropDown");_5b.addChild(_5f);}));_1.byNode(this.unit.domNode).setAttribute("dropDown",_5b);var _60=this.units[this._defaultAreaUnit];_1.byNode(this.unit.domNode).setAttribute("label",_60);},_createLocationUnitList:function(){var _61=new _1.Menu({style:"display: none;"});var _62=esri.bundle.widgets.measurement;var _63=[_62.NLS_decimal_degrees,_62.NLS_deg_min_sec];_2.forEach(_63,_2.hitch(this,function(_64,idx){var _65=new _1.MenuItem({label:_64,onClick:_2.hitch(this,function(){this._switchLocationUnit(_64);})});_65.setAttribute("class","unitDropDown");_61.addChild(_65);}));_1.byNode(this.unit.domNode).setAttribute("dropDown",_61);var _66=this.units[this._defaultLocationUnit];_1.byNode(this.unit.domNode).setAttribute("label",_66);}});});