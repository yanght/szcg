/*
	Copyright (c) 2004-2011, The Dojo Foundation All Rights Reserved.
	Available via Academic Free License >= 2.1 OR the modified BSD license.
	see: http://dojotoolkit.org/license for details
*/

/*
	This is an optimized version of Dojo, built for deployment and not for
	development. To get sources and documentation, please visit:

		http://dojotoolkit.org
*/

//>>built
require({cache:{"dojox/gfx/shape":function(){define("dojox/gfx/shape",["./_base","dojo/_base/lang","dojo/_base/declare","dojo/_base/kernel","dojo/_base/sniff","dojo/_base/connect","dojo/_base/array","dojo/dom-construct","dojo/_base/Color","./matrix"],function(g,_1,_2,_3,_4,_5,_6,_7,_8,_9){var _a=g.shape={};var _b={};var _c={};_a.register=function(s){var t=s.declaredClass.split(".").pop();var i=t in _b?++_b[t]:((_b[t]=0));var _d=t+i;_c[_d]=s;return _d;};_a.byId=function(id){return _c[id];};_a.dispose=function(s){delete _c[s.getUID()];};_a.Shape=_2("dojox.gfx.shape.Shape",null,{constructor:function(){this.rawNode=null;this.shape=null;this.matrix=null;this.fillStyle=null;this.strokeStyle=null;this.bbox=null;this.parent=null;this.parentMatrix=null;var _e=_a.register(this);this.getUID=function(){return _e;};},destroy:function(){_a.dispose(this);},getNode:function(){return this.rawNode;},getShape:function(){return this.shape;},getTransform:function(){return this.matrix;},getFill:function(){return this.fillStyle;},getStroke:function(){return this.strokeStyle;},getParent:function(){return this.parent;},getBoundingBox:function(){return this.bbox;},getTransformedBoundingBox:function(){var b=this.getBoundingBox();if(!b){return null;}var m=this._getRealMatrix(),gm=_9;return [gm.multiplyPoint(m,b.x,b.y),gm.multiplyPoint(m,b.x+b.width,b.y),gm.multiplyPoint(m,b.x+b.width,b.y+b.height),gm.multiplyPoint(m,b.x,b.y+b.height)];},getEventSource:function(){return this.rawNode;},setClip:function(_f){this.clip=_f;},getClip:function(){return this.clip;},setShape:function(_10){this.shape=g.makeParameters(this.shape,_10);this.bbox=null;return this;},setFill:function(_11){if(!_11){this.fillStyle=null;return this;}var f=null;if(typeof (_11)=="object"&&"type" in _11){switch(_11.type){case "linear":f=g.makeParameters(g.defaultLinearGradient,_11);break;case "radial":f=g.makeParameters(g.defaultRadialGradient,_11);break;case "pattern":f=g.makeParameters(g.defaultPattern,_11);break;}}else{f=g.normalizeColor(_11);}this.fillStyle=f;return this;},setStroke:function(_12){if(!_12){this.strokeStyle=null;return this;}if(typeof _12=="string"||_1.isArray(_12)||_12 instanceof _8){_12={color:_12};}var s=this.strokeStyle=g.makeParameters(g.defaultStroke,_12);s.color=g.normalizeColor(s.color);return this;},setTransform:function(_13){this.matrix=_9.clone(_13?_9.normalize(_13):_9.identity);return this._applyTransform();},_applyTransform:function(){return this;},moveToFront:function(){var p=this.getParent();if(p){p._moveChildToFront(this);this._moveToFront();}return this;},moveToBack:function(){var p=this.getParent();if(p){p._moveChildToBack(this);this._moveToBack();}return this;},_moveToFront:function(){},_moveToBack:function(){},applyRightTransform:function(_14){return _14?this.setTransform([this.matrix,_14]):this;},applyLeftTransform:function(_15){return _15?this.setTransform([_15,this.matrix]):this;},applyTransform:function(_16){return _16?this.setTransform([this.matrix,_16]):this;},removeShape:function(_17){if(this.parent){this.parent.remove(this,_17);}return this;},_setParent:function(_18,_19){this.parent=_18;return this._updateParentMatrix(_19);},_updateParentMatrix:function(_1a){this.parentMatrix=_1a?_9.clone(_1a):null;return this._applyTransform();},_getRealMatrix:function(){var m=this.matrix;var p=this.parent;while(p){if(p.matrix){m=_9.multiply(p.matrix,m);}p=p.parent;}return m;}});_a._eventsProcessing={connect:function(_1b,_1c,_1d){return _5.connect(this.getEventSource(),_1b,_a.fixCallback(this,g.fixTarget,_1c,_1d));},disconnect:function(_1e){_5.disconnect(_1e);}};_a.fixCallback=function(_1f,_20,_21,_22){if(!_22){_22=_21;_21=null;}if(_1.isString(_22)){_21=_21||_3.global;if(!_21[_22]){throw (["dojox.gfx.shape.fixCallback: scope[\"",_22,"\"] is null (scope=\"",_21,"\")"].join(""));}return function(e){return _20(e,_1f)?_21[_22].apply(_21,arguments||[]):undefined;};}return !_21?function(e){return _20(e,_1f)?_22.apply(_21,arguments):undefined;}:function(e){return _20(e,_1f)?_22.apply(_21,arguments||[]):undefined;};};_1.extend(_a.Shape,_a._eventsProcessing);_a.Container={_init:function(){this.children=[];},openBatch:function(){},closeBatch:function(){},add:function(_23){var _24=_23.getParent();if(_24){_24.remove(_23,true);}this.children.push(_23);return _23._setParent(this,this._getRealMatrix());},remove:function(_25,_26){for(var i=0;i<this.children.length;++i){if(this.children[i]==_25){if(_26){}else{_25.parent=null;_25.parentMatrix=null;}this.children.splice(i,1);break;}}return this;},clear:function(_27){var _28;for(var i=0;i<this.children.length;++i){_28=this.children[i];_28.parent=null;_28.parentMatrix=null;if(_27){_28.destroy();}}this.children=[];return this;},getBoundingBox:function(){if(this.children){var _29=null;_6.forEach(this.children,function(_2a){var bb=_2a.getBoundingBox();if(bb){var ct=_2a.getTransform();if(ct){bb=_9.multiplyRectangle(ct,bb);}if(_29){_29.x=Math.min(_29.x,bb.x);_29.y=Math.min(_29.y,bb.y);_29.endX=Math.max(_29.endX,bb.x+bb.width);_29.endY=Math.max(_29.endY,bb.y+bb.height);}else{_29={x:bb.x,y:bb.y,endX:bb.x+bb.width,endY:bb.y+bb.height};}}});if(_29){_29.width=_29.endX-_29.x;_29.height=_29.endY-_29.y;}return _29;}return null;},_moveChildToFront:function(_2b){for(var i=0;i<this.children.length;++i){if(this.children[i]==_2b){this.children.splice(i,1);this.children.push(_2b);break;}}return this;},_moveChildToBack:function(_2c){for(var i=0;i<this.children.length;++i){if(this.children[i]==_2c){this.children.splice(i,1);this.children.unshift(_2c);break;}}return this;}};_a.Surface=_2("dojox.gfx.shape.Surface",null,{constructor:function(){this.rawNode=null;this._parent=null;this._nodes=[];this._events=[];},destroy:function(){_6.forEach(this._nodes,_7.destroy);this._nodes=[];_6.forEach(this._events,_5.disconnect);this._events=[];this.rawNode=null;if(_4("ie")){while(this._parent.lastChild){_7.destroy(this._parent.lastChild);}}else{this._parent.innerHTML="";}this._parent=null;},getEventSource:function(){return this.rawNode;},_getRealMatrix:function(){return null;},isLoaded:true,onLoad:function(_2d){},whenLoaded:function(_2e,_2f){var f=_1.hitch(_2e,_2f);if(this.isLoaded){f(this);}else{var h=_5.connect(this,"onLoad",function(_30){_5.disconnect(h);f(_30);});}}});_1.extend(_a.Surface,_a._eventsProcessing);_a.Rect=_2("dojox.gfx.shape.Rect",_a.Shape,{constructor:function(_31){this.shape=g.getDefault("Rect");this.rawNode=_31;},getBoundingBox:function(){return this.shape;}});_a.Ellipse=_2("dojox.gfx.shape.Ellipse",_a.Shape,{constructor:function(_32){this.shape=g.getDefault("Ellipse");this.rawNode=_32;},getBoundingBox:function(){if(!this.bbox){var _33=this.shape;this.bbox={x:_33.cx-_33.rx,y:_33.cy-_33.ry,width:2*_33.rx,height:2*_33.ry};}return this.bbox;}});_a.Circle=_2("dojox.gfx.shape.Circle",_a.Shape,{constructor:function(_34){this.shape=g.getDefault("Circle");this.rawNode=_34;},getBoundingBox:function(){if(!this.bbox){var _35=this.shape;this.bbox={x:_35.cx-_35.r,y:_35.cy-_35.r,width:2*_35.r,height:2*_35.r};}return this.bbox;}});_a.Line=_2("dojox.gfx.shape.Line",_a.Shape,{constructor:function(_36){this.shape=g.getDefault("Line");this.rawNode=_36;},getBoundingBox:function(){if(!this.bbox){var _37=this.shape;this.bbox={x:Math.min(_37.x1,_37.x2),y:Math.min(_37.y1,_37.y2),width:Math.abs(_37.x2-_37.x1),height:Math.abs(_37.y2-_37.y1)};}return this.bbox;}});_a.Polyline=_2("dojox.gfx.shape.Polyline",_a.Shape,{constructor:function(_38){this.shape=g.getDefault("Polyline");this.rawNode=_38;},setShape:function(_39,_3a){if(_39&&_39 instanceof Array){this.inherited(arguments,[{points:_39}]);if(_3a&&this.shape.points.length){this.shape.points.push(this.shape.points[0]);}}else{this.inherited(arguments,[_39]);}return this;},_normalizePoints:function(){var p=this.shape.points,l=p&&p.length;if(l&&typeof p[0]=="number"){var _3b=[];for(var i=0;i<l;i+=2){_3b.push({x:p[i],y:p[i+1]});}this.shape.points=_3b;}},getBoundingBox:function(){if(!this.bbox&&this.shape.points.length){var p=this.shape.points;var l=p.length;var t=p[0];var _3c={l:t.x,t:t.y,r:t.x,b:t.y};for(var i=1;i<l;++i){t=p[i];if(_3c.l>t.x){_3c.l=t.x;}if(_3c.r<t.x){_3c.r=t.x;}if(_3c.t>t.y){_3c.t=t.y;}if(_3c.b<t.y){_3c.b=t.y;}}this.bbox={x:_3c.l,y:_3c.t,width:_3c.r-_3c.l,height:_3c.b-_3c.t};}return this.bbox;}});_a.Image=_2("dojox.gfx.shape.Image",_a.Shape,{constructor:function(_3d){this.shape=g.getDefault("Image");this.rawNode=_3d;},getBoundingBox:function(){return this.shape;},setStroke:function(){return this;},setFill:function(){return this;}});_a.Text=_2(_a.Shape,{constructor:function(_3e){this.fontStyle=null;this.shape=g.getDefault("Text");this.rawNode=_3e;},getFont:function(){return this.fontStyle;},setFont:function(_3f){this.fontStyle=typeof _3f=="string"?g.splitFontString(_3f):g.makeParameters(g.defaultFont,_3f);this._setFont();return this;}});_a.Creator={createShape:function(_40){switch(_40.type){case g.defaultPath.type:return this.createPath(_40);case g.defaultRect.type:return this.createRect(_40);case g.defaultCircle.type:return this.createCircle(_40);case g.defaultEllipse.type:return this.createEllipse(_40);case g.defaultLine.type:return this.createLine(_40);case g.defaultPolyline.type:return this.createPolyline(_40);case g.defaultImage.type:return this.createImage(_40);case g.defaultText.type:return this.createText(_40);case g.defaultTextPath.type:return this.createTextPath(_40);}return null;},createGroup:function(){return this.createObject(g.Group);},createRect:function(_41){return this.createObject(g.Rect,_41);},createEllipse:function(_42){return this.createObject(g.Ellipse,_42);},createCircle:function(_43){return this.createObject(g.Circle,_43);},createLine:function(_44){return this.createObject(g.Line,_44);},createPolyline:function(_45){return this.createObject(g.Polyline,_45);},createImage:function(_46){return this.createObject(g.Image,_46);},createText:function(_47){return this.createObject(g.Text,_47);},createPath:function(_48){return this.createObject(g.Path,_48);},createTextPath:function(_49){return this.createObject(g.TextPath,{}).setText(_49);},createObject:function(_4a,_4b){return null;}};return _a;});},"dojox/gfx/path":function(){define("dojox/gfx/path",["./_base","dojo/_base/lang","dojo/_base/declare","./matrix","./shape"],function(g,_4c,_4d,_4e,_4f){var _50=_4d("dojox.gfx.path.Path",_4f.Shape,{constructor:function(_51){this.shape=_4c.clone(g.defaultPath);this.segments=[];this.tbbox=null;this.absolute=true;this.last={};this.rawNode=_51;this.segmented=false;},setAbsoluteMode:function(_52){this._confirmSegmented();this.absolute=typeof _52=="string"?(_52=="absolute"):_52;return this;},getAbsoluteMode:function(){this._confirmSegmented();return this.absolute;},getBoundingBox:function(){this._confirmSegmented();return (this.bbox&&("l" in this.bbox))?{x:this.bbox.l,y:this.bbox.t,width:this.bbox.r-this.bbox.l,height:this.bbox.b-this.bbox.t}:null;},_getRealBBox:function(){this._confirmSegmented();if(this.tbbox){return this.tbbox;}var _53=this.bbox,_4e=this._getRealMatrix();this.bbox=null;for(var i=0,len=this.segments.length;i<len;++i){this._updateWithSegment(this.segments[i],_4e);}var t=this.bbox;this.bbox=_53;this.tbbox=t?[{x:t.l,y:t.t},{x:t.r,y:t.t},{x:t.r,y:t.b},{x:t.l,y:t.b}]:null;return this.tbbox;},getLastPosition:function(){this._confirmSegmented();return "x" in this.last?this.last:null;},_applyTransform:function(){this.tbbox=null;return this.inherited(arguments);},_updateBBox:function(x,y,m){if(m){var t=_4e.multiplyPoint(m,x,y);x=t.x;y=t.y;}if(this.bbox&&("l" in this.bbox)){if(this.bbox.l>x){this.bbox.l=x;}if(this.bbox.r<x){this.bbox.r=x;}if(this.bbox.t>y){this.bbox.t=y;}if(this.bbox.b<y){this.bbox.b=y;}}else{this.bbox={l:x,b:y,r:x,t:y};}},_updateWithSegment:function(_54,_55){var n=_54.args,l=n.length,i;switch(_54.action){case "M":case "L":case "C":case "S":case "Q":case "T":for(i=0;i<l;i+=2){this._updateBBox(n[i],n[i+1],_55);}this.last.x=n[l-2];this.last.y=n[l-1];this.absolute=true;break;case "H":for(i=0;i<l;++i){this._updateBBox(n[i],this.last.y,_55);}this.last.x=n[l-1];this.absolute=true;break;case "V":for(i=0;i<l;++i){this._updateBBox(this.last.x,n[i],_55);}this.last.y=n[l-1];this.absolute=true;break;case "m":var _56=0;if(!("x" in this.last)){this._updateBBox(this.last.x=n[0],this.last.y=n[1],_55);_56=2;}for(i=_56;i<l;i+=2){this._updateBBox(this.last.x+=n[i],this.last.y+=n[i+1],_55);}this.absolute=false;break;case "l":case "t":for(i=0;i<l;i+=2){this._updateBBox(this.last.x+=n[i],this.last.y+=n[i+1],_55);}this.absolute=false;break;case "h":for(i=0;i<l;++i){this._updateBBox(this.last.x+=n[i],this.last.y,_55);}this.absolute=false;break;case "v":for(i=0;i<l;++i){this._updateBBox(this.last.x,this.last.y+=n[i],_55);}this.absolute=false;break;case "c":for(i=0;i<l;i+=6){this._updateBBox(this.last.x+n[i],this.last.y+n[i+1],_55);this._updateBBox(this.last.x+n[i+2],this.last.y+n[i+3],_55);this._updateBBox(this.last.x+=n[i+4],this.last.y+=n[i+5],_55);}this.absolute=false;break;case "s":case "q":for(i=0;i<l;i+=4){this._updateBBox(this.last.x+n[i],this.last.y+n[i+1],_55);this._updateBBox(this.last.x+=n[i+2],this.last.y+=n[i+3],_55);}this.absolute=false;break;case "A":for(i=0;i<l;i+=7){this._updateBBox(n[i+5],n[i+6],_55);}this.last.x=n[l-2];this.last.y=n[l-1];this.absolute=true;break;case "a":for(i=0;i<l;i+=7){this._updateBBox(this.last.x+=n[i+5],this.last.y+=n[i+6],_55);}this.absolute=false;break;}var _57=[_54.action];for(i=0;i<l;++i){_57.push(g.formatNumber(n[i],true));}if(typeof this.shape.path=="string"){this.shape.path+=_57.join("");}else{Array.prototype.push.apply(this.shape.path,_57);}},_validSegments:{m:2,l:2,h:1,v:1,c:6,s:4,q:4,t:2,a:7,z:0},_pushSegment:function(_58,_59){this.tbbox=null;var _5a=this._validSegments[_58.toLowerCase()],_5b;if(typeof _5a=="number"){if(_5a){if(_59.length>=_5a){_5b={action:_58,args:_59.slice(0,_59.length-_59.length%_5a)};this.segments.push(_5b);this._updateWithSegment(_5b);}}else{_5b={action:_58,args:[]};this.segments.push(_5b);this._updateWithSegment(_5b);}}},_collectArgs:function(_5c,_5d){for(var i=0;i<_5d.length;++i){var t=_5d[i];if(typeof t=="boolean"){_5c.push(t?1:0);}else{if(typeof t=="number"){_5c.push(t);}else{if(t instanceof Array){this._collectArgs(_5c,t);}else{if("x" in t&&"y" in t){_5c.push(t.x,t.y);}}}}}},moveTo:function(){this._confirmSegmented();var _5e=[];this._collectArgs(_5e,arguments);this._pushSegment(this.absolute?"M":"m",_5e);return this;},lineTo:function(){this._confirmSegmented();var _5f=[];this._collectArgs(_5f,arguments);this._pushSegment(this.absolute?"L":"l",_5f);return this;},hLineTo:function(){this._confirmSegmented();var _60=[];this._collectArgs(_60,arguments);this._pushSegment(this.absolute?"H":"h",_60);return this;},vLineTo:function(){this._confirmSegmented();var _61=[];this._collectArgs(_61,arguments);this._pushSegment(this.absolute?"V":"v",_61);return this;},curveTo:function(){this._confirmSegmented();var _62=[];this._collectArgs(_62,arguments);this._pushSegment(this.absolute?"C":"c",_62);return this;},smoothCurveTo:function(){this._confirmSegmented();var _63=[];this._collectArgs(_63,arguments);this._pushSegment(this.absolute?"S":"s",_63);return this;},qCurveTo:function(){this._confirmSegmented();var _64=[];this._collectArgs(_64,arguments);this._pushSegment(this.absolute?"Q":"q",_64);return this;},qSmoothCurveTo:function(){this._confirmSegmented();var _65=[];this._collectArgs(_65,arguments);this._pushSegment(this.absolute?"T":"t",_65);return this;},arcTo:function(){this._confirmSegmented();var _66=[];this._collectArgs(_66,arguments);this._pushSegment(this.absolute?"A":"a",_66);return this;},closePath:function(){this._confirmSegmented();this._pushSegment("Z",[]);return this;},_confirmSegmented:function(){if(!this.segmented){var _67=this.shape.path;this.shape.path=[];this._setPath(_67);this.shape.path=this.shape.path.join("");this.segmented=true;}},_setPath:function(_68){var p=_4c.isArray(_68)?_68:_68.match(g.pathSvgRegExp);this.segments=[];this.absolute=true;this.bbox={};this.last={};if(!p){return;}var _69="",_6a=[],l=p.length;for(var i=0;i<l;++i){var t=p[i],x=parseFloat(t);if(isNaN(x)){if(_69){this._pushSegment(_69,_6a);}_6a=[];_69=t;}else{_6a.push(x);}}this._pushSegment(_69,_6a);},setShape:function(_6b){this.inherited(arguments,[typeof _6b=="string"?{path:_6b}:_6b]);this.segmented=false;this.segments=[];if(!g.lazyPathSegmentation){this._confirmSegmented();}return this;},_2PI:Math.PI*2});var _6c=_4d("dojox.gfx.path.TextPath",_50,{constructor:function(_6d){if(!("text" in this)){this.text=_4c.clone(g.defaultTextPath);}if(!("fontStyle" in this)){this.fontStyle=_4c.clone(g.defaultFont);}},getText:function(){return this.text;},setText:function(_6e){this.text=g.makeParameters(this.text,typeof _6e=="string"?{text:_6e}:_6e);this._setText();return this;},getFont:function(){return this.fontStyle;},setFont:function(_6f){this.fontStyle=typeof _6f=="string"?g.splitFontString(_6f):g.makeParameters(g.defaultFont,_6f);this._setFont();return this;}});return g.path={Path:_50,TextPath:_6c};});},"*noref":1}});define("dojox/gfx/svg",["dojo/_base/lang","dojo/_base/window","dojo/dom","dojo/_base/declare","dojo/_base/array","dojo/dom-geometry","dojo/dom-attr","dojo/_base/Color","./_base","./shape","./path"],function(_70,win,dom,_71,arr,_72,_73,_74,g,gs,_75){var svg=g.svg={};svg.useSvgWeb=(typeof window.svgweb!="undefined");var _76=navigator.userAgent.toLowerCase(),_77=_76.search("iphone")>-1||_76.search("ipad")>-1||_76.search("ipod")>-1;function _78(ns,_79){if(win.doc.createElementNS){return win.doc.createElementNS(ns,_79);}else{return win.doc.createElement(_79);}};function _7a(_7b,ns,_7c,_7d){if(_7b.setAttributeNS){return _7b.setAttributeNS(ns,_7c,_7d);}else{return _7b.setAttribute(_7c,_7d);}};function _7e(_7f){if(svg.useSvgWeb){return win.doc.createTextNode(_7f,true);}else{return win.doc.createTextNode(_7f);}};function _80(){if(svg.useSvgWeb){return win.doc.createDocumentFragment(true);}else{return win.doc.createDocumentFragment();}};svg.xmlns={xlink:"http://www.w3.org/1999/xlink",svg:"http://www.w3.org/2000/svg"};svg.getRef=function(_81){if(!_81||_81=="none"){return null;}if(_81.match(/^url\(#.+\)$/)){return dom.byId(_81.slice(5,-1));}if(_81.match(/^#dojoUnique\d+$/)){return dom.byId(_81.slice(1));}return null;};svg.dasharray={solid:"none",shortdash:[4,1],shortdot:[1,1],shortdashdot:[4,1,1,1],shortdashdotdot:[4,1,1,1,1,1],dot:[1,3],dash:[4,3],longdash:[8,3],dashdot:[4,3,1,3],longdashdot:[8,3,1,3],longdashdotdot:[8,3,1,3,1,3]};var _82=0;svg.Shape=_71("dojox.gfx.svg.Shape",gs.Shape,{destroy:function(){if(this.fillStyle&&"type" in this.fillStyle){var _83=this.rawNode.getAttribute("fill"),ref=svg.getRef(_83);if(ref){ref.parentNode.removeChild(ref);}}if(this.clip){var _84=this.rawNode.getAttribute("clip-path");if(_84){var _85=dom.byId(_84.match(/gfx_clip[\d]+/)[0]);_85&&_85.parentNode.removeChild(_85);}}this.rawNode=null;gs.Shape.prototype.destroy.apply(this,arguments);},setFill:function(_86){if(!_86){this.fillStyle=null;this.rawNode.setAttribute("fill","none");this.rawNode.setAttribute("fill-opacity",0);return this;}var f;var _87=function(x){this.setAttribute(x,f[x].toFixed(8));};if(typeof (_86)=="object"&&"type" in _86){switch(_86.type){case "linear":f=g.makeParameters(g.defaultLinearGradient,_86);var _88=this._setFillObject(f,"linearGradient");arr.forEach(["x1","y1","x2","y2"],_87,_88);break;case "radial":f=g.makeParameters(g.defaultRadialGradient,_86);var _89=this._setFillObject(f,"radialGradient");arr.forEach(["cx","cy","r"],_87,_89);break;case "pattern":f=g.makeParameters(g.defaultPattern,_86);var _8a=this._setFillObject(f,"pattern");arr.forEach(["x","y","width","height"],_87,_8a);break;}this.fillStyle=f;return this;}f=g.normalizeColor(_86);this.fillStyle=f;this.rawNode.setAttribute("fill",f.toCss());this.rawNode.setAttribute("fill-opacity",f.a);this.rawNode.setAttribute("fill-rule","evenodd");return this;},setStroke:function(_8b){var rn=this.rawNode;if(!_8b){this.strokeStyle=null;rn.setAttribute("stroke","none");rn.setAttribute("stroke-opacity",0);return this;}if(typeof _8b=="string"||_70.isArray(_8b)||_8b instanceof _74){_8b={color:_8b};}var s=this.strokeStyle=g.makeParameters(g.defaultStroke,_8b);s.color=g.normalizeColor(s.color);if(s){rn.setAttribute("stroke",s.color.toCss());rn.setAttribute("stroke-opacity",s.color.a);rn.setAttribute("stroke-width",s.width);rn.setAttribute("stroke-linecap",s.cap);if(typeof s.join=="number"){rn.setAttribute("stroke-linejoin","miter");rn.setAttribute("stroke-miterlimit",s.join);}else{rn.setAttribute("stroke-linejoin",s.join);}var da=s.style.toLowerCase();if(da in svg.dasharray){da=svg.dasharray[da];}if(da instanceof Array){da=_70._toArray(da);for(var i=0;i<da.length;++i){da[i]*=s.width;}if(s.cap!="butt"){for(var i=0;i<da.length;i+=2){da[i]-=s.width;if(da[i]<1){da[i]=1;}}for(var i=1;i<da.length;i+=2){da[i]+=s.width;}}da=da.join(",");}rn.setAttribute("stroke-dasharray",da);rn.setAttribute("dojoGfxStrokeStyle",s.style);}return this;},_getParentSurface:function(){var _8c=this.parent;for(;_8c&&!(_8c instanceof g.Surface);_8c=_8c.parent){}return _8c;},_setFillObject:function(f,_8d){var _8e=svg.xmlns.svg;this.fillStyle=f;var _8f=this._getParentSurface(),_90=_8f.defNode,_91=this.rawNode.getAttribute("fill"),ref=svg.getRef(_91);if(ref){_91=ref;if(_91.tagName.toLowerCase()!=_8d.toLowerCase()){var id=_91.id;_91.parentNode.removeChild(_91);_91=_78(_8e,_8d);_91.setAttribute("id",id);_90.appendChild(_91);}else{while(_91.childNodes.length){_91.removeChild(_91.lastChild);}}}else{_91=_78(_8e,_8d);_91.setAttribute("id",g._base._getUniqueId());_90.appendChild(_91);}if(_8d=="pattern"){_91.setAttribute("patternUnits","userSpaceOnUse");var img=_78(_8e,"image");img.setAttribute("x",0);img.setAttribute("y",0);img.setAttribute("width",f.width.toFixed(8));img.setAttribute("height",f.height.toFixed(8));_7a(img,svg.xmlns.xlink,"xlink:href",f.src);_91.appendChild(img);}else{_91.setAttribute("gradientUnits","userSpaceOnUse");for(var i=0;i<f.colors.length;++i){var c=f.colors[i],t=_78(_8e,"stop"),cc=c.color=g.normalizeColor(c.color);t.setAttribute("offset",c.offset.toFixed(8));t.setAttribute("stop-color",cc.toCss());t.setAttribute("stop-opacity",cc.a);_91.appendChild(t);}}this.rawNode.setAttribute("fill","url(#"+_91.getAttribute("id")+")");this.rawNode.removeAttribute("fill-opacity");this.rawNode.setAttribute("fill-rule","evenodd");return _91;},_applyTransform:function(){var _92=this.matrix;if(_92){var tm=this.matrix;this.rawNode.setAttribute("transform","matrix("+tm.xx.toFixed(8)+","+tm.yx.toFixed(8)+","+tm.xy.toFixed(8)+","+tm.yy.toFixed(8)+","+tm.dx.toFixed(8)+","+tm.dy.toFixed(8)+")");}else{this.rawNode.removeAttribute("transform");}return this;},setRawNode:function(_93){var r=this.rawNode=_93;if(this.shape.type!="image"){r.setAttribute("fill","none");}r.setAttribute("fill-opacity",0);r.setAttribute("stroke","none");r.setAttribute("stroke-opacity",0);r.setAttribute("stroke-width",1);r.setAttribute("stroke-linecap","butt");r.setAttribute("stroke-linejoin","miter");r.setAttribute("stroke-miterlimit",4);r.__gfxObject__=this.getUID();},setShape:function(_94){this.shape=g.makeParameters(this.shape,_94);for(var i in this.shape){if(i!="type"){this.rawNode.setAttribute(i,this.shape[i]);}}this.bbox=null;return this;},_moveToFront:function(){this.rawNode.parentNode.appendChild(this.rawNode);return this;},_moveToBack:function(){this.rawNode.parentNode.insertBefore(this.rawNode,this.rawNode.parentNode.firstChild);return this;},setClip:function(_95){this.inherited(arguments);var _96=_95?"width" in _95?"rect":"cx" in _95?"ellipse":"points" in _95?"polyline":"d" in _95?"path":null:null;if(_95&&!_96){return this;}if(_96==="polyline"){_95=_70.clone(_95);_95.points=_95.points.join(",");}var _97,_98,_99=_73.get(this.rawNode,"clip-path");if(_99){_97=dom.byId(_99.match(/gfx_clip[\d]+/)[0]);if(_97){_97.removeChild(_97.childNodes[0]);}}if(_95){if(_97){_98=_78(svg.xmlns.svg,_96);_97.appendChild(_98);}else{var _9a=++_82;var _9b="gfx_clip"+_9a;var _9c="url(#"+_9b+")";this.rawNode.setAttribute("clip-path",_9c);_97=_78(svg.xmlns.svg,"clipPath");_98=_78(svg.xmlns.svg,_96);_97.appendChild(_98);this.rawNode.parentNode.appendChild(_97);_73.set(_97,"id",_9b);}_73.set(_98,_95);}else{this.rawNode.removeAttribute("clip-path");if(_97){_97.parentNode.removeChild(_97);}}return this;},_removeClipNode:function(){var _9d,_9e=_73.get(this.rawNode,"clip-path");if(_9e){_9d=dom.byId(_9e.match(/gfx_clip[\d]+/)[0]);if(_9d){_9d.parentNode.removeChild(_9d);}}return _9d;}});svg.Group=_71("dojox.gfx.svg.Group",svg.Shape,{constructor:function(){gs.Container._init.call(this);},setRawNode:function(_9f){this.rawNode=_9f;this.rawNode.__gfxObject__=this.getUID();},destroy:function(){this.clear(true);svg.Shape.prototype.destroy.apply(this,arguments);}});svg.Group.nodeType="g";svg.Rect=_71("dojox.gfx.svg.Rect",[svg.Shape,gs.Rect],{setShape:function(_a0){this.shape=g.makeParameters(this.shape,_a0);this.bbox=null;for(var i in this.shape){if(i!="type"&&i!="r"){this.rawNode.setAttribute(i,this.shape[i]);}}if(this.shape.r!=null){this.rawNode.setAttribute("ry",this.shape.r);this.rawNode.setAttribute("rx",this.shape.r);}return this;}});svg.Rect.nodeType="rect";svg.Ellipse=_71("dojox.gfx.svg.Ellipse",[svg.Shape,gs.Ellipse],{});svg.Ellipse.nodeType="ellipse";svg.Circle=_71("dojox.gfx.svg.Circle",[svg.Shape,gs.Circle],{});svg.Circle.nodeType="circle";svg.Line=_71("dojox.gfx.svg.Line",[svg.Shape,gs.Line],{});svg.Line.nodeType="line";svg.Polyline=_71("dojox.gfx.svg.Polyline",[svg.Shape,gs.Polyline],{setShape:function(_a1,_a2){if(_a1&&_a1 instanceof Array){this.shape=g.makeParameters(this.shape,{points:_a1});if(_a2&&this.shape.points.length){this.shape.points.push(this.shape.points[0]);}}else{this.shape=g.makeParameters(this.shape,_a1);}this.bbox=null;this._normalizePoints();var _a3=[],p=this.shape.points;for(var i=0;i<p.length;++i){_a3.push(p[i].x.toFixed(8),p[i].y.toFixed(8));}this.rawNode.setAttribute("points",_a3.join(" "));return this;}});svg.Polyline.nodeType="polyline";svg.Image=_71("dojox.gfx.svg.Image",[svg.Shape,gs.Image],{setShape:function(_a4){this.shape=g.makeParameters(this.shape,_a4);this.bbox=null;var _a5=this.rawNode;for(var i in this.shape){if(i!="type"&&i!="src"){_a5.setAttribute(i,this.shape[i]);}}_a5.setAttribute("preserveAspectRatio","none");_7a(_a5,svg.xmlns.xlink,"xlink:href",this.shape.src);_a5.__gfxObject__=this.getUID();return this;}});svg.Image.nodeType="image";svg.Text=_71("dojox.gfx.svg.Text",[svg.Shape,gs.Text],{setShape:function(_a6){this.shape=g.makeParameters(this.shape,_a6);this.bbox=null;var r=this.rawNode,s=this.shape;r.setAttribute("x",s.x);r.setAttribute("y",s.y);r.setAttribute("text-anchor",s.align);r.setAttribute("text-decoration",s.decoration);r.setAttribute("rotate",s.rotated?90:0);r.setAttribute("kerning",s.kerning?"auto":0);r.setAttribute("text-rendering","optimizeLegibility");if(r.firstChild){r.firstChild.nodeValue=s.text;}else{r.appendChild(_7e(s.text));}return this;},getTextWidth:function(){var _a7=this.rawNode,_a8=_a7.parentNode,_a9=_a7.cloneNode(true);_a9.style.visibility="hidden";var _aa=0,_ab=_a9.firstChild.nodeValue;_a8.appendChild(_a9);if(_ab!=""){while(!_aa){if(_a9.getBBox){_aa=parseInt(_a9.getBBox().width);}else{_aa=68;}}}_a8.removeChild(_a9);return _aa;}});svg.Text.nodeType="text";svg.Path=_71("dojox.gfx.svg.Path",[svg.Shape,_75.Path],{_updateWithSegment:function(_ac){this.inherited(arguments);if(typeof (this.shape.path)=="string"){this.rawNode.setAttribute("d",this.shape.path);}},setShape:function(_ad){this.inherited(arguments);if(this.shape.path){this.rawNode.setAttribute("d",this.shape.path);}else{this.rawNode.removeAttribute("d");}return this;}});svg.Path.nodeType="path";svg.TextPath=_71("dojox.gfx.svg.TextPath",[svg.Shape,_75.TextPath],{_updateWithSegment:function(_ae){this.inherited(arguments);this._setTextPath();},setShape:function(_af){this.inherited(arguments);this._setTextPath();return this;},_setTextPath:function(){if(typeof this.shape.path!="string"){return;}var r=this.rawNode;if(!r.firstChild){var tp=_78(svg.xmlns.svg,"textPath"),tx=_7e("");tp.appendChild(tx);r.appendChild(tp);}var ref=r.firstChild.getAttributeNS(svg.xmlns.xlink,"href"),_b0=ref&&svg.getRef(ref);if(!_b0){var _b1=this._getParentSurface();if(_b1){var _b2=_b1.defNode;_b0=_78(svg.xmlns.svg,"path");var id=g._base._getUniqueId();_b0.setAttribute("id",id);_b2.appendChild(_b0);_7a(r.firstChild,svg.xmlns.xlink,"xlink:href","#"+id);}}if(_b0){_b0.setAttribute("d",this.shape.path);}},_setText:function(){var r=this.rawNode;if(!r.firstChild){var tp=_78(svg.xmlns.svg,"textPath"),tx=_7e("");tp.appendChild(tx);r.appendChild(tp);}r=r.firstChild;var t=this.text;r.setAttribute("alignment-baseline","middle");switch(t.align){case "middle":r.setAttribute("text-anchor","middle");r.setAttribute("startOffset","50%");break;case "end":r.setAttribute("text-anchor","end");r.setAttribute("startOffset","100%");break;default:r.setAttribute("text-anchor","start");r.setAttribute("startOffset","0%");break;}r.setAttribute("baseline-shift","0.5ex");r.setAttribute("text-decoration",t.decoration);r.setAttribute("rotate",t.rotated?90:0);r.setAttribute("kerning",t.kerning?"auto":0);r.firstChild.data=t.text;}});svg.TextPath.nodeType="text";svg.Surface=_71("dojox.gfx.svg.Surface",gs.Surface,{constructor:function(){gs.Container._init.call(this);},destroy:function(){this.defNode=null;this.inherited(arguments);},setDimensions:function(_b3,_b4){if(!this.rawNode){return this;}this.rawNode.setAttribute("width",_b3);this.rawNode.setAttribute("height",_b4);return this;},getDimensions:function(){var t=this.rawNode?{width:g.normalizedLength(this.rawNode.getAttribute("width")),height:g.normalizedLength(this.rawNode.getAttribute("height"))}:null;return t;}});svg.createSurface=function(_b5,_b6,_b7){var s=new svg.Surface();s.rawNode=_78(svg.xmlns.svg,"svg");s.rawNode.setAttribute("overflow","hidden");if(_b6){s.rawNode.setAttribute("width",_b6);}if(_b7){s.rawNode.setAttribute("height",_b7);}var _b8=_78(svg.xmlns.svg,"defs");s.rawNode.appendChild(_b8);s.defNode=_b8;s._parent=dom.byId(_b5);s._parent.appendChild(s.rawNode);return s;};var _b9={_setFont:function(){var f=this.fontStyle;this.rawNode.setAttribute("font-style",f.style);this.rawNode.setAttribute("font-variant",f.variant);this.rawNode.setAttribute("font-weight",f.weight);this.rawNode.setAttribute("font-size",f.size);this.rawNode.setAttribute("font-family",f.family);}};var C=gs.Container,_ba={openBatch:function(){this.fragment=_80();},closeBatch:function(){if(this.fragment){this.rawNode.appendChild(this.fragment);delete this.fragment;}},add:function(_bb){if(this!=_bb.getParent()){if(this.fragment){this.fragment.appendChild(_bb.rawNode);}else{this.rawNode.appendChild(_bb.rawNode);}C.add.apply(this,arguments);_bb.setClip(_bb.clip);}return this;},remove:function(_bc,_bd){if(this==_bc.getParent()){if(this.rawNode==_bc.rawNode.parentNode){this.rawNode.removeChild(_bc.rawNode);}if(this.fragment&&this.fragment==_bc.rawNode.parentNode){this.fragment.removeChild(_bc.rawNode);}_bc._removeClipNode();C.remove.apply(this,arguments);}return this;},clear:function(){var r=this.rawNode;while(r.lastChild){r.removeChild(r.lastChild);}var _be=this.defNode;if(_be){while(_be.lastChild){_be.removeChild(_be.lastChild);}r.appendChild(_be);}return C.clear.apply(this,arguments);},getBoundingBox:C.getBoundingBox,_moveChildToFront:C._moveChildToFront,_moveChildToBack:C._moveChildToBack};var _bf={createObject:function(_c0,_c1){if(!this.rawNode){return null;}var _c2=new _c0(),_c3=_78(svg.xmlns.svg,_c0.nodeType);_c2.setRawNode(_c3);_c2.setShape(_c1);this.add(_c2);return _c2;}};_70.extend(svg.Text,_b9);_70.extend(svg.TextPath,_b9);_70.extend(svg.Group,_ba);_70.extend(svg.Group,gs.Creator);_70.extend(svg.Group,_bf);_70.extend(svg.Surface,_ba);_70.extend(svg.Surface,gs.Creator);_70.extend(svg.Surface,_bf);svg.fixTarget=function(_c4,_c5){if(!_c4.gfxTarget){if(_77&&_c4.target.wholeText){_c4.gfxTarget=gs.byId(_c4.target.parentElement.__gfxObject__);}else{_c4.gfxTarget=gs.byId(_c4.target.__gfxObject__);}}return true;};if(svg.useSvgWeb){svg.createSurface=function(_c6,_c7,_c8){var s=new svg.Surface();if(!_c7||!_c8){var pos=_72.position(_c6);_c7=_c7||pos.w;_c8=_c8||pos.h;}_c6=dom.byId(_c6);var id=_c6.id?_c6.id+"_svgweb":g._base._getUniqueId();var _c9=_78(svg.xmlns.svg,"svg");_c9.id=id;_c9.setAttribute("width",_c7);_c9.setAttribute("height",_c8);svgweb.appendChild(_c9,_c6);_c9.addEventListener("SVGLoad",function(){s.rawNode=this;s.isLoaded=true;var _ca=_78(svg.xmlns.svg,"defs");s.rawNode.appendChild(_ca);s.defNode=_ca;if(s.onLoad){s.onLoad(s);}},false);s.isLoaded=false;return s;};svg.Surface.extend({destroy:function(){var _cb=this.rawNode;svgweb.removeChild(_cb,_cb.parentNode);}});var _cc={connect:function(_cd,_ce,_cf){if(_cd.substring(0,2)==="on"){_cd=_cd.substring(2);}if(arguments.length==2){_cf=_ce;}else{_cf=_70.hitch(_ce,_cf);}this.getEventSource().addEventListener(_cd,_cf,false);return [this,_cd,_cf];},disconnect:function(_d0){this.getEventSource().removeEventListener(_d0[1],_d0[2],false);delete _d0[0];}};_70.extend(svg.Shape,_cc);_70.extend(svg.Surface,_cc);}return svg;});