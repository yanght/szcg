//>>built
define("dgrid/TouchScroll",["dojo/_base/declare","dojo/on"],function(_1,on){var _2,_3=15,_4=0,_5={},_6={},_7=1;function _8(_9){_4=_9.touches.length;};function _a(_b){var t,id=_b.widget.id,g=_6[id];if(g){clearTimeout(g.timer);delete _6[id];}if(_4>0){return;}t=_b.touches[0];_5={widget:_b.widget,node:this,startX:this.scrollLeft+t.pageX,startY:this.scrollTop+t.pageY,timer:setTimeout(_c,_3)};};function _d(_e){var t;if(_4>1||!_5){return;}t=_e.touches[0];_e.preventDefault();_e.stopPropagation();this.scrollLeft=_5.startX-t.pageX;this.scrollTop=_5.startY-t.pageY;};function _f(evt){if(_4!=1||!_5){return;}_5.timer&&clearTimeout(_5.timer);_10(_5);_5=null;};function _c(){var _11,x,y;if(!_5){return;}_11=_5.node;x=_11.scrollLeft;y=_11.scrollTop;if("prevX" in _5){_5.velX=x-_5.prevX;_5.velY=y-_5.prevY;}_5.prevX=x;_5.prevY=y;_5.timer=setTimeout(_c,_3);};function _10(_12){var id=_12.widget.id,g;if(!_12.velX&&!_12.velY){return;}g=_6[id]=_12;g.calcFunc=function(){_13(id);};g.timer=setTimeout(g.calcFunc,_3);};function _13(id){var g=_6[id],x,y,_14,_15,vx,vy,nvx,nvy;if(!g){return;}_14=g.node;_15=g.widget;x=_14.scrollLeft;y=_14.scrollTop;vx=g.velX;vy=g.velY;nvx=_15.glideDecel(vx);nvy=_15.glideDecel(vy);if(Math.abs(nvx)>=_7||Math.abs(nvy)>=_7){_14.scrollLeft+=nvx;_14.scrollTop+=nvy;if(_14.scrollLeft!=x||_14.scrollTop!=y){g.velX=nvx;g.velY=nvy;g.timer=setTimeout(g.calcFunc,_3);}}};return _1("dgrid.TouchScroll",[],{startup:function(){var _16=this.touchNode||this.containerNode||this.domNode,_17=this;on(_16,"touchstart",function(evt){evt.widget=_17;_a.call(this,evt);});on(_16,"touchmove",_d);on(_16,"touchend,touchcancel",_f);if(!_2){_2=on(document.body,"touchstart,touchend,touchcancel",_8);}},glideDecel:function(n){return n*0.9;}});});