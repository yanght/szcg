/*
	Copyright (c) 2004-2011, The Dojo Foundation All Rights Reserved.
	Available via Academic Free License >= 2.1 OR the modified BSD license.
	see: http://dojotoolkit.org/license for details
*/

/*
	This is an optimized version of Dojo, built for deployment and not for
	development. To get sources and documentation, please visit:

		http://dojotoolkit.org
*/

//>>built
require({cache:{"dojox/gfx/arc":function(){define(["./_base","dojo/_base/lang","./matrix"],function(g,_1,m){var _2=2*Math.PI,_3=Math.PI/4,_4=Math.PI/8,_5=_3+_4,_6=_7(_4);function _7(_8){var _9=Math.cos(_8),_a=Math.sin(_8),p2={x:_9+(4/3)*(1-_9),y:_a-(4/3)*_9*(1-_9)/_a};return {s:{x:_9,y:-_a},c1:{x:p2.x,y:-p2.y},c2:p2,e:{x:_9,y:_a}};};var _b=g.arc={unitArcAsBezier:_7,curvePI4:_6,arcAsBezier:function(_c,rx,ry,_d,_e,_f,x,y){_e=Boolean(_e);_f=Boolean(_f);var _10=m._degToRad(_d),rx2=rx*rx,ry2=ry*ry,pa=m.multiplyPoint(m.rotate(-_10),{x:(_c.x-x)/2,y:(_c.y-y)/2}),_11=pa.x*pa.x,_12=pa.y*pa.y,c1=Math.sqrt((rx2*ry2-rx2*_12-ry2*_11)/(rx2*_12+ry2*_11));if(isNaN(c1)){c1=0;}var ca={x:c1*rx*pa.y/ry,y:-c1*ry*pa.x/rx};if(_e==_f){ca={x:-ca.x,y:-ca.y};}var c=m.multiplyPoint([m.translate((_c.x+x)/2,(_c.y+y)/2),m.rotate(_10)],ca);var _13=m.normalize([m.translate(c.x,c.y),m.rotate(_10),m.scale(rx,ry)]);var _14=m.invert(_13),sp=m.multiplyPoint(_14,_c),ep=m.multiplyPoint(_14,x,y),_15=Math.atan2(sp.y,sp.x),_16=Math.atan2(ep.y,ep.x),_17=_15-_16;if(_f){_17=-_17;}if(_17<0){_17+=_2;}else{if(_17>_2){_17-=_2;}}var _18=_4,_19=_6,_1a=_f?_18:-_18,_1b=[];for(var _1c=_17;_1c>0;_1c-=_3){if(_1c<_5){_18=_1c/2;_19=_7(_18);_1a=_f?_18:-_18;_1c=0;}var c2,e,M=m.normalize([_13,m.rotate(_15+_1a)]);if(_f){c1=m.multiplyPoint(M,_19.c1);c2=m.multiplyPoint(M,_19.c2);e=m.multiplyPoint(M,_19.e);}else{c1=m.multiplyPoint(M,_19.c2);c2=m.multiplyPoint(M,_19.c1);e=m.multiplyPoint(M,_19.s);}_1b.push([c1.x,c1.y,c2.x,c2.y,e.x,e.y]);_15+=2*_1a;}return _1b;}};return _b;});},"dojox/gfx/shape":function(){define(["./_base","dojo/_base/lang","dojo/_base/declare","dojo/_base/kernel","dojo/_base/sniff","dojo/_base/connect","dojo/_base/array","dojo/dom-construct","dojo/_base/Color","./matrix"],function(g,_1d,_1e,_1f,has,_20,arr,_21,_22,_23){var _24=g.shape={};var _25={};var _26={};_24.register=function(s){var t=s.declaredClass.split(".").pop();var i=t in _25?++_25[t]:((_25[t]=0));var uid=t+i;_26[uid]=s;return uid;};_24.byId=function(id){return _26[id];};_24.dispose=function(s){delete _26[s.getUID()];};_24.Shape=_1e("dojox.gfx.shape.Shape",null,{constructor:function(){this.rawNode=null;this.shape=null;this.matrix=null;this.fillStyle=null;this.strokeStyle=null;this.bbox=null;this.parent=null;this.parentMatrix=null;var uid=_24.register(this);this.getUID=function(){return uid;};},destroy:function(){_24.dispose(this);},getNode:function(){return this.rawNode;},getShape:function(){return this.shape;},getTransform:function(){return this.matrix;},getFill:function(){return this.fillStyle;},getStroke:function(){return this.strokeStyle;},getParent:function(){return this.parent;},getBoundingBox:function(){return this.bbox;},getTransformedBoundingBox:function(){var b=this.getBoundingBox();if(!b){return null;}var m=this._getRealMatrix(),gm=_23;return [gm.multiplyPoint(m,b.x,b.y),gm.multiplyPoint(m,b.x+b.width,b.y),gm.multiplyPoint(m,b.x+b.width,b.y+b.height),gm.multiplyPoint(m,b.x,b.y+b.height)];},getEventSource:function(){return this.rawNode;},setClip:function(_27){this.clip=_27;},getClip:function(){return this.clip;},setShape:function(_28){this.shape=g.makeParameters(this.shape,_28);this.bbox=null;return this;},setFill:function(_29){if(!_29){this.fillStyle=null;return this;}var f=null;if(typeof (_29)=="object"&&"type" in _29){switch(_29.type){case "linear":f=g.makeParameters(g.defaultLinearGradient,_29);break;case "radial":f=g.makeParameters(g.defaultRadialGradient,_29);break;case "pattern":f=g.makeParameters(g.defaultPattern,_29);break;}}else{f=g.normalizeColor(_29);}this.fillStyle=f;return this;},setStroke:function(_2a){if(!_2a){this.strokeStyle=null;return this;}if(typeof _2a=="string"||_1d.isArray(_2a)||_2a instanceof _22){_2a={color:_2a};}var s=this.strokeStyle=g.makeParameters(g.defaultStroke,_2a);s.color=g.normalizeColor(s.color);return this;},setTransform:function(_2b){this.matrix=_23.clone(_2b?_23.normalize(_2b):_23.identity);return this._applyTransform();},_applyTransform:function(){return this;},moveToFront:function(){var p=this.getParent();if(p){p._moveChildToFront(this);this._moveToFront();}return this;},moveToBack:function(){var p=this.getParent();if(p){p._moveChildToBack(this);this._moveToBack();}return this;},_moveToFront:function(){},_moveToBack:function(){},applyRightTransform:function(_2c){return _2c?this.setTransform([this.matrix,_2c]):this;},applyLeftTransform:function(_2d){return _2d?this.setTransform([_2d,this.matrix]):this;},applyTransform:function(_2e){return _2e?this.setTransform([this.matrix,_2e]):this;},removeShape:function(_2f){if(this.parent){this.parent.remove(this,_2f);}return this;},_setParent:function(_30,_31){this.parent=_30;return this._updateParentMatrix(_31);},_updateParentMatrix:function(_32){this.parentMatrix=_32?_23.clone(_32):null;return this._applyTransform();},_getRealMatrix:function(){var m=this.matrix;var p=this.parent;while(p){if(p.matrix){m=_23.multiply(p.matrix,m);}p=p.parent;}return m;}});_24._eventsProcessing={connect:function(_33,_34,_35){return _20.connect(this.getEventSource(),_33,_24.fixCallback(this,g.fixTarget,_34,_35));},disconnect:function(_36){_20.disconnect(_36);}};_24.fixCallback=function(_37,_38,_39,_3a){if(!_3a){_3a=_39;_39=null;}if(_1d.isString(_3a)){_39=_39||_1f.global;if(!_39[_3a]){throw (["dojox.gfx.shape.fixCallback: scope[\"",_3a,"\"] is null (scope=\"",_39,"\")"].join(""));}return function(e){return _38(e,_37)?_39[_3a].apply(_39,arguments||[]):undefined;};}return !_39?function(e){return _38(e,_37)?_3a.apply(_39,arguments):undefined;}:function(e){return _38(e,_37)?_3a.apply(_39,arguments||[]):undefined;};};_1d.extend(_24.Shape,_24._eventsProcessing);_24.Container={_init:function(){this.children=[];},openBatch:function(){},closeBatch:function(){},add:function(_3b){var _3c=_3b.getParent();if(_3c){_3c.remove(_3b,true);}this.children.push(_3b);return _3b._setParent(this,this._getRealMatrix());},remove:function(_3d,_3e){for(var i=0;i<this.children.length;++i){if(this.children[i]==_3d){if(_3e){}else{_3d.parent=null;_3d.parentMatrix=null;}this.children.splice(i,1);break;}}return this;},clear:function(_3f){var _40;for(var i=0;i<this.children.length;++i){_40=this.children[i];_40.parent=null;_40.parentMatrix=null;if(_3f){_40.destroy();}}this.children=[];return this;},getBoundingBox:function(){if(this.children){var _41=null;arr.forEach(this.children,function(_42){var bb=_42.getBoundingBox();if(bb){var ct=_42.getTransform();if(ct){bb=_23.multiplyRectangle(ct,bb);}if(_41){_41.x=Math.min(_41.x,bb.x);_41.y=Math.min(_41.y,bb.y);_41.endX=Math.max(_41.endX,bb.x+bb.width);_41.endY=Math.max(_41.endY,bb.y+bb.height);}else{_41={x:bb.x,y:bb.y,endX:bb.x+bb.width,endY:bb.y+bb.height};}}});if(_41){_41.width=_41.endX-_41.x;_41.height=_41.endY-_41.y;}return _41;}return null;},_moveChildToFront:function(_43){for(var i=0;i<this.children.length;++i){if(this.children[i]==_43){this.children.splice(i,1);this.children.push(_43);break;}}return this;},_moveChildToBack:function(_44){for(var i=0;i<this.children.length;++i){if(this.children[i]==_44){this.children.splice(i,1);this.children.unshift(_44);break;}}return this;}};_24.Surface=_1e("dojox.gfx.shape.Surface",null,{constructor:function(){this.rawNode=null;this._parent=null;this._nodes=[];this._events=[];},destroy:function(){arr.forEach(this._nodes,_21.destroy);this._nodes=[];arr.forEach(this._events,_20.disconnect);this._events=[];this.rawNode=null;if(has("ie")){while(this._parent.lastChild){_21.destroy(this._parent.lastChild);}}else{this._parent.innerHTML="";}this._parent=null;},getEventSource:function(){return this.rawNode;},_getRealMatrix:function(){return null;},isLoaded:true,onLoad:function(_45){},whenLoaded:function(_46,_47){var f=_1d.hitch(_46,_47);if(this.isLoaded){f(this);}else{var h=_20.connect(this,"onLoad",function(_48){_20.disconnect(h);f(_48);});}}});_1d.extend(_24.Surface,_24._eventsProcessing);_24.Rect=_1e("dojox.gfx.shape.Rect",_24.Shape,{constructor:function(_49){this.shape=g.getDefault("Rect");this.rawNode=_49;},getBoundingBox:function(){return this.shape;}});_24.Ellipse=_1e("dojox.gfx.shape.Ellipse",_24.Shape,{constructor:function(_4a){this.shape=g.getDefault("Ellipse");this.rawNode=_4a;},getBoundingBox:function(){if(!this.bbox){var _4b=this.shape;this.bbox={x:_4b.cx-_4b.rx,y:_4b.cy-_4b.ry,width:2*_4b.rx,height:2*_4b.ry};}return this.bbox;}});_24.Circle=_1e("dojox.gfx.shape.Circle",_24.Shape,{constructor:function(_4c){this.shape=g.getDefault("Circle");this.rawNode=_4c;},getBoundingBox:function(){if(!this.bbox){var _4d=this.shape;this.bbox={x:_4d.cx-_4d.r,y:_4d.cy-_4d.r,width:2*_4d.r,height:2*_4d.r};}return this.bbox;}});_24.Line=_1e("dojox.gfx.shape.Line",_24.Shape,{constructor:function(_4e){this.shape=g.getDefault("Line");this.rawNode=_4e;},getBoundingBox:function(){if(!this.bbox){var _4f=this.shape;this.bbox={x:Math.min(_4f.x1,_4f.x2),y:Math.min(_4f.y1,_4f.y2),width:Math.abs(_4f.x2-_4f.x1),height:Math.abs(_4f.y2-_4f.y1)};}return this.bbox;}});_24.Polyline=_1e("dojox.gfx.shape.Polyline",_24.Shape,{constructor:function(_50){this.shape=g.getDefault("Polyline");this.rawNode=_50;},setShape:function(_51,_52){if(_51&&_51 instanceof Array){this.inherited(arguments,[{points:_51}]);if(_52&&this.shape.points.length){this.shape.points.push(this.shape.points[0]);}}else{this.inherited(arguments,[_51]);}return this;},_normalizePoints:function(){var p=this.shape.points,l=p&&p.length;if(l&&typeof p[0]=="number"){var _53=[];for(var i=0;i<l;i+=2){_53.push({x:p[i],y:p[i+1]});}this.shape.points=_53;}},getBoundingBox:function(){if(!this.bbox&&this.shape.points.length){var p=this.shape.points;var l=p.length;var t=p[0];var _54={l:t.x,t:t.y,r:t.x,b:t.y};for(var i=1;i<l;++i){t=p[i];if(_54.l>t.x){_54.l=t.x;}if(_54.r<t.x){_54.r=t.x;}if(_54.t>t.y){_54.t=t.y;}if(_54.b<t.y){_54.b=t.y;}}this.bbox={x:_54.l,y:_54.t,width:_54.r-_54.l,height:_54.b-_54.t};}return this.bbox;}});_24.Image=_1e("dojox.gfx.shape.Image",_24.Shape,{constructor:function(_55){this.shape=g.getDefault("Image");this.rawNode=_55;},getBoundingBox:function(){return this.shape;},setStroke:function(){return this;},setFill:function(){return this;}});_24.Text=_1e(_24.Shape,{constructor:function(_56){this.fontStyle=null;this.shape=g.getDefault("Text");this.rawNode=_56;},getFont:function(){return this.fontStyle;},setFont:function(_57){this.fontStyle=typeof _57=="string"?g.splitFontString(_57):g.makeParameters(g.defaultFont,_57);this._setFont();return this;}});_24.Creator={createShape:function(_58){switch(_58.type){case g.defaultPath.type:return this.createPath(_58);case g.defaultRect.type:return this.createRect(_58);case g.defaultCircle.type:return this.createCircle(_58);case g.defaultEllipse.type:return this.createEllipse(_58);case g.defaultLine.type:return this.createLine(_58);case g.defaultPolyline.type:return this.createPolyline(_58);case g.defaultImage.type:return this.createImage(_58);case g.defaultText.type:return this.createText(_58);case g.defaultTextPath.type:return this.createTextPath(_58);}return null;},createGroup:function(){return this.createObject(g.Group);},createRect:function(_59){return this.createObject(g.Rect,_59);},createEllipse:function(_5a){return this.createObject(g.Ellipse,_5a);},createCircle:function(_5b){return this.createObject(g.Circle,_5b);},createLine:function(_5c){return this.createObject(g.Line,_5c);},createPolyline:function(_5d){return this.createObject(g.Polyline,_5d);},createImage:function(_5e){return this.createObject(g.Image,_5e);},createText:function(_5f){return this.createObject(g.Text,_5f);},createPath:function(_60){return this.createObject(g.Path,_60);},createTextPath:function(_61){return this.createObject(g.TextPath,{}).setText(_61);},createObject:function(_62,_63){return null;}};return _24;});},"dojox/gfx/gradient":function(){define(["dojo/_base/lang","./matrix","dojo/_base/Color"],function(_64,m,_65){var _66=_64.getObject("dojox.gfx.gradient",true);var C=_65;_66.rescale=function(_67,_68,to){var len=_67.length,_69=(to<_68),_6a;if(_69){var tmp=_68;_68=to;to=tmp;}if(!len){return [];}if(to<=_67[0].offset){_6a=[{offset:0,color:_67[0].color},{offset:1,color:_67[0].color}];}else{if(_68>=_67[len-1].offset){_6a=[{offset:0,color:_67[len-1].color},{offset:1,color:_67[len-1].color}];}else{var _6b=to-_68,_6c,_6d,i;_6a=[];if(_68<0){_6a.push({offset:0,color:new C(_67[0].color)});}for(i=0;i<len;++i){_6c=_67[i];if(_6c.offset>=_68){break;}}if(i){_6d=_67[i-1];_6a.push({offset:0,color:_65.blendColors(new C(_6d.color),new C(_6c.color),(_68-_6d.offset)/(_6c.offset-_6d.offset))});}else{_6a.push({offset:0,color:new C(_6c.color)});}for(;i<len;++i){_6c=_67[i];if(_6c.offset>=to){break;}_6a.push({offset:(_6c.offset-_68)/_6b,color:new C(_6c.color)});}if(i<len){_6d=_67[i-1];_6a.push({offset:1,color:_65.blendColors(new C(_6d.color),new C(_6c.color),(to-_6d.offset)/(_6c.offset-_6d.offset))});}else{_6a.push({offset:1,color:new C(_67[len-1].color)});}}}if(_69){_6a.reverse();for(i=0,len=_6a.length;i<len;++i){_6c=_6a[i];_6c.offset=1-_6c.offset;}}return _6a;};function _6e(x,y,_6f,_70,_71,_72){var r=m.multiplyPoint(_6f,x,y),p=m.multiplyPoint(_70,r);return {r:r,p:p,o:m.multiplyPoint(_71,p).x/_72};};function _73(a,b){return a.o-b.o;};_66.project=function(_74,_75,tl,rb,ttl,trb){_74=_74||m.identity;var f1=m.multiplyPoint(_74,_75.x1,_75.y1),f2=m.multiplyPoint(_74,_75.x2,_75.y2),_76=Math.atan2(f2.y-f1.y,f2.x-f1.x),_77=m.project(f2.x-f1.x,f2.y-f1.y),pf1=m.multiplyPoint(_77,f1),pf2=m.multiplyPoint(_77,f2),_78=new m.Matrix2D([m.rotate(-_76),{dx:-pf1.x,dy:-pf1.y}]),_79=m.multiplyPoint(_78,pf2).x,_7a=[_6e(tl.x,tl.y,_74,_77,_78,_79),_6e(rb.x,rb.y,_74,_77,_78,_79),_6e(tl.x,rb.y,_74,_77,_78,_79),_6e(rb.x,tl.y,_74,_77,_78,_79)].sort(_73),_7b=_7a[0].o,to=_7a[3].o,_7c=_66.rescale(_75.colors,_7b,to),_7d=Math.atan2(_7a[3].r.y-_7a[0].r.y,_7a[3].r.x-_7a[0].r.x);return {type:"linear",x1:_7a[0].p.x,y1:_7a[0].p.y,x2:_7a[3].p.x,y2:_7a[3].p.y,colors:_7c,angle:_76};};return _66;});},"dojox/gfx/path":function(){define("dojox/gfx/path",["./_base","dojo/_base/lang","dojo/_base/declare","./matrix","./shape"],function(g,_7e,_7f,_80,_81){var _82=_7f("dojox.gfx.path.Path",_81.Shape,{constructor:function(_83){this.shape=_7e.clone(g.defaultPath);this.segments=[];this.tbbox=null;this.absolute=true;this.last={};this.rawNode=_83;this.segmented=false;},setAbsoluteMode:function(_84){this._confirmSegmented();this.absolute=typeof _84=="string"?(_84=="absolute"):_84;return this;},getAbsoluteMode:function(){this._confirmSegmented();return this.absolute;},getBoundingBox:function(){this._confirmSegmented();return (this.bbox&&("l" in this.bbox))?{x:this.bbox.l,y:this.bbox.t,width:this.bbox.r-this.bbox.l,height:this.bbox.b-this.bbox.t}:null;},_getRealBBox:function(){this._confirmSegmented();if(this.tbbox){return this.tbbox;}var _85=this.bbox,_80=this._getRealMatrix();this.bbox=null;for(var i=0,len=this.segments.length;i<len;++i){this._updateWithSegment(this.segments[i],_80);}var t=this.bbox;this.bbox=_85;this.tbbox=t?[{x:t.l,y:t.t},{x:t.r,y:t.t},{x:t.r,y:t.b},{x:t.l,y:t.b}]:null;return this.tbbox;},getLastPosition:function(){this._confirmSegmented();return "x" in this.last?this.last:null;},_applyTransform:function(){this.tbbox=null;return this.inherited(arguments);},_updateBBox:function(x,y,m){if(m){var t=_80.multiplyPoint(m,x,y);x=t.x;y=t.y;}if(this.bbox&&("l" in this.bbox)){if(this.bbox.l>x){this.bbox.l=x;}if(this.bbox.r<x){this.bbox.r=x;}if(this.bbox.t>y){this.bbox.t=y;}if(this.bbox.b<y){this.bbox.b=y;}}else{this.bbox={l:x,b:y,r:x,t:y};}},_updateWithSegment:function(_86,_87){var n=_86.args,l=n.length,i;switch(_86.action){case "M":case "L":case "C":case "S":case "Q":case "T":for(i=0;i<l;i+=2){this._updateBBox(n[i],n[i+1],_87);}this.last.x=n[l-2];this.last.y=n[l-1];this.absolute=true;break;case "H":for(i=0;i<l;++i){this._updateBBox(n[i],this.last.y,_87);}this.last.x=n[l-1];this.absolute=true;break;case "V":for(i=0;i<l;++i){this._updateBBox(this.last.x,n[i],_87);}this.last.y=n[l-1];this.absolute=true;break;case "m":var _88=0;if(!("x" in this.last)){this._updateBBox(this.last.x=n[0],this.last.y=n[1],_87);_88=2;}for(i=_88;i<l;i+=2){this._updateBBox(this.last.x+=n[i],this.last.y+=n[i+1],_87);}this.absolute=false;break;case "l":case "t":for(i=0;i<l;i+=2){this._updateBBox(this.last.x+=n[i],this.last.y+=n[i+1],_87);}this.absolute=false;break;case "h":for(i=0;i<l;++i){this._updateBBox(this.last.x+=n[i],this.last.y,_87);}this.absolute=false;break;case "v":for(i=0;i<l;++i){this._updateBBox(this.last.x,this.last.y+=n[i],_87);}this.absolute=false;break;case "c":for(i=0;i<l;i+=6){this._updateBBox(this.last.x+n[i],this.last.y+n[i+1],_87);this._updateBBox(this.last.x+n[i+2],this.last.y+n[i+3],_87);this._updateBBox(this.last.x+=n[i+4],this.last.y+=n[i+5],_87);}this.absolute=false;break;case "s":case "q":for(i=0;i<l;i+=4){this._updateBBox(this.last.x+n[i],this.last.y+n[i+1],_87);this._updateBBox(this.last.x+=n[i+2],this.last.y+=n[i+3],_87);}this.absolute=false;break;case "A":for(i=0;i<l;i+=7){this._updateBBox(n[i+5],n[i+6],_87);}this.last.x=n[l-2];this.last.y=n[l-1];this.absolute=true;break;case "a":for(i=0;i<l;i+=7){this._updateBBox(this.last.x+=n[i+5],this.last.y+=n[i+6],_87);}this.absolute=false;break;}var _89=[_86.action];for(i=0;i<l;++i){_89.push(g.formatNumber(n[i],true));}if(typeof this.shape.path=="string"){this.shape.path+=_89.join("");}else{Array.prototype.push.apply(this.shape.path,_89);}},_validSegments:{m:2,l:2,h:1,v:1,c:6,s:4,q:4,t:2,a:7,z:0},_pushSegment:function(_8a,_8b){this.tbbox=null;var _8c=this._validSegments[_8a.toLowerCase()],_8d;if(typeof _8c=="number"){if(_8c){if(_8b.length>=_8c){_8d={action:_8a,args:_8b.slice(0,_8b.length-_8b.length%_8c)};this.segments.push(_8d);this._updateWithSegment(_8d);}}else{_8d={action:_8a,args:[]};this.segments.push(_8d);this._updateWithSegment(_8d);}}},_collectArgs:function(_8e,_8f){for(var i=0;i<_8f.length;++i){var t=_8f[i];if(typeof t=="boolean"){_8e.push(t?1:0);}else{if(typeof t=="number"){_8e.push(t);}else{if(t instanceof Array){this._collectArgs(_8e,t);}else{if("x" in t&&"y" in t){_8e.push(t.x,t.y);}}}}}},moveTo:function(){this._confirmSegmented();var _90=[];this._collectArgs(_90,arguments);this._pushSegment(this.absolute?"M":"m",_90);return this;},lineTo:function(){this._confirmSegmented();var _91=[];this._collectArgs(_91,arguments);this._pushSegment(this.absolute?"L":"l",_91);return this;},hLineTo:function(){this._confirmSegmented();var _92=[];this._collectArgs(_92,arguments);this._pushSegment(this.absolute?"H":"h",_92);return this;},vLineTo:function(){this._confirmSegmented();var _93=[];this._collectArgs(_93,arguments);this._pushSegment(this.absolute?"V":"v",_93);return this;},curveTo:function(){this._confirmSegmented();var _94=[];this._collectArgs(_94,arguments);this._pushSegment(this.absolute?"C":"c",_94);return this;},smoothCurveTo:function(){this._confirmSegmented();var _95=[];this._collectArgs(_95,arguments);this._pushSegment(this.absolute?"S":"s",_95);return this;},qCurveTo:function(){this._confirmSegmented();var _96=[];this._collectArgs(_96,arguments);this._pushSegment(this.absolute?"Q":"q",_96);return this;},qSmoothCurveTo:function(){this._confirmSegmented();var _97=[];this._collectArgs(_97,arguments);this._pushSegment(this.absolute?"T":"t",_97);return this;},arcTo:function(){this._confirmSegmented();var _98=[];this._collectArgs(_98,arguments);this._pushSegment(this.absolute?"A":"a",_98);return this;},closePath:function(){this._confirmSegmented();this._pushSegment("Z",[]);return this;},_confirmSegmented:function(){if(!this.segmented){var _99=this.shape.path;this.shape.path=[];this._setPath(_99);this.shape.path=this.shape.path.join("");this.segmented=true;}},_setPath:function(_9a){var p=_7e.isArray(_9a)?_9a:_9a.match(g.pathSvgRegExp);this.segments=[];this.absolute=true;this.bbox={};this.last={};if(!p){return;}var _9b="",_9c=[],l=p.length;for(var i=0;i<l;++i){var t=p[i],x=parseFloat(t);if(isNaN(x)){if(_9b){this._pushSegment(_9b,_9c);}_9c=[];_9b=t;}else{_9c.push(x);}}this._pushSegment(_9b,_9c);},setShape:function(_9d){this.inherited(arguments,[typeof _9d=="string"?{path:_9d}:_9d]);this.segmented=false;this.segments=[];if(!g.lazyPathSegmentation){this._confirmSegmented();}return this;},_2PI:Math.PI*2});var _9e=_7f("dojox.gfx.path.TextPath",_82,{constructor:function(_9f){if(!("text" in this)){this.text=_7e.clone(g.defaultTextPath);}if(!("fontStyle" in this)){this.fontStyle=_7e.clone(g.defaultFont);}},getText:function(){return this.text;},setText:function(_a0){this.text=g.makeParameters(this.text,typeof _a0=="string"?{text:_a0}:_a0);this._setText();return this;},getFont:function(){return this.fontStyle;},setFont:function(_a1){this.fontStyle=typeof _a1=="string"?g.splitFontString(_a1):g.makeParameters(g.defaultFont,_a1);this._setFont();return this;}});return g.path={Path:_82,TextPath:_9e};});},"*noref":1}});define("dojox/gfx/vml",["dojo/_base/lang","dojo/_base/declare","dojo/_base/array","dojo/_base/Color","dojo/_base/sniff","dojo/_base/config","dojo/dom","dojo/dom-geometry","dojo/_base/kernel","./_base","./shape","./path","./arc","./gradient","./matrix"],function(_a2,_a3,arr,_a4,has,_a5,dom,_a6,_a7,g,gs,_a8,_a9,_aa,m){var vml=g.vml={};var _ab=function(){vml.xmlns="urn:schemas-microsoft-com:vml";try{document.namespaces.add("v",vml.xmlns);var _ac=["*","group","roundrect","oval","shape","rect","imagedata","path","textpath","text"],i=0,l=1,s=document.createStyleSheet();if(has("ie")>=8){i=1;l=_ac.length;}for(;i<l;++i){s.addRule("v\\:"+_ac[i],"behavior:url(#default#VML); display:inline-block");}}catch(e){setTimeout(_ab,10);}};_ab();vml.text_alignment={start:"left",middle:"center",end:"right"};vml._parseFloat=function(str){return str.match(/^\d+f$/i)?parseInt(str)/65536:parseFloat(str);};vml._bool={"t":1,"true":1};vml._reparentEvents=function(dst,src){for(var _ad in src){if(_ad.substr(0,2).toLowerCase()=="on"){dst[_ad]=src[_ad];src[_ad]=null;}}};vml.Shape=_a3("dojox.gfx.vml.Shape",gs.Shape,{destroy:function(){this.rawNode=null;gs.Shape.prototype.destroy.apply(this,arguments);},setFill:function(_ae){if(!_ae){this.fillStyle=null;this.rawNode.filled="f";return this;}var i,f,fo,a,s;if(typeof _ae=="object"&&"type" in _ae){switch(_ae.type){case "linear":var _af=this._getRealMatrix(),_b0=this.getBoundingBox(),_b1=this._getRealBBox?this._getRealBBox():this.getTransformedBoundingBox();s=[];if(this.fillStyle!==_ae){this.fillStyle=g.makeParameters(g.defaultLinearGradient,_ae);}f=g.gradient.project(_af,this.fillStyle,{x:_b0.x,y:_b0.y},{x:_b0.x+_b0.width,y:_b0.y+_b0.height},_b1[0],_b1[2]);a=f.colors;if(a[0].offset.toFixed(5)!="0.00000"){s.push("0 "+g.normalizeColor(a[0].color).toHex());}for(i=0;i<a.length;++i){s.push(a[i].offset.toFixed(5)+" "+g.normalizeColor(a[i].color).toHex());}i=a.length-1;if(a[i].offset.toFixed(5)!="1.00000"){s.push("1 "+g.normalizeColor(a[i].color).toHex());}fo=this.rawNode.fill;fo.colors.value=s.join(";");fo.method="sigma";fo.type="gradient";fo.angle=(270-m._radToDeg(f.angle))%360;fo.on=true;break;case "radial":f=g.makeParameters(g.defaultRadialGradient,_ae);this.fillStyle=f;var l=parseFloat(this.rawNode.style.left),t=parseFloat(this.rawNode.style.top),w=parseFloat(this.rawNode.style.width),h=parseFloat(this.rawNode.style.height),c=isNaN(w)?1:2*f.r/w;a=[];if(f.colors[0].offset>0){a.push({offset:1,color:g.normalizeColor(f.colors[0].color)});}arr.forEach(f.colors,function(v,i){a.push({offset:1-v.offset*c,color:g.normalizeColor(v.color)});});i=a.length-1;while(i>=0&&a[i].offset<0){--i;}if(i<a.length-1){var q=a[i],p=a[i+1];p.color=_a4.blendColors(q.color,p.color,q.offset/(q.offset-p.offset));p.offset=0;while(a.length-i>2){a.pop();}}i=a.length-1,s=[];if(a[i].offset>0){s.push("0 "+a[i].color.toHex());}for(;i>=0;--i){s.push(a[i].offset.toFixed(5)+" "+a[i].color.toHex());}fo=this.rawNode.fill;fo.colors.value=s.join(";");fo.method="sigma";fo.type="gradientradial";if(isNaN(w)||isNaN(h)||isNaN(l)||isNaN(t)){fo.focusposition="0.5 0.5";}else{fo.focusposition=((f.cx-l)/w).toFixed(5)+" "+((f.cy-t)/h).toFixed(5);}fo.focussize="0 0";fo.on=true;break;case "pattern":f=g.makeParameters(g.defaultPattern,_ae);this.fillStyle=f;fo=this.rawNode.fill;fo.type="tile";fo.src=f.src;if(f.width&&f.height){fo.size.x=g.px2pt(f.width);fo.size.y=g.px2pt(f.height);}fo.alignShape="f";fo.position.x=0;fo.position.y=0;fo.origin.x=f.width?f.x/f.width:0;fo.origin.y=f.height?f.y/f.height:0;fo.on=true;break;}this.rawNode.fill.opacity=1;return this;}this.fillStyle=g.normalizeColor(_ae);fo=this.rawNode.fill;if(!fo){fo=this.rawNode.ownerDocument.createElement("v:fill");}fo.method="any";fo.type="solid";fo.opacity=this.fillStyle.a;var _b2=this.rawNode.filters["DXImageTransform.Microsoft.Alpha"];if(_b2){_b2.opacity=Math.round(this.fillStyle.a*100);}this.rawNode.fillcolor=this.fillStyle.toHex();this.rawNode.filled=true;return this;},setStroke:function(_b3){if(!_b3){this.strokeStyle=null;this.rawNode.stroked="f";return this;}if(typeof _b3=="string"||_a2.isArray(_b3)||_b3 instanceof _a4){_b3={color:_b3};}var s=this.strokeStyle=g.makeParameters(g.defaultStroke,_b3);s.color=g.normalizeColor(s.color);var rn=this.rawNode;rn.stroked=true;rn.strokecolor=s.color.toCss();rn.strokeweight=s.width+"px";if(rn.stroke){rn.stroke.opacity=s.color.a;rn.stroke.endcap=this._translate(this._capMap,s.cap);if(typeof s.join=="number"){rn.stroke.joinstyle="miter";rn.stroke.miterlimit=s.join;}else{rn.stroke.joinstyle=s.join;}rn.stroke.dashstyle=s.style=="none"?"Solid":s.style;}return this;},_capMap:{butt:"flat"},_capMapReversed:{flat:"butt"},_translate:function(_b4,_b5){return (_b5 in _b4)?_b4[_b5]:_b5;},_applyTransform:function(){var _b6=this._getRealMatrix();if(_b6){var _b7=this.rawNode.skew;if(typeof _b7=="undefined"){for(var i=0;i<this.rawNode.childNodes.length;++i){if(this.rawNode.childNodes[i].tagName=="skew"){_b7=this.rawNode.childNodes[i];break;}}}if(_b7){_b7.on="f";var mt=_b6.xx.toFixed(8)+" "+_b6.xy.toFixed(8)+" "+_b6.yx.toFixed(8)+" "+_b6.yy.toFixed(8)+" 0 0",_b8=Math.floor(_b6.dx).toFixed()+"px "+Math.floor(_b6.dy).toFixed()+"px",s=this.rawNode.style,l=parseFloat(s.left),t=parseFloat(s.top),w=parseFloat(s.width),h=parseFloat(s.height);if(isNaN(l)){l=0;}if(isNaN(t)){t=0;}if(isNaN(w)||!w){w=1;}if(isNaN(h)||!h){h=1;}var _b9=(-l/w-0.5).toFixed(8)+" "+(-t/h-0.5).toFixed(8);_b7.matrix=mt;_b7.origin=_b9;_b7.offset=_b8;_b7.on=true;}}if(this.fillStyle&&this.fillStyle.type=="linear"){this.setFill(this.fillStyle);}if(this.clip){this.setClip(this.clip);}return this;},_setDimensions:function(_ba,_bb){return this;},setRawNode:function(_bc){_bc.stroked="f";_bc.filled="f";this.rawNode=_bc;this.rawNode.__gfxObject__=this.getUID();},_moveToFront:function(){this.rawNode.parentNode.appendChild(this.rawNode);return this;},_moveToBack:function(){var r=this.rawNode,p=r.parentNode,n=p.firstChild;p.insertBefore(r,n);if(n.tagName=="rect"){n.swapNode(r);}return this;},_getRealMatrix:function(){return this.parentMatrix?new m.Matrix2D([this.parentMatrix,this.matrix]):this.matrix;},setClip:function(_bd){this.inherited(arguments);var _be=this.rawNode.style;if(!_bd){_be.position="absolute";_be.clip="rect(0px "+_be.width+" "+_be.height+" 0px)";}else{if("width" in _bd){var _bf=this._getRealMatrix(),l=parseFloat(_be.left),t=parseFloat(_be.top);if(isNaN(l)){l=0;}if(isNaN(t)){t=0;}var _c0=m.multiplyRectangle(_bf,_bd);var pt=m.multiplyPoint(_bf,{x:l,y:t});_be.clip="rect("+Math.round(_c0.y-pt.y)+"px "+Math.round(_c0.x-pt.x+_c0.width)+"px "+Math.round(_c0.y-pt.y+_c0.height)+"px "+Math.round(_c0.x-pt.x)+"px)";}}return this;}});(function(){var _c1=vml.Shape,_c2=_c1.prototype.setStroke,_c3=_c1.prototype.setFill;_c1.prototype.setStroke=function(){var _c4=_c2.apply(this,arguments);var _c5=this.rawNode,_c6=_c5&&_c5.stroke,_c7=this.getParent();if(_c6&&_c7){var op=((_c7._esriIeOpacity!==undefined)&&(_c7._esriIeOpacity!==null))?_c7._esriIeOpacity:1;_c6.opacity*=op;}return _c4;};_c1.prototype.setFill=function(){var _c8=_c3.apply(this,arguments);var _c9=this.rawNode,_ca=_c9&&_c9.fill,_cb=this.getParent();if(_ca&&_cb){var op=((_cb._esriIeOpacity!==undefined)&&(_cb._esriIeOpacity!==null))?_cb._esriIeOpacity:1;if(_ca.type==="tile"){dojo.style(_c9,"opacity",op);}else{_ca.opacity*=op;}}return _c8;};}());vml.Group=_a3("dojox.gfx.vml.Group",vml.Shape,{constructor:function(){gs.Container._init.call(this);},_applyTransform:function(){var _cc=this._getRealMatrix();for(var i=0;i<this.children.length;++i){this.children[i]._updateParentMatrix(_cc);}if(this.clip){this.setClip(this.clip);}return this;},_setDimensions:function(_cd,_ce){var r=this.rawNode,rs=r.style,bs=this.bgNode.style;rs.width=_cd;rs.height=_ce;r.coordsize=_cd+" "+_ce;bs.width=_cd;bs.height=_ce;for(var i=0;i<this.children.length;++i){this.children[i]._setDimensions(_cd,_ce);}return this;},setClip:function(_cf){this.clip=_cf;var _d0=this.rawNode.style;if(!_cf){_d0.position="absolute";_d0.clip="rect(0px "+_d0.width+" "+_d0.height+" 0px)";}else{if("width" in _cf){var _d1=this._getRealMatrix();var _d2=m.multiplyRectangle(_d1,_cf);var _d3=this.getBoundingBox();_d3=_d3?m.multiplyRectangle(_d1,_d3):null;var _d4=_d3&&_d3.x<0?_d3.x:0,_d5=_d3&&_d3.y<0?_d3.y:0;_d0.position="absolute";_d0.clip="rect("+Math.round(_d2.y-_d5)+"px "+Math.round(_d2.x+_d2.width-_d4)+"px "+Math.round(_d2.y+_d2.height-_d5)+"px "+Math.round(_d2.x-_d4)+"px)";}}return this;},destroy:function(){this.clear(true);vml.Shape.prototype.destroy.apply(this,arguments);}});vml.Group.nodeType="group";vml.Rect=_a3("dojox.gfx.vml.Rect",[vml.Shape,gs.Rect],{setShape:function(_d6){var _d7=this.shape=g.makeParameters(this.shape,_d6);this.bbox=null;var r=Math.min(1,(_d7.r/Math.min(parseFloat(_d7.width),parseFloat(_d7.height)))).toFixed(8);var _d8=this.rawNode.parentNode,_d9=null;if(_d8){if(_d8.lastChild!==this.rawNode){for(var i=0;i<_d8.childNodes.length;++i){if(_d8.childNodes[i]===this.rawNode){_d9=_d8.childNodes[i+1];break;}}}_d8.removeChild(this.rawNode);}if(has("ie")>7){var _da=this.rawNode.ownerDocument.createElement("v:roundrect");_da.arcsize=r;_da.style.display="inline-block";vml._reparentEvents(_da,this.rawNode);this.rawNode=_da;this.rawNode.__gfxObject__=this.getUID();}else{this.rawNode.arcsize=r;}if(_d8){if(_d9){_d8.insertBefore(this.rawNode,_d9);}else{_d8.appendChild(this.rawNode);}}var _db=this.rawNode.style;_db.left=_d7.x.toFixed();_db.top=_d7.y.toFixed();_db.width=(typeof _d7.width=="string"&&_d7.width.indexOf("%")>=0)?_d7.width:Math.max(_d7.width.toFixed(),0);_db.height=(typeof _d7.height=="string"&&_d7.height.indexOf("%")>=0)?_d7.height:Math.max(_d7.height.toFixed(),0);return this.setTransform(this.matrix).setFill(this.fillStyle).setStroke(this.strokeStyle);}});vml.Rect.nodeType="roundrect";vml.Ellipse=_a3("dojox.gfx.vml.Ellipse",[vml.Shape,gs.Ellipse],{setShape:function(_dc){var _dd=this.shape=g.makeParameters(this.shape,_dc);this.bbox=null;var _de=this.rawNode.style;_de.left=(_dd.cx-_dd.rx).toFixed();_de.top=(_dd.cy-_dd.ry).toFixed();_de.width=(_dd.rx*2).toFixed();_de.height=(_dd.ry*2).toFixed();return this.setTransform(this.matrix);}});vml.Ellipse.nodeType="oval";vml.Circle=_a3("dojox.gfx.vml.Circle",[vml.Shape,gs.Circle],{setShape:function(_df){var _e0=this.shape=g.makeParameters(this.shape,_df);this.bbox=null;var _e1=this.rawNode.style;_e1.left=(_e0.cx-_e0.r).toFixed();_e1.top=(_e0.cy-_e0.r).toFixed();_e1.width=(_e0.r*2).toFixed();_e1.height=(_e0.r*2).toFixed();return this;}});vml.Circle.nodeType="oval";vml.Line=_a3("dojox.gfx.vml.Line",[vml.Shape,gs.Line],{constructor:function(_e2){if(_e2){_e2.setAttribute("dojoGfxType","line");}},setShape:function(_e3){var _e4=this.shape=g.makeParameters(this.shape,_e3);this.bbox=null;this.rawNode.path.v="m"+_e4.x1.toFixed()+" "+_e4.y1.toFixed()+"l"+_e4.x2.toFixed()+" "+_e4.y2.toFixed()+"e";return this.setTransform(this.matrix);}});vml.Line.nodeType="shape";vml.Polyline=_a3("dojox.gfx.vml.Polyline",[vml.Shape,gs.Polyline],{constructor:function(_e5){if(_e5){_e5.setAttribute("dojoGfxType","polyline");}},setShape:function(_e6,_e7){if(_e6&&_e6 instanceof Array){this.shape=g.makeParameters(this.shape,{points:_e6});if(_e7&&this.shape.points.length){this.shape.points.push(this.shape.points[0]);}}else{this.shape=g.makeParameters(this.shape,_e6);}this.bbox=null;this._normalizePoints();var _e8=[],p=this.shape.points;if(p.length>0){_e8.push("m");_e8.push(p[0].x.toFixed(),p[0].y.toFixed());if(p.length>1){_e8.push("l");for(var i=1;i<p.length;++i){_e8.push(p[i].x.toFixed(),p[i].y.toFixed());}}}_e8.push("e");this.rawNode.path.v=_e8.join(" ");return this.setTransform(this.matrix);}});vml.Polyline.nodeType="shape";vml.Image=_a3("dojox.gfx.vml.Image",[vml.Shape,gs.Image],{setShape:function(_e9){var _ea=this.shape=g.makeParameters(this.shape,_e9);this.bbox=null;this.rawNode.firstChild.src=_ea.src;return this.setTransform(this.matrix);},_applyTransform:function(){var _eb=this._getRealMatrix(),_ec=this.rawNode,s=_ec.style,_ed=this.shape;if(_eb){_eb=m.multiply(_eb,{dx:_ed.x,dy:_ed.y});}else{_eb=m.normalize({dx:_ed.x,dy:_ed.y});}if(_eb.xy==0&&_eb.yx==0&&_eb.xx>0&&_eb.yy>0){s.filter="";s.width=Math.floor(_eb.xx*_ed.width);s.height=Math.floor(_eb.yy*_ed.height);s.left=Math.floor(_eb.dx);s.top=Math.floor(_eb.dy);}else{var ps=_ec.parentNode.style;s.left="0px";s.top="0px";s.width=ps.width;s.height=ps.height;_eb=m.multiply(_eb,{xx:_ed.width/parseInt(s.width),yy:_ed.height/parseInt(s.height)});var f=_ec.filters["DXImageTransform.Microsoft.Matrix"];if(f){f.M11=_eb.xx;f.M12=_eb.xy;f.M21=_eb.yx;f.M22=_eb.yy;f.Dx=_eb.dx;f.Dy=_eb.dy;}else{s.filter="progid:DXImageTransform.Microsoft.Matrix(M11="+_eb.xx+", M12="+_eb.xy+", M21="+_eb.yx+", M22="+_eb.yy+", Dx="+_eb.dx+", Dy="+_eb.dy+")";}}return this;},_setDimensions:function(_ee,_ef){var r=this.rawNode,f=r.filters["DXImageTransform.Microsoft.Matrix"];if(f){var s=r.style;s.width=_ee;s.height=_ef;return this._applyTransform();}return this;}});vml.Image.nodeType="rect";vml.Text=_a3("dojox.gfx.vml.Text",[vml.Shape,gs.Text],{constructor:function(_f0){if(_f0){_f0.setAttribute("dojoGfxType","text");}this.fontStyle=null;},_alignment:{start:"left",middle:"center",end:"right"},setShape:function(_f1){this.shape=g.makeParameters(this.shape,_f1);this.bbox=null;var r=this.rawNode,s=this.shape,x=s.x,y=s.y.toFixed(),_f2;switch(s.align){case "middle":x-=5;break;case "end":x-=10;break;}_f2="m"+x.toFixed()+","+y+"l"+(x+10).toFixed()+","+y+"e";var p=null,t=null,c=r.childNodes;for(var i=0;i<c.length;++i){var tag=c[i].tagName;if(tag=="path"){p=c[i];if(t){break;}}else{if(tag=="textpath"){t=c[i];if(p){break;}}}}if(!p){p=r.ownerDocument.createElement("v:path");r.appendChild(p);}if(!t){t=r.ownerDocument.createElement("v:textpath");r.appendChild(t);}p.v=_f2;p.textPathOk=true;t.on=true;var a=vml.text_alignment[s.align];t.style["v-text-align"]=a?a:"left";t.style["text-decoration"]=s.decoration;t.style["v-rotate-letters"]=s.rotated;t.style["v-text-kern"]=s.kerning;t.string=s.text;return this.setTransform(this.matrix);},_setFont:function(){var f=this.fontStyle,c=this.rawNode.childNodes;for(var i=0;i<c.length;++i){if(c[i].tagName=="textpath"){c[i].style.font=g.makeFontString(f);break;}}this.setTransform(this.matrix);},_getRealMatrix:function(){var _f3=this.inherited(arguments);if(_f3){_f3=m.multiply(_f3,{dy:-g.normalizedLength(this.fontStyle?this.fontStyle.size:"10pt")*0.35});}return _f3;},getTextWidth:function(){var _f4=this.rawNode,_f5=_f4.style.display;_f4.style.display="inline";var _f6=g.pt2px(parseFloat(_f4.currentStyle.width));_f4.style.display=_f5;return _f6;}});vml.Text.nodeType="shape";vml.Path=_a3("dojox.gfx.vml.Path",[vml.Shape,_a8.Path],{constructor:function(_f7){if(_f7&&!_f7.getAttribute("dojoGfxType")){_f7.setAttribute("dojoGfxType","path");}this.vmlPath="";this.lastControl={};},_updateWithSegment:function(_f8){var _f9=_a2.clone(this.last);this.inherited(arguments);if(arguments.length>1){return;}var _fa=this[this.renderers[_f8.action]](_f8,_f9);if(typeof this.vmlPath=="string"){this.vmlPath+=_fa.join("");this.rawNode.path.v=this.vmlPath+" r0,0 e";}else{Array.prototype.push.apply(this.vmlPath,_fa);}},setShape:function(_fb){this.vmlPath=[];this.lastControl.type="";this.inherited(arguments);this.vmlPath=this.vmlPath.join("");this.rawNode.path.v=this.vmlPath+" r0,0 e";return this;},_pathVmlToSvgMap:{m:"M",l:"L",t:"m",r:"l",c:"C",v:"c",qb:"Q",x:"z",e:""},renderers:{M:"_moveToA",m:"_moveToR",L:"_lineToA",l:"_lineToR",H:"_hLineToA",h:"_hLineToR",V:"_vLineToA",v:"_vLineToR",C:"_curveToA",c:"_curveToR",S:"_smoothCurveToA",s:"_smoothCurveToR",Q:"_qCurveToA",q:"_qCurveToR",T:"_qSmoothCurveToA",t:"_qSmoothCurveToR",A:"_arcTo",a:"_arcTo",Z:"_closePath",z:"_closePath"},_addArgs:function(_fc,_fd,_fe,_ff){var n=_fd instanceof Array?_fd:_fd.args;for(var i=_fe;i<_ff;++i){_fc.push(" ",n[i].toFixed());}},_adjustRelCrd:function(last,_100,step){var n=_100 instanceof Array?_100:_100.args,l=n.length,_101=new Array(l),i=0,x=last.x,y=last.y;if(typeof x!="number"){_101[0]=x=n[0];_101[1]=y=n[1];i=2;}if(typeof step=="number"&&step!=2){var j=step;while(j<=l){for(;i<j;i+=2){_101[i]=x+n[i];_101[i+1]=y+n[i+1];}x=_101[j-2];y=_101[j-1];j+=step;}}else{for(;i<l;i+=2){_101[i]=(x+=n[i]);_101[i+1]=(y+=n[i+1]);}}return _101;},_adjustRelPos:function(last,_102){var n=_102 instanceof Array?_102:_102.args,l=n.length,_103=new Array(l);for(var i=0;i<l;++i){_103[i]=(last+=n[i]);}return _103;},_moveToA:function(_104){var p=[" m"],n=_104 instanceof Array?_104:_104.args,l=n.length;this._addArgs(p,n,0,2);if(l>2){p.push(" l");this._addArgs(p,n,2,l);}this.lastControl.type="";return p;},_moveToR:function(_105,last){return this._moveToA(this._adjustRelCrd(last,_105));},_lineToA:function(_106){var p=[" l"],n=_106 instanceof Array?_106:_106.args;this._addArgs(p,n,0,n.length);this.lastControl.type="";return p;},_lineToR:function(_107,last){return this._lineToA(this._adjustRelCrd(last,_107));},_hLineToA:function(_108,last){var p=[" l"],y=" "+last.y.toFixed(),n=_108 instanceof Array?_108:_108.args,l=n.length;for(var i=0;i<l;++i){p.push(" ",n[i].toFixed(),y);}this.lastControl.type="";return p;},_hLineToR:function(_109,last){return this._hLineToA(this._adjustRelPos(last.x,_109),last);},_vLineToA:function(_10a,last){var p=[" l"],x=" "+last.x.toFixed(),n=_10a instanceof Array?_10a:_10a.args,l=n.length;for(var i=0;i<l;++i){p.push(x," ",n[i].toFixed());}this.lastControl.type="";return p;},_vLineToR:function(_10b,last){return this._vLineToA(this._adjustRelPos(last.y,_10b),last);},_curveToA:function(_10c){var p=[],n=_10c instanceof Array?_10c:_10c.args,l=n.length,lc=this.lastControl;for(var i=0;i<l;i+=6){p.push(" c");this._addArgs(p,n,i,i+6);}lc.x=n[l-4];lc.y=n[l-3];lc.type="C";return p;},_curveToR:function(_10d,last){return this._curveToA(this._adjustRelCrd(last,_10d,6));},_smoothCurveToA:function(_10e,last){var p=[],n=_10e instanceof Array?_10e:_10e.args,l=n.length,lc=this.lastControl,i=0;if(lc.type!="C"){p.push(" c");this._addArgs(p,[last.x,last.y],0,2);this._addArgs(p,n,0,4);lc.x=n[0];lc.y=n[1];lc.type="C";i=4;}for(;i<l;i+=4){p.push(" c");this._addArgs(p,[2*last.x-lc.x,2*last.y-lc.y],0,2);this._addArgs(p,n,i,i+4);lc.x=n[i];lc.y=n[i+1];}return p;},_smoothCurveToR:function(_10f,last){return this._smoothCurveToA(this._adjustRelCrd(last,_10f,4),last);},_qCurveToA:function(_110){var p=[],n=_110 instanceof Array?_110:_110.args,l=n.length,lc=this.lastControl;for(var i=0;i<l;i+=4){p.push(" qb");this._addArgs(p,n,i,i+4);}lc.x=n[l-4];lc.y=n[l-3];lc.type="Q";return p;},_qCurveToR:function(_111,last){return this._qCurveToA(this._adjustRelCrd(last,_111,4));},_qSmoothCurveToA:function(_112,last){var p=[],n=_112 instanceof Array?_112:_112.args,l=n.length,lc=this.lastControl,i=0;if(lc.type!="Q"){p.push(" qb");this._addArgs(p,[lc.x=last.x,lc.y=last.y],0,2);lc.type="Q";this._addArgs(p,n,0,2);i=2;}for(;i<l;i+=2){p.push(" qb");this._addArgs(p,[lc.x=2*last.x-lc.x,lc.y=2*last.y-lc.y],0,2);this._addArgs(p,n,i,i+2);}return p;},_qSmoothCurveToR:function(_113,last){return this._qSmoothCurveToA(this._adjustRelCrd(last,_113,2),last);},_arcTo:function(_114,last){var p=[],n=_114.args,l=n.length,_115=_114.action=="a";for(var i=0;i<l;i+=7){var x1=n[i+5],y1=n[i+6];if(_115){x1+=last.x;y1+=last.y;}var _116=_a9.arcAsBezier(last,n[i],n[i+1],n[i+2],n[i+3]?1:0,n[i+4]?1:0,x1,y1);for(var j=0;j<_116.length;++j){p.push(" c");var t=_116[j];this._addArgs(p,t,0,t.length);this._updateBBox(t[0],t[1]);this._updateBBox(t[2],t[3]);this._updateBBox(t[4],t[5]);}last.x=x1;last.y=y1;}this.lastControl.type="";return p;},_closePath:function(){this.lastControl.type="";return ["x"];}});vml.Path.nodeType="shape";vml.EsriPath=_a3("dojox.gfx.vml.EsriPath",vml.Path,{setShape:function(_117){this.rawNode.path.v=(this.vmlPath=_117);return this;}});vml.EsriPath.nodeType="shape";vml.TextPath=_a3("dojox.gfx.vml.TextPath",[vml.Path,_a8.TextPath],{constructor:function(_118){if(_118){_118.setAttribute("dojoGfxType","textpath");}this.fontStyle=null;if(!("text" in this)){this.text=_a2.clone(g.defaultTextPath);}if(!("fontStyle" in this)){this.fontStyle=_a2.clone(g.defaultFont);}},setText:function(_119){this.text=g.makeParameters(this.text,typeof _119=="string"?{text:_119}:_119);this._setText();return this;},setFont:function(_11a){this.fontStyle=typeof _11a=="string"?g.splitFontString(_11a):g.makeParameters(g.defaultFont,_11a);this._setFont();return this;},_setText:function(){this.bbox=null;var r=this.rawNode,s=this.text,p=null,t=null,c=r.childNodes;for(var i=0;i<c.length;++i){var tag=c[i].tagName;if(tag=="path"){p=c[i];if(t){break;}}else{if(tag=="textpath"){t=c[i];if(p){break;}}}}if(!p){p=this.rawNode.ownerDocument.createElement("v:path");r.appendChild(p);}if(!t){t=this.rawNode.ownerDocument.createElement("v:textpath");r.appendChild(t);}p.textPathOk=true;t.on=true;var a=vml.text_alignment[s.align];t.style["v-text-align"]=a?a:"left";t.style["text-decoration"]=s.decoration;t.style["v-rotate-letters"]=s.rotated;t.style["v-text-kern"]=s.kerning;t.string=s.text;},_setFont:function(){var f=this.fontStyle,c=this.rawNode.childNodes;for(var i=0;i<c.length;++i){if(c[i].tagName=="textpath"){c[i].style.font=g.makeFontString(f);break;}}}});vml.TextPath.nodeType="shape";vml.Surface=_a3("dojox.gfx.vml.Surface",gs.Surface,{constructor:function(){gs.Container._init.call(this);},setDimensions:function(_11b,_11c){this.width=g.normalizedLength(_11b);this.height=g.normalizedLength(_11c);if(!this.rawNode){return this;}var cs=this.clipNode.style,r=this.rawNode,rs=r.style,bs=this.bgNode.style,ps=this._parent.style,i;ps.width=_11b;ps.height=_11c;cs.width=_11b;cs.height=_11c;cs.clip="rect(0px "+_11b+"px "+_11c+"px 0px)";rs.width=_11b;rs.height=_11c;r.coordsize=_11b+" "+_11c;bs.width=_11b;bs.height=_11c;for(i=0;i<this.children.length;++i){this.children[i]._setDimensions(_11b,_11c);}return this;},getDimensions:function(){var t=this.rawNode?{width:g.normalizedLength(this.rawNode.style.width),height:g.normalizedLength(this.rawNode.style.height)}:null;if(t.width<=0){t.width=this.width;}if(t.height<=0){t.height=this.height;}return t;}});vml.createSurface=function(_11d,_11e,_11f){if(!_11e&&!_11f){var pos=_a6.position(_11d);_11e=_11e||pos.w;_11f=_11f||pos.h;}if(typeof _11e=="number"){_11e=_11e+"px";}if(typeof _11f=="number"){_11f=_11f+"px";}var s=new vml.Surface(),p=dom.byId(_11d),c=s.clipNode=p.ownerDocument.createElement("div"),r=s.rawNode=p.ownerDocument.createElement("v:group"),cs=c.style,rs=r.style;if(has("ie")>7){rs.display="inline-block";}s._parent=p;s._nodes.push(c);p.style.width=_11e;p.style.height=_11f;cs.position="absolute";cs.width=_11e;cs.height=_11f;cs.clip="rect(0px "+_11e+" "+_11f+" 0px)";rs.position="absolute";rs.width=_11e;rs.height=_11f;r.coordsize=(_11e==="100%"?_11e:parseFloat(_11e))+" "+(_11f==="100%"?_11f:parseFloat(_11f));r.coordorigin="0 0";var b=s.bgNode=r.ownerDocument.createElement("v:rect"),bs=b.style;bs.left=bs.top=0;bs.width=rs.width;bs.height=rs.height;b.filled=b.stroked="f";r.appendChild(b);c.appendChild(r);p.appendChild(c);s.width=g.normalizedLength(_11e);s.height=g.normalizedLength(_11f);return s;};function _120(_121,f,o){o=o||_a7.global;f.call(o,_121);if(_121 instanceof g.Surface||_121 instanceof g.Group){arr.forEach(_121.children,function(_122){_120(_122,f,o);});}};var _123=function(_124){if(this!=_124.getParent()){var _125=_124.getParent();if(_125){_125.remove(_124);}this.rawNode.appendChild(_124.rawNode);C.add.apply(this,arguments);_120(this,function(s){if(typeof (s.getFont)=="function"){s.setShape(s.getShape());s.setFont(s.getFont());}if(typeof (s.setFill)=="function"){s.setFill(s.getFill());s.setStroke(s.getStroke());}});}return this;};var _126=function(_127){if(this!=_127.getParent()){this.rawNode.appendChild(_127.rawNode);if(!_127.getParent()){_127.setFill(_127.getFill());_127.setStroke(_127.getStroke());}C.add.apply(this,arguments);}return this;};var C=gs.Container,_128={add:_a5.fixVmlAdd===true?_123:_126,remove:function(_129,_12a){if(this==_129.getParent()){if(this.rawNode==_129.rawNode.parentNode){this.rawNode.removeChild(_129.rawNode);}C.remove.apply(this,arguments);}return this;},clear:function(){var r=this.rawNode;while(r.firstChild!=r.lastChild){if(r.firstChild!=this.bgNode){r.removeChild(r.firstChild);}if(r.lastChild!=this.bgNode){r.removeChild(r.lastChild);}}return C.clear.apply(this,arguments);},getBoundingBox:C.getBoundingBox,_moveChildToFront:C._moveChildToFront,_moveChildToBack:C._moveChildToBack};var _12b={createGroup:function(){var node=this.createObject(vml.Group,null);var r=node.rawNode.ownerDocument.createElement("v:rect");r.style.left=r.style.top=0;r.style.width=node.rawNode.style.width;r.style.height=node.rawNode.style.height;r.filled=r.stroked="f";node.rawNode.appendChild(r);node.bgNode=r;return node;},createImage:function(_12c){if(!this.rawNode){return null;}var _12d=new vml.Image(),doc=this.rawNode.ownerDocument,node=doc.createElement("v:rect");node.stroked="f";node.style.width=this.rawNode.style.width;node.style.height=this.rawNode.style.height;var img=doc.createElement("v:imagedata");node.appendChild(img);_12d.setRawNode(node);this.rawNode.appendChild(node);_12d.setShape(_12c);this.add(_12d);return _12d;},createRect:function(rect){if(!this.rawNode){return null;}var _12e=new vml.Rect,node=this.rawNode.ownerDocument.createElement("v:roundrect");if(has("ie")>7){node.style.display="inline-block";}_12e.setRawNode(node);this.rawNode.appendChild(node);_12e.setShape(rect);this.add(_12e);return _12e;},createObject:function(_12f,_130){if(!this.rawNode){return null;}var _131=new _12f(),node=this.rawNode.ownerDocument.createElement("v:"+_12f.nodeType);_131.setRawNode(node);this.rawNode.appendChild(node);switch(_12f){case vml.Group:case vml.Line:case vml.Polyline:case vml.Image:case vml.Text:case vml.Path:case vml.TextPath:this._overrideSize(node);}_131.setShape(_130);this.add(_131);return _131;},_overrideSize:function(node){var s=this.rawNode.style,w=s.width,h=s.height;node.style.width=w;node.style.height=h;node.coordsize=parseInt(w)+" "+parseInt(h);}};_a2.extend(vml.Group,_128);_a2.extend(vml.Group,gs.Creator);_a2.extend(vml.Group,_12b);_a2.extend(vml.Surface,_128);_a2.extend(vml.Surface,gs.Creator);_a2.extend(vml.Surface,_12b);vml.fixTarget=function(_132,_133){if(!_132.gfxTarget){_132.gfxTarget=gs.byId(_132.target.__gfxObject__);}return true;};return vml;});