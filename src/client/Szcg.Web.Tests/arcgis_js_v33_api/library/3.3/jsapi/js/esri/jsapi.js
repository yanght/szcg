/*
 COPYRIGHT 2009 ESRI

 TRADE SECRETS: ESRI PROPRIETARY AND CONFIDENTIAL
 Unpublished material - all rights reserved under the
 Copyright Laws of the United States and applicable international
 laws, treaties, and conventions.

 For additional information, contact:
 Environmental Systems Research Institute, Inc.
 Attn: Contracts and Legal Services Department
 380 New York Street
 Redlands, California, 92373
 USA

 email: contracts@esri.com
 */
//>>built
require({cache:{"dijit/form/TextBox":function(){require({cache:{"url:dijit/form/templates/TextBox.html":"<div class=\"dijit dijitReset dijitInline dijitLeft\" id=\"widget_${id}\" role=\"presentation\"\n\t><div class=\"dijitReset dijitInputField dijitInputContainer\"\n\t\t><input class=\"dijitReset dijitInputInner\" data-dojo-attach-point='textbox,focusNode' autocomplete=\"off\"\n\t\t\t${!nameAttrSetting} type='${type}'\n\t/></div\n></div>\n"}});define("dijit/form/TextBox",["dojo/_base/declare","dojo/dom-construct","dojo/dom-style","dojo/_base/kernel","dojo/_base/lang","dojo/sniff","./_FormValueWidget","./_TextBoxMixin","dojo/text!./templates/TextBox.html","../main"],function(_1,_2,_3,_4,_5,_6,_7,_8,_9,_a){var _b=_1("dijit.form.TextBox",[_7,_8],{templateString:_9,_singleNodeTemplate:"<input class=\"dijit dijitReset dijitLeft dijitInputField\" data-dojo-attach-point=\"textbox,focusNode\" autocomplete=\"off\" type=\"${type}\" ${!nameAttrSetting} />",_buttonInputDisabled:_6("ie")?"disabled":"",baseClass:"dijitTextBox",postMixInProperties:function(){var _c=this.type.toLowerCase();if(this.templateString&&this.templateString.toLowerCase()=="input"||((_c=="hidden"||_c=="file")&&this.templateString==this.constructor.prototype.templateString)){this.templateString=this._singleNodeTemplate;}this.inherited(arguments);},postCreate:function(){this.inherited(arguments);if(_6("ie")<9){this.defer(function(){try{var s=_3.getComputedStyle(this.domNode);if(s){var ff=s.fontFamily;if(ff){var _d=this.domNode.getElementsByTagName("INPUT");if(_d){for(var i=0;i<_d.length;i++){_d[i].style.fontFamily=ff;}}}}}catch(e){}});}},_onInput:function(e){this.inherited(arguments);if(this.intermediateChanges){this.defer(function(){this._handleOnChange(this.get("value"),false);});}},_setPlaceHolderAttr:function(v){this._set("placeHolder",v);if(!this._phspan){this._attachPoints.push("_phspan");this._phspan=_2.create("span",{className:"dijitPlaceHolder dijitInputField"},this.textbox,"after");}this._phspan.innerHTML="";this._phspan.appendChild(this._phspan.ownerDocument.createTextNode(v));this._updatePlaceHolder();},_updatePlaceHolder:function(){if(this._phspan){this._phspan.style.display=(this.placeHolder&&!this.focused&&!this.textbox.value)?"":"none";}},_setValueAttr:function(_e,_f,_10){this.inherited(arguments);this._updatePlaceHolder();},getDisplayedValue:function(){_4.deprecated(this.declaredClass+"::getDisplayedValue() is deprecated. Use get('displayedValue') instead.","","2.0");return this.get("displayedValue");},setDisplayedValue:function(_11){_4.deprecated(this.declaredClass+"::setDisplayedValue() is deprecated. Use set('displayedValue', ...) instead.","","2.0");this.set("displayedValue",_11);},_onBlur:function(e){if(this.disabled){return;}this.inherited(arguments);this._updatePlaceHolder();if(_6("mozilla")){if(this.selectOnClick){this.textbox.selectionStart=this.textbox.selectionEnd=undefined;}}},_onFocus:function(by){if(this.disabled||this.readOnly){return;}this.inherited(arguments);this._updatePlaceHolder();}});if(_6("ie")){_b.prototype._isTextSelected=function(){var _12=this.ownerDocument.selection.createRange();var _13=_12.parentElement();return _13==this.textbox&&_12.text.length>0;};_a._setSelectionRange=_8._setSelectionRange=function(_14,_15,_16){if(_14.createTextRange){var r=_14.createTextRange();r.collapse(true);r.moveStart("character",-99999);r.moveStart("character",_15);r.moveEnd("character",_16-_15);r.select();}};}return _b;});},"dijit/_base/scroll":function(){define("dijit/_base/scroll",["dojo/window","../main"],function(_17,_18){_18.scrollIntoView=function(_19,pos){_17.scrollIntoView(_19,pos);};});},"dijit/_TemplatedMixin":function(){define("dijit/_TemplatedMixin",["dojo/_base/lang","dojo/touch","./_WidgetBase","dojo/string","dojo/cache","dojo/_base/array","dojo/_base/declare","dojo/dom-construct","dojo/sniff","dojo/_base/unload"],function(_1a,_1b,_1c,_1d,_1e,_1f,_20,_21,has,_22){var _23=_20("dijit._TemplatedMixin",null,{templateString:null,templatePath:null,_skipNodeCache:false,_earlyTemplatedStartup:false,constructor:function(){this._attachPoints=[];this._attachEvents=[];},_stringRepl:function(_24){var _25=this.declaredClass,_26=this;return _1d.substitute(_24,this,function(_27,key){if(key.charAt(0)=="!"){_27=_1a.getObject(key.substr(1),false,_26);}if(typeof _27=="undefined"){throw new Error(_25+" template:"+key);}if(_27==null){return "";}return key.charAt(0)=="!"?_27:_27.toString().replace(/"/g,"&quot;");},this);},buildRendering:function(){if(!this.templateString){this.templateString=_1e(this.templatePath,{sanitize:true});}var _28=_23.getCachedTemplate(this.templateString,this._skipNodeCache,this.ownerDocument);var _29;if(_1a.isString(_28)){_29=_21.toDom(this._stringRepl(_28),this.ownerDocument);if(_29.nodeType!=1){throw new Error("Invalid template: "+_28);}}else{_29=_28.cloneNode(true);}this.domNode=_29;this.inherited(arguments);this._attachTemplateNodes(_29,function(n,p){return n.getAttribute(p);});this._beforeFillContent();this._fillContent(this.srcNodeRef);},_beforeFillContent:function(){},_fillContent:function(_2a){var _2b=this.containerNode;if(_2a&&_2b){while(_2a.hasChildNodes()){_2b.appendChild(_2a.firstChild);}}},_attachTemplateNodes:function(_2c,_2d){var _2e=_1a.isArray(_2c)?_2c:(_2c.all||_2c.getElementsByTagName("*"));var x=_1a.isArray(_2c)?0:-1;for(;x<0||_2e[x];x++){var _2f=(x==-1)?_2c:_2e[x];if(this.widgetsInTemplate&&(_2d(_2f,"dojoType")||_2d(_2f,"data-dojo-type"))){continue;}var _30=_2d(_2f,"dojoAttachPoint")||_2d(_2f,"data-dojo-attach-point");if(_30){var _31,_32=_30.split(/\s*,\s*/);while((_31=_32.shift())){if(_1a.isArray(this[_31])){this[_31].push(_2f);}else{this[_31]=_2f;}this._attachPoints.push(_31);}}var _33=_2d(_2f,"dojoAttachEvent")||_2d(_2f,"data-dojo-attach-event");if(_33){var _34,_35=_33.split(/\s*,\s*/);var _36=_1a.trim;while((_34=_35.shift())){if(_34){var _37=null;if(_34.indexOf(":")!=-1){var _38=_34.split(":");_34=_36(_38[0]);_37=_36(_38[1]);}else{_34=_36(_34);}if(!_37){_37=_34;}this._attachEvents.push(this.connect(_2f,_1b[_34]||_34,_37));}}}}},destroyRendering:function(){_1f.forEach(this._attachPoints,function(_39){delete this[_39];},this);this._attachPoints=[];_1f.forEach(this._attachEvents,this.disconnect,this);this._attachEvents=[];this.inherited(arguments);}});_23._templateCache={};_23.getCachedTemplate=function(_3a,_3b,doc){var _3c=_23._templateCache;var key=_3a;var _3d=_3c[key];if(_3d){try{if(!_3d.ownerDocument||_3d.ownerDocument==(doc||document)){return _3d;}}catch(e){}_21.destroy(_3d);}_3a=_1d.trim(_3a);if(_3b||_3a.match(/\$\{([^\}]+)\}/g)){return (_3c[key]=_3a);}else{var _3e=_21.toDom(_3a,doc);if(_3e.nodeType!=1){throw new Error("Invalid template: "+_3a);}return (_3c[key]=_3e);}};if(has("ie")){_22.addOnWindowUnload(function(){var _3f=_23._templateCache;for(var key in _3f){var _40=_3f[key];if(typeof _40=="object"){_21.destroy(_40);}delete _3f[key];}});}_1a.extend(_1c,{dojoAttachEvent:"",dojoAttachPoint:""});return _23;});},"esri/dijit/Attribution":function(){define("esri/dijit/Attribution",["dijit","dojo","dojox","dojo/require!esri/geometry,esri/utils"],function(_41,_42,_43){_42.provide("esri.dijit.Attribution");_42.require("esri.geometry");_42.require("esri.utils");_42.declare("esri.dijit.Attribution",null,{itemDelimiter:" | ",listClass:"esriAttributionList",itemClass:"esriAttributionItem",lastItemClass:"esriAttributionLastItem",delimiterClass:"esriAttributionDelim",constructor:function(_44,_45){try{_42.mixin(this,_44);this._attributions={};this._pendingDfds={};this._activeLayers=[];this._sharedLayers=[];var _46=(this.domNode=_42.byId(_45)),map=this.map,_47="<span class='"+this.listClass+"'></span>";if(_46){_42.attr(_46,"innerHTML",_47);this.listNode=_42.query(".esriAttributionList",_46)[0];this.itemNodes={};}this._eventConnections=[_42.connect(map,"onLayerAdd",this,this._onLayerAdd),_42.connect(map,"onLayerRemove",this,this._onLayerRemove),_42.connect(map,"onLayerSuspend",this,this._onLayerSuspend),_42.connect(map,"onLayerResume",this,this._onLayerResume),_42.connect(map,"onExtentChange",this,this._onExtentChange)];if(map.loaded){var _48=map.layerIds.concat(map.graphicsLayerIds),_49,i,len=_48.length;for(i=0;i<len;i++){_49=map.getLayer(_48[i]);if(_49.loaded){this._onLayerAdd(_49);}}}}catch(err){}},startup:function(){},destroy:function(){_42.forEach(this._eventConnections,_42.disconnect);_42.destroy(this.listNode);this.map=this.domNode=this._eventConnections=this.listNode=this._attributions=this._pendingDfds=this.itemNodes=this._activeLayers=this._lastItem=this._sharedLayers=null;},_onLayerAdd:function(_4a){try{var _4b=this._attributions,_4c=_4a.id;if(esri._isDefined(_4b[_4c])||!_4a.showAttribution){return;}if(_4a.hasAttributionData){var dfd=_4a.getAttributionData();this._pendingDfds[_4c]=1;_4b[_4c]=dfd;dfd.addBoth(_42.partial(this._onAttributionLoad,this,_4a));}else{_4b[_4c]=_4a.copyright||_4a.copyrightText||"";if(_4b[_4c]){if(!_4a.suspended){this._activeLayers.push(_4c);}this._createNode(_4c);}else{this._onLayerRemove(_4a);}}}catch(err){}},_onAttributionLoad:function(_4d,_4e,_4f){var _50=_4d._attributions,_51=_4d._pendingDfds,_52=_4e.id;if(!_51||!_51[_52]){return;}delete _51[_52];if(!_4f||_4f instanceof Error){_4f="";}if(_4f){_50[_52]=_4d._createIndexByLevel(_4f,_4e.declaredClass.toLowerCase().indexOf("vetiledlayer")!==-1);}else{_50[_52]=_4e.copyright||_4e.copyrightText||"";}if(_50[_52]){if(!_4e.suspended){_4d._activeLayers.push(_52);}_4d._createNode(_52);}else{_4d._onLayerRemove(_4e);}},_onLayerRemove:function(_53){try{var _54=_53.id,_55=this.itemNodes,idx,_56=-1;this._onLayerSuspend(_53);delete this._attributions[_54];delete this._pendingDfds[_54];idx=this._getGroupIndex(_54);if(idx!==-1){_56=_42.indexOf(this._sharedLayers[idx],_54);if(_56!==-1){this._sharedLayers[idx].splice(_56,1);if(this._sharedLayers[idx].length<=1){this._sharedLayers.splice(idx,1);}}}if(_55[_54]&&_56===-1){_42.destroy(_55[_54]);}delete _55[_54];this._updateLastItem();}catch(err){}},_onLayerSuspend:function(_57){try{var _58=_57.id;if(this._attributions[_58]){var idx=_42.indexOf(this._activeLayers,_58),_59=this.itemNodes[_58];if(idx!==-1){this._activeLayers.splice(idx,1);}if(_59){this._toggleItem(_59,false,this._getGroupIndex(_58));}}}catch(err){}},_onLayerResume:function(_5a){try{var _5b=_5a.id,_5c=this._attributions[_5b],_5d=this.itemNodes[_5b];if(_5c){if(_42.indexOf(this._activeLayers,_5b)===-1){this._activeLayers.push(_5b);}if(_5d){var _5e=_42.isString(_5c)?_5c:this._getContributorsList(_5c,this.map.extent,this.map.getLevel());if(!_42.isString(_5c)){_42.attr(_5d,"innerHTML",(_5e?(_5e+this._getDelimiter()):""));}if(_5e){this._toggleItem(_5d,true,this._getGroupIndex(_5b));}}}}catch(err){}},_onExtentChange:function(_5f,_60,_61,lod){try{var _62=this._activeLayers,_63=this._attributions,_64=this.itemNodes,_65,_66,_67,i,len=_62.length||0;for(i=0;i<len;i++){_66=_62[i];_67=_63[_66];_65=_64[_66];if(_65&&!_42.isString(_67)){var _68=this._getContributorsList(_67,_5f,lod?lod.level:-1);_42.attr(_65,"innerHTML",(_68?(_68+this._getDelimiter()):""));this._toggleItem(_65,!!_68,-1);}}}catch(err){}this._adjustCursorStyle();},_createNode:function(_69){if(!this.domNode){return;}var _6a=this._checkShareInfo(_69),_6b=_6a&&_6a.sharedWith,_6c=_6b&&this.itemNodes[_6b];var map=this.map,_6d=this._attributions[_69],_6e,_6f=(_42.isString(_6d)?_6d:this._getContributorsList(_6d,map.extent,map.getLevel())),_70=(!!_6f&&!map.getLayer(_69).suspended);if(_6c){this.itemNodes[_69]=_6c;this._toggleItem(_6c,_70,_6a.index);}else{_6e=(this.itemNodes[_69]=_42.create("span",{"class":this.itemClass,"innerHTML":_6f?(_6f+this._getDelimiter()):"","style":{"display":(_70?"inline":"none")}},this.listNode));if(_70){this._setLastItem(_6e);}}this._adjustCursorStyle();},_checkShareInfo:function(_71){var _72=this._attributions,_73,i,_74=-1,_75=_72[_71],_76;if(_75&&_42.isString(_75)){for(i in _72){_73=_72[i];if(i!==_71&&_73&&_42.isString(_73)){if(_73.length===_75.length&&_73.toLowerCase()===_75.toLowerCase()){_76=i;break;}}}var _77=this._sharedLayers,len=_77.length,_78;if(_76){for(i=0;i<len;i++){_78=_77[i];if(_42.indexOf(_78,_76)!==-1){_74=i;_78.push(_71);break;}}if(_74===-1){_74=_77.push([_76,_71])-1;}}}return (_74>-1)?{index:_74,sharedWith:_76}:null;},_getGroupIndex:function(_79){var _7a=this._sharedLayers,i,len=_7a.length,_7b=-1;for(i=0;i<len;i++){if(_42.indexOf(_7a[i],_79)!==-1){_7b=i;break;}}return _7b;},_getDelimiter:function(){var _7c=this.itemDelimiter;return _7c?("<span class='"+this.delimiterClass+"'>"+_7c+"</span>"):"";},_toggleItem:function(_7d,_7e,_7f){if(_7f>-1&&!_7e){var _80=this._sharedLayers[_7f],i,len=_80.length,_81=this._activeLayers;for(i=0;i<len;i++){if(_42.indexOf(_81,_80[i])!==-1){return;}}}_42.style(_7d,"display",(_7e?"inline":"none"));this._updateLastItem();},_updateLastItem:function(){var _82=this.listNode.childNodes,i,len=_82.length,_83;if(len){for(i=len-1;i>=0;i--){_83=_82[i];if(_42.style(_83,"display")!=="none"){this._setLastItem(_83);break;}}}this._adjustCursorStyle();},_setLastItem:function(_84){var _85=this.itemClass,_86=this.lastItemClass;if(this._lastItem){_42.replaceClass(this._lastItem,_85,_86);}if(_84){_42.replaceClass(_84,_86,_85);this._lastItem=_84;}},_createIndexByLevel:function(_87,_88){var _89=_87.contributors,_8a,_8b,_8c,i,_8d=_89?_89.length:0,j,_8e,z,sr=new esri.SpatialReference(4326),_8f={},_90,_91;for(i=0;i<_8d;i++){_8a=_89[i];_8b=_8a.coverageAreas;_8e=_8b?_8b.length:0;for(j=0;j<_8e;j++){_8c=_8b[j];_91=_8c.bbox;_90={extent:esri.geometry.geographicToWebMercator(new esri.geometry.Extent(_91[1],_91[0],_91[3],_91[2],sr)),attribution:_8a.attribution||"",zoomMin:_8c.zoomMin-((_88&&_8c.zoomMin)?1:0),zoomMax:_8c.zoomMax-((_88&&_8c.zoomMax)?1:0),score:esri._isDefined(_8c.score)?_8c.score:100,objectId:i};for(z=_90.zoomMin;z<=_90.zoomMax;z++){_8f[z]=_8f[z]||[];_8f[z].push(_90);}}}return _8f;},_getContributorsList:function(_92,_93,_94){var _95="";if(_93&&esri._isDefined(_94)&&_94>-1){var _96=_92[_94],_97,_98=_93.getCenter().normalize(),i,_99=_96?_96.length:0,_9a=[],_9b={};for(i=0;i<_99;i++){_97=_96[i];if(!_9b[_97.objectId]&&_97.extent.contains(_98)){_9b[_97.objectId]=1;_9a.push(_97);}}_9a.sort(function(a,b){return b.score-a.score;});_99=_9a.length;for(i=0;i<_99;i++){_9a[i]=_9a[i].attribution;}_95=_9a.join(", ");}return _95;},_adjustCursorStyle:function(){var _9c=_42.position(this.listNode.parentNode,true).h;if(_42.hasClass(this.listNode.parentNode,"esriAttributionOpen")){_42.removeClass(this.listNode.parentNode,"esriAttributionOpen");if(_9c>_42.position(this.listNode.parentNode,true).h){_42.style(this.listNode.parentNode,"cursor","pointer");_42.addClass(this.listNode.parentNode,"esriAttributionOpen");}else{_42.style(this.listNode.parentNode,"cursor","default");}}else{_42.addClass(this.listNode.parentNode,"esriAttributionOpen");if(_9c<_42.position(this.listNode.parentNode,true).h){_42.style(this.listNode.parentNode,"cursor","pointer");}else{_42.style(this.listNode.parentNode,"cursor","default");}_42.removeClass(this.listNode.parentNode,"esriAttributionOpen");}}});});},"dijit/_Templated":function(){define("dijit/_Templated",["./_WidgetBase","./_TemplatedMixin","./_WidgetsInTemplateMixin","dojo/_base/array","dojo/_base/declare","dojo/_base/lang","dojo/_base/kernel"],function(_9d,_9e,_9f,_a0,_a1,_a2,_a3){_a2.extend(_9d,{waiRole:"",waiState:""});return _a1("dijit._Templated",[_9e,_9f],{widgetsInTemplate:false,constructor:function(){_a3.deprecated(this.declaredClass+": dijit._Templated deprecated, use dijit._TemplatedMixin and if necessary dijit._WidgetsInTemplateMixin","","2.0");},_attachTemplateNodes:function(_a4,_a5){this.inherited(arguments);var _a6=_a2.isArray(_a4)?_a4:(_a4.all||_a4.getElementsByTagName("*"));var x=_a2.isArray(_a4)?0:-1;for(;x<_a6.length;x++){var _a7=(x==-1)?_a4:_a6[x];var _a8=_a5(_a7,"waiRole");if(_a8){_a7.setAttribute("role",_a8);}var _a9=_a5(_a7,"waiState");if(_a9){_a0.forEach(_a9.split(/\s*,\s*/),function(_aa){if(_aa.indexOf("-")!=-1){var _ab=_aa.split("-");_a7.setAttribute("aria-"+_ab[0],_ab[1]);}});}}}});});},"esri/toolbars/navigation":function(){define(["dijit","dojo","dojox","dojo/require!esri/toolbars/_toolbar,esri/geometry,esri/symbol,esri/utils,esri/undoManager"],function(_ac,_ad,_ae){_ad.provide("esri.toolbars.navigation");_ad.require("esri.toolbars._toolbar");_ad.require("esri.geometry");_ad.require("esri.symbol");_ad.require("esri.utils");_ad.require("esri.undoManager");_ad.declare("esri.toolbars.MapExtent",esri.OperationBase,{label:"extent changes",constructor:function(_af){this.map=_af.map;this.preExtent=_af.preExtent;this.currentExtent=_af.currentExtent;},performRedo:function(){this.map.setExtent(this.currentExtent);},performUndo:function(){this.map.setExtent(this.preExtent);}});_ad.declare("esri.toolbars.Navigation",esri.toolbars._Toolbar,{constructor:function(map){this.zoomSymbol=new esri.symbol.SimpleFillSymbol(esri.symbol.SimpleFillSymbol.STYLE_SOLID,new esri.symbol.SimpleLineSymbol(esri.symbol.SimpleLineSymbol.STYLE_SOLID,new _ad.Color([255,0,0]),2),new _ad.Color([0,0,0,0.25]));_ad.connect(map,"onUnload",this,"_cleanUp");this.map=map;this._undoManager=new esri.UndoManager({maxOperations:-1});this._normalizeRect=_ad.hitch(this,this._normalizeRect);this._onMouseDownHandler=_ad.hitch(this,this._onMouseDownHandler);this._onMouseUpHandler=_ad.hitch(this,this._onMouseUpHandler);this._onMouseDragHandler=_ad.hitch(this,this._onMouseDragHandler);this._onExtentChangeHandler_connect=_ad.connect(map,"onExtentChange",this,"_extentChangeHandler");this._onMapLoad_connect=_ad.connect(map,"onLoad",this,"_mapLoadHandler");if(map.loaded&&map.extent){this._currentExtent=map.extent;}},_mapLoadHandler:function(){this._currentExtent=this.map.extent;},_navType:null,_start:null,_graphic:null,_prevExtent:false,_currentExtent:null,_preExtent:null,_cleanUp:function(map){_ad.disconnect(this._onExtentChangeHandler_connect);_ad.disconnect(this._onMapLoad_connect);},activate:function(_b0){var map=this.map;if(!this._graphic){this._deactivateMapTools(true,false,false,true);this._graphic=new esri.Graphic(null,this.zoomSymbol);}switch(_b0){case esri.toolbars.Navigation.ZOOM_IN:case esri.toolbars.Navigation.ZOOM_OUT:this._deactivate();this._onMouseDownHandler_connect=_ad.connect(map,"onMouseDown",this,"_onMouseDownHandler");this._onMouseDragHandler_connect=_ad.connect(map,"onMouseDrag",this,"_onMouseDragHandler");this._onMouseUpHandler_connect=_ad.connect(map,"onMouseUp",this,"_onMouseUpHandler");this._navType=_b0;break;case esri.toolbars.Navigation.PAN:this._deactivate();map.enablePan();this._navType=_b0;break;}},_extentChangeHandler:function(_b1){if(this._prevExtent||this._nextExtent){this._currentExtent=_b1;}else{this._preExtent=this._currentExtent;this._currentExtent=_b1;if(this._preExtent&&this._currentExtent){var _b2=esri.toolbars.MapExtent({map:this.map,preExtent:this._preExtent,currentExtent:this._currentExtent});this._undoManager.add(_b2);}}this._prevExtent=this._nextExtent=false;this.onExtentHistoryChange();},_deactivate:function(){var _b3=this._navType;if(_b3===esri.toolbars.Navigation.PAN){this.map.disablePan();}else{if(_b3===esri.toolbars.Navigation.ZOOM_IN||_b3===esri.toolbars.Navigation.ZOOM_OUT){_ad.disconnect(this._onMouseDownHandler_connect);_ad.disconnect(this._onMouseDragHandler_connect);_ad.disconnect(this._onMouseUpHandler_connect);}}},_normalizeRect:function(_b4,end,_b5){var sx=_b4.x,sy=_b4.y,ex=end.x,ey=end.y,_b6=Math.abs(sx-ex),_b7=Math.abs(sy-ey);return {x:Math.min(sx,ex),y:Math.max(sy,ey),width:_b6,height:_b7,spatialReference:_b5};},_onMouseDownHandler:function(evt){this._start=evt.mapPoint;},_onMouseDragHandler:function(evt){var _b8=this._graphic,_b9=this.map.graphics;_b9.remove(_b8,true);_b8.setGeometry(new esri.geometry.Rect(this._normalizeRect(this._start,evt.mapPoint,this.map.spatialReference)));_b9.add(_b8,true);},_onMouseUpHandler:function(evt){var map=this.map,_ba=this._normalizeRect(this._start,evt.mapPoint,map.spatialReference);map.graphics.remove(this._graphic,true);if(_ba.width===0&&_ba.height===0){return;}if(this._navType===esri.toolbars.Navigation.ZOOM_IN){map.setExtent(esri.geometry._rectToExtent(new esri.geometry.Rect(_ba)));}else{var tl=map.toScreen(_ba),tr=map.toScreen({x:_ba.x+_ba.width,y:_ba.y,spatialReference:map.spatialReference}),_bb=map.extent.getWidth(),_bc=(_bb*map.width)/Math.abs(tr.x-tl.x),_bd=(_bc-_bb)/2,ext=map.extent;map.setExtent(new esri.geometry.Extent(ext.xmin-_bd,ext.ymin-_bd,ext.xmax+_bd,ext.ymax+_bd,ext.spatialReference));}},deactivate:function(){this._deactivate();if(this._graphic){this.map.graphics.remove(this._graphic,true);}this._navType=this._start=this._graphic=null;this._activateMapTools(true,false,false,true);},setZoomSymbol:function(_be){this.zoomSymbol=_be;},isFirstExtent:function(){return !this._undoManager.canUndo;},isLastExtent:function(){return !this._undoManager.canRedo;},zoomToFullExtent:function(){var map=this.map;map.setExtent(map.getLayer(map.layerIds[0]).initialExtent);},zoomToPrevExtent:function(){if(!this._undoManager.canUndo){return;}this._prevExtent=true;this._undoManager.undo();},zoomToNextExtent:function(){if(!this._undoManager.canRedo){return;}this._nextExtent=true;this._undoManager.redo();},onExtentHistoryChange:function(){}});_ad.mixin(esri.toolbars.Navigation,{ZOOM_IN:"zoomin",ZOOM_OUT:"zoomout",PAN:"pan"});});},"dijit/_CssStateMixin":function(){define("dijit/_CssStateMixin",["dojo/_base/array","dojo/_base/declare","dojo/dom","dojo/dom-class","dojo/has","dojo/_base/lang","dojo/on","dojo/ready","dojo/_base/window","./registry"],function(_bf,_c0,dom,_c1,has,_c2,on,_c3,win,_c4){var _c5=_c0("dijit._CssStateMixin",[],{cssStateNodes:{},hovering:false,active:false,_applyAttributes:function(){this.inherited(arguments);_bf.forEach(["disabled","readOnly","checked","selected","focused","state","hovering","active","_opened"],function(_c6){this.watch(_c6,_c2.hitch(this,"_setStateClass"));},this);for(var ap in this.cssStateNodes){this._trackMouseState(this[ap],this.cssStateNodes[ap]);}this._trackMouseState(this.domNode,this.baseClass);this._setStateClass();},_cssMouseEvent:function(_c7){if(!this.disabled){switch(_c7.type){case "mouseover":this._set("hovering",true);this._set("active",this._mouseDown);break;case "mouseout":this._set("hovering",false);this._set("active",false);break;case "mousedown":case "touchstart":this._set("active",true);break;case "mouseup":case "touchend":this._set("active",false);break;}}},_setStateClass:function(){var _c8=this.baseClass.split(" ");function _c9(_ca){_c8=_c8.concat(_bf.map(_c8,function(c){return c+_ca;}),"dijit"+_ca);};if(!this.isLeftToRight()){_c9("Rtl");}var _cb=this.checked=="mixed"?"Mixed":(this.checked?"Checked":"");if(this.checked){_c9(_cb);}if(this.state){_c9(this.state);}if(this.selected){_c9("Selected");}if(this._opened){_c9("Opened");}if(this.disabled){_c9("Disabled");}else{if(this.readOnly){_c9("ReadOnly");}else{if(this.active){_c9("Active");}else{if(this.hovering){_c9("Hover");}}}}if(this.focused){_c9("Focused");}var tn=this.stateNode||this.domNode,_cc={};_bf.forEach(tn.className.split(" "),function(c){_cc[c]=true;});if("_stateClasses" in this){_bf.forEach(this._stateClasses,function(c){delete _cc[c];});}_bf.forEach(_c8,function(c){_cc[c]=true;});var _cd=[];for(var c in _cc){_cd.push(c);}tn.className=_cd.join(" ");this._stateClasses=_c8;},_subnodeCssMouseEvent:function(_ce,_cf,evt){if(this.disabled||this.readOnly){return;}function _d0(_d1){_c1.toggle(_ce,_cf+"Hover",_d1);};function _d2(_d3){_c1.toggle(_ce,_cf+"Active",_d3);};function _d4(_d5){_c1.toggle(_ce,_cf+"Focused",_d5);};switch(evt.type){case "mouseover":_d0(true);break;case "mouseout":_d0(false);_d2(false);break;case "mousedown":case "touchstart":_d2(true);break;case "mouseup":case "touchend":_d2(false);break;case "focus":case "focusin":_d4(true);break;case "blur":case "focusout":_d4(false);break;}},_trackMouseState:function(_d6,_d7){_d6._cssState=_d7;}});_c3(function(){function _d8(evt){if(!dom.isDescendant(evt.relatedTarget,evt.target)){for(var _d9=evt.target;_d9&&_d9!=evt.relatedTarget;_d9=_d9.parentNode){if(_d9._cssState){var _da=_c4.getEnclosingWidget(_d9);if(_da){if(_d9==_da.domNode){_da._cssMouseEvent(evt);}else{_da._subnodeCssMouseEvent(_d9,_d9._cssState,evt);}}}}}};function _db(evt){evt.target=evt.srcElement;_d8(evt);};var _dc=win.body(),_dd=(has("touch")?[]:["mouseover","mouseout"]).concat(["mousedown","touchstart","mouseup","touchend"]);_bf.forEach(_dd,function(_de){if(_dc.addEventListener){_dc.addEventListener(_de,_d8,true);}else{_dc.attachEvent("on"+_de,_db);}});on(_dc,"focusin, focusout",function(evt){var _df=evt.target;if(_df._cssState&&!_df.getAttribute("widgetId")){var _e0=_c4.getEnclosingWidget(_df);_e0._subnodeCssMouseEvent(_df,_df._cssState,evt);}});});return _c5;});},"esri/layers/agscommon":function(){define(["dijit","dojo","dojox","dojo/require!esri/geometry,esri/utils"],function(_e1,_e2,_e3){_e2.provide("esri.layers.agscommon");_e2.require("esri.geometry");_e2.require("esri.utils");_e2.declare("esri.layers.ArcGISMapServiceLayer",null,{constructor:function(url,_e4){this.layerInfos=[];var _e5=(this._params={}),_e6=this._url.query?this._url.query.token:null;if(_e6){_e5.token=_e6;}},_load:function(){esri.request({url:this._url.path,content:_e2.mixin({f:"json"},this._params),callbackParamName:"callback",load:this._initLayer,error:this._errorHandler});},spatialReference:null,initialExtent:null,fullExtent:null,description:null,units:null,_initLayer:function(_e7,io){try{this._findCredential();var ssl=(this.credential&&this.credential.ssl)||(_e7&&_e7._ssl);if(ssl){this._useSSL();}this.description=_e7.description;this.copyright=_e7.copyrightText;this.spatialReference=_e7.spatialReference&&new esri.SpatialReference(_e7.spatialReference);this.initialExtent=_e7.initialExtent&&new esri.geometry.Extent(_e7.initialExtent);this.fullExtent=_e7.fullExtent&&new esri.geometry.Extent(_e7.fullExtent);this.units=_e7.units;this.maxRecordCount=_e7.maxRecordCount;this.maxImageHeight=_e7.maxImageHeight;this.maxImageWidth=_e7.maxImageWidth;this.supportsDynamicLayers=_e7.supportsDynamicLayers;var _e8=(this.layerInfos=[]),_e9=_e7.layers,dvl=(this._defaultVisibleLayers=[]);_e2.forEach(_e9,function(lyr,i){_e8[i]=new esri.layers.LayerInfo(lyr);if(lyr.defaultVisibility){dvl.push(lyr.id);}});if(!this.visibleLayers){this.visibleLayers=dvl;}this.version=_e7.currentVersion;if(!this.version){var ver;if("capabilities" in _e7||"tables" in _e7){ver=10;}else{if("supportedImageFormatTypes" in _e7){ver=9.31;}else{ver=9.3;}}this.version=ver;}this.capabilities=_e7.capabilities;if(esri._isDefined(_e7.minScale)&&!this._hasMin){this.setMinScale(_e7.minScale);}if(esri._isDefined(_e7.maxScale)&&!this._hasMax){this.setMaxScale(_e7.maxScale);}}catch(e){this._errorHandler(e);}}});_e2.declare("esri.layers.LayerInfo",null,{constructor:function(_ea){_e2.mixin(this,_ea);},toJson:function(){var _eb={defaultVisibility:this.defaultVisibility,id:this.id,maxScale:this.maxScale,minScale:this.minScale,name:this.name,parentLayerId:this.parentLayerId,subLayerIds:this.subLayerIds};return esri._sanitize(_eb);}});_e2.declare("esri.layers.TimeInfo",null,{constructor:function(_ec){if(_ec!==null){_e2.mixin(this,_ec);if(_ec.exportOptions){this.exportOptions=new esri.layers.LayerTimeOptions(_ec.exportOptions);}this.timeExtent=new esri.TimeExtent(_ec.timeExtent);this.timeReference=new esri.layers.TimeReference(_ec.timeReference);}}});_e2.mixin(esri.layers.TimeInfo,{UNIT_CENTURIES:"esriTimeUnitsCenturies",UNIT_DAYS:"esriTimeUnitsDays",UNIT_DECADES:"esriTimeUnitsDecades",UNIT_HOURS:"esriTimeUnitsHours",UNIT_MILLISECONDS:"esriTimeUnitsMilliseconds",UNIT_MINUTES:"esriTimeUnitsMinutes",UNIT_MONTHS:"esriTimeUnitsMonths",UNIT_SECONDS:"esriTimeUnitsSeconds",UNIT_UNKNOWN:"esriTimeUnitsUnknown",UNIT_WEEKS:"esriTimeUnitsWeeks",UNIT_YEARS:"esriTimeUnitsYears"});_e2.declare("esri.layers.LayerTimeOptions",null,{constructor:function(_ed){if(_ed){_e2.mixin(this,_ed);}},toJson:function(){var _ee={timeDataCumulative:this.timeDataCumulative,timeOffset:this.timeOffset,timeOffsetUnits:this.timeOffsetUnits,useTime:this.useTime};return esri._sanitize(_ee);}});_e2.declare("esri.layers.TimeReference",null,{constructor:function(_ef){if(_ef){_e2.mixin(this,_ef);}}});_e2.declare("esri.layers.Field",null,{constructor:function(_f0){if(_f0&&_e2.isObject(_f0)){this.name=_f0.name;this.type=_f0.type;this.alias=_f0.alias;this.length=_f0.length;this.editable=_f0.editable;this.nullable=_f0.nullable;var _f1=_f0.domain;if(_f1&&_e2.isObject(_f1)){switch(_f1.type){case "range":this.domain=new esri.layers.RangeDomain(_f1);break;case "codedValue":this.domain=new esri.layers.CodedValueDomain(_f1);break;}}}}});_e2.declare("esri.layers.Domain",null,{constructor:function(_f2){if(_f2&&_e2.isObject(_f2)){this.name=_f2.name;this.type=_f2.type;}},toJson:function(){return esri._sanitize({name:this.name,type:this.type});}});_e2.declare("esri.layers.RangeDomain",[esri.layers.Domain],{constructor:function(_f3){if(_f3&&_e2.isObject(_f3)){this.minValue=_f3.range[0];this.maxValue=_f3.range[1];}},toJson:function(){var _f4=this.inherited(arguments);_f4.range=[this.minValue,this.maxValue];return esri._sanitize(_f4);}});_e2.declare("esri.layers.CodedValueDomain",[esri.layers.Domain],{constructor:function(_f5){if(_f5&&_e2.isObject(_f5)){this.codedValues=_f5.codedValues;}},toJson:function(){var _f6=this.inherited(arguments);_f6.codedValues=_e2.clone(this.codedValues);return esri._sanitize(_f6);}});_e2.declare("esri.layers.InheritedDomain",[esri.layers.Domain],{});_e2.declare("esri.layers.LayerSource",null,{type:null,constructor:function(_f7){if(_f7){_e2.mixin(this,_f7);}},toJson:function(){}});_e2.declare("esri.layers.LayerMapSource",esri.layers.LayerSource,{type:"mapLayer",toJson:function(){var _f8={type:"mapLayer",mapLayerId:this.mapLayerId,gdbVersion:this.gdbVersion};return esri._sanitize(_f8);}});_e2.declare("esri.layers.LayerDataSource",esri.layers.LayerSource,{type:"dataLayer",constructor:function(_f9){if(_f9&&_f9.dataSource){var _fa;switch(_f9.dataSource.type){case "table":_fa=new esri.layers.TableDataSource(_f9.dataSource);break;case "queryTable":_fa=new esri.layers.QueryDataSource(_f9.dataSource);break;case "joinTable":_fa=new esri.layers.JoinDataSource(_f9.dataSource);break;case "raster":_fa=new esri.layers.RasterDataSource(_f9.dataSource);break;default:_fa=_f9.dataSource;}this.dataSource=_fa;}},toJson:function(){var _fb={type:"dataLayer",dataSource:this.dataSource&&this.dataSource.toJson()};return esri._sanitize(_fb);}});_e2.declare("esri.layers.DataSource",null,{constructor:function(_fc){if(_fc){_e2.mixin(this,_fc);}},toJson:function(){}});_e2.declare("esri.layers.TableDataSource",esri.layers.DataSource,{toJson:function(){var _fd={type:"table",workspaceId:this.workspaceId,dataSourceName:this.dataSourceName,gdbVersion:this.gdbVersion};return esri._sanitize(_fd);}});_e2.declare("esri.layers.QueryDataSource",esri.layers.DataSource,{toJson:function(){var _fe={type:"queryTable",workspaceId:this.workspaceId,query:this.query,oidFields:this.oidFields&&this.oidFields.join(),spatialReference:this.spatialReference&&this.spatialReference.toJson()};if(this.geometryType){var _ff;if(this.geometryType.toLowerCase()==="point"){_ff="esriGeometryPoint";}else{if(this.geometryType.toLowerCase()==="multipoint"){_ff="esriGeometryMultipoint";}else{if(this.geometryType.toLowerCase()==="polyline"){_ff="esriGeometryPolyline";}else{if(this.geometryType.toLowerCase()==="polygon"){_ff="esriGeometryPolygon";}else{_ff=this.geometryType;}}}}_fe.geometryType=_ff;}return esri._sanitize(_fe);}});_e2.declare("esri.layers.JoinDataSource",esri.layers.DataSource,{toJson:function(){var json={type:"joinTable",leftTableSource:this.leftTableSource&&this.leftTableSource.toJson(),rightTableSource:this.rightTableSource&&this.rightTableSource.toJson(),leftTableKey:this.leftTableKey,rightTableKey:this.rightTableKey};var _100;if(this.joinType.toLowerCase()==="left-outer-join"){_100="esriLeftOuterJoin";}else{if(this.joinType.toLowerCase()==="left-inner-join"){_100="esriLeftInnerJoin";}else{_100=this.joinType;}}json.joinType=_100;return esri._sanitize(json);}});_e2.declare("esri.layers.RasterDataSource",esri.layers.DataSource,{toJson:function(){var json={type:"raster",workspaceId:this.workspaceId,dataSourceName:this.dataSourceName};return esri._sanitize(json);}});_e2.declare("esri.layers.DynamicLayerInfo",esri.layers.LayerInfo,{defaultVisibility:true,parentLayerId:-1,maxScale:0,minScale:0,constructor:function(json){if(json){if(!json.source){var _101=new esri.layers.LayerMapSource();_101.mapLayerId=this.id;this.source=_101;}else{var _102=new esri.layers.LayerDataSource(json.source);this.source=_102;}}},toJson:function(){var json=this.inherited(arguments);json.source=this.source&&this.source.toJson();return esri._sanitize(json);}});_e2.declare("esri.layers.LayerDrawingOptions",null,{constructor:function(json){if(json){_e2.mixin(this,json);}},toJson:function(){var json={renderer:this.renderer&&this.renderer.toJson(),transparency:this.transparency,scaleSymbols:this.scaleSymbols,showLabels:this.showLabels};return esri._sanitize(json);}});});},"url:dijit/form/templates/ComboButton.html":"<table class=\"dijit dijitReset dijitInline dijitLeft\"\n\tcellspacing='0' cellpadding='0' role=\"presentation\"\n\t><tbody role=\"presentation\"><tr role=\"presentation\"\n\t\t><td class=\"dijitReset dijitStretch dijitButtonNode\" data-dojo-attach-point=\"buttonNode\" data-dojo-attach-event=\"ondijitclick:_onClick,onkeypress:_onButtonKeyPress\"\n\t\t><div id=\"${id}_button\" class=\"dijitReset dijitButtonContents\"\n\t\t\tdata-dojo-attach-point=\"titleNode\"\n\t\t\trole=\"button\" aria-labelledby=\"${id}_label\"\n\t\t\t><div class=\"dijitReset dijitInline dijitIcon\" data-dojo-attach-point=\"iconNode\" role=\"presentation\"></div\n\t\t\t><div class=\"dijitReset dijitInline dijitButtonText\" id=\"${id}_label\" data-dojo-attach-point=\"containerNode\" role=\"presentation\"></div\n\t\t></div\n\t\t></td\n\t\t><td id=\"${id}_arrow\" class='dijitReset dijitRight dijitButtonNode dijitArrowButton'\n\t\t\tdata-dojo-attach-point=\"_popupStateNode,focusNode,_buttonNode\"\n\t\t\tdata-dojo-attach-event=\"onkeypress:_onArrowKeyPress\"\n\t\t\ttitle=\"${optionsTitle}\"\n\t\t\trole=\"button\" aria-haspopup=\"true\"\n\t\t\t><div class=\"dijitReset dijitArrowButtonInner\" role=\"presentation\"></div\n\t\t\t><div class=\"dijitReset dijitArrowButtonChar\" role=\"presentation\">&#9660;</div\n\t\t></td\n\t\t><td style=\"display:none !important;\"\n\t\t\t><input ${!nameAttrSetting} type=\"${type}\" value=\"${value}\" data-dojo-attach-point=\"valueNode\" role=\"presentation\"\n\t\t/></td></tr></tbody\n></table>\n","dijit/DialogUnderlay":function(){define("dijit/DialogUnderlay",["dojo/_base/declare","dojo/dom-attr","dojo/window","./_Widget","./_TemplatedMixin","./BackgroundIframe"],function(_103,_104,_105,_106,_107,_108){return _103("dijit.DialogUnderlay",[_106,_107],{templateString:"<div class='dijitDialogUnderlayWrapper'><div class='dijitDialogUnderlay' data-dojo-attach-point='node'></div></div>",dialogId:"","class":"",_setDialogIdAttr:function(id){_104.set(this.node,"id",id+"_underlay");this._set("dialogId",id);},_setClassAttr:function(_109){this.node.className="dijitDialogUnderlay "+_109;this._set("class",_109);},postCreate:function(){this.ownerDocumentBody.appendChild(this.domNode);},layout:function(){var is=this.node.style,os=this.domNode.style;os.display="none";var _10a=_105.getBox(this.ownerDocument);os.top=_10a.t+"px";os.left=_10a.l+"px";is.width=_10a.w+"px";is.height=_10a.h+"px";os.display="block";},show:function(){this.domNode.style.display="block";this.layout();this.bgIframe=new _108(this.domNode);},hide:function(){this.bgIframe.destroy();delete this.bgIframe;this.domNode.style.display="none";}});});},"dijit/place":function(){define("dijit/place",["dojo/_base/array","dojo/dom-geometry","dojo/dom-style","dojo/_base/kernel","dojo/_base/window","dojo/window","./main"],function(_10b,_10c,_10d,_10e,win,_10f,_110){function _111(node,_112,_113,_114){var view=_10f.getBox(node.ownerDocument);if(!node.parentNode||String(node.parentNode.tagName).toLowerCase()!="body"){win.body(node.ownerDocument).appendChild(node);}var best=null;_10b.some(_112,function(_115){var _116=_115.corner;var pos=_115.pos;var _117=0;var _118={w:{"L":view.l+view.w-pos.x,"R":pos.x-view.l,"M":view.w}[_116.charAt(1)],h:{"T":view.t+view.h-pos.y,"B":pos.y-view.t,"M":view.h}[_116.charAt(0)]};var s=node.style;s.left=s.right="auto";if(_113){var res=_113(node,_115.aroundCorner,_116,_118,_114);_117=typeof res=="undefined"?0:res;}var _119=node.style;var _11a=_119.display;var _11b=_119.visibility;if(_119.display=="none"){_119.visibility="hidden";_119.display="";}var bb=_10c.position(node);_119.display=_11a;_119.visibility=_11b;var _11c={"L":pos.x,"R":pos.x-bb.w,"M":Math.max(view.l,Math.min(view.l+view.w,pos.x+(bb.w>>1))-bb.w)}[_116.charAt(1)],_11d={"T":pos.y,"B":pos.y-bb.h,"M":Math.max(view.t,Math.min(view.t+view.h,pos.y+(bb.h>>1))-bb.h)}[_116.charAt(0)],_11e=Math.max(view.l,_11c),_11f=Math.max(view.t,_11d),endX=Math.min(view.l+view.w,_11c+bb.w),endY=Math.min(view.t+view.h,_11d+bb.h),_120=endX-_11e,_121=endY-_11f;_117+=(bb.w-_120)+(bb.h-_121);if(best==null||_117<best.overflow){best={corner:_116,aroundCorner:_115.aroundCorner,x:_11e,y:_11f,w:_120,h:_121,overflow:_117,spaceAvailable:_118};}return !_117;});if(best.overflow&&_113){_113(node,best.aroundCorner,best.corner,best.spaceAvailable,_114);}var l=_10c.isBodyLtr(node.ownerDocument),s=node.style;s.top=best.y+"px";s[l?"left":"right"]=(l?best.x:view.w-best.x-best.w)+"px";s[l?"right":"left"]="auto";return best;};var _122={at:function(node,pos,_123,_124){var _125=_10b.map(_123,function(_126){var c={corner:_126,pos:{x:pos.x,y:pos.y}};if(_124){c.pos.x+=_126.charAt(1)=="L"?_124.x:-_124.x;c.pos.y+=_126.charAt(0)=="T"?_124.y:-_124.y;}return c;});return _111(node,_125);},around:function(node,_127,_128,_129,_12a){var _12b=(typeof _127=="string"||"offsetWidth" in _127)?_10c.position(_127,true):_127;if(_127.parentNode){var _12c=_10d.getComputedStyle(_127).position=="absolute";var _12d=_127.parentNode;while(_12d&&_12d.nodeType==1&&_12d.nodeName!="BODY"){var _12e=_10c.position(_12d,true),pcs=_10d.getComputedStyle(_12d);if(/relative|absolute/.test(pcs.position)){_12c=false;}if(!_12c&&/hidden|auto|scroll/.test(pcs.overflow)){var _12f=Math.min(_12b.y+_12b.h,_12e.y+_12e.h);var _130=Math.min(_12b.x+_12b.w,_12e.x+_12e.w);_12b.x=Math.max(_12b.x,_12e.x);_12b.y=Math.max(_12b.y,_12e.y);_12b.h=_12f-_12b.y;_12b.w=_130-_12b.x;}if(pcs.position=="absolute"){_12c=true;}_12d=_12d.parentNode;}}var x=_12b.x,y=_12b.y,_131="w" in _12b?_12b.w:(_12b.w=_12b.width),_132="h" in _12b?_12b.h:(_10e.deprecated("place.around: dijit/place.__Rectangle: { x:"+x+", y:"+y+", height:"+_12b.height+", width:"+_131+" } has been deprecated.  Please use { x:"+x+", y:"+y+", h:"+_12b.height+", w:"+_131+" }","","2.0"),_12b.h=_12b.height);var _133=[];function push(_134,_135){_133.push({aroundCorner:_134,corner:_135,pos:{x:{"L":x,"R":x+_131,"M":x+(_131>>1)}[_134.charAt(1)],y:{"T":y,"B":y+_132,"M":y+(_132>>1)}[_134.charAt(0)]}});};_10b.forEach(_128,function(pos){var ltr=_129;switch(pos){case "above-centered":push("TM","BM");break;case "below-centered":push("BM","TM");break;case "after-centered":ltr=!ltr;case "before-centered":push(ltr?"ML":"MR",ltr?"MR":"ML");break;case "after":ltr=!ltr;case "before":push(ltr?"TL":"TR",ltr?"TR":"TL");push(ltr?"BL":"BR",ltr?"BR":"BL");break;case "below-alt":ltr=!ltr;case "below":push(ltr?"BL":"BR",ltr?"TL":"TR");push(ltr?"BR":"BL",ltr?"TR":"TL");break;case "above-alt":ltr=!ltr;case "above":push(ltr?"TL":"TR",ltr?"BL":"BR");push(ltr?"TR":"TL",ltr?"BR":"BL");break;default:push(pos.aroundCorner,pos.corner);}});var _136=_111(node,_133,_12a,{w:_131,h:_132});_136.aroundNodePos=_12b;return _136;}};return _110.place=_122;});},"esri/_coremap":function(){define(["dijit","dojo","dojox","dojo/require!esri/Evented,dijit/_base/manager,esri/geometry,esri/utils,esri/fx,dojox/gfx/matrix,esri/layers/graphics,esri/dijit/InfoWindow"],function(_137,dojo,_138){dojo.provide("esri._coremap");dojo.require("esri.Evented");dojo.require("dijit._base.manager");dojo.require("esri.geometry");dojo.require("esri.utils");dojo.require("esri.fx");dojo.require("dojox.gfx.matrix");dojo.require("esri.layers.graphics");dojo.require("esri.dijit.InfoWindow");dojo.declare("esri._CoreMap",[esri.Evented],(function(){var _139=esri.geometry.toMapPoint,_13a=esri.geometry.toScreenPoint,dc=dojo.connect,ddc=dojo.disconnect,dh=dojo.hitch,ds=dojo.style,iOf=dojo.indexOf,_13b=dojo.mixin,_13c=esri.geometry.Point,_13d=esri.geometry.ScreenPoint,_13e=esri.geometry.Extent,_13f=esri.layers.GraphicsLayer,Rect=esri.geometry.Rect,uid=0,_140=esri.config.defaults.map;var _141=1000000,_142=0.75,_143=0.25,_144=3,_145=20,_146=40;function _147(_148,_149){var lods=_148.lods;lods.sort(function(l1,l2){if(l1.scale>l2.scale){return -1;}else{if(l1.scale<l2.scale){return 1;}}return 0;});var _14a=[];lods=dojo.filter(lods,function(l){if(iOf(_14a,l.scale)===-1){_14a.push(l.scale);return true;}});var pl=(_149.lods=[]),l;dojo.forEach(lods,function(lod,_14b){l=(pl[_14b]=new esri.layers.LOD(lod));l.level=_14b;});_149.tileInfo=new esri.layers.TileInfo(_13b(_148,{lods:pl}));};return {resizeDelay:300,invalidExtent:"Map does not have a valid extent.",invalidGeometry:"Geometry (wkid: ${geometry}) cannot be converted to spatial reference of the map (wkid: ${map})",unknownBasemap:"Unable to find basemap definition for: \"${basemapName}\". Try one of these: ${list}",invalidBasemap:"Unable to add basemap: \"${basemapName}\".",unknownLayerType:"Unknown basemap layer type: \"${type}\" found in basemap definition for: \"${basemapName}\".",constructor:function(_14c,_14d){this.registerConnectEvents({"basemap-change":["BasemapChange"],"extent-change":["ExtentChange","extent","delta","levelChange","lod"],"layer-add":["LayerAdd","layer"],"layer-add-result":["LayerAddResult","layer","error"],"layer-remove":["LayerRemove","layer"],"layer-reorder":["LayerReorder","layer","index"],"layer-resume":["LayerResume","layer"],"layer-suspend":["LayerSuspend","layer"],"layers-add-result":["LayersAddResult","layers"],"layers-removed":["LayersRemoved"],"layers-reordered":["LayersReordered","layerIds"],"load":["Load","map"],"pan":["Pan","extent","delta"],"pan-end":["PanEnd","extent","delta"],"pan-start":["PanStart","extent","screenPoint"],"reposition":["Reposition","x","y"],"resize":["Resize","extent","width","height"],"scale":["Scale","matrix","immediate"],"time-extent-change":["TimeExtentChange","timeExtent"],"unload":["Unload","map"],"update-end":["UpdateEnd","error"],"update-start":["UpdateStart"],"zoom":["Zoom","extent","zoomFactor","anchor"],"zoom-end":["ZoomEnd","extent","zoomFactor","anchor","level"],"zoom-start":["ZoomStart","extent","zoomFactor","anchor","level"]});_13b(this,{_internalLayerIds:[],_layers:[],_layerDivs:[],_layerSize:0,_clickHandles:[],_connects:[]});_13b(this,{_zoomAnimDiv:null,_zoomAnim:null,_layersDiv:null,_firstLayerId:null,_delta:null,_cursor:null,_ratioW:1,_ratioH:1,_params:null});_13b(this,{cursor:null,layerIds:[],graphicsLayerIds:[],graphics:null,loaded:false});_13b(this,{__panning:false,__zooming:false,__container:null,root:null,__LOD:null,__tileInfo:null,__visibleRect:null,__visibleDelta:null});var cont=(this.container=dojo.byId(_14c));var id=(this.id=dojo.attr(cont,"id")||_137.getUniqueId(this.declaredClass));dojo.addClass(cont,"map");var box=dojo.contentBox(cont),dac=dojo.addClass,dcr=dojo.create;this.position=new _13d(0,0);this._reposition();var _14e=(this.width=(box.w||_140.width));var _14f=(this.height=box.h||_140.height);if(box.w===0){ds(cont,"width",_14e+"px");}if(box.h===0){ds(cont,"height",_14f+"px");}var _150=(this.root=dcr("div",{id:id+"_root",style:{width:_14e+"px",height:_14f+"px"}}));dac(_150,"container");var _151=(this.__container=dcr("div",{id:id+"_container"},_150));ds(_151,"position","absolute");dac(_151,"container");cont.appendChild(_150);var _152=(this._params=_13b({slider:true,nav:false,zoom:-1,minZoom:-1,maxZoom:-1,scale:-1,minScale:0,maxScale:0,showInfoWindowOnClick:true,displayGraphicsOnPan:true,wrapAround180:true,fitExtent:false},_14d||{}));this.wrapAround180=_152.wrapAround180;if(esri.isDefined(_152.resizeDelay)){this.resizeDelay=_152.resizeDelay;}if(_152.lods){_147({rows:512,cols:512,dpi:96,format:"JPEG",compressionQuality:75,origin:{x:-180,y:90},spatialReference:{wkid:4326},lods:_152.lods},_152);this.__tileInfo=_152.tileInfo;}var ext=(this.extent=_152.extent);this._extentUtil({mapCenter:_152.center,targetLevel:_152.zoom,targetScale:_152.scale});this.__visibleRect=new Rect(0,0,_14e,_14f);this.__visibleDelta=new Rect(0,0,_14e,_14f);var _153=(this._layersDiv=dcr("div",{id:id+"_layers"}));dac(_153,"layersDiv");_151.appendChild(_153);this._zoomAnimDiv=dcr("div",{style:{position:"absolute"}});if(_152.infoWindow){this.infoWindow=_152.infoWindow;}else{var iw=(this.infoWindow=new esri.dijit.InfoWindow({map:this,title:"",id:id+"_infowindow"},dcr("div",null,_150)));iw.startup();iw._ootb=true;ds(iw.domNode,"zIndex",_146);}this._zoomStartHandler=dh(this,this._zoomStartHandler);this._zoomingHandler=dh(this,this._zoomingHandler);this._zoomEndHandler=dh(this,this._zoomEndHandler);this._panningHandler=dh(this,this._panningHandler);this._panEndHandler=dh(this,this._panEndHandler);this._endTranslate=dh(this,this._endTranslate);dojo.addOnWindowUnload(this,this.destroy);},_cleanUp:function(){var iw=this.infoWindow;if(iw){if(iw._ootb){iw.destroy();}else{iw.unsetMap(this);}delete this.infoWindow;}var cons=this._connects,i;for(i=cons.length-1;i>=0;i--){ddc(cons[i]);delete cons[i];}ddc(this._tsTimeExtentChange_connect);this.setInfoWindowOnClick(false);dojo.destroy(this.root);this.root=null;},_addLayer:function(_154,_155,_156){var id=(_154.id=_154.id||(_154 instanceof _13f?_140.graphicsLayerNamePrefix:_140.layerNamePrefix)+(uid++));this._layers[id]=_154;var i,lyr;if(_155===this.layerIds||_155===this.graphicsLayerIds){i=this._layerSize;this._layerSize++;}_154._isRefLayer=(_156==="top");_156=(!esri.isDefined(_156)||_156<0||_156>_155.length||_156==="top")?_155.length:_156;if(i===0){this._firstLayerId=id;}if(!_154._isRefLayer){while((lyr=this.getLayer(_155[_156-1]))&&lyr._isRefLayer){_156--;}}_155.splice(_156,0,id);var _157=dh(this,this._addLayerHandler),self=this,_158=this._connects,_159=function(){if(_154.loaded){_157(_154);}else{self[id+"_addtoken_load"]=dc(_154,"onLoad",self,"_addLayerHandler");self[id+"_addtoken_err"]=dc(_154,"onError",self,function(_15a){_157(_154,_15a,_155);});}};if(this.loaded||i===0||(_154.loaded&&iOf(this.graphicsLayerIds,id)===-1)){_159();}else{_158.push(dc(this,"onLoad",_159));}return _154;},_addLayerHandler:function(_15b,_15c,_15d){var id=this.id,_15e=_15b.id,_15f=iOf(_15b instanceof _13f?this.graphicsLayerIds:this.layerIds,_15e),_160=_15f,_161=false,_162=this._params,_163,_164,_165,lods;ddc(this[_15e+"_addtoken_load"]);ddc(this[_15e+"_addtoken_err"]);if(_15c){delete this._layers[_15e];if(_15f!==-1){_15d.splice(_15f,1);this.onLayerAddResult(_15b,_15c);}return;}if(_15f===-1){_15f=iOf(this._internalLayerIds,_15e);_160=_145+_15f;_161=true;}if(_15b instanceof _13f){if(!this._gc){this._gc=new esri.layers._GraphicsContainer();var gc=this._gc._setMap(this,this._layersDiv);gc.id=id+"_gc";}var _166=_15b._setMap(this,this._gc._surface);_166.id=id+"_"+_15e;this._layerDivs[_15e]=_166;this._reorderLayers(this.graphicsLayerIds);if(_162.showInfoWindowOnClick){this._clickHandles.push(dc(_15b,"onClick",this,"_gClickHandler"));}}else{var _167=_15b._setMap(this,this._layersDiv,_160,this.__LOD);_167.id=id+"_"+_15e;this._layerDivs[_15e]=_167;this._reorderLayers(this.layerIds);if(!_161&&_15b.declaredClass.indexOf("VETiledLayer")!==-1){this._onBingLayerAdd(_15b);}}if(_15e===this._firstLayerId){_164=_15b.spatialReference;_165=(this.extent&&this.extent.spatialReference);if(_165&&!_165.equals(_164)&&(_15b.tileInfo||!_15b.url)){_165=null;}_163=(this.spatialReference=(_165||_164));this.wrapAround180=(this.wrapAround180&&_163&&_163._isWrappable())?true:false;if(_15b.tileInfo){if(!this.__tileInfo){_147(_13b({},_15b.tileInfo),_162);this.__tileInfo=_162.tileInfo;}else{lods=this.__tileInfo.lods;this.__tileInfo=_13b({},_15b.tileInfo);this.__tileInfo.lods=lods;}}if(this.wrapAround180){var _168=this.__tileInfo,info=_163._getInfo();if(!_168||Math.abs(info.origin[0]-_168.origin.x)>info.dx){this.wrapAround180=false;}if(this.wrapAround180&&_168){esri.TileUtils._addFrameInfo(_168,info);}}_162.units=_15b.units;lods=this.__tileInfo&&this.__tileInfo.lods;if(lods&&lods.length){var _169=_162.minScale,_16a=_162.maxScale,_16b=-1,_16c=-1,_16d=false,_16e=false,i;for(i=0;i<lods.length;i++){if(_169>0&&!_16d&&_169>=lods[i].scale){_16b=lods[i].level;_16d=true;}if(_16a>0&&!_16e&&_16a>=lods[i].scale){_16c=(i>0)?lods[i-1].level:-1;_16e=true;}}if(_162.minZoom===-1){_162.minZoom=(_169===0)?lods[0].level:_16b;}if(_162.maxZoom===-1){_162.maxZoom=(_16a===0)?lods[lods.length-1].level:_16c;}for(i=0;i<lods.length;i++){if(_162.minZoom===lods[i].level){_162.minScale=lods[i].scale;}if(_162.maxZoom===lods[i].level){_162.maxScale=lods[i].scale;}}}else{_162.minZoom=_162.maxZoom=_162.zoom=-1;}this.graphics=new _13f({id:id+"_graphics",displayOnPan:_162.displayGraphicsOnPan});this._addLayer(this.graphics,this._internalLayerIds,_145);}if(_15b===this.graphics){var _16f,_170=this._layers[this._firstLayerId],_171,zoom=_162.zoom,_172=_162.scale,_173=_162.center,_174=_170.initialExtent||_170.fullExtent;this._firstLayerId=null;if(this.extent){this.extent=this._convertGeometry(this,this.extent);}if(!this.extent&&_174){if(_173){_173=this._convertGeometry(_174,_173);}if(_173){_174=_174.centerAt(_173);_173=null;}}_171=this.extent||_174;if(_171){if(zoom>-1){_171=this.__getExtentForLevel(zoom,null,_171).extent;}else{if(_172>0){_171=esri.geometry.getExtentForScale(this,_172,_171);}}}if(!_171){console.log("Map: "+this.invalidExtent);return;}_16f=this._fixExtent(_171,_162.fitExtent);this.extent=_16f.extent;this.__LOD=_16f.lod;this.__setExtent(this.extent,null,null,_162.fitExtent);this.loaded=true;this.infoWindow.setMap(this);this.onLoad(this);}if(!_161){this.onLayerAdd(_15b);this.onLayerAddResult(_15b);}ddc(this[_15e+"_addLayerHandler_connect"]);},_convertGeometry:function(host,_175){var _176=host&&host.spatialReference,inSR=_175&&_175.spatialReference;if(_176&&inSR&&!_176.equals(inSR)){if(_176._canProject(inSR)){if(_176.isWebMercator()){_175=esri.geometry.geographicToWebMercator(_175);}else{if(_176.wkid===4326){_175=esri.geometry.webMercatorToGeographic(_175,true);}}}else{console.log("Map: "+esri.substitute({geometry:inSR.wkid||inSR.wkt,map:_176.wkid||_176.wkt},this.invalidGeometry));_175=null;}}return _175;},_reorderLayers:function(_177){var _178=this.onLayerReorder,djp=dojo.place,_179=this._layerDivs,_17a=this._layers,gcES=this._gc?this._gc._surface.getEventSource():null;if(_177===this.graphicsLayerIds){dojo.forEach(_177,function(id,i){var _17b=_179[id];if(_17b){djp(_17b.getEventSource(),gcES,i);_178(_17a[id],i);}});}else{var g=this.graphics,gId=g?g.id:null,_17c=this._layersDiv,_17d;dojo.forEach(_177,function(id,i){_17d=_179[id];if(id!==gId&&_17d){djp(_17d,_17c,i);_178(_17a[id],i);}});if(gcES){gcES=(dojo.isIE<9)?gcES.parentNode:gcES;djp(gcES,gcES.parentNode,_177.length);}}this.onLayersReordered([].concat(_177));},_zoomStartHandler:function(){this.__zoomStart(this._zoomAnimDiv.startingExtent,this._zoomAnimDiv.anchor);},_zoomingHandler:function(rect){var rl=parseFloat(rect.left),rt=parseFloat(rect.top),_17e=new _13e(rl,rt-parseFloat(rect.height),rl+parseFloat(rect.width),rt,this.spatialReference),_17f=this.extent.getWidth()/_17e.getWidth();this.__zoom(_17e,_17f,this._zoomAnimDiv.anchor);},_zoomEndHandler:function(){var _180=this._zoomAnimDiv,_181=_180.extent,_182=this.extent.getWidth()/_181.getWidth();var _183=_180.anchor,_184=_180.newLod,_185=_180.levelChange;_180.extent=_180.anchor=_180.levelChange=_180.startingExtent=_180.newLod=this._delta=this._zoomAnim=null;this.__zoomEnd(_181,_182,_183,_184,_185);},_panningHandler:function(_186){if(isNaN(parseFloat(_186.left))||isNaN(parseFloat(_186.top))){var _187=Math.round,_188=dojo.style,node=this._panAnim.node;_186.left=(-1*(this._delta.x-_187(this.width/2)))+"px";_186.top=(-1*(this._delta.y-_187(this.height/2)))+"px";_188(node,"left",_186.left);_188(node,"top",_186.top);}var d=new _13d(parseFloat(_186.left),parseFloat(_186.top)),dm=this.toMap(d);this.onPan(this.extent.offset(dm.x,dm.y),d);},_panEndHandler:function(node){this.__panning=false;var _189=Math.round,_18a=new _13d(-_189(parseFloat(node.style.left)),-_189(parseFloat(node.style.top))),dx=_18a.x,dy=_18a.y,_18b=this.__visibleRect,_18c=this.__visibleDelta;_18b.x+=-dx;_18b.y+=-dy;_18c.x+=-dx;_18c.y+=-dy;ds(this._zoomAnimDiv,{left:"0px",top:"0px"});var _18d=this.extent,rw=this._ratioW,rh=this._ratioH;_18d=new _13e(_18d.xmin+(dx/rw),_18d.ymin-(dy/rh),_18d.xmax+(dx/rw),_18d.ymax-(dy/rh),this.spatialReference);_18a.setX(-_18a.x);_18a.setY(-_18a.y);this._delta=this._panAnim=null;this._updateExtent(_18d);this.onPanEnd(_18d,_18a);this.onExtentChange(_18d,_18a,false,this.__LOD);},_fixExtent:function(_18e,fit){var _18f=this._reshapeExtent(_18e),_190=1+_143;while(fit===true&&(_18f.extent.getWidth()<_18e.getWidth()||_18f.extent.getHeight()<_18e.getHeight())&&_18f.lod.level>0&&_190<=_144){_18f=this._reshapeExtent(_18e.expand(_190));_190+=_143;}return _18f;},_getFrameWidth:function(){var _191=-1,info=this.spatialReference._getInfo();if(this.__LOD){var _192=this.__LOD._frameInfo;if(_192){_191=_192[3];}}else{if(info){_191=Math.round((2*info.valid[1])/(this.extent.getWidth()/this.width));}}return _191;},_reshapeExtent:function(_193){var w=_193.getWidth(),h=_193.getHeight(),r=w/h,_194=this.width/this.height,dw=0,dh=0;if(this.width>this.height){if(w>h){if(_194>r){dw=(h*_194)-w;}else{dh=(w/_194)-h;}}else{if(w<h){dw=(h*_194)-w;}else{dw=(h*_194)-w;}}}else{if(this.width<this.height){if(w>h){dh=(w/_194)-h;}else{if(w<h){if(_194>r){dw=(h*_194)-w;}else{dh=(w/_194)-h;}}else{dh=(w/_194)-h;}}}else{if(w<h){dw=h-w;}else{if(w>h){dh=(w/_194)-h;}}}}if(dw){_193.xmin-=dw/2;_193.xmax+=dw/2;}if(dh){_193.ymin-=dh/2;_193.ymax+=dh/2;}return this._getAdjustedExtent(_193);},_getAdjustedExtent:function(_195){if(this.__tileInfo){return esri.TileUtils.getCandidateTileInfo(this,this.__tileInfo,_195);}else{var _196=esri.geometry.getScale(this,_195),_197=this.getMinScale(),_198=this.getMaxScale(),_199=!_197||(_196<=_197),_19a=!_198||(_196>=_198);if(!_199){_195=esri.geometry.getExtentForScale(this,_197,_195);}else{if(!_19a){_195=esri.geometry.getExtentForScale(this,_198,_195);}}return {extent:_195};}},_fixedPan:function(dx,dy){this._extentUtil(null,{dx:dx,dy:dy});},_gClickHandler:function(evt){var _19b=evt.graphic,iw=this.infoWindow;if(_19b._getEffInfoTemplate()&&iw){dojo.stopEvent(evt);var _19c=_19b.geometry,_19d=(_19c&&_19c.type==="point")?_19c:evt.mapPoint;iw.setTitle(_19b.getTitle());iw.setContent(_19b.getContent());iw.show(_19d);}},_onBingLayerAdd:function(_19e){this["__"+_19e.id+"_vis_connect"]=dojo.connect(_19e,"onVisibilityChange",this,"_toggleBingLogo");this._toggleBingLogo(_19e.visible);},_onBingLayerRemove:function(_19f){dojo.disconnect(this["__"+_19f.id+"_vis_connect"]);delete this["__"+_19f.id+"_vis_connect"];var _1a0=this.layerIds;var _1a1=dojo.some(_1a0,function(_1a2){var _1a3=this._layers[_1a2];return _1a3&&_1a3.visible&&_1a3.declaredClass.indexOf("VETiledLayer")!==-1;},this);this._toggleBingLogo(_1a1);},_toggleBingLogo:function(_1a4){if(_1a4&&!this._bingLogo){var _1a5={left:(this._mapParams&&this._mapParams.nav?"25px":"")};if(dojo.isIE===6){_1a5.filter="progid:DXImageTransform.Microsoft.AlphaImageLoader(enabled='true', sizingMethod='crop', src='"+dojo.moduleUrl("esri")+"images/map/bing-logo-lg.png"+"')";}var _1a6=this._bingLogo=dojo.create("div",{style:_1a5},this.root);dojo.addClass(_1a6,"bingLogo-lg");}else{if(!_1a4&&this._bingLogo){dojo.destroy(this._bingLogo);delete this._bingLogo;}}},__panStart:function(x,y){var _1a7=this._zoomAnim,_1a8=this._panAnim;if(_1a7&&_1a7._active){_1a7.stop();_1a7._fire("onEnd",[_1a7.node]);}else{if(_1a8&&_1a8._active){_1a8.stop();this._panAnim=null;var rect=_1a8.curve.getValue(_1a8._getStep()),rl=Math.round(parseFloat(rect.left)),rt=Math.round(parseFloat(rect.top)),drag=this.navigationManager._dragOrigin;this.__pan(rl,rt);if(drag){drag.x-=rl;drag.y-=rt;}return;}}this.__panning=true;this.onPanStart(this.extent,new _13d(x,y));},__pan:function(dx,dy){var _1a9=this.extent,rw=this._ratioW,rh=this._ratioH;this.onPan(new _13e(_1a9.xmin-(dx/rw),_1a9.ymin+(dy/rh),_1a9.xmax-(dx/rw),_1a9.ymax+(dy/rh),this.spatialReference),new _13d(dx,dy));},__panEnd:function(dx,dy){var _1aa=this.__visibleRect,_1ab=this.__visibleDelta;_1aa.x+=dx;_1aa.y+=dy;_1ab.x+=dx;_1ab.y+=dy;var d=new _13d(dx,dy),_1ac=this.extent,rw=this._ratioW,rh=this._ratioH;_1ac=new _13e(_1ac.xmin-(dx/rw),_1ac.ymin+(dy/rh),_1ac.xmax-(dx/rw),_1ac.ymax+(dy/rh),this.spatialReference);this.__panning=false;this._updateExtent(_1ac);this.onPanEnd(_1ac,d);this.onExtentChange(_1ac,d,false,this.__LOD);},__zoomStart:function(_1ad,_1ae){this.__zooming=true;this.onZoomStart(_1ad,1,_1ae,this.__LOD?this.__LOD.level:null);},__zoom:function(_1af,_1b0,_1b1){this.onZoom(_1af,_1b0,_1b1);},__zoomEnd:function(_1b2,_1b3,_1b4,lod,_1b5){ds(this._layersDiv,{left:"0px",top:"0px"});this._delta=new _13d(0,0);this.__visibleRect.x=(this.__visibleRect.y=0);_1b2=new _13e(_1b2);this.__LOD=lod;this._ratioW=this.width/_1b2.getWidth();this._ratioH=this.height/_1b2.getHeight();var _1b6=this._delta;this._delta=null;this.__zooming=false;this._updateExtent(_1b2,_1b5);this.onZoomEnd(_1b2,_1b3,_1b4,lod?lod.level:null);this.onExtentChange(_1b2,_1b6,_1b5,lod);},_extentUtil:function(zoom,pan,_1b7,fit,_1b8){var _1b9,_1ba,_1bb,_1bc,_1bd,_1be,_1bf,_1c0,dx,dy,_1c1=this.width,_1c2=this.height,_1c3,_1c4,_1c5;if(zoom){_1b9=zoom.numLevels;_1ba=zoom.targetLevel;_1c3=esri.isDefined(_1ba);_1bb=zoom.factor;_1bc=zoom.mapAnchor;_1bd=zoom.screenAnchor;_1be=zoom.mapCenter;_1c4=zoom.levelOrFactor;_1bf=zoom.targetScale;_1c0=esri.isDefined(_1bf)&&_1bf>0;}if(pan){dx=pan.dx;dy=pan.dy;_1be=pan.mapCenter;}if(dojo.isArray(_1be)){_1be=new esri.geometry.Point(_1be);}var _1c6=this._panAnim,_1c7=this._stopAnim(),_1c8=_1c7?_1c7.divExtent:this.extent,_1c9=this.__tileInfo,xmin,ymin,ewd,eht,_1ca=this._params;if(!this.loaded){if(_1b7){if(_1c8){_1b7=this._convertGeometry(_1c8,_1b7);}if(_1b7){this.extent=_1b7;_1ca.zoom=_1ca.scale=-1;_1ca.center=null;}}else{if(_1be||_1c3||_1c0){if(_1be){if(_1c8){_1be=this._convertGeometry(_1c8,_1be);if(_1be){this.extent=_1c8.centerAt(_1be);_1ca.center=null;}}else{_1ca.center=_1be;}}if(_1c3&&_1ba>-1){_1ca.zoom=_1ba;_1ca.scale=-1;}else{if(_1c0){_1ca.scale=_1bf;_1ca.zoom=-1;}}}}return;}if(_1be){_1be=this._convertGeometry(this,_1be);if(!_1be){return;}}if(_1bc){_1bc=this._convertGeometry(this,_1bc);if(!_1bc){return;}}if(_1b7){_1b7=this._convertGeometry(this,_1b7);if(!_1b7){return;}}if(_1c6&&_1bc&&_1bd){_1bc=_139(this.extent,_1c1,_1c2,_1bd);}if(_1c7&&_1bc&&_1bd){_1bc=_139(_1c7.divExtent,_1c1,_1c2,_1bd);}if(_1c3){if(_1c9){var _1cb=this.getMinZoom(),_1cc=this.getMaxZoom();if(_1ba<_1cb){_1ba=_1cb;}else{if(_1ba>_1cc){_1ba=_1cc;}}_1b9=_1ba-(_1c7?_1c7.level:this.getLevel());}else{_1b9=_1ba>0?-1:1;_1c5=_1c4?_1ba:null;}}if(_1b7){}else{if(esri.isDefined(_1b9)){var size;if(_1c9){var _1cd=_1c7?_1c7.level:this.getLevel();size=this.__getExtentForLevel(_1cd+_1b9,_1be,_1c8).extent;}else{var temp=_1c7?_1c7.end:this.extent;size=temp.expand(_1c5||(_1b9>0?0.5*_1b9:2*-_1b9));if(_1c5&&_1be){size=size.centerAt(_1be);}}if(size){if(_1be){_1b7=size;}else{var _1ce=_1bc||_1c8.getCenter(),ymax=_1c8.ymax-((size.getHeight()-_1c8.getHeight())*(_1ce.y-_1c8.ymax)/_1c8.getHeight());xmin=_1c8.xmin-((size.getWidth()-_1c8.getWidth())*(_1ce.x-_1c8.xmin)/_1c8.getWidth());_1b7=new _13e(xmin,ymax-size.getHeight(),xmin+size.getWidth(),ymax,this.spatialReference);}}}else{if(_1c0){_1b7=esri.geometry.getExtentForScale(this,_1bf,_1c8);}else{if(esri.isDefined(_1bb)){_1b7=_1c8.expand(_1bb);}else{if(dx||dy){if(_1c7){var end=_1c7.end,c1=end.getCenter(),c2=_13a(end,_1c1,_1c2,c1);c2.x+=dx;c2.y+=dy;c2=_139(end,_1c1,_1c2,c2);_1b7=end.offset(c2.x-c1.x,c2.y-c1.y);}else{var _1cf=new _13d((_1c1/2)+dx,(_1c2/2)+dy),_1d0=_139(_1c8,_1c1,_1c2,_1cf);ewd=_1c8.getWidth();eht=_1c8.getHeight();xmin=_1d0.x-(ewd/2);ymin=_1d0.y-(eht/2);_1b7=new _13e(xmin,ymin,xmin+ewd,ymin+eht,this.spatialReference);}}}}}}if(!_1b7){if(_1be){var ext=_1c7?_1c7.end:_1c8;ewd=ext.getWidth();eht=ext.getHeight();xmin=_1be.x-(ewd/2);ymin=_1be.y-(eht/2);_1b7=new _13e(xmin,ymin,xmin+ewd,ymin+eht,this.spatialReference);}else{if(_1c7){_1b7=_1c7.end;}}}if(_1b7){this.__setExtent(_1b7,null,_1bd,fit,_1c7,_1b8);}},__setExtent:function(_1d1,_1d2,_1d3,fit,_1d4,_1d5){try{if(this._firstLayerId){this.extent=_1d1;return;}var _1d6=true,sr=this.spatialReference,ext=_1d4?_1d4.divExtent:this.extent,_1d7=this._fixExtent(_1d1,fit||false);_1d1=_1d7.extent;var _1d8=_1d1.getWidth(),_1d9=_1d1.getHeight(),_1da=Math.round;if(ext){var tw=_1da(ext.getWidth()*_141),w=_1da(_1d8*_141),th=_1da(ext.getHeight()*_141),h=_1da(_1d9*_141);_1d6=(tw!==w)||(th!==h);}var _1db,end,_1dc,_1dd,_1de=_1d4&&_1d4.rect,_1df=_1d4&&_1d4.divExtent;if(_140.zoomDuration&&_1d6&&ext){_1df=_1df||new _13e(ext);_1de=_1de||{left:ext.xmin,top:ext.ymax,width:ext.getWidth(),height:ext.getHeight()};end={left:_1d1.xmin,top:_1d1.ymax,width:_1d8,height:_1d9};_1dc=_1de.width/end.width;_1dd=_1de.height/end.height;var mtl=new _13c(_1d1.xmin,_1d1.ymax,sr),mbl=new _13c(_1d1.xmin,_1d1.ymin,sr),etl=new _13c(this.extent.xmin,this.extent.ymax,sr),ebl=new _13c(this.extent.xmin,this.extent.ymin,sr);_1db=esri.geometry.getLineIntersection(etl,mtl,ebl,mbl,sr);if(!_1db&&!_1d4){_1d6=false;}}this._ratioW=this.width/_1d8;this._ratioH=this.height/_1d9;var _1e0=this._zoomAnimDiv;if(_1d6){ds(this._layersDiv,{left:"0px",top:"0px"});_1d2=new _13d(0,0);this.__visibleRect.x=(this.__visibleRect.y=0);if(_1de&&end){this._delta=_1d2;_1e0.id="_zAD";_1e0.startingExtent=_1df;_1e0.extent=_1d1;_1e0.levelChange=_1d6;_1e0.newLod=_1d7.lod;if(_1d3){_1e0.anchor=_1d3;}else{if(!_1db&&_1d4){_1e0.anchor=_1d4.anchor;}else{_1e0.anchor=_13a(this.extent,this.width,this.height,_1db);}}this._zoomAnim=esri.fx.resize({node:_1e0,start:_1de,end:end,duration:_140.zoomDuration,rate:_140.zoomRate,beforeBegin:!_1d4?this._zoomStartHandler:null,onAnimate:this._zoomingHandler,onEnd:this._zoomEndHandler}).play();this._fireOnScale(this.extent.getWidth()/_1d1.getWidth(),_1e0.anchor);}else{this._updateExtent(_1d1,_1d6);this.onExtentChange(this.extent,_1d2,_1d6,(this.__LOD=_1d7.lod));}}else{if(!this.__panning){if(this.loaded===false||_1d5){this._updateExtent(_1d1,_1d6);this.onExtentChange(this.extent,_1d2,_1d6,(this.__LOD=_1d7.lod));}else{this.__panning=true;_1de=new Rect(0,0,this.width,this.height,this.spatialReference).getCenter();_1de.x=_1da(_1de.x);_1de.y=_1da(_1de.y);this.onPanStart(this.extent,new _13d(0,0));var _1e1=(this._delta=this.toScreen(_1d1.getCenter()));this._panAnim=esri.fx.slideTo({node:_1e0,left:_1de.x-_1e1.x,top:_1de.y-_1e1.y,duration:_140.panDuration,rate:_140.panRate,onAnimate:this._panningHandler,onEnd:this._panEndHandler});this._panAnim.play();}}}}catch(e){console.log(e.stack);console.error(e);}},_fireOnScale:function(_1e2,_1e3,_1e4){if(this.navigationMode==="css-transforms"){var vd=this.__visibleDelta;this.onScale(_138.gfx.matrix.scaleAt(_1e2,{x:-1*((this.width/2)-(_1e3.x-vd.x)),y:-1*((this.height/2)-(_1e3.y-vd.y))}),_1e4);}},_stopAnim:function(){var _1e5=this._zoomAnim,_1e6=this._panAnim;if(_1e5&&_1e5._active){_1e5.stop();var rect=_1e5.curve.getValue(_1e5._getStep()),rl=parseFloat(rect.left),rt=parseFloat(rect.top),node=_1e5.node;return {anchor:node.anchor,start:node.startingExtent,end:node.extent,level:node.newLod&&node.newLod.level,rect:rect,divExtent:new _13e(rl,rt-parseFloat(rect.height),rl+parseFloat(rect.width),rt,this.spatialReference)};}else{if(_1e6&&_1e6._active){_1e6.stop();_1e6._fire("onEnd",[_1e6.node]);}}},__getExtentForLevel:function(_1e7,_1e8,_1e9){var ti=this.__tileInfo,lods=ti&&ti.lods;_1e7=esri.isDefined(_1e7)?_1e7:0;_1e9=_1e9||this.extent;_1e8=_1e8||(_1e9&&_1e9.getCenter());if(lods){if(!_1e8){console.log("Map: "+this.invalidExtent);return;}var _1ea=this.getMinZoom(),_1eb=this.getMaxZoom();if(_1e7>_1eb){_1e7=_1eb;}if(_1e7<_1ea){_1e7=_1ea;}var lod=lods[_1e7],_1ec=this.width*lod.resolution/2,_1ed=this.height*lod.resolution/2;return {extent:new _13e(_1e8.x-_1ec,_1e8.y-_1ed,_1e8.x+_1ec,_1e8.y+_1ed,_1e8.spatialReference),lod:lod};}else{if(!_1e9){console.log("Map: "+this.invalidExtent);return;}_1e7=(!_1e7||_1e7<1)?1:_1e7;return {extent:_1e9.expand(_1e7).centerAt(_1e8)};}},_jobs:0,_incr:function(){if((++this._jobs)===1){this.updating=true;this.onUpdateStart();}},_decr:function(){var _1ee=--this._jobs;if(!_1ee){this.updating=false;this.onUpdateEnd();}else{if(_1ee<0){this._jobs=0;}}},_fireEvent:function(_1ef,args){if(this[_1ef]){this[_1ef].apply(this,args);}},_updateExtent:function(_1f0,_1f1){this.extent=_1f0;if(_1f1){this._setClipRect();}var _1f2=this.spatialReference;if(_1f2){if(_1f2.isWebMercator()){this.geographicExtent=esri.geometry.webMercatorToGeographic(this._getAvailExtent(),true);}else{if(_1f2.wkid===4326){this.geographicExtent=new esri.geometry.Extent(this._getAvailExtent().toJson());}}}},onUpdateStart:function(){},onUpdateEnd:function(){},onLoad:function(){this._setClipRect();},onUnload:function(){},onExtentChange:function(a,b,_1f3){},onTimeExtentChange:function(){},onLayerAdd:function(){},onLayerAddResult:function(){},onLayersAddResult:function(){},onLayerRemove:function(){},onLayersRemoved:function(){},onLayerReorder:function(){},onLayersReordered:function(){},onLayerSuspend:function(){},onLayerResume:function(){},onPanStart:function(){},onPan:function(){},onPanEnd:function(){},onScale:function(){},onZoomStart:function(){},onZoom:function(){},onZoomEnd:function(){},onResize:function(){this._setClipRect();},onReposition:function(){},destroy:function(){if(!this._destroyed){this.removeAllLayers();this._cleanUp();if(this._gc){this._gc._cleanUp();}this._destroyed=true;this.onUnload(this);}},setCursor:function(_1f4){ds(this.__container,"cursor",(this.cursor=_1f4));},setMapCursor:function(c){this.setCursor((this._cursor=c));},resetMapCursor:function(){this.setCursor(this._cursor);},setInfoWindow:function(_1f5){var iw=this.infoWindow;if(iw){iw.unsetMap(this);}this.infoWindow=_1f5;if(this.loaded&&_1f5){_1f5.setMap(this);}},setInfoWindowOnClick:function(_1f6){var _1f7=this._params;if(_1f6){if(!_1f7.showInfoWindowOnClick){var _1f8=[this.graphics].concat(dojo.map(this.graphicsLayerIds,this.getLayer,this));dojo.map(_1f8,function(_1f9){if(_1f9&&_1f9.loaded){this._clickHandles.push(dc(_1f9,"onClick",this,"_gClickHandler"));}},this);}}else{dojo.forEach(this._clickHandles,ddc);this._clickHandles=[];}_1f7.showInfoWindowOnClick=_1f6;},getInfoWindowAnchor:function(pt){var w2=this.width/2,h2=this.height/2,_1fa;if(pt.y<h2){_1fa="LOWER";}else{_1fa="UPPER";}if(pt.x<w2){return esri.dijit.InfoWindow["ANCHOR_"+_1fa+"RIGHT"];}else{return esri.dijit.InfoWindow["ANCHOR_"+_1fa+"LEFT"];}},toScreen:function(pt,_1fb){return _13a(this.extent,this.width,this.height,pt,_1fb);},toMap:function(pt){return _139(this.extent,this.width,this.height,pt);},addLayer:function(_1fc,_1fd){return this._addLayer(_1fc,_1fc instanceof _13f?this.graphicsLayerIds:this.layerIds,_1fd);},addLayers:function(_1fe){var _1ff=[],_200=_1fe.length,_201,i,len=_1fe.length;var _202=function(_203,_204){if(dojo.indexOf(_1fe,_203)!==-1){_200--;_1ff.push({"layer":_203,"success":!_204,"error":_204});if(!_200){dojo.disconnect(_201);this.onLayersAddResult(_1ff);}}};_201=dojo.connect(this,"onLayerAddResult",_202);for(i=0;i<len;i++){this.addLayer(_1fe[i]);}return this;},removeLayer:function(_205,_206){var id=_205.id,ids=_205 instanceof _13f?this.graphicsLayerIds:this.layerIds,i=iOf(ids,id);if(i>=0){ids.splice(i,1);if(_205 instanceof _13f){ddc(this["_gl_"+_205.id+"_click_connect"]);if(_205.loaded){_205._unsetMap(this,this._gc._surface);}}else{if(_205.loaded){_205._unsetMap(this,this._layersDiv);if(_205.declaredClass.indexOf("VETiledLayer")!==-1){this._onBingLayerRemove(_205);}}}delete this._layers[id];delete this._layerDivs[id];if(!_206){this._reorderLayers(ids);}this.onLayerRemove(_205);}},removeAllLayers:function(){var ids=this.layerIds,i;for(i=ids.length-1;i>=0;i--){this.removeLayer(this._layers[ids[i]],1);}ids=this.graphicsLayerIds;for(i=ids.length-1;i>=0;i--){this.removeLayer(this._layers[ids[i]],1);}this.onLayersRemoved();},reorderLayer:function(_207,_208){if(dojo.isString(_207)){dojo.deprecated(this.declaredClass+": "+esri.bundle.map.deprecateReorderLayerString,null,"v2.0");_207=this.getLayer(_207);}var id=_207.id,i,ids=_207 instanceof _13f?this.graphicsLayerIds:this.layerIds;if(_208<0){_208=0;}else{if(_208>=ids.length){_208=ids.length-1;}}i=iOf(ids,id);if(i===-1||i===_208){return;}ids.splice(i,1);ids.splice(_208,0,id);this._reorderLayers(ids);},getLayer:function(id){return this._layers[id];},setExtent:function(_209,fit){_209=new esri.geometry.Extent(_209.toJson());var _20a=_209.getWidth(),_20b=_209.getHeight();if(_20a===0&&_20b===0){this.centerAt(new esri.geometry.Point({x:_209.xmin,y:_209.ymin,spatialReference:_209.spatialReference&&_209.spatialReference.toJson()}));}else{this._extentUtil(null,null,_209,fit);}},centerAt:function(_20c){this._extentUtil(null,{mapCenter:_20c});},centerAndZoom:function(_20d,_20e){this._extentUtil({targetLevel:_20e,mapCenter:_20d,levelOrFactor:true});},getScale:function(){return this.__LOD?this.__LOD.scale:esri.geometry.getScale(this);},getMinScale:function(){return this._params.minScale;},getMaxScale:function(){return this._params.maxScale;},setScale:function(_20f){this._extentUtil({targetScale:_20f});},getLayersVisibleAtScale:function(_210){var _211=[];_210=_210||this.getScale();if(_210){dojo.forEach(this.layerIds.concat(this.graphicsLayerIds),function(_212){_212=this.getLayer(_212);if(_212.isVisibleAtScale(_210)){_211.push(_212);}},this);}return _211;},getNumLevels:function(){var _213=this.getMinZoom(),_214=this.getMaxZoom();return ((_213===_214)&&_213<0)?0:(_214-_213+1);},getLevel:function(){return this.__LOD?this.__LOD.level:-1;},setLevel:function(_215){if(_215>-1){this._extentUtil({targetLevel:_215});}},getZoom:function(){return this.getLevel();},setZoom:function(zoom){this.setLevel(zoom);},getMinZoom:function(){return this._params.minZoom;},getMaxZoom:function(){return this._params.maxZoom;},setBasemap:function(_216){var _217,_218="Map.setBasemap: ";if(dojo.isObject(_216)){_217=_216;_216=_217.title;}else{_217=_140.basemaps&&_140.basemaps[_216];}if(_217){if(this._basemapDfd&&this._basemapDfd.fired===-1){this._basemapDfd.cancel();}var _219=[],_21a=[],_21b=0;dojo.forEach(_217.baseMapLayers||_217.layers,function(_21c){var _21d,_21e={id:_21c.id,displayLevels:_21c.displayLevels,opacity:esri.isDefined(_21c.opacity)?_21c.opacity:null,visible:esri.isDefined(_21c.visibility)?_21c.visibility:null};if(_21c.type){switch(_21c.type){case "OpenStreetMap":_21d=new esri.layers.OpenStreetMapLayer(_21e);break;default:console.log(_218+esri.substitute({basemapName:_216,type:_21c.type},this.unknownLayerType));break;}}else{var url=_21c.url;if(window.location.protocol==="https:"&&((url.search(/^http\:\/\/server\.arcgisonline\.com/i)!==-1)||(url.search(/^http\:\/\/services\.arcgisonline\.com/i)!==-1)||(url.search(/^http\:\/\/.+\.arcgis\.com/i)!==-1))){url=url.replace(/http:/i,"https:");}_21d=new esri.layers.ArcGISTiledMapServiceLayer(url,_21e);}if(_21d){_219.push(_21d);_21a.push(_21c);if(!_21c.isReference){_21b++;}}},this);if(!_219.length||!_21b){console.log(_218+esri.substitute({basemapName:_216},this.invalidBasemap));return;}var _21f={basemapName:_216,infos:_21a,layers:_219};if(!this.loaded){this._basemapLoaded(_21f);return;}var self=this,dfd=new dojo.Deferred(esri._dfdCanceller),_220=function(_221){dfd._pendingLayers--;var idx=dojo.indexOf(_21f.layers,this);if(idx>-1){var _222=dfd._layerEvents[idx];if(_222){dojo.disconnect(_222[0]);dojo.disconnect(_222[1]);}}if(dfd._pendingLayers<=0){delete dfd._layerEvents;delete self._basemapDfd;dfd.callback(_21f);}};this._basemapDfd=dfd;dfd._pendingLayers=0;dfd._layerEvents={};dojo.forEach(_219,function(_223,i){if(_223){dfd._pendingLayers++;if(_223.loaded){_220(_223);}else{dfd._layerEvents[i]=[dojo.connect(_223,"onLoad",_223,_220),dojo.connect(_223,"onError",_223,_220)];}}});dfd.addCallback(dojo.hitch(this,this._basemapLoaded));}else{var _224=[],_225;for(_225 in _140.basemaps){_224.push(_225);}console.log(_218+esri.substitute({basemapName:_216,list:_224.join(",")},this.unknownBasemap));}},_basemapLoaded:function(_226){var _227=_226.layers,_228=_226.infos,_229=0,_22a=true;if(this.loaded){dojo.forEach(_227,function(_22b,i){if(_22b.loaded){if(!_228[i].isReference){_229++;}}});_22a=_229;}if(_22a){this._removeBasemap();this._basemap=_226.basemapName;this.basemapLayerIds=this._addBasemap(_227,_228);this._fireEvent("onBasemapChange");}},_addBasemap:function(_22c,_22d){var _22e=[],ids=[],_22f=0;dojo.forEach(_22c,function(_230,i){if(_22d[i].isReference){_22e.push(_230);}else{this.addLayer(_230,_22f++);ids.push(_230.id);}},this);if(_22e.length){dojo.forEach(_22e,function(_231){this.addLayer(_231,"top");ids.push(_231.id);},this);}return ids;},_removeBasemap:function(){var ids=this.basemapLayerIds,_232;if(ids&&ids.length){dojo.forEach(ids,function(id){_232=this.getLayer(id);if(_232){this.removeLayer(_232);}},this);}},getBasemap:function(){return this._basemap||"";},translate:function(dx,dy){dx=dx||0;dy=dy||0;if(!this._txTimer){this._tx=this._ty=0;var _233=this.toScreen(this.extent.getCenter());this.__panStart(_233.x,_233.y);}this._tx+=dx;this._ty+=dy;this.__pan(this._tx,this._ty);clearTimeout(this._txTimer);this._txTimer=setTimeout(this._endTranslate,150);},_endTranslate:function(){clearTimeout(this._txTimer);this._txTimer=null;var dx=this._tx,dy=this._ty;this._tx=this._ty=0;this.__panEnd(dx,dy);},setTimeExtent:function(_234){this.timeExtent=_234;var arg=_234?new esri.TimeExtent(_234.startTime,_234.endTime):null;this.onTimeExtentChange(arg);},setTimeSlider:function(_235){if(this.timeSlider){ddc(this._tsTimeExtentChange_connect);this._tsTimeExtentChange_connect=null;this.timeSlider=null;}if(_235){this.timeSlider=_235;this.setTimeExtent(_235.getCurrentTimeExtent());this._tsTimeExtentChange_connect=dc(_235,"onTimeExtentChange",this,"setTimeExtent");}},resize:function(_236){var self=this,_237=function(){clearTimeout(self._resizeT);self.reposition();self._resize();};clearTimeout(self._resizeT);if(_236===true){_237();}else{self._resizeT=setTimeout(_237,self.resizeDelay);}},_resize:function(){var w=this.width,h=this.height,box=dojo.contentBox(this.container);if(w===box.w&&h===box.h){return;}var _238=this._zoomAnim||this._panAnim;if(_238){_238.stop();_238._fire("onEnd",[_238.node]);}ds(this.root,{width:(this.width=box.w)+"px",height:(this.height=box.h)+"px"});var wd=this.width,ht=this.height;if(this.attribution&&this.attribution.domNode){dojo.style(this.attribution.domNode,"width",Math.floor(wd*this._mapParams.attributionWidth)+"px");}this.__visibleRect.update(this.__visibleRect.x,this.__visibleRect.y,wd,ht);this.__visibleDelta.update(this.__visibleDelta.x,this.__visibleDelta.y,wd,ht);var r=esri.geometry._extentToRect(this.extent),ne=(esri.geometry._rectToExtent(new Rect(r.x,r.y,r.width*(wd/w),r.height*(ht/h),this.spatialReference)));this.onResize(ne,wd,ht);this._extentUtil(null,null,ne,null,true);},reposition:function(){this._reposition();this.onReposition(this.position.x,this.position.y);},_reposition:function(){var pos=dojo.coords(this.container,true),brdr=dojo._getPadBorderExtents(this.container);this.position.update(pos.x+brdr.l,pos.y+brdr.t);},_setClipRect:function(){delete this._clip;var _239=dojo.isIE?"rect(auto,auto,auto,auto)":null;if(this.wrapAround180){var _23a=this.width,_23b=this.height,_23c=this._getFrameWidth(),diff=_23a-_23c;if(diff>0){var left=diff/2;_239="rect(0px,"+(left+_23c)+"px,"+_23b+"px,"+left+"px)";var _23d=this.extent.getWidth(),_23e=_23d*(_23c/_23a);this._clip=[(_23d-_23e)/2,_23e];}}ds(this.__container,"clip",_239);},_getAvailExtent:function(){var _23f=this.extent,clip=this._clip;if(clip){if(!_23f._clip){var rect=new esri.geometry._extentToRect(_23f);rect.width=clip[1];rect.x=rect.x+clip[0];_23f._clip=rect.getExtent();}return _23f._clip;}return _23f;},panUp:function(){this._fixedPan(0,this.height*-_142);},panUpperRight:function(){this._fixedPan(this.width*_142,this.height*-_142);},panRight:function(){this._fixedPan(this.width*_142,0);},panLowerRight:function(){this._fixedPan(this.width*_142,this.height*_142);},panDown:function(){this._fixedPan(0,this.height*_142);},panLowerLeft:function(){this._fixedPan(this.width*-_142,this.height*_142);},panLeft:function(){this._fixedPan(this.width*-_142,0);},panUpperLeft:function(){this._fixedPan(this.width*-_142,this.height*-_142);},enableSnapping:function(_240){if(!_240){_240={};}if(_240.declaredClass==="esri.SnappingManager"){this.snappingManager=_240;}else{this.snappingManager=new esri.SnappingManager(dojo.mixin({map:this},_240));}return this.snappingManager;},disableSnapping:function(){if(this.snappingManager){this.snappingManager.destroy();}this.snappingManager=null;}};}()));});},"dijit/_HasDropDown":function(){define("dijit/_HasDropDown",["dojo/_base/declare","dojo/_base/Deferred","dojo/_base/event","dojo/dom","dojo/dom-attr","dojo/dom-class","dojo/dom-geometry","dojo/dom-style","dojo/has","dojo/keys","dojo/_base/lang","dojo/on","dojo/window","./registry","./focus","./popup","./_FocusMixin"],function(_241,_242,_243,dom,_244,_245,_246,_247,has,keys,lang,on,_248,_249,_24a,_24b,_24c){return _241("dijit._HasDropDown",_24c,{_buttonNode:null,_arrowWrapperNode:null,_popupStateNode:null,_aroundNode:null,dropDown:null,autoWidth:true,forceWidth:false,maxHeight:0,dropDownPosition:["below","above"],_stopClickEvents:true,_onDropDownMouseDown:function(e){if(this.disabled||this.readOnly){return;}e.preventDefault();this._docHandler=this.connect(this.ownerDocument,"mouseup","_onDropDownMouseUp");this.toggleDropDown();},_onDropDownMouseUp:function(e){if(e&&this._docHandler){this.disconnect(this._docHandler);}var _24d=this.dropDown,_24e=false;if(e&&this._opened){var c=_246.position(this._buttonNode,true);if(!(e.pageX>=c.x&&e.pageX<=c.x+c.w)||!(e.pageY>=c.y&&e.pageY<=c.y+c.h)){var t=e.target;while(t&&!_24e){if(_245.contains(t,"dijitPopup")){_24e=true;}else{t=t.parentNode;}}if(_24e){t=e.target;if(_24d.onItemClick){var _24f;while(t&&!(_24f=_249.byNode(t))){t=t.parentNode;}if(_24f&&_24f.onClick&&_24f.getParent){_24f.getParent().onItemClick(_24f,e);}}return;}}}if(this._opened){if(_24d.focus&&_24d.autoFocus!==false){this._focusDropDownTimer=this.defer(function(){_24d.focus();delete this._focusDropDownTimer;});}}else{this.defer("focus");}if(has("ios")){this._justGotMouseUp=true;this.defer(function(){this._justGotMouseUp=false;});}},_onDropDownClick:function(e){if(has("touch")&&!this._justGotMouseUp){this._onDropDownMouseDown(e);this._onDropDownMouseUp(e);}if(this._stopClickEvents){_243.stop(e);}},buildRendering:function(){this.inherited(arguments);this._buttonNode=this._buttonNode||this.focusNode||this.domNode;this._popupStateNode=this._popupStateNode||this.focusNode||this._buttonNode;var _250={"after":this.isLeftToRight()?"Right":"Left","before":this.isLeftToRight()?"Left":"Right","above":"Up","below":"Down","left":"Left","right":"Right"}[this.dropDownPosition[0]]||this.dropDownPosition[0]||"Down";_245.add(this._arrowWrapperNode||this._buttonNode,"dijit"+_250+"ArrowButton");},postCreate:function(){this.inherited(arguments);this.own(on(this._buttonNode,"mousedown",lang.hitch(this,"_onDropDownMouseDown")),on(this._buttonNode,"click",lang.hitch(this,"_onDropDownClick")),on(this.focusNode,"keydown",lang.hitch(this,"_onKey")),on(this.focusNode,"keyup",lang.hitch(this,"_onKeyUp")));},destroy:function(){if(this.dropDown){if(!this.dropDown._destroyed){this.dropDown.destroyRecursive();}delete this.dropDown;}this.inherited(arguments);},_onKey:function(e){if(this.disabled||this.readOnly){return;}var d=this.dropDown,_251=e.target;if(d&&this._opened&&d.handleKey){if(d.handleKey(e)===false){_243.stop(e);return;}}if(d&&this._opened&&e.keyCode==keys.ESCAPE){this.closeDropDown();_243.stop(e);}else{if(!this._opened&&(e.keyCode==keys.DOWN_ARROW||((e.keyCode==keys.ENTER||e.keyCode==dojo.keys.SPACE)&&((_251.tagName||"").toLowerCase()!=="input"||(_251.type&&_251.type.toLowerCase()!=="text"))))){this._toggleOnKeyUp=true;_243.stop(e);}}},_onKeyUp:function(){if(this._toggleOnKeyUp){delete this._toggleOnKeyUp;this.toggleDropDown();var d=this.dropDown;if(d&&d.focus){this.defer(lang.hitch(d,"focus"),1);}}},_onBlur:function(){var _252=_24a.curNode&&this.dropDown&&dom.isDescendant(_24a.curNode,this.dropDown.domNode);this.closeDropDown(_252);this.inherited(arguments);},isLoaded:function(){return true;},loadDropDown:function(_253){_253();},loadAndOpenDropDown:function(){var d=new _242(),_254=lang.hitch(this,function(){this.openDropDown();d.resolve(this.dropDown);});if(!this.isLoaded()){this.loadDropDown(_254);}else{_254();}return d;},toggleDropDown:function(){if(this.disabled||this.readOnly){return;}if(!this._opened){this.loadAndOpenDropDown();}else{this.closeDropDown();}},openDropDown:function(){var _255=this.dropDown,_256=_255.domNode,_257=this._aroundNode||this.domNode,self=this;if(!this._preparedNode){this._preparedNode=true;if(_256.style.width){this._explicitDDWidth=true;}if(_256.style.height){this._explicitDDHeight=true;}}if(this.maxHeight||this.forceWidth||this.autoWidth){var _258={display:"",visibility:"hidden"};if(!this._explicitDDWidth){_258.width="";}if(!this._explicitDDHeight){_258.height="";}_247.set(_256,_258);var _259=this.maxHeight;if(_259==-1){var _25a=_248.getBox(this.ownerDocument),_25b=_246.position(_257,false);_259=Math.floor(Math.max(_25b.y,_25a.h-(_25b.y+_25b.h)));}_24b.moveOffScreen(_255);if(_255.startup&&!_255._started){_255.startup();}var mb=_246.getMarginSize(_256);var _25c=(_259&&mb.h>_259);_247.set(_256,{overflowX:"visible",overflowY:_25c?"auto":"visible"});if(_25c){mb.h=_259;if("w" in mb){mb.w+=16;}}else{delete mb.h;}if(this.forceWidth){mb.w=_257.offsetWidth;}else{if(this.autoWidth){mb.w=Math.max(mb.w,_257.offsetWidth);}else{delete mb.w;}}if(lang.isFunction(_255.resize)){_255.resize(mb);}else{_246.setMarginBox(_256,mb);}}var _25d=_24b.open({parent:this,popup:_255,around:_257,orient:this.dropDownPosition,onExecute:function(){self.closeDropDown(true);},onCancel:function(){self.closeDropDown(true);},onClose:function(){_244.set(self._popupStateNode,"popupActive",false);_245.remove(self._popupStateNode,"dijitHasDropDownOpen");self._set("_opened",false);}});_244.set(this._popupStateNode,"popupActive","true");_245.add(this._popupStateNode,"dijitHasDropDownOpen");this._set("_opened",true);this.domNode.setAttribute("aria-expanded","true");return _25d;},closeDropDown:function(_25e){if(this._focusDropDownTimer){this._focusDropDownTimer.remove();delete this._focusDropDownTimer;}if(this._opened){this.domNode.setAttribute("aria-expanded","false");if(_25e){this.focus();}_24b.close(this.dropDown);this._opened=false;}}});});},"esri/geometry/utils":function(){define(["dijit","dojo","dojox"],function(_25f,dojo,_260){dojo.provide("esri.geometry.utils");(function(){var EG=esri.geometry;EG.normalizeCentralMeridian=function(_261,_262,_263,_264){var dfd=new dojo.Deferred();dfd.addCallbacks(_263,_264);var _265=[],_266=[],_267,info,_268,maxX,minX,wkid,_269,_26a,_26b=0;dojo.forEach(_261,function(_26c){if(!_26c){_265.push(_26c);return;}if(!_267){_267=_26c.spatialReference;info=_267._getInfo();_268=_267._isWebMercator();maxX=_268?20037508.342788905:180;minX=_268?-20037508.342788905:-180;wkid=_268?102100:4326;_269=new esri.geometry.Polyline({"paths":[[[maxX,minX],[maxX,maxX]]],"spatialReference":{"wkid":wkid}});_26a=new esri.geometry.Polyline({"paths":[[[minX,minX],[minX,maxX]]],"spatialReference":{"wkid":wkid}});}if(!info){_265.push(_26c);return;}var _26d=esri.geometry.fromJson(dojo.fromJson(dojo.toJson(_26c.toJson()))),_26e=_26c.getExtent();if(_26c.type==="point"){_265.push(EG._pointNormalization(_26d,maxX,minX));}else{if(_26c.type==="multipoint"){_26d.points=dojo.map(_26d.points,function(_26f){return EG._pointNormalization(_26f,maxX,minX);});_265.push(_26d);}else{if(_26c.type==="extent"){_265.push(_26e._normalize(null,null,info));}else{var _270=EG._offsetMagnitude(_26e.xmin,minX),_271=_270*(2*maxX);_26d=(_271===0)?_26d:EG._updatePolyGeometry(_26d,_271);_26e=_26e.offset(_271,0);if(_26e.intersects(_269)&&(_26e.xmax!==maxX)){_26b=(_26e.xmax>_26b)?_26e.xmax:_26b;_26d=EG._prepareGeometryForCut(_26d,_268);_266.push(_26d);_265.push("cut");}else{if(_26e.intersects(_26a)&&(_26e.xmin!==minX)){_26b=(_26e.xmax*(2*maxX)>_26b)?_26e.xmax*(2*maxX):_26b;_26d=EG._prepareGeometryForCut(_26d,_268,360);_266.push(_26d);_265.push("cut");}else{_265.push(_26d);}}}}}});var _272=new esri.geometry.Polyline(),_273=EG._offsetMagnitude(_26b,maxX),_274=-90,_275=_273;while(_273>0){var _276=-180+(360*_273);_272.addPath([[_276,_274],[_276,_274*-1]]);_274=_274*-1;_273--;}if(_266.length>0&&_275>0){if(_262){_262.cut(_266,_272,function(_277){_266=EG._foldCutResults(_266,_277);var _278=[];dojo.forEach(_265,function(_279,i){if(_279==="cut"){var _27a=_266.shift();if((_261[i].rings)&&(_261[i].rings.length>1)&&(_27a.rings.length>=_261[i].rings.length)){_265[i]="simplify";_278.push(_27a);}else{_265[i]=(_268===true)?EG.geographicToWebMercator(_27a):_27a;}}});if(_278.length>0){_262.simplify(_278,function(_27b){dojo.forEach(_265,function(_27c,i){if(_27c==="simplify"){_265[i]=(_268===true)?EG.geographicToWebMercator(_27b.shift()):_27b.shift();}});dfd.callback(_265);},function(_27d){dfd.errback(_27d);});}else{dfd.callback(_265);}},function(_27e){dfd.errback(_27e);});}else{dfd.errback(new Error("esri.geometry.normalizeCentralMeridian: 'geometryService' argument is missing."));}}else{dojo.forEach(_265,function(_27f,i){if(_27f==="cut"){var _280=_266.shift();_265[i]=(_268===true)?EG.geographicToWebMercator(_280):_280;}});dfd.callback(_265);}return dfd;};EG.geodesicDensify=function(geom,_281){var _282=Math.PI/180;var _283=6371008.771515059;if(_281<_283/10000){_281=_283/10000;}if(!(geom instanceof esri.geometry.Polyline||geom instanceof esri.geometry.Polygon)){var msg="_geodesicDensify: the input geometry is neither polyline nor polygon";console.error(msg);throw new Error(msg);}var _284=geom instanceof esri.geometry.Polyline,_285=_284?geom.paths:geom.rings,_286=[],_287;dojo.forEach(_285,function(ring){_286.push(_287=[]);_287.push([ring[0][0],ring[0][1]]);var lon1,lat1,lon2,lat2,i,j;lon1=ring[0][0]*_282;lat1=ring[0][1]*_282;for(i=0;i<ring.length-1;i++){lon2=ring[i+1][0]*_282;lat2=ring[i+1][1]*_282;var _288=EG._inverseGeodeticSolver(lat1,lon1,lat2,lon2);var _289=_288.azimuth;var _28a=_288.geodesicDistance;var _28b=_28a/_281;if(_28b>1){for(j=1;j<=_28b-1;j++){var _28c=j*_281;var pt=EG._directGeodeticSolver(lat1,lon1,_289,_28c);_287.push([pt.x,pt.y]);}var _28d=(_28a+Math.floor(_28b-1)*_281)/2;var _28e=EG._directGeodeticSolver(lat1,lon1,_289,_28d);_287.push([_28e.x,_28e.y]);}var _28f=EG._directGeodeticSolver(lat1,lon1,_289,_28a);_287.push([_28f.x,_28f.y]);lon1=_28f.x*_282;lat1=_28f.y*_282;}});if(_284){return new esri.geometry.Polyline({paths:_286,spatialReference:geom.spatialReference});}else{return new esri.geometry.Polygon({rings:_286,spatialReference:geom.spatialReference});}};EG.geodesicLengths=function(_290,_291){var _292=Math.PI/180;var _293=[];dojo.forEach(_290,function(_294,idx){var _295=0;dojo.forEach(_294.paths,function(path,idx){var _296=0;var i,lon1,lon2,lat1,lat2,_297;for(i=1;i<path.length;i++){lon1=path[i-1][0]*_292;lon2=path[i][0]*_292;lat1=path[i-1][1]*_292;lat2=path[i][1]*_292;_297=EG._inverseGeodeticSolver(lat1,lon1,lat2,lon2);_296+=_297.geodesicDistance/1609.344;}_295+=_296;});_295*=EG._unitsDictionary[_291];_293.push(_295);});return _293;};EG.geodesicAreas=function(_298,_299){var _29a=[];dojo.forEach(_298,function(_29b,idx){var _29c=EG.geodesicDensify(_29b,10000);_29a.push(_29c);});var _29d=[];var _29e,_29f;dojo.forEach(_29a,function(_2a0,idx){var area=0;dojo.forEach(_2a0.rings,function(ring,idx){_29e=EG._toEqualAreaPoint(new esri.geometry.Point(ring[0][0],ring[0][1]));_29f=EG._toEqualAreaPoint(new esri.geometry.Point(ring[ring.length-1][0],ring[ring.length-1][1]));var _2a1=_29f.x*_29e.y-_29e.x*_29f.y;var i;for(i=0;i<ring.length-1;i++){_29e=EG._toEqualAreaPoint(new esri.geometry.Point(ring[i+1][0],ring[i+1][1]));_29f=EG._toEqualAreaPoint(new esri.geometry.Point(ring[i][0],ring[i][1]));_2a1+=_29f.x*_29e.y-_29e.x*_29f.y;}_2a1/=4046.87;area+=_2a1;});area*=EG._unitsDictionary[_299];_29d.push(area/(-2));});return _29d;};EG.polygonSelfIntersecting=function(_2a2){var i,j,k,m,_2a3,_2a4,_2a5,_2a6=_2a2.rings.length;for(k=0;k<_2a6;k++){for(i=0;i<_2a2.rings[k].length-1;i++){_2a3=[[_2a2.rings[k][i][0],_2a2.rings[k][i][1]],[_2a2.rings[k][i+1][0],_2a2.rings[k][i+1][1]]];for(j=k+1;j<_2a6;j++){for(m=0;m<_2a2.rings[j].length-1;m++){_2a4=[[_2a2.rings[j][m][0],_2a2.rings[j][m][1]],[_2a2.rings[j][m+1][0],_2a2.rings[j][m+1][1]]];_2a5=esri.geometry._getLineIntersection2(_2a3,_2a4);if(_2a5){if(!((_2a5[0]===_2a3[0][0]&&_2a5[1]===_2a3[0][1])||(_2a5[0]===_2a4[0][0]&&_2a5[1]===_2a4[0][1])||(_2a5[0]===_2a3[1][0]&&_2a5[1]===_2a3[1][1])||(_2a5[0]===_2a4[1][0]&&_2a5[1]===_2a4[1][1]))){return true;}}}}}var _2a7=_2a2.rings[k].length;if(_2a7<=4){continue;}for(i=0;i<_2a7-3;i++){var _2a8=_2a7-1;if(i===0){_2a8=_2a7-2;}_2a3=[[_2a2.rings[k][i][0],_2a2.rings[k][i][1]],[_2a2.rings[k][i+1][0],_2a2.rings[k][i+1][1]]];for(j=i+2;j<_2a8;j++){_2a4=[[_2a2.rings[k][j][0],_2a2.rings[k][j][1]],[_2a2.rings[k][j+1][0],_2a2.rings[k][j+1][1]]];_2a5=esri.geometry._getLineIntersection2(_2a3,_2a4);if(_2a5){if(!((_2a5[0]===_2a3[0][0]&&_2a5[1]===_2a3[0][1])||(_2a5[0]===_2a4[0][0]&&_2a5[1]===_2a4[0][1])||(_2a5[0]===_2a3[1][0]&&_2a5[1]===_2a3[1][1])||(_2a5[0]===_2a4[1][0]&&_2a5[1]===_2a4[1][1]))){return true;}}}}}return false;};EG.createCircle=function(_2a9){var _2aa={center:_2a9.center,longAxis:_2a9.r,shortAxis:_2a9.r,numberOfPoints:_2a9.numberOfPoints,map:_2a9.map};var _2ab=EG.createEllipse(_2aa);return _2ab;};EG.createEllipse=function(_2ac){var dx=_2ac.center.x,dy=_2ac.center.y,a=_2ac.longAxis,b=_2ac.shortAxis,_2ad=_2ac.numberOfPoints,map=_2ac.map,pt,i,_2ae,_2af,_2b0,path=[],_2b1=(2*Math.PI)/_2ad;for(i=0;i<_2ad;i++){_2ae=Math.cos(i*_2b1);_2af=Math.sin(i*_2b1);pt=map.toMap({x:a*_2ae+dx,y:b*_2af+dy});path.push(pt);}path.push(path[0]);_2b0=new esri.geometry.Polygon(map.spatialReference);_2b0.addRing(path);return _2b0;};EG._foldCutResults=function(_2b2,_2b3){var _2b4=-1;dojo.forEach(_2b3.cutIndexes,function(_2b5,i){var _2b6=_2b3.geometries[i];var _2b7=_2b6.rings||_2b6.paths;dojo.forEach(_2b7,function(_2b8,_2b9){dojo.some(_2b8,function(_2ba){if(_2ba[0]<180){return true;}else{var _2bb=0,j,jl=_2b8.length,ptX;for(j=0;j<jl;j++){ptX=_2b8[j][0];_2bb=ptX>_2bb?ptX:_2bb;}var _2bc=EG._offsetMagnitude(_2bb,180),_2bd=_2bc*-360,_2be,_2bf=_2b8.length;for(_2be=0;_2be<_2bf;_2be++){var _2c0=_2b6.getPoint(_2b9,_2be);_2b6.setPoint(_2b9,_2be,_2c0.offset(_2bd,0));}return true;}});});if(_2b5===_2b4){if(_2b6.rings){dojo.forEach(_2b6.rings,function(ring,j){_2b2[_2b5]=_2b2[_2b5].addRing(ring);});}else{dojo.forEach(_2b6.paths,function(path,j){_2b2[_2b5]=_2b2[_2b5].addPath(path);});}}else{_2b4=_2b5;_2b2[_2b5]=_2b6;}});return _2b2;};EG._prepareGeometryForCut=function(_2c1,_2c2,_2c3){var _2c4=1000000;if(_2c2){var _2c5=EG._straightLineDensify(_2c1,_2c4);_2c1=EG.webMercatorToGeographic(_2c5,true);}if(_2c3){_2c1=EG._updatePolyGeometry(_2c1,_2c3);}return _2c1;};EG._offsetMagnitude=function(_2c6,_2c7){return Math.ceil((_2c6-_2c7)/(_2c7*2));};EG._pointNormalization=function(_2c8,maxX,minX){var _2c9=_2c8.x||_2c8[0];var _2ca;if(_2c9>maxX){_2ca=EG._offsetMagnitude(_2c9,maxX);if(_2c8.x){_2c8=_2c8.offset(_2ca*(-2*maxX),0);}else{_2c8[0]=_2c9+(_2ca*(-2*maxX));}}else{if(_2c9<minX){_2ca=EG._offsetMagnitude(_2c9,minX);if(_2c8.x){_2c8=_2c8.offset(_2ca*(-2*minX),0);}else{_2c8[0]=_2c9+(_2ca*(-2*minX));}}}return _2c8;};EG._updatePolyGeometry=function(_2cb,_2cc){var _2cd=_2cb.paths||_2cb.rings,i,j,il=_2cd.length,jl;for(i=0;i<il;i++){var _2ce=_2cd[i];jl=_2ce.length;for(j=0;j<jl;j++){var _2cf=_2cb.getPoint(i,j);_2cb.setPoint(i,j,_2cf.offset(_2cc,0));}}return _2cb;};EG._straightLineDensify=function(geom,_2d0){if(!(geom instanceof esri.geometry.Polyline||geom instanceof esri.geometry.Polygon)){var msg="_straightLineDensify: the input geometry is neither polyline nor polygon";console.error(msg);throw new Error(msg);}var _2d1=geom instanceof esri.geometry.Polyline,_2d2=_2d1?geom.paths:geom.rings,_2d3=[],_2d4;dojo.forEach(_2d2,function(ring){_2d3.push(_2d4=[]);_2d4.push([ring[0][0],ring[0][1]]);var x1,y1,x2,y2;var i,j,_2d5,_2d6,_2d7,_2d8,xj,yj;for(i=0;i<ring.length-1;i++){x1=ring[i][0];y1=ring[i][1];x2=ring[i+1][0];y2=ring[i+1][1];_2d5=Math.sqrt((x2-x1)*(x2-x1)+(y2-y1)*(y2-y1));_2d6=(y2-y1)/_2d5;_2d7=(x2-x1)/_2d5;_2d8=_2d5/_2d0;if(_2d8>1){for(j=1;j<=_2d8-1;j++){var _2d9=j*_2d0;xj=_2d7*_2d9+x1;yj=_2d6*_2d9+y1;_2d4.push([xj,yj]);}var _2da=(_2d5+Math.floor(_2d8-1)*_2d0)/2;xj=_2d7*_2da+x1;yj=_2d6*_2da+y1;_2d4.push([xj,yj]);}_2d4.push([x2,y2]);}});if(_2d1){return new esri.geometry.Polyline({paths:_2d3,spatialReference:geom.spatialReference});}else{return new esri.geometry.Polygon({rings:_2d3,spatialReference:geom.spatialReference});}};EG._unitsDictionary={"esriMiles":1,"esriKilometers":1.609344,"esriFeet":5280,"esriMeters":1609.34,"esriYards":1760,"esriNauticalMiles":0.869,"esriCentimeters":160934,"esriDecimeters":16093.4,"esriInches":63360,"esriMillimeters":1609340,"esriAcres":1,"esriAres":40.4685642,"esriSquareKilometers":0.00404685642,"esriSquareMiles":0.0015625,"esriSquareFeet":43560,"esriSquareMeters":4046.85642,"esriHectares":0.404685642,"esriSquareYards":4840,"esriSquareInches":6272640,"esriSquareMillimeters":4046856420,"esriSquareCentimeters":40468564.2,"esriSquareDecimeters":404685.642};EG._toEqualAreaPoint=function(pt){var _2db=Math.PI/180;var a=6378137;var eSq=0.006694379990197414,e=0.0818191908429643;var sinY=Math.sin(pt.y*_2db);var q=(1-eSq)*((sinY/(1-eSq*(sinY*sinY))-(1/(2*e))*Math.log((1-e*sinY)/(1+e*sinY))));var x=a*pt.x*_2db;var y=a*q*0.5;var _2dc=new esri.geometry.Point(x,y);return _2dc;};EG._directGeodeticSolver=function(lat1,lon1,_2dd,s){var a=6378137,b=6356752.31424518,f=1/298.257223563;var _2de=Math.sin(_2dd);var _2df=Math.cos(_2dd);var _2e0=(1-f)*Math.tan(lat1);var _2e1=1/Math.sqrt((1+_2e0*_2e0)),_2e2=_2e0*_2e1;var _2e3=Math.atan2(_2e0,_2df);var _2e4=_2e1*_2de;var _2e5=1-_2e4*_2e4;var uSq=_2e5*(a*a-b*b)/(b*b);var A=1+uSq/16384*(4096+uSq*(-768+uSq*(320-175*uSq)));var B=uSq/1024*(256+uSq*(-128+uSq*(74-47*uSq)));var _2e6=s/(b*A),_2e7=2*Math.PI;var _2e8,_2e9,_2ea;while(Math.abs(_2e6-_2e7)>1e-12){_2ea=Math.cos(2*_2e3+_2e6);_2e8=Math.sin(_2e6);_2e9=Math.cos(_2e6);var _2eb=B*_2e8*(_2ea+B/4*(_2e9*(-1+2*_2ea*_2ea)-B/6*_2ea*(-3+4*_2e8*_2e8)*(-3+4*_2ea*_2ea)));_2e7=_2e6;_2e6=s/(b*A)+_2eb;}var tmp=_2e2*_2e8-_2e1*_2e9*_2df;var lat2=Math.atan2(_2e2*_2e9+_2e1*_2e8*_2df,(1-f)*Math.sqrt(_2e4*_2e4+tmp*tmp));var _2ec=Math.atan2(_2e8*_2de,_2e1*_2e9-_2e2*_2e8*_2df);var C=f/16*_2e5*(4+f*(4-3*_2e5));var L=_2ec-(1-C)*f*_2e4*(_2e6+C*_2e8*(_2ea+C*_2e9*(-1+2*_2ea*_2ea)));var _2ed=lat2/(Math.PI/180);var _2ee=(lon1+L)/(Math.PI/180);var pt=new esri.geometry.Point(_2ee,_2ed,new esri.SpatialReference({wkid:4326}));return pt;};EG._inverseGeodeticSolver=function(lat1,lon1,lat2,lon2){var a=6378137,b=6356752.31424518,f=1/298.257223563;var L=(lon2-lon1);var U1=Math.atan((1-f)*Math.tan(lat1));var U2=Math.atan((1-f)*Math.tan(lat2));var _2ef=Math.sin(U1),_2f0=Math.cos(U1);var _2f1=Math.sin(U2),_2f2=Math.cos(U2);var _2f3=L,_2f4,_2f5=1000;var _2f6,_2f7,_2f8,_2f9,_2fa;do{var _2fb=Math.sin(_2f3),_2fc=Math.cos(_2f3);_2f7=Math.sqrt((_2f2*_2fb)*(_2f2*_2fb)+(_2f0*_2f1-_2ef*_2f2*_2fc)*(_2f0*_2f1-_2ef*_2f2*_2fc));if(_2f7===0){return 0;}_2f9=_2ef*_2f1+_2f0*_2f2*_2fc;_2fa=Math.atan2(_2f7,_2f9);var _2fd=_2f0*_2f2*_2fb/_2f7;_2f6=1-_2fd*_2fd;_2f8=_2f9-2*_2ef*_2f1/_2f6;if(isNaN(_2f8)){_2f8=0;}var C=f/16*_2f6*(4+f*(4-3*_2f6));_2f4=_2f3;_2f3=L+(1-C)*f*_2fd*(_2fa+C*_2f7*(_2f8+C*_2f9*(-1+2*_2f8*_2f8)));}while(Math.abs(_2f3-_2f4)>1e-12&&--_2f5>0);if(_2f5===0){var _2fe=6371009;var _2ff=Math.acos(Math.sin(lat1)*Math.sin(lat2)+Math.cos(lat1)*Math.cos(lat2)*Math.cos(lon2-lon1))*_2fe;var dLon=lon2-lon1;var y=Math.sin(dLon)*Math.cos(lat2);var x=Math.cos(lat1)*Math.sin(lat2)-Math.sin(lat1)*Math.cos(lat2)*Math.cos(dLon);var brng=Math.atan2(y,x);return {"azimuth":brng,"geodesicDistance":_2ff};}var uSq=_2f6*(a*a-b*b)/(b*b);var A=1+uSq/16384*(4096+uSq*(-768+uSq*(320-175*uSq)));var B=uSq/1024*(256+uSq*(-128+uSq*(74-47*uSq)));var _300=B*_2f7*(_2f8+B/4*(_2f9*(-1+2*_2f8*_2f8)-B/6*_2f8*(-3+4*_2f7*_2f7)*(-3+4*_2f8*_2f8)));var s=b*A*(_2fa-_300);var _301=Math.atan2(_2f2*Math.sin(_2f3),_2f0*_2f1-_2ef*_2f2*Math.cos(_2f3));var _302=Math.atan2(_2f0*Math.sin(_2f3),_2f0*_2f1*Math.cos(_2f3)-_2ef*_2f2);var _303={azimuth:_301,geodesicDistance:s,reverseAzimuth:_302};return _303;};}());});},"esri/tasks/na":function(){define(["dijit","dojo","dojox","dojo/require!esri/tasks/_task"],function(_304,dojo,_305){dojo.provide("esri.tasks.na");dojo.require("esri.tasks._task");esri.tasks._NALengthUnit={esriFeet:"esriNAUFeet",esriKilometers:"esriNAUKilometers",esriMeters:"esriNAUMeters",esriMiles:"esriNAUMiles",esriNauticalMiles:"esriNAUNauticalMiles",esriYards:"esriNAUYards"};esri.tasks.NAOutputLine={NONE:"esriNAOutputLineNone",STRAIGHT:"esriNAOutputLineStraight",TRUE_SHAPE:"esriNAOutputLineTrueShape",TRUE_SHAPE_WITH_MEASURE:"esriNAOutputLineTrueShapeWithMeasure"};esri.tasks.NAUTurn={ALLOW_BACKTRACK:"esriNFSBAllowBacktrack",AT_DEAD_ENDS_ONLY:"esriNFSBAtDeadEndsOnly",NO_BACKTRACK:"esriNFSBNoBacktrack",AT_DEAD_ENDS_AND_INTERSECTIONS:"esriNFSBAtDeadEndsAndIntersections"};esri.tasks.NAOutputPolygon={NONE:"esriNAOutputPolygonNone",SIMPLIFIED:"esriNAOutputPolygonSimplified",DETAILED:"esriNAOutputPolygonDetailed"};esri.tasks.NATravelDirection={FROM_FACILITY:"esriNATravelDirectionFromFacility",TO_FACILITY:"esriNATravelDirectionToFacility"};dojo.declare("esri.tasks.NAMessage",null,{constructor:function(_306){dojo.mixin(this,_306);}});dojo.mixin(esri.tasks.NAMessage,{TYPE_INFORMATIVE:0,TYPE_PROCESS_DEFINITION:1,TYPE_PROCESS_START:2,TYPE_PROCESS_STOP:3,TYPE_WARNING:50,TYPE_ERROR:100,TYPE_EMPTY:101,TYPE_ABORT:200});dojo.declare("esri.tasks.DataLayer",null,{name:null,where:null,geometry:null,spatialRelationship:null,toJson:function(){var json={type:"layer",layerName:this.name,where:this.where,spatialRel:this.spatialRelationship};var g=this.geometry;if(g){json.geometryType=esri.geometry.getJsonType(g);json.geometry=g.toJson();}return esri.filter(json,function(_307){if(_307!==null){return true;}});}});dojo.mixin(esri.tasks.DataLayer,esri.tasks._SpatialRelationship);dojo.declare("esri.tasks.DirectionsFeatureSet",esri.tasks.FeatureSet,{constructor:function(json,cgs){this.routeId=json.routeId;this.routeName=json.routeName;dojo.mixin(this,json.summary);this.extent=new esri.geometry.Extent(this.envelope);var _308=this._fromCompressedGeometry,_309=this.features,sr=this.extent.spatialReference,_30a=[];dojo.forEach(cgs,function(cg,i){_309[i].setGeometry(_30a[i]=_308(cg,sr));});this.strings=json.strings;this.mergedGeometry=this._mergePolylinesToSinglePath(_30a,sr);this.geometryType="esriGeometryPolyline";delete this.envelope;},_fromCompressedGeometry:function(str,sr){var _30b=0,_30c=0,_30d=[],x,y,_30e=str.replace(/(\+)|(\-)/g," $&").split(" "),_30f=parseInt(_30e[1],32);for(var j=2,jl=_30e.length;j<jl;j+=2){_30b=(x=(parseInt(_30e[j],32)+_30b));_30c=(y=(parseInt(_30e[j+1],32)+_30c));_30d.push([x/_30f,y/_30f]);}var po=new esri.geometry.Polyline({paths:[_30d]});po.setSpatialReference(sr);return po;},_mergePolylinesToSinglePath:function(_310,sr){var _311=[];dojo.forEach(_310,function(_312){dojo.forEach(_312.paths,function(path){_311=_311.concat(path);});});var path=[],_313=[0,0];dojo.forEach(_311,function(_314){if(_314[0]!==_313[0]||_314[1]!==_313[1]){path.push(_314);_313=_314;}});return new esri.geometry.Polyline({paths:[path]}).setSpatialReference(sr);}});});},"esri/layers/agsimageservice":function(){define(["dijit","dojo","dojox","dojo/require!esri/layers/dynamic,esri/layers/agscommon,esri/utils"],function(_315,dojo,_316){dojo.provide("esri.layers.agsimageservice");dojo.require("esri.layers.dynamic");dojo.require("esri.layers.agscommon");dojo.require("esri.utils");dojo.declare("esri.layers.ArcGISImageServiceLayer",esri.layers.DynamicMapServiceLayer,{constructor:function(url,_317){this._url=esri.urlToObject(url);var _318=_317&&_317.imageServiceParameters;this.format=_318&&_318.format;this.interpolation=_318?_318.interpolation:null;this.compressionQuality=_318?_318.compressionQuality:null;this.bandIds=_318?_318.bandIds:null;this.mosaicRule=_318?_318.mosaicRule:null;this.renderingRule=_318?_318.renderingRule:null;this._params=dojo.mixin({},this._url.query,{f:"image",interpolation:this.interpolation,format:this.format,compressionQuality:this.compressionQuality,bandIds:this.bandIds?this.bandIds.join(","):null},_318?_318.toJson():{});this._initLayer=dojo.hitch(this,this._initLayer);this.useMapImage=(_317&&_317.useMapImage)||false;this._loadCallback=_317&&_317.loadCallback;var _319=_317&&_317.resourceInfo;if(_319){this._initLayer(_319);}else{esri.request({url:this._url.path,content:dojo.mixin({f:"json"},this._url.query),callbackParamName:"callback",load:this._initLayer,error:this._errorHandler});}},disableClientCaching:false,_initLayer:function(_31a,io){this._findCredential();var ssl=(this.credential&&this.credential.ssl)||(_31a&&_31a._ssl);if(ssl){this._useSSL();}var _31b=this.minScale,_31c=this.maxScale;dojo.mixin(this,_31a);this.minScale=_31b;this.maxScale=_31c;this.initialExtent=(this.fullExtent=this.extent=(new esri.geometry.Extent(_31a.extent)));this.spatialReference=this.initialExtent.spatialReference;this.pixelSizeX=parseFloat(this.pixelSizeX);this.pixelSizeY=parseFloat(this.pixelSizeY);var i,il,mins=this.minValues,maxs=this.maxValues,_31d=this.meanValues,_31e=this.stdvValues,bs=(this.bands=[]);for(i=0,il=this.bandCount;i<il;i++){bs[i]={min:mins[i],max:maxs[i],mean:_31d[i],stddev:_31e[i]};}var _31f=this.timeInfo;this.timeInfo=(_31f&&_31f.timeExtent)?new esri.layers.TimeInfo(_31f):null;var _320=this.fields=[];var _321=_31a.fields;if(_321){for(i=0;i<_321.length;i++){_320.push(new esri.layers.Field(_321[i]));}}this.version=_31a.currentVersion;if(!this.version){var ver;if("fields" in _31a||"objectIdField" in _31a||"timeInfo" in _31a){ver=10;}else{ver=9.3;}this.version=ver;}if(esri._isDefined(_31a.minScale)&&!this._hasMin){this.setMinScale(_31a.minScale);}if(esri._isDefined(_31a.maxScale)&&!this._hasMax){this.setMaxScale(_31a.maxScale);}this.loaded=true;this.onLoad(this);var _322=this._loadCallback;if(_322){delete this._loadCallback;_322(this);}},getImageUrl:function(_323,_324,_325,_326){var sr=_323.spatialReference.wkid||dojo.toJson(_323.spatialReference.toJson());delete this._params._ts;var path=this._url.path+"/exportImage?";dojo.mixin(this._params,{bbox:_323.xmin+","+_323.ymin+","+_323.xmax+","+_323.ymax,imageSR:sr,bboxSR:sr,size:_324+","+_325},this.disableClientCaching?{_ts:new Date().getTime()}:{});var _327=(this._params.token=this._getToken()),_328=esri._getProxiedUrl(path+dojo.objectToQuery(dojo.mixin(this._params,{f:"image"})));if((_328.length>esri.config.defaults.io.postLength)||this.useMapImage){this._jsonRequest=esri.request({url:path,content:dojo.mixin(this._params,{f:"json"}),callbackParamName:"callback",load:function(_329,io){var href=_329.href;if(_327){href+=(href.indexOf("?")===-1?("?token="+_327):("&token="+_327));}_326(esri._getProxiedUrl(href));},error:this._errorHandler});}else{_326(_328);}},setInterpolation:function(_32a,_32b){this.interpolation=(this._params.interpolation=_32a);if(!_32b){this.refresh(true);}},setCompressionQuality:function(_32c,_32d){this.compressionQuality=(this._params.compressionQuality=_32c);if(!_32d){this.refresh(true);}},setBandIds:function(ids,_32e){this.bandIds=ids;this._params.bandIds=ids.join(",");if(!_32e){this.refresh(true);}},setDefaultBandIds:function(_32f){this.bandIds=(this._params.bandIds=null);if(!_32f){this.refresh(true);}},setDisableClientCaching:function(_330){this.disableClientCaching=_330;},setMosaicRule:function(_331,_332){this.mosaicRule=_331;this._params.mosaicRule=dojo.toJson(_331.toJson());if(!_332){this.refresh(true);}},setRenderingRule:function(_333,_334){this.renderingRule=_333;this._params.renderingRule=dojo.toJson(_333.toJson());if(!_334){this.refresh(true);}},setImageFormat:function(_335,_336){this.format=(this._params.format=_335);if(!_336){this.refresh(true);}},refresh:function(_337){if(_337){this.inherited(arguments);}else{var dc=this.disableClientCaching;this.disableClientCaching=true;this.inherited(arguments);this.disableClientCaching=dc;}},exportMapImage:function(_338,_339){var m=esri.config.defaults.map,p=dojo.mixin({size:m.width+","+m.height},this._params,_338?_338.toJson(this.normalization):{},{f:"json"});delete p._ts;this._exportMapImage(this._url.path+"/exportImage",p,_339);}});dojo.declare("esri.layers.ImageServiceParameters",null,{extent:null,width:null,height:null,imageSpatialReference:null,format:null,interpolation:null,compressionQuality:null,bandIds:null,timeExtent:null,mosaicRule:null,renderingRule:null,noData:null,toJson:function(_33a){var ext=this.bbox||this.extent;ext=ext&&_33a&&ext._normalize(true);var wkid=ext?(ext.spatialReference.wkid||dojo.toJson(ext.spatialReference.toJson())):null,_33b=this.imageSpatialReference,json={bbox:ext?(ext.xmin+","+ext.ymin+","+ext.xmax+","+ext.ymax):null,bboxSR:wkid,size:(this.width!==null&&this.height!==null?this.width+","+this.height:null),imageSR:(_33b?(_33b.wkid||dojo.toJson(_33b.toJson())):wkid),format:this.format,interpolation:this.interpolation,compressionQuality:this.compressionQuality,bandIds:this.bandIds?this.bandIds.join(","):null,mosaicRule:this.mosaicRule?dojo.toJson(this.mosaicRule.toJson()):null,renderingRule:this.renderingRule?dojo.toJson(this.renderingRule.toJson()):null,noData:this.noData};var _33c=this.timeExtent;json.time=_33c?_33c.toJson().join(","):null;return esri.filter(json,function(_33d){if(_33d!==null){return true;}});}});dojo.mixin(esri.layers.ImageServiceParameters,{INTERPOLATION_BILINEAR:"RSP_BilinearInterpolation",INTERPOLATION_CUBICCONVOLUTION:"RSP_CubicConvolution",INTERPOLATION_MAJORITY:"RSP_Majority",INTERPOLATION_NEARESTNEIGHBOR:"RSP_NearestNeighbor"});dojo.declare("esri.layers.MosaicRule",null,{method:null,where:null,sortField:null,sortValue:null,ascending:false,lockRasterIds:null,viewpoint:null,objectIds:null,operation:null,toJson:function(){var json={mosaicMethod:this.method,where:this.where,sortField:this.sortField,sortValue:this.sortValue?dojo.toJson(this.sortValue):null,ascending:this.ascending,lockRasterIds:this.lockRasterIds,viewpoint:this.viewpoint?this.viewpoint.toJson():null,fids:this.objectIds,mosaicOperation:this.operation};return esri.filter(json,function(_33e){if(_33e!==null){return true;}});}});dojo.mixin(esri.layers.MosaicRule,{METHOD_NONE:"esriMosaicNone",METHOD_CENTER:"esriMosaicCenter",METHOD_NADIR:"esriMosaicNadir",METHOD_VIEWPOINT:"esriMosaicViewpoint",METHOD_ATTRIBUTE:"esriMosaicAttribute",METHOD_LOCKRASTER:"esriMosaicLockRaster",METHOD_NORTHWEST:"esriMosaicNorthwest",METHOD_SEAMLINE:"esriMosaicSeamline",OPERATION_FIRST:"MT_FIRST",OPERATION_LAST:"MT_LAST",OPERATION_MIN:"MT_MIN",OPERATION_MAX:"MT_MAX",OPERATION_MEAN:"MT_MEAN",OPERATION_BLEND:"MT_BLEND"});dojo.declare("esri.layers.RasterFunction",null,{functionName:null,"arguments":null,variableName:null,toJson:function(){var json={rasterFunction:this.functionName,rasterFunctionArguments:this["arguments"],variableName:this.variableName};return esri.filter(json,function(_33f){if(_33f!==null){return true;}});}});});},"dijit/focus":function(){define("dijit/focus",["dojo/aspect","dojo/_base/declare","dojo/dom","dojo/dom-attr","dojo/dom-construct","dojo/Evented","dojo/_base/lang","dojo/on","dojo/ready","dojo/sniff","dojo/Stateful","dojo/_base/unload","dojo/_base/window","dojo/window","./a11y","./registry","./main"],function(_340,_341,dom,_342,_343,_344,lang,on,_345,has,_346,_347,win,_348,a11y,_349,_34a){var _34b=_341([_346,_344],{curNode:null,activeStack:[],constructor:function(){var _34c=lang.hitch(this,function(node){if(dom.isDescendant(this.curNode,node)){this.set("curNode",null);}if(dom.isDescendant(this.prevNode,node)){this.set("prevNode",null);}});_340.before(_343,"empty",_34c);_340.before(_343,"destroy",_34c);},registerIframe:function(_34d){return this.registerWin(_34d.contentWindow,_34d);},registerWin:function(_34e,_34f){var _350=this;var _351=function(evt){_350._justMouseDowned=true;setTimeout(function(){_350._justMouseDowned=false;},0);if(has("ie")&&evt&&evt.srcElement&&evt.srcElement.parentNode==null){return;}_350._onTouchNode(_34f||evt.target||evt.srcElement,"mouse");};var doc=has("ie")?_34e.document.documentElement:_34e.document;if(doc){if(has("ie")){_34e.document.body.attachEvent("onmousedown",_351);var _352=function(evt){var tag=evt.srcElement.tagName.toLowerCase();if(tag=="#document"||tag=="body"){return;}if(a11y.isTabNavigable(evt.srcElement)){_350._onFocusNode(_34f||evt.srcElement);}else{_350._onTouchNode(_34f||evt.srcElement);}};doc.attachEvent("onfocusin",_352);var _353=function(evt){_350._onBlurNode(_34f||evt.srcElement);};doc.attachEvent("onfocusout",_353);return {remove:function(){_34e.document.detachEvent("onmousedown",_351);doc.detachEvent("onfocusin",_352);doc.detachEvent("onfocusout",_353);doc=null;}};}else{doc.body.addEventListener("mousedown",_351,true);doc.body.addEventListener("touchstart",_351,true);var _354=function(evt){_350._onFocusNode(_34f||evt.target);};doc.addEventListener("focus",_354,true);var _355=function(evt){_350._onBlurNode(_34f||evt.target);};doc.addEventListener("blur",_355,true);return {remove:function(){doc.body.removeEventListener("mousedown",_351,true);doc.body.removeEventListener("touchstart",_351,true);doc.removeEventListener("focus",_354,true);doc.removeEventListener("blur",_355,true);doc=null;}};}}},_onBlurNode:function(node){if(this._clearFocusTimer){clearTimeout(this._clearFocusTimer);}this._clearFocusTimer=setTimeout(lang.hitch(this,function(){this.set("prevNode",this.curNode);this.set("curNode",null);}),0);if(this._justMouseDowned){return;}if(this._clearActiveWidgetsTimer){clearTimeout(this._clearActiveWidgetsTimer);}this._clearActiveWidgetsTimer=setTimeout(lang.hitch(this,function(){delete this._clearActiveWidgetsTimer;this._setStack([]);}),0);},_onTouchNode:function(node,by){if(this._clearActiveWidgetsTimer){clearTimeout(this._clearActiveWidgetsTimer);delete this._clearActiveWidgetsTimer;}var _356=[];try{while(node){var _357=_342.get(node,"dijitPopupParent");if(_357){node=_349.byId(_357).domNode;}else{if(node.tagName&&node.tagName.toLowerCase()=="body"){if(node===win.body()){break;}node=_348.get(node.ownerDocument).frameElement;}else{var id=node.getAttribute&&node.getAttribute("widgetId"),_358=id&&_349.byId(id);if(_358&&!(by=="mouse"&&_358.get("disabled"))){_356.unshift(id);}node=node.parentNode;}}}}catch(e){}this._setStack(_356,by);},_onFocusNode:function(node){if(!node){return;}if(node.nodeType==9){return;}if(this._clearFocusTimer){clearTimeout(this._clearFocusTimer);delete this._clearFocusTimer;}this._onTouchNode(node);if(node==this.curNode){return;}this.set("prevNode",this.curNode);this.set("curNode",node);},_setStack:function(_359,by){var _35a=this.activeStack;this.set("activeStack",_359);for(var _35b=0;_35b<Math.min(_35a.length,_359.length);_35b++){if(_35a[_35b]!=_359[_35b]){break;}}var _35c;for(var i=_35a.length-1;i>=_35b;i--){_35c=_349.byId(_35a[i]);if(_35c){_35c._hasBeenBlurred=true;_35c.set("focused",false);if(_35c._focusManager==this){_35c._onBlur(by);}this.emit("widget-blur",_35c,by);}}for(i=_35b;i<_359.length;i++){_35c=_349.byId(_359[i]);if(_35c){_35c.set("focused",true);if(_35c._focusManager==this){_35c._onFocus(by);}this.emit("widget-focus",_35c,by);}}},focus:function(node){if(node){try{node.focus();}catch(e){}}}});var _35d=new _34b();_345(function(){var _35e=_35d.registerWin(_348.get(win.doc));if(has("ie")){_347.addOnWindowUnload(function(){if(_35e){_35e.remove();_35e=null;}});}});_34a.focus=function(node){_35d.focus(node);};for(var attr in _35d){if(!/^_/.test(attr)){_34a.focus[attr]=typeof _35d[attr]=="function"?lang.hitch(_35d,attr):_35d[attr];}}_35d.watch(function(attr,_35f,_360){_34a.focus[attr]=_360;});return _35d;});},"dijit/hccss":function(){define("dijit/hccss",["dojo/dom-class","dojo/hccss","dojo/ready","dojo/_base/window"],function(_361,has,_362,win){_362(90,function(){if(has("highcontrast")){_361.add(win.body(),"dijit_a11y");}});return has;});},"esri/graphic":function(){define(["dijit","dojo","dojox","dojo/require!esri/geometry,esri/symbol"],function(_363,dojo,_364){dojo.provide("esri.graphic");dojo.require("esri.geometry");dojo.require("esri.symbol");dojo.declare("esri.Graphic",null,{constructor:function(json,_365,_366,_367){if(json&&!(json instanceof esri.geometry.Geometry)){this.geometry=json.geometry?esri.geometry.fromJson(json.geometry):null;this.symbol=json.symbol?esri.symbol.fromJson(json.symbol):null;this.attributes=json.attributes||null;this.infoTemplate=json.infoTemplate?new esri.InfoTemplate(json.infoTemplate):null;}else{this.geometry=json;this.symbol=_365;this.attributes=_366;this.infoTemplate=_367;}},_shape:null,_graphicsLayer:null,_visible:true,visible:true,getDojoShape:function(){return this._shape;},getLayer:function(){return this._graphicsLayer;},setGeometry:function(_368){this.geometry=_368;var gl=this._graphicsLayer;if(gl){gl._updateExtent(this);gl._draw(this,true);}return this;},setSymbol:function(_369,_36a){var gl=this._graphicsLayer,_36b=this._shape;this.symbol=_369;if(_369){this.symbol._stroke=this.symbol._fill=null;}if(gl){if(_36a){if(_36b){gl._removeShape(this);}}gl._draw(this,true);}return this;},setAttributes:function(_36c){this.attributes=_36c;return this;},setInfoTemplate:function(_36d){this.infoTemplate=_36d;return this;},_getEffInfoTemplate:function(){var _36e=this.getLayer();return this.infoTemplate||(_36e&&_36e.infoTemplate);},getTitle:function(){var _36f=this._getEffInfoTemplate();var _370=_36f&&_36f.title;if(dojo.isFunction(_370)){_370=_370.call(_36f,this);}else{if(dojo.isString(_370)){var _371=this._graphicsLayer;var func=_371&&_371._getDateOpts;_370=esri.substitute(this.attributes,_370,{first:true,dateFormat:func&&func.call(_371)});}}return _370;},getContent:function(){var _372=this._getEffInfoTemplate();var _373=_372&&_372.content;if(dojo.isFunction(_373)){_373=_373.call(_372,this);}else{if(dojo.isString(_373)){var _374=this._graphicsLayer;var func=_374&&_374._getDateOpts;_373=esri.substitute(this.attributes,_373,{dateFormat:func&&func.call(_374)});}}return _373;},show:function(){this.visible=this._visible=true;var _375=this._shape,_376;if(_375){_376=_375.declaredClass.toLowerCase().indexOf("canvas")===-1?_375.getEventSource():null;if(_376){esri.show(_376);}}else{if(this._graphicsLayer){this._graphicsLayer._draw(this,true);}}return this;},hide:function(){this.visible=this._visible=false;var _377=this._shape,_378,_379;if(_377){_378=_377.declaredClass.toLowerCase().indexOf("canvas")===-1?_377.getEventSource():null;if(_378){esri.hide(_378);}else{_379=this._graphicsLayer;if(_379){_379._removeShape(this);}}}return this;},toJson:function(){var json={};if(this.geometry){json.geometry=this.geometry.toJson();}if(this.attributes){json.attributes=dojo.mixin({},this.attributes);}if(this.symbol){json.symbol=this.symbol.toJson();}if(this.infoTemplate){json.infoTemplate=this.infoTemplate.toJson();}return json;}});dojo.declare("esri.InfoTemplate",null,{constructor:function(_37a,_37b){if(_37a&&dojo.isObject(_37a)&&!dojo.isFunction(_37a)){dojo.mixin(this,_37a);}else{this.title=_37a||"${*}";this.content=_37b||"${*}";}},setTitle:function(_37c){this.title=_37c;return this;},setContent:function(_37d){this.content=_37d;return this;},toJson:function(){return esri._sanitize({title:this.title,content:this.content});}});});},"esri/tasks/query":function(){define(["dijit","dojo","dojox","dojo/require!esri/tasks/_task,esri/_time"],function(_37e,dojo,_37f){dojo.provide("esri.tasks.query");dojo.require("esri.tasks._task");dojo.require("esri._time");dojo.declare("esri.tasks.QueryTask",esri.tasks._Task,{constructor:function(url,_380){this._handler=dojo.hitch(this,this._handler);this._relationshipQueryHandler=dojo.hitch(this,this._relationshipQueryHandler);this._executeForIdsHandler=dojo.hitch(this,this._executeForIdsHandler);this._countHandler=dojo.hitch(this,this._countHandler);this.source=_380&&_380.source;this.gdbVersion=_380&&_380.gdbVersion;},__msigns:[{n:"execute",c:4,a:[{i:0,p:["geometry"]}],e:2},{n:"executeForIds",c:3,a:[{i:0,p:["geometry"]}],e:2},{n:"executeForCount",c:3,a:[{i:0,p:["geometry"]}],e:2}],onComplete:function(){},onExecuteRelationshipQueryComplete:function(){},onExecuteForIdsComplete:function(){},onExecuteForCountComplete:function(){},execute:function(_381,_382,_383,_384,_385){var _386=_385.assembly,_387=this._encode(dojo.mixin({},this._url.query,{f:"json"},_381.toJson(_386&&_386[0]))),_388=this._handler,_389=this._errorHandler;if(this.source){var _38a={source:this.source.toJson()};_387.layer=dojo.toJson(_38a);}if(this.gdbVersion){_387.gdbVersion=this.gdbVersion;}return esri.request({url:this._url.path+"/query",content:_387,callbackParamName:"callback",load:function(r,i){_388(r,i,_382,_383,_385.dfd);},error:function(r){_389(r,_383,_385.dfd);},callbackSuffix:_384});},executeRelationshipQuery:function(_38b,_38c,_38d){var _38e=this._encode(dojo.mixin({},this._url.query,{f:"json"},_38b.toJson())),_38f=this._relationshipQueryHandler,_390=this._errorHandler;if(this.gdbVersion){_38e.gdbVersion=this.gdbVersion;}var dfd=new dojo.Deferred(esri._dfdCanceller);dfd._pendingDfd=esri.request({url:this._url.path+"/queryRelatedRecords",content:_38e,callbackParamName:"callback",load:function(r,i){_38f(r,i,_38c,_38d,dfd);},error:function(r){_390(r,_38d,dfd);}});return dfd;},executeForIds:function(_391,_392,_393,_394){var _395=_394.assembly,_396=this._encode(dojo.mixin({},this._url.query,{f:"json",returnIdsOnly:true},_391.toJson(_395&&_395[0]))),_397=this._executeForIdsHandler,_398=this._errorHandler;if(this.source){var _399={source:this.source.toJson()};_396.layer=dojo.toJson(_399);}if(this.gdbVersion){_396.gdbVersion=this.gdbVersion;}return esri.request({url:this._url.path+"/query",content:_396,callbackParamName:"callback",load:function(r,i){_397(r,i,_392,_393,_394.dfd);},error:function(r){_398(r,_393,_394.dfd);}});},executeForCount:function(_39a,_39b,_39c,_39d){var _39e=_39d.assembly,_39f=this._encode(dojo.mixin({},this._url.query,{f:"json",returnIdsOnly:true,returnCountOnly:true},_39a.toJson(_39e&&_39e[0]))),_3a0=this._countHandler,_3a1=this._errorHandler;if(this.source){var _3a2={source:this.source.toJson()};_39f.layer=dojo.toJson(_3a2);}if(this.gdbVersion){_39f.gdbVersion=this.gdbVersion;}return esri.request({url:this._url.path+"/query",content:_39f,callbackParamName:"callback",load:function(r,i){_3a0(r,i,_39b,_39c,_39d.dfd);},error:function(r){_3a1(r,_39c,_39d.dfd);}});},_handler:function(_3a3,io,_3a4,_3a5,dfd){try{var _3a6=new esri.tasks.FeatureSet(_3a3);this._successHandler([_3a6],"onComplete",_3a4,dfd);}catch(err){this._errorHandler(err,_3a5,dfd);}},_relationshipQueryHandler:function(_3a7,io,_3a8,_3a9,dfd){try{var gt=_3a7.geometryType,sr=_3a7.spatialReference,_3aa={};dojo.forEach(_3a7.relatedRecordGroups,function(gr){var _3ab={};_3ab.geometryType=gt;_3ab.spatialReference=sr;_3ab.features=gr.relatedRecords;var fset=new esri.tasks.FeatureSet(_3ab);_3aa[gr.objectId]=fset;});this._successHandler([_3aa],"onExecuteRelationshipQueryComplete",_3a8,dfd);}catch(err){this._errorHandler(err,_3a9,dfd);}},_executeForIdsHandler:function(_3ac,io,_3ad,_3ae,dfd){try{this._successHandler([_3ac.objectIds],"onExecuteForIdsComplete",_3ad,dfd);}catch(err){this._errorHandler(err,_3ae,dfd);}},_countHandler:function(_3af,io,_3b0,_3b1,dfd){try{var _3b2,_3b3=_3af.features,ids=_3af.objectIds;if(ids){_3b2=ids.length;}else{if(_3b3){throw new Error(esri.bundle.tasks.query.invalid);}else{_3b2=_3af.count;}}this._successHandler([_3b2],"onExecuteForCountComplete",_3b0,dfd);}catch(err){this._errorHandler(err,_3b1,dfd);}}});esri._createWrappers("esri.tasks.QueryTask");dojo.declare("esri.tasks.Query",null,{constructor:function(){this.spatialRelationship=esri.tasks.Query.SPATIAL_REL_INTERSECTS;},text:null,where:"",geometry:null,groupByFieldsForStatistics:null,objectIds:null,returnGeometry:false,orderByFields:null,outSpatialReference:null,outFields:null,outStatistics:null,timeExtent:null,relationParam:null,toJson:function(_3b4){var json={text:this.text,where:this.where,returnGeometry:this.returnGeometry,spatialRel:this.spatialRelationship,maxAllowableOffset:this.maxAllowableOffset,geometryPrecision:this.geometryPrecision},g=_3b4&&_3b4["geometry"]||this.geometry,ids=this.objectIds,_3b5=this.outFields,_3b6=this.outSpatialReference,_3b7=this.groupByFieldsForStatistics,_3b8=this.orderByFields,_3b9=this.outStatistics;if(g){json.geometry=g;json.geometryType=esri.geometry.getJsonType(g);json.inSR=g.spatialReference.wkid||dojo.toJson(g.spatialReference.toJson());}if(ids){json.objectIds=ids.join(",");}if(_3b5){json.outFields=_3b5.join(",");}if(_3b7){json.groupByFieldsForStatistics=_3b7.join(",");}if(_3b8){json.orderByFields=_3b8.join(",");}if(_3b9){var _3ba=[];dojo.forEach(_3b9,function(item,idx){_3ba.push(item.toJson());});json.outStatistics=dojo.toJson(_3ba);}if(_3b6!==null){json.outSR=_3b6.wkid||dojo.toJson(_3b6.toJson());}else{if(g){json.outSR=g.spatialReference.wkid||dojo.toJson(g.spatialReference.toJson());}}var _3bb=this.timeExtent;json.time=_3bb?_3bb.toJson().join(","):null;var _3bc=this.relationParam;if(_3bc&&this.spatialRelationship===esri.tasks.Query.SPATIAL_REL_RELATION){json.relationParam=_3bc;}json._ts=this._ts;return json;}});dojo.mixin(esri.tasks.Query,esri.tasks._SpatialRelationship);dojo.declare("esri.tasks.RelationshipQuery",null,{definitionExpression:"",relationshipId:null,returnGeometry:false,objectIds:null,outSpatialReference:null,outFields:null,toJson:function(){var json={definitionExpression:this.definitionExpression,relationshipId:this.relationshipId,returnGeometry:this.returnGeometry,maxAllowableOffset:this.maxAllowableOffset,geometryPrecision:this.geometryPrecision},_3bd=this.objectIds,_3be=this.outFields,_3bf=this.outSpatialReference;if(_3bd){json.objectIds=_3bd.join(",");}if(_3be){json.outFields=_3be.join(",");}if(_3bf){json.outSR=_3bf.toJson();}json._ts=this._ts;return json;}});dojo.declare("esri.tasks.StatisticDefinition",null,{statisticType:null,onStatisticField:null,outStatisticFieldName:null,toJson:function(){var json={statisticType:this.statisticType,onStatisticField:this.onStatisticField};if(this.outStatisticFieldName){json.outStatisticFieldName=this.outStatisticFieldName;}return json;}});});},"dojo/parser":function(){define(["./_base/kernel","./_base/lang","./_base/array","./_base/config","./_base/html","./_base/window","./_base/url","./_base/json","./aspect","./date/stamp","./Deferred","./has","./query","./on","./ready"],function(dojo,_3c0,_3c1,_3c2,_3c3,_3c4,_3c5,_3c6,_3c7,_3c8,_3c9,has,_3ca,don,_3cb){new Date("X");var _3cc=0;_3c7.after(_3c0,"extend",function(){_3cc++;},true);function _3cd(ctor){var map=ctor._nameCaseMap,_3ce=ctor.prototype;if(!map||map._extendCnt<_3cc){map=ctor._nameCaseMap={};for(var name in _3ce){if(name.charAt(0)==="_"){continue;}map[name.toLowerCase()]=name;}map._extendCnt=_3cc;}return map;};var _3cf={};function _3d0(_3d1){var ts=_3d1.join();if(!_3cf[ts]){var _3d2=[];for(var i=0,l=_3d1.length;i<l;i++){var t=_3d1[i];_3d2[_3d2.length]=(_3cf[t]=_3cf[t]||(_3c0.getObject(t)||(~t.indexOf("/")&&require(t))));}var ctor=_3d2.shift();_3cf[ts]=_3d2.length?(ctor.createSubclass?ctor.createSubclass(_3d2):ctor.extend.apply(ctor,_3d2)):ctor;}return _3cf[ts];};var _3d3={_clearCache:function(){_3cc++;_3cf={};},_functionFromScript:function(_3d4,_3d5){var _3d6="",_3d7="",_3d8=(_3d4.getAttribute(_3d5+"args")||_3d4.getAttribute("args")),_3d9=_3d4.getAttribute("with");var _3da=(_3d8||"").split(/\s*,\s*/);if(_3d9&&_3d9.length){_3c1.forEach(_3d9.split(/\s*,\s*/),function(part){_3d6+="with("+part+"){";_3d7+="}";});}return new Function(_3da,_3d6+_3d4.innerHTML+_3d7);},instantiate:function(_3db,_3dc,_3dd){_3dc=_3dc||{};_3dd=_3dd||{};var _3de=(_3dd.scope||dojo._scopeName)+"Type",_3df="data-"+(_3dd.scope||dojo._scopeName)+"-",_3e0=_3df+"type",_3e1=_3df+"mixins";var list=[];_3c1.forEach(_3db,function(node){var type=_3de in _3dc?_3dc[_3de]:node.getAttribute(_3e0)||node.getAttribute(_3de);if(type){var _3e2=node.getAttribute(_3e1),_3e3=_3e2?[type].concat(_3e2.split(/\s*,\s*/)):[type];list.push({node:node,types:_3e3});}});return this._instantiate(list,_3dc,_3dd);},_instantiate:function(_3e4,_3e5,_3e6){var _3e7=_3c1.map(_3e4,function(obj){var ctor=obj.ctor||_3d0(obj.types);if(!ctor){throw new Error("Unable to resolve constructor for: '"+obj.types.join()+"'");}return this.construct(ctor,obj.node,_3e5,_3e6,obj.scripts,obj.inherited);},this);if(!_3e5._started&&!_3e6.noStart){_3c1.forEach(_3e7,function(_3e8){if(typeof _3e8.startup==="function"&&!_3e8._started){_3e8.startup();}});}return _3e7;},construct:function(ctor,node,_3e9,_3ea,_3eb,_3ec){var _3ed=ctor&&ctor.prototype;_3ea=_3ea||{};var _3ee={};if(_3ea.defaults){_3c0.mixin(_3ee,_3ea.defaults);}if(_3ec){_3c0.mixin(_3ee,_3ec);}var _3ef;if(has("dom-attributes-explicit")){_3ef=node.attributes;}else{if(has("dom-attributes-specified-flag")){_3ef=_3c1.filter(node.attributes,function(a){return a.specified;});}else{var _3f0=/^input$|^img$/i.test(node.nodeName)?node:node.cloneNode(false),_3f1=_3f0.outerHTML.replace(/=[^\s"']+|="[^"]*"|='[^']*'/g,"").replace(/^\s*<[a-zA-Z0-9]*\s*/,"").replace(/\s*>.*$/,"");_3ef=_3c1.map(_3f1.split(/\s+/),function(name){var _3f2=name.toLowerCase();return {name:name,value:(node.nodeName=="LI"&&name=="value")||_3f2=="enctype"?node.getAttribute(_3f2):node.getAttributeNode(_3f2).value};});}}var _3f3=_3ea.scope||dojo._scopeName,_3f4="data-"+_3f3+"-",hash={};if(_3f3!=="dojo"){hash[_3f4+"props"]="data-dojo-props";hash[_3f4+"type"]="data-dojo-type";hash[_3f4+"mixins"]="data-dojo-mixins";hash[_3f3+"type"]="dojoType";hash[_3f4+"id"]="data-dojo-id";}var i=0,item,_3f5=[],_3f6,_3f7;while(item=_3ef[i++]){var name=item.name,_3f8=name.toLowerCase(),_3f9=item.value;switch(hash[_3f8]||_3f8){case "data-dojo-type":case "dojotype":case "data-dojo-mixins":break;case "data-dojo-props":_3f7=_3f9;break;case "data-dojo-id":case "jsid":_3f6=_3f9;break;case "data-dojo-attach-point":case "dojoattachpoint":_3ee.dojoAttachPoint=_3f9;break;case "data-dojo-attach-event":case "dojoattachevent":_3ee.dojoAttachEvent=_3f9;break;case "class":_3ee["class"]=node.className;break;case "style":_3ee["style"]=node.style&&node.style.cssText;break;default:if(!(name in _3ed)){var map=_3cd(ctor);name=map[_3f8]||name;}if(name in _3ed){switch(typeof _3ed[name]){case "string":_3ee[name]=_3f9;break;case "number":_3ee[name]=_3f9.length?Number(_3f9):NaN;break;case "boolean":_3ee[name]=_3f9.toLowerCase()!="false";break;case "function":if(_3f9===""||_3f9.search(/[^\w\.]+/i)!=-1){_3ee[name]=new Function(_3f9);}else{_3ee[name]=_3c0.getObject(_3f9,false)||new Function(_3f9);}_3f5.push(name);break;default:var pVal=_3ed[name];_3ee[name]=(pVal&&"length" in pVal)?(_3f9?_3f9.split(/\s*,\s*/):[]):(pVal instanceof Date)?(_3f9==""?new Date(""):_3f9=="now"?new Date():_3c8.fromISOString(_3f9)):(pVal instanceof _3c5)?(dojo.baseUrl+_3f9):_3c6.fromJson(_3f9);}}else{_3ee[name]=_3f9;}}}for(var j=0;j<_3f5.length;j++){var _3fa=_3f5[j].toLowerCase();node.removeAttribute(_3fa);node[_3fa]=null;}if(_3f7){try{_3f7=_3c6.fromJson.call(_3ea.propsThis,"{"+_3f7+"}");_3c0.mixin(_3ee,_3f7);}catch(e){throw new Error(e.toString()+" in data-dojo-props='"+_3f7+"'");}}_3c0.mixin(_3ee,_3e9);if(!_3eb){_3eb=(ctor&&(ctor._noScript||_3ed._noScript)?[]:_3ca("> script[type^='dojo/']",node));}var _3fb=[],_3fc=[],_3fd=[],ons=[];if(_3eb){for(i=0;i<_3eb.length;i++){var _3fe=_3eb[i];node.removeChild(_3fe);var _3ff=(_3fe.getAttribute(_3f4+"event")||_3fe.getAttribute("event")),prop=_3fe.getAttribute(_3f4+"prop"),_400=_3fe.getAttribute(_3f4+"method"),_401=_3fe.getAttribute(_3f4+"advice"),_402=_3fe.getAttribute("type"),nf=this._functionFromScript(_3fe,_3f4);if(_3ff){if(_402=="dojo/connect"){_3fb.push({method:_3ff,func:nf});}else{if(_402=="dojo/on"){ons.push({event:_3ff,func:nf});}else{_3ee[_3ff]=nf;}}}else{if(_402=="dojo/aspect"){_3fb.push({method:_400,advice:_401,func:nf});}else{if(_402=="dojo/watch"){_3fd.push({prop:prop,func:nf});}else{_3fc.push(nf);}}}}}var _403=ctor.markupFactory||_3ed.markupFactory;var _404=_403?_403(_3ee,node,ctor):new ctor(_3ee,node);if(_3f6){_3c0.setObject(_3f6,_404);}for(i=0;i<_3fb.length;i++){_3c7[_3fb[i].advice||"after"](_404,_3fb[i].method,_3c0.hitch(_404,_3fb[i].func),true);}for(i=0;i<_3fc.length;i++){_3fc[i].call(_404);}for(i=0;i<_3fd.length;i++){_404.watch(_3fd[i].prop,_3fd[i].func);}for(i=0;i<ons.length;i++){don(_404,ons[i].event,ons[i].func);}return _404;},scan:function(root,_405){var list=[],mids=[],_406={};var _407=(_405.scope||dojo._scopeName)+"Type",_408="data-"+(_405.scope||dojo._scopeName)+"-",_409=_408+"type",_40a=_408+"textdir",_40b=_408+"mixins";var node=root.firstChild;var _40c=_405.inherited;if(!_40c){function _40d(node,attr){return (node.getAttribute&&node.getAttribute(attr))||(node.parentNode&&_40d(node.parentNode,attr));};_40c={dir:_40d(root,"dir"),lang:_40d(root,"lang"),textDir:_40d(root,_40a)};for(var key in _40c){if(!_40c[key]){delete _40c[key];}}}var _40e={inherited:_40c};var _40f;var _410;function _411(_412){if(!_412.inherited){_412.inherited={};var node=_412.node,_413=_411(_412.parent);var _414={dir:node.getAttribute("dir")||_413.dir,lang:node.getAttribute("lang")||_413.lang,textDir:node.getAttribute(_40a)||_413.textDir};for(var key in _414){if(_414[key]){_412.inherited[key]=_414[key];}}}return _412.inherited;};while(true){if(!node){if(!_40e||!_40e.node){break;}node=_40e.node.nextSibling;_40f=_40e.scripts;_410=false;_40e=_40e.parent;continue;}if(node.nodeType!=1){node=node.nextSibling;continue;}if(_40f&&node.nodeName.toLowerCase()=="script"){type=node.getAttribute("type");if(type&&/^dojo\/\w/i.test(type)){_40f.push(node);}node=node.nextSibling;continue;}if(_410){node=node.nextSibling;continue;}var type=node.getAttribute(_409)||node.getAttribute(_407);var _415=node.firstChild;if(!type&&(!_415||(_415.nodeType==3&&!_415.nextSibling))){node=node.nextSibling;continue;}var _416;var ctor=null;if(type){var _417=node.getAttribute(_40b),_418=_417?[type].concat(_417.split(/\s*,\s*/)):[type];try{ctor=_3d0(_418);}catch(e){}if(!ctor){_3c1.forEach(_418,function(t){if(~t.indexOf("/")&&!_406[t]){_406[t]=true;mids[mids.length]=t;}});}var _419=ctor&&!ctor.prototype._noScript?[]:null;_416={types:_418,ctor:ctor,parent:_40e,node:node,scripts:_419};_416.inherited=_411(_416);list.push(_416);}else{_416={node:node,scripts:_40f,parent:_40e};}node=_415;_40f=_419;_410=ctor&&ctor.prototype.stopParser&&!(_405.template);_40e=_416;}var d=new _3c9();if(mids.length){if(has("dojo-debug-messages")){console.warn("WARNING: Modules being Auto-Required: "+mids.join(", "));}require(mids,function(){d.resolve(_3c1.filter(list,function(_41a){if(!_41a.ctor){try{_41a.ctor=_3d0(_41a.types);}catch(e){}}var _41b=_41a.parent;while(_41b&&!_41b.types){_41b=_41b.parent;}var _41c=_41a.ctor&&_41a.ctor.prototype;_41a.instantiateChildren=!(_41c&&_41c.stopParser&&!(_405.template));_41a.instantiate=!_41b||(_41b.instantiate&&_41b.instantiateChildren);return _41a.instantiate;}));});}else{d.resolve(list);}return d.promise;},_require:function(_41d){var hash=_3c6.fromJson("{"+_41d.innerHTML+"}"),vars=[],mids=[],d=new _3c9();for(var name in hash){vars.push(name);mids.push(hash[name]);}require(mids,function(){for(var i=0;i<vars.length;i++){_3c0.setObject(vars[i],arguments[i]);}d.resolve(arguments);});return d.promise;},_scanAmd:function(root){var _41e=new _3c9(),_41f=_41e.promise;_41e.resolve(true);var self=this;_3ca("script[type='dojo/require']",root).forEach(function(node){_41f=_41f.then(function(){return self._require(node);});node.parentNode.removeChild(node);});return _41f;},parse:function(_420,_421){var root;if(!_421&&_420&&_420.rootNode){_421=_420;root=_421.rootNode;}else{if(_420&&_3c0.isObject(_420)&&!("nodeType" in _420)){_421=_420;}else{root=_420;}}root=root?_3c3.byId(root):_3c4.body();_421=_421||{};var _422=_421.template?{template:true}:{},_423=[],self=this;var p=this._scanAmd(root,_421).then(function(){return self.scan(root,_421);}).then(function(_424){return _423=_423.concat(self._instantiate(_424,_422,_421));}).otherwise(function(e){console.error("dojo/parser::parse() error",e);throw e;});_3c0.mixin(_423,p);return _423;}};if(1){dojo.parser=_3d3;}if(_3c2.parseOnLoad){_3cb(100,_3d3,"parse");}return _3d3;});},"url:dijit/form/templates/DropDownButton.html":"<span class=\"dijit dijitReset dijitInline\"\n\t><span class='dijitReset dijitInline dijitButtonNode'\n\t\tdata-dojo-attach-event=\"ondijitclick:_onClick\" data-dojo-attach-point=\"_buttonNode\"\n\t\t><span class=\"dijitReset dijitStretch dijitButtonContents\"\n\t\t\tdata-dojo-attach-point=\"focusNode,titleNode,_arrowWrapperNode\"\n\t\t\trole=\"button\" aria-haspopup=\"true\" aria-labelledby=\"${id}_label\"\n\t\t\t><span class=\"dijitReset dijitInline dijitIcon\"\n\t\t\t\tdata-dojo-attach-point=\"iconNode\"\n\t\t\t></span\n\t\t\t><span class=\"dijitReset dijitInline dijitButtonText\"\n\t\t\t\tdata-dojo-attach-point=\"containerNode,_popupStateNode\"\n\t\t\t\tid=\"${id}_label\"\n\t\t\t></span\n\t\t\t><span class=\"dijitReset dijitInline dijitArrowButtonInner\"></span\n\t\t\t><span class=\"dijitReset dijitInline dijitArrowButtonChar\">&#9660;</span\n\t\t></span\n\t></span\n\t><input ${!nameAttrSetting} type=\"${type}\" value=\"${value}\" class=\"dijitOffScreen\" tabIndex=\"-1\"\n\t\tdata-dojo-attach-point=\"valueNode\"\n/></span>\n","esri/symbol":function(){define(["dijit","dojo","dojox","dojo/require!dojo/_base/Color,dojox/gfx/_base,esri/utils"],function(_425,dojo,_426){dojo.provide("esri.symbol");dojo.require("dojo._base.Color");dojo.require("dojox.gfx._base");dojo.require("esri.utils");dojo.mixin(esri.symbol,{toDojoColor:function(clr){return clr&&new dojo.Color([clr[0],clr[1],clr[2],clr[3]/255]);},toJsonColor:function(clr){return clr&&[clr.r,clr.g,clr.b,Math.round(clr.a*255)];},fromJson:function(json){var type=json.type,_427=null;switch(type.substring(0,"esriXX".length)){case "esriSM":_427=new esri.symbol.SimpleMarkerSymbol(json);break;case "esriPM":_427=new esri.symbol.PictureMarkerSymbol(json);break;case "esriTS":_427=new esri.symbol.TextSymbol(json);break;case "esriSL":if(json.cap!==undefined){_427=new esri.symbol.CartographicLineSymbol(json);}else{_427=new esri.symbol.SimpleLineSymbol(json);}break;case "esriSF":_427=new esri.symbol.SimpleFillSymbol(json);break;case "esriPF":_427=new esri.symbol.PictureFillSymbol(json);break;}return _427;}});dojo.declare("esri.symbol.Symbol",null,{color:new dojo.Color([0,0,0,1]),type:null,_stroke:null,_fill:null,constructor:function(json){if(json&&dojo.isObject(json)){dojo.mixin(this,json);if(this.color&&esri._isDefined(this.color[0])){this.color=esri.symbol.toDojoColor(this.color);}var type=this.type;if(type&&type.indexOf("esri")===0){this.type={"esriSMS":"simplemarkersymbol","esriPMS":"picturemarkersymbol","esriSLS":"simplelinesymbol","esriCLS":"cartographiclinesymbol","esriSFS":"simplefillsymbol","esriPFS":"picturefillsymbol","esriTS":"textsymbol"}[type];}}},setColor:function(_428){this.color=_428;return this;},toJson:function(){return {color:esri.symbol.toJsonColor(this.color)};}});dojo.declare("esri.symbol.MarkerSymbol",esri.symbol.Symbol,{constructor:function(json){if(json&&dojo.isObject(json)){this.size=_426.gfx.pt2px(this.size);this.xoffset=_426.gfx.pt2px(this.xoffset);this.yoffset=_426.gfx.pt2px(this.yoffset);}},setAngle:function(_429){this.angle=_429;return this;},setSize:function(size){this.size=size;return this;},setOffset:function(x,y){this.xoffset=x;this.yoffset=y;return this;},toJson:function(){var size=_426.gfx.px2pt(this.size);size=isNaN(size)?undefined:size;var xoff=_426.gfx.px2pt(this.xoffset);xoff=isNaN(xoff)?undefined:xoff;var yoff=_426.gfx.px2pt(this.yoffset);yoff=isNaN(yoff)?undefined:yoff;return dojo.mixin(this.inherited("toJson",arguments),{size:size,angle:this.angle,xoffset:xoff,yoffset:yoff});},angle:0,xoffset:0,yoffset:0,size:12});dojo.declare("esri.symbol.SimpleMarkerSymbol",esri.symbol.MarkerSymbol,{constructor:function(json,size,_42a,_42b){if(json){if(dojo.isString(json)){this.style=json;if(size){this.size=size;}if(_42a){this.outline=_42a;}if(_42b){this.color=_42b;}}else{this.style=esri.valueOf(this._styles,this.style);if(json.outline){this.outline=new esri.symbol.SimpleLineSymbol(json.outline);}}}else{dojo.mixin(this,esri.symbol.defaultSimpleMarkerSymbol);this.size=_426.gfx.pt2px(this.size);this.outline=new esri.symbol.SimpleLineSymbol(this.outline);this.color=new dojo.Color(this.color);}if(!this.style){this.style=esri.symbol.SimpleMarkerSymbol.STYLE_CIRCLE;}},type:"simplemarkersymbol",setStyle:function(_42c){this.style=_42c;return this;},setOutline:function(_42d){this.outline=_42d;return this;},getStroke:function(){return this.outline&&this.outline.getStroke();},getFill:function(){return this.color;},_setDim:function(_42e,_42f,_430){this._targetWidth=_42e;this._targetHeight=_42f;this._spikeSize=_430;},toJson:function(){var json=dojo.mixin(this.inherited("toJson",arguments),{type:"esriSMS",style:this._styles[this.style]}),_431=this.outline;if(_431){json.outline=_431.toJson();}return esri._sanitize(json);},_styles:{circle:"esriSMSCircle",square:"esriSMSSquare",cross:"esriSMSCross",x:"esriSMSX",diamond:"esriSMSDiamond"}});dojo.mixin(esri.symbol.SimpleMarkerSymbol,{STYLE_CIRCLE:"circle",STYLE_SQUARE:"square",STYLE_CROSS:"cross",STYLE_X:"x",STYLE_DIAMOND:"diamond",STYLE_TARGET:"target"});dojo.declare("esri.symbol.PictureMarkerSymbol",esri.symbol.MarkerSymbol,{constructor:function(json,_432,_433){if(json){if(dojo.isString(json)){this.url=json;if(_432){this.width=_432;}if(_433){this.height=_433;}}else{this.width=_426.gfx.pt2px(json.width);this.height=_426.gfx.pt2px(json.height);var _434=json.imageData;if((!(dojo.isIE<9))&&_434){var temp=this.url;this.url="data:"+(json.contentType||"image")+";base64,"+_434;this.imageData=temp;}}}else{dojo.mixin(this,esri.symbol.defaultPictureMarkerSymbol);this.width=_426.gfx.pt2px(this.width);this.height=_426.gfx.pt2px(this.height);}},type:"picturemarkersymbol",getStroke:function(){return null;},getFill:function(){return null;},setWidth:function(_435){this.width=_435;return this;},setHeight:function(_436){this.height=_436;return this;},setUrl:function(url){if(url!==this.url){delete this.imageData;delete this.contentType;}this.url=url;return this;},toJson:function(){var url=this.url,_437=this.imageData;if(url.indexOf("data:")===0){var temp=url;url=_437;var _438=temp.indexOf(";base64,")+8;_437=temp.substr(_438);}url=esri._getAbsoluteUrl(url);var _439=_426.gfx.px2pt(this.width);_439=isNaN(_439)?undefined:_439;var _43a=_426.gfx.px2pt(this.height);_43a=isNaN(_43a)?undefined:_43a;var _43b=esri._sanitize(dojo.mixin(this.inherited("toJson",arguments),{type:"esriPMS",url:url,imageData:_437,contentType:this.contentType,width:_439,height:_43a}));delete _43b.color;delete _43b.size;if(!_43b.imageData){delete _43b.imageData;}return _43b;}});dojo.declare("esri.symbol.LineSymbol",esri.symbol.Symbol,{constructor:function(json){if(dojo.isObject(json)){this.width=_426.gfx.pt2px(this.width);}else{this.width=12;}},setWidth:function(_43c){this.width=_43c;return this;},toJson:function(){var _43d=_426.gfx.px2pt(this.width);_43d=isNaN(_43d)?undefined:_43d;return dojo.mixin(this.inherited("toJson",arguments),{width:_43d});}});dojo.declare("esri.symbol.SimpleLineSymbol",esri.symbol.LineSymbol,{constructor:function(json,_43e,_43f){if(json){if(dojo.isString(json)){this.style=json;if(_43e){this.color=_43e;}if(_43f){this.width=_43f;}}else{this.style=esri.valueOf(this._styles,json.style)||esri.symbol.SimpleLineSymbol.STYLE_SOLID;}}else{dojo.mixin(this,esri.symbol.defaultSimpleLineSymbol);this.color=new dojo.Color(this.color);this.width=_426.gfx.pt2px(this.width);}},type:"simplelinesymbol",setStyle:function(_440){this.style=_440;return this;},getStroke:function(){return (this.style===esri.symbol.SimpleLineSymbol.STYLE_NULL||this.width===0)?null:{color:this.color,style:this.style,width:this.width};},getFill:function(){return null;},toJson:function(){return esri._sanitize(dojo.mixin(this.inherited("toJson",arguments),{type:"esriSLS",style:this._styles[this.style]}));},_styles:{solid:"esriSLSSolid",dash:"esriSLSDash",dot:"esriSLSDot",dashdot:"esriSLSDashDot",longdashdotdot:"esriSLSDashDotDot",none:"esriSLSNull",insideframe:"esriSLSInsideFrame"}});dojo.mixin(esri.symbol.SimpleLineSymbol,{STYLE_SOLID:"solid",STYLE_DASH:"dash",STYLE_DOT:"dot",STYLE_DASHDOT:"dashdot",STYLE_DASHDOTDOT:"longdashdotdot",STYLE_NULL:"none"});dojo.declare("esri.symbol.CartographicLineSymbol",esri.symbol.SimpleLineSymbol,{constructor:function(json,_441,_442,cap,join,_443){if(json){if(dojo.isString(json)){this.style=json;if(_441){this.color=_441;}if(_442!==undefined){this.width=_442;}if(cap){this.cap=cap;}if(join){this.join=join;}if(_443!==undefined){this.miterLimit=_443;}}else{this.cap=esri.valueOf(this._caps,json.cap);this.join=esri.valueOf(this._joins,json.join);this.width=_426.gfx.pt2px(json.width);this.miterLimit=_426.gfx.pt2px(json.miterLimit);}}else{dojo.mixin(this,esri.symbol.defaultCartographicLineSymbol);this.color=new dojo.Color(this.color);this.width=_426.gfx.pt2px(this.width);this.miterLimit=_426.gfx.pt2px(this.miterLimit);}},type:"cartographiclinesymbol",setCap:function(cap){this.cap=cap;return this;},setJoin:function(join){this.join=join;return this;},setMiterLimit:function(_444){this.miterLimit=_444;return this;},getStroke:function(){return dojo.mixin(this.inherited("getStroke",arguments),{cap:this.cap,join:(this.join===esri.symbol.CartographicLineSymbol.JOIN_MITER?this.miterLimit:this.join)});},getFill:function(){return null;},toJson:function(){var _445=_426.gfx.px2pt(this.miterLimit);_445=isNaN(_445)?undefined:_445;return esri._sanitize(dojo.mixin(this.inherited("toJson",arguments),{type:"esriCLS",cap:this._caps[this.cap],join:this._joins[this.join],miterLimit:_445}));},_caps:{butt:"esriLCSButt",round:"esriLCSRound",square:"esriLCSSquare"},_joins:{miter:"esriLJSMiter",round:"esriLJSRound",bevel:"esriLJSBevel"}});dojo.mixin(esri.symbol.CartographicLineSymbol,{STYLE_SOLID:"solid",STYLE_DASH:"dash",STYLE_DOT:"dot",STYLE_DASHDOT:"dashdot",STYLE_DASHDOTDOT:"longdashdotdot",STYLE_NULL:"none",STYLE_INSIDE_FRAME:"insideframe",CAP_BUTT:"butt",CAP_ROUND:"round",CAP_SQUARE:"square",JOIN_MITER:"miter",JOIN_ROUND:"round",JOIN_BEVEL:"bevel"});dojo.declare("esri.symbol.FillSymbol",esri.symbol.Symbol,{constructor:function(json){if(json&&dojo.isObject(json)&&json.outline){this.outline=new esri.symbol.SimpleLineSymbol(json.outline);}},setOutline:function(_446){this.outline=_446;return this;},toJson:function(){var json=this.inherited("toJson",arguments);if(this.outline){json.outline=this.outline.toJson();}return json;}});dojo.declare("esri.symbol.SimpleFillSymbol",esri.symbol.FillSymbol,{constructor:function(json,_447,_448){if(json){if(dojo.isString(json)){this.style=json;if(_447!==undefined){this.outline=_447;}if(_448!==undefined){this.color=_448;}}else{this.style=esri.valueOf(this._styles,json.style);}}else{dojo.mixin(this,esri.symbol.defaultSimpleFillSymbol);this.outline=new esri.symbol.SimpleLineSymbol(this.outline);this.color=new dojo.Color(this.color);}var _449=this.style;if(_449!=="solid"&&_449!=="none"){this._src=dojo.moduleUrl("esri")+"images/symbol/sfs/"+_449+".png";}},type:"simplefillsymbol",setStyle:function(_44a){this.style=_44a;return this;},getStroke:function(){return this.outline&&this.outline.getStroke();},getFill:function(){var _44b=this.style;if(_44b===esri.symbol.SimpleFillSymbol.STYLE_NULL){return null;}else{if(_44b===esri.symbol.SimpleFillSymbol.STYLE_SOLID){return this.color;}else{return dojo.mixin(dojo.mixin({},_426.gfx.defaultPattern),{src:this._src,width:10,height:10});}}},toJson:function(){return esri._sanitize(dojo.mixin(this.inherited("toJson",arguments),{type:"esriSFS",style:this._styles[this.style]}));},_styles:{solid:"esriSFSSolid",none:"esriSFSNull",horizontal:"esriSFSHorizontal",vertical:"esriSFSVertical",forwarddiagonal:"esriSFSForwardDiagonal",backwarddiagonal:"esriSFSBackwardDiagonal",cross:"esriSFSCross",diagonalcross:"esriSFSDiagonalCross"}});dojo.mixin(esri.symbol.SimpleFillSymbol,{STYLE_SOLID:"solid",STYLE_NULL:"none",STYLE_HORIZONTAL:"horizontal",STYLE_VERTICAL:"vertical",STYLE_FORWARD_DIAGONAL:"forwarddiagonal",STYLE_BACKWARD_DIAGONAL:"backwarddiagonal",STYLE_CROSS:"cross",STYLE_DIAGONAL_CROSS:"diagonalcross",STYLE_FORWARDDIAGONAL:"forwarddiagonal",STYLE_BACKWARDDIAGONAL:"backwarddiagonal",STYLE_DIAGONALCROSS:"diagonalcross"});dojo.declare("esri.symbol.PictureFillSymbol",esri.symbol.FillSymbol,{constructor:function(json,_44c,_44d,_44e){if(json){if(dojo.isString(json)){this.url=json;if(_44c!==undefined){this.outline=_44c;}if(_44d!==undefined){this.width=_44d;}if(_44e!==undefined){this.height=_44e;}}else{this.xoffset=_426.gfx.pt2px(json.xoffset);this.yoffset=_426.gfx.pt2px(json.yoffset);this.width=_426.gfx.pt2px(json.width);this.height=_426.gfx.pt2px(json.height);var _44f=json.imageData;if((!(dojo.isIE<9))&&_44f){var temp=this.url;this.url="data:"+(json.contentType||"image")+";base64,"+_44f;this.imageData=temp;}}}else{dojo.mixin(this,esri.symbol.defaultPictureFillSymbol);this.width=_426.gfx.pt2px(this.width);this.height=_426.gfx.pt2px(this.height);}},type:"picturefillsymbol",xscale:1,yscale:1,xoffset:0,yoffset:0,setWidth:function(_450){this.width=_450;return this;},setHeight:function(_451){this.height=_451;return this;},setOffset:function(x,y){this.xoffset=x;this.yoffset=y;return this;},setUrl:function(url){if(url!==this.url){delete this.imageData;delete this.contentType;}this.url=url;return this;},setXScale:function(_452){this.xscale=_452;return this;},setYScale:function(_453){this.yscale=_453;return this;},getStroke:function(){return this.outline&&this.outline.getStroke();},getFill:function(){return dojo.mixin({},_426.gfx.defaultPattern,{src:this.url,width:(this.width*this.xscale),height:(this.height*this.yscale),x:this.xoffset,y:this.yoffset});},toJson:function(){var url=this.url,_454=this.imageData;if(url.indexOf("data:")===0){var temp=url;url=_454;var _455=temp.indexOf(";base64,")+8;_454=temp.substr(_455);}url=esri._getAbsoluteUrl(url);var _456=_426.gfx.px2pt(this.width);_456=isNaN(_456)?undefined:_456;var _457=_426.gfx.px2pt(this.height);_457=isNaN(_457)?undefined:_457;var xoff=_426.gfx.px2pt(this.xoffset);xoff=isNaN(xoff)?undefined:xoff;var yoff=_426.gfx.px2pt(this.yoffset);yoff=isNaN(yoff)?undefined:yoff;var json=esri._sanitize(dojo.mixin(this.inherited("toJson",arguments),{type:"esriPFS",url:url,imageData:_454,contentType:this.contentType,width:_456,height:_457,xoffset:xoff,yoffset:yoff,xscale:this.xscale,yscale:this.yscale}));if(!json.imageData){delete json.imageData;}return json;}});dojo.declare("esri.symbol.Font",null,{constructor:function(json,_458,_459,_45a,_45b){if(json){if(dojo.isObject(json)){dojo.mixin(this,json);}else{this.size=json;if(_458!==undefined){this.style=_458;}if(_459!==undefined){this.variant=_459;}if(_45a!==undefined){this.weight=_45a;}if(_45b!==undefined){this.family=_45b;}}}else{dojo.mixin(this,_426.gfx.defaultFont);}if(dojo.isIE<9&&this.size&&dojo.isString(this.size)&&this.size.indexOf("em")>-1){this.size=_426.gfx.pt2px(parseFloat(this.size)*12)+"px";}},setSize:function(size){this.size=size;return this;},setStyle:function(_45c){this.style=_45c;return this;},setVariant:function(_45d){this.variant=_45d;return this;},setWeight:function(_45e){this.weight=_45e;return this;},setFamily:function(_45f){this.family=_45f;return this;},toJson:function(){return esri._sanitize({size:this.size,style:this.style,variant:this.variant,decoration:this.decoration,weight:this.weight,family:this.family});}});dojo.mixin(esri.symbol.Font,{STYLE_NORMAL:"normal",STYLE_ITALIC:"italic",STYLE_OBLIQUE:"oblique",VARIANT_NORMAL:"normal",VARIANT_SMALLCAPS:"small-caps",WEIGHT_NORMAL:"normal",WEIGHT_BOLD:"bold",WEIGHT_BOLDER:"bolder",WEIGHT_LIGHTER:"lighter"});dojo.declare("esri.symbol.TextSymbol",esri.symbol.Symbol,{constructor:function(json,font,_460){dojo.mixin(this,esri.symbol.defaultTextSymbol);this.font=new esri.symbol.Font(this.font);this.color=new dojo.Color(this.color);if(json){if(dojo.isObject(json)){dojo.mixin(this,json);if(this.color&&esri._isDefined(this.color[0])){this.color=esri.symbol.toDojoColor(this.color);}this.type="textsymbol";this.font=new esri.symbol.Font(this.font);this.xoffset=_426.gfx.pt2px(this.xoffset);this.yoffset=_426.gfx.pt2px(this.yoffset);}else{this.text=json;if(font){this.font=font;}if(_460){this.color=_460;}}}},angle:0,xoffset:0,yoffset:0,setFont:function(font){this.font=font;return this;},setAngle:function(_461){this.angle=_461;return this;},setOffset:function(x,y){this.xoffset=x;this.yoffset=y;return this;},setAlign:function(_462){this.align=_462;return this;},setDecoration:function(_463){this.decoration=_463;return this;},setRotated:function(_464){this.rotated=_464;return this;},setKerning:function(_465){this.kerning=_465;return this;},setText:function(text){this.text=text;return this;},getStroke:function(){return null;},getFill:function(){return this.color;},toJson:function(){var xoff=_426.gfx.px2pt(this.xoffset);xoff=isNaN(xoff)?undefined:xoff;var yoff=_426.gfx.px2pt(this.yoffset);yoff=isNaN(yoff)?undefined:yoff;return esri._sanitize(dojo.mixin(this.inherited("toJson",arguments),{type:"esriTS",backgroundColor:this.backgroundColor,borderLineColor:this.borderLineColor,verticalAlignment:this.verticalAlignment,horizontalAlignment:this.horizontalAlignment,rightToLeft:this.rightToLeft,width:this.width,angle:this.angle,xoffset:xoff,yoffset:yoff,text:this.text,align:this.align,decoration:this.decoration,rotated:this.rotated,kerning:this.kerning,font:this.font.toJson()}));}});dojo.mixin(esri.symbol.TextSymbol,{ALIGN_START:"start",ALIGN_MIDDLE:"middle",ALIGN_END:"end",DECORATION_NONE:"none",DECORATION_UNDERLINE:"underline",DECORATION_OVERLINE:"overline",DECORATION_LINETHROUGH:"line-through"});dojo.mixin(esri.symbol,{defaultSimpleLineSymbol:{color:[0,0,0,1],style:esri.symbol.SimpleLineSymbol.STYLE_SOLID,width:1},defaultSimpleMarkerSymbol:{style:esri.symbol.SimpleMarkerSymbol.STYLE_CIRCLE,color:[255,255,255,0.25],outline:esri.symbol.defaultSimpleLineSymbol,size:12,angle:0,xoffset:0,yoffset:0},defaultPictureMarkerSymbol:{url:"",width:12,height:12,angle:0,xoffset:0,yoffset:0},defaultCartographicLineSymbol:{color:[0,0,0,1],style:esri.symbol.CartographicLineSymbol.STYLE_SOLID,width:1,cap:esri.symbol.CartographicLineSymbol.CAP_BUTT,join:esri.symbol.CartographicLineSymbol.JOIN_MITER,miterLimit:10},defaultSimpleFillSymbol:{style:esri.symbol.SimpleFillSymbol.STYLE_SOLID,color:[0,0,0,0.25],outline:esri.symbol.defaultSimpleLineSymbol},defaultPictureFillSymbol:{xoffset:0,yoffset:0,width:12,height:12},defaultTextSymbol:{color:[0,0,0,1],font:_426.gfx.defaultFont,angle:0,xoffset:0,yoffset:0},getShapeDescriptors:function(_466){var _467,fill,_468;var type=_466.type;switch(type){case "simplemarkersymbol":var _469=_466.style,SMS=esri.symbol.SimpleMarkerSymbol;var size=_466.size||_426.gfx.pt2px(esri.symbol.defaultSimpleMarkerSymbol.size),cx=0,cy=0,half=size/2;var left=cx-half,_46a=cx+half,top=cy-half,_46b=cy+half;switch(_469){case SMS.STYLE_CIRCLE:_467={type:"circle",cx:cx,cy:cy,r:half};fill=_466.getFill();_468=_466.getStroke();if(_468){_468.style=_468.style||"Solid";}break;case SMS.STYLE_CROSS:_467={type:"path",path:"M "+left+",0 L "+_46a+",0 M 0,"+top+" L 0,"+_46b+" E"};fill=null;_468=_466.getStroke();break;case SMS.STYLE_DIAMOND:_467={type:"path",path:"M "+left+",0 L 0,"+top+" L "+_46a+",0 L 0,"+_46b+" L "+left+",0 E"};fill=_466.getFill();_468=_466.getStroke();break;case SMS.STYLE_SQUARE:_467={type:"path",path:"M "+left+","+_46b+" L "+left+","+top+" L "+_46a+","+top+" L "+_46a+","+_46b+" L "+left+","+_46b+" E"};fill=_466.getFill();_468=_466.getStroke();break;case SMS.STYLE_X:_467={type:"path",path:"M "+left+","+_46b+" L "+_46a+","+top+" M "+left+","+top+" L "+_46a+","+_46b+" E"};fill=null;_468=_466.getStroke();break;}break;case "picturemarkersymbol":_467={type:"image",x:0,y:0,width:16,height:16,src:""};_467.x=_467.x-Math.round(_466.width/2);_467.y=_467.y-Math.round(_466.height/2);_467.width=_466.width;_467.height=_466.height;_467.src=_466.url;break;case "simplelinesymbol":case "cartographiclinesymbol":_467={type:"path",path:"M -15,0 L 15,0 E"};fill=null;_468=_466.getStroke();break;case "simplefillsymbol":case "picturefillsymbol":_467={type:"path",path:"M -10,-10 L 10,0 L 10,10 L -10,10 L -10,-10 E"};fill=_466.getFill();_468=_466.getStroke();break;}return {defaultShape:_467,fill:fill,stroke:_468};}});dojo.mixin(esri.symbol.defaultTextSymbol,_426.gfx.defaultText,{type:"textsymbol",align:"middle"});});},"dijit/form/ToggleButton":function(){define("dijit/form/ToggleButton",["dojo/_base/declare","dojo/_base/kernel","./Button","./_ToggleButtonMixin"],function(_46c,_46d,_46e,_46f){return _46c("dijit.form.ToggleButton",[_46e,_46f],{baseClass:"dijitToggleButton",setChecked:function(_470){_46d.deprecated("setChecked("+_470+") is deprecated. Use set('checked',"+_470+") instead.","","2.0");this.set("checked",_470);}});});},"dojo/date/stamp":function(){define(["../_base/lang","../_base/array"],function(lang,_471){var _472={};lang.setObject("dojo.date.stamp",_472);_472.fromISOString=function(_473,_474){if(!_472._isoRegExp){_472._isoRegExp=/^(?:(\d{4})(?:-(\d{2})(?:-(\d{2}))?)?)?(?:T(\d{2}):(\d{2})(?::(\d{2})(.\d+)?)?((?:[+-](\d{2}):(\d{2}))|Z)?)?$/;}var _475=_472._isoRegExp.exec(_473),_476=null;if(_475){_475.shift();if(_475[1]){_475[1]--;}if(_475[6]){_475[6]*=1000;}if(_474){_474=new Date(_474);_471.forEach(_471.map(["FullYear","Month","Date","Hours","Minutes","Seconds","Milliseconds"],function(prop){return _474["get"+prop]();}),function(_477,_478){_475[_478]=_475[_478]||_477;});}_476=new Date(_475[0]||1970,_475[1]||0,_475[2]||1,_475[3]||0,_475[4]||0,_475[5]||0,_475[6]||0);if(_475[0]<100){_476.setFullYear(_475[0]||1970);}var _479=0,_47a=_475[7]&&_475[7].charAt(0);if(_47a!="Z"){_479=((_475[8]||0)*60)+(Number(_475[9])||0);if(_47a!="-"){_479*=-1;}}if(_47a){_479-=_476.getTimezoneOffset();}if(_479){_476.setTime(_476.getTime()+_479*60000);}}return _476;};_472.toISOString=function(_47b,_47c){var _47d=function(n){return (n<10)?"0"+n:n;};_47c=_47c||{};var _47e=[],_47f=_47c.zulu?"getUTC":"get",date="";if(_47c.selector!="time"){var year=_47b[_47f+"FullYear"]();date=["0000".substr((year+"").length)+year,_47d(_47b[_47f+"Month"]()+1),_47d(_47b[_47f+"Date"]())].join("-");}_47e.push(date);if(_47c.selector!="date"){var time=[_47d(_47b[_47f+"Hours"]()),_47d(_47b[_47f+"Minutes"]()),_47d(_47b[_47f+"Seconds"]())].join(":");var _480=_47b[_47f+"Milliseconds"]();if(_47c.milliseconds){time+="."+(_480<100?"0":"")+_47d(_480);}if(_47c.zulu){time+="Z";}else{if(_47c.selector!="time"){var _481=_47b.getTimezoneOffset();var _482=Math.abs(_481);time+=(_481>0?"-":"+")+_47d(Math.floor(_482/60))+":"+_47d(_482%60);}}_47e.push(time);}return _47e.join("T");};return _472;});},"dojox/gfx/_base":function(){define("dojox/gfx/_base",["dojo/_base/kernel","dojo/_base/lang","dojo/_base/Color","dojo/_base/sniff","dojo/_base/window","dojo/_base/array","dojo/dom","dojo/dom-construct","dojo/dom-geometry"],function(_483,lang,_484,has,win,arr,dom,_485,_486){var g=lang.getObject("dojox.gfx",true),b=g._base={};g._hasClass=function(node,_487){var cls=node.getAttribute("className");return cls&&(" "+cls+" ").indexOf(" "+_487+" ")>=0;};g._addClass=function(node,_488){var cls=node.getAttribute("className")||"";if(!cls||(" "+cls+" ").indexOf(" "+_488+" ")<0){node.setAttribute("className",cls+(cls?" ":"")+_488);}};g._removeClass=function(node,_489){var cls=node.getAttribute("className");if(cls){node.setAttribute("className",cls.replace(new RegExp("(^|\\s+)"+_489+"(\\s+|$)"),"$1$2"));}};b._getFontMeasurements=function(){var _48a={"1em":0,"1ex":0,"100%":0,"12pt":0,"16px":0,"xx-small":0,"x-small":0,"small":0,"medium":0,"large":0,"x-large":0,"xx-large":0};var p;if(has("ie")){win.doc.documentElement.style.fontSize="100%";}var div=_485.create("div",{style:{position:"absolute",left:"0",top:"-100px",width:"30px",height:"1000em",borderWidth:"0",margin:"0",padding:"0",outline:"none",lineHeight:"1",overflow:"hidden"}},win.body());for(p in _48a){div.style.fontSize=p;_48a[p]=Math.round(div.offsetHeight*12/16)*16/12/1000;}win.body().removeChild(div);return _48a;};var _48b=null;b._getCachedFontMeasurements=function(_48c){if(_48c||!_48b){_48b=b._getFontMeasurements();}return _48b;};var _48d=null,_48e={};b._getTextBox=function(text,_48f,_490){var m,s,al=arguments.length;var i;if(!_48d){_48d=_485.create("div",{style:{position:"absolute",top:"-10000px",left:"0"}},win.body());}m=_48d;m.className="";s=m.style;s.borderWidth="0";s.margin="0";s.padding="0";s.outline="0";if(al>1&&_48f){for(i in _48f){if(i in _48e){continue;}s[i]=_48f[i];}}if(al>2&&_490){m.className=_490;}m.innerHTML=text;if(m["getBoundingClientRect"]){var bcr=m.getBoundingClientRect();return {l:bcr.left,t:bcr.top,w:bcr.width||(bcr.right-bcr.left),h:bcr.height||(bcr.bottom-bcr.top)};}else{return _486.getMarginBox(m);}};var _491=0;b._getUniqueId=function(){var id;do{id=_483._scopeName+"xUnique"+(++_491);}while(dom.byId(id));return id;};lang.mixin(g,{defaultPath:{type:"path",path:""},defaultPolyline:{type:"polyline",points:[]},defaultRect:{type:"rect",x:0,y:0,width:100,height:100,r:0},defaultEllipse:{type:"ellipse",cx:0,cy:0,rx:200,ry:100},defaultCircle:{type:"circle",cx:0,cy:0,r:100},defaultLine:{type:"line",x1:0,y1:0,x2:100,y2:100},defaultImage:{type:"image",x:0,y:0,width:0,height:0,src:""},defaultText:{type:"text",x:0,y:0,text:"",align:"start",decoration:"none",rotated:false,kerning:true},defaultTextPath:{type:"textpath",text:"",align:"start",decoration:"none",rotated:false,kerning:true},defaultStroke:{type:"stroke",color:"black",style:"solid",width:1,cap:"butt",join:4},defaultLinearGradient:{type:"linear",x1:0,y1:0,x2:100,y2:100,colors:[{offset:0,color:"black"},{offset:1,color:"white"}]},defaultRadialGradient:{type:"radial",cx:0,cy:0,r:100,colors:[{offset:0,color:"black"},{offset:1,color:"white"}]},defaultPattern:{type:"pattern",x:0,y:0,width:0,height:0,src:""},defaultFont:{type:"font",style:"normal",variant:"normal",weight:"normal",size:"10pt",family:"serif"},getDefault:(function(){var _492={};return function(type){var t=_492[type];if(t){return new t();}t=_492[type]=new Function();t.prototype=g["default"+type];return new t();};})(),normalizeColor:function(_493){return (_493 instanceof _484)?_493:new _484(_493);},normalizeParameters:function(_494,_495){var x;if(_495){var _496={};for(x in _494){if(x in _495&&!(x in _496)){_494[x]=_495[x];}}}return _494;},makeParameters:function(_497,_498){var i=null;if(!_498){return lang.delegate(_497);}var _499={};for(i in _497){if(!(i in _499)){_499[i]=lang.clone((i in _498)?_498[i]:_497[i]);}}return _499;},formatNumber:function(x,_49a){var val=x.toString();if(val.indexOf("e")>=0){val=x.toFixed(4);}else{var _49b=val.indexOf(".");if(_49b>=0&&val.length-_49b>5){val=x.toFixed(4);}}if(x<0){return val;}return _49a?" "+val:val;},makeFontString:function(font){return font.style+" "+font.variant+" "+font.weight+" "+font.size+" "+font.family;},splitFontString:function(str){var font=g.getDefault("Font");var t=str.split(/\s+/);do{if(t.length<5){break;}font.style=t[0];font.variant=t[1];font.weight=t[2];var i=t[3].indexOf("/");font.size=i<0?t[3]:t[3].substring(0,i);var j=4;if(i<0){if(t[4]=="/"){j=6;}else{if(t[4].charAt(0)=="/"){j=5;}}}if(j<t.length){font.family=t.slice(j).join(" ");}}while(false);return font;},cm_in_pt:72/2.54,mm_in_pt:7.2/2.54,px_in_pt:function(){return g._base._getCachedFontMeasurements()["12pt"]/12;},pt2px:function(len){return len*g.px_in_pt();},px2pt:function(len){return len/g.px_in_pt();},normalizedLength:function(len){if(len.length===0){return 0;}if(len.length>2){var _49c=g.px_in_pt();var val=parseFloat(len);switch(len.slice(-2)){case "px":return val;case "pt":return val*_49c;case "in":return val*72*_49c;case "pc":return val*12*_49c;case "mm":return val*g.mm_in_pt*_49c;case "cm":return val*g.cm_in_pt*_49c;}}return parseFloat(len);},pathVmlRegExp:/([A-Za-z]+)|(\d+(\.\d+)?)|(\.\d+)|(-\d+(\.\d+)?)|(-\.\d+)/g,pathSvgRegExp:/([A-Za-z])|(\d+(\.\d+)?)|(\.\d+)|(-\d+(\.\d+)?)|(-\.\d+)/g,equalSources:function(a,b){return a&&b&&a===b;},switchTo:function(_49d){var ns=typeof _49d=="string"?g[_49d]:_49d;if(ns){arr.forEach(["Group","Rect","Ellipse","Circle","Line","Polyline","Image","Text","Path","TextPath","EsriPath","Surface","createSurface","fixTarget"],function(name){g[name]=ns[name];});}}});return g;});},"dojo/Stateful":function(){define(["./_base/declare","./_base/lang","./_base/array","dojo/when"],function(_49e,lang,_49f,when){return _49e("dojo.Stateful",null,{_attrPairNames:{},_getAttrNames:function(name){var apn=this._attrPairNames;if(apn[name]){return apn[name];}return (apn[name]={s:"_"+name+"Setter",g:"_"+name+"Getter"});},postscript:function(_4a0){if(_4a0){this.set(_4a0);}},_get:function(name,_4a1){return typeof this[_4a1.g]==="function"?this[_4a1.g]():this[name];},get:function(name){return this._get(name,this._getAttrNames(name));},set:function(name,_4a2){if(typeof name==="object"){for(var x in name){if(name.hasOwnProperty(x)&&x!="_watchCallbacks"){this.set(x,name[x]);}}return this;}var _4a3=this._getAttrNames(name),_4a4=this._get(name,_4a3),_4a5=this[_4a3.s],_4a6;if(typeof _4a5==="function"){_4a6=_4a5.apply(this,Array.prototype.slice.call(arguments,1));}else{this[name]=_4a2;}if(this._watchCallbacks){var self=this;when(_4a6,function(){self._watchCallbacks(name,_4a4,_4a2);});}return this;},_changeAttrValue:function(name,_4a7){var _4a8=this.get(name);this[name]=_4a7;if(this._watchCallbacks){this._watchCallbacks(name,_4a8,_4a7);}return this;},watch:function(name,_4a9){var _4aa=this._watchCallbacks;if(!_4aa){var self=this;_4aa=this._watchCallbacks=function(name,_4ab,_4ac,_4ad){var _4ae=function(_4af){if(_4af){_4af=_4af.slice();for(var i=0,l=_4af.length;i<l;i++){_4af[i].call(self,name,_4ab,_4ac);}}};_4ae(_4aa["_"+name]);if(!_4ad){_4ae(_4aa["*"]);}};}if(!_4a9&&typeof name==="function"){_4a9=name;name="*";}else{name="_"+name;}var _4b0=_4aa[name];if(typeof _4b0!=="object"){_4b0=_4aa[name]=[];}_4b0.push(_4a9);var _4b1={};_4b1.unwatch=_4b1.remove=function(){var _4b2=_49f.indexOf(_4b0,_4a9);if(_4b2>-1){_4b0.splice(_4b2,1);}};return _4b1;}});});},"esri/IdentityManagerBase":function(){define(["dijit","dojo","dojox","dojo/require!dojo/cookie,esri/utils"],function(_4b3,dojo,_4b4){dojo.provide("esri.IdentityManagerBase");dojo.require("dojo.cookie");dojo.require("esri.utils");(function(){var _4b5={};var _4b6=function(_4b7,_4b8){var _4b9=new dojo._Url(_4b7).host,_4ba=new dojo._Url(_4b8.server).host,_4bb=/.+\.arcgis\.com$/i;return (_4bb.test(_4b9)&&_4bb.test(_4ba));};dojo.declare("esri.IdentityManagerBase",null,{constructor:function(){this._portalConfig=dojo.getObject("esriGeowConfig");this.serverInfos=[];this.credentials=[];this._soReqs=[];this._xoReqs=[];this._portals=[];},tokenValidity:60,signInPage:null,_busy:null,_gwTokenUrl:"/sharing/generateToken",_agsRest:"/rest/services",_agsAdmin:/https?:\/\/[^\/]+\/[^\/]+\/admin\/?(\/.*)?$/i,_agolSuffix:".arcgis.com",_gwDomains:[{regex:/https?:\/\/www\.arcgis\.com/i,tokenServiceUrl:"https://www.arcgis.com/sharing/generateToken"},{regex:/https?:\/\/dev\.arcgis\.com/i,tokenServiceUrl:"https://dev.arcgis.com/sharing/generateToken"},{regex:/https?:\/\/.*dev[^.]*\.arcgis\.com/i,tokenServiceUrl:"https://devext.arcgis.com/sharing/generateToken"},{regex:/https?:\/\/.*qa[^.]*\.arcgis\.com/i,tokenServiceUrl:"https://qaext.arcgis.com/sharing/generateToken"},{regex:/https?:\/\/.*.arcgis\.com/i,tokenServiceUrl:"https://www.arcgis.com/sharing/generateToken"}],_regexSDirUrl:/http.+\/rest\/services\/?/ig,_regexServerType:/(\/(MapServer|GeocodeServer|GPServer|GeometryServer|ImageServer|NAServer|FeatureServer|GeoDataServer|GlobeServer|MobileServer)).*/ig,_gwUser:/http.+\/users\/([^\/]+)\/?.*/i,_gwItem:/http.+\/items\/([^\/]+)\/?.*/i,_gwGroup:/http.+\/groups\/([^\/]+)\/?.*/i,_errorCodes:[499,498,403,401],_publicUrls:[/\/arcgis\/tokens/i,/\/sharing\/generatetoken/i,/\/rest\/info/i],registerServers:function(_4bc){var _4bd=this.serverInfos;if(_4bd){_4bc=dojo.filter(_4bc,function(info){return !this.findServerInfo(info.server);},this);this.serverInfos=_4bd.concat(_4bc);}else{this.serverInfos=_4bc;}dojo.forEach(_4bc,function(info){if(info.owningSystemUrl){this._portals.push(info.owningSystemUrl);}},this);},toJson:function(){return esri._sanitize({"serverInfos":dojo.map(this.serverInfos,function(_4be){return _4be.toJson();}),"credentials":dojo.map(this.credentials,function(crd){return crd.toJson();})});},initialize:function(json){if(!json){return;}if(dojo.isString(json)){json=dojo.fromJson(json);}var _4bf=json.serverInfos,_4c0=json.credentials;if(_4bf){var _4c1=[];dojo.forEach(_4bf,function(_4c2){if(_4c2.server&&_4c2.tokenServiceUrl){_4c1.push(_4c2.declaredClass?_4c2:new esri.ServerInfo(_4c2));}});if(_4c1.length){this.registerServers(_4c1);}}if(_4c0){dojo.forEach(_4c0,function(crd){if(crd.userId&&crd.server&&crd.token&&crd.expires&&(crd.expires>(new Date()).getTime())){crd=crd.declaredClass?crd:new esri.Credential(crd);crd.onTokenChange();this.credentials.push(crd);}},this);}},findServerInfo:function(_4c3){var _4c4;_4c3=this._sanitizeUrl(_4c3);dojo.some(this.serverInfos,function(info){if(esri._hasSameOrigin(info.server,_4c3,true)){_4c4=info;}return !!_4c4;});return _4c4;},findCredential:function(_4c5,_4c6){var _4c7;_4c5=this._sanitizeUrl(_4c5);if(_4c6){dojo.some(this.credentials,function(crd){if(esri._hasSameOrigin(_4c5,crd.server,true)&&_4c6===crd.userId){_4c7=crd;}return !!_4c7;},this);}else{dojo.some(this.credentials,function(crd){if(esri._hasSameOrigin(_4c5,crd.server,true)&&this._getIdenticalSvcIdx(_4c5,crd)!==-1){_4c7=crd;}return !!_4c7;},this);}return _4c7;},getCredential:function(_4c8,_4c9){var _4ca,_4cb;if(esri._isDefined(_4c9)){if(dojo.isObject(_4c9)){_4ca=!!_4c9.token;_4cb=_4c9.error;}else{_4ca=_4c9;}}_4c8=this._sanitizeUrl(_4c8);var dfd=new dojo.Deferred(esri._dfdCanceller),err,_4cc=this._isAdminResource(_4c8),_4cd=(_4ca&&this._doPortalSignIn(_4c8))?dojo.cookie("esri_auth"):null;if(_4cd){_4cd=dojo.fromJson(_4cd);err=new Error("You are currently signed in as: '"+_4cd.email+"'. You do not have access to this resource: "+_4c8);err.code="IdentityManagerBase."+1;err.messageCode=_4cb?_4cb.messageCode:null;err.subcode=_4cb?_4cb.subcode:null;err.log=dojo.config.isDebug;dfd.errback(err);return dfd;}var _4ce=this._findCredential(_4c8,_4c9);if(_4ce){dfd.callback(_4ce);return dfd;}var _4cf=this.findServerInfo(_4c8);if(!_4cf){var _4d0=this._getTokenSvcUrl(_4c8);if(!_4d0){err=new Error("Unknown resource - could not find token service endpoint.");err.code="IdentityManagerBase."+2;err.log=dojo.config.isDebug;dfd.errback(err);return dfd;}_4cf=new esri.ServerInfo();_4cf.server=this._getOrigin(_4c8);if(dojo.isString(_4d0)){_4cf.tokenServiceUrl=_4d0;}else{_4cf._restInfoDfd=_4d0;}this.registerServers([_4cf]);}return this._enqueue(_4c8,_4cf,_4c9,dfd,_4cc);},getResourceName:function(_4d1){if(this._isRESTService(_4d1)){return _4d1.replace(this._regexSDirUrl,"").replace(this._regexServerType,"")||"";}else{return (this._gwUser.test(_4d1)&&_4d1.replace(this._gwUser,"$1"))||(this._gwItem.test(_4d1)&&_4d1.replace(this._gwItem,"$1"))||(this._gwGroup.test(_4d1)&&_4d1.replace(this._gwGroup,"$1"))||"";}},generateToken:function(_4d2,_4d3,_4d4){var _4d5,_4d6,_4d7;if(_4d4){_4d5=_4d4.isAdmin;_4d6=_4d4.serverUrl;_4d7=_4d4.token;}var _4d8=esri.request({url:_4d5?_4d2.adminTokenServiceUrl:_4d2.tokenServiceUrl,content:{request:"getToken",username:_4d3&&_4d3.username,password:_4d3&&_4d3.password,serverUrl:_4d6,token:_4d7,expiration:esri.id.tokenValidity,referer:(_4d5||_4d2.tokenServiceUrl.toLowerCase().indexOf("/sharing/generatetoken")!==-1)?window.location.host:null,client:_4d5?"referer":null,f:"json"},handleAs:"json"},{usePost:true,disableIdentityLookup:true,useProxy:this._useProxy(_4d2,_4d4)});_4d8.addCallback(function(_4d9){if(!_4d9||!_4d9.token){var err=new Error("Unable to generate token");err.code="IdentityManagerBase."+3;err.log=dojo.config.isDebug;return err;}var _4da=_4d2.server;if(!_4b5[_4da]){_4b5[_4da]={};}if(_4d3){_4b5[_4da][_4d3.username]=_4d3.password;}return _4d9;});_4d8.addErrback(function(_4db){});return _4d8;},isBusy:function(){return !!this._busy;},setRedirectionHandler:function(_4dc){this._redirectFunc=_4dc;},setProtocolErrorHandler:function(_4dd){this._protocolFunc=_4dd;},signIn:function(){},_findCredential:function(_4de,_4df){var idx=-1,cred,_4e0,_4e1,_4e2,_4e3=_4df&&_4df.token,_4e4=_4df&&_4df.resource,_4e5=dojo.filter(this.credentials,function(crd){return esri._hasSameOrigin(crd.server,_4de,true);});_4de=_4e4||_4de;if(_4e5.length){if(_4e5.length===1){cred=_4e5[0];_4e2=this.findServerInfo(cred.server);_4e0=_4e2&&_4e2.owningSystemUrl;_4e1=_4e0&&!_4b6(_4e0,_4e2)&&this.findCredential(_4e0,cred.userId);idx=this._getIdenticalSvcIdx(_4de,cred);if(_4e3){if(idx!==-1){cred.resources.splice(idx,1);this._removeResource(_4de,_4e1);}}else{if(idx===-1){cred.resources.push(_4de);}this._addResource(_4de,_4e1);return cred;}}else{var _4e6,i;dojo.some(_4e5,function(crd){i=this._getIdenticalSvcIdx(_4de,crd);if(i!==-1){_4e6=crd;_4e2=this.findServerInfo(_4e6.server);_4e0=_4e2&&_4e2.owningSystemUrl;_4e1=_4e0&&!_4b6(_4e0,_4e2)&&this.findCredential(_4e0,_4e6.userId);idx=i;return true;}return false;},this);if(_4e3){if(_4e6){_4e6.resources.splice(idx,1);this._removeResource(_4de,_4e1);}}else{if(_4e6){this._addResource(_4de,_4e1);return _4e6;}}}}},_addResource:function(_4e7,_4e8){if(_4e8){if(this._getIdenticalSvcIdx(_4e7,_4e8)===-1){_4e8.resources.push(_4e7);}}},_removeResource:function(_4e9,_4ea){var idx=-1;if(_4ea){idx=this._getIdenticalSvcIdx(_4e9,_4ea);if(idx>-1){_4ea.resources.splice(idx,1);}}},_useProxy:function(_4eb,_4ec){return (_4ec&&_4ec.isAdmin)||(!this._isPortalDomain(_4eb.tokenServiceUrl)&&_4eb.currentVersion==10.1&&!esri._hasSameOrigin(_4eb.tokenServiceUrl,window.location.href));},_getOrigin:function(_4ed){var uri=new dojo._Url(_4ed);return uri.scheme+"://"+uri.host+(esri._isDefined(uri.port)?(":"+uri.port):"");},_sanitizeUrl:function(url){url=dojo.trim(url);var _4ee=(esri.config.defaults.io.proxyUrl||"").toLowerCase(),mark=_4ee?url.toLowerCase().indexOf(_4ee+"?"):-1;if(mark!==-1){url=url.substring(mark+_4ee.length+1);}return esri.urlToObject(url).path;},_isRESTService:function(_4ef){return (_4ef.indexOf(this._agsRest)>-1);},_isAdminResource:function(_4f0){return this._agsAdmin.test(_4f0);},_isIdenticalService:function(_4f1,_4f2){var _4f3;if(this._isRESTService(_4f1)&&this._isRESTService(_4f2)){var _4f4=this._getSuffix(_4f1).toLowerCase(),_4f5=this._getSuffix(_4f2).toLowerCase();_4f3=(_4f4===_4f5);if(!_4f3){var _4f6=/(.*)\/(MapServer|FeatureServer).*/ig;_4f3=(_4f4.replace(_4f6,"$1")===_4f5.replace(_4f6,"$1"));}}else{if(this._isPortalDomain(_4f1)){_4f3=true;}else{if(this._isAdminResource(_4f1)&&this._isAdminResource(_4f2)){return true;}}}return _4f3;},_isPortalDomain:function(_4f7){_4f7=_4f7.toLowerCase();var _4f8=(new dojo._Url(_4f7)).authority,_4f9=this._portalConfig,_4fa=(_4f8.indexOf(this._agolSuffix)!==-1);if(!_4fa&&_4f9){_4fa=esri._hasSameOrigin(_4f9.restBaseUrl,_4f7,true);}if(!_4fa){if(!this._arcgisUrl){var _4fb=dojo.getObject("esri.arcgis.utils.arcgisUrl");if(_4fb){this._arcgisUrl=(new dojo._Url(_4fb)).authority;}}if(this._arcgisUrl){_4fa=(this._arcgisUrl.toLowerCase()===_4f8);}}if(!_4fa){_4fa=dojo.some(this._portals,function(_4fc){return esri._hasSameOrigin(_4fc,_4f7,true);});}return _4fa;},_isIdProvider:function(_4fd,_4fe){var i=-1,j=-1;dojo.forEach(this._gwDomains,function(_4ff,idx){if(i===-1&&_4ff.regex.test(_4fd)){i=idx;}if(j===-1&&_4ff.regex.test(_4fe)){j=idx;}});var _500=false;if(i>-1&&j>-1){if(i===0||i===4){if(j===0||j===4){_500=true;}}else{if(i===1){if(j===1||j===2){_500=true;}}else{if(i===2){if(j===2){_500=true;}}else{if(i===3){if(j===3){_500=true;}}}}}}if(!_500){var _501=this.findServerInfo(_4fe),_502=_501&&_501.owningSystemUrl;if(_502&&_4b6(_502,_501)&&this._isPortalDomain(_502)&&this._isIdProvider(_4fd,_502)){_500=true;}}return _500;},_isPublic:function(_503){_503=this._sanitizeUrl(_503);return dojo.some(this._publicUrls,function(_504){return _504.test(_503);});},_getIdenticalSvcIdx:function(_505,_506){var idx=-1;dojo.some(_506.resources,function(rsrc,i){if(this._isIdenticalService(_505,rsrc)){idx=i;return true;}return false;},this);return idx;},_getSuffix:function(_507){return _507.replace(this._regexSDirUrl,"").replace(this._regexServerType,"$1");},_getTokenSvcUrl:function(_508){var _509,dfd,_50a;if(this._isRESTService(_508)){_50a=_508.toLowerCase().indexOf(this._agsRest);_509=_508.substring(0,_50a)+"/admin/generateToken";_508=_508.substring(0,_50a+"/rest/".length)+"info";if(this._isPortalDomain(_508)){_508=_508.replace(/http:/i,"https:");}dfd=esri.request({url:_508,content:{f:"json"},handleAs:"json",callbackParamName:"callback"});dfd.adminUrl_=_509;return dfd;}else{if(this._isPortalDomain(_508)){var url="";dojo.some(this._gwDomains,function(_50b){if(_50b.regex.test(_508)){url=_50b.tokenServiceUrl;return true;}return false;});if(!url){var _50c=this._getOrigin(_508);url=_50c.replace(/http:/i,"https:")+this._gwTokenUrl;}return url;}else{if(_508.toLowerCase().indexOf("premium.arcgisonline.com")!==-1){return "https://premium.arcgisonline.com/server/tokens";}else{if(this._isAdminResource(_508)){_50a=_508.toLowerCase().indexOf("/admin/");_509=_508.substring(0,_50a+"/admin/".length)+"generateToken";_508=_508.substring(0,_50a)+"/rest/info";dfd=esri.request({url:_508,content:{f:"json"},handleAs:"json",callbackParamName:"callback"});dfd.adminUrl_=_509;return dfd;}}}}},_hasPortalSession:function(){return dojo.cookie.isSupported()?!!dojo.cookie("esri_auth"):false;},_doPortalSignIn:function(_50d){if(dojo.cookie.isSupported()){var _50e=dojo.cookie("esri_auth"),_50f=this._portalConfig,_510=window.location.href,_511=this.findServerInfo(_50d);if((_50f||this._isPortalDomain(_510)||_50e)&&(this._isPortalDomain(_50d)||(_511&&_511.owningSystemUrl&&this._isPortalDomain(_511.owningSystemUrl)))&&(this._isIdProvider(_510,_50d)||(_50f&&(esri._hasSameOrigin(_50f.restBaseUrl,_50d,true)||this._isIdProvider(_50f.restBaseUrl,_50d)))||esri._hasSameOrigin(_510,_50d,true))){return true;}}return false;},_checkProtocol:function(_512,_513,_514){var _515=true,_516=_513.tokenServiceUrl;if(dojo.trim(_516).toLowerCase().indexOf("https:")===0&&window.location.href.toLowerCase().indexOf("https:")!==0&&!esri._canDoXOXHR(_516)&&!esri._canDoXOXHR(esri._getProxyUrl(true).path)){_515=this._protocolFunc?!!this._protocolFunc({resourceUrl:_512,serverInfo:_513}):false;if(!_515){var err=new Error("Aborted the Sign-In process to avoid sending password over insecure connection.");err.code="IdentityManagerBase."+4;err.log=dojo.config.isDebug;console.log(err.message);_514(err);}}return _515;},_enqueue:function(_517,_518,_519,dfd,_51a){if(!dfd){dfd=new dojo.Deferred(esri._dfdCanceller);}dfd.resUrl_=_517;dfd.sinfo_=_518;dfd.options_=_519;dfd.admin_=_51a;if(this._busy){if(esri._hasSameOrigin(_517,this._busy.resUrl_,true)){this._soReqs.push(dfd);}else{this._xoReqs.push(dfd);}}else{this._doSignIn(dfd);}return dfd;},_doSignIn:function(dfd){this._busy=dfd;var self=this;var _51b=function(_51c){var _51d=dfd.options_&&dfd.options_.resource;if(!_51c.resources){_51c.resources=[];}_51c.resources.push(_51d||dfd.resUrl_);_51c.onTokenChange();if(dojo.indexOf(self.credentials,_51c)===-1){self.credentials.push(_51c);}var reqs=self._soReqs,_51e={};self._soReqs=[];dojo.forEach(reqs,function(_51f){if(!this._isIdenticalService(dfd.resUrl_,_51f.resUrl_)){var _520=this._getSuffix(_51f.resUrl_);if(!_51e[_520]){_51e[_520]=true;_51c.resources.push(_51f.resUrl_);}}},self);dfd.callback(_51c);dojo.forEach(reqs,function(_521){_521.callback(_51c);});self._busy=dfd.resUrl_=dfd.sinfo_=null;if(self._xoReqs.length){self._doSignIn(self._xoReqs.shift());}},_522=function(_523){dfd.errback(_523);self._busy=dfd.resUrl_=dfd.sinfo_=null;if(self._soReqs.length){self._doSignIn(self._soReqs.shift());}if(self._xoReqs.length){self._doSignIn(self._xoReqs.shift());}},_524=function(){if(self._doPortalSignIn(dfd.resUrl_)){var _525=dojo.cookie("esri_auth"),_526=self._portalConfig;if(_525){_525=dojo.fromJson(_525);_51b(new esri.Credential({userId:_525.email,server:dfd.sinfo_.server,token:_525.token,expires:null}));return;}else{var _527="",_528=window.location.href;if(self.signInPage){_527=self.signInPage;}else{if(_526){_527=_526.baseUrl+_526.signin;}else{if(self._isIdProvider(_528,dfd.resUrl_)){_527=self._getOrigin(_528)+"/home/signin.html";}else{_527=dfd.sinfo_.server+"/home/signin.html";}}}_527=_527.replace(/http:/i,"https:");if(_526&&_526.useSSL===false){_527=_527.replace(/https:/i,"http:");}if(_528.toLowerCase().replace("https","http").indexOf(_527.toLowerCase().replace("https","http"))===0){var err=new Error("Cannot redirect to Sign-In page from within Sign-In page. URL of the resource that triggered this workflow: "+dfd.resUrl_);err.code="IdentityManagerBase."+5;err.log=dojo.config.isDebug;_522(err);}else{if(self._redirectFunc){self._redirectFunc({signInPage:_527,returnUrlParamName:"returnUrl",returnUrl:_528,resourceUrl:dfd.resUrl_,serverInfo:dfd.sinfo_});}else{window.location=_527+"?returnUrl="+window.escape(_528);}}return;}}else{if(self._checkProtocol(dfd.resUrl_,dfd.sinfo_,_522)){var _529=dfd.options_;if(dfd.admin_){_529=_529||{};_529.isAdmin=true;}dfd._pendingDfd=self.signIn(dfd.resUrl_,dfd.sinfo_,_529).addCallbacks(_51b,_522);}}},_52a=function(){var _52b=dfd.sinfo_,_52c=_52b.owningSystemUrl,_52d=dfd.options_,_52e,_52f,_530;if(_52d){_52e=_52d.token;_52f=_52d.error;}_530=self._findCredential(_52c,{token:_52e,resource:dfd.resUrl_});if(_530){var _531=self.findCredential(dfd.resUrl_,_530.userId);if(_531){_51b(_531);return;}var _532=(dfd._pendingDfd=self.generateToken(self.findServerInfo(_530.server),null,{serverUrl:dfd.resUrl_,token:_530.token}));_532.addCallbacks(function(_533){_51b(new esri.Credential({userId:_530.userId,server:_52b.server,token:_533.token,expires:esri._isDefined(_533.expires)?Number(_533.expires):null,ssl:!!_533.ssl,isAdmin:dfd.admin_,validity:_52b.shortLivedTokenValidity}));},_522);}else{self._busy=null;if(_52e){dfd.options_.token=null;}var _534=(dfd._pendingDfd=self.getCredential(_52c,{resource:dfd.resUrl_,token:_52e,error:_52f}));_534.addCallbacks(function(_535){self._enqueue(dfd.resUrl_,dfd.sinfo_,dfd.options_,dfd,dfd.admin_);},function(_536){_522(_536);});}};var _537=dfd.sinfo_.tokenServiceUrl,_538=dfd.sinfo_.owningSystemUrl;if(_537){if(_538&&!_4b6(_538,dfd.sinfo_)){_52a();}else{_524();}}else{dfd.sinfo_._restInfoDfd.addCallbacks(function(_539){var _53a=dfd.sinfo_;_53a.adminTokenServiceUrl=_53a._restInfoDfd.adminUrl_;_53a._restInfoDfd=null;_53a.tokenServiceUrl=dojo.getObject("authInfo.tokenServicesUrl",false,_539)||dojo.getObject("authInfo.tokenServiceUrl",false,_539)||dojo.getObject("tokenServiceUrl",false,_539);_53a.shortLivedTokenValidity=dojo.getObject("authInfo.shortLivedTokenValidity",false,_539);_53a.currentVersion=_539.currentVersion;_53a.owningTenant=_539.owningTenant;var _53b=(_53a.owningSystemUrl=_539.owningSystemUrl);if(_53b){self._portals.push(_53b);if(_4b6(_53b,_53a)){var _53c=self.findCredential(_53b);if(!_53c){dojo.some(self.credentials,function(cred){if(this._isIdProvider(_53b,cred.server)){_53c=cred;}return !!_53c;},self);}if(_53c){_53c=_53c.toJson();_53c.resources=null;_53c.server=_53a.server;_51b(new esri.Credential(_53c));return;}_524();}else{_52a();}}else{_524();}},function(){dfd.sinfo_._restInfoDfd=null;var err=new Error("Unknown resource - could not find token service endpoint.");err.code="IdentityManagerBase."+2;err.log=dojo.config.isDebug;_522(err);});}}});dojo.declare("esri.ServerInfo",null,{constructor:function(json){dojo.mixin(this,json);},toJson:function(){return esri._sanitize({server:this.server,tokenServiceUrl:this.tokenServiceUrl,adminTokenServiceUrl:this.adminTokenServiceUrl,shortLivedTokenValidity:this.shortLivedTokenValidity,owningSystemUrl:this.owningSystemUrl,owningTenant:this.owningTenant,currentVersion:this.currentVersion});}});dojo.declare("esri.Credential",null,{tokenRefreshBuffer:2,constructor:function(json){dojo.mixin(this,json);this.resources=this.resources||[];if(!esri._isDefined(this.creationTime)){this.creationTime=(new Date()).getTime();}},refreshToken:function(){var self=this,_53d=esri.id.findServerInfo(this.server),_53e=_53d&&_53d.owningSystemUrl,_53f=_53e&&!_4b6(_53e,_53d),_540=this.resources&&this.resources[0],_541=_4b5[this.server],kpwd=_541&&_541[this.userId];if(!kpwd&&!_53f){var dfd;if(_540){_540=esri.id._sanitizeUrl(_540);this._enqueued=1;dfd=esri.id._enqueue(_540,_53d,null,null,this.isAdmin);dfd.addBoth(function(){self._enqueued=0;});}return dfd;}var _542,_543,_544;if(_53f){_543=esri.id.findServerInfo(_53e);_544=_543&&esri.id.findCredential(_543.server,self.userId);if(!_544){return;}_542={serverUrl:_540,token:_544&&_544.token};}else{if(self.isAdmin){_542={isAdmin:true};}}return esri.id.generateToken(_53f?_543:_53d,_53f?null:{username:self.userId,password:kpwd},_542).addCallback(function(_545){self.token=_545.token;self.expires=esri._isDefined(_545.expires)?Number(_545.expires):null;self.creationTime=(new Date()).getTime();self.onTokenChange();var _546=dojo.filter(esri.id.credentials,function(cred){var _547=esri.id.findServerInfo(cred.server),_53e=_547&&_547.owningSystemUrl;return (cred.userId===self.userId&&_53e&&!_4b6(_53e,_547)&&esri._hasSameOrigin(self.server,_53e,true))?true:false;});dojo.forEach(_546,function(_548){_548.refreshToken();});}).addErrback(function(){});},onTokenChange:function(){clearTimeout(this._refreshTimer);var _549=this.server&&esri.id.findServerInfo(this.server),_54a=_549&&_549.owningSystemUrl;if((!_54a||_4b6(_54a,_549))&&(esri._isDefined(this.expires)||esri._isDefined(this.validity))){this._startRefreshTimer();}},onDestroy:function(){},destroy:function(){this.userId=this.server=this.token=this.expires=this.validity=this.resources=this.creationTime=null;var _54b=dojo.indexOf(esri.id.credentials,this);if(_54b>-1){esri.id.credentials.splice(_54b,1);}this.onTokenChange();this.onDestroy();},toJson:function(){return this._toJson();},_toJson:function(){var json=esri._sanitize({userId:this.userId,server:this.server,token:this.token,expires:this.expires,validity:this.validity,ssl:this.ssl,isAdmin:this.isAdmin,creationTime:this.creationTime});var _54c=this.resources;if(_54c&&_54c.length>0){json.resources=_54c;}return json;},_startRefreshTimer:function(){clearTimeout(this._refreshTimer);var _54d=this.tokenRefreshBuffer*60000,_54e=this.validity?(this.creationTime+(this.validity*60000)):this.expires,_54f=(_54e-(new Date()).getTime());if(_54f<0){_54f=0;}this._refreshTimer=setTimeout(dojo.hitch(this,this.refreshToken),(_54f>_54d)?(_54f-_54d):_54f);}});}());});},"dojox/xml/parser":function(){define("dojox/xml/parser",["dojo/_base/kernel","dojo/_base/lang","dojo/_base/array","dojo/_base/window","dojo/_base/sniff"],function(dojo){dojo.getObject("xml.parser",true,dojox);dojox.xml.parser.parse=function(str,_550){var _551=dojo.doc;var doc;_550=_550||"text/xml";if(str&&dojo.trim(str)&&"DOMParser" in dojo.global){var _552=new DOMParser();doc=_552.parseFromString(str,_550);var de=doc.documentElement;var _553="http://www.mozilla.org/newlayout/xml/parsererror.xml";if(de.nodeName=="parsererror"&&de.namespaceURI==_553){var _554=de.getElementsByTagNameNS(_553,"sourcetext")[0];if(_554){_554=_554.firstChild.data;}throw new Error("Error parsing text "+de.firstChild.data+" \n"+_554);}return doc;}else{if("ActiveXObject" in dojo.global){var ms=function(n){return "MSXML"+n+".DOMDocument";};var dp=["Microsoft.XMLDOM",ms(6),ms(4),ms(3),ms(2)];dojo.some(dp,function(p){try{doc=new ActiveXObject(p);}catch(e){return false;}return true;});if(str&&doc){doc.async=false;doc.loadXML(str);var pe=doc.parseError;if(pe.errorCode!==0){throw new Error("Line: "+pe.line+"\n"+"Col: "+pe.linepos+"\n"+"Reason: "+pe.reason+"\n"+"Error Code: "+pe.errorCode+"\n"+"Source: "+pe.srcText);}}if(doc){return doc;}}else{if(_551.implementation&&_551.implementation.createDocument){if(str&&dojo.trim(str)&&_551.createElement){var tmp=_551.createElement("xml");tmp.innerHTML=str;var _555=_551.implementation.createDocument("foo","",null);dojo.forEach(tmp.childNodes,function(_556){_555.importNode(_556,true);});return _555;}else{return _551.implementation.createDocument("","",null);}}}}return null;};dojox.xml.parser.textContent=function(node,text){if(arguments.length>1){var _557=node.ownerDocument||dojo.doc;dojox.xml.parser.replaceChildren(node,_557.createTextNode(text));return text;}else{if(node.textContent!==undefined){return node.textContent;}var _558="";if(node){dojo.forEach(node.childNodes,function(_559){switch(_559.nodeType){case 1:case 5:_558+=dojox.xml.parser.textContent(_559);break;case 3:case 2:case 4:_558+=_559.nodeValue;}});}return _558;}};dojox.xml.parser.replaceChildren=function(node,_55a){var _55b=[];if(dojo.isIE){dojo.forEach(node.childNodes,function(_55c){_55b.push(_55c);});}dojox.xml.parser.removeChildren(node);dojo.forEach(_55b,dojo.destroy);if(!dojo.isArray(_55a)){node.appendChild(_55a);}else{dojo.forEach(_55a,function(_55d){node.appendChild(_55d);});}};dojox.xml.parser.removeChildren=function(node){var _55e=node.childNodes.length;while(node.hasChildNodes()){node.removeChild(node.firstChild);}return _55e;};dojox.xml.parser.innerXML=function(node){if(node.innerXML){return node.innerXML;}else{if(node.xml){return node.xml;}else{if(typeof XMLSerializer!="undefined"){return (new XMLSerializer()).serializeToString(node);}}}return null;};return dojox.xml.parser;});},"dijit/form/ComboButton":function(){require({cache:{"url:dijit/form/templates/ComboButton.html":"<table class=\"dijit dijitReset dijitInline dijitLeft\"\n\tcellspacing='0' cellpadding='0' role=\"presentation\"\n\t><tbody role=\"presentation\"><tr role=\"presentation\"\n\t\t><td class=\"dijitReset dijitStretch dijitButtonNode\" data-dojo-attach-point=\"buttonNode\" data-dojo-attach-event=\"ondijitclick:_onClick,onkeypress:_onButtonKeyPress\"\n\t\t><div id=\"${id}_button\" class=\"dijitReset dijitButtonContents\"\n\t\t\tdata-dojo-attach-point=\"titleNode\"\n\t\t\trole=\"button\" aria-labelledby=\"${id}_label\"\n\t\t\t><div class=\"dijitReset dijitInline dijitIcon\" data-dojo-attach-point=\"iconNode\" role=\"presentation\"></div\n\t\t\t><div class=\"dijitReset dijitInline dijitButtonText\" id=\"${id}_label\" data-dojo-attach-point=\"containerNode\" role=\"presentation\"></div\n\t\t></div\n\t\t></td\n\t\t><td id=\"${id}_arrow\" class='dijitReset dijitRight dijitButtonNode dijitArrowButton'\n\t\t\tdata-dojo-attach-point=\"_popupStateNode,focusNode,_buttonNode\"\n\t\t\tdata-dojo-attach-event=\"onkeypress:_onArrowKeyPress\"\n\t\t\ttitle=\"${optionsTitle}\"\n\t\t\trole=\"button\" aria-haspopup=\"true\"\n\t\t\t><div class=\"dijitReset dijitArrowButtonInner\" role=\"presentation\"></div\n\t\t\t><div class=\"dijitReset dijitArrowButtonChar\" role=\"presentation\">&#9660;</div\n\t\t></td\n\t\t><td style=\"display:none !important;\"\n\t\t\t><input ${!nameAttrSetting} type=\"${type}\" value=\"${value}\" data-dojo-attach-point=\"valueNode\" role=\"presentation\"\n\t\t/></td></tr></tbody\n></table>\n"}});define("dijit/form/ComboButton",["dojo/_base/declare","dojo/_base/event","dojo/keys","../focus","./DropDownButton","dojo/text!./templates/ComboButton.html"],function(_55f,_560,keys,_561,_562,_563){return _55f("dijit.form.ComboButton",_562,{templateString:_563,_setIdAttr:"",_setTabIndexAttr:["focusNode","titleNode"],_setTitleAttr:"titleNode",optionsTitle:"",baseClass:"dijitComboButton",cssStateNodes:{"buttonNode":"dijitButtonNode","titleNode":"dijitButtonContents","_popupStateNode":"dijitDownArrowButton"},_focusedNode:null,_onButtonKeyPress:function(evt){if(evt.charOrCode==keys[this.isLeftToRight()?"RIGHT_ARROW":"LEFT_ARROW"]){_561.focus(this._popupStateNode);_560.stop(evt);}},_onArrowKeyPress:function(evt){if(evt.charOrCode==keys[this.isLeftToRight()?"LEFT_ARROW":"RIGHT_ARROW"]){_561.focus(this.titleNode);_560.stop(evt);}},focus:function(_564){if(!this.disabled){_561.focus(_564=="start"?this.titleNode:this._popupStateNode);}}});});},"esri/undoManager":function(){define(["dijit","dojo","dojox"],function(_565,dojo,_566){dojo.provide("esri.undoManager");dojo.declare("esri.UndoManager",null,{maxOperations:10,canUndo:false,canRedo:false,position:0,length:0,onUndo:function(){},onRedo:function(){},onAdd:function(){},onChange:function(){},constructor:function(_567){_567=_567||{};if(_567.maxOperations){this.maxOperations=_567.maxOperations;}this._historyStack=[];},add:function(_568){if(this.maxOperations>0){while(this._historyStack.length>=this.maxOperations){this._historyStack.shift();}}this._historyStack.splice(this.position,0,_568);this.position++;this.clearRedo();this.onAdd();this._checkAvailability();},undo:function(){if(this.position===0){return null;}var _569=this.peekUndo();this.position--;if(_569){_569.performUndo();}this.onUndo();this._checkAvailability();},redo:function(){if(this.position===this._historyStack.length){return null;}var _56a=this.peekRedo();this.position++;if(_56a){_56a.performRedo();}this.onRedo();this._checkAvailability();},_checkAvailability:function(){this.length=this._historyStack.length;if(this.length===0){this.canRedo=false;this.canUndo=false;}else{if(this.position===0){this.canRedo=true;this.canUndo=false;}else{if(this.position===this.length){this.canUndo=true;this.canRedo=false;}else{this.canUndo=true;this.canRedo=true;}}}this.onChange();},clearUndo:function(){this._historyStack.splice(0,this.position);this.position=0;this._checkAvailability();},clearRedo:function(){this._historyStack.splice(this.position,this._historyStack.length-this.position);this.position=this._historyStack.length;this._checkAvailability();},peekUndo:function(){if(this._historyStack.length>0&&this.position>0){return this.get(this.position-1);}},peekRedo:function(){if(this._historyStack.length>0&&this.position<this._historyStack.length){return this.get(this.position);}},get:function(idx){return this._historyStack[idx];},remove:function(idx){if(this._historyStack.length>0){this._historyStack.splice(idx,1);if(this.position>0){if(idx<this.position){this.position--;}}this._checkAvailability();}},destroy:function(){this._historyStack=null;}});dojo.declare("esri.OperationBase",null,{type:"not implemented",label:"not implemented",constructor:function(_56b){_56b=_56b||{};if(_56b.label){this.label=_56b.label;}},performUndo:function(){console.error("performUndo has not been implemented");},performRedo:function(){console.error("performRedo has not been implemented");}});});},"dijit/form/_TextBoxMixin":function(){define("dijit/form/_TextBoxMixin",["dojo/_base/array","dojo/_base/declare","dojo/dom","dojo/_base/event","dojo/keys","dojo/_base/lang","dojo/on","../main"],function(_56c,_56d,dom,_56e,keys,lang,on,_56f){var _570=_56d("dijit.form._TextBoxMixin",null,{trim:false,uppercase:false,lowercase:false,propercase:false,maxLength:"",selectOnClick:false,placeHolder:"",_getValueAttr:function(){return this.parse(this.get("displayedValue"),this.constraints);},_setValueAttr:function(_571,_572,_573){var _574;if(_571!==undefined){_574=this.filter(_571);if(typeof _573!="string"){if(_574!==null&&((typeof _574!="number")||!isNaN(_574))){_573=this.filter(this.format(_574,this.constraints));}else{_573="";}}}if(_573!=null&&((typeof _573)!="number"||!isNaN(_573))&&this.textbox.value!=_573){this.textbox.value=_573;this._set("displayedValue",this.get("displayedValue"));}if(this.textDir=="auto"){this.applyTextDir(this.focusNode,_573);}this.inherited(arguments,[_574,_572]);},displayedValue:"",_getDisplayedValueAttr:function(){return this.filter(this.textbox.value);},_setDisplayedValueAttr:function(_575){if(_575==null){_575="";}else{if(typeof _575!="string"){_575=String(_575);}}this.textbox.value=_575;this._setValueAttr(this.get("value"),undefined);this._set("displayedValue",this.get("displayedValue"));if(this.textDir=="auto"){this.applyTextDir(this.focusNode,_575);}},format:function(_576){return _576==null?"":(_576.toString?_576.toString():_576);},parse:function(_577){return _577;},_refreshState:function(){},onInput:function(){},__skipInputEvent:false,_onInput:function(evt){if(this.textDir=="auto"){this.applyTextDir(this.focusNode,this.focusNode.value);}this._processInput(evt);},_processInput:function(evt){this._refreshState();this._set("displayedValue",this.get("displayedValue"));},postCreate:function(){this.textbox.setAttribute("value",this.textbox.value);this.inherited(arguments);var _578=function(e){var _579;if(e.type=="keydown"){_579=e.keyCode;switch(_579){case keys.SHIFT:case keys.ALT:case keys.CTRL:case keys.META:case keys.CAPS_LOCK:case keys.NUM_LOCK:case keys.SCROLL_LOCK:return;}if(!e.ctrlKey&&!e.metaKey&&!e.altKey){switch(_579){case keys.NUMPAD_0:case keys.NUMPAD_1:case keys.NUMPAD_2:case keys.NUMPAD_3:case keys.NUMPAD_4:case keys.NUMPAD_5:case keys.NUMPAD_6:case keys.NUMPAD_7:case keys.NUMPAD_8:case keys.NUMPAD_9:case keys.NUMPAD_MULTIPLY:case keys.NUMPAD_PLUS:case keys.NUMPAD_ENTER:case keys.NUMPAD_MINUS:case keys.NUMPAD_PERIOD:case keys.NUMPAD_DIVIDE:return;}if((_579>=65&&_579<=90)||(_579>=48&&_579<=57)||_579==keys.SPACE){return;}var _57a=false;for(var i in keys){if(keys[i]===e.keyCode){_57a=true;break;}}if(!_57a){return;}}}_579=e.charCode>=32?String.fromCharCode(e.charCode):e.charCode;if(!_579){_579=(e.keyCode>=65&&e.keyCode<=90)||(e.keyCode>=48&&e.keyCode<=57)||e.keyCode==keys.SPACE?String.fromCharCode(e.keyCode):e.keyCode;}if(!_579){_579=229;}if(e.type=="keypress"){if(typeof _579!="string"){return;}if((_579>="a"&&_579<="z")||(_579>="A"&&_579<="Z")||(_579>="0"&&_579<="9")||(_579===" ")){if(e.ctrlKey||e.metaKey||e.altKey){return;}}}if(e.type=="input"){if(this.__skipInputEvent){this.__skipInputEvent=false;return;}}else{this.__skipInputEvent=true;}var faux={faux:true},attr;for(attr in e){if(attr!="layerX"&&attr!="layerY"){var v=e[attr];if(typeof v!="function"&&typeof v!="undefined"){faux[attr]=v;}}}lang.mixin(faux,{charOrCode:_579,_wasConsumed:false,preventDefault:function(){faux._wasConsumed=true;e.preventDefault();},stopPropagation:function(){e.stopPropagation();}});if(this.onInput(faux)===false){faux.preventDefault();faux.stopPropagation();}if(faux._wasConsumed){return;}this.defer(function(){this._onInput(faux);});};this.own(on(this.textbox,"keydown, keypress, paste, cut, input, compositionend",lang.hitch(this,_578)));},_blankValue:"",filter:function(val){if(val===null){return this._blankValue;}if(typeof val!="string"){return val;}if(this.trim){val=lang.trim(val);}if(this.uppercase){val=val.toUpperCase();}if(this.lowercase){val=val.toLowerCase();}if(this.propercase){val=val.replace(/[^\s]+/g,function(word){return word.substring(0,1).toUpperCase()+word.substring(1);});}return val;},_setBlurValue:function(){this._setValueAttr(this.get("value"),true);},_onBlur:function(e){if(this.disabled){return;}this._setBlurValue();this.inherited(arguments);},_isTextSelected:function(){return this.textbox.selectionStart!=this.textbox.selectionEnd;},_onFocus:function(by){if(this.disabled||this.readOnly){return;}if(this.selectOnClick&&by=="mouse"){this._selectOnClickHandle=this.connect(this.domNode,"onmouseup",function(){this.disconnect(this._selectOnClickHandle);this._selectOnClickHandle=null;if(!this._isTextSelected()){_570.selectInputText(this.textbox);}});this.defer(function(){if(this._selectOnClickHandle){this.disconnect(this._selectOnClickHandle);this._selectOnClickHandle=null;}},500);}this.inherited(arguments);this._refreshState();},reset:function(){this.textbox.value="";this.inherited(arguments);},_setTextDirAttr:function(_57b){if(!this._created||this.textDir!=_57b){this._set("textDir",_57b);this.applyTextDir(this.focusNode,this.focusNode.value);}}});_570._setSelectionRange=_56f._setSelectionRange=function(_57c,_57d,stop){if(_57c.setSelectionRange){_57c.setSelectionRange(_57d,stop);}};_570.selectInputText=_56f.selectInputText=function(_57e,_57f,stop){_57e=dom.byId(_57e);if(isNaN(_57f)){_57f=0;}if(isNaN(stop)){stop=_57e.value?_57e.value.length:0;}try{_57e.focus();_570._setSelectionRange(_57e,_57f,stop);}catch(e){}};return _570;});},"dijit/_base/window":function(){define("dijit/_base/window",["dojo/window","../main"],function(_580,_581){_581.getDocumentWindow=function(doc){return _580.get(doc);};});},"esri/geometry":function(){define("esri/geometry",["dijit","dojo","dojox","dojo/require!esri/main,esri/utils,dojox/gfx/_base,esri/WKIDUnitConversion,esri/geometry/utils"],function(_582,dojo,_583){dojo.provide("esri.geometry");dojo.require("esri.main");dojo.require("esri.utils");dojo.require("dojox.gfx._base");dojo.require("esri.WKIDUnitConversion");dojo.require("esri.geometry.utils");esri.Units={CENTIMETERS:"esriCentimeters",DECIMAL_DEGREES:"esriDecimalDegrees",DEGREE_MINUTE_SECONDS:"esriDegreeMinuteSeconds",DECIMETERS:"esriDecimeters",FEET:"esriFeet",INCHES:"esriInches",KILOMETERS:"esriKilometers",METERS:"esriMeters",MILES:"esriMiles",MILLIMETERS:"esriMillimeters",NAUTICAL_MILES:"esriNauticalMiles",POINTS:"esriPoints",UNKNOWN:"esriUnknownUnits",YARDS:"esriYards",ACRES:"esriAcres",ARES:"esriAres",SQUARE_KILOMETERS:"esriSquareKilometers",SQUARE_MILES:"esriSquareMiles",SQUARE_FEET:"esriSquareFeet",SQUARE_METERS:"esriSquareMeters",HECTARES:"esriHectares",SQUARE_YARDS:"esriSquareYards",SQUARE_INCHES:"esriSquareInches",SQUARE_MILLIMETERS:"esriSquareMillimeters",SQUARE_CENTIMETERS:"esriSquareCentimeters",SQUARE_DECIMETERS:"esriSquareDecimeters"};(function(){var _584="PROJCS[\"WGS_1984_Web_Mercator_Auxiliary_Sphere\",GEOGCS[\"GCS_WGS_1984\",DATUM[\"D_WGS_1984\",SPHEROID[\"WGS_1984\",6378137.0,298.257223563]],PRIMEM[\"Greenwich\",0.0],UNIT[\"Degree\",0.0174532925199433]],PROJECTION[\"Mercator_Auxiliary_Sphere\"],PARAMETER[\"False_Easting\",0.0],PARAMETER[\"False_Northing\",0.0],PARAMETER[\"Central_Meridian\",${Central_Meridian}],PARAMETER[\"Standard_Parallel_1\",0.0],PARAMETER[\"Auxiliary_Sphere_Type\",0.0],UNIT[\"Meter\",1.0]]";var _585=[-20037508.342788905,20037508.342788905];var _586=[-20037508.342787,20037508.342787];dojo.declare("esri.SpatialReference",null,{constructor:function(json){if(json){if(dojo.isObject(json)){dojo.mixin(this,json);}else{if(dojo.isString(json)){this.wkt=json;}else{this.wkid=json;}}}},wkid:null,wkt:null,_info:{"102113":{wkTemplate:"PROJCS[\"WGS_1984_Web_Mercator\",GEOGCS[\"GCS_WGS_1984_Major_Auxiliary_Sphere\",DATUM[\"D_WGS_1984_Major_Auxiliary_Sphere\",SPHEROID[\"WGS_1984_Major_Auxiliary_Sphere\",6378137.0,0.0]],PRIMEM[\"Greenwich\",0.0],UNIT[\"Degree\",0.0174532925199433]],PROJECTION[\"Mercator\"],PARAMETER[\"False_Easting\",0.0],PARAMETER[\"False_Northing\",0.0],PARAMETER[\"Central_Meridian\",${Central_Meridian}],PARAMETER[\"Standard_Parallel_1\",0.0],UNIT[\"Meter\",1.0]]",valid:_585,origin:_586,dx:0.00001},"102100":{wkTemplate:_584,valid:_585,origin:_586,dx:0.00001},"3785":{wkTemplate:"PROJCS[\"WGS_1984_Web_Mercator\",GEOGCS[\"GCS_WGS_1984_Major_Auxiliary_Sphere\",DATUM[\"D_WGS_1984_Major_Auxiliary_Sphere\",SPHEROID[\"WGS_1984_Major_Auxiliary_Sphere\",6378137.0,0.0]],PRIMEM[\"Greenwich\",0.0],UNIT[\"Degree\",0.0174532925199433]],PROJECTION[\"Mercator\"],PARAMETER[\"False_Easting\",0.0],PARAMETER[\"False_Northing\",0.0],PARAMETER[\"Central_Meridian\",${Central_Meridian}],PARAMETER[\"Standard_Parallel_1\",0.0],UNIT[\"Meter\",1.0]]",valid:_585,origin:_586,dx:0.00001},"3857":{wkTemplate:_584,valid:_585,origin:_586,dx:0.00001},"4326":{wkTemplate:"GEOGCS[\"GCS_WGS_1984\",DATUM[\"D_WGS_1984\",SPHEROID[\"WGS_1984\",6378137.0,298.257223563]],PRIMEM[\"Greenwich\",${Central_Meridian}],UNIT[\"Degree\",0.0174532925199433]]",altTemplate:"PROJCS[\"WGS_1984_Plate_Carree\",GEOGCS[\"GCS_WGS_1984\",DATUM[\"D_WGS_1984\",SPHEROID[\"WGS_1984\",6378137.0,298.257223563]],PRIMEM[\"Greenwich\",0.0],UNIT[\"Degree\",0.0174532925199433]],PROJECTION[\"Plate_Carree\"],PARAMETER[\"False_Easting\",0.0],PARAMETER[\"False_Northing\",0.0],PARAMETER[\"Central_Meridian\",${Central_Meridian}],UNIT[\"Degrees\",111319.491]]",valid:[-180,180],origin:[-180,180],dx:0.00001}},_isWebMercator:function(){return dojo.indexOf([102113,102100,3857,3785],this.wkid)!==-1;},_isWrappable:function(){return dojo.indexOf([102113,102100,3857,3785,4326],this.wkid)!==-1;},_getInfo:function(){return this.wkid?this._info[this.wkid]:null;},_canProject:function(inSR){var _587=false;if(inSR){_587=((this.isWebMercator()&&inSR.wkid===4326)||(inSR.isWebMercator()&&this.wkid===4326));}return _587;},isWebMercator:function(){return this._isWebMercator();},equals:function(inSR){var _588=false;if(inSR){if(this===inSR){_588=true;}if(this.wkid||inSR.wkid){_588=(this.wkid===inSR.wkid)||(this.isWebMercator()&&inSR.isWebMercator());}else{if(this.wkt&&inSR.wkt){_588=(this.wkt.toUpperCase()===inSR.wkt.toUpperCase());}}}return _588;},toJson:function(){if(this.wkid!==null){return {wkid:this.wkid};}else{if(this.wkt!==null){return {wkt:this.wkt};}}return null;}});}());dojo.mixin(esri.geometry,(function(){var _589=6378137,PI=3.141592653589793,_58a=57.29577951308232,_58b=0.017453292519943,_58c=Math.floor,log=Math.log,sin=Math.sin,exp=Math.exp,atan=Math.atan;function _58d(rad){return rad*_58a;};function _58e(deg){return deg*_58b;};function _58f(lng,lat){if(lat>89.99999){lat=89.99999;}else{if(lat<-89.99999){lat=-89.99999;}}var _590=_58e(lat);return [_58e(lng)*_589,_589/2*log((1+sin(_590))/(1-sin(_590)))];};function _591(x,y,_592){var _593=_58d(x/_589);if(_592){return [_593,_58d((PI/2)-(2*atan(exp(-1*y/_589))))];}return [_593-(_58c((_593+180)/360)*360),_58d((PI/2)-(2*atan(exp(-1*y/_589))))];};function _594(geom,func,sr,_595){if(geom instanceof esri.geometry.Point){var pt=func(geom.x,geom.y,_595);return new esri.geometry.Point(pt[0],pt[1],new esri.SpatialReference(sr));}else{if(geom instanceof esri.geometry.Extent){var min=func(geom.xmin,geom.ymin,_595),max=func(geom.xmax,geom.ymax,_595);return new esri.geometry.Extent(min[0],min[1],max[0],max[1],new esri.SpatialReference(sr));}else{if(geom instanceof esri.geometry.Polyline||geom instanceof esri.geometry.Polygon){var _596=geom instanceof esri.geometry.Polyline,_597=_596?geom.paths:geom.rings,_598=[],_599;dojo.forEach(_597,function(_59a){_598.push(_599=[]);dojo.forEach(_59a,function(iPt){_599.push(func(iPt[0],iPt[1],_595));});});if(_596){return new esri.geometry.Polyline({paths:_598,spatialReference:sr});}else{return new esri.geometry.Polygon({rings:_598,spatialReference:sr});}}else{if(geom instanceof esri.geometry.Multipoint){var oPts=[];dojo.forEach(geom.points,function(iPt){oPts.push(func(iPt[0],iPt[1],_595));});return new esri.geometry.Multipoint({points:oPts,spatialReference:sr});}}}}};var _59b=39.37,_59c=20015077/180,ecd=esri.config.defaults,_59d=esri.WKIDUnitConversion;return {xyToLngLat:_591,lngLatToXY:_58f,geographicToWebMercator:function(geom){return _594(geom,_58f,{wkid:102100});},webMercatorToGeographic:function(geom,_59e){return _594(geom,_591,{wkid:4326},_59e);},getScale:function(map,_59f,wkid){var _5a0,_5a1,wkt;if(arguments.length>1&&(esri.isDefined(_59f)&&!_59f.declaredClass)){_5a0=map;_5a1=_59f;_59f=null;}else{_5a0=map.extent;_5a1=map.width;var sr=map.spatialReference;if(sr){wkid=sr.wkid;wkt=sr.wkt;}}var _5a2;if(wkid){_5a2=_59d.values[_59d[wkid]];}else{if(wkt&&(wkt.search(/^PROJCS/i)!==-1)){var _5a3=/UNIT\[([^\]]+)\]\]$/i.exec(wkt);if(_5a3&&_5a3[1]){_5a2=parseFloat(_5a3[1].split(",")[1]);}}}return esri.geometry._getScale(_59f||_5a0,_5a1,_5a2);},_getScale:function(_5a4,_5a5,_5a6){return (_5a4&&_5a5)?((_5a4.getWidth()/_5a5)*(_5a6||_59c)*_59b*ecd.screenDPI):0;},getExtentForScale:function(map,_5a7,_5a8){var wkid,wkt,sr=map.spatialReference;if(sr){wkid=sr.wkid;wkt=sr.wkt;}var _5a9;if(wkid){_5a9=_59d.values[_59d[wkid]];}else{if(wkt&&(wkt.search(/^PROJCS/i)!==-1)){var _5aa=/UNIT\[([^\]]+)\]\]$/i.exec(wkt);if(_5aa&&_5aa[1]){_5a9=parseFloat(_5aa[1].split(",")[1]);}}}return esri.geometry._getExtentForScale(_5a8||map.extent,map.width,_5a9,_5a7,true);},_getExtentForScale:function(_5ab,_5ac,wkid,_5ad,_5ae){var _5af;if(_5ae){_5af=wkid;}else{_5af=_59d.values[_59d[wkid]];}return _5ab.expand(((_5ad*_5ac)/((_5af||_59c)*_59b*ecd.screenDPI))/_5ab.getWidth());}};}()),{defaultPoint:{type:"point",x:0,y:0},defaultMultipoint:{type:"multipoint",points:null},defaultExtent:{type:"extent",xmin:0,ymin:0,xmax:0,ymax:0},defaultPolyline:{type:"polyline",paths:null},defaultPolygon:{type:"polygon",rings:null},_rectToExtent:function(rect){return new esri.geometry.Extent(parseFloat(rect.x),parseFloat(rect.y)-parseFloat(rect.height),parseFloat(rect.x)+parseFloat(rect.width),parseFloat(rect.y),rect.spatialReference);},_extentToRect:function(_5b0){return new esri.geometry.Rect(_5b0.xmin,_5b0.ymax,_5b0.getWidth(),_5b0.getHeight(),_5b0.spatialReference);},fromJson:function(json){if(json.x!==undefined&&json.y!==undefined){return new esri.geometry.Point(json);}else{if(json.paths!==undefined){return new esri.geometry.Polyline(json);}else{if(json.rings!==undefined){return new esri.geometry.Polygon(json);}else{if(json.points!==undefined){return new esri.geometry.Multipoint(json);}else{if(json.xmin!==undefined&&json.ymin!==undefined&&json.xmax!==undefined&&json.ymax!==undefined){return new esri.geometry.Extent(json);}}}}}},getJsonType:function(_5b1){if(_5b1 instanceof esri.geometry.Point){return "esriGeometryPoint";}else{if(_5b1 instanceof esri.geometry.Polyline){return "esriGeometryPolyline";}else{if(_5b1 instanceof esri.geometry.Polygon){return "esriGeometryPolygon";}else{if(_5b1 instanceof esri.geometry.Extent){return "esriGeometryEnvelope";}else{if(_5b1 instanceof esri.geometry.Multipoint){return "esriGeometryMultipoint";}}}}}return null;},getGeometryType:function(_5b2){if(_5b2==="esriGeometryPoint"){return esri.geometry.Point;}else{if(_5b2==="esriGeometryPolyline"){return esri.geometry.Polyline;}else{if(_5b2==="esriGeometryPolygon"){return esri.geometry.Polygon;}else{if(_5b2==="esriGeometryEnvelope"){return esri.geometry.Extent;}else{if(_5b2==="esriGeometryMultipoint"){return esri.geometry.Multipoint;}}}}}return null;},isClockwise:function(arr){var area=0,i,il=arr.length,func=dojo.isArray(arr[0])?function(p1,p2){return p1[0]*p2[1]-p2[0]*p1[1];}:function(p1,p2){return p1.x*p2.y-p2.x*p1.y;};for(i=0;i<il;i++){area+=func(arr[i],arr[(i+1)%il]);}return (area/2)<=0;},toScreenPoint:function(ext,wd,ht,pt,_5b3){var _5b4=ext.spatialReference,ptSR=pt.spatialReference,_5b5=esri.geometry,x=pt.x,y=pt.y,_5b6;if(_5b4&&ptSR&&!_5b4.equals(ptSR)&&_5b4._canProject(ptSR)){_5b6=_5b4.isWebMercator()?_5b5.lngLatToXY(x,y):_5b5.xyToLngLat(x,y,true);x=_5b6[0];y=_5b6[1];}x=(x-ext.xmin)*(wd/ext.getWidth());y=(ext.ymax-y)*(ht/ext.getHeight());if(!_5b3){x=Math.round(x);y=Math.round(y);}return new _5b5.ScreenPoint(x,y);},toScreenGeometry:function(ext,wd,ht,g){var x=ext.xmin,y=ext.ymax,rwd=wd/ext.getWidth(),rht=ht/ext.getHeight(),_5b7=dojo.forEach,_5b8=Math.round;if(g instanceof esri.geometry.Point){return new esri.geometry.Point(_5b8((g.x-x)*rwd),_5b8((y-g.y)*rht));}else{if(g instanceof esri.geometry.Multipoint){var mp=new esri.geometry.Multipoint(),mpp=mp.points;_5b7(g.points,function(pt,i){mpp[i]=[_5b8((pt[0]-x)*rwd),_5b8((y-pt[1])*rht)];});return mp;}else{if(g instanceof esri.geometry.Extent){return new esri.geometry.Extent(_5b8((g.xmin-x)*rwd),_5b8((y-g.ymin)*rht),_5b8((g.xmax-x)*rwd),_5b8((y-g.ymax)*rwd));}else{if(g instanceof esri.geometry.Polyline){var _5b9=new esri.geometry.Polyline(),_5ba=_5b9.paths,_5bb;_5b7(g.paths,function(path,i){_5bb=(_5ba[i]=[]);_5b7(path,function(pt,j){_5bb[j]=[_5b8((pt[0]-x)*rwd),_5b8((y-pt[1])*rht)];});});return _5b9;}else{if(g instanceof esri.geometry.Polygon){var pgon=new esri.geometry.Polygon(),_5bc=pgon.rings,_5bd;_5b7(g.rings,function(ring,i){_5bd=(_5bc[i]=[]);_5b7(ring,function(pt,j){_5bd[j]=[_5b8((pt[0]-x)*rwd),_5b8((y-pt[1])*rht)];});});return pgon;}}}}}},_toScreenPath:(function(){var _5be=(function(){if(dojo.isIE<9){return function(x,y,rwd,rht,dx,dy,_5bf,_5c0,_5c1){var _5c2=[],_5c3=Math.round,p,pl=_5bf.length,path,_5c4,_5c5,pt,x1,y1,x2,y2;for(p=0;p<pl;p++){path=_5bf[p];pt=_5c0?_5c0(path[0][0],path[0][1],_5c1):path[0];if((_5c5=path.length)>1){x1=_5c3(((pt[0]-x)*rwd)+dx);y1=_5c3(((y-pt[1])*rht)+dy);pt=_5c0?_5c0(path[1][0],path[1][1],_5c1):path[1];x2=_5c3(((pt[0]-x)*rwd)+dx);y2=_5c3(((y-pt[1])*rht)+dy);_5c2.push("M",x1+","+y1,"L",x2+","+y2);for(_5c4=2;_5c4<_5c5;_5c4++){pt=_5c0?_5c0(path[_5c4][0],path[_5c4][1],_5c1):path[_5c4];x1=_5c3(((pt[0]-x)*rwd)+dx);y1=_5c3(((y-pt[1])*rht)+dy);_5c2.push(x1+","+y1);}}else{x1=_5c3(((pt[0]-x)*rwd)+dx);y1=_5c3(((y-pt[1])*rht)+dy);_5c2.push("M",x1+","+y1);}}return _5c2;};}else{return function(x,y,rwd,rht,dx,dy,_5c6,_5c7,_5c8){var _5c9=[],i,j,il,jl,path,pt,_5ca=Math.round;for(i=0,il=_5c6?_5c6.length:0;i<il;i++){path=_5c6[i];_5c9.push("M");for(j=0,jl=path?path.length:0;j<jl;j++){pt=_5c7?_5c7(path[j][0],path[j][1],_5c8):path[j];_5c9.push(_5ca(((pt[0]-x)*rwd)+dx)+","+_5ca(((y-pt[1])*rht)+dy));}}return _5c9;};}}());return function(ext,wd,ht,g,dx,dy){var _5cb=esri.geometry,_5cc=g instanceof _5cb.Polyline,_5cd=ext.spatialReference,_5ce=g.spatialReference,_5cf,_5d0;if(_5cd&&_5ce&&!_5cd.equals(_5ce)&&_5cd._canProject(_5ce)){if(_5cd.isWebMercator()){_5cf=_5cb.lngLatToXY;}else{_5cf=_5cb.xyToLngLat;_5d0=true;}}return _5be(ext.xmin,ext.ymax,wd/ext.getWidth(),ht/ext.getHeight(),dx,dy,_5cc?g.paths:g.rings,_5cf,_5d0);};}()),toMapPoint:function(ext,wd,ht,pt){return new esri.geometry.Point(ext.xmin+(pt.x/(wd/ext.getWidth())),ext.ymax-(pt.y/(ht/ext.getHeight())),ext.spatialReference);},toMapGeometry:function(ext,wd,ht,g){var x=ext.xmin,y=ext.ymax,sr=ext.spatialReference,rwd=wd/ext.getWidth(),rht=ht/ext.getHeight(),_5d1=dojo.forEach;if(g instanceof esri.geometry.Point){return new esri.geometry.Point(x+(g.x/rwd),y-(g.y/rht),sr);}else{if(g instanceof esri.geometry.Multipoint){var mp=new esri.geometry.Multipoint(sr),mpp=mp.points;_5d1(g.points,function(pt,i){mpp[i]=[x+(pt[0]/rwd),y-(pt[1]/rht)];});return mp;}else{if(g instanceof esri.geometry.Extent){return new esri.geometry.Extent(x+(g.xmin/rwd),y-(g.ymin/rht),x+(g.xmax/rwd),y-(g.ymax/rht),sr);}else{if(g instanceof esri.geometry.Polyline){var _5d2=new esri.geometry.Polyline(sr),_5d3=_5d2.paths,_5d4;_5d1(g.paths,function(path,i){_5d4=(_5d3[i]=[]);_5d1(path,function(pt,j){_5d4[j]=[x+(pt[0]/rwd),y-(pt[1]/rht)];});});return _5d2;}else{if(g instanceof esri.geometry.Polygon){var pgon=new esri.geometry.Polygon(sr),_5d5=pgon.rings,_5d6;_5d1(g.rings,function(ring,i){_5d6=(_5d5[i]=[]);_5d1(ring,function(pt,j){_5d6[j]=[x+(pt[0]/rwd),y-(pt[1]/rht)];});});return pgon;}}}}}},getLength:function(pt1,pt2){var dx=pt2.x-pt1.x,dy=pt2.y-pt1.y;return Math.sqrt(dx*dx+dy*dy);},_getLength:function(pt1,pt2){var dx=pt2[0]-pt1[0],dy=pt2[1]-pt1[1];return Math.sqrt(dx*dx+dy*dy);},getMidpoint:function(pt0,pt1){return esri.geometry.getPointOnLine(pt0,pt1,0.5);},getPointOnLine:function(pt0,pt1,_5d7){if(pt0 instanceof esri.geometry.Point){return new esri.geometry.Point(pt0.x+_5d7*(pt1.x-pt0.x),pt0.y+_5d7*(pt1.y-pt0.y));}else{return [pt0[0]+_5d7*(pt1[0]-pt0[0]),pt0[1]+_5d7*(pt1[1]-pt0[1])];}},_equals:function(n1,n2){return Math.abs(n1-n2)<1e-8;},getLineIntersection:function(_5d8,_5d9,_5da,_5db,sr){var pt=esri.geometry._getLineIntersection([_5d8.x,_5d8.y],[_5d9.x,_5d9.y],[_5da.x,_5da.y],[_5db.x,_5db.y]);if(pt){pt=new esri.geometry.Point(pt[0],pt[1],sr);}return pt;},_getLineIntersection:function(p0,p1,p2,p3){var _5dc=10000000000,x,y,a0=esri.geometry._equals(p0[0],p1[0])?_5dc:(p0[1]-p1[1])/(p0[0]-p1[0]),a1=esri.geometry._equals(p2[0],p3[0])?_5dc:(p2[1]-p3[1])/(p2[0]-p3[0]),b0=p0[1]-a0*p0[0],b1=p2[1]-a1*p2[0];if(esri.geometry._equals(a0,a1)){if(!esri.geometry._equals(b0,b1)){return null;}else{if(esri.geometry._equals(p0[0],p1[0])){if(Math.min(p0[1],p1[1])<Math.max(p2[1],p3[1])||Math.max(p0[1],p1[1])>Math.min(p2[1],p3[1])){y=(p0[1]+p1[1]+p2[1]+p3[1]-Math.min(p0[1],p1[1],p2[1],p3[1])-Math.max(p0[1],p1[1],p2[1],p3[1]))/2;x=(y-b0)/a0;}else{return null;}}else{if(Math.min(p0[0],p1[0])<Math.max(p2[0],p3[0])||Math.max(p0[0],p1[0])>Math.min(p2[0],p3[0])){x=(p0[0]+p1[0]+p2[0]+p3[0]-Math.min(p0[0],p1[0],p2[0],p3[0])-Math.max(p0[0],p1[0],p2[0],p3[0]))/2;y=a0*x+b0;}else{return null;}}return [x,y];}}if(esri.geometry._equals(a0,_5dc)){x=p0[0];y=a1*x+b1;}else{if(esri.geometry._equals(a1,_5dc)){x=p2[0];y=a0*x+b0;}else{x=-(b0-b1)/(a0-a1);y=a0*x+b0;}}return [x,y];},_getLineIntersection2:function(_5dd,_5de){var p1=_5dd[0],p2=_5dd[1],p3=_5de[0],p4=_5de[1],x1=p1[0],y1=p1[1],x2=p2[0],y2=p2[1],x3=p3[0],y3=p3[1],x4=p4[0],y4=p4[1],x43=x4-x3,x13=x1-x3,x21=x2-x1,y43=y4-y3,y13=y1-y3,y21=y2-y1,_5df=(y43*x21)-(x43*y21),ua,ub,px,py;if(_5df===0){return false;}ua=((x43*y13)-(y43*x13))/_5df;ub=((x21*y13)-(y21*x13))/_5df;if(ua>=0&&ua<=1&&ub>=0&&ub<=1){px=x1+(ua*(x2-x1));py=y1+(ua*(y2-y1));return [px,py];}else{return false;}},_pointLineDistance:function(_5e0,line){var p1=line[0],p2=line[1],x1=p1[0],y1=p1[1],x2=p2[0],y2=p2[1],x3=_5e0[0],y3=_5e0[1],x21=x2-x1,y21=y2-y1,x31=x3-x1,y31=y3-y1,sqrt=Math.sqrt,pow=Math.pow,mag=sqrt(pow(x21,2)+pow(y21,2)),u=((x31*x21)+(y31*y21))/(mag*mag),x=x1+u*x21,y=y1+u*y21;return sqrt(pow(x3-x,2)+pow(y3-y,2));}});dojo.declare("esri.geometry.Geometry",null,{spatialReference:null,type:null,setSpatialReference:function(sr){this.spatialReference=sr;return this;},_initSR:function(){if(!this.spatialReference){this.setSpatialReference(new esri.SpatialReference(4326));}},getExtent:function(){return null;}});dojo.declare("esri.geometry.Point",esri.geometry.Geometry,{constructor:function(x,y,_5e1){dojo.mixin(this,esri.geometry.defaultPoint);if(dojo.isArray(x)){this.x=x[0];this.y=x[1];this.spatialReference=y;}else{if(dojo.isObject(x)){dojo.mixin(this,x);if(esri.isDefined(this.latitude)){this.y=this.latitude;}if(esri.isDefined(this.longitude)){this.x=this.longitude;}if(this.spatialReference){this.spatialReference=new esri.SpatialReference(this.spatialReference);}}else{this.x=x;this.y=y;this.spatialReference=_5e1;}}this._initSR();},offset:function(x,y){return new esri.geometry.Point(this.x+x,this.y+y,this.spatialReference);},setX:function(x){this.x=x;return this;},setY:function(y){this.y=y;return this;},setLongitude:function(_5e2){var sr=this.spatialReference;if(sr){if(sr._isWebMercator()){this.x=esri.geometry.lngLatToXY(_5e2,this.y)[0];}else{if(sr.wkid===4326){this.x=_5e2;}}}return this;},setLatitude:function(_5e3){var sr=this.spatialReference;if(sr){if(sr._isWebMercator()){this.y=esri.geometry.lngLatToXY(this.x,_5e3)[1];}else{if(sr.wkid===4326){this.y=_5e3;}}}return this;},getLongitude:function(){var sr=this.spatialReference,_5e4;if(sr){if(sr._isWebMercator()){_5e4=esri.geometry.xyToLngLat(this.x,this.y)[0];}else{if(sr.wkid===4326){_5e4=this.x;}}}return _5e4;},getLatitude:function(){var sr=this.spatialReference,_5e5;if(sr){if(sr._isWebMercator()){_5e5=esri.geometry.xyToLngLat(this.x,this.y)[1];}else{if(sr.wkid===4326){_5e5=this.y;}}}return _5e5;},update:function(x,y){this.x=x;this.y=y;return this;},normalize:function(){var x=this.x,sr=this.spatialReference;if(sr){var info=sr._getInfo();if(info){var _5e6=info.valid[0],_5e7=info.valid[1],_5e8=2*_5e7,_5e9;if(x>_5e7){_5e9=Math.ceil(Math.abs(x-_5e7)/_5e8);x-=(_5e9*_5e8);}else{if(x<_5e6){_5e9=Math.ceil(Math.abs(x-_5e6)/_5e8);x+=(_5e9*_5e8);}}}}return new esri.geometry.Point(x,this.y,sr);},toJson:function(){var json={x:this.x,y:this.y},sr=this.spatialReference;if(sr){json.spatialReference=sr.toJson();}return json;}});dojo.declare("esri.geometry.ScreenPoint",esri.geometry.Point,{_initSR:function(){},offset:function(x,y){return new esri.geometry.ScreenPoint(this.x+x,this.y+y);}});dojo.declare("esri.geometry.Polyline",esri.geometry.Geometry,{constructor:function(obj){dojo.mixin(this,esri.geometry.defaultPolyline);this.paths=[];this._path=0;if(obj){if(obj.paths){dojo.mixin(this,obj);}else{this.spatialReference=obj;}if(this.spatialReference){this.spatialReference=new esri.SpatialReference(this.spatialReference);}}this._initSR();},_extent:null,addPath:function(_5ea){this._extent=null;this._path=this.paths.length;this.paths[this._path]=[];if(dojo.isArray(_5ea[0])){dojo.forEach(_5ea,this._addPointArr,this);}else{dojo.forEach(_5ea,this._addPoint,this);}return this;},_addPointArr:function(_5eb){this.paths[this._path].push(_5eb);},_addPoint:function(_5ec){this.paths[this._path].push([_5ec.x,_5ec.y]);},_insertPoints:function(_5ed,_5ee){this._extent=null;this._path=_5ee;if(!this.paths[this._path]){this.paths[this._path]=[];}dojo.forEach(_5ed,this._addPoint,this);},_validateInputs:function(_5ef,_5f0){if((_5ef!==null&&_5ef!==undefined)&&(_5ef<0||_5ef>=this.paths.length)){return false;}if((_5f0!==null&&_5ef!==undefined)&&(_5f0<0||_5f0>=this.paths[_5ef].length)){return false;}return true;},getPoint:function(_5f1,_5f2){if(this._validateInputs(_5f1,_5f2)){return new esri.geometry.Point(this.paths[_5f1][_5f2],this.spatialReference);}},setPoint:function(_5f3,_5f4,_5f5){if(this._validateInputs(_5f3,_5f4)){this._extent=null;this.paths[_5f3][_5f4]=[_5f5.x,_5f5.y];return this;}},insertPoint:function(_5f6,_5f7,_5f8){if(this._validateInputs(_5f6)&&esri.isDefined(_5f7)&&(_5f7>=0&&_5f7<=this.paths[_5f6].length)){this._extent=null;this.paths[_5f6].splice(_5f7,0,[_5f8.x,_5f8.y]);return this;}},removePath:function(_5f9){if(this._validateInputs(_5f9,null)){this._extent=null;var arr=this.paths.splice(_5f9,1)[0],i,il=arr.length,_5fa=esri.geometry.Point,sr=this.spatialReference;for(i=0;i<il;i++){arr[i]=new _5fa(arr[i],sr);}return arr;}},removePoint:function(_5fb,_5fc){if(this._validateInputs(_5fb,_5fc)){this._extent=null;return new esri.geometry.Point(this.paths[_5fb].splice(_5fc,1)[0],this.spatialReference);}},getExtent:function(){var _5fd;if(this._extent){_5fd=new esri.geometry.Extent(this._extent);_5fd._partwise=this._partwise;return _5fd;}var _5fe=this.paths,pal=_5fe.length;if(!pal||!_5fe[0].length){return;}var path,_5ff,x,y,xmax,ymax,pa,pt,ptl,xmin=(xmax=_5fe[0][0][0]),ymin=(ymax=_5fe[0][0][1]),min=Math.min,max=Math.max,sr=this.spatialReference,_600=[],_601,_602,_603,_604;for(pa=0;pa<pal;pa++){path=_5fe[pa];_601=(_602=path[0]&&path[0][0]);_603=(_604=path[0]&&path[0][1]);ptl=path.length;for(pt=0;pt<ptl;pt++){_5ff=path[pt];x=_5ff[0];y=_5ff[1];xmin=min(xmin,x);ymin=min(ymin,y);xmax=max(xmax,x);ymax=max(ymax,y);_601=min(_601,x);_603=min(_603,y);_602=max(_602,x);_604=max(_604,y);}_600.push(new esri.geometry.Extent({xmin:_601,ymin:_603,xmax:_602,ymax:_604,spatialReference:(sr?sr.toJson():null)}));}this._extent={xmin:xmin,ymin:ymin,xmax:xmax,ymax:ymax,spatialReference:sr?sr.toJson():null};this._partwise=_600.length>1?_600:null;_5fd=new esri.geometry.Extent(this._extent);_5fd._partwise=this._partwise;return _5fd;},toJson:function(){var json={paths:dojo.clone(this.paths)},sr=this.spatialReference;if(sr){json.spatialReference=sr.toJson();}return json;}});dojo.declare("esri.geometry.Polygon",esri.geometry.Geometry,{constructor:function(obj){dojo.mixin(this,esri.geometry.defaultPolygon);this.rings=[];this._ring=0;if(obj){if(obj.rings){dojo.mixin(this,obj);}else{this.spatialReference=obj;}if(this.spatialReference){this.spatialReference=new esri.SpatialReference(this.spatialReference);}}this._initSR();},_extent:null,addRing:function(_605){this._extent=null;this._ring=this.rings.length;this.rings[this._ring]=[];if(dojo.isArray(_605[0])){dojo.forEach(_605,this._addPointArr,this);}else{dojo.forEach(_605,this._addPoint,this);}return this;},_addPointArr:function(_606){this.rings[this._ring].push(_606);},_addPoint:function(_607){this.rings[this._ring].push([_607.x,_607.y]);},_insertPoints:function(_608,_609){this._extent=null;this._ring=_609;if(!this.rings[this._ring]){this.rings[this._ring]=[];}dojo.forEach(_608,this._addPoint,this);},_validateInputs:function(_60a,_60b){if((_60a!==null&&_60a!==undefined)&&(_60a<0||_60a>=this.rings.length)){return false;}if((_60b!==null&&_60a!==undefined)&&(_60b<0||_60b>=this.rings[_60a].length)){return false;}return true;},getPoint:function(_60c,_60d){if(this._validateInputs(_60c,_60d)){return new esri.geometry.Point(this.rings[_60c][_60d],this.spatialReference);}},setPoint:function(_60e,_60f,_610){if(this._validateInputs(_60e,_60f)){this._extent=null;this.rings[_60e][_60f]=[_610.x,_610.y];return this;}},insertPoint:function(_611,_612,_613){if(this._validateInputs(_611)&&esri.isDefined(_612)&&(_612>=0&&_612<=this.rings[_611].length)){this._extent=null;this.rings[_611].splice(_612,0,[_613.x,_613.y]);return this;}},removeRing:function(_614){if(this._validateInputs(_614,null)){this._extent=null;var arr=this.rings.splice(_614,1)[0],i,il=arr.length,_615=esri.geometry.Point,sr=this.spatialReference;for(i=0;i<il;i++){arr[i]=new _615(arr[i],sr);}return arr;}},removePoint:function(_616,_617){if(this._validateInputs(_616,_617)){this._extent=null;return new esri.geometry.Point(this.rings[_616].splice(_617,1)[0],this.spatialReference);}},getExtent:function(){var _618;if(this._extent){_618=new esri.geometry.Extent(this._extent);_618._partwise=this._partwise;return _618;}var _619=this.rings,pal=_619.length;if(!pal||!_619[0].length){return;}var ring,_61a,x,y,xmax,ymax,pa,pt,ptl,xmin=(xmax=_619[0][0][0]),ymin=(ymax=_619[0][0][1]),min=Math.min,max=Math.max,sr=this.spatialReference,_61b=[],_61c,_61d,_61e,_61f;for(pa=0;pa<pal;pa++){ring=_619[pa];_61c=(_61d=ring[0]&&ring[0][0]);_61e=(_61f=ring[0]&&ring[0][1]);ptl=ring.length;for(pt=0;pt<ptl;pt++){_61a=ring[pt];x=_61a[0];y=_61a[1];xmin=min(xmin,x);ymin=min(ymin,y);xmax=max(xmax,x);ymax=max(ymax,y);_61c=min(_61c,x);_61e=min(_61e,y);_61d=max(_61d,x);_61f=max(_61f,y);}_61b.push(new esri.geometry.Extent({xmin:_61c,ymin:_61e,xmax:_61d,ymax:_61f,spatialReference:(sr?sr.toJson():null)}));}this._extent={xmin:xmin,ymin:ymin,xmax:xmax,ymax:ymax,spatialReference:(sr?sr.toJson():null)};this._partwise=_61b.length>1?_61b:null;_618=new esri.geometry.Extent(this._extent);_618._partwise=this._partwise;return _618;},contains:function(_620){var _621=this.rings,ring,_622=false,pi,pj,_623,j,i,pa,pal=_621.length,_624=this.spatialReference,_625=_620.spatialReference,_626,x=_620.x,y=_620.y;if(_624&&_625&&!_624.equals(_625)&&_624._canProject(_625)){_626=_624.isWebMercator()?esri.geometry.lngLatToXY(x,y):esri.geometry.xyToLngLat(x,y,true);x=_626[0];y=_626[1];}for(pa=0;pa<pal;pa++){ring=_621[pa];_623=ring.length;j=0;for(i=0;i<_623;i++){j++;if(j===_623){j=0;}pi=ring[i];pj=ring[j];if((pi[1]<y&&pj[1]>=y||pj[1]<y&&pi[1]>=y)&&(pi[0]+(y-pi[1])/(pj[1]-pi[1])*(pj[0]-pi[0])<x)){_622=!_622;}}}return _622;},toJson:function(){var json={rings:dojo.clone(this.rings)},sr=this.spatialReference;if(sr){json.spatialReference=sr.toJson();}return json;}});dojo.declare("esri.geometry.Multipoint",esri.geometry.Geometry,{constructor:function(obj){dojo.mixin(this,esri.geometry.defaultMultipoint);this.points=[];if(obj){if(obj.points){dojo.mixin(this,obj);}else{this.spatialReference=obj;}if(this.spatialReference){this.spatialReference=new esri.SpatialReference(this.spatialReference);}}this._initSR();},_extent:null,addPoint:function(_627){this._extent=null;if(dojo.isArray(_627)){this.points.push(_627);}else{this.points.push([_627.x,_627.y]);}return this;},removePoint:function(_628){if(this._validateInputs(_628)){this._extent=null;return new esri.geometry.Point(this.points.splice(_628,1)[0],this.spatialReference);}},getExtent:function(){if(this._extent){return new esri.geometry.Extent(this._extent);}var _629=this.points,il=_629.length;if(!il){return;}var _62a=_629[0],xmax,ymax,xmin=(xmax=_62a[0]),ymin=(ymax=_62a[1]),min=Math.min,max=Math.max,sr=this.spatialReference,x,y,i;for(i=0;i<il;i++){_62a=_629[i];x=_62a[0];y=_62a[1];xmin=min(xmin,x);ymin=min(ymin,y);xmax=max(xmax,x);ymax=max(ymax,y);}this._extent={xmin:xmin,ymin:ymin,xmax:xmax,ymax:ymax,spatialReference:sr?sr.toJson():null};return new esri.geometry.Extent(this._extent);},_validateInputs:function(_62b){if(_62b===null||_62b<0||_62b>=this.points.length){return false;}return true;},getPoint:function(_62c){if(this._validateInputs(_62c)){var _62d=this.points[_62c];return new esri.geometry.Point(_62d[0],_62d[1],this.spatialReference);}},setPoint:function(_62e,_62f){if(this._validateInputs(_62e)){this._extent=null;this.points[_62e]=[_62f.x,_62f.y];return this;}},toJson:function(){var json={points:dojo.clone(this.points)},sr=this.spatialReference;if(sr){json.spatialReference=sr.toJson();}return json;}});dojo.declare("esri.geometry.Extent",esri.geometry.Geometry,{constructor:function(xmin,ymin,xmax,ymax,_630){dojo.mixin(this,esri.geometry.defaultExtent);if(dojo.isObject(xmin)){dojo.mixin(this,xmin);if(this.spatialReference){this.spatialReference=new esri.SpatialReference(this.spatialReference);}}else{this.update(xmin,ymin,xmax,ymax,_630);}this._initSR();},getWidth:function(){return Math.abs(this.xmax-this.xmin);},getHeight:function(){return Math.abs(this.ymax-this.ymin);},getCenter:function(){return new esri.geometry.Point((this.xmin+this.xmax)/2,(this.ymin+this.ymax)/2,this.spatialReference);},centerAt:function(_631){var _632=this.getCenter(),dx=_631.x-_632.x,dy=_631.y-_632.y;return new esri.geometry.Extent(this.xmin+dx,this.ymin+dy,this.xmax+dx,this.ymax+dy,this.spatialReference);},update:function(xmin,ymin,xmax,ymax,_633){this.xmin=xmin;this.ymin=ymin;this.xmax=xmax;this.ymax=ymax;this.spatialReference=_633;return this;},offset:function(ox,oy){return new esri.geometry.Extent(this.xmin+ox,this.ymin+oy,this.xmax+ox,this.ymax+oy,this.spatialReference);},expand:function(_634){var _635=(1-_634)/2,_636=this.getWidth()*_635,_637=this.getHeight()*_635;return new esri.geometry.Extent(this.xmin+_636,this.ymin+_637,this.xmax-_636,this.ymax-_637,this.spatialReference);},intersects:function(_638){var type=_638.type,_639=this.spatialReference,_63a=_638.spatialReference;if(_639&&_63a&&!_639.equals(_63a)&&_639._canProject(_63a)){_638=_639.isWebMercator()?esri.geometry.geographicToWebMercator(_638):esri.geometry.webMercatorToGeographic(_638,true);}switch(type){case "point":return this.contains(_638);case "multipoint":return this._intersectsMultipoint(_638);case "extent":return this._intersectsExtent(_638);case "polygon":return this._intersectsPolygon(_638);case "polyline":return this._intersectsPolyline(_638);}},_intersectsMultipoint:function(_63b){var len=_63b.points.length,i;for(i=0;i<len;i++){if(this.contains(_63b.getPoint(i))){return true;}}return false;},_intersectsExtent:function(_63c){var xmin,ymin,_63d,_63e,_63f=false;if(this.xmin<=_63c.xmin){xmin=_63c.xmin;if(this.xmax<xmin){_63f=true;}else{_63d=Math.min(this.xmax,_63c.xmax)-xmin;}}else{xmin=this.xmin;if(_63c.xmax<xmin){_63f=true;}else{_63d=Math.min(this.xmax,_63c.xmax)-xmin;}}if(this.ymin<=_63c.ymin){ymin=_63c.ymin;if(this.ymax<ymin){_63f=true;}else{_63e=Math.min(this.ymax,_63c.ymax)-ymin;}}else{ymin=this.ymin;if(_63c.ymax<ymin){_63f=true;}else{_63e=Math.min(this.ymax,_63c.ymax)-ymin;}}if(_63f){return null;}return new esri.geometry.Extent(xmin,ymin,xmin+_63d,ymin+_63e,this.spatialReference);},_intersectsPolygon:function(_640){var _641=[this.xmin,this.ymax],_642=[this.xmax,this.ymax],_643=[this.xmin,this.ymin],_644=[this.xmax,this.ymin],_645=[_641,_642,_643,_644],_646=[[_643,_641],[_641,_642],[_642,_644],[_644,_643]],i,j,_647=_640.rings,_648=_647.length,ring,len,_649=new esri.geometry.Point(0,0,this.spatialReference);len=_645.length;for(i=0;i<len;i++){_649.update(_645[i][0],_645[i][1]);if(_640.contains(_649)){return true;}}_649.setSpatialReference(_640.spatialReference);var pi,pj;for(i=0;i<_648;i++){ring=_647[i];len=ring.length;if(!len){continue;}pi=ring[0];_649.update(pi[0],pi[1]);if(this.contains(_649)){return true;}for(j=1;j<len;j++){pj=ring[j];_649.update(pj[0],pj[1]);if(this.contains(_649)||this._intersectsLine([pi,pj],_646)){return true;}pi=pj;}}return false;},_intersectsPolyline:function(_64a){var _64b=[[[this.xmin,this.ymin],[this.xmin,this.ymax]],[[this.xmin,this.ymax],[this.xmax,this.ymax]],[[this.xmax,this.ymax],[this.xmax,this.ymin]],[[this.xmax,this.ymin],[this.xmin,this.ymin]]];var i,j,_64c=_64a.paths,_64d=_64c.length,path,len;var pi,pj,_64e=new esri.geometry.Point(0,0,_64a.spatialReference);for(i=0;i<_64d;i++){path=_64c[i];len=path.length;if(!len){continue;}pi=path[0];_64e.update(pi[0],pi[1]);if(this.contains(_64e)){return true;}for(j=1;j<len;j++){pj=path[j];_64e.update(pj[0],pj[1]);if(this.contains(_64e)||this._intersectsLine([pi,pj],_64b)){return true;}pi=pj;}}return false;},_intersectsLine:function(line,_64f){var _650=esri.geometry._getLineIntersection2,i,len=_64f.length;for(i=0;i<len;i++){if(_650(line,_64f[i])){return true;}}return false;},contains:function(_651){if(!_651){return false;}var type=_651.type;if(type==="point"){var _652=this.spatialReference,_653=_651.spatialReference,_654,x=_651.x,y=_651.y;if(_652&&_653&&!_652.equals(_653)&&_652._canProject(_653)){_654=_652.isWebMercator()?esri.geometry.lngLatToXY(x,y):esri.geometry.xyToLngLat(x,y,true);x=_654[0];y=_654[1];}return (x>=this.xmin&&x<=this.xmax&&y>=this.ymin&&y<=this.ymax);}else{if(type==="extent"){return this._containsExtent(_651);}}return false;},_containsExtent:function(_655){var xmin=_655.xmin,ymin=_655.ymin,xmax=_655.xmax,ymax=_655.ymax,sr=_655.spatialReference,pt1=new esri.geometry.Point(xmin,ymin,sr),pt2=new esri.geometry.Point(xmin,ymax,sr),pt3=new esri.geometry.Point(xmax,ymax,sr),pt4=new esri.geometry.Point(xmax,ymin,sr);if(this.contains(pt1)&&this.contains(pt2)&&this.contains(pt3)&&this.contains(pt4)){return true;}return false;},union:function(_656){return new esri.geometry.Extent(Math.min(this.xmin,_656.xmin),Math.min(this.ymin,_656.ymin),Math.max(this.xmax,_656.xmax),Math.max(this.ymax,_656.ymax),this.spatialReference);},getExtent:function(){var sr=this.spatialReference;return new esri.geometry.Extent(this.xmin,this.ymin,this.xmax,this.ymax,sr&&new esri.SpatialReference(sr.toJson()));},_shiftCM:function(info){if(!this._shifted){var EG=esri.geometry,_657=EG.fromJson(this.toJson()),sr=_657.spatialReference;info=info||sr._getInfo();if(info){var _658=this._getCM(info);if(_658){var _659=sr._isWebMercator()?EG.webMercatorToGeographic(_658):_658;_657.xmin-=_658.x;_657.xmax-=_658.x;if(!sr._isWebMercator()){_659.x=this._normalizeX(_659.x,info).x;}_657.spatialReference.wkt=esri.substitute({Central_Meridian:_659.x},sr.wkid===4326?info.altTemplate:info.wkTemplate);_657.spatialReference.wkid=null;}}this._shifted=_657;}return this._shifted;},_getCM:function(info){var _65a,_65b=info.valid[0],_65c=info.valid[1],xmin=this.xmin,xmax=this.xmax;var _65d=(xmin>=_65b&&xmin<=_65c),_65e=(xmax>=_65b&&xmax<=_65c);if(!(_65d&&_65e)){_65a=this.getCenter();}return _65a;},_normalize:function(_65f,_660,info){var EG=esri.geometry,_661=EG.fromJson(this.toJson()),sr=_661.spatialReference;if(sr){info=info||sr._getInfo();if(info){var _662=dojo.map(this._getParts(info),function(part){return part.extent;});if(_662.length>2){if(_65f){return this._shiftCM(info);}else{return _661.update(info.valid[0],_661.ymin,info.valid[1],_661.ymax,sr);}}else{if(_662.length===2){if(_65f){return this._shiftCM(info);}else{return _660?_662:new EG.Polygon({"rings":dojo.map(_662,function(_663){return [[_663.xmin,_663.ymin],[_663.xmin,_663.ymax],[_663.xmax,_663.ymax],[_663.xmax,_663.ymin],[_663.xmin,_663.ymin]];}),"spatialReference":sr});}}else{return _662[0]||_661;}}}}return _661;},_getParts:function(info){if(!this._parts){var xmin=this.xmin,xmax=this.xmax,ymin=this.ymin,ymax=this.ymax,sr=this.spatialReference,_664=this.getWidth(),_665=xmin,_666=xmax,_667=0,_668=0,nrml,_669=[],_66a,_66b,_66c;info=info||sr._getInfo();_66a=info.valid[0];_66b=info.valid[1];nrml=this._normalizeX(xmin,info);xmin=nrml.x;_667=nrml.frameId;nrml=this._normalizeX(xmax,info);xmax=nrml.x;_668=nrml.frameId;_66c=(xmin===xmax&&_664>0);if(_664>(2*_66b)){var E1=new esri.geometry.Extent(_665<_666?xmin:xmax,ymin,_66b,ymax,sr),E2=new esri.geometry.Extent(_66a,ymin,_665<_666?xmax:xmin,ymax,sr),E3=new esri.geometry.Extent(0,ymin,_66b,ymax,sr),E4=new esri.geometry.Extent(_66a,ymin,0,ymax,sr),k,_66d=[],_66e=[];if(E1.contains(E3)){_66d.push(_667);}if(E1.contains(E4)){_66e.push(_667);}if(E2.contains(E3)){_66d.push(_668);}if(E2.contains(E4)){_66e.push(_668);}for(k=_667+1;k<_668;k++){_66d.push(k);_66e.push(k);}_669.push({extent:E1,frameIds:[_667]},{extent:E2,frameIds:[_668]},{extent:E3,frameIds:_66d},{extent:E4,frameIds:_66e});}else{if((xmin>xmax)||_66c){_669.push({extent:new esri.geometry.Extent(xmin,ymin,_66b,ymax,sr),frameIds:[_667]},{extent:new esri.geometry.Extent(_66a,ymin,xmax,ymax,sr),frameIds:[_668]});}else{_669.push({extent:new esri.geometry.Extent(xmin,ymin,xmax,ymax,sr),frameIds:[_667]});}}this._parts=_669;}return this._parts;},_normalizeX:function(x,info){var _66f=0,_670=info.valid[0],_671=info.valid[1],_672=2*_671,_673;if(x>_671){_673=Math.ceil(Math.abs(x-_671)/_672);x-=(_673*_672);_66f=_673;}else{if(x<_670){_673=Math.ceil(Math.abs(x-_670)/_672);x+=(_673*_672);_66f=-_673;}}return {x:x,frameId:_66f};},toJson:function(){var json={xmin:this.xmin,ymin:this.ymin,xmax:this.xmax,ymax:this.ymax},sr=this.spatialReference;if(sr){json.spatialReference=sr.toJson();}return json;}});dojo.declare("esri.geometry.Rect",esri.geometry.Geometry,{constructor:function(json,y,_674,_675,_676){dojo.mixin(this,_583.gfx.defaultRect);if(dojo.isObject(json)){dojo.mixin(this,json);if(this.spatialReference){this.spatialReference=new esri.SpatialReference(this.spatialReference);}}else{this.x=json;this.y=y;this.width=_674;this.height=_675;this.spatialReference=_676;}this._initSR();},getCenter:function(){return new esri.geometry.Point(this.x+this.width/2,this.y+this.height/2,this.spatialReference);},offset:function(ox,oy){return new esri.geometry.Rect(this.x+ox,this.y+oy,this.width,this.height,this.spatialReference);},intersects:function(rect){if((rect.x+rect.width)<=this.x){return false;}if((rect.y+rect.height)<=this.y){return false;}if(rect.y>=(this.y+this.height)){return false;}if(rect.x>=(this.x+this.width)){return false;}return true;},getExtent:function(){return esri.geometry._rectToExtent(this);},update:function(x,y,_677,_678,_679){this.x=x;this.y=y;this.width=_677;this.height=_678;this.spatialReference=_679;return this;}});});},"dojo/hccss":function(){define(["require","./_base/config","./dom-class","./dom-construct","./dom-style","./has","./ready","./_base/window"],function(_67a,_67b,_67c,_67d,_67e,has,_67f,win){has.add("highcontrast",function(){var div=win.doc.createElement("div");div.style.cssText="border: 1px solid; border-color:red green; position: absolute; height: 5px; top: -999px;"+"background-image: url("+(_67b.blankGif||_67a.toUrl("./resources/blank.gif"))+");";win.body().appendChild(div);var cs=_67e.getComputedStyle(div),_680=cs.backgroundImage,hc=(cs.borderTopColor==cs.borderRightColor)||(_680&&(_680=="none"||_680=="url(invalid-url:)"));_67d.destroy(div);return hc;});_67f(90,function(){if(has("highcontrast")){_67c.add(win.body(),"dj_a11y");}});return has;});},"url:dijit/form/templates/HorizontalSlider.html":"<table class=\"dijit dijitReset dijitSlider dijitSliderH\" cellspacing=\"0\" cellpadding=\"0\" border=\"0\" rules=\"none\" data-dojo-attach-event=\"onkeypress:_onKeyPress,onkeyup:_onKeyUp\"\n\trole=\"presentation\"\n\t><tr class=\"dijitReset\"\n\t\t><td class=\"dijitReset\" colspan=\"2\"></td\n\t\t><td data-dojo-attach-point=\"topDecoration\" class=\"dijitReset dijitSliderDecoration dijitSliderDecorationT dijitSliderDecorationH\"></td\n\t\t><td class=\"dijitReset\" colspan=\"2\"></td\n\t></tr\n\t><tr class=\"dijitReset\"\n\t\t><td class=\"dijitReset dijitSliderButtonContainer dijitSliderButtonContainerH\"\n\t\t\t><div class=\"dijitSliderDecrementIconH\" style=\"display:none\" data-dojo-attach-point=\"decrementButton\"><span class=\"dijitSliderButtonInner\">-</span></div\n\t\t></td\n\t\t><td class=\"dijitReset\"\n\t\t\t><div class=\"dijitSliderBar dijitSliderBumper dijitSliderBumperH dijitSliderLeftBumper\" data-dojo-attach-event=\"press:_onClkDecBumper\"></div\n\t\t></td\n\t\t><td class=\"dijitReset\"\n\t\t\t><input data-dojo-attach-point=\"valueNode\" type=\"hidden\" ${!nameAttrSetting}\n\t\t\t/><div class=\"dijitReset dijitSliderBarContainerH\" role=\"presentation\" data-dojo-attach-point=\"sliderBarContainer\"\n\t\t\t\t><div role=\"presentation\" data-dojo-attach-point=\"progressBar\" class=\"dijitSliderBar dijitSliderBarH dijitSliderProgressBar dijitSliderProgressBarH\" data-dojo-attach-event=\"press:_onBarClick\"\n\t\t\t\t\t><div class=\"dijitSliderMoveable dijitSliderMoveableH\"\n\t\t\t\t\t\t><div data-dojo-attach-point=\"sliderHandle,focusNode\" class=\"dijitSliderImageHandle dijitSliderImageHandleH\" data-dojo-attach-event=\"press:_onHandleClick\" role=\"slider\"></div\n\t\t\t\t\t></div\n\t\t\t\t></div\n\t\t\t\t><div role=\"presentation\" data-dojo-attach-point=\"remainingBar\" class=\"dijitSliderBar dijitSliderBarH dijitSliderRemainingBar dijitSliderRemainingBarH\" data-dojo-attach-event=\"press:_onBarClick\"></div\n\t\t\t></div\n\t\t></td\n\t\t><td class=\"dijitReset\"\n\t\t\t><div class=\"dijitSliderBar dijitSliderBumper dijitSliderBumperH dijitSliderRightBumper\" data-dojo-attach-event=\"press:_onClkIncBumper\"></div\n\t\t></td\n\t\t><td class=\"dijitReset dijitSliderButtonContainer dijitSliderButtonContainerH\"\n\t\t\t><div class=\"dijitSliderIncrementIconH\" style=\"display:none\" data-dojo-attach-point=\"incrementButton\"><span class=\"dijitSliderButtonInner\">+</span></div\n\t\t></td\n\t></tr\n\t><tr class=\"dijitReset\"\n\t\t><td class=\"dijitReset\" colspan=\"2\"></td\n\t\t><td data-dojo-attach-point=\"containerNode,bottomDecoration\" class=\"dijitReset dijitSliderDecoration dijitSliderDecorationB dijitSliderDecorationH\"></td\n\t\t><td class=\"dijitReset\" colspan=\"2\"></td\n\t></tr\n></table>\n","esri/tasks/identify":function(){define("esri/tasks/identify",["dijit","dojo","dojox","dojo/require!esri/tasks/_task"],function(_681,dojo,_682){dojo.provide("esri.tasks.identify");dojo.require("esri.tasks._task");dojo.declare("esri.tasks.IdentifyTask",esri.tasks._Task,{constructor:function(url,_683){this._url.path+="/identify";this._handler=dojo.hitch(this,this._handler);this.gdbVersion=_683&&_683.gdbVersion;},__msigns:[{n:"execute",c:3,a:[{i:0,p:["geometry"]}],e:2}],_handler:function(_684,io,_685,_686,dfd){try{var _687=[],_688=esri.tasks.IdentifyResult;dojo.forEach(_684.results,function(_689,i){_687[i]=new _688(_689);});this._successHandler([_687],"onComplete",_685,dfd);}catch(err){this._errorHandler(err,_686,dfd);}},execute:function(_68a,_68b,_68c,_68d){var _68e=_68d.assembly,_68f=this._encode(dojo.mixin({},this._url.query,{f:"json"},_68a.toJson(_68e&&_68e[0]))),_690=this._handler,_691=this._errorHandler;if(this.gdbVersion){_68f.gdbVersion=this.gdbVersion;}return esri.request({url:this._url.path,content:_68f,callbackParamName:"callback",load:function(r,i){_690(r,i,_68b,_68c,_68d.dfd);},error:function(r){_691(r,_68c,_68d.dfd);}});},onComplete:function(){}});esri._createWrappers("esri.tasks.IdentifyTask");dojo.declare("esri.tasks.IdentifyParameters",null,{constructor:function(){this.layerOption=esri.tasks.IdentifyParameters.LAYER_OPTION_TOP;},geometry:null,spatialReference:null,layerIds:null,tolerance:null,returnGeometry:false,mapExtent:null,width:esri.config.defaults.map.width,height:esri.config.defaults.map.height,dpi:96,layerDefinitions:null,timeExtent:null,layerTimeOptions:null,dynamicLayerInfos:null,toJson:function(_692){var g=_692&&_692["geometry"]||this.geometry,ext=this.mapExtent,sr=this.spatialReference,_693=this.layerIds,json={geometry:g,tolerance:this.tolerance,returnGeometry:this.returnGeometry,mapExtent:ext,imageDisplay:this.width+","+this.height+","+this.dpi,maxAllowableOffset:this.maxAllowableOffset};if(g){json.geometryType=esri.geometry.getJsonType(g);}if(sr!==null){json.sr=sr.wkid||dojo.toJson(sr.toJson());}else{if(g){json.sr=g.spatialReference.wkid||dojo.toJson(g.spatialReference.toJson());}else{if(ext){json.sr=ext.spatialReference.wkid||dojo.toJson(ext.spatialReference.toJson());}}}json.layers=this.layerOption;if(_693){json.layers+=":"+_693.join(",");}json.layerDefs=esri._serializeLayerDefinitions(this.layerDefinitions);var _694=this.timeExtent;json.time=_694?_694.toJson().join(","):null;json.layerTimeOptions=esri._serializeTimeOptions(this.layerTimeOptions);if(this.dynamicLayerInfos&&this.dynamicLayerInfos.length>0){var _695,_696={extent:ext,width:this.width,spatialReference:ext.spatialReference},_697=esri.geometry.getScale(_696),_698=esri._getLayersForScale(_697,this.dynamicLayerInfos),_699=[];dojo.forEach(this.dynamicLayerInfos,function(info){if(!info.subLayerIds){var _69a=info.id;if((!this.layerIds||(this.layerIds&&dojo.indexOf(this.layerIds,_69a)!==-1))&&dojo.indexOf(_698,_69a)!==-1){var _69b={id:_69a};_69b.source=info.source&&info.source.toJson();var _69c;if(this.layerDefinitions&&this.layerDefinitions[_69a]){_69c=this.layerDefinitions[_69a];}if(_69c){_69b.definitionExpression=_69c;}var _69d;if(this.layerTimeOptions&&this.layerTimeOptions[_69a]){_69d=this.layerTimeOptions[_69a];}if(_69d){_69b.layerTimeOptions=_69d.toJson();}_699.push(_69b);}}},this);_695=dojo.toJson(_699);if(_695==="[]"){_695="[{}]";}json.dynamicLayers=_695;}return json;}});dojo.mixin(esri.tasks.IdentifyParameters,{LAYER_OPTION_TOP:"top",LAYER_OPTION_VISIBLE:"visible",LAYER_OPTION_ALL:"all"});dojo.declare("esri.tasks.IdentifyResult",null,{constructor:function(json){dojo.mixin(this,json);this.feature=new esri.Graphic(json.geometry?esri.geometry.fromJson(json.geometry):null,null,json.attributes);delete this.geometry;delete this.attributes;}});});},"dijit/main":function(){define("dijit/main",["dojo/_base/kernel"],function(dojo){return dojo.dijit;});},"dijit/_OnDijitClickMixin":function(){define("dijit/_OnDijitClickMixin",["dojo/on","dojo/_base/array","dojo/keys","dojo/_base/declare","dojo/has","dojo/_base/unload","dojo/_base/window","./a11yclick"],function(on,_69e,keys,_69f,has,_6a0,win,_6a1){var ret=_69f("dijit._OnDijitClickMixin",null,{connect:function(obj,_6a2,_6a3){return this.inherited(arguments,[obj,_6a2=="ondijitclick"?_6a1:_6a2,_6a3]);}});ret.a11yclick=_6a1;return ret;});},"esri/tasks/_task":function(){define(["dijit","dojo","dojox","dojo/require!esri/graphic,esri/utils"],function(_6a4,dojo,_6a5){dojo.provide("esri.tasks._task");dojo.require("esri.graphic");dojo.require("esri.utils");dojo.declare("esri.tasks._Task",null,{constructor:function(url){if(url&&dojo.isString(url)){this._url=esri.urlToObject(this.url=url);}this.normalization=true;this._errorHandler=dojo.hitch(this,this._errorHandler);},_useSSL:function(){var _6a6=this._url,re=/^http:/i,rep="https:";if(this.url){this.url=this.url.replace(re,rep);}if(_6a6&&_6a6.path){_6a6.path=_6a6.path.replace(re,rep);}},_encode:function(_6a7,_6a8,_6a9){var _6aa,type,_6ab={},i,p,pl;for(i in _6a7){if(i==="declaredClass"){continue;}_6aa=_6a7[i];type=typeof (_6aa);if(_6aa!==null&&_6aa!==undefined&&type!=="function"){if(dojo.isArray(_6aa)){_6ab[i]=[];pl=_6aa.length;for(p=0;p<pl;p++){_6ab[i][p]=this._encode(_6aa[p]);}}else{if(type==="object"){if(_6aa.toJson){var json=_6aa.toJson(_6a9&&_6a9[i]);if(_6aa instanceof esri.tasks.FeatureSet){if(json.spatialReference){json.sr=json.spatialReference;delete json.spatialReference;}}_6ab[i]=_6a8?json:dojo.toJson(json);}}else{_6ab[i]=_6aa;}}}}return _6ab;},_successHandler:function(args,_6ac,_6ad,dfd){if(_6ac){this[_6ac].apply(this,args);}if(_6ad){_6ad.apply(null,args);}if(dfd){esri._resDfd(dfd,args);}},_errorHandler:function(err,_6ae,dfd){this.onError(err);if(_6ae){_6ae(err);}if(dfd){dfd.errback(err);}},setNormalization:function(_6af){this.normalization=_6af;},onError:function(){}});dojo.declare("esri.tasks.FeatureSet",null,{constructor:function(json){if(json){dojo.mixin(this,json);var _6b0=this.features,sr=json.spatialReference,_6b1=esri.Graphic,_6b2=esri.geometry.getGeometryType(json.geometryType);sr=(this.spatialReference=new esri.SpatialReference(sr));this.geometryType=json.geometryType;if(json.fields){this.fields=json.fields;}dojo.forEach(_6b0,function(_6b3,i){var _6b4=_6b3.geometry&&_6b3.geometry.spatialReference;_6b0[i]=new _6b1((_6b2&&_6b3.geometry)?new _6b2(_6b3.geometry):null,_6b3.symbol&&esri.symbol.fromJson(_6b3.symbol),_6b3.attributes);if(_6b0[i].geometry&&!_6b4){_6b0[i].geometry.setSpatialReference(sr);}});}else{this.features=[];}},displayFieldName:null,geometryType:null,spatialReference:null,fieldAliases:null,toJson:function(_6b5){var json={};if(this.displayFieldName){json.displayFieldName=this.displayFieldName;}if(this.fields){json.fields=this.fields;}if(this.spatialReference){json.spatialReference=this.spatialReference.toJson();}else{if(this.features[0]&&this.features[0].geometry){json.spatialReference=this.features[0].geometry.spatialReference.toJson();}}if(this.features[0]){if(this.features[0].geometry){json.geometryType=esri.geometry.getJsonType(this.features[0].geometry);}json.features=esri._encodeGraphics(this.features,_6b5);}json.exceededTransferLimit=this.exceededTransferLimit;return esri._sanitize(json);}});esri.tasks._SpatialRelationship={SPATIAL_REL_INTERSECTS:"esriSpatialRelIntersects",SPATIAL_REL_CONTAINS:"esriSpatialRelContains",SPATIAL_REL_CROSSES:"esriSpatialRelCrosses",SPATIAL_REL_ENVELOPEINTERSECTS:"esriSpatialRelEnvelopeIntersects",SPATIAL_REL_INDEXINTERSECTS:"esriSpatialRelIndexIntersects",SPATIAL_REL_OVERLAPS:"esriSpatialRelOverlaps",SPATIAL_REL_TOUCHES:"esriSpatialRelTouches",SPATIAL_REL_WITHIN:"esriSpatialRelWithin",SPATIAL_REL_RELATION:"esriSpatialRelRelation"};});},"dojo/dnd/autoscroll":function(){define(["../_base/lang","../sniff","../_base/window","../dom-geometry","../dom-style","../window"],function(lang,has,win,_6b6,_6b7,_6b8){var _6b9={};lang.setObject("dojo.dnd.autoscroll",_6b9);_6b9.getViewport=_6b8.getBox;_6b9.V_TRIGGER_AUTOSCROLL=32;_6b9.H_TRIGGER_AUTOSCROLL=32;_6b9.V_AUTOSCROLL_VALUE=16;_6b9.H_AUTOSCROLL_VALUE=16;var _6ba,doc=win.doc,_6bb=Infinity,_6bc=Infinity;_6b9.autoScrollStart=function(d){doc=d;_6ba=_6b8.getBox(doc);var html=win.body(doc).parentNode;_6bb=Math.max(html.scrollHeight-_6ba.h,0);_6bc=Math.max(html.scrollWidth-_6ba.w,0);};_6b9.autoScroll=function(e){var v=_6ba||_6b8.getBox(doc),html=win.body(doc).parentNode,dx=0,dy=0;if(e.clientX<_6b9.H_TRIGGER_AUTOSCROLL){dx=-_6b9.H_AUTOSCROLL_VALUE;}else{if(e.clientX>v.w-_6b9.H_TRIGGER_AUTOSCROLL){dx=Math.min(_6b9.H_AUTOSCROLL_VALUE,_6bc-html.scrollLeft);}}if(e.clientY<_6b9.V_TRIGGER_AUTOSCROLL){dy=-_6b9.V_AUTOSCROLL_VALUE;}else{if(e.clientY>v.h-_6b9.V_TRIGGER_AUTOSCROLL){dy=Math.min(_6b9.V_AUTOSCROLL_VALUE,_6bb-html.scrollTop);}}window.scrollBy(dx,dy);};_6b9._validNodes={"div":1,"p":1,"td":1};_6b9._validOverflow={"auto":1,"scroll":1};_6b9.autoScrollNodes=function(e){var b,t,w,h,rx,ry,dx=0,dy=0,_6bd,_6be;for(var n=e.target;n;){if(n.nodeType==1&&(n.tagName.toLowerCase() in _6b9._validNodes)){var s=_6b7.getComputedStyle(n),_6bf=(s.overflow.toLowerCase() in _6b9._validOverflow),_6c0=(s.overflowX.toLowerCase() in _6b9._validOverflow),_6c1=(s.overflowY.toLowerCase() in _6b9._validOverflow);if(_6bf||_6c0||_6c1){b=_6b6.getContentBox(n,s);t=_6b6.position(n,true);}if(_6bf||_6c0){w=Math.min(_6b9.H_TRIGGER_AUTOSCROLL,b.w/2);rx=e.pageX-t.x;if(has("webkit")||has("opera")){rx+=win.body().scrollLeft;}dx=0;if(rx>0&&rx<b.w){if(rx<w){dx=-w;}else{if(rx>b.w-w){dx=w;}}_6bd=n.scrollLeft;n.scrollLeft=n.scrollLeft+dx;}}if(_6bf||_6c1){h=Math.min(_6b9.V_TRIGGER_AUTOSCROLL,b.h/2);ry=e.pageY-t.y;if(has("webkit")||has("opera")){ry+=win.body().scrollTop;}dy=0;if(ry>0&&ry<b.h){if(ry<h){dy=-h;}else{if(ry>b.h-h){dy=h;}}_6be=n.scrollTop;n.scrollTop=n.scrollTop+dy;}}if(dx||dy){return;}}try{n=n.parentNode;}catch(x){n=null;}}_6b9.autoScroll(e);};return _6b9;});},"dojo/dnd/TimedMoveable":function(){define(["../_base/declare","./Moveable"],function(_6c2,_6c3){var _6c4=_6c3.prototype.onMove;return _6c2("dojo.dnd.TimedMoveable",_6c3,{timeout:40,constructor:function(node,_6c5){if(!_6c5){_6c5={};}if(_6c5.timeout&&typeof _6c5.timeout=="number"&&_6c5.timeout>=0){this.timeout=_6c5.timeout;}},onMoveStop:function(_6c6){if(_6c6._timer){clearTimeout(_6c6._timer);_6c4.call(this,_6c6,_6c6._leftTop);}_6c3.prototype.onMoveStop.apply(this,arguments);},onMove:function(_6c7,_6c8){_6c7._leftTop=_6c8;if(!_6c7._timer){var _6c9=this;_6c7._timer=setTimeout(function(){_6c7._timer=null;_6c4.call(_6c9,_6c7,_6c7._leftTop);},this.timeout);}}});});},"dojo/cookie":function(){define(["./_base/kernel","./regexp"],function(dojo,_6ca){dojo.cookie=function(name,_6cb,_6cc){var c=document.cookie,ret;if(arguments.length==1){var _6cd=c.match(new RegExp("(?:^|; )"+_6ca.escapeString(name)+"=([^;]*)"));ret=_6cd?decodeURIComponent(_6cd[1]):undefined;}else{_6cc=_6cc||{};var exp=_6cc.expires;if(typeof exp=="number"){var d=new Date();d.setTime(d.getTime()+exp*24*60*60*1000);exp=_6cc.expires=d;}if(exp&&exp.toUTCString){_6cc.expires=exp.toUTCString();}_6cb=encodeURIComponent(_6cb);var _6ce=name+"="+_6cb,_6cf;for(_6cf in _6cc){_6ce+="; "+_6cf;var _6d0=_6cc[_6cf];if(_6d0!==true){_6ce+="="+_6d0;}}document.cookie=_6ce;}return ret;};dojo.cookie.isSupported=function(){if(!("cookieEnabled" in navigator)){this("__djCookieTest__","CookiesAllowed");navigator.cookieEnabled=this("__djCookieTest__")=="CookiesAllowed";if(navigator.cookieEnabled){this("__djCookieTest__","",{expires:-1});}}return navigator.cookieEnabled;};return dojo.cookie;});},"dojo/cache":function(){define(["./_base/kernel","./text"],function(dojo){return dojo.cache;});},"esri/layers/dynamic":function(){define(["dijit","dojo","dojox","dojo/require!esri/layers/layer,esri/geometry,dojox/xml/parser,dojox/gfx/matrix"],function(_6d1,dojo,_6d2){dojo.provide("esri.layers.dynamic");dojo.require("esri.layers.layer");dojo.require("esri.geometry");dojo.require("dojox.xml.parser");dojo.require("dojox.gfx.matrix");dojo.declare("esri.layers.DynamicMapServiceLayer",esri.layers.Layer,{constructor:function(url,_6d3){this.useMapTime=(_6d3&&_6d3.hasOwnProperty("useMapTime"))?(!!_6d3.useMapTime):true;var _6d4=dojo.hitch;this._exportMapImageHandler=_6d4(this,this._exportMapImageHandler);this._imgSrcFunc=_6d4(this,this._imgSrcFunc);this._divAlphaImageFunc=_6d4(this,this._divAlphaImageFunc);this._tileLoadHandler=_6d4(this,this._tileLoadHandler);this._tileErrorHandler=_6d4(this,this._tileErrorHandler);},opacity:1,isPNG32:false,_setMap:function(map,_6d5,_6d6){this.inherited(arguments);this._map=map;var d=(this._div=dojo.create("div",null,_6d5)),_6d7=esri._css.names,css={position:"absolute",width:map.width+"px",height:map.height+"px",overflow:"visible",opacity:this.opacity},isIE=dojo.isIE,_6d8=dojo.connect,vd=map.__visibleDelta;if(isIE&&isIE>7){delete css.opacity;}if(map.navigationMode==="css-transforms"){css[_6d7.transform]=esri._css.translate(vd.x,vd.y);dojo.style(d,css);this._left=vd.x;this._top=vd.y;}else{css.left="0px";css.top="0px";dojo.style(d,css);this._left=this._top=0;}dojo.style(d,css);this._onResizeHandler_connect=_6d8(map,"onResize",this,"_onResizeHandler");this._opacityChangeHandler_connect=_6d8(this,"onOpacityChange",this,"_opacityChangeHandler");this._img_loading=null;this._dragOrigin={x:0,y:0};this.evaluateSuspension();if(this.suspended&&!map.loaded){var _6d9=dojo.connect(map,"onLoad",this,function(){dojo.disconnect(_6d9);_6d9=null;this.evaluateSuspension();});}return d;},_unsetMap:function(map,_6da){dojo.destroy(this._div);this._map=this._div=null;var _6db=dojo.disconnect;_6db(this._onResizeHandler_connect);_6db(this._opacityChangeHandler_connect);this._onResizeHandler_connect=this._opacityChangeHandler_connect=null;this._fireUpdateEnd();this._toggleTime();clearTimeout(this._wakeTimer);this._wakeTimer=null;this._disableDrawConnectors();this.inherited(arguments);},_onResizeHandler:function(_6dc,_6dd,_6de){dojo.style(this._div,{width:_6dd+"px",height:_6de+"px"});this._onExtentChangeHandler(_6dc);},onSuspend:function(){this.inherited(arguments);this._fireUpdateEnd();this._toggleTime();esri.hide(this._div);clearTimeout(this._wakeTimer);this._wakeTimer=null;this._disableDrawConnectors();},onResume:function(){this.inherited(arguments);var map=this._map;this._toggleTime();if(map.navigationMode==="css-transforms"){var vd=map.__visibleDelta;this._left=vd.x;this._top=vd.y;dojo.style(this._div,esri._css.names.transform,esri._css.translate(this._left,this._top));}this._enableDrawConnectors();this._wakeTimer=this._wakeTimer||setTimeout(dojo.hitch(this,function(){if(!this.suspended){this._onExtentChangeHandler(this._map.extent);}}),0);},_enableDrawConnectors:function(){var _6df=dojo.connect,map=this._map;if(map){this._onPanHandler_connect=_6df(map,"onPan",this,"_onPanHandler");this._onExtentChangeHandler_connect=_6df(map,"onExtentChange",this,"_onExtentChangeHandler");if(map.navigationMode==="css-transforms"){this._onScaleHandler_connect=_6df(map,"onScale",this,this._onScaleHandler);}else{this._onZoomHandler_connect=_6df(map,"onZoom",this,"_onZoomHandler");}}},_disableDrawConnectors:function(){var _6e0=dojo.disconnect;_6e0(this._onPanHandler_connect);_6e0(this._onExtentChangeHandler_connect);_6e0(this._onZoomHandler_connect);_6e0(this._onScaleHandler_connect);this._onPanHandler_connect=this._onExtentChangeHandler_connect=this._onZoomHandler_connect=this._onScaleHandler_connect=null;},_toggleTime:function(){var map=this._map;if(this.timeInfo&&this.useMapTime&&map&&!this.suspended){if(!this._timeConnect){this._timeConnect=dojo.connect(map,"onTimeExtentChange",this,this._onTimeExtentChangeHandler);}this._setTime(map.timeExtent);}else{dojo.disconnect(this._timeConnect);this._timeConnect=null;this._setTime(null);}},_setTime:function(_6e1){if(this._params){this._params.time=_6e1?_6e1.toJson().join(","):null;}},_onPanHandler:function(_6e2,_6e3){this._panDx=_6e3.x;this._panDy=_6e3.y;var _6e4=this._dragOrigin,vd=this._map.__visibleDelta,img=this._img;if(img){if(this._map.navigationMode==="css-transforms"){this._left=vd.x+_6e3.x;this._top=vd.y+_6e3.y;dojo.style(this._div,esri._css.names.transform,esri._css.translate(this._left,this._top));}else{dojo.style(img,{left:(_6e4.x+_6e3.x)+"px",top:(_6e4.y+_6e3.y)+"px"});}}},_onExtentChangeHandler:function(_6e5,_6e6,_6e7){if(this.suspended){return;}clearTimeout(this._wakeTimer);this._wakeTimer=null;var _6e8=this._map,_6e9=this._img,_6ea=_6e9&&_6e9.style,_6eb=this._dragOrigin;if(_6e6&&!_6e7&&_6e9&&(_6e6.x!==this._panDx||_6e6.y!==this._panDy)){if(_6e8.navigationMode==="css-transforms"){var vd=_6e8.__visibleDelta;this._left=vd.x;this._top=vd.y;dojo.style(this._div,esri._css.names.transform,esri._css.translate(this._left,this._top));}else{dojo.style(_6e9,{left:(_6eb.x+_6e6.x)+"px",top:(_6eb.y+_6e6.y)+"px"});}}if(_6e9){_6eb.x=parseInt(_6ea.left,10);_6eb.y=parseInt(_6ea.top,10);}else{_6eb.x=(_6eb.y=0);}if(_6e8.navigationMode==="css-transforms"){if(_6e7&&_6e9){dojo.style(_6e9,esri._css.names.transition,"none");_6e9._multiply=_6e9._multiply?_6d2.gfx.matrix.multiply(_6e9._matrix,_6e9._multiply):_6e9._matrix;}}this._fireUpdateStart();var _6ec=this._img_loading;if(_6ec){dojo.disconnect(_6ec._onload_connect);dojo.disconnect(_6ec._onerror_connect);dojo.disconnect(_6ec._onabort_connect);dojo.destroy(_6ec);this._img_loading=null;var _6ed=this._jsonRequest;if(_6ed){try{_6ed.cancel();}catch(e){}this._jsonRequest=null;}}if(this.version>=10&&_6e8.wrapAround180){_6e5=_6e5._normalize(true);}if(this.isPNG32){var div=(this._img_loading=dojo.create("div"));div.id=_6e8.id+"_"+this.id+"_"+new Date().getTime();dojo.style(div,{position:"absolute",left:"0px",top:"0px",width:_6e8.width+"px",height:_6e8.height+"px"});var _6ee=div.appendChild(dojo.create("div"));dojo.style(_6ee,{opacity:0,width:_6e8.width+"px",height:_6e8.height+"px"});this.getImageUrl(_6e5,_6e8.width,_6e8.height,this._divAlphaImageFunc);div=null;}else{var img=(this._img_loading=dojo.create("img")),_6ef=esri._css.names,isIE=dojo.isIE,css={position:"absolute",width:_6e8.width+"px",height:_6e8.height+"px"};if(isIE&&isIE>7){css.opacity=this.opacity;}if(_6e8.navigationMode==="css-transforms"){css[_6ef.transform]=esri._css.translate(-this._left,-this._top);img._tdx=-this._left;img._tdy=-this._top;css[_6ef.transition]=_6ef.transformName+" "+esri.config.defaults.map.zoomDuration+"ms ease";}else{css.left="0px";css.top="0px";}img.id=_6e8.id+"_"+this.id+"_"+new Date().getTime();dojo.style(img,css);img._onload_connect=dojo.connect(img,"onload",this,"_onLoadHandler");img._onerror_connect=dojo.connect(img,"onerror",this,"_onErrorHandler");img._onabort_connect=dojo.connect(img,"onabort",this,"_onErrorHandler");this._startRect={left:_6eb.x,top:_6eb.y,width:_6e9?parseInt(_6ea.width,10):_6e8.width,height:_6e9?parseInt(_6ea.height,10):_6e8.height,zoom:(_6ea&&_6ea.zoom)?parseFloat(_6ea.zoom):1};this.getImageUrl(_6e5,_6e8.width,_6e8.height,this._imgSrcFunc);img=null;}},_onTimeExtentChangeHandler:function(_6f0){if(this.suspended){return;}this._setTime(_6f0);this.refresh(true);},getImageUrl:function(_6f1,wd,ht,_6f2){},_imgSrcFunc:function(src){this._img_loading.src=src;},_divAlphaImageFunc:function(src){dojo.style(this._img_loading,"filter","progid:DXImageTransform.Microsoft.AlphaImageLoader(src='"+src+"', sizingMethod='scale')");this._onLoadHandler({currentTarget:this._img_loading});},_onLoadHandler:function(evt){var img=evt.currentTarget,_6f3=dojo.disconnect,_6f4=this._map;_6f3(img._onload_connect);_6f3(img._onerror_connect);_6f3(img._onabort_connect);if(!_6f4||_6f4.__panning||_6f4.__zooming){dojo.destroy(img);this._fireUpdateEnd();return;}_6d2.xml.parser.removeChildren(this._div);this._img=img;this._startRect={left:0,top:0,width:_6f4.width,height:_6f4.height,zoom:1};this._div.appendChild(img);if(!this.suspended){esri.show(this._div);}img._onload_connect=img._onerror_connect=img._onabort_connect=this._img_loading=null;var _6f5=this._dragOrigin;_6f5.x=(_6f5.y=0);this.onUpdate();this._fireUpdateEnd();},_onErrorHandler:function(evt){var img=evt.currentTarget,_6f6=dojo.disconnect;dojo.style(img,"visibility","hidden");_6f6(img._onload_connect);_6f6(img._onerror_connect);_6f6(img._onabort_connect);img._onload_connect=img._onerror_connect=img._onabort_connect=null;var _6f7=new Error(esri.bundle.layers.dynamic.imageError+": "+img.src);this.onError(_6f7);this._fireUpdateEnd(_6f7);},setUseMapTime:function(use,_6f8){this.useMapTime=use;this._toggleTime();if(!_6f8){this.refresh(true);}},refresh:function(){if(this._map){this._onExtentChangeHandler(this._map.extent);}},_onScaleHandler:function(mtx,_6f9){var css={},_6fa=esri._css.names,img=this._img;if(!img){return;}dojo.style(img,_6fa.transition,_6f9?"none":(_6fa.transformName+" "+esri.config.defaults.map.zoomDuration+"ms ease"));img._matrix=mtx;mtx=img._multiply?_6d2.gfx.matrix.multiply(mtx,img._multiply):mtx;if(img._tdx||img._tdy){mtx=_6d2.gfx.matrix.multiply(mtx,{"xx":1,"xy":0,"yx":0,"yy":1,"dx":img._tdx,"dy":img._tdy});}css[_6fa.transform]=esri._css.matrix(mtx);dojo.style(img,css);},_onZoomHandler:function(_6fb,_6fc,_6fd){var _6fe=this._startRect,_6ff=_6fe.width*_6fc,_700=_6fe.height*_6fc,img=this._img,isIE=dojo.isIE;if(img){if(isIE&&isIE<8){dojo.style(img,{left:(_6fe.left-((_6ff-_6fe.width)*(_6fd.x-_6fe.left)/_6fe.width))+"px",top:(_6fe.top-((_700-_6fe.height)*(_6fd.y-_6fe.top)/_6fe.height))+"px",zoom:_6fc*_6fe.zoom});}else{dojo.style(img,{left:(_6fe.left-((_6ff-_6fe.width)*(_6fd.x-_6fe.left)/_6fe.width))+"px",top:(_6fe.top-((_700-_6fe.height)*(_6fd.y-_6fe.top)/_6fe.height))+"px",width:_6ff+"px",height:_700+"px"});}}},_exportMapImage:function(url,_701,_702){var _703=this._exportMapImageHandler;_701.token=this._getToken();esri.request({url:url,content:_701,callbackParamName:"callback",load:function(){_703(arguments[0],arguments[1],_702);},error:esri.config.defaults.io.errorHandler});},_exportMapImageHandler:function(_704,io,_705){var _706=new esri.layers.MapImage(_704);this.onMapImageExport(_706);if(_705){_705(_706);}},onMapImageExport:function(){},setOpacity:function(o){if(this.opacity!=o){this.onOpacityChange(this.opacity=o);}},onOpacityChange:function(){},_opacityChangeHandler:function(_707){dojo.style(this._div,"opacity",_707);}});});},"dijit/_base/popup":function(){define("dijit/_base/popup",["dojo/dom-class","dojo/_base/window","../popup","../BackgroundIframe"],function(_708,win,_709){var _70a=_709._createWrapper;_709._createWrapper=function(_70b){if(!_70b.declaredClass){_70b={_popupWrapper:(_70b.parentNode&&_708.contains(_70b.parentNode,"dijitPopup"))?_70b.parentNode:null,domNode:_70b,destroy:function(){},ownerDocument:_70b.ownerDocument,ownerDocumentBody:win.body(_70b.ownerDocument)};}return _70a.call(this,_70b);};var _70c=_709.open;_709.open=function(args){if(args.orient&&typeof args.orient!="string"&&!("length" in args.orient)){var ary=[];for(var key in args.orient){ary.push({aroundCorner:key,corner:args.orient[key]});}args.orient=ary;}return _70c.call(this,args);};return _709;});},"url:dijit/form/templates/Button.html":"<span class=\"dijit dijitReset dijitInline\" role=\"presentation\"\n\t><span class=\"dijitReset dijitInline dijitButtonNode\"\n\t\tdata-dojo-attach-event=\"ondijitclick:_onClick\" role=\"presentation\"\n\t\t><span class=\"dijitReset dijitStretch dijitButtonContents\"\n\t\t\tdata-dojo-attach-point=\"titleNode,focusNode\"\n\t\t\trole=\"button\" aria-labelledby=\"${id}_label\"\n\t\t\t><span class=\"dijitReset dijitInline dijitIcon\" data-dojo-attach-point=\"iconNode\"></span\n\t\t\t><span class=\"dijitReset dijitToggleButtonIconChar\">&#x25CF;</span\n\t\t\t><span class=\"dijitReset dijitInline dijitButtonText\"\n\t\t\t\tid=\"${id}_label\"\n\t\t\t\tdata-dojo-attach-point=\"containerNode\"\n\t\t\t></span\n\t\t></span\n\t></span\n\t><input ${!nameAttrSetting} type=\"${type}\" value=\"${value}\" class=\"dijitOffScreen\"\n\t\ttabIndex=\"-1\" role=\"presentation\" data-dojo-attach-point=\"valueNode\"\n/></span>\n","esri/MouseEvents":function(){define(["dojo/_base/declare","dojo/_base/html","dojo/_base/lang","dojo/_base/sniff","dojo/_base/connect","dojo/_base/event","esri","esri/Evented","esri/geometry"],function(_70d,html,lang,has,_70e,_70f,esri,_710){var _711=_70e.connect,_712=_70e.disconnect,_713=esri.geometry;var _714=_70d([_710],{doubleClickDuration:300,minWheelValue:1,maxWheelValue:1,mozWheelDivisor:has("mac")!==-1?1:3,wheelDivisor:has("chrome")<2?360:120,preventPageScroll:true,map:null,constructor:function(node,_715){this.registerConnectEvents({"click":["Click"],"double-click":["DblClick"],"key-down":["KeyDown"],"key-up":["KeyUp"],"mouse-down":["MouseDown"],"mouse-drag":["MouseDrag"],"mouse-drag-end":["MouseDragEnd"],"mouse-drag-start":["MouseDragStart"],"mouse-move":["MouseMove"],"mouse-out":["MouseOut"],"mouse-over":["MouseOver"],"mouse-up":["MouseUp"],"mouse-wheel":["MouseWheel"]},{normalized:true});this.node=node;lang.mixin(this,_715);var _716=function(evt){_70f.stop(evt);return false;};if(has("mozilla")){html.style(node,"MozUserSelect","none");}this._handles=[_711(node,"onselectstart",_716),_711(node,"ondragstart",_716),_711(node,"onmouseenter",this,this._onMouseEnterHandler),_711(node,"onmouseleave",this,this._onMouseLeaveHandler),_711(node,"onmousedown",this,this._onMouseDownHandler),_711(node,"onclick",this,this._onClickHandler),_711(node,"ondblclick",this,this._onDblClickHandler)];this._onMouseMoveHandler_connect=_711(node,"onmousemove",this,this._onMouseMoveHandler);this._onMouseUpHandler_connect=_711(node,"onmouseup",this,this._onMouseUpHandler);this._fireClickEvent=lang.hitch(this,this._fireClickEvent);this._initialDuration=this.doubleClickDuration;var map=this.map;this.preventPageScroll=map?(map.isScrollWheelZoom||map.isScrollWheelPan):this.preventPageScroll;this.enableMouseWheel(false);},_fire:function(_717,evt){if(this[_717]){this[_717](evt);}if(this.map){if(this.map[_717]){this.map[_717](evt);}}},_processEvent:function(evt){evt=_70f.fix(evt,evt.target);var map=this.map,pos=map&&map.position;if(pos){if(evt.type==="DOMMouseScroll"&&has("ff")<3){evt.screenPoint=new _713.ScreenPoint(window.scrollX+evt.screenX-pos.x,window.scrollY+evt.screenY-pos.y);}else{evt.screenPoint=new _713.ScreenPoint(evt.pageX-pos.x,evt.pageY-pos.y);}evt.mapPoint=map.extent?map.toMap(evt.screenPoint):new _713.Point();}evt.numPoints=0;return evt;},_onMouseEnterHandler:function(evt){_712(this._onKeyDown_connect);_712(this._onKeyUp_connect);this._onKeyDown_connect=_711(document,"onkeydown",this,this._onKeyDownHandler);this._onKeyUp_connect=_711(document,"onkeyup",this,this._onKeyUpHandler);this._fire("onMouseOver",this._processEvent(evt));},_onMouseLeaveHandler:function(evt){_712(this._onKeyDown_connect);_712(this._onKeyUp_connect);this._onKeyDown_connect=this._onKeyUp_connect=null;this._fire("onMouseOut",this._processEvent(evt));},_onMouseMoveHandler:function(evt){if(this._dragEnd){this._dragEnd=false;return;}this._fire("onMouseMove",this._processEvent(evt));},_onMouseDownHandler:function(evt){_712(this._onMouseMoveHandler_connect);this._onMouseMoveHandler_connect=null;if(this.node.setCapture){this.node.setCapture(false);}this._onMouseDragHandler_connect=_711(document,"onmousemove",this,this._onMouseDragHandler);this._startX=evt.pageX;this._startY=evt.pageY;this._fire("onMouseDown",this._processEvent(evt));},_onMouseUpHandler:function(evt){var node=this.node;if(node.releaseCapture){node.releaseCapture();}_712(this._onMouseDragHandler_connect);this._onMouseDragHandler_connect=null;_712(this._onMouseMoveHandler_connect);this._onMouseMoveHandler_connect=_711(node,"onmousemove",this,this._onMouseMoveHandler);this._fire("onMouseUp",this._processEvent(evt));},_onMouseDragHandler:function(evt){_712(this._onMouseDragHandler_connect);this._onMouseDragHandler_connect=_711(document,"onmousemove",this,this._onMouseDraggingHandler);_712(this._onMouseUpHandler_connect);this._onMouseUpHandler_connect=_711(document,"onmouseup",this,this._onDragMouseUpHandler);this._docLeaveConnect=_711(document,"onmouseout",this,this._onDocMouseOut);this._fire("onMouseDragStart",this._processEvent(evt));},_onMouseDraggingHandler:function(evt){_70f.stop(evt);this._fire("onMouseDrag",this._processEvent(evt));},_onDragMouseUpHandler:function(evt){var node=this.node;if(node.releaseCapture){node.releaseCapture();}this._dragEnd=true;_712(this._docLeaveConnect);_712(this._onMouseDragHandler_connect);_712(this._onMouseUpHandler_connect);this._docLeaveConnect=this._onMouseDragHandler_connect=null;this._onMouseMoveHandler_connect=_711(node,"onmousemove",this,this._onMouseMoveHandler);this._onMouseUpHandler_connect=_711(node,"onmouseup",this,this._onMouseUpHandler);evt=this._processEvent(evt);this._fire("onMouseDragEnd",evt);this._fire("onMouseUp",evt);},_onDocMouseOut:function(evt){var _718=evt.relatedTarget,_719=evt.relatedTarget&&evt.relatedTarget.nodeName.toLowerCase();if(!_718||(has("chrome")&&_719==="html")){this._onDragMouseUpHandler(evt);}},_onClickHandler:function(evt){evt=this._processEvent(evt);if(evt.pageX!==this._startX||evt.pageY!==this._startY){return;}clearTimeout(this._clickTimer);this._clickEvent=lang.mixin({},evt);this._clickTimer=setTimeout(this._fireClickEvent,this.doubleClickDuration);},_fireClickEvent:function(){clearTimeout(this._clickTimer);if(has("ie")<9){var GL=lang.getObject("layers.GraphicsLayer",false,esri);if(GL){this._clickEvent.graphic=GL._clicked;delete GL._clicked;}}this._fire("onClick",this._clickEvent);},_onDblClickHandler:function(evt){clearTimeout(this._clickTimer);this._fire("onDblClick",this._processEvent(evt));},_onMouseWheelHandler:function(evt){var map=this.map,_71a=map?(map.isScrollWheelZoom||map.isScrollWheelPan):this.preventPageScroll;if(_71a){_70f.stop(evt);}var _71b=has("ie")||has("webkit")?evt.wheelDelta/this.wheelDivisor:-evt.detail/this.mozWheelDivisor,_71c=Math.abs(_71b);if(_71c<=this.minWheelValue){_71c=this.minWheelValue;}else{_71c=this.maxWheelValue;}evt.value=_71b<0?-_71c:_71c;this._fire("onMouseWheel",this._processEvent(evt));},_onKeyDownHandler:function(evt){this._fire("onKeyDown",evt);},_onKeyUpHandler:function(evt){this._fire("onKeyUp",evt);},enableMouseWheel:function(_71d){_712(this._scrollHandle);this._scrollHandle=_711(this.node,(has("ff")||has("mozilla"))?(_71d?"MozMousePixelScroll":"DOMMouseScroll"):"onmousewheel",this,this._onMouseWheelHandler);},setImmediateClick:function(_71e){this.doubleClickDuration=_71e?0:this._initialDuration;},destroy:function(){var _71f=this._handles.concat([this._onMouseMoveHandler_connect,this._onMouseUpHandler_connect,this._onMouseDragHandler_connect,this._scrollHandle,this._onKeyDown_connect,this._onKeyUp_connect,this._docLeaveConnect]),i;for(i=0;i<_71f.length;i++){_712(_71f[i]);}clearTimeout(this._clickTimer);this.node=this.map=this._handles=this._clickEvent=this._onMouseMoveHandler_connect=this._onMouseUpHandler_connect=this._onMouseDragHandler_connect=this._scrollHandle=this._onKeyDown_connect=this._onKeyUp_connect=this._docLeaveConnect=null;}});if(has("extend-esri")){esri.MouseEvents=_714;}return _714;});},"dojo/_base/url":function(){define(["./kernel"],function(dojo){var ore=new RegExp("^(([^:/?#]+):)?(//([^/?#]*))?([^?#]*)(\\?([^#]*))?(#(.*))?$"),ire=new RegExp("^((([^\\[:]+):)?([^@]+)@)?(\\[([^\\]]+)\\]|([^\\[:]*))(:([0-9]+))?$"),_720=function(){var n=null,_721=arguments,uri=[_721[0]];for(var i=1;i<_721.length;i++){if(!_721[i]){continue;}var _722=new _720(_721[i]+""),_723=new _720(uri[0]+"");if(_722.path==""&&!_722.scheme&&!_722.authority&&!_722.query){if(_722.fragment!=n){_723.fragment=_722.fragment;}_722=_723;}else{if(!_722.scheme){_722.scheme=_723.scheme;if(!_722.authority){_722.authority=_723.authority;if(_722.path.charAt(0)!="/"){var path=_723.path.substring(0,_723.path.lastIndexOf("/")+1)+_722.path;var segs=path.split("/");for(var j=0;j<segs.length;j++){if(segs[j]=="."){if(j==segs.length-1){segs[j]="";}else{segs.splice(j,1);j--;}}else{if(j>0&&!(j==1&&segs[0]=="")&&segs[j]==".."&&segs[j-1]!=".."){if(j==(segs.length-1)){segs.splice(j,1);segs[j-1]="";}else{segs.splice(j-1,2);j-=2;}}}}_722.path=segs.join("/");}}}}uri=[];if(_722.scheme){uri.push(_722.scheme,":");}if(_722.authority){uri.push("//",_722.authority);}uri.push(_722.path);if(_722.query){uri.push("?",_722.query);}if(_722.fragment){uri.push("#",_722.fragment);}}this.uri=uri.join("");var r=this.uri.match(ore);this.scheme=r[2]||(r[1]?"":n);this.authority=r[4]||(r[3]?"":n);this.path=r[5];this.query=r[7]||(r[6]?"":n);this.fragment=r[9]||(r[8]?"":n);if(this.authority!=n){r=this.authority.match(ire);this.user=r[3]||n;this.password=r[4]||n;this.host=r[6]||r[7];this.port=r[9]||n;}};_720.prototype.toString=function(){return this.uri;};return dojo._Url=_720;});},"dojox/main":function(){define("dojox/main",["dojo/_base/kernel"],function(dojo){return dojo.dojox;});},"url:dijit/form/templates/VerticalSlider.html":"<table class=\"dijit dijitReset dijitSlider dijitSliderV\" cellspacing=\"0\" cellpadding=\"0\" border=\"0\" rules=\"none\" data-dojo-attach-event=\"onkeypress:_onKeyPress,onkeyup:_onKeyUp\"\n\trole=\"presentation\"\n\t><tr class=\"dijitReset\"\n\t\t><td class=\"dijitReset\"></td\n\t\t><td class=\"dijitReset dijitSliderButtonContainer dijitSliderButtonContainerV\"\n\t\t\t><div class=\"dijitSliderIncrementIconV\" style=\"display:none\" data-dojo-attach-point=\"decrementButton\"><span class=\"dijitSliderButtonInner\">+</span></div\n\t\t></td\n\t\t><td class=\"dijitReset\"></td\n\t></tr\n\t><tr class=\"dijitReset\"\n\t\t><td class=\"dijitReset\"></td\n\t\t><td class=\"dijitReset\"\n\t\t\t><center><div class=\"dijitSliderBar dijitSliderBumper dijitSliderBumperV dijitSliderTopBumper\" data-dojo-attach-event=\"press:_onClkIncBumper\"></div></center\n\t\t></td\n\t\t><td class=\"dijitReset\"></td\n\t></tr\n\t><tr class=\"dijitReset\"\n\t\t><td data-dojo-attach-point=\"leftDecoration\" class=\"dijitReset dijitSliderDecoration dijitSliderDecorationL dijitSliderDecorationV\"></td\n\t\t><td class=\"dijitReset dijitSliderDecorationC\" style=\"height:100%;\"\n\t\t\t><input data-dojo-attach-point=\"valueNode\" type=\"hidden\" ${!nameAttrSetting}\n\t\t\t/><center class=\"dijitReset dijitSliderBarContainerV\" role=\"presentation\" data-dojo-attach-point=\"sliderBarContainer\"\n\t\t\t\t><div role=\"presentation\" data-dojo-attach-point=\"remainingBar\" class=\"dijitSliderBar dijitSliderBarV dijitSliderRemainingBar dijitSliderRemainingBarV\" data-dojo-attach-event=\"press:_onBarClick\"><!--#5629--></div\n\t\t\t\t><div role=\"presentation\" data-dojo-attach-point=\"progressBar\" class=\"dijitSliderBar dijitSliderBarV dijitSliderProgressBar dijitSliderProgressBarV\" data-dojo-attach-event=\"press:_onBarClick\"\n\t\t\t\t\t><div class=\"dijitSliderMoveable dijitSliderMoveableV\" style=\"vertical-align:top;\"\n\t\t\t\t\t\t><div data-dojo-attach-point=\"sliderHandle,focusNode\" class=\"dijitSliderImageHandle dijitSliderImageHandleV\" data-dojo-attach-event=\"press:_onHandleClick\" role=\"slider\"></div\n\t\t\t\t\t></div\n\t\t\t\t></div\n\t\t\t></center\n\t\t></td\n\t\t><td data-dojo-attach-point=\"containerNode,rightDecoration\" class=\"dijitReset dijitSliderDecoration dijitSliderDecorationR dijitSliderDecorationV\"></td\n\t></tr\n\t><tr class=\"dijitReset\"\n\t\t><td class=\"dijitReset\"></td\n\t\t><td class=\"dijitReset\"\n\t\t\t><center><div class=\"dijitSliderBar dijitSliderBumper dijitSliderBumperV dijitSliderBottomBumper\" data-dojo-attach-event=\"press:_onClkDecBumper\"></div></center\n\t\t></td\n\t\t><td class=\"dijitReset\"></td\n\t></tr\n\t><tr class=\"dijitReset\"\n\t\t><td class=\"dijitReset\"></td\n\t\t><td class=\"dijitReset dijitSliderButtonContainer dijitSliderButtonContainerV\"\n\t\t\t><div class=\"dijitSliderDecrementIconV\" style=\"display:none\" data-dojo-attach-point=\"incrementButton\"><span class=\"dijitSliderButtonInner\">-</span></div\n\t\t></td\n\t\t><td class=\"dijitReset\"></td\n\t></tr\n></table>\n","dojo/uacss":function(){define(["./dom-geometry","./_base/lang","./ready","./sniff","./_base/window"],function(_724,lang,_725,has,_726){var html=_726.doc.documentElement,ie=has("ie"),_727=has("opera"),maj=Math.floor,ff=has("ff"),_728=_724.boxModel.replace(/-/,""),_729={"dj_ie":ie,"dj_ie6":maj(ie)==6,"dj_ie7":maj(ie)==7,"dj_ie8":maj(ie)==8,"dj_ie9":maj(ie)==9,"dj_quirks":has("quirks"),"dj_iequirks":ie&&has("quirks"),"dj_opera":_727,"dj_khtml":has("khtml"),"dj_webkit":has("webkit"),"dj_safari":has("safari"),"dj_chrome":has("chrome"),"dj_gecko":has("mozilla"),"dj_ff3":maj(ff)==3};_729["dj_"+_728]=true;var _72a="";for(var clz in _729){if(_729[clz]){_72a+=clz+" ";}}html.className=lang.trim(html.className+" "+_72a);_725(90,function(){if(!_724.isBodyLtr()){var _72b="dj_rtl dijitRtl "+_72a.replace(/ /g,"-rtl ");html.className=lang.trim(html.className+" "+_72b+"dj_rtl dijitRtl "+_72a.replace(/ /g,"-rtl "));}});return has;});},"dojo/string":function(){define(["./_base/kernel","./_base/lang"],function(_72c,lang){var _72d={};lang.setObject("dojo.string",_72d);_72d.rep=function(str,num){if(num<=0||!str){return "";}var buf=[];for(;;){if(num&1){buf.push(str);}if(!(num>>=1)){break;}str+=str;}return buf.join("");};_72d.pad=function(text,size,ch,end){if(!ch){ch="0";}var out=String(text),pad=_72d.rep(ch,Math.ceil((size-out.length)/ch.length));return end?out+pad:pad+out;};_72d.substitute=function(_72e,map,_72f,_730){_730=_730||_72c.global;_72f=_72f?lang.hitch(_730,_72f):function(v){return v;};return _72e.replace(/\$\{([^\s\:\}]+)(?:\:([^\s\:\}]+))?\}/g,function(_731,key,_732){var _733=lang.getObject(key,false,map);if(_732){_733=lang.getObject(_732,false,_730).call(_730,_733,key);}return _72f(_733,key).toString();});};_72d.trim=String.prototype.trim?lang.trim:function(str){str=str.replace(/^\s+/,"");for(var i=str.length-1;i>=0;i--){if(/\S/.test(str.charAt(i))){str=str.substring(0,i+1);break;}}return str;};return _72d;});},"dijit/Tooltip":function(){require({cache:{"url:dijit/templates/Tooltip.html":"<div class=\"dijitTooltip dijitTooltipLeft\" id=\"dojoTooltip\"\n\t><div class=\"dijitTooltipContainer dijitTooltipContents\" data-dojo-attach-point=\"containerNode\" role='alert'></div\n\t><div class=\"dijitTooltipConnector\" data-dojo-attach-point=\"connectorNode\"></div\n></div>\n"}});define("dijit/Tooltip",["dojo/_base/array","dojo/_base/declare","dojo/_base/fx","dojo/dom","dojo/dom-class","dojo/dom-geometry","dojo/dom-style","dojo/_base/lang","dojo/mouse","dojo/on","dojo/sniff","./_base/manager","./place","./_Widget","./_TemplatedMixin","./BackgroundIframe","dojo/text!./templates/Tooltip.html","./main"],function(_734,_735,fx,dom,_736,_737,_738,lang,_739,on,has,_73a,_73b,_73c,_73d,_73e,_73f,_740){var _741=_735("dijit._MasterTooltip",[_73c,_73d],{duration:_73a.defaultDuration,templateString:_73f,postCreate:function(){this.ownerDocumentBody.appendChild(this.domNode);this.bgIframe=new _73e(this.domNode);this.fadeIn=fx.fadeIn({node:this.domNode,duration:this.duration,onEnd:lang.hitch(this,"_onShow")});this.fadeOut=fx.fadeOut({node:this.domNode,duration:this.duration,onEnd:lang.hitch(this,"_onHide")});},show:function(_742,_743,_744,rtl,_745){if(this.aroundNode&&this.aroundNode===_743&&this.containerNode.innerHTML==_742){return;}if(this.fadeOut.status()=="playing"){this._onDeck=arguments;return;}this.containerNode.innerHTML=_742;if(_745){this.set("textDir",_745);}this.containerNode.align=rtl?"right":"left";var pos=_73b.around(this.domNode,_743,_744&&_744.length?_744:_746.defaultPosition,!rtl,lang.hitch(this,"orient"));var _747=pos.aroundNodePos;if(pos.corner.charAt(0)=="M"&&pos.aroundCorner.charAt(0)=="M"){this.connectorNode.style.top=_747.y+((_747.h-this.connectorNode.offsetHeight)>>1)-pos.y+"px";this.connectorNode.style.left="";}else{if(pos.corner.charAt(1)=="M"&&pos.aroundCorner.charAt(1)=="M"){this.connectorNode.style.left=_747.x+((_747.w-this.connectorNode.offsetWidth)>>1)-pos.x+"px";}else{this.connectorNode.style.left="";this.connectorNode.style.top="";}}_738.set(this.domNode,"opacity",0);this.fadeIn.play();this.isShowingNow=true;this.aroundNode=_743;},orient:function(node,_748,_749,_74a,_74b){this.connectorNode.style.top="";var _74c=_74a.h,_74d=_74a.w;node.className="dijitTooltip "+{"MR-ML":"dijitTooltipRight","ML-MR":"dijitTooltipLeft","TM-BM":"dijitTooltipAbove","BM-TM":"dijitTooltipBelow","BL-TL":"dijitTooltipBelow dijitTooltipABLeft","TL-BL":"dijitTooltipAbove dijitTooltipABLeft","BR-TR":"dijitTooltipBelow dijitTooltipABRight","TR-BR":"dijitTooltipAbove dijitTooltipABRight","BR-BL":"dijitTooltipRight","BL-BR":"dijitTooltipLeft"}[_748+"-"+_749];this.domNode.style.width="auto";var size=_737.position(this.domNode);if(has("ie")==9){size.w+=2;}var _74e=Math.min((Math.max(_74d,1)),size.w);_737.setMarginBox(this.domNode,{w:_74e});if(_749.charAt(0)=="B"&&_748.charAt(0)=="B"){var bb=_737.position(node);var _74f=this.connectorNode.offsetHeight;if(bb.h>_74c){var _750=_74c-((_74b.h+_74f)>>1);this.connectorNode.style.top=_750+"px";this.connectorNode.style.bottom="";}else{this.connectorNode.style.bottom=Math.min(Math.max(_74b.h/2-_74f/2,0),bb.h-_74f)+"px";this.connectorNode.style.top="";}}else{this.connectorNode.style.top="";this.connectorNode.style.bottom="";}return Math.max(0,size.w-_74d);},_onShow:function(){if(has("ie")){this.domNode.style.filter="";}},hide:function(_751){if(this._onDeck&&this._onDeck[1]==_751){this._onDeck=null;}else{if(this.aroundNode===_751){this.fadeIn.stop();this.isShowingNow=false;this.aroundNode=null;this.fadeOut.play();}else{}}},_onHide:function(){this.domNode.style.cssText="";this.containerNode.innerHTML="";if(this._onDeck){this.show.apply(this,this._onDeck);this._onDeck=null;}},_setAutoTextDir:function(node){this.applyTextDir(node,has("ie")?node.outerText:node.textContent);_734.forEach(node.children,function(_752){this._setAutoTextDir(_752);},this);},_setTextDirAttr:function(_753){this._set("textDir",_753);if(_753=="auto"){this._setAutoTextDir(this.containerNode);}else{this.containerNode.dir=this.textDir;}}});_740.showTooltip=function(_754,_755,_756,rtl,_757){if(_756){_756=_734.map(_756,function(val){return {after:"after-centered",before:"before-centered"}[val]||val;});}if(!_746._masterTT){_740._masterTT=_746._masterTT=new _741();}return _746._masterTT.show(_754,_755,_756,rtl,_757);};_740.hideTooltip=function(_758){return _746._masterTT&&_746._masterTT.hide(_758);};var _746=_735("dijit.Tooltip",_73c,{label:"",showDelay:400,connectId:[],position:[],selector:"",_setConnectIdAttr:function(_759){_734.forEach(this._connections||[],function(_75a){_734.forEach(_75a,function(_75b){_75b.remove();});},this);this._connectIds=_734.filter(lang.isArrayLike(_759)?_759:(_759?[_759]:[]),function(id){return dom.byId(id,this.ownerDocument);},this);this._connections=_734.map(this._connectIds,function(id){var node=dom.byId(id,this.ownerDocument),_75c=this.selector,_75d=_75c?function(_75e){return on.selector(_75c,_75e);}:function(_75f){return _75f;},self=this;return [on(node,_75d(_739.enter),function(){self._onHover(this);}),on(node,_75d("focusin"),function(){self._onHover(this);}),on(node,_75d(_739.leave),lang.hitch(self,"_onUnHover")),on(node,_75d("focusout"),lang.hitch(self,"_onUnHover"))];},this);this._set("connectId",_759);},addTarget:function(node){var id=node.id||node;if(_734.indexOf(this._connectIds,id)==-1){this.set("connectId",this._connectIds.concat(id));}},removeTarget:function(node){var id=node.id||node,idx=_734.indexOf(this._connectIds,id);if(idx>=0){this._connectIds.splice(idx,1);this.set("connectId",this._connectIds);}},buildRendering:function(){this.inherited(arguments);_736.add(this.domNode,"dijitTooltipData");},startup:function(){this.inherited(arguments);var ids=this.connectId;_734.forEach(lang.isArrayLike(ids)?ids:[ids],this.addTarget,this);},getContent:function(node){return this.label||this.domNode.innerHTML;},_onHover:function(_760){if(!this._showTimer){this._showTimer=this.defer(function(){this.open(_760);},this.showDelay);}},_onUnHover:function(){if(this._showTimer){this._showTimer.remove();delete this._showTimer;}this.close();},open:function(_761){if(this._showTimer){this._showTimer.remove();delete this._showTimer;}var _762=this.getContent(_761);if(!_762){return;}_746.show(_762,_761,this.position,!this.isLeftToRight(),this.textDir);this._connectNode=_761;this.onShow(_761,this.position);},close:function(){if(this._connectNode){_746.hide(this._connectNode);delete this._connectNode;this.onHide();}if(this._showTimer){this._showTimer.remove();delete this._showTimer;}},onShow:function(){},onHide:function(){},destroy:function(){this.close();_734.forEach(this._connections||[],function(_763){_734.forEach(_763,function(_764){_764.remove();});},this);this.inherited(arguments);}});_746._MasterTooltip=_741;_746.show=_740.showTooltip;_746.hide=_740.hideTooltip;_746.defaultPosition=["after-centered","before-centered"];return _746;});},"dijit/form/VerticalSlider":function(){require({cache:{"url:dijit/form/templates/VerticalSlider.html":"<table class=\"dijit dijitReset dijitSlider dijitSliderV\" cellspacing=\"0\" cellpadding=\"0\" border=\"0\" rules=\"none\" data-dojo-attach-event=\"onkeypress:_onKeyPress,onkeyup:_onKeyUp\"\n\trole=\"presentation\"\n\t><tr class=\"dijitReset\"\n\t\t><td class=\"dijitReset\"></td\n\t\t><td class=\"dijitReset dijitSliderButtonContainer dijitSliderButtonContainerV\"\n\t\t\t><div class=\"dijitSliderIncrementIconV\" style=\"display:none\" data-dojo-attach-point=\"decrementButton\"><span class=\"dijitSliderButtonInner\">+</span></div\n\t\t></td\n\t\t><td class=\"dijitReset\"></td\n\t></tr\n\t><tr class=\"dijitReset\"\n\t\t><td class=\"dijitReset\"></td\n\t\t><td class=\"dijitReset\"\n\t\t\t><center><div class=\"dijitSliderBar dijitSliderBumper dijitSliderBumperV dijitSliderTopBumper\" data-dojo-attach-event=\"press:_onClkIncBumper\"></div></center\n\t\t></td\n\t\t><td class=\"dijitReset\"></td\n\t></tr\n\t><tr class=\"dijitReset\"\n\t\t><td data-dojo-attach-point=\"leftDecoration\" class=\"dijitReset dijitSliderDecoration dijitSliderDecorationL dijitSliderDecorationV\"></td\n\t\t><td class=\"dijitReset dijitSliderDecorationC\" style=\"height:100%;\"\n\t\t\t><input data-dojo-attach-point=\"valueNode\" type=\"hidden\" ${!nameAttrSetting}\n\t\t\t/><center class=\"dijitReset dijitSliderBarContainerV\" role=\"presentation\" data-dojo-attach-point=\"sliderBarContainer\"\n\t\t\t\t><div role=\"presentation\" data-dojo-attach-point=\"remainingBar\" class=\"dijitSliderBar dijitSliderBarV dijitSliderRemainingBar dijitSliderRemainingBarV\" data-dojo-attach-event=\"press:_onBarClick\"><!--#5629--></div\n\t\t\t\t><div role=\"presentation\" data-dojo-attach-point=\"progressBar\" class=\"dijitSliderBar dijitSliderBarV dijitSliderProgressBar dijitSliderProgressBarV\" data-dojo-attach-event=\"press:_onBarClick\"\n\t\t\t\t\t><div class=\"dijitSliderMoveable dijitSliderMoveableV\" style=\"vertical-align:top;\"\n\t\t\t\t\t\t><div data-dojo-attach-point=\"sliderHandle,focusNode\" class=\"dijitSliderImageHandle dijitSliderImageHandleV\" data-dojo-attach-event=\"press:_onHandleClick\" role=\"slider\"></div\n\t\t\t\t\t></div\n\t\t\t\t></div\n\t\t\t></center\n\t\t></td\n\t\t><td data-dojo-attach-point=\"containerNode,rightDecoration\" class=\"dijitReset dijitSliderDecoration dijitSliderDecorationR dijitSliderDecorationV\"></td\n\t></tr\n\t><tr class=\"dijitReset\"\n\t\t><td class=\"dijitReset\"></td\n\t\t><td class=\"dijitReset\"\n\t\t\t><center><div class=\"dijitSliderBar dijitSliderBumper dijitSliderBumperV dijitSliderBottomBumper\" data-dojo-attach-event=\"press:_onClkDecBumper\"></div></center\n\t\t></td\n\t\t><td class=\"dijitReset\"></td\n\t></tr\n\t><tr class=\"dijitReset\"\n\t\t><td class=\"dijitReset\"></td\n\t\t><td class=\"dijitReset dijitSliderButtonContainer dijitSliderButtonContainerV\"\n\t\t\t><div class=\"dijitSliderDecrementIconV\" style=\"display:none\" data-dojo-attach-point=\"incrementButton\"><span class=\"dijitSliderButtonInner\">-</span></div\n\t\t></td\n\t\t><td class=\"dijitReset\"></td\n\t></tr\n></table>\n"}});define("dijit/form/VerticalSlider",["dojo/_base/declare","./HorizontalSlider","dojo/text!./templates/VerticalSlider.html"],function(_765,_766,_767){return _765("dijit.form.VerticalSlider",_766,{templateString:_767,_mousePixelCoord:"pageY",_pixelCount:"h",_startingPixelCoord:"y",_handleOffsetCoord:"top",_progressPixelSize:"height",_descending:true,_isReversed:function(){return this._descending;}});});},"esri/dijit/InfoWindow":function(){define(["dijit","dojo","dojox","dojo/require!dijit/_Widget,dijit/_Templated,dijit/_Container,esri/InfoWindowBase,esri/utils"],function(_768,dojo,_769){dojo.provide("esri.dijit.InfoWindow");dojo.require("dijit._Widget");dojo.require("dijit._Templated");dojo.require("dijit._Container");dojo.require("esri.InfoWindowBase");dojo.require("esri.utils");dojo.declare("esri.dijit.InfoWindow",[_768._Widget,_768._Templated,_768._Container,esri.InfoWindowBase],{isContainer:true,templateString:"<div id=\"${id}.infowindow\" class=\"infowindow\" dojoAttachPoint=\"_infowindow\"\r\n  ><div style=\"position:relative;\"\r\n    ><div class=\"window\" dojoAttachPoint=\"_window\"\r\n      ><div class=\"top\"\r\n        ><div class=\"left\" dojoAttachPoint=\"_topleft\"><div class=\"sprite\"></div></div\r\n    \t\t><div class=\"right\" dojoAttachPoint=\"_topright\"\r\n    \t\t\t><div class=\"sprite\"></div\r\n    \t\t\t><div class=\"user\" dojoAttachPoint=\"_user\"\r\n    \t\t\t  ><div class=\"titlebar\" dojoAttachPoint=\"_titlebar\"\r\n    \t\t\t    ><a class=\"hide\" dojoAttachPoint=\"_hide\" dojoAttachEvent=\"onclick:hide\"><div class=\"sprite\"></div></a\r\n              ><div class=\"title\" dojoAttachPoint=\"_title\">${title}</div\r\n    \t\t\t  ></div\r\n            ><div class=\"border\" dojoAttachPoint=\"_border\"></div\r\n    \t\t\t  ><div class=\"layout content\" dojoAttachPoint=\"_content, containerNode\"\r\n    \t\t\t  ></div\r\n    \t\t\t></div\r\n    \t\t></div\r\n        ><div class=\"bottom\"\r\n          ><div class=\"left\" dojoAttachPoint=\"_bottomleft\"><div class=\"sprite\"></div></div\r\n\t\t      ><div class=\"right\" dojoAttachPoint=\"_bottomright\"><div class=\"sprite\"></div></div\r\n        ></div\r\n      ></div\r\n    ></div\r\n    ><div class=\"pointer\" dojoAttachPoint=\"_pointer\"><div dojoAttachPoint=\"_sprite\" class=\"sprite\"></div></div\r\n  ></div\r\n></div>",anchor:"upperright",fixedAnchor:null,coords:null,isShowing:true,isContentShowing:true,isTitleBarShowing:true,width:250,height:150,title:"Info Window",startup:function(){if(this._started){return;}this.inherited(arguments);this._ANCHORS=[esri.dijit.InfoWindow.ANCHOR_UPPERRIGHT,esri.dijit.InfoWindow.ANCHOR_LOWERRIGHT,esri.dijit.InfoWindow.ANCHOR_LOWERLEFT,esri.dijit.InfoWindow.ANCHOR_UPPERLEFT];if(dojo.isIE<7){var url=dojo.getComputedStyle(this._sprite).backgroundImage.replace(/url\(\"/i,"").replace(/\"\)/,""),_76a="progid:DXImageTransform.Microsoft.AlphaImageLoader(enabled='true', sizingMethod='crop', src='"+url+"')";var s=dojo.create("div",null,dojo.body());dojo.style(s,{width:"1px",height:"1px",display:"none",backgroundImage:"none",filter:_76a});var t=setTimeout(function(){dojo.destroy(s);clearTimeout(t);t=s=null;},100);dojo.query(".sprite",this.domNode).forEach(function(n){n.style.backgroundImage="none";n.style.filter=_76a;});}this.resize(this.width,this.height);this.hide();},destroy:function(){if(this._destroyed){return;}this.__unregisterMapListeners();this.destroyDijits(this._title);this.destroyDijits(this._content);this._title.innerHTML=this._content.innerHTML="";this.inherited(arguments);},resize:function(_76b,_76c){if(!_76b||!_76c){return;}var _76d=dojo.style;_76d(this._topleft,{height:_76c+"px",marginLeft:_76b+"px"});_76d(this._topright,{width:_76b+"px",height:_76c+"px"});_76d(this._user,"width",(_76b-8)+"px");_76d(this._hide,"marginLeft",(_76b-22)+"px");_76d(this._title,"width",(_76b-25)+"px");_76d(this._content,"height",(_76c-37)+"px");_76d(this._bottomleft,{marginLeft:_76b+"px",marginTop:_76c+"px"});_76d(this._bottomright,{width:(_76b-5)+"px",marginTop:_76c+"px"});this.width=_76b;this.height=_76c;if(this.coords){this._adjustPosition(this.coords,this.anchor);}this.onResize(_76b,_76c);},_adjustPosition:function(_76e,_76f){var _770=dojo.style;_770(this._infowindow,{left:Math.round(_76e.x)+"px",top:Math.round(_76e.y)+"px"});if(_76f===esri.dijit.InfoWindow.ANCHOR_UPPERLEFT){_770(this._window,{left:null,right:(this.width+18)+"px",top:null,bottom:(this.height+50)+"px"});}else{if(_76f===esri.dijit.InfoWindow.ANCHOR_UPPERRIGHT){_770(this._window,{left:"6px",right:null,top:null,bottom:(this.height+50)+"px"});}else{if(_76f===esri.dijit.InfoWindow.ANCHOR_LOWERRIGHT){_770(this._window,{left:"6px",right:null,top:"43px",bottom:null});}else{if(_76f===esri.dijit.InfoWindow.ANCHOR_LOWERLEFT){_770(this._window,{left:null,right:(this.width+18)+"px",top:"43px",bottom:null});}}}}},show:function(_771,_772){if(!_771){return;}if(_771.spatialReference){this.mapCoords=_771;_771=this.coords=this.map.toScreen(_771,true);}else{this.mapCoords=null;this.coords=_771;}var _773=this.map._getFrameWidth();if(_773!==-1){_771.x=_771.x%_773;if(_771.x<0){_771.x+=_773;}if(this.map.width>_773){var _774=(this.map.width-_773)/2;while(_771.x<_774){_771.x+=_773;}}}if(!_772||dojo.indexOf(this._ANCHORS,_772)===-1){_772=this.map.getInfoWindowAnchor(_771);}dojo.removeClass(this._pointer,this.anchor);_772=(this.anchor=this.fixedAnchor||_772);this._adjustPosition(_771,_772);dojo.addClass(this._pointer,_772);esri.show(this.domNode);this.isShowing=true;if(!arguments[2]){this.onShow();}},hide:function(evt){esri.hide(this.domNode);this.isShowing=false;if(!arguments[1]){this.onHide();}},showTitleBar:function(){esri.show(this._titlebar);esri.show(this._border);this.isTitleBarShowing=true;},hideTitleBar:function(){esri.hide(this._titlebar);esri.hide(this._border);this.isTitleBarShowing=false;},showContent:function(){esri.show(this._content);esri.show(this._border);this.isContentShowing=true;},hideContent:function(){esri.hide(this._content);esri.hide(this._border);this.isContentShowing=false;},move:function(_775,_776){if(_776){_775=this.coords.offset(_775.x,_775.y);}else{this.coords=_775;if(this.mapCoords){this.mapCoords=this.map.toMap(_775);}}dojo.style(this._infowindow,{left:Math.round(_775.x)+"px",top:Math.round(_775.y)+"px"});},setFixedAnchor:function(_777){if(_777&&dojo.indexOf(this._ANCHORS,_777)===-1){return;}this.fixedAnchor=_777;if(this.isShowing){this.show(this.mapCoords||this.coords,_777);}this.onAnchorChange(_777);},setTitle:function(_778){this.destroyDijits(this._title);this.__setValue("_title",_778);return this;},setContent:function(_779){this.destroyDijits(this._content);this.__setValue("_content",_779);return this;},onShow:function(){this.__registerMapListeners();this.startupDijits(this._title);this.startupDijits(this._content);},onHide:function(){this.__unregisterMapListeners();},onResize:function(){},onAnchorChange:function(){}});dojo.mixin(esri.dijit.InfoWindow,{ANCHOR_UPPERRIGHT:"upperright",ANCHOR_LOWERRIGHT:"lowerright",ANCHOR_LOWERLEFT:"lowerleft",ANCHOR_UPPERLEFT:"upperleft"});});},"dijit/form/_FormValueMixin":function(){define("dijit/form/_FormValueMixin",["dojo/_base/declare","dojo/dom-attr","dojo/keys","dojo/sniff","./_FormWidgetMixin"],function(_77a,_77b,keys,has,_77c){return _77a("dijit.form._FormValueMixin",_77c,{readOnly:false,_setReadOnlyAttr:function(_77d){_77b.set(this.focusNode,"readOnly",_77d);this.focusNode.setAttribute("aria-readonly",_77d);this._set("readOnly",_77d);},postCreate:function(){this.inherited(arguments);if(has("ie")){this.connect(this.focusNode||this.domNode,"onkeydown",this._onKeyDown);}if(this._resetValue===undefined){this._lastValueReported=this._resetValue=this.value;}},_setValueAttr:function(_77e,_77f){this._handleOnChange(_77e,_77f);},_handleOnChange:function(_780,_781){this._set("value",_780);this.inherited(arguments);},undo:function(){this._setValueAttr(this._lastValueReported,false);},reset:function(){this._hasBeenBlurred=false;this._setValueAttr(this._resetValue,true);},_onKeyDown:function(e){if(e.keyCode==keys.ESCAPE&&!(e.ctrlKey||e.altKey||e.metaKey)){if(has("ie")<9||(has("ie")&&has("quirks"))){e.preventDefault();var node=e.srcElement,te=node.ownerDocument.createEventObject();te.keyCode=keys.ESCAPE;te.shiftKey=e.shiftKey;node.fireEvent("onkeypress",te);}}}});});},"dijit/form/DropDownButton":function(){require({cache:{"url:dijit/form/templates/DropDownButton.html":"<span class=\"dijit dijitReset dijitInline\"\n\t><span class='dijitReset dijitInline dijitButtonNode'\n\t\tdata-dojo-attach-event=\"ondijitclick:_onClick\" data-dojo-attach-point=\"_buttonNode\"\n\t\t><span class=\"dijitReset dijitStretch dijitButtonContents\"\n\t\t\tdata-dojo-attach-point=\"focusNode,titleNode,_arrowWrapperNode\"\n\t\t\trole=\"button\" aria-haspopup=\"true\" aria-labelledby=\"${id}_label\"\n\t\t\t><span class=\"dijitReset dijitInline dijitIcon\"\n\t\t\t\tdata-dojo-attach-point=\"iconNode\"\n\t\t\t></span\n\t\t\t><span class=\"dijitReset dijitInline dijitButtonText\"\n\t\t\t\tdata-dojo-attach-point=\"containerNode,_popupStateNode\"\n\t\t\t\tid=\"${id}_label\"\n\t\t\t></span\n\t\t\t><span class=\"dijitReset dijitInline dijitArrowButtonInner\"></span\n\t\t\t><span class=\"dijitReset dijitInline dijitArrowButtonChar\">&#9660;</span\n\t\t></span\n\t></span\n\t><input ${!nameAttrSetting} type=\"${type}\" value=\"${value}\" class=\"dijitOffScreen\" tabIndex=\"-1\"\n\t\tdata-dojo-attach-point=\"valueNode\"\n/></span>\n"}});define("dijit/form/DropDownButton",["dojo/_base/declare","dojo/_base/lang","dojo/query","../registry","../popup","./Button","../_Container","../_HasDropDown","dojo/text!./templates/DropDownButton.html"],function(_782,lang,_783,_784,_785,_786,_787,_788,_789){return _782("dijit.form.DropDownButton",[_786,_787,_788],{baseClass:"dijitDropDownButton",templateString:_789,_fillContent:function(){if(this.srcNodeRef){var _78a=_783("*",this.srcNodeRef);this.inherited(arguments,[_78a[0]]);this.dropDownContainer=this.srcNodeRef;}},startup:function(){if(this._started){return;}if(!this.dropDown&&this.dropDownContainer){var _78b=_783("[widgetId]",this.dropDownContainer)[0];this.dropDown=_784.byNode(_78b);delete this.dropDownContainer;}if(this.dropDown){_785.hide(this.dropDown);}this.inherited(arguments);},isLoaded:function(){var _78c=this.dropDown;return (!!_78c&&(!_78c.href||_78c.isLoaded));},loadDropDown:function(_78d){var _78e=this.dropDown;var _78f=_78e.on("load",lang.hitch(this,function(){_78f.remove();_78d();}));_78e.refresh();},isFocusable:function(){return this.inherited(arguments)&&!this._mouseDown;}});});},"esri/tasks/find":function(){define(["dijit","dojo","dojox","dojo/require!esri/tasks/_task"],function(_790,dojo,_791){dojo.provide("esri.tasks.find");dojo.require("esri.tasks._task");dojo.declare("esri.tasks.FindTask",esri.tasks._Task,{constructor:function(url,_792){this._url.path+="/find";this._handler=dojo.hitch(this,this._handler);this.gdbVersion=_792&&_792.gdbVersion;},_handler:function(_793,io,_794,_795,dfd){try{var _796=[],_797=esri.tasks.FindResult;dojo.forEach(_793.results,function(_798,i){_796[i]=new _797(_798);});this._successHandler([_796],"onComplete",_794,dfd);}catch(err){this._errorHandler(err,_795,dfd);}},execute:function(_799,_79a,_79b){var _79c=this._encode(dojo.mixin({},this._url.query,{f:"json"},_799.toJson())),_79d=this._handler,_79e=this._errorHandler;if(this.gdbVersion){_79c.gdbVersion=this.gdbVersion;}var dfd=new dojo.Deferred(esri._dfdCanceller);dfd._pendingDfd=esri.request({url:this._url.path,content:_79c,callbackParamName:"callback",load:function(r,i){_79d(r,i,_79a,_79b,dfd);},error:function(r){_79e(r,_79b,dfd);}});return dfd;},onComplete:function(){}});dojo.declare("esri.tasks.FindParameters",null,{searchText:null,contains:true,searchFields:null,outSpatialReference:null,layerIds:null,returnGeometry:false,layerDefinitions:null,dynamicLayerInfos:null,toJson:function(){var json={searchText:this.searchText,contains:this.contains,returnGeometry:this.returnGeometry,maxAllowableOffset:this.maxAllowableOffset},_79f=this.layerIds,_7a0=this.searchFields,_7a1=this.outSpatialReference;if(_79f){json.layers=_79f.join(",");}if(_7a0){json.searchFields=_7a0.join(",");}if(_7a1){json.sr=_7a1.wkid||dojo.toJson(_7a1.toJson());}json.layerDefs=esri._serializeLayerDefinitions(this.layerDefinitions);if(this.dynamicLayerInfos&&this.dynamicLayerInfos.length>0){var _7a2,_7a3=[];dojo.forEach(this.dynamicLayerInfos,function(info){if(!info.subLayerIds){var _7a4=info.id;if(this.layerIds&&dojo.indexOf(this.layerIds,_7a4)!==-1){var _7a5={id:_7a4};_7a5.source=info.source&&info.source.toJson();var _7a6;if(this.layerDefinitions&&this.layerDefinitions[_7a4]){_7a6=this.layerDefinitions[_7a4];}if(_7a6){_7a5.definitionExpression=_7a6;}_7a3.push(_7a5);}}},this);_7a2=dojo.toJson(_7a3);if(_7a2==="[]"){_7a2="[{}]";}json.dynamicLayers=_7a2;}return json;}});dojo.declare("esri.tasks.FindResult",null,{constructor:function(json){dojo.mixin(this,json);this.feature=new esri.Graphic(json.geometry?esri.geometry.fromJson(json.geometry):null,null,json.attributes);delete this.geometry;delete this.attributes;}});});},"dijit/form/_FormWidgetMixin":function(){define("dijit/form/_FormWidgetMixin",["dojo/_base/array","dojo/_base/declare","dojo/dom-attr","dojo/dom-style","dojo/_base/lang","dojo/mouse","dojo/sniff","dojo/window","../a11y"],function(_7a7,_7a8,_7a9,_7aa,lang,_7ab,has,_7ac,a11y){return _7a8("dijit.form._FormWidgetMixin",null,{name:"",alt:"",value:"",type:"text",tabIndex:"0",_setTabIndexAttr:"focusNode",disabled:false,intermediateChanges:false,scrollOnFocus:true,_setIdAttr:"focusNode",_setDisabledAttr:function(_7ad){this._set("disabled",_7ad);_7a9.set(this.focusNode,"disabled",_7ad);if(this.valueNode){_7a9.set(this.valueNode,"disabled",_7ad);}this.focusNode.setAttribute("aria-disabled",_7ad?"true":"false");if(_7ad){this._set("hovering",false);this._set("active",false);var _7ae="tabIndex" in this.attributeMap?this.attributeMap.tabIndex:("_setTabIndexAttr" in this)?this._setTabIndexAttr:"focusNode";_7a7.forEach(lang.isArray(_7ae)?_7ae:[_7ae],function(_7af){var node=this[_7af];if(has("webkit")||a11y.hasDefaultTabStop(node)){node.setAttribute("tabIndex","-1");}else{node.removeAttribute("tabIndex");}},this);}else{if(this.tabIndex!=""){this.set("tabIndex",this.tabIndex);}}},_onFocus:function(by){if(by=="mouse"&&this.isFocusable()){var _7b0=this.connect(this.focusNode,"onfocus",function(){this.disconnect(_7b1);this.disconnect(_7b0);});var _7b1=this.connect(this.ownerDocumentBody,"onmouseup",function(){this.disconnect(_7b1);this.disconnect(_7b0);if(this.focused){this.focus();}});}if(this.scrollOnFocus){this.defer(function(){_7ac.scrollIntoView(this.domNode);});}this.inherited(arguments);},isFocusable:function(){return !this.disabled&&this.focusNode&&(_7aa.get(this.domNode,"display")!="none");},focus:function(){if(!this.disabled&&this.focusNode.focus){try{this.focusNode.focus();}catch(e){}}},compare:function(val1,val2){if(typeof val1=="number"&&typeof val2=="number"){return (isNaN(val1)&&isNaN(val2))?0:val1-val2;}else{if(val1>val2){return 1;}else{if(val1<val2){return -1;}else{return 0;}}}},onChange:function(){},_onChangeActive:false,_handleOnChange:function(_7b2,_7b3){if(this._lastValueReported==undefined&&(_7b3===null||!this._onChangeActive)){this._resetValue=this._lastValueReported=_7b2;}this._pendingOnChange=this._pendingOnChange||(typeof _7b2!=typeof this._lastValueReported)||(this.compare(_7b2,this._lastValueReported)!=0);if((this.intermediateChanges||_7b3||_7b3===undefined)&&this._pendingOnChange){this._lastValueReported=_7b2;this._pendingOnChange=false;if(this._onChangeActive){if(this._onChangeHandle){this._onChangeHandle.remove();}this._onChangeHandle=this.defer(function(){this._onChangeHandle=null;this.onChange(_7b2);});}}},create:function(){this.inherited(arguments);this._onChangeActive=true;},destroy:function(){if(this._onChangeHandle){this._onChangeHandle.remove();this.onChange(this._lastValueReported);}this.inherited(arguments);}});});},"dijit/a11yclick":function(){define("dijit/a11yclick",["dojo/on","dojo/_base/array","dojo/keys","dojo/_base/declare","dojo/has","dojo/_base/unload","dojo/_base/window"],function(on,_7b4,keys,_7b5,has,_7b6,win){var _7b7=null;if(has("dom-addeventlistener")){win.doc.addEventListener("keydown",function(evt){_7b7=evt.target;},true);}else{(function(){var _7b8=function(evt){_7b7=evt.srcElement;};win.doc.attachEvent("onkeydown",_7b8);_7b6.addOnWindowUnload(function(){win.doc.detachEvent("onkeydown",_7b8);});})();}function _7b9(e){return (e.keyCode===keys.ENTER||e.keyCode===keys.SPACE)&&!e.ctrlKey&&!e.shiftKey&&!e.altKey&&!e.metaKey;};return function(node,_7ba){if(/input|button/i.test(node.nodeName)){return on(node,"click",_7ba);}else{var _7bb=[on(node,"keydown",function(e){if(_7b9(e)){_7b7=e.target;e.preventDefault();}}),on(node,"keyup",function(e){if(_7b9(e)&&e.target==_7b7){_7b7=null;on.emit(e.target,"click",{cancelable:true,bubbles:true});}}),on(node,"click",function(e){_7ba.call(this,e);})];if(has("touch")){var _7bc;_7bb.push(on(node,"touchend",function(e){var _7bd=e.target;_7bc=setTimeout(function(){_7bc=null;on.emit(_7bd,"click",{cancelable:true,bubbles:true});},600);}),on(node,"click",function(e){if(_7bc){clearTimeout(_7bc);}}));}return {remove:function(){_7b4.forEach(_7bb,function(h){h.remove();});if(_7bc){clearTimeout(_7bc);_7bc=null;}}};}};return ret;});},"esri/toolbars/draw":function(){define(["dijit","dojo","dojox","dojo/require!esri/toolbars/_toolbar,esri/geometry,esri/symbol,esri/utils"],function(_7be,dojo,_7bf){dojo.provide("esri.toolbars.draw");dojo.require("esri.toolbars._toolbar");dojo.require("esri.geometry");dojo.require("esri.symbol");dojo.require("esri.utils");dojo.declare("esri.toolbars.Draw",esri.toolbars._Toolbar,{constructor:function(map,_7c0){this.markerSymbol=new esri.symbol.SimpleMarkerSymbol(esri.symbol.SimpleMarkerSymbol.STYLE_SOLID,10,new esri.symbol.SimpleLineSymbol(esri.symbol.SimpleLineSymbol.STYLE_SOLID,new dojo.Color([255,0,0]),2),new dojo.Color([0,0,0,0.25]));this.lineSymbol=new esri.symbol.SimpleLineSymbol(esri.symbol.SimpleLineSymbol.STYLE_SOLID,new dojo.Color([255,0,0]),2);this.fillSymbol=new esri.symbol.SimpleFillSymbol(esri.symbol.SimpleFillSymbol.STYLE_SOLID,new esri.symbol.SimpleLineSymbol(esri.symbol.SimpleLineSymbol.STYLE_SOLID,new dojo.Color([255,0,0]),2),new dojo.Color([0,0,0,0.25]));this._points=[];this._defaultOptions={showTooltips:true,drawTime:75,tolerance:8,tooltipOffset:15};this._options=dojo.mixin(dojo.mixin({},this._defaultOptions),_7c0||{});if(esri.isTouchEnabled){this._options.showTooltips=false;}this._onKeyDownHandler=dojo.hitch(this,this._onKeyDownHandler);this._onMouseDownHandler=dojo.hitch(this,this._onMouseDownHandler);this._onMouseUpHandler=dojo.hitch(this,this._onMouseUpHandler);this._onClickHandler=dojo.hitch(this,this._onClickHandler);this._onMouseMoveHandler=dojo.hitch(this,this._onMouseMoveHandler);this._onMouseDragHandler=dojo.hitch(this,this._onMouseDragHandler);this._onDblClickHandler=dojo.hitch(this,this._onDblClickHandler);this._updateTooltip=dojo.hitch(this,this._updateTooltip);this._hideTooltip=dojo.hitch(this,this._hideTooltip);this._redrawGraphic=dojo.hitch(this,this._redrawGraphic);},_geometryType:null,respectDrawingVertexOrder:false,setRespectDrawingVertexOrder:function(set){this.respectDrawingVertexOrder=set;},setMarkerSymbol:function(_7c1){this.markerSymbol=_7c1;},setLineSymbol:function(_7c2){this.lineSymbol=_7c2;},setFillSymbol:function(_7c3){this.fillSymbol=_7c3;},activate:function(_7c4,_7c5){if(this._geometryType){this.deactivate();}var map=this.map,dc=dojo.connect,Draw=esri.toolbars.Draw;this._options=dojo.mixin(dojo.mixin({},this._options),_7c5||{});map.navigationManager.setImmediateClick(false);switch(_7c4){case Draw.ARROW:case Draw.LEFT_ARROW:case Draw.RIGHT_ARROW:case Draw.UP_ARROW:case Draw.DOWN_ARROW:case Draw.TRIANGLE:case Draw.CIRCLE:case Draw.ELLIPSE:case Draw.RECTANGLE:this._deactivateMapTools(true,false,false,true);this._onClickHandler_connect=dc(map,"onClick",this._onClickHandler);this._onMouseDownHandler_connect=dc(map,esri.isTouchEnabled?"onSwipeStart":"onMouseDown",this._onMouseDownHandler);this._onMouseDragHandler_connect=dc(map,esri.isTouchEnabled?"onSwipeMove":"onMouseDrag",this._onMouseDragHandler);this._onMouseUpHandler_connect=dc(map,esri.isTouchEnabled?"onSwipeEnd":"onMouseUp",this._onMouseUpHandler);break;case Draw.POINT:this._onClickHandler_connect=dc(map,"onClick",this._onClickHandler);break;case Draw.LINE:case Draw.EXTENT:case Draw.FREEHAND_POLYLINE:case Draw.FREEHAND_POLYGON:this._deactivateMapTools(true,false,false,true);this._onMouseDownHandler_connect=dc(map,esri.isTouchEnabled?"onSwipeStart":"onMouseDown",this._onMouseDownHandler);this._onMouseDragHandler_connect=dc(map,esri.isTouchEnabled?"onSwipeMove":"onMouseDrag",this._onMouseDragHandler);this._onMouseUpHandler_connect=dc(map,esri.isTouchEnabled?"onSwipeEnd":"onMouseUp",this._onMouseUpHandler);break;case Draw.POLYLINE:case Draw.POLYGON:case Draw.MULTI_POINT:map.navigationManager.setImmediateClick(true);this._onClickHandler_connect=dc(map,"onClick",this._onClickHandler);this._onDblClickHandler_connect=dc(map,"onDblClick",this._onDblClickHandler);map.disableDoubleClickZoom();break;default:console.error(esri.bundle.toolbars.draw.invalidType+": "+_7c4);return;}this._onKeyDown_connect=dc(map,"onKeyDown",this._onKeyDownHandler);this._redrawConnect=dc(map,"onExtentChange",this._redrawGraphic);this._geometryType=_7c4;this._toggleTooltip(true);if(map.snappingManager&&this._geometryType!=="freehandpolyline"&&this._geometryType!=="freehandpolygon"&&!esri.isTouchEnabled){map.snappingManager._startSelectionLayerQuery();map.snappingManager._setUpSnapping();}this.onActivate(this._geometryType);},deactivate:function(){var map=this.map;this._clear();var ddc=dojo.disconnect;ddc(this._onMouseDownHandler_connect);ddc(this._onMouseMoveHandler_connect);ddc(this._onMouseDragHandler_connect);ddc(this._onMouseUpHandler_connect);ddc(this._onClickHandler_connect);ddc(this._onDblClickHandler_connect);ddc(this._onKeyDown_connect);ddc(this._redrawConnect);this._onMouseDownHandler_connect=this._onMouseMoveHandler_connect=this._onMouseDragHandler_connect=this._onMouseUpHandler_connect=this._onClickHandler_connect=this._onDblClickHandler_connect=this._onKeyDown_connect=this._redrawConnect=null;if(map.snappingManager){map.snappingManager._stopSelectionLayerQuery();map.snappingManager._killOffSnapping();}switch(this._geometryType){case esri.toolbars.Draw.CIRCLE:case esri.toolbars.Draw.ELLIPSE:case esri.toolbars.Draw.TRIANGLE:case esri.toolbars.Draw.ARROW:case esri.toolbars.Draw.LEFT_ARROW:case esri.toolbars.Draw.RIGHT_ARROW:case esri.toolbars.Draw.UP_ARROW:case esri.toolbars.Draw.DOWN_ARROW:case esri.toolbars.Draw.RECTANGLE:case esri.toolbars.Draw.LINE:case esri.toolbars.Draw.EXTENT:case esri.toolbars.Draw.FREEHAND_POLYLINE:case esri.toolbars.Draw.FREEHAND_POLYGON:this._activateMapTools(true,false,false,true);break;case esri.toolbars.Draw.POLYLINE:case esri.toolbars.Draw.POLYGON:case esri.toolbars.Draw.MULTI_POINT:map.enableDoubleClickZoom();break;}var _7c6=this._geometryType;this._geometryType=null;map.navigationManager.setImmediateClick(false);this._toggleTooltip(false);this.onDeactivate(_7c6);},_clear:function(){if(this._graphic){this.map.graphics.remove(this._graphic,true);}if(this._tGraphic){this.map.graphics.remove(this._tGraphic,true);}this._graphic=this._tGraphic=null;if(this.map.snappingManager){this.map.snappingManager._setGraphic(null);}this._points=[];},finishDrawing:function(){var _7c7,_7c8=this._points,map=this.map,_7c9=map.spatialReference,Draw=esri.toolbars.Draw;_7c8=_7c8.slice(0,_7c8.length);switch(this._geometryType){case Draw.POLYLINE:if(!this._graphic||_7c8.length<2){return;}_7c7=new esri.geometry.Polyline(_7c9);_7c7.addPath([].concat(_7c8));break;case Draw.POLYGON:if(!this._graphic||_7c8.length<3){return;}_7c7=new esri.geometry.Polygon(_7c9);var ring=[].concat(_7c8,[_7c8[0].offset(0,0)]);if(!esri.geometry.isClockwise(ring)&&!this.respectDrawingVertexOrder){console.debug(this.declaredClass+" : "+esri.bundle.toolbars.draw.convertAntiClockwisePolygon);ring.reverse();}_7c7.addRing(ring);break;case Draw.MULTI_POINT:_7c7=new esri.geometry.Multipoint(_7c9);dojo.forEach(_7c8,function(pt){_7c7.addPoint(pt);});break;}dojo.disconnect(this._onMouseMoveHandler_connect);this._clear();this._setTooltipMessage(0);this._drawEnd(_7c7);},_drawEnd:function(_7ca){if(_7ca){var _7cb=this.map.spatialReference;this.onDrawEnd(_7ca);this.onDrawComplete({geometry:_7ca,geographicGeometry:(_7cb&&_7cb.isWebMercator())?esri.geometry.webMercatorToGeographic(_7ca,true):null});}},_normalizeRect:function(_7cc,end,_7cd){var sx=_7cc.x,sy=_7cc.y,ex=end.x,ey=end.y,_7ce=Math.abs(sx-ex),_7cf=Math.abs(sy-ey);return {x:Math.min(sx,ex),y:Math.max(sy,ey),width:_7ce,height:_7cf,spatialReference:_7cd};},_onMouseDownHandler:function(evt){this._dragged=false;var _7d0;if(this.map.snappingManager){_7d0=this.map.snappingManager._snappingPoint;}var _7d1=_7d0||evt.mapPoint,Draw=esri.toolbars.Draw,map=this.map,_7d2=map.spatialReference;this._points.push(_7d1.offset(0,0));switch(this._geometryType){case Draw.LINE:this._graphic=map.graphics.add(new esri.Graphic(new esri.geometry.Polyline({paths:[[[_7d1.x,_7d1.y],[_7d1.x,_7d1.y]]],spatialReference:_7d2}),this.lineSymbol),true);if(map.snappingManager){map.snappingManager._setGraphic(this._graphic);}break;case Draw.EXTENT:break;case Draw.FREEHAND_POLYLINE:this._oldPoint=evt.screenPoint;var _7d3=new esri.geometry.Polyline(_7d2);_7d3.addPath(this._points);this._graphic=map.graphics.add(new esri.Graphic(_7d3,this.lineSymbol),true);if(map.snappingManager){map.snappingManager._setGraphic(this._graphic);}break;case Draw.CIRCLE:case Draw.ELLIPSE:case Draw.TRIANGLE:case Draw.ARROW:case Draw.LEFT_ARROW:case Draw.RIGHT_ARROW:case Draw.UP_ARROW:case Draw.DOWN_ARROW:case Draw.RECTANGLE:case Draw.FREEHAND_POLYGON:this._oldPoint=evt.screenPoint;var _7d4=new esri.geometry.Polygon(_7d2);_7d4.addRing(this._points);this._graphic=map.graphics.add(new esri.Graphic(_7d4,this.fillSymbol),true);if(map.snappingManager){map.snappingManager._setGraphic(this._graphic);}break;}if(esri.isTouchEnabled){evt.preventDefault();}},_onMouseMoveHandler:function(evt){var _7d5;if(this.map.snappingManager){_7d5=this.map.snappingManager._snappingPoint;}var _7d6=this._points[this._points.length-1],end=_7d5||evt.mapPoint,_7d7=this._tGraphic,geom=_7d7.geometry;switch(this._geometryType){case esri.toolbars.Draw.POLYLINE:case esri.toolbars.Draw.POLYGON:geom.setPoint(0,0,{x:_7d6.x,y:_7d6.y});geom.setPoint(0,1,{x:end.x,y:end.y});_7d7.setGeometry(geom);break;}},_onMouseDragHandler:function(evt){if(esri.isTouchEnabled&&!this._points.length){evt.preventDefault();return;}this._dragged=true;var _7d8;if(this.map.snappingManager){_7d8=this.map.snappingManager._snappingPoint;}var _7d9=this._points[0],end=_7d8||evt.mapPoint,map=this.map,_7da=map.spatialReference,_7db=this._graphic,Draw=esri.toolbars.Draw,_7dc=map.toScreen(_7d9),_7dd=map.toScreen(end),pts=[],a=_7dd.x-_7dc.x,b=_7dd.y-_7dc.y,_7de=60,d=Math.sqrt(a*a+b*b);switch(this._geometryType){case Draw.CIRCLE:this._hideTooltip();_7db.geometry=esri.geometry.createCircle({center:_7dc,r:d,numberOfPoints:_7de,map:map});_7db.setGeometry(_7db.geometry);break;case Draw.ELLIPSE:this._hideTooltip();_7db.geometry=esri.geometry.createEllipse({center:_7dc,longAxis:a,shortAxis:b,numberOfPoints:_7de,map:map});_7db.setGeometry(_7db.geometry);break;case Draw.TRIANGLE:this._hideTooltip();pts=[[0,-d],[0.8660254037844386*d,0.5*d],[-0.8660254037844386*d,0.5*d],[0,-d]];_7db.geometry=this._toPolygon(pts,_7dc.x,_7dc.y);_7db.setGeometry(_7db.geometry);break;case Draw.ARROW:this._hideTooltip();var sina=b/d,cosa=a/d,tana=b/a;var f=cosa*0.25*d,e=0.25*d/tana,g=sina*0.25*d;pts=[[a,b],[a-f*(1+24/e),b+24*cosa-g],[a-f*(1+12/e),b+12*cosa-g],[-12*sina,12*cosa],[12*sina,-12*cosa],[a-f*(1-12/e),b-12*cosa-g],[a-f*(1-24/e),b-24*cosa-g],[a,b]];_7db.geometry=this._toPolygon(pts,_7dc.x,_7dc.y);_7db.setGeometry(_7db.geometry);break;case Draw.LEFT_ARROW:this._hideTooltip();if(a<=0){pts=[[a,0],[0.75*a,b],[0.75*a,0.5*b],[0,0.5*b],[0,-0.5*b],[0.75*a,-0.5*b],[0.75*a,-b],[a,0]];}else{pts=[[0,0],[0.25*a,b],[0.25*a,0.5*b],[a,0.5*b],[a,-0.5*b],[0.25*a,-0.5*b],[0.25*a,-b],[0,0]];}_7db.geometry=this._toPolygon(pts,_7dc.x,_7dc.y);_7db.setGeometry(_7db.geometry);break;case Draw.RIGHT_ARROW:this._hideTooltip();if(a>=0){pts=[[a,0],[0.75*a,b],[0.75*a,0.5*b],[0,0.5*b],[0,-0.5*b],[0.75*a,-0.5*b],[0.75*a,-b],[a,0]];}else{pts=[[0,0],[0.25*a,b],[0.25*a,0.5*b],[a,0.5*b],[a,-0.5*b],[0.25*a,-0.5*b],[0.25*a,-b],[0,0]];}_7db.geometry=this._toPolygon(pts,_7dc.x,_7dc.y);_7db.setGeometry(_7db.geometry);break;case Draw.UP_ARROW:this._hideTooltip();if(b<=0){pts=[[0,b],[-a,0.75*b],[-0.5*a,0.75*b],[-0.5*a,0],[0.5*a,0],[0.5*a,0.75*b],[a,0.75*b],[0,b]];}else{pts=[[0,0],[-a,0.25*b],[-0.5*a,0.25*b],[-0.5*a,b],[0.5*a,b],[0.5*a,0.25*b],[a,0.25*b],[0,0]];}_7db.geometry=this._toPolygon(pts,_7dc.x,_7dc.y);_7db.setGeometry(_7db.geometry);break;case Draw.DOWN_ARROW:this._hideTooltip();if(b>=0){pts=[[0,b],[-a,0.75*b],[-0.5*a,0.75*b],[-0.5*a,0],[0.5*a,0],[0.5*a,0.75*b],[a,0.75*b],[0,b]];}else{pts=[[0,0],[-a,0.25*b],[-0.5*a,0.25*b],[-0.5*a,b],[0.5*a,b],[0.5*a,0.25*b],[a,0.25*b],[0,0]];}_7db.geometry=this._toPolygon(pts,_7dc.x,_7dc.y);_7db.setGeometry(_7db.geometry);break;case Draw.RECTANGLE:this._hideTooltip();pts=[[0,0],[a,0],[a,b],[0,b],[0,0]];_7db.geometry=this._toPolygon(pts,_7dc.x,_7dc.y);_7db.setGeometry(_7db.geometry);break;case Draw.LINE:_7db.setGeometry(dojo.mixin(_7db.geometry,{paths:[[[_7d9.x,_7d9.y],[end.x,end.y]]]}));break;case Draw.EXTENT:if(_7db){map.graphics.remove(_7db,true);}var rect=new esri.geometry.Rect(this._normalizeRect(_7d9,end,_7da));rect._originOnly=true;this._graphic=map.graphics.add(new esri.Graphic(rect,this.fillSymbol),true);if(map.snappingManager){map.snappingManager._setGraphic(this._graphic);}break;case Draw.FREEHAND_POLYLINE:this._hideTooltip();if(this._canDrawFreehandPoint(evt)===false){if(esri.isTouchEnabled){evt.preventDefault();}return;}this._points.push(evt.mapPoint.offset(0,0));_7db.geometry._insertPoints([end.offset(0,0)],0);_7db.setGeometry(_7db.geometry);break;case Draw.FREEHAND_POLYGON:this._hideTooltip();if(this._canDrawFreehandPoint(evt)===false){if(esri.isTouchEnabled){evt.preventDefault();}return;}this._points.push(evt.mapPoint.offset(0,0));_7db.geometry._insertPoints([end.offset(0,0)],0);_7db.setGeometry(_7db.geometry);break;}if(esri.isTouchEnabled){evt.preventDefault();}},_canDrawFreehandPoint:function(evt){if(!this._oldPoint){return false;}var dx=this._oldPoint.x-evt.screenPoint.x;dx=(dx<0)?dx*-1:dx;var dy=this._oldPoint.y-evt.screenPoint.y;dy=(dy<0)?dy*-1:dy;var _7df=this._options.tolerance;if(dx<_7df&&dy<_7df){return false;}var now=new Date();var _7e0=now-this._startTime;if(_7e0<this._options.drawTime){return false;}this._startTime=now;this._oldPoint=evt.screenPoint;return true;},_onMouseUpHandler:function(evt){if(!this._dragged){this._clear();return;}if(this._points.length===0){this._points.push(evt.mapPoint.offset(0,0));}var _7e1;if(this.map.snappingManager){_7e1=this.map.snappingManager._snappingPoint;}var _7e2=this._points[0],end=_7e1||evt.mapPoint,map=this.map,_7e3=map.spatialReference,Draw=esri.toolbars.Draw,_7e4;switch(this._geometryType){case Draw.CIRCLE:case Draw.ELLIPSE:case Draw.TRIANGLE:case Draw.ARROW:case Draw.LEFT_ARROW:case Draw.RIGHT_ARROW:case Draw.UP_ARROW:case Draw.DOWN_ARROW:case Draw.RECTANGLE:_7e4=this._graphic.geometry;break;case Draw.LINE:_7e4=new esri.geometry.Polyline({paths:[[[_7e2.x,_7e2.y],[end.x,end.y]]],spatialReference:_7e3});break;case Draw.EXTENT:_7e4=esri.geometry._rectToExtent(new esri.geometry.Rect(this._normalizeRect(_7e2,end,_7e3)));break;case Draw.FREEHAND_POLYLINE:_7e4=new esri.geometry.Polyline(_7e3);_7e4.addPath([].concat(this._points,[end.offset(0,0)]));break;case Draw.FREEHAND_POLYGON:_7e4=new esri.geometry.Polygon(_7e3);var ring=[].concat(this._points,[end.offset(0,0),this._points[0].offset(0,0)]);if(!esri.geometry.isClockwise(ring)&&!this.respectDrawingVertexOrder){console.debug(this.declaredClass+" : "+esri.bundle.toolbars.draw.convertAntiClockwisePolygon);ring.reverse();}_7e4.addRing(ring);break;}if(esri.isTouchEnabled){evt.preventDefault();}this._clear();this._drawEnd(_7e4);},_onClickHandler:function(evt){var _7e5;if(this.map.snappingManager){_7e5=this.map.snappingManager._snappingPoint;}var _7e6=_7e5||evt.mapPoint,map=this.map,_7e7=map.toScreen(_7e6),Draw=esri.toolbars.Draw,pts,dx,dy,_7e8,geom,_7e9;this._points.push(_7e6.offset(0,0));switch(this._geometryType){case Draw.POINT:this._drawEnd(_7e6.offset(0,0));this._setTooltipMessage(0);break;case Draw.POLYLINE:if(this._points.length===1){var _7ea=new esri.geometry.Polyline(map.spatialReference);_7ea.addPath(this._points);this._graphic=map.graphics.add(new esri.Graphic(_7ea,this.lineSymbol),true);if(map.snappingManager){map.snappingManager._setGraphic(this._graphic);}this._onMouseMoveHandler_connect=dojo.connect(map,"onMouseMove",this._onMouseMoveHandler);this._tGraphic=map.graphics.add(new esri.Graphic(new esri.geometry.Polyline({paths:[[[_7e6.x,_7e6.y],[_7e6.x,_7e6.y]]],spatialReference:map.spatialReference}),this.lineSymbol),true);}else{this._graphic.geometry._insertPoints([_7e6.offset(0,0)],0);this._graphic.setGeometry(this._graphic.geometry).setSymbol(this.lineSymbol);_7e8=this._tGraphic;geom=_7e8.geometry;geom.setPoint(0,0,_7e6.offset(0,0));geom.setPoint(0,1,_7e6.offset(0,0));_7e8.setGeometry(geom);}break;case Draw.POLYGON:if(this._points.length===1){_7e9=new esri.geometry.Polygon(map.spatialReference);_7e9.addRing(this._points);this._graphic=map.graphics.add(new esri.Graphic(_7e9,this.fillSymbol),true);if(map.snappingManager){map.snappingManager._setGraphic(this._graphic);}this._onMouseMoveHandler_connect=dojo.connect(map,"onMouseMove",this._onMouseMoveHandler);this._tGraphic=map.graphics.add(new esri.Graphic(new esri.geometry.Polyline({paths:[[[_7e6.x,_7e6.y],[_7e6.x,_7e6.y]]],spatialReference:map.spatialReference}),this.fillSymbol),true);}else{this._graphic.geometry._insertPoints([_7e6.offset(0,0)],0);this._graphic.setGeometry(this._graphic.geometry).setSymbol(this.fillSymbol);_7e8=this._tGraphic;geom=_7e8.geometry;geom.setPoint(0,0,_7e6.offset(0,0));geom.setPoint(0,1,_7e6.offset(0,0));_7e8.setGeometry(geom);}break;case Draw.MULTI_POINT:var tps=this._points;if(tps.length===1){var _7eb=new esri.geometry.Multipoint(map.spatialReference);_7eb.addPoint(tps[tps.length-1]);this._graphic=map.graphics.add(new esri.Graphic(_7eb,this.markerSymbol),true);if(map.snappingManager){map.snappingManager._setGraphic(this._graphic);}}else{this._graphic.geometry.addPoint(tps[tps.length-1]);this._graphic.setGeometry(this._graphic.geometry).setSymbol(this.markerSymbol);}break;case Draw.ARROW:pts=[[0,0],[-24,24],[-24,12],[-96,12],[-96,-12],[-24,-12],[-24,-24],[0,0]];dx=_7e7.x;dy=_7e7.y;this._addShape(pts,dx,dy);break;case Draw.LEFT_ARROW:pts=[[0,0],[24,24],[24,12],[96,12],[96,-12],[24,-12],[24,-24],[0,0]];dx=_7e7.x;dy=_7e7.y;this._addShape(pts,dx,dy);break;case Draw.RIGHT_ARROW:pts=[[0,0],[-24,24],[-24,12],[-96,12],[-96,-12],[-24,-12],[-24,-24],[0,0]];dx=_7e7.x;dy=_7e7.y;this._addShape(pts,dx,dy);break;case Draw.UP_ARROW:pts=[[0,0],[-24,24],[-12,24],[-12,96],[12,96],[12,24],[24,24],[0,0]];dx=_7e7.x;dy=_7e7.y;this._addShape(pts,dx,dy);break;case Draw.DOWN_ARROW:pts=[[0,0],[-24,-24],[-12,-24],[-12,-96],[12,-96],[12,-24],[24,-24],[0,0]];dx=_7e7.x;dy=_7e7.y;this._addShape(pts,dx,dy);break;case Draw.TRIANGLE:pts=[[0,-48],[41.56921938165306,24],[-41.56921938165306,24],[0,-48]];dx=_7e7.x;dy=_7e7.y;this._addShape(pts,dx,dy);break;case Draw.RECTANGLE:pts=[[0,-96],[96,-96],[96,0],[0,0],[0,-96]];dx=_7e7.x-48;dy=_7e7.y+48;this._addShape(pts,dx,dy);break;case Draw.CIRCLE:_7e9=new esri.geometry.Polygon(map.spatialReference);this._graphic=map.graphics.add(new esri.Graphic(_7e9,this.fillSymbol),true);this._graphic.geometry=esri.geometry.createCircle({center:_7e7,r:48,numberOfPoints:60,map:map});this._graphic.setGeometry(this._graphic.geometry);this._drawEnd(this._graphic.geometry);break;case Draw.ELLIPSE:_7e9=new esri.geometry.Polygon(map.spatialReference);this._graphic=map.graphics.add(new esri.Graphic(_7e9,this.fillSymbol),true);this._graphic.geometry=esri.geometry.createEllipse({center:_7e7,longAxis:48,shortAxis:24,numberOfPoints:60,map:map});this._graphic.setGeometry(this._graphic.geometry);this._drawEnd(this._graphic.geometry);break;}this._setTooltipMessage(this._points.length);},_addShape:function(path,dx,dy){var _7ec=this.map.graphics.add(new esri.Graphic(this._toPolygon(path,dx,dy),this.fillSymbol),true);this._setTooltipMessage(0);var geom;if(_7ec){geom=esri.geometry.fromJson(_7ec.geometry.toJson());this.map.graphics.remove(_7ec,true);}this._drawEnd(geom);_7ec=geom=null;},_toPolygon:function(path,dx,dy){var map=this.map;var _7ed=new esri.geometry.Polygon(map.spatialReference);_7ed.addRing(dojo.map(path,function(pt){return map.toMap({x:pt[0]+dx,y:pt[1]+dy});}));return _7ed;},_onDblClickHandler:function(evt){var _7ee,_7ef=this._points,map=this.map,_7f0=map.spatialReference,Draw=esri.toolbars.Draw;if(esri.isTouchEnabled){_7ef.push(evt.mapPoint);}_7ef=_7ef.slice(0,_7ef.length);switch(this._geometryType){case Draw.POLYLINE:if(!this._graphic||_7ef.length<2){dojo.disconnect(this._onMouseMoveHandler_connect);this._clear();this._onClickHandler(evt);return;}_7ee=new esri.geometry.Polyline(_7f0);_7ee.addPath([].concat(_7ef));break;case Draw.POLYGON:if(!this._graphic||_7ef.length<2){dojo.disconnect(this._onMouseMoveHandler_connect);this._clear();this._onClickHandler(evt);return;}_7ee=new esri.geometry.Polygon(_7f0);var ring=[].concat(_7ef,[_7ef[0].offset(0,0)]);if(!esri.geometry.isClockwise(ring)&&!this.respectDrawingVertexOrder){console.debug(this.declaredClass+" : "+esri.bundle.toolbars.draw.convertAntiClockwisePolygon);ring.reverse();}_7ee.addRing(ring);break;case Draw.MULTI_POINT:_7ee=new esri.geometry.Multipoint(_7f0);dojo.forEach(_7ef,function(pt){_7ee.addPoint(pt);});break;}dojo.disconnect(this._onMouseMoveHandler_connect);this._clear();this._setTooltipMessage(0);this._drawEnd(_7ee);},_onKeyDownHandler:function(evt){if(evt.keyCode===dojo.keys.ESCAPE){dojo.disconnect(this._onMouseMoveHandler_connect);this._clear();this._setTooltipMessage(0);}},_toggleTooltip:function(show){if(!this._options.showTooltips){return;}if(show){if(this._tooltip){return;}var _7f1=this.map.container;this._tooltip=dojo.create("div",{"class":"tooltip"},_7f1);this._tooltip.style.display="none";this._tooltip.style.position="fixed";this._setTooltipMessage(0);this._onTooltipMouseEnterHandler_connect=dojo.connect(this.map,"onMouseOver",this._updateTooltip);this._onTooltipMouseLeaveHandler_connect=dojo.connect(this.map,"onMouseOut",this._hideTooltip);this._onTooltipMouseMoveHandler_connect=dojo.connect(this.map,"onMouseMove",this._updateTooltip);}else{if(this._tooltip){dojo.disconnect(this._onTooltipMouseEnterHandler_connect);dojo.disconnect(this._onTooltipMouseLeaveHandler_connect);dojo.disconnect(this._onTooltipMouseMoveHandler_connect);dojo.destroy(this._tooltip);this._tooltip=null;}}},_hideTooltip:function(){var _7f2=this._tooltip;if(!_7f2){return;}_7f2.style.display="none";},_setTooltipMessage:function(_7f3){var _7f4=this._tooltip;if(!_7f4){return;}var _7f5=_7f3;var _7f6="";switch(this._geometryType){case esri.toolbars.Draw.POINT:_7f6=esri.bundle.toolbars.draw.addPoint;break;case esri.toolbars.Draw.ARROW:case esri.toolbars.Draw.LEFT_ARROW:case esri.toolbars.Draw.RIGHT_ARROW:case esri.toolbars.Draw.UP_ARROW:case esri.toolbars.Draw.DOWN_ARROW:case esri.toolbars.Draw.TRIANGLE:case esri.toolbars.Draw.RECTANGLE:case esri.toolbars.Draw.CIRCLE:case esri.toolbars.Draw.ELLIPSE:_7f6=esri.bundle.toolbars.draw.addShape;break;case esri.toolbars.Draw.LINE:case esri.toolbars.Draw.EXTENT:case esri.toolbars.Draw.FREEHAND_POLYLINE:case esri.toolbars.Draw.FREEHAND_POLYGON:_7f6=esri.bundle.toolbars.draw.freehand;break;case esri.toolbars.Draw.POLYLINE:case esri.toolbars.Draw.POLYGON:_7f6=esri.bundle.toolbars.draw.start;if(_7f5===1){_7f6=esri.bundle.toolbars.draw.resume;}else{if(_7f5>=2){_7f6=esri.bundle.toolbars.draw.complete;}}break;case esri.toolbars.Draw.MULTI_POINT:_7f6=esri.bundle.toolbars.draw.addMultipoint;if(_7f5>=1){_7f6=esri.bundle.toolbars.draw.finish;}break;}_7f4.innerHTML=_7f6;},_updateTooltip:function(evt){var _7f7=this._tooltip;if(!_7f7){return;}var px,py;if(evt.clientX||evt.pageY){px=evt.clientX;py=evt.clientY;}else{px=evt.clientX+dojo.body().scrollLeft-dojo.body().clientLeft;py=evt.clientY+dojo.body().scrollTop-dojo.body().clientTop;}_7f7.style.display="none";dojo.style(_7f7,{left:(px+this._options.tooltipOffset)+"px",top:(py)+"px"});_7f7.style.display="";},_redrawGraphic:function(_7f8,_7f9,_7fa,lod){if(_7fa||this.map.wrapAround180){var g=this._graphic;if(g){g.setGeometry(g.geometry);}g=this._tGraphic;if(g){g.setGeometry(g.geometry);}}},onActivate:function(){},onDeactivate:function(){},onDrawComplete:function(){},onDrawEnd:function(){}});dojo.mixin(esri.toolbars.Draw,{POINT:"point",MULTI_POINT:"multipoint",LINE:"line",EXTENT:"extent",POLYLINE:"polyline",POLYGON:"polygon",FREEHAND_POLYLINE:"freehandpolyline",FREEHAND_POLYGON:"freehandpolygon",ARROW:"arrow",LEFT_ARROW:"leftarrow",RIGHT_ARROW:"rightarrow",UP_ARROW:"uparrow",DOWN_ARROW:"downarrow",TRIANGLE:"triangle",CIRCLE:"circle",ELLIPSE:"ellipse",RECTANGLE:"rectangle"});});},"esri/layers/agsdynamic":function(){define(["dijit","dojo","dojox","dojo/require!esri/layers/dynamic,esri/layers/agscommon,esri/_time"],function(_7fb,dojo,_7fc){dojo.provide("esri.layers.agsdynamic");dojo.require("esri.layers.dynamic");dojo.require("esri.layers.agscommon");dojo.require("esri._time");dojo.declare("esri.layers.ArcGISDynamicMapServiceLayer",[esri.layers.DynamicMapServiceLayer,esri.layers.ArcGISMapServiceLayer],{constructor:function(url,_7fd){var _7fe=_7fd&&_7fd.imageParameters,dh=dojo.hitch;if(_7fe){var ldef=_7fe.layerDefinitions;if(ldef){this.setLayerDefinitions(ldef);}if(_7fe.layerOption===esri.layers.ImageParameters.LAYER_OPTION_SHOW){this.visibleLayers=[].concat(_7fe.layerIds);}}this._setIsPNG32=dh(this,this._setIsPNG32);this.dpi=(_7fe&&_7fe.dpi)||96;this.imageFormat=(_7fe&&_7fe.format)||"png8";this.imageTransparency=(_7fe&&_7fe.transparent===false)?false:true;this._setIsPNG32();this.gdbVersion=_7fd&&_7fd.gdbVersion;this._params.gdbVersion=this.gdbVersion;dojo.mixin(this._params,this._url.query,{dpi:this.dpi,transparent:this.imageTransparency,format:this.imageFormat},_7fe?_7fe.toJson():{});this.getImageUrl=dh(this,this.getImageUrl);this._initLayer=dh(this,this._initLayer);this._load=dh(this,this._load);this.useMapImage=_7fd?_7fd.useMapImage:false;if(this.useMapImage){this._imageExportHandler=dh(this,this._imageExportHandler);}this._loadCallback=_7fd&&_7fd.loadCallback;var _7ff=_7fd&&_7fd.resourceInfo;if(_7ff){this._initLayer(_7ff);}else{if(arguments[2]===undefined||arguments[2]===false){this._load();}}},disableClientCaching:false,layerDefinitions:null,_initLayer:function(_800,io){this.inherited(arguments);if(_800.timeInfo){this.timeInfo=new esri.layers.TimeInfo(_800.timeInfo);}this.loaded=true;this.onLoad(this);var _801=this._loadCallback;if(_801){delete this._loadCallback;_801(this);}},getImageUrl:function(_802,_803,_804,_805){var path=this._url.path+"/export?",_806=this._params,sr=_802.spatialReference.wkid||dojo.toJson(_802.spatialReference.toJson()),_807=this._errorHandler;delete _806._ts;dojo.mixin(_806,{bbox:_802.xmin+","+_802.ymin+","+_802.xmax+","+_802.ymax,bboxSR:sr,imageSR:sr,size:_803+","+_804},this.disableClientCaching?{_ts:new Date().getTime()}:{});if(_806.layerDefs){var defs=_806.layerDefs;delete _806.layerDefs;dojo.mixin(_806,{layerDefs:defs});}var _808=(_806.token=this._getToken()),_809=esri._getProxiedUrl(path+dojo.objectToQuery(dojo.mixin({},_806,{f:"image"})));if((_809.length>esri.config.defaults.io.postLength)||this.useMapImage){this._jsonRequest=esri.request({url:path,content:dojo.mixin(_806,{f:"json"}),callbackParamName:"callback",load:function(_80a,io){var href=_80a.href;if(_808){href+=(href.indexOf("?")===-1?("?token="+_808):("&token="+_808));}_805(esri._getProxiedUrl(href));},error:_807});}else{_805(_809);}},_setIsPNG32:function(){var _80b=this.imageFormat.toLowerCase();var isIE=dojo.isIE;this.isPNG32=isIE&&isIE===6&&(_80b==="png32"||_80b==="png24")&&this.imageTransparency;},_setTime:function(_80c){var _80d=this.timeInfo,time=(this._params.time=_80c?_80c.toJson().join(","):null);if(this.version<10.02&&_80d){if(!time){var _80e=this.layerInfos;if(_80e){var _80f=this.layerTimeOptions,_810=_80f?_80f.slice(0):[],ids=[];dojo.forEach(_80e,function(info){if(!info.subLayerIds){ids.push(info.id);}});if(ids.length){dojo.forEach(ids,function(id){if(!_810[id]){var opt=new esri.layers.LayerTimeOptions();opt.useTime=false;_810[id]=opt;}});this._params.layerTimeOptions=esri._serializeTimeOptions(_810,ids);}}}else{this._params.layerTimeOptions=esri._serializeTimeOptions(this.layerTimeOptions);}}if(this.version>=10.02&&_80d){if(!time&&!_80d.hasLiveData){this._params.time="null,null";}}},setDPI:function(dpi,_811){this.dpi=(this._params.dpi=dpi);if(!_811){this.refresh(true);}},setImageFormat:function(_812,_813){this.imageFormat=(this._params.format=_812);this._setIsPNG32();if(!_813){this.refresh(true);}},setImageTransparency:function(_814,_815){this.imageTransparency=(this._params.transparent=_814);this._setIsPNG32();if(!_815){this.refresh(true);}},setVisibleLayers:function(_816,_817){this.visibleLayers=_816;this._params.layers=esri.layers.ImageParameters.LAYER_OPTION_SHOW+":"+_816.join(",");this._updateDynamicLayers();if(!_817){this.refresh(true);}},setDefaultVisibleLayers:function(_818){this.visibleLayers=this._defaultVisibleLayers;this._params.layers=null;this._updateDynamicLayers();if(!_818){this.refresh(true);}},setLayerDefinitions:function(_819,_81a){this.layerDefinitions=_819;this._params.layerDefs=esri._serializeLayerDefinitions(_819);this._updateDynamicLayers();if(!_81a){this.refresh(true);}},setDefaultLayerDefinitions:function(_81b){this.layerDefinitions=this._params.layerDefs=null;this._updateDynamicLayers();if(!_81b){this.refresh(true);}},setDisableClientCaching:function(_81c){this.disableClientCaching=_81c;},setLayerTimeOptions:function(_81d,_81e){this.layerTimeOptions=_81d;this._params.layerTimeOptions=esri._serializeTimeOptions(_81d);this._updateDynamicLayers();if(!_81e){this.refresh(true);}},refresh:function(_81f){if(_81f){this.inherited(arguments);}else{var dc=this.disableClientCaching;this.disableClientCaching=true;this.inherited(arguments);this.disableClientCaching=dc;}},setLayerDrawingOptions:function(_820,_821){this.layerDrawingOptions=_820;this._updateDynamicLayers();if(!_821){this.refresh(true);}},setDynamicLayerInfos:function(_822,_823){if(_822&&_822.length>0){this.dynamicLayerInfos=_822;this.visibleLayers=esri._getDefaultVisibleLayers(_822);}else{this.dynamicLayerInfos=this.layerDrawingOptions=null;}this._updateDynamicLayers();if(!_823){this.refresh(true);}},createDynamicLayerInfosFromLayerInfos:function(){var _824=[],_825,_826;dojo.forEach(this.layerInfos,function(_827,idx){_825=new esri.layers.DynamicLayerInfo(_827.toJson());_825.source=new esri.layers.LayerMapSource({mapLayerId:_827.id});_824.push(_825);});return _824;},_onDynamicLayersChange:function(){},_updateDynamicLayers:function(){if((this.dynamicLayerInfos&&this.dynamicLayerInfos.length>0)||(this.layerDrawingOptions&&this.layerDrawingOptions.length>0)){var _828,_829=this.dynamicLayerInfos||this.layerInfos,_82a=[],_82b=this._map&&esri.geometry.getScale(this._map),_82c=this.visibleLayers,_82d=_82b?esri._getLayersForScale(_82b,_829):_82c;dojo.forEach(_829,function(info){if(!info.subLayerIds){var _82e=info.id;if(dojo.indexOf(_82c,_82e)!==-1&&dojo.indexOf(_82d,_82e)!==-1){var _82f={id:_82e};if(this.dynamicLayerInfos){_82f.source=info.source&&info.source.toJson();}else{_82f.source={type:"mapLayer",mapLayerId:_82e};}var _830;if(this.layerDefinitions&&this.layerDefinitions[_82e]){_830=this.layerDefinitions[_82e];}if(_830){_82f.definitionExpression=_830;}var _831;if(this.layerDrawingOptions&&this.layerDrawingOptions[_82e]){_831=this.layerDrawingOptions[_82e];}if(_831){_82f.drawingInfo=_831.toJson();}var _832;if(this.layerTimeOptions&&this.layerTimeOptions[_82e]){_832=this.layerTimeOptions[_82e];}if(_832){_82f.layerTimeOptions=_832.toJson();}_82a.push(_82f);}}},this);_828=dojo.toJson(_82a);if(!this._params.dynamicLayers||(this._params.dynamicLayers.length!==_828.length||this._params.dynamicLayers!==_828)){this._params.dynamicLayers=_828;this._onDynamicLayersChange(this._params.dynamicLayers);}}else{if(this._params.dynamicLayers){this._params.dynamicLayers=null;this._onDynamicLayersChange(null);}else{this._params.dynamicLayers=null;}}},_onExtentChangeHandler:function(_833,_834,_835){if(_835){this._updateDynamicLayers();}this.inherited(arguments);},_setMap:function(map,_836,_837){this._map=map;this._updateDynamicLayers();return this.inherited(arguments);},onGDBVersionChange:function(){},setGDBVersion:function(_838,_839){this.gdbVersion=_838;this._params.gdbVersion=_838;this.onGDBVersionChange();if(!_839){this.refresh(true);}},exportMapImage:function(_83a,_83b){var m=esri.config.defaults.map,p=dojo.mixin({size:m.width+","+m.height},this._params,_83a?_83a.toJson(this.normalization):{},{f:"json"});delete p._ts;if(p.layerDefs){var defs=p.layerDefs;delete p.layerDefs;dojo.mixin(p,{layerDefs:defs});}this._exportMapImage(this._url.path+"/export",p,_83b);}});dojo.declare("esri.layers.ImageParameters",null,{constructor:function(){this.layerDefinitions=[];this._bundle=dojo.i18n.getLocalization("esri","jsapi");},bbox:null,extent:null,width:null,height:null,dpi:null,format:null,imageSpatialReference:null,layerOption:null,layerIds:null,transparent:null,timeExtent:null,layerTimeOptions:null,toJson:function(_83c){if(this.bbox){dojo.deprecated(this.declaredClass+" : "+this._bundle.layers.imageParameters.deprecateBBox);}var bb=this.bbox||this.extent;bb=bb&&_83c&&bb._normalize(true);var _83d=this.layerOption,wkid=bb?(bb.spatialReference.wkid||dojo.toJson(bb.spatialReference.toJson())):null,_83e=this.imageSpatialReference,json={dpi:this.dpi,format:this.format,transparent:this.transparent,size:(this.width!==null&&this.height!==null?this.width+","+this.height:null),bbox:(bb?(bb.xmin+","+bb.ymin+","+bb.xmax+","+bb.ymax):null),bboxSR:wkid,layers:(_83d?_83d+":"+this.layerIds.join(","):null),imageSR:(_83e?(_83e.wkid||dojo.toJson(_83e.toJson())):wkid)};json.layerDefs=esri._serializeLayerDefinitions(this.layerDefinitions);var _83f=this.timeExtent;json.time=_83f?_83f.toJson().join(","):null;json.layerTimeOptions=esri._serializeTimeOptions(this.layerTimeOptions);return esri.filter(json,function(_840){if(_840!==null){return true;}});}});dojo.mixin(esri.layers.ImageParameters,{LAYER_OPTION_SHOW:"show",LAYER_OPTION_HIDE:"hide",LAYER_OPTION_INCLUDE:"include",LAYER_OPTION_EXCLUDE:"exclude"});dojo.declare("esri.layers.MapImage",null,{constructor:function(json){dojo.mixin(this,json);this.extent=new esri.geometry.Extent(this.extent);}});});},"esri/layers/graphics":function(){define(["dijit","dojo","dojox","dojo/require!esri/layers/layer,dojox/gfx,esri/graphic,esri/renderer"],function(_841,dojo,_842){dojo.provide("esri.layers.graphics");dojo.require("esri.layers.layer");dojo.require("dojox.gfx");dojo.require("esri.graphic");dojo.require("esri.renderer");dojo.declare("esri.layers._GraphicsContainer",null,{_setMap:function(map,_843){var es,_844=(this._connects=[]);this._map=map;if(_842.gfx.renderer.toLowerCase().indexOf("canvas")!==-1){es=dojo.create("div",{style:"overflow: visible; position: absolute;"},_843);this._surface={getEventSource:function(){return es;}};_844.push(dojo.connect(es,"onmousedown",this,this._canvasDownHandler));_844.push(dojo.connect(es,"onmouseup",this,this._canvasUpHandler));_844.push(dojo.connect(es,"onclick",this,this._canvasClickHandler));esri.layers._GraphicsLayer.prototype._canvas=true;}else{var _845=(this._surface=_842.gfx.createSurface(_843,map.width,map.height));es=_845.getEventSource();dojo.style((es=(dojo.isIE<9)?es.parentNode:es),{overflow:"visible",position:"absolute"});}_844.push(dojo.connect(map,"onResize",this,"_onResizeHandler"));return es;},_onResizeHandler:function(_846,_847,_848){var es=this._surface.getEventSource(),map=this._map,_849;if(dojo.isIE<9){dojo.style((es=es.parentNode),{width:_847+"px",height:_848+"px",clip:"rect(0px "+_847+"px "+_848+"px 0px)"});}dojo.attr(es,"width",_847);dojo.attr(es,"height",_848);if(!this._surface.declaredClass){dojo.forEach(es.childNodes,function(_84a){dojo.attr(_84a,"width",_847);dojo.attr(_84a,"height",_848);});}if(map.loaded){if(!map.graphics.suspended){map.graphics._resized=true;}dojo.forEach(map.graphicsLayerIds,function(_84b){_849=map.getLayer(_84b);if(!_849.suspended){_849._resized=true;}});}},_cleanUp:function(){dojo.forEach(this._connects,dojo.disconnect,dojo);this._map=this._surface=null;},_processEvent:function(evt){var map=this._map;evt.screenPoint=new esri.geometry.ScreenPoint(evt.pageX-map.position.x,evt.pageY-map.position.y);evt.mapPoint=map.toMap(evt.screenPoint);},_canvasDownHandler:function(evt){this._processEvent(evt);this._downPt=evt.screenPoint.x+","+evt.screenPoint.y;},_canvasUpHandler:function(evt){this._processEvent(evt);this._upPt=evt.screenPoint.x+","+evt.screenPoint.y;},_tolerance:15,_canvasClickHandler:function(evt){if(!this._downPt||!this._upPt||this._downPt!==this._upPt){return;}this._processEvent(evt);var map=this._map,_84c=dojo.map(map.graphicsLayerIds,function(id){return map.getLayer(id);});_84c.push(map.graphics);_84c.reverse();_84c=dojo.filter(_84c,function(_84d){return _84d.loaded&&_84d._mouseEvents&&!_84d.suspended&&(!esri._isDefined(_84d.opacity)||_84d.opacity>0);});var _84e=evt.screenPoint,geo=esri.geometry,_84f=this._tolerance,xmin=_84e.x-_84f,ymin=_84e.y+_84f,xmax=_84e.x+_84f,ymax=_84e.y-_84f,_850=new geo.Extent(xmin,ymax,xmax,ymin),_851=map.toMap(new geo.ScreenPoint(xmin,ymin)),_852=map.toMap(new geo.ScreenPoint(xmax,ymax)),_853=new geo.Extent(_851.x,_851.y,_852.x,_852.y,_851.spatialReference),_854,_855=esri.isTouchEnabled;delete _850.spatialReference;dojo.some(_84c,function(_856){var _857=dojo.filter(_856.graphics,function(_858){var _859=_858.getDojoShape();if(!_858.visible||!_859){return false;}var bbox=_859.getTransformedBoundingBox();if(bbox){var _85a=new geo.Extent(bbox[0].x,bbox[0].y,bbox[2].x,bbox[2].y);delete _85a.spatialReference;return _855?_85a.intersects(_850):_85a.contains(_84e);}else{return dojo.some(_859.children||[],function(_85b){bbox=_85b.getTransformedBoundingBox();var _85c=new geo.Extent(bbox[0].x,bbox[0].y,bbox[2].x,bbox[2].y);delete _85c.spatialReference;return _855?_85c.intersects(_850):_85c.contains(_84e);});}});_857.reverse();if(_857.length>0){var _85d;dojo.some(_857,function(_85e){if(_85e.geometry&&_853.intersects(_85e.geometry)){_85d=_85e;return true;}return false;});if(_85d){_854=_85d;return true;}}return false;});if(_854){var _85f=_854.getLayer();if(_85f){evt.graphic=_854;_85f.onClick(evt);}}}});dojo.declare("esri.layers._GraphicsLayer",esri.layers.Layer,{constructor:function(_860){if(_860&&(dojo.isString(_860)||(dojo.isObject(_860)&&_860.layerDefinition))){_860=arguments[1];}this._params=dojo.mixin({displayOnPan:true,drawMode:true},_860||{});this.infoTemplate=_860&&_860.infoTemplate;this.graphics=[];this._draw=dojo.hitch(this,this._draw);this._refresh=dojo.hitch(this,this._refresh);},setDrawMode:function(_861){this._params.drawMode=_861;},renderer:null,_setMap:function(map,_862){this.inherited(arguments);this._map=map;if(!this._canvas){this._div=_862.createGroup();}else{_862=_842.gfx.createSurface(_862.getEventSource(),map.width,map.height);dojo.style(_862.rawNode,"position","absolute");this._div=_862.createGroup();this._renderProto=this._div.constructor.prototype._render;this._div._render=dojo.hitch(this,this._canvasRender);}this._div.getEventSource().id=this.id+"_layer";this.evaluateSuspension();if(this.suspended&&!map.loaded){var _863=dojo.connect(map,"onLoad",this,function(){dojo.disconnect(_863);_863=null;this.evaluateSuspension();});}var op=this.opacity;if(esri._isDefined(op)&&op<1){this.setOpacity(op,true);}return this._div;},_unsetMap:function(map,_864){dojo.forEach(this.graphics,function(g){g._shape=null;});if(!this._canvas){this._div.clear();_864.remove(this._div);dojo.destroy(this._div.getEventSource());}else{_864=this._div.getParent();_864._parent={};dojo.destroy(_864.rawNode);_864.destroy();}this._map=this._div=null;clearTimeout(this._wakeTimer);this._wakeTimer=null;this._disableDrawConnectors();this.inherited(arguments);},_onZoomStartHandler:function(){esri.hide(this._div.getEventSource());},_onExtentChangeHandler:function(_865,_866,_867,lod){clearTimeout(this._wakeTimer);this._wakeTimer=null;if(_867){var _868=this._map.__visibleRect,_869=this._div;this._refresh(true);_869.setTransform(_842.gfx.matrix.translate({x:_868.x,y:_868.y}));if(this._renderProto&&_869.surface.pendingRender){this._dirty=true;}else{if(!this.suspended){esri.show(_869.getEventSource());}}}else{if(this._resized){this._refresh(false);this._resized=false;}}if(this.graphics.length>0){this.onUpdate();}},_canvasRender:function(){var _86a=this._div;if(this._dirty){delete this._dirty;if(!this.suspended){esri.show(_86a.getEventSource());}}return this._renderProto.apply(_86a,arguments);},_refresh:function(_86b){var gs=this.graphics,il=gs.length,i,_86c=this._draw;for(i=0;i<il;i++){_86c(gs[i],_86b);}},refresh:function(){this._refresh(true);},redraw:function(){this._refresh(true);},_onPanHandler:function(_86d,_86e){this._panDx=_86e.x;this._panDy=_86e.y;var _86f=this._map.__visibleRect;this._div.setTransform(_842.gfx.matrix.translate({x:_86f.x+_86e.x,y:_86f.y+_86e.y}));},_onPanEndUpdateHandler:function(_870,_871){if(!this._params._child&&(_871.x!==this._panDx||_871.y!==this._panDy)){var _872=this._map.__visibleRect;this._div.setTransform(_842.gfx.matrix.translate({x:_872.x,y:_872.y}));}this._refresh(false);if(this.graphics.length){this.onUpdate();}},_onPanStartHandler:function(){esri.hide(this._div.getEventSource());},_onPanEndHandler:function(){var _873=this._map.__visibleRect,_874=this._div;_874.setTransform(_842.gfx.matrix.translate({x:_873.x,y:_873.y}));this._refresh(false);if(this._renderProto&&_874.surface.pendingRender){this._dirty=true;}else{esri.show(_874.getEventSource());}if(this.graphics.length){this.onUpdate();}},onSuspend:function(){this.inherited(arguments);esri.hide(this._div.getEventSource());clearTimeout(this._wakeTimer);this._wakeTimer=null;this._disableDrawConnectors();},onResume:function(evt){this.inherited(arguments);if(evt.firstOccurrence){this._wrap=this._map.wrapAround180;this._srInfo=this._map.spatialReference._getInfo();}this._enableDrawConnectors();this._wakeTimer=this._wakeTimer||setTimeout(dojo.hitch(this,function(){if(!this.suspended){this._onExtentChangeHandler(null,null,true);}}),0);},_enableDrawConnectors:function(){var map=this._map,dc=dojo.connect;this._disableDrawConnectors();if(this._params.displayOnPan){if(!this._params._child){this._onPanHandler_connect=dc(map,"onPan",this,"_onPanHandler");}this._onPanEndHandler_connect=dc(map,"onPanEnd",this,"_onPanEndUpdateHandler");}else{this._onPanStartHandler_connect=dc(map,"onPanStart",this,"_onPanStartHandler");this._onPanEndHandler_connect=dc(map,"onPanEnd",this,"_onPanEndHandler");}this._onZoomStartHandler_connect=dc(map,"onZoomStart",this,"_onZoomStartHandler");this._onExtentChangeHandler_connect=dc(map,"onExtentChange",this,"_onExtentChangeHandler");},_disableDrawConnectors:function(){var dd=dojo.disconnect;dd(this._onExtentChangeHandler_connect);dd(this._onZoomStartHandler_connect);dd(this._onPanHandler_connect);dd(this._onPanStartHandler_connect);dd(this._onPanEndHandler_connect);this._onExtentChangeHandler_connect=this._onZoomStartHandler_connect=this._onPanHandler_connect=this._onPanStartHandler_connect=this._onPanEndHandler_connect=null;},_updateExtent:function(_875){var geom=_875.geometry,_876=esri.geometry;if(!geom){_875._extent=null;return;}var _877=(_875._extent=geom.getExtent());if(!_877){var x,y;if(geom instanceof _876.Point){x=geom.x;y=geom.y;}else{if(geom instanceof _876.Multipoint){x=geom.points[0][0];y=geom.points[0][1];}else{_875._extent=null;return;}}_875._extent=new _876.Extent(x,y,x,y,geom.spatialReference);}},_intersects:function(map,_878,_879){var _87a=map.spatialReference,_87b=_878.spatialReference,_87c=(_87a&&_87b&&!_87a.equals(_87b)&&_87a._canProject(_87b)&&_87b.wkid===4326);if(this._wrap&&!_879){var _87d=[],_87e=map._getFrameWidth(),info=this._srInfo,_87f,_880=map._clip?map._getAvailExtent():map.extent,_881,g,m,f,gl,ml,fl,_882,_883,_884=[],_885=_878._partwise;if(_87c){_880=map.geographicExtent;info=_87b._getInfo();}_881=_880._getParts(info);if(_885&&_885.length){_87f=[];for(g=0,gl=_885.length;g<gl;g++){_87f=_87f.concat(_885[g]._getParts(info));}}else{_87f=_878._getParts(info);}for(g=0,gl=_87f.length;g<gl;g++){_882=_87f[g];for(m=0,ml=_881.length;m<ml;m++){_883=_881[m];if(_883.extent.intersects(_882.extent)){for(f=0,fl=_882.frameIds.length;f<fl;f++){_87d.push((_883.frameIds[0]-_882.frameIds[f])*_87e);}}}}for(g=0,gl=_87d.length;g<gl;g++){f=_87d[g];if(dojo.indexOf(_87d,f)===g){_884.push(f);}}return (_884.length)?_884:null;}else{return (_87c?map.geographicExtent:map.extent).intersects(_878)?[0]:null;}},_draw:function(_886,_887){if(!this._params.drawMode||!this._map||this.suspended){return;}try{var _888=_886._extent,_889,_88a;if(_886.visible&&_888&&(_889=this._intersects(this._map,_888,_886.geometry._originOnly))&&(_88a=this._getSymbol(_886))){if(!_886.getDojoShape()||_887||_889){var type=_886.geometry.type;if(type==="point"){this._drawMarker(_886,_88a,_889);this._symbolizeMarker(_886,_88a);}else{if(type==="multipoint"){this._drawMarkers(_886,_88a,_889);this._symbolizeMarkers(_886,_88a);}else{this._drawShape(_886,_889);this._symbolizeShape(_886,_88a);}}}}else{if(_886.getDojoShape()){this._removeShape(_886);}}}catch(err){this._errorHandler(err,_886);}},_removeShape:function(_88b){var _88c=_88b.getDojoShape();_88c.removeShape();_88b._shape=null;},_drawShape:function(_88d,_88e){var _88f=_88d.geometry,type=_88f.type,map=this._map,me=map.extent,mw=map.width,mh=map.height,_890=esri.geometry,_891=map.__visibleRect,_892=[],i,il,rect,pt,xy,wh,_893=(type==="extent");if(type==="rect"||_893){pt={x:0,y:0,spatialReference:_88f.spatialReference};pt.x=_893?_88f.xmin:_88f.x;pt.y=_893?_88f.ymax:_88f.y;xy=_890.toScreenPoint(me,mw,mh,pt);pt.x=_893?_88f.xmax:(_88f.x+_88f.width);pt.y=_893?_88f.ymin:(_88f.y+_88f.height);wh=_890.toScreenPoint(me,mw,mh,pt);rect={x:xy.x-_891.x+_88e[0],y:xy.y-_891.y,width:Math.abs(wh.x-xy.x),height:Math.abs(wh.y-xy.y)};if(rect.width===0){rect.width=1;}if(rect.height===0){rect.height=1;}_88d._shape=this._drawRect(this._div,_88d.getDojoShape(),rect);}else{if(type==="polyline"||type==="polygon"){for(i=0,il=_88e.length;i<il;i++){_892=_892.concat(_890._toScreenPath(me,mw,mh,_88f,-_891.x+_88e[i],-_891.y));}_88d._shape=this._drawPath(this._div,_88d.getDojoShape(),_892);if(this._rendererLimits){if(type==="polyline"){this._clipPolyline(_88d._shape,_88f);}else{this._clipPolygon(_88d._shape,_88f);}}}}},_drawRect:function(_894,_895,rect){return _895?_895.setShape(rect):_894.createRect(rect);},_drawImage:function(_896,_897,_898){return _897?_897.setShape(_898):_896.createImage(_898);},_drawCircle:function(_899,_89a,_89b){return _89a?_89a.setShape(_89b):_899.createCircle(_89b);},_drawPath:(function(){if(dojo.isIE<9){return function(_89c,_89d,path){if(_89d){return _89d.setShape(path.join(" "));}else{var p=_89c.createObject(_842.gfx.EsriPath,path.join(" "));_89c._overrideSize(p.getEventSource());return p;}};}else{return function(_89e,_89f,path){return _89f?_89f.setShape(path.join(" ")):_89e.createPath(path.join(" "));};}}()),_drawText:function(_8a0,_8a1,text){return _8a1?_8a1.setShape(text):_8a0.createText(text);},_getSymbol:function(_8a2){return _8a2.symbol||(this.renderer?this.renderer.getSymbol(_8a2):null)||null;},_symbolizeShape:function(_8a3,_8a4){var _8a5=_8a4._stroke,fill=_8a4._fill;if(_8a5===null||fill===null){_8a5=_8a4.getStroke();fill=_8a4.getFill();}_8a3.getDojoShape().setStroke(_8a5).setFill(fill);_8a4._stroke=_8a5;_8a4._fill=fill;},_smsToPath:(function(){if(dojo.isIE<9){return function(SMS,_8a6,x,y,xMh,xPh,yMh,yPh,_8a7){switch(_8a6){case SMS.STYLE_SQUARE:return ["M",xMh+","+yMh,"L",xPh+","+yMh,xPh+","+yPh,xMh+","+yPh,"X","E"];case SMS.STYLE_CROSS:return ["M",x+","+yMh,"L",x+","+yPh,"M",xMh+","+y,"L",xPh+","+y,"E"];case SMS.STYLE_X:return ["M",xMh+","+yMh,"L",xPh+","+yPh,"M",xMh+","+yPh,"L",xPh+","+yMh,"E"];case SMS.STYLE_DIAMOND:return ["M",x+","+yMh,"L",xPh+","+y,x+","+yPh,xMh+","+y,"X","E"];case SMS.STYLE_TARGET:return ["M",xMh+","+yMh,"L",xPh+","+yMh,xPh+","+yPh,xMh+","+yPh,xMh+","+yMh,"M",(xMh-_8a7)+","+y,"L",xMh+","+y,"M",x+","+(yMh-_8a7),"L",x+","+yMh,"M",(xPh+_8a7)+","+y,"L",xPh+","+y,"M",x+","+(yPh+_8a7),"L",x+","+yPh,"E"];}};}else{return function(SMS,_8a8,x,y,xMh,xPh,yMh,yPh,_8a9){switch(_8a8){case SMS.STYLE_SQUARE:return ["M",xMh+","+yMh,xPh+","+yMh,xPh+","+yPh,xMh+","+yPh,"Z"];case SMS.STYLE_CROSS:return ["M",x+","+yMh,x+","+yPh,"M",xMh+","+y,xPh+","+y];case SMS.STYLE_X:return ["M",xMh+","+yMh,xPh+","+yPh,"M",xMh+","+yPh,xPh+","+yMh];case SMS.STYLE_DIAMOND:return ["M",x+","+yMh,xPh+","+y,x+","+yPh,xMh+","+y,"Z"];case SMS.STYLE_TARGET:return ["M",xMh+","+yMh,xPh+","+yMh,xPh+","+yPh,xMh+","+yPh,xMh+","+yMh,"M",(xMh-_8a9)+","+y,xMh+","+y,"M",x+","+(yMh-_8a9),x+","+yMh,"M",(xPh+_8a9)+","+y,xPh+","+y,"M",x+","+(yPh+_8a9),x+","+yPh];}};}}()),_pathStyles:{"square":1,"cross":1,"x":1,"diamond":1,"target":1},_typeMaps:{"picturemarkersymbol":"image","textsymbol":"text"},_isInvalidShape:function(_8aa,_8ab){var _8ac=_8ab&&_8ab.shape&&_8ab.shape.type,_8ad=_8aa&&_8aa.type,_8ae=_8aa&&_8aa.style;if(!_8ae){if(_8ad){_8ae=this._typeMaps[_8ad];}}else{if(this._pathStyles[_8ae]){_8ae="path";}}if(_8ac&&_8ae&&(_8ac!==_8ae)){return true;}},_drawPoint:function(_8af,_8b0,_8b1,_8b2,_8b3){var type=_8b1.type,map=this._map,_8b4=map.__visibleRect,_8b5=esri.geometry.toScreenPoint(map.extent,map.width,map.height,_8b0).offset(-_8b4.x+_8b3[0],-_8b4.y),px=_8b5.x,py=_8b5.y,_8b6;if(this._isInvalidShape(_8b1,_8b2)){_8b2.removeShape();_8b2=null;}if(type==="simplemarkersymbol"){var _8b7=_8b1.style,half=_8b1.size/2,_8b8=Math.round,SMS=esri.symbol.SimpleMarkerSymbol;switch(_8b7){case SMS.STYLE_SQUARE:case SMS.STYLE_CROSS:case SMS.STYLE_X:case SMS.STYLE_DIAMOND:_8b6=this._drawPath(_8af,_8b2,this._smsToPath(SMS,_8b7,px,py,_8b8(px-half),_8b8(px+half),_8b8(py-half),_8b8(py+half)));break;case SMS.STYLE_TARGET:var _8b9=_8b1._targetWidth/2,_8ba=_8b1._targetHeight/2;_8b6=this._drawPath(_8af,_8b2,this._smsToPath(SMS,_8b7,px,py,_8b8(px-_8b9),_8b8(px+_8b9),_8b8(py-_8ba),_8b8(py+_8ba),_8b1._spikeSize));break;default:_8b6=this._drawCircle(_8af,_8b2,{cx:px,cy:py,r:half});}}else{if(type==="picturemarkersymbol"){var w=_8b1.width,h=_8b1.height;_8b6=this._drawImage(_8af,_8b2,{x:px-(w/2),y:py-(h/2),width:w,height:h,src:_8b1.url});}else{if(type==="textsymbol"){_8b6=this._drawText(_8af,_8b2,{type:"text",text:_8b1.text,x:px,y:py,align:_8b1.align,decoration:_8b1.decoration,rotated:_8b1.rotated,kerning:_8b1.kerning});}}}_8b6.setTransform(_842.gfx.matrix.multiply(_842.gfx.matrix.translate(_8b1.xoffset,-_8b1.yoffset),_842.gfx.matrix.rotategAt(_8b1.angle,_8b5)));_8b6._wrapOffsets=_8b3;return _8b6;},_symbolizePoint:function(_8bb,_8bc){var type=_8bc.type;if(type==="picturemarkersymbol"){return;}var _8bd=_8bc._stroke,fill=_8bc._fill;if(type==="textsymbol"){_8bb.setFont(_8bc.font).setFill(_8bc.getFill());}else{if(_8bd===null||fill===null){_8bd=_8bc.getStroke();fill=_8bc.getFill();}if(type==="simplemarkersymbol"){_8bb.setFill(fill).setStroke(_8bd);}_8bc._stroke=_8bd;_8bc._fill=fill;}},_drawMarker:function(_8be,_8bf,_8c0){_8be._shape=this._drawPoint(this._div,_8be.geometry,_8bf,_8be.getDojoShape(),_8c0);},_symbolizeMarker:function(_8c1,_8c2){this._symbolizePoint(_8c1.getDojoShape(),_8c2);},_drawMarkers:function(_8c3,_8c4,_8c5){var _8c6=_8c3.geometry,_8c7=_8c6.points,_8c8=_8c3.getDojoShape()||this._div.createGroup(),_8c9,i,il=_8c7.length,temp=[],idx=0,j,jl=_8c5?_8c5.length:0;if(_8c8.children[0]&&this._isInvalidShape(_8c4,_8c8.children[0])){_8c8.clear();}for(i=0;i<il;i++){_8c9=_8c7[i];for(j=0;j<jl;j++){temp[0]=_8c5[j];this._drawPoint(_8c8,{x:_8c9[0],y:_8c9[1],spatialReference:_8c6.spatialReference},_8c4,_8c8.children[idx++],temp);}}var _8ca=_8c8.children.length;if(il*_8c5.length<_8ca){for(i=_8ca-1;i>=il*_8c5.length;i--){_8c8.children[i].removeShape();}}_8c3._shape=_8c8;},_symbolizeMarkers:function(_8cb,_8cc){var _8cd=_8cb.getDojoShape(),_8ce=_8cd.children,i,il=_8ce.length;for(i=0;i<il;i++){this._symbolizePoint(_8ce[i],_8cc);}},_errorHandler:function(err,_8cf){var msg=esri.bundle.layers.graphics.drawingError;if(_8cf){err.message=msg+"(geometry:"+(_8cf.geometry?_8cf.geometry.declaredClass:null)+", symbol:"+(_8cf.symbol?_8cf.symbol.declaredClass:null)+"): "+err.message;}else{err.message=msg+"(null): "+err.message;}this.inherited(arguments);},_rendererLimits:(function(){var _8d0,_8d1,_8d2;if(dojo.isFF){_8d0=16125;_8d1=-32250;_8d2=32250;}else{if(dojo.isIE<9){_8d0=100000;_8d1=-100000;_8d2=100000;}else{if(dojo.isChrome&&dojo.isChrome<6){_8d0=8150;_8d1=-10000;_8d2=10000;}}}if(_8d0){var _8d3,_8d4;_8d3=[-_8d0,-_8d0,_8d0,_8d0];_8d4=[[[-_8d0,-_8d0],[_8d0,-_8d0]],[[_8d0,-_8d0],[_8d0,_8d0]],[[_8d0,_8d0],[-_8d0,_8d0]],[[-_8d0,_8d0],[-_8d0,-_8d0]]];return {clipLimit:_8d0,rangeMin:_8d1,rangeMax:_8d2,clipBBox:_8d3,clipSegments:_8d4};}}()),_clipPolyline:function(_8d5,_8d6){var _8d7=this._getCorners(_8d5,_8d6);var _8d8=_8d7.tl,_8d9=_8d7.br;var _8da=this._rendererLimits;var _8db=_8da.rangeMin,_8dc=_8da.rangeMax,_8dd=_8da.clipBBox,_8de=_8da.clipSegments;var _8df=this._isPointWithinRange,_8e0=this._isPointWithinBBox,_8e1=this._getClipperIntersection,_8e2=this._getPlaneIndex;if(!_8df(_8d8,_8db,_8dc)||!_8df(_8d9,_8db,_8dc)){if(dojo.isIE<9){this._createSegments(_8d5);}var _8e3=[];dojo.forEach(_8d5.segments,function(_8e4){var _8e5=_8e4.args,len=_8e5.length,_8e6=[],i;for(i=0;i<len;i+=2){var pt1=[_8e5[i],_8e5[i+1]];var pt2=[_8e5[i+2],_8e5[i+3]];var _8e7=_8e0(pt1,_8dd);var _8e8=_8e0(pt2,_8dd);if(_8e7^_8e8){var _8e9=_8e1([pt1,pt2],_8de);if(_8e9){if(!_8e7){_8e6.push(_8e9[1],pt2);}else{if(i){_8e6.push(_8e9[1]);}else{_8e6.push(pt1,_8e9[1]);}_8e3.push(_8e6);_8e6=[];}}}else{if(_8e7){if(i){_8e6.push(pt2);}else{_8e6.push(pt1,pt2);}}else{var _8ea=_8e2(pt1,_8dd);var _8eb=_8e2(pt2,_8dd);if(_8ea===-1||_8eb===-1||_8ea===_8eb){continue;}var _8ec=_8e1([pt1,pt2],_8de,true);if(_8ec.length>0){if(!_8ec[_8ea]){_8ea=_8ec[_8ea[0]]?_8ea[0]:_8ea[1];}if(!_8ec[_8eb]){_8eb=_8ec[_8eb[0]]?_8eb[0]:_8eb[1];}var _8ed=_8ec[_8ea],_8ee=_8ec[_8eb];if(_8ed){_8e6.push(_8ed);}if(_8ee){_8e6.push(_8ee);_8e3.push(_8e6);_8e6=[];}}}}}_8e3.push(_8e6);});_8d5.setShape(this._getPathStringFromPaths(_8e3));}},_clipPolygon:function(_8ef,_8f0){var _8f1=this._getCorners(_8ef,_8f0);var _8f2=_8f1.tl,_8f3=_8f1.br;var _8f4=this._rendererLimits;var _8f5=_8f4.clipLimit,_8f6=_8f4.rangeMin,_8f7=_8f4.rangeMax,_8f8=_8f4.clipBBox,_8f9=_8f4.clipSegments;var _8fa=this._isPointWithinRange,_8fb=this._isPointWithinBBox,_8fc=this._getClipperIntersection,_8fd=this._getPlaneIndex,_8fe=esri.geometry._pointLineDistance;if(!_8fa(_8f2,_8f6,_8f7)||!_8fa(_8f3,_8f6,_8f7)){if(dojo.isIE<9){this._createSegments(_8ef);}var _8ff=dojo.map(_8ef.segments,function(_900){var _901=_900.args,len=_901.length,_902=[],_903=[],i;for(i=0;i<len;i+=2){var pt1=[_901[i],_901[i+1]];var pt2=[_901[i+2],_901[i+3]];if(i===(len-2)){_902.push(pt1);break;}var _904=_8fb(pt1,_8f8);var _905=_8fb(pt2,_8f8);_902.push(pt1);if(_904^_905){var _906=_8fc([pt1,pt2],_8f9);if(_906){var _907=_906[1];_907[_904?"inOut":"outIn"]=true;_902.push(_907);_903.push([_904?"INOUT":"OUTIN",_902.length-1,_906[0]]);}}else{if(!_904){var _908=_8fd(pt1,_8f8);var _909=_8fd(pt2,_8f8);if(_908===-1||_909===-1||_908===_909){continue;}var _906=_8fc([pt1,pt2],_8f9,true);if(_906.length>0){if(!_906[_908]){_908=_906[_908[0]]?_908[0]:_908[1];}if(!_906[_909]){_909=_906[_909[0]]?_909[0]:_909[1];}var _90a=_906[_908],_90b=_906[_909];if(_90a){_90a.outIn=true;_902.push(_90a);_903.push(["OUTIN",_902.length-1,_908]);}if(_90b){_90b.inOut=true;_902.push(_90b);_903.push(["INOUT",_902.length-1,_909]);}}else{if(dojo.isArray(_908)&&dojo.isArray(_909)){var _90c=_908.concat(_909);_90c.sort();if(_90c.join("")==="0123"){var _90d=[];if((_908[0]+_908[1])===3){_90d.push([_8f5,-_8f5],[-_8f5,_8f5]);}else{_90d.push([-_8f5,-_8f5],[_8f5,_8f5]);}var d1=_8fe(_90d[0],[pt1,pt2]);var d2=_8fe(_90d[1],[pt1,pt2]);_902.push((d1<d2)?_90d[0]:_90d[1]);}}}}}}var xmin=_8f8[0],ymin=_8f8[1],xmax=_8f8[2],ymax=_8f8[3];dojo.forEach(_902,function(_90e){if(_90e[0]<xmin){if(_90e[1]>=ymin&&_90e[1]<=ymax){_90e[0]=xmin;}else{_90e[0]=xmin;_90e[1]=_90e[1]<ymin?ymin:ymax;}}});dojo.forEach(_902,function(_90f){if(_90f[1]<ymin){if(_90f[0]>=xmin&&_90f[0]<=xmax){_90f[1]=ymin;}else{_90f[1]=ymin;_90f[0]=_90f[0]<xmin?xmin:xmax;}}});dojo.forEach(_902,function(_910){if(_910[0]>xmax){if(_910[1]>=ymin&&_910[1]<=ymax){_910[0]=xmax;}else{_910[0]=xmax;_910[1]=_910[1]<ymin?ymin:ymax;}}});dojo.forEach(_902,function(_911){if(_911[1]>ymax){if(_911[0]>=xmin&&_911[0]<=xmax){_911[1]=ymax;}else{_911[1]=ymax;_911[0]=_911[0]<xmin?xmin:xmax;}}});var k=0,len=_903.length;if(len>0){do{var curr=_903[k];var next=_903[(k+1)%len];if(curr[2]===next[2]&&curr[0]==="INOUT"&&next[0]==="OUTIN"){var _912=curr[1],end=next[1],u;if(_912<end){for(u=_912+1;u<end;u++){_902[u][2]=true;}}else{if(_912>end){for(u=_912+1;u<_902.length;u++){_902[u][2]=true;}for(u=0;u<end;u++){_902[u][2]=true;}}}}k=(k+1)%len;}while(k!==0);}var _913=_902[0],last=_902[_902.length-1];if(_913[2]){last[2]=true;dojo.some(_903,function(data){if(data[1]===1){_902.splice(_902.length-1,0,dojo.clone(_902[1]));return true;}return false;});}_902=dojo.filter(_902,function(_914){return _914[2]?false:true;});for(k=0;k<_902.length-1;k++){var now=_902[k];var next=_902[k+1];if(!next||(now[0]!==next[0])||(now[1]!==next[1])){continue;}if(next.outIn){now.outIn=true;}else{if(next.inOut){now.inOut=true;}}_902.splice(k+1,1);}var abs=Math.abs,_915=[];for(k=0;k<_902.length-1;k++){var curr=_902[k],cx=curr[0],cy=curr[1];var x1=(abs(cx)===_8f5);var y1=(abs(cy)===_8f5);var next=_902[k+1],nx=next[0],ny=next[1];var x2=(abs(nx)===_8f5);var y2=(abs(ny)===_8f5);if(x1&&y2){_915.push([k+1,[cx,ny]]);}else{if(y1&&x2){_915.push([k+1,[nx,cy]]);}}}for(k=_915.length-1;k>=0;k--){var data=_915[k];var prev=_902[data[0]-1];var now=_902[data[0]];if(prev.outIn||prev.inOut||now.outIn||now.inOut){continue;}_902.splice(data[0],0,data[1]);}var _913=_902[0],last=_902[_902.length-1];if(_913[0]!==last[0]||_913[1]!==last[1]){_902.push(_913);}return _902;});_8ef.setShape(this._getPathStringFromPaths(_8ff));}},_getCorners:function(_916,_917){if(dojo.isIE<9){var map=this._map,_918=_917.getExtent(),_919=_918.spatialReference,_91a=map.toScreen(new esri.geometry.Point(_918.xmin,_918.ymax,_919)),_91b=map.toScreen(new esri.geometry.Point(_918.xmax,_918.ymin,_919));return {tl:_91a,br:_91b};}else{var _91c=_916.getTransformedBoundingBox();return {tl:_91c[0],br:_91c[2]};}},_createSegments:function(_91d){_91d.shape.path=_91d.vmlPath;_91d.segmented=false;_91d._confirmSegmented();var _91e=_91d.segments;if(_91e.length>1){_91d.segments=dojo.filter(_91e,function(_91f,idx,arr){var next=arr[idx+1];if(_91f.action==="M"&&next&&next.action==="L"){_91f.args=_91f.args.concat(next.args);return true;}return false;});}},_getPathStringFromPaths:function(_920){if(dojo.isIE<9){_920=dojo.map(_920,function(path){var _921=dojo.map(path,function(_922,idx){return (idx===1?"l ":"")+_922.join(",");});return "m "+_921.join(" ");});_920.push("e");}else{_920=dojo.map(_920,function(path){var _923=dojo.map(path,function(_924){return _924.join(",");});return "M "+_923.join(" ");});}return _920.join(" ");},_isPointWithinBBox:function(_925,bbox){var left=bbox[0],top=bbox[1];var _926=bbox[2],_927=bbox[3];var x=_925[0],y=_925[1];if(x>left&&x<_926&&y>top&&y<_927){return true;}else{return false;}},_isPointWithinRange:function(_928,_929,_92a){var x=_928.x,y=_928.y;if(x<_929||y<_929||x>_92a||y>_92a){return false;}else{return true;}},_getClipperIntersection:function(line,_92b,_92c){var i,_92d=esri.geometry._getLineIntersection2,_92e=Math.round,data={length:0};for(i=0;i<4;i++){var _92f=_92d(line,_92b[i]);if(_92f){_92f[0]=_92e(_92f[0]);_92f[1]=_92e(_92f[1]);if(!_92c){return [i,_92f];}else{data[i]=_92f;data.length++;}}}return _92c?data:null;},_getPlaneIndex:function(_930,_931){var px=_930[0],py=_930[1],xmin=_931[0],ymin=_931[1],xmax=_931[2],ymax=_931[3];if(px<=xmin){if((py>=ymin)&&(py<=ymax)){return 3;}else{return (py<ymin)?[0,3]:[2,3];}}if(py<=ymin){if((px>=xmin)&&(px<=xmax)){return 0;}else{return (px<xmin)?[3,0]:[1,0];}}if(px>=xmax){if((py>=ymin)&&(py<=ymax)){return 1;}else{return (py<ymin)?[0,1]:[2,1];}}if(py>=ymax){if((px>=xmin)&&(px<=xmax)){return 2;}else{return (px<xmin)?[3,2]:[1,2];}}return -1;},onGraphicAdd:function(){},onGraphicRemove:function(){},onGraphicsClear:function(){},onOpacityChange:function(){},setInfoTemplate:function(_932){this.infoTemplate=_932;},add:function(_933){var _934=arguments[1];if(_933._graphicsLayer===this){return _933;}if(!_934){this.graphics.push(_933);}_933._graphicsLayer=this;this._updateExtent(_933);this._draw(_933);if(!_934){this.onGraphicAdd(_933);}return _933;},remove:function(_935){if(!arguments[1]){var _936=this.graphics,i;if((i=dojo.indexOf(_936,_935))===-1){return null;}_935=this.graphics.splice(i,1)[0];}if(_935.getDojoShape()){this._removeShape(_935);}_935._shape=_935._graphicsLayer=null;this.onGraphicRemove(_935);return _935;},clear:function(){var _937=arguments[1],g=this.graphics;while(g.length>0){this.remove(g[0]);}if(!_937){this.onGraphicsClear();}},setOpacity:function(op,_938){if(_938||this.opacity!=op){var div=this._div;if(div){if(dojo.isIE<9){dojo.forEach(this.graphics,function(_939){var _93a=_939._shape;var node=_93a&&_93a.getNode();if(node){var _93b=_93a.strokeStyle,_93c=node.stroke;if(_93b&&_93c){_93c.opacity=_93b.color.a*op;}var _93d=_93a.fillStyle,fill=node.fill;if(_93d&&fill){if(fill.type==="tile"){dojo.style(node,"opacity",op);}else{fill.opacity=_93d.a*op;}}}});div._esriIeOpacity=op;}else{if(this._canvas){dojo.style(div.getEventSource(),"opacity",op);}else{div.getEventSource().setAttribute("opacity",op);}}}this.opacity=op;if(!_938){this.onOpacityChange(op);}}},setRenderer:function(ren){this.renderer=ren;}});dojo.declare("esri.layers.GraphicsLayer",esri.layers._GraphicsLayer,{constructor:function(){this.enableMouseEvents=dojo.hitch(this,this.enableMouseEvents);this.disableMouseEvents=dojo.hitch(this,this.disableMouseEvents);this._processEvent=dojo.hitch(this,this._processEvent);this._initLayer();},_initLayer:function(){this.loaded=true;this.onLoad(this);},_setMap:function(){var d=this.inherited("_setMap",arguments);this.enableMouseEvents();return d;},_unsetMap:function(){this.disableMouseEvents();this.inherited("_unsetMap",arguments);},_processEvent:function(evt){var _93e=this._map,g=this.graphics,gl=g.length;evt.screenPoint=new esri.geometry.ScreenPoint(evt.pageX-_93e.position.x,evt.pageY-_93e.position.y);evt.mapPoint=_93e.toMap(evt.screenPoint);var i,es,gr,ds,_93f=evt.target,_940=_93f.parentNode;for(i=0;i<gl;i++){gr=g[i];ds=gr.getDojoShape();if(ds){es=ds.getEventSource();if(es===_93f||es===_940){evt.graphic=gr;return evt;}}}},_onMouseOverHandler:function(evt){if(this._processEvent(evt)){this.onMouseOver(evt);}},_onMouseMoveHandler:function(evt){if(this._processEvent(evt)){this.onMouseMove(evt);}},_onMouseDragHandler:function(evt){if(this._processEvent(evt)){this.onMouseDrag(evt);}},_onMouseOutHandler:function(evt){if(this._processEvent(evt)){this.onMouseOut(evt);}},_onMouseDownHandler:function(evt){this._downGr=this._downPt=null;if(this._processEvent(evt)){dojo.disconnect(this._onmousemove_connect);dojo.disconnect(this._onmousedrag_connect);this._onmousedrag_connect=dojo.connect(this._div.getEventSource(),"onmousemove",this,"_onMouseDragHandler");this._downGr=evt.graphic;this._downPt=evt.screenPoint.x+","+evt.screenPoint.y;this.onMouseDown(evt);}},_onMouseUpHandler:function(evt){this._upGr=this._upPt=null;if(this._processEvent(evt)){dojo.disconnect(this._onmousedrag_connect);dojo.disconnect(this._onmousemove_connect);this._onmousemove_connect=dojo.connect(this._div.getEventSource(),"onmousemove",this,"_onMouseMoveHandler");this._upGr=evt.graphic;this._upPt=evt.screenPoint.x+","+evt.screenPoint.y;this.onMouseUp(evt);}},_onClickHandler:function(evt){if(this._processEvent(evt)){var _941=this._downGr,upGr=this._upGr;if(_941&&upGr&&_941===upGr&&this._downPt===this._upPt){if(dojo.isIE<9){esri.layers.GraphicsLayer._clicked=evt.graphic;}this.onClick(evt);}}},_onDblClickHandler:function(evt){if(this._processEvent(evt)){this.onDblClick(evt);}},onMouseOver:function(){},onMouseMove:function(){},onMouseDrag:function(){},onMouseOut:function(){},onMouseDown:function(){},onMouseUp:function(){},onClick:function(){},onDblClick:function(){},enableMouseEvents:function(){if(this._mouseEvents){return;}var dc=dojo.connect,gc=this._div.getEventSource();if(_842.gfx.renderer.toLowerCase().indexOf("canvas")===-1){this._onmouseover_connect=dc(gc,"onmouseover",this,"_onMouseOverHandler");this._onmousemove_connect=dc(gc,"onmousemove",this,"_onMouseMoveHandler");this._onmouseout_connect=dc(gc,"onmouseout",this,"_onMouseOutHandler");this._onmousedown_connect=dc(gc,"onmousedown",this,"_onMouseDownHandler");this._onmouseup_connect=dc(gc,"onmouseup",this,"_onMouseUpHandler");this._onclick_connect=dc(gc,"onclick",this,"_onClickHandler");this._ondblclick_connect=dc(gc,"ondblclick",this,"_onDblClickHandler");}this._mouseEvents=true;},disableMouseEvents:function(){if(!this._mouseEvents){return;}var ddc=dojo.disconnect;ddc(this._onmouseover_connect);ddc(this._onmousemove_connect);ddc(this._onmousedrag_connect);ddc(this._onmouseout_connect);ddc(this._onmousedown_connect);ddc(this._onmouseup_connect);ddc(this._onclick_connect);ddc(this._ondblclick_connect);this._mouseEvents=false;}});});},"dojo/date":function(){define(["./has","./_base/lang"],function(has,lang){var date={};date.getDaysInMonth=function(_942){var _943=_942.getMonth();var days=[31,28,31,30,31,30,31,31,30,31,30,31];if(_943==1&&date.isLeapYear(_942)){return 29;}return days[_943];};date.isLeapYear=function(_944){var year=_944.getFullYear();return !(year%400)||(!(year%4)&&!!(year%100));};date.getTimezoneName=function(_945){var str=_945.toString();var tz="";var _946;var pos=str.indexOf("(");if(pos>-1){tz=str.substring(++pos,str.indexOf(")"));}else{var pat=/([A-Z\/]+) \d{4}$/;if((_946=str.match(pat))){tz=_946[1];}else{str=_945.toLocaleString();pat=/ ([A-Z\/]+)$/;if((_946=str.match(pat))){tz=_946[1];}}}return (tz=="AM"||tz=="PM")?"":tz;};date.compare=function(_947,_948,_949){_947=new Date(+_947);_948=new Date(+(_948||new Date()));if(_949=="date"){_947.setHours(0,0,0,0);_948.setHours(0,0,0,0);}else{if(_949=="time"){_947.setFullYear(0,0,0);_948.setFullYear(0,0,0);}}if(_947>_948){return 1;}if(_947<_948){return -1;}return 0;};date.add=function(date,_94a,_94b){var sum=new Date(+date);var _94c=false;var _94d="Date";switch(_94a){case "day":break;case "weekday":var days,_94e;var mod=_94b%5;if(!mod){days=(_94b>0)?5:-5;_94e=(_94b>0)?((_94b-5)/5):((_94b+5)/5);}else{days=mod;_94e=parseInt(_94b/5);}var strt=date.getDay();var adj=0;if(strt==6&&_94b>0){adj=1;}else{if(strt==0&&_94b<0){adj=-1;}}var trgt=strt+days;if(trgt==0||trgt==6){adj=(_94b>0)?2:-2;}_94b=(7*_94e)+days+adj;break;case "year":_94d="FullYear";_94c=true;break;case "week":_94b*=7;break;case "quarter":_94b*=3;case "month":_94c=true;_94d="Month";break;default:_94d="UTC"+_94a.charAt(0).toUpperCase()+_94a.substring(1)+"s";}if(_94d){sum["set"+_94d](sum["get"+_94d]()+_94b);}if(_94c&&(sum.getDate()<date.getDate())){sum.setDate(0);}return sum;};date.difference=function(_94f,_950,_951){_950=_950||new Date();_951=_951||"day";var _952=_950.getFullYear()-_94f.getFullYear();var _953=1;switch(_951){case "quarter":var m1=_94f.getMonth();var m2=_950.getMonth();var q1=Math.floor(m1/3)+1;var q2=Math.floor(m2/3)+1;q2+=(_952*4);_953=q2-q1;break;case "weekday":var days=Math.round(date.difference(_94f,_950,"day"));var _954=parseInt(date.difference(_94f,_950,"week"));var mod=days%7;if(mod==0){days=_954*5;}else{var adj=0;var aDay=_94f.getDay();var bDay=_950.getDay();_954=parseInt(days/7);mod=days%7;var _955=new Date(_94f);_955.setDate(_955.getDate()+(_954*7));var _956=_955.getDay();if(days>0){switch(true){case aDay==6:adj=-1;break;case aDay==0:adj=0;break;case bDay==6:adj=-1;break;case bDay==0:adj=-2;break;case (_956+mod)>5:adj=-2;}}else{if(days<0){switch(true){case aDay==6:adj=0;break;case aDay==0:adj=1;break;case bDay==6:adj=2;break;case bDay==0:adj=1;break;case (_956+mod)<0:adj=2;}}}days+=adj;days-=(_954*2);}_953=days;break;case "year":_953=_952;break;case "month":_953=(_950.getMonth()-_94f.getMonth())+(_952*12);break;case "week":_953=parseInt(date.difference(_94f,_950,"day")/7);break;case "day":_953/=24;case "hour":_953/=60;case "minute":_953/=60;case "second":_953/=1000;case "millisecond":_953*=_950.getTime()-_94f.getTime();}return Math.round(_953);};1&&lang.mixin(lang.getObject("dojo.date",true),date);return date;});},"dijit/Destroyable":function(){define("dijit/Destroyable",["dojo/_base/array","dojo/aspect","dojo/_base/declare"],function(_957,_958,_959){return _959("dijit.Destroyable",null,{destroy:function(_95a){this._destroyed=true;},own:function(){_957.forEach(arguments,function(_95b){var _95c="destroyRecursive" in _95b?"destroyRecursive":"destroy" in _95b?"destroy":"remove";_95b._odh=_958.before(this,"destroy",function(_95d){_95b._odh.remove();_95b[_95c](_95d);});_958.after(_95b,_95c,function(){_95b._odh.remove();});},this);return arguments;}});});},"esri/MapNavigationManager":function(){define(["dojo/_base/declare","dojo/_base/lang","dojo/_base/array","dojo/_base/sniff","dojo/_base/connect","dojo/_base/event","dojo/mouse","dojo/keys","esri","esri/MouseEvents","esri/TouchEvents","esri/utils","esri/geometry","esri/symbol","esri/graphic","esri/fx"],function(_95e,lang,_95f,has,_960,_961,_962,keys,esri,_963,_964){var _965=_960.connect,_966=_960.disconnect,_967=esri.geometry.ScreenPoint,_968=esri.geometry.Extent,Rect=esri.geometry.Rect,_969=1,_96a=-1,_96b=100,_96c=10,_96d=[keys.NUMPAD_PLUS,61,keys.NUMPAD_MINUS,keys.UP_ARROW,keys.NUMPAD_8,keys.RIGHT_ARROW,keys.NUMPAD_6,keys.DOWN_ARROW,keys.NUMPAD_2,keys.LEFT_ARROW,keys.NUMPAD_4,keys.PAGE_UP,keys.NUMPAD_9,keys.PAGE_DOWN,keys.NUMPAD_3,keys.END,keys.NUMPAD_1,keys.HOME,keys.NUMPAD_7];var _96e=_95e(null,{eventModel:"",constructor:function(map,_96f){this.map=map;lang.mixin(this,_96f);var node=map.__container;if(esri.isTouchEnabled){this.touchEvents=new _964(node,{map:map});this.eventModel="touch";}else{this.mouseEvents=new _963(node,{map:map});this.eventModel="mouse";this._zoomRect=new esri.Graphic(null,new esri.symbol.SimpleFillSymbol(esri.config.defaults.map.zoomSymbol));}this._keyDx=this._keyDy=0;this._adjustPinch=dojo.hitch(this,this._adjustPinch);this._adjustPinchEnd=dojo.hitch(this,this._adjustPinchEnd);},_panInit:function(evt){var _970=this.mouseEvents;if(_962.isLeft(evt)&&this.map.isPan&&!evt.shiftKey){this._dragOrigin=new _967(0,0);lang.mixin(this._dragOrigin,evt.screenPoint);this._panStartHandle=_965(_970,"onMouseDragStart",this,this._panStart);this._panHandle=_965(_970,"onMouseDrag",this,this._pan);this._panEndHandle=_965(_970,"onMouseUp",this,this._panEnd);if(has("chrome")){evt.preventDefault();}}},_panStart:function(evt){this.map.setCursor("move");this.map.__panStart(evt.screenPoint.x,evt.screenPoint.y);},_pan:function(evt){this.map.__pan(evt.screenPoint.x-this._dragOrigin.x,evt.screenPoint.y-this._dragOrigin.y);},_panEnd:function(evt){_966(this._panStartHandle);_966(this._panHandle);_966(this._panEndHandle);this._panStartHandle=this._panHandle=this._panEndHandle=null;var map=this.map;if(map.__panning){map.__panEnd(evt.screenPoint.x-this._dragOrigin.x,evt.screenPoint.y-this._dragOrigin.y);map.resetMapCursor();}},_zoomInit:function(evt){var map=this.map,_971=this.mouseEvents;if(_962.isLeft(evt)&&map.isRubberBandZoom&&evt.shiftKey){map.setCursor("crosshair");this._dragOrigin=lang.mixin({},evt.screenPoint);this._zoomDir=(evt.ctrlKey||evt.metaKey)?_96a:_969;this._zoomHandle=_965(_971,"onMouseDrag",this,this._zoom);this._zoomEndHandle=_965(_971,"onMouseUp",this,this._zoomEnd);if(has("chrome")){evt.preventDefault();}}},_zoom:function(evt){var map=this.map,rect=this._normalizeRect(evt).offset(map.__visibleRect.x,map.__visibleRect.y),g=map.graphics,_972=this._zoomRect;if(!_972.geometry){map.setCursor("crosshair");}if(_972.geometry){g.remove(_972,true);}var tl=map.toMap(new _967(rect.x,rect.y)),br=map.toMap(new _967(rect.x+rect.width,rect.y+rect.height));rect=new Rect(tl.x,tl.y,br.x-tl.x,tl.y-br.y,map.spatialReference);rect._originOnly=true;_972.setGeometry(rect);g.add(_972,true);},_zoomEnd:function(evt){var _973=this._zoomRect,map=this.map,ext=map.extent,sr=map.spatialReference;_966(this._zoomHandle);_966(this._zoomEndHandle);this._zoomHandle=this._zoomEndHandle=null;if(map._canZoom(this._zoomDir)&&_973.getDojoShape()){map.graphics.remove(_973);_973.geometry=null;var rect=this._normalizeRect(evt);rect.x+=map.__visibleRect.x;rect.y+=map.__visibleRect.y;var _974;if(this._zoomDir===_96a){var _975=ext.getWidth(),_976=(_975*map.width)/rect.width,_977=(_976-_975)/2;_974=new _968(ext.xmin-_977,ext.ymin-_977,ext.xmax+_977,ext.ymax+_977,sr);}else{var min=map.toMap({x:rect.x,y:(rect.y+rect.height)}),max=map.toMap({x:(rect.x+rect.width),y:rect.y});_974=new _968(min.x,min.y,max.x,max.y,sr);}map._extentUtil(null,null,_974);}if(_973.getDojoShape()){map.graphics.remove(_973,true);}this._zoomDir=0;map.resetMapCursor();},_wheelZoom:function(evt,_978){var map=this.map;if(!_978){if(map.smartNavigation&&!evt.shiftKey&&!map._isPanningOrZooming()){map.disableScrollWheelZoom();this._setScrollWheelPan(true);this._wheelPan(evt);return;}var _979=evt.timeStamp;if(!esri._isDefined(_979)||_979<=0){_979=(new Date()).getTime();}var _97a=this._mwts?(_979-this._mwts):_979;if(_97a<_96b){return;}this._mwts=_979;}if(!map._canZoom(evt.value)){return;}map._extentUtil({numLevels:evt.value,mapAnchor:evt.mapPoint,screenAnchor:evt.screenPoint});},_wheelPan:function(evt){var map=this.map;if(evt.shiftKey&&!map._isPanningOrZooming()){this._setScrollWheelPan(false);map.enableScrollWheelZoom();this._wheelZoom(evt);return;}var dx=0,dy=0;if(has("ff")){if(evt.axis===evt.HORIZONTAL_AXIS){dx=-evt.detail;}else{dy=-evt.detail;}}else{dx=evt.wheelDeltaX;dy=evt.wheelDeltaY;}map.translate(dx,dy);},_setScrollWheelPan:function(_97b){var map=this.map;map.isScrollWheelPan=_97b;this.mouseEvents.enableMouseWheel(_97b);_966(this._mwMacHandle);this._mwMacHandle=null;if(_97b){this._mwMacHandle=_965(this.mouseEvents,"onMouseWheel",this,this._wheelPan);}},_recenter:function(evt){if(evt.shiftKey&&!this.map._isPanningOrZooming()){this.map.centerAt(evt.mapPoint);}},_recenterZoom:function(evt){if(evt.shiftKey&&!this.map._isPanningOrZooming()){evt.value=(evt.ctrlKey||evt.metaKey)?_96a:_969;this._wheelZoom(evt,true);}},_dblClickZoom:function(evt){if(!this.map._isPanningOrZooming()){evt.value=1;this._wheelZoom(evt,true);}},_twoFingerTap:function(evt){if(!this.map._isPanningOrZooming()){evt.value=-1;this._wheelZoom(evt,true);}},_keyDown:function(evt){var code=evt.keyCode,map=this.map;if(_95f.indexOf(_96d,code)!==-1){if(code===keys.NUMPAD_PLUS||code===61){map._extentUtil({numLevels:1});}else{if(code===keys.NUMPAD_MINUS){map._extentUtil({numLevels:-1});}else{if(!map.__panning){map.__panStart(0,0);}switch(code){case keys.UP_ARROW:case keys.NUMPAD_8:this._keyDy+=_96c;break;case keys.RIGHT_ARROW:case keys.NUMPAD_6:this._keyDx-=_96c;break;case keys.DOWN_ARROW:case keys.NUMPAD_2:this._keyDy-=_96c;break;case keys.LEFT_ARROW:case keys.NUMPAD_4:this._keyDx+=_96c;break;case keys.PAGE_UP:case keys.NUMPAD_9:this._keyDx-=_96c;this._keyDy+=_96c;break;case keys.PAGE_DOWN:case keys.NUMPAD_3:this._keyDx-=_96c;this._keyDy-=_96c;break;case keys.END:case keys.NUMPAD_1:this._keyDx+=_96c;this._keyDy-=_96c;break;case keys.HOME:case keys.NUMPAD_7:this._keyDx+=_96c;this._keyDy+=_96c;break;default:return;}map.__pan(this._keyDx,this._keyDy);}}_961.stop(evt);}},_keyEnd:function(evt){var map=this.map;if(map.__panning&&(evt.keyCode!==keys.SHIFT)){map.__panEnd(this._keyDx,this._keyDy);this._keyDx=this._keyDy=0;}},_swipeInit:function(evt){var map=this.map,_97c=map._zoomAnim||map._panAnim;if(_97c&&_97c._active){_97c.stop();_97c._fire("onEnd",[_97c.node]);}this._dragOrigin=new _967(0,0);lang.mixin(this._dragOrigin,evt.screenPoint);_966(this._swipeHandle);_966(this._swipeEndHandle);this._swipeHandle=_965(this.touchEvents,"onSwipeMove",this,this._swipe);this._swipeEndHandle=_965(this.touchEvents,"onSwipeEnd",this,this._swipeEnd);},_swipe:function(evt){var map=this.map;if(map.__panning){this._panX=evt.screenPoint.x;this._panY=evt.screenPoint.y;map.__pan(evt.screenPoint.x-this._dragOrigin.x,evt.screenPoint.y-this._dragOrigin.y);}else{map.setCursor("move");map.__panStart(evt.screenPoint.x,evt.screenPoint.y);}},_swipeEnd:function(evt){_966(this._swipeHandle);_966(this._swipeEndHandle);this._swipeHandle=this._swipeEndHandle=null;var map=this.map;if(map.__panning){map.resetMapCursor();map.__panEnd(evt.screenPoint.x-this._dragOrigin.x,evt.screenPoint.y-this._dragOrigin.y);}},_pinchInit:function(evt){var map=this.map,_97d=map._zoomAnim||map._panAnim;if(_97d&&_97d._active){_97d.stop();_97d._fire("onEnd",[_97d.node]);}else{if(map.__panning){evt.screenPoint=new _967(this._panX,this._panY);evt.mapPoint=map.toMap(evt.screenPoint);this._swipeEnd(evt);}}_966(this._pinchHandle);_966(this._pinchEndHandle);this._pinchHandle=_965(this.touchEvents,"onPinchMove",this,this._pinch);this._pinchEndHandle=_965(this.touchEvents,"onPinchEnd",this,this._pinchEnd);},_pinch:function(evt){var map=this.map;if(evt.screenPoints){this.currLength=esri.geometry.getLength(evt.screenPoints[0],evt.screenPoints[1]);if(map.__zooming){var _97e=this.currLength/this._length;this._zoomStartExtent=this.__scaleExtent(map.extent,_97e,this._dragOrigin);map.__zoom(this._zoomStartExtent,_97e,this._dragOrigin);}else{this._dragOrigin=new _967((evt.screenPoints[0].x+evt.screenPoints[1].x)/2,(evt.screenPoints[0].y+evt.screenPoints[1].y)/2);this._length=this.currLength;map.__zoomStart(map.extent,this._dragOrigin);}map._fireOnScale(this.currLength/this._length,this._dragOrigin,true);}},_pinchEnd:function(evt){var map=this.map;_966(this._pinchHandle);_966(this._pinchEndHandle);this._pinchHandle=this._pinchEndHandle=null;if(map.__zooming&&map._zoomAnim===null){var _97f=this.currLength/this._length,_980=map.extent.getWidth();this._zoomAnimAnchor=map.toMap(this._dragOrigin);this._zoomStartExtent=this.__scaleExtent(map.extent,1/_97f,this._zoomAnimAnchor);if(map.__tileInfo){var ct=esri.TileUtils.getCandidateTileInfo(map,map.__tileInfo,this._zoomStartExtent),_981=map.__getExtentForLevel(ct.lod.level,this._zoomAnimAnchor),_982=map.getMinZoom(),_983=map.getMaxZoom(),_984=_981.extent,_985=_981.lod,_986=_980/_984.getWidth(),_987=ct.lod.level;if(_97f<1){if(_986>_97f){_987--;}}else{if(_986<_97f){_987++;}}if(_987<_982){_987=_982;}else{if(_987>_983){_987=_983;}}if(_987!==ct.lod.level){_981=map.__getExtentForLevel(_987,this._zoomAnimAnchor);_984=_981.extent;_985=_981.lod;}this._zoomEndExtent=_984;this._zoomEndLod=_985;map._zoomAnim=esri.fx.animateRange({range:{start:(_980/this._zoomStartExtent.getWidth()),end:_986},duration:esri.config.defaults.map.zoomDuration,rate:esri.config.defaults.map.zoomRate,onAnimate:this._adjustPinch,onEnd:this._adjustPinchEnd});map._zoomAnim.play();map._fireOnScale(map.extent.getWidth()/this._zoomEndExtent.getWidth(),this._dragOrigin);}else{this._zoomEndExtent=this._zoomStartExtent;map._fireOnScale(map.extent.getWidth()/this._zoomEndExtent.getWidth(),this._dragOrigin);this._adjustPinchEnd();}}},_adjustPinch:function(_988){var _989=this.__scaleExtent(this.map.extent,_988,this._zoomAnimAnchor);this.map.__zoom(_989,_988,this._dragOrigin);},_adjustPinchEnd:function(){var map=this.map,_98a=map.extent.getWidth()/this._zoomEndExtent.getWidth(),_98b=this.__scaleExtent(map.extent,1/_98a,this._zoomAnimAnchor),_98c=this._dragOrigin,lod=this._zoomEndLod;this._zoomStartExtent=this._zoomEndExtent=this._zoomEndLod=this._dragOrigin=map._zoomAnim=this._zoomAnimAnchor=null;map.__zoomEnd(_98b,_98a,_98c,lod,true);},__scaleExtent:function(_98d,_98e,_98f){var _990=_98f||_98d.getCenter(),_991=_98d.expand(_98e),xmin=_98d.xmin-((_991.getWidth()-_98d.getWidth())*(_990.x-_98d.xmin)/_98d.getWidth()),ymax=_98d.ymax-((_991.getHeight()-_98d.getHeight())*(_990.y-_98d.ymax)/_98d.getHeight());return new _968(xmin,ymax-_991.getHeight(),xmin+_991.getWidth(),ymax,_98d.spatialReference);},_normalizeRect:function(evt){var xy=evt.screenPoint,dx=this._dragOrigin.x,dy=this._dragOrigin.y,rect=new Rect((xy.x<dx?xy.x:dx)-this.map.__visibleRect.x,(xy.y<dy?xy.y:dy)-this.map.__visibleRect.y,Math.abs(xy.x-dx),Math.abs(xy.y-dy));delete rect.spatialReference;if(rect.width===0){rect.width=1;}if(rect.height===0){rect.height=1;}return rect;},setImmediateClick:function(_992){switch(this.eventModel){case "mouse":this.mouseEvents.setImmediateClick(_992);break;case "touch":this.touchEvents.setImmediateTap(_992);break;}},enablePan:function(){this.disablePan();switch(this.eventModel){case "mouse":this._panInitHandle=_965(this.mouseEvents,"onMouseDown",this,this._panInit);break;case "touch":this._swipeInitHandle=_965(this.touchEvents,"onSwipeStart",this,this._swipeInit);break;}},disablePan:function(){_966(this._panInitHandle);this._panInitHandle=null;_966(this._swipeInitHandle);this._swipeInitHandle=null;},enableRubberBandZoom:function(){this.disableRubberBandZoom();if(this.eventModel==="mouse"){this._zoomInitHandle=_965(this.mouseEvents,"onMouseDown",this,this._zoomInit);}},disableRubberBandZoom:function(){_966(this._zoomInitHandle);this._zoomInitHandle=null;},enablePinchZoom:function(){this.disablePinchZoom();if(this.eventModel==="touch"){this._pinchInitHandle=_965(this.touchEvents,"onPinchStart",this,this._pinchInit);}},disablePinchZoom:function(){_966(this._pinchInitHandle);this._pinchInitHandle=null;},enableScrollWheelZoom:function(){this.disableScrollWheelZoom();if(this.eventModel==="mouse"){this._wheelHandle=_965(this.mouseEvents,"onMouseWheel",this,this._wheelZoom);}},disableScrollWheelZoom:function(){_966(this._wheelHandle);this._wheelHandle=null;},enableDoubleClickZoom:function(){this.disableDoubleClickZoom();switch(this.eventModel){case "mouse":this._dblClickHandle=_965(this.mouseEvents,"onDblClick",this,this._dblClickZoom);break;case "touch":this._dblClickHandle=_965(this.touchEvents,"onDoubleTap",this,this._dblClickZoom);this._zoomOutHandle=_965(this.touchEvents,"onTwoFingerTap",this,this._twoFingerTap);break;}},disableDoubleClickZoom:function(){_966(this._dblClickHandle);_966(this._zoomOutHandle);this._dblClickHandle=this._zoomOutHandle=null;},enableShiftDoubleClickZoom:function(){this.disableShiftDoubleClickZoom();if(this.eventModel==="mouse"){this._sDblClickHandle=_965(this.mouseEvents,"onDblClick",this,this._recenterZoom);}},disableShiftDoubleClickZoom:function(){_966(this._sDblClickHandle);this._sDblClickHandle=null;},enableClickRecenter:function(){this.disableClickRecenter();if(this.eventModel==="mouse"){this._recenterHandle=_965(this.mouseEvents,"onClick",this,this._recenter);}},disableClickRecenter:function(){_966(this._recenterHandle);this._recenterHandle=null;},enableKeyboardNavigation:function(){this.disableKeyboardNavigation();if(this.eventModel==="mouse"){this._keyHandle=_965(this.mouseEvents,"onKeyDown",this,this._keyDown);this._keyEndHandle=_965(this.mouseEvents,"onKeyUp",this,this._keyEnd);}},disableKeyboardNavigation:function(){_966(this._keyHandle);_966(this._keyEndHandle);this._keyHandle=this._keyEndHandle=null;},enableNavigation:function(){var map=this.map;if(map&&map.loaded){map.enableDoubleClickZoom();map.enableClickRecenter();map.enablePan();map.enableRubberBandZoom();this.enablePinchZoom();map.enableKeyboardNavigation();if(map.smartNavigation){this._setScrollWheelPan(true);}else{map.enableScrollWheelZoom();}}},disableNavigation:function(){var map=this.map;if(map&&map.loaded){map.disableDoubleClickZoom();map.disableClickRecenter();map.disablePan();map.disableRubberBandZoom();this.disablePinchZoom();map.disableKeyboardNavigation();map.disableScrollWheelZoom();if(map.smartNavigation){this._setScrollWheelPan(false);}}},destroy:function(){if(this.touchEvents){this.touchEvents.destroy();}if(this.mouseEvents){this.mouseEvents.destroy();}var i,_993=[this._panInitHandle,this._panStartHandle,this._panHandle,this._panEndHandle,this._zoomInitHandle,this._zoomHandle,this._zoomEndHandle,this._wheelHandle,this._mwMacHandle,this._dblClickHandle,this._zoomOutHandle,this._recenterHandle,this._sDblClickHandle,this._keyHandle,this._keyEndHandle,this._swipeInitHandle,this._swipeHandle,this._swipeEndHandle,this._pinchInitHandle,this._pinchHandle,this._pinchEndHandle];for(i=0;i<_993.length;i++){_966(_993[i]);}this.map=this.touchEvents=this.mouseEvents=this.eventModel=this._zoomRect=this._dragOrigin=this._panInitHandle=this._panStartHandle=this._panHandle=this._panEndHandle=this._zoomInitHandle=this._zoomHandle=this._zoomEndHandle=this._wheelHandle=this._mwMacHandle=this._dblClickHandle=this._zoomOutHandle=this._recenterHandle=this._sDblClickHandle=this._keyHandle=this._keyEndHandle=this._swipeInitHandle=this._swipeHandle=this._swipeEndHandle=this._pinchInitHandle=this._pinchHandle=this._pinchEndHandle=null;}});if(has("extend-esri")){esri.MapNavigationManager=_96e;}return _96e;});},"dijit/WidgetSet":function(){define("dijit/WidgetSet",["dojo/_base/array","dojo/_base/declare","dojo/_base/kernel","./registry"],function(_994,_995,_996,_997){var _998=_995("dijit.WidgetSet",null,{constructor:function(){this._hash={};this.length=0;},add:function(_999){if(this._hash[_999.id]){throw new Error("Tried to register widget with id=="+_999.id+" but that id is already registered");}this._hash[_999.id]=_999;this.length++;},remove:function(id){if(this._hash[id]){delete this._hash[id];this.length--;}},forEach:function(func,_99a){_99a=_99a||_996.global;var i=0,id;for(id in this._hash){func.call(_99a,this._hash[id],i++,this._hash);}return this;},filter:function(_99b,_99c){_99c=_99c||_996.global;var res=new _998(),i=0,id;for(id in this._hash){var w=this._hash[id];if(_99b.call(_99c,w,i++,this._hash)){res.add(w);}}return res;},byId:function(id){return this._hash[id];},byClass:function(cls){var res=new _998(),id,_99d;for(id in this._hash){_99d=this._hash[id];if(_99d.declaredClass==cls){res.add(_99d);}}return res;},toArray:function(){var ar=[];for(var id in this._hash){ar.push(this._hash[id]);}return ar;},map:function(func,_99e){return _994.map(this.toArray(),func,_99e);},every:function(func,_99f){_99f=_99f||_996.global;var x=0,i;for(i in this._hash){if(!func.call(_99f,this._hash[i],x++,this._hash)){return false;}}return true;},some:function(func,_9a0){_9a0=_9a0||_996.global;var x=0,i;for(i in this._hash){if(func.call(_9a0,this._hash[i],x++,this._hash)){return true;}}return false;}});_994.forEach(["forEach","filter","byClass","map","every","some"],function(func){_997[func]=_998.prototype[func];});return _998;});},"dijit/layout/_ContentPaneResizeMixin":function(){define("dijit/layout/_ContentPaneResizeMixin",["dojo/_base/array","dojo/_base/declare","dojo/dom-class","dojo/dom-geometry","dojo/dom-style","dojo/_base/lang","dojo/query","dojo/sniff","../registry","../Viewport","./utils"],function(_9a1,_9a2,_9a3,_9a4,_9a5,lang,_9a6,has,_9a7,_9a8,_9a9){return _9a2("dijit.layout._ContentPaneResizeMixin",null,{doLayout:true,isLayoutContainer:true,startup:function(){if(this._started){return;}var _9aa=this.getParent();this._childOfLayoutWidget=_9aa&&_9aa.isLayoutContainer;this._needLayout=!this._childOfLayoutWidget;this.inherited(arguments);if(this._isShown()){this._onShow();}if(!this._childOfLayoutWidget){this.own(_9a8.on("resize",lang.hitch(this,"resize")));}},_checkIfSingleChild:function(){var _9ab=[],_9ac=false;_9a6("> *",this.containerNode).some(function(node){var _9ad=_9a7.byNode(node);if(_9ad&&_9ad.resize){_9ab.push(_9ad);}else{if(node.offsetHeight){_9ac=true;}}});this._singleChild=_9ab.length==1&&!_9ac?_9ab[0]:null;_9a3.toggle(this.containerNode,this.baseClass+"SingleChild",!!this._singleChild);},resize:function(_9ae,_9af){this._resizeCalled=true;this._scheduleLayout(_9ae,_9af);},_scheduleLayout:function(_9b0,_9b1){if(this._isShown()){this._layout(_9b0,_9b1);}else{this._needLayout=true;this._changeSize=_9b0;this._resultSize=_9b1;}},_layout:function(_9b2,_9b3){delete this._needLayout;if(!this._wasShown&&this.open!==false){this._onShow();}if(_9b2){_9a4.setMarginBox(this.domNode,_9b2);}var cn=this.containerNode;if(cn===this.domNode){var mb=_9b3||{};lang.mixin(mb,_9b2||{});if(!("h" in mb)||!("w" in mb)){mb=lang.mixin(_9a4.getMarginBox(cn),mb);}this._contentBox=_9a9.marginBox2contentBox(cn,mb);}else{this._contentBox=_9a4.getContentBox(cn);}this._layoutChildren();},_layoutChildren:function(){if(this.doLayout){this._checkIfSingleChild();}if(this._singleChild&&this._singleChild.resize){var cb=this._contentBox||_9a4.getContentBox(this.containerNode);this._singleChild.resize({w:cb.w,h:cb.h});}else{_9a1.forEach(this.getChildren(),function(_9b4){if(_9b4.resize){_9b4.resize();}});}},_isShown:function(){if(this._childOfLayoutWidget){if(this._resizeCalled&&"open" in this){return this.open;}return this._resizeCalled;}else{if("open" in this){return this.open;}else{var node=this.domNode,_9b5=this.domNode.parentNode;return (node.style.display!="none")&&(node.style.visibility!="hidden")&&!_9a3.contains(node,"dijitHidden")&&_9b5&&_9b5.style&&(_9b5.style.display!="none");}}},_onShow:function(){this._wasShown=true;if(this._needLayout){this._layout(this._changeSize,this._resultSize);}this.inherited(arguments);}});});},"esri/virtualearth/VEGeocoder":function(){define(["dijit","dojo","dojox","dojo/require!esri/tasks/_task,esri/geometry,esri/utils"],function(_9b6,dojo,_9b7){dojo.provide("esri.virtualearth.VEGeocoder");dojo.require("esri.tasks._task");dojo.require("esri.geometry");dojo.require("esri.utils");dojo.declare("esri.virtualearth.VEGeocoder",esri.tasks._Task,{constructor:function(_9b8){try{_9b8=dojo.mixin({bingMapsKey:null},_9b8||{});this.url="http://serverapi.arcgisonline.com/veadaptor/production/services/geocode/geocode";this._url=esri.urlToObject(this.url);this._queue=[];this.bingMapsKey=_9b8.bingMapsKey;this.culture=_9b8.culture||"en-US";this._errorHandler=dojo.hitch(this,this._errorHandler);this._addressToLocationsHandler=dojo.hitch(this,this._addressToLocationsHandler);if(!this.bingMapsKey){throw new Error(esri.bundle.virtualearth.vegeocode.bingMapsKeyNotSpecified);}}catch(e){this.onError(e);throw e;}},addressToLocations:function(_9b9,_9ba,_9bb){if(!this.bingMapsKey){console.debug(esri.bundle.virtualearth.vegeocode.requestQueued);this._queue.push(arguments);return;}var _9bc=dojo.mixin({},this._url.query,{query:_9b9,token:this.bingMapsKey,culture:this.culture}),_9bd=this._addressToLocationsHandler,_9be=this._errorHandler;var dfd=new dojo.Deferred(esri._dfdCanceller);dfd._pendingDfd=esri.request({url:this._url.path,content:_9bc,callbackParamName:"callback",load:function(r,i){_9bd(r,i,_9ba,_9bb,dfd);},error:function(r){_9be(r,_9bb,dfd);}});return dfd;},_addressToLocationsHandler:function(_9bf,io,_9c0,_9c1,dfd){try{dojo.forEach(_9bf,function(_9c2,i){_9bf[i]=new esri.virtualearth.VEGeocodeResult(_9c2);});this._successHandler([_9bf],"onAddressToLocationsComplete",_9c0,dfd);}catch(err){this._errorHandler(err,_9c1,dfd);}},onAddressToLocationsComplete:function(){},setBingMapsKey:function(_9c3){this.bingMapsKey=_9c3;},setCulture:function(_9c4){this.culture=_9c4;}});dojo.declare("esri.virtualearth.VEAddress",null,{constructor:function(json){dojo.mixin(this,{addressLine:null,adminDistrict:null,countryRegion:null,district:null,formattedAddress:null,locality:null,postalCode:null,postalTown:null},json);}});dojo.declare("esri.virtualearth.VEGeocodeResult",null,{constructor:function(json){dojo.mixin(this,{address:null,bestView:null,calculationMethod:null,confidence:null,displayName:null,entityType:null,location:null,matchCodes:null},json);if(this.address){this.address=new esri.virtualearth.VEAddress(this.address);}if(this.bestView){this.bestView=new esri.geometry.Extent(this.bestView);}if(this.locationArray){this.calculationMethod=this.locationArray[0].calculationMethod;this.location=new esri.geometry.Point(this.locationArray[0]);}}});});},"dojo/dnd/Moveable":function(){define(["../_base/array","../_base/declare","../_base/event","../_base/lang","../dom","../dom-class","../Evented","../on","../topic","../touch","./common","./Mover","../_base/window"],function(_9c5,_9c6,_9c7,lang,dom,_9c8,_9c9,on,_9ca,_9cb,dnd,_9cc,win){var _9cd=_9c6("dojo.dnd.Moveable",[_9c9],{handle:"",delay:0,skip:false,constructor:function(node,_9ce){this.node=dom.byId(node);if(!_9ce){_9ce={};}this.handle=_9ce.handle?dom.byId(_9ce.handle):null;if(!this.handle){this.handle=this.node;}this.delay=_9ce.delay>0?_9ce.delay:0;this.skip=_9ce.skip;this.mover=_9ce.mover?_9ce.mover:_9cc;this.events=[on(this.handle,_9cb.press,lang.hitch(this,"onMouseDown")),on(this.handle,"dragstart",lang.hitch(this,"onSelectStart")),on(this.handle,"selectstart",lang.hitch(this,"onSelectStart"))];},markupFactory:function(_9cf,node,Ctor){return new Ctor(node,_9cf);},destroy:function(){_9c5.forEach(this.events,function(_9d0){_9d0.remove();});this.events=this.node=this.handle=null;},onMouseDown:function(e){if(this.skip&&dnd.isFormElement(e)){return;}if(this.delay){this.events.push(on(this.handle,_9cb.move,lang.hitch(this,"onMouseMove")),on(this.handle,_9cb.release,lang.hitch(this,"onMouseUp")));this._lastX=e.pageX;this._lastY=e.pageY;}else{this.onDragDetected(e);}_9c7.stop(e);},onMouseMove:function(e){if(Math.abs(e.pageX-this._lastX)>this.delay||Math.abs(e.pageY-this._lastY)>this.delay){this.onMouseUp(e);this.onDragDetected(e);}_9c7.stop(e);},onMouseUp:function(e){for(var i=0;i<2;++i){this.events.pop().remove();}_9c7.stop(e);},onSelectStart:function(e){if(!this.skip||!dnd.isFormElement(e)){_9c7.stop(e);}},onDragDetected:function(e){new this.mover(this.node,e,this);},onMoveStart:function(_9d1){_9ca.publish("/dnd/move/start",_9d1);_9c8.add(win.body(),"dojoMove");_9c8.add(this.node,"dojoMoveItem");},onMoveStop:function(_9d2){_9ca.publish("/dnd/move/stop",_9d2);_9c8.remove(win.body(),"dojoMove");_9c8.remove(this.node,"dojoMoveItem");},onFirstMove:function(){},onMove:function(_9d3,_9d4){this.onMoving(_9d3,_9d4);var s=_9d3.node.style;s.left=_9d4.l+"px";s.top=_9d4.t+"px";this.onMoved(_9d3,_9d4);},onMoving:function(){},onMoved:function(){}});return _9cd;});},"dijit/typematic":function(){define("dijit/typematic",["dojo/_base/array","dojo/_base/connect","dojo/_base/event","dojo/_base/kernel","dojo/_base/lang","dojo/on","dojo/sniff","./main"],function(_9d5,_9d6,_9d7,_9d8,lang,on,has,_9d9){var _9da=(_9d9.typematic={_fireEventAndReload:function(){this._timer=null;this._callback(++this._count,this._node,this._evt);this._currentTimeout=Math.max(this._currentTimeout<0?this._initialDelay:(this._subsequentDelay>1?this._subsequentDelay:Math.round(this._currentTimeout*this._subsequentDelay)),this._minDelay);this._timer=setTimeout(lang.hitch(this,"_fireEventAndReload"),this._currentTimeout);},trigger:function(evt,_9db,node,_9dc,obj,_9dd,_9de,_9df){if(obj!=this._obj){this.stop();this._initialDelay=_9de||500;this._subsequentDelay=_9dd||0.9;this._minDelay=_9df||10;this._obj=obj;this._node=node;this._currentTimeout=-1;this._count=-1;this._callback=lang.hitch(_9db,_9dc);this._evt={faux:true};for(var attr in evt){if(attr!="layerX"&&attr!="layerY"){var v=evt[attr];if(typeof v!="function"&&typeof v!="undefined"){this._evt[attr]=v;}}}this._fireEventAndReload();}},stop:function(){if(this._timer){clearTimeout(this._timer);this._timer=null;}if(this._obj){this._callback(-1,this._node,this._evt);this._obj=null;}},addKeyListener:function(node,_9e0,_9e1,_9e2,_9e3,_9e4,_9e5){if(_9e0.keyCode){_9e0.charOrCode=_9e0.keyCode;_9d8.deprecated("keyCode attribute parameter for dijit.typematic.addKeyListener is deprecated. Use charOrCode instead.","","2.0");}else{if(_9e0.charCode){_9e0.charOrCode=String.fromCharCode(_9e0.charCode);_9d8.deprecated("charCode attribute parameter for dijit.typematic.addKeyListener is deprecated. Use charOrCode instead.","","2.0");}}var _9e6=[on(node,_9d6._keypress,lang.hitch(this,function(evt){if(evt.charOrCode==_9e0.charOrCode&&(_9e0.ctrlKey===undefined||_9e0.ctrlKey==evt.ctrlKey)&&(_9e0.altKey===undefined||_9e0.altKey==evt.altKey)&&(_9e0.metaKey===undefined||_9e0.metaKey==(evt.metaKey||false))&&(_9e0.shiftKey===undefined||_9e0.shiftKey==evt.shiftKey)){_9d7.stop(evt);_9da.trigger(evt,_9e1,node,_9e2,_9e0,_9e3,_9e4,_9e5);}else{if(_9da._obj==_9e0){_9da.stop();}}})),on(node,"keyup",lang.hitch(this,function(){if(_9da._obj==_9e0){_9da.stop();}}))];return {remove:function(){_9d5.forEach(_9e6,function(h){h.remove();});}};},addMouseListener:function(node,_9e7,_9e8,_9e9,_9ea,_9eb){var _9ec=[on(node,"mousedown",lang.hitch(this,function(evt){evt.preventDefault();_9da.trigger(evt,_9e7,node,_9e8,node,_9e9,_9ea,_9eb);})),on(node,"mouseup",lang.hitch(this,function(evt){if(this._obj){evt.preventDefault();}_9da.stop();})),on(node,"mouseout",lang.hitch(this,function(evt){if(this._obj){evt.preventDefault();}_9da.stop();})),on(node,"dblclick",lang.hitch(this,function(evt){evt.preventDefault();if(has("ie")<9){_9da.trigger(evt,_9e7,node,_9e8,node,_9e9,_9ea,_9eb);setTimeout(lang.hitch(this,_9da.stop),50);}}))];return {remove:function(){_9d5.forEach(_9ec,function(h){h.remove();});}};},addListener:function(_9ed,_9ee,_9ef,_9f0,_9f1,_9f2,_9f3,_9f4){var _9f5=[this.addKeyListener(_9ee,_9ef,_9f0,_9f1,_9f2,_9f3,_9f4),this.addMouseListener(_9ed,_9f0,_9f1,_9f2,_9f3,_9f4)];return {remove:function(){_9d5.forEach(_9f5,function(h){h.remove();});}};}});return _9da;});},"dojox/gfx":function(){define("dojox/gfx",["dojo/_base/lang","./gfx/_base","./gfx/renderer!"],function(lang,_9f6,_9f7){_9f6.switchTo(_9f7);return _9f6;});},"esri/WKIDUnitConversion":function(){define(["dijit","dojo","dojox"],function(_9f8,dojo,_9f9){dojo.provide("esri.WKIDUnitConversion");esri.WKIDUnitConversion={values:[1,0.2011661949,0.3047997101815088,0.3048006096012192,0.3048,0.304797265,0.9143985307444408,20.11678249437587,0.9143984146160287,20.11676512155263,0.3047994715386762,0.91439523,50000,150000],2000:0,2001:0,2002:0,2003:0,2004:0,2005:0,2006:0,2007:0,2008:0,2009:0,2010:0,2011:0,2012:0,2013:0,2014:0,2015:0,2016:0,2017:0,2018:0,2019:0,2020:0,2021:0,2022:0,2023:0,2024:0,2025:0,2026:0,2027:0,2028:0,2029:0,2030:0,2031:0,2032:0,2033:0,2034:0,2035:0,2036:0,2037:0,2038:0,2039:0,2040:0,2041:0,2042:0,2043:0,2044:0,2045:0,2056:0,2057:0,2058:0,2059:0,2060:0,2061:0,2062:0,2063:0,2064:0,2065:0,2066:1,2067:0,2068:0,2069:0,2070:0,2071:0,2072:0,2073:0,2074:0,2075:0,2076:0,2077:0,2078:0,2079:0,2080:0,2081:0,2082:0,2083:0,2084:0,2085:0,2086:0,2087:0,2088:0,2089:0,2090:0,2091:0,2092:0,2093:0,2094:0,2095:0,2096:0,2097:0,2098:0,2099:0,2100:0,2101:0,2102:0,2103:0,2104:0,2105:0,2106:0,2107:0,2108:0,2109:0,2110:0,2111:0,2112:0,2113:0,2114:0,2115:0,2116:0,2117:0,2118:0,2119:0,2120:0,2121:0,2122:0,2123:0,2124:0,2125:0,2126:0,2127:0,2128:0,2129:0,2130:0,2131:0,2132:0,2133:0,2134:0,2135:0,2136:2,2137:0,2138:0,2139:0,2140:0,2141:0,2142:0,2143:0,2144:0,2145:0,2146:0,2147:0,2148:0,2149:0,2150:0,2151:0,2152:0,2153:0,2154:0,2155:3,2157:0,2158:0,2159:2,2160:2,2161:0,2162:0,2163:0,2164:0,2165:0,2166:0,2167:0,2168:0,2169:0,2170:0,2172:0,2173:0,2174:0,2175:0,2176:0,2177:0,2178:0,2179:0,2180:0,2181:0,2182:0,2183:0,2184:0,2185:0,2186:0,2187:0,2188:0,2189:0,2190:0,2192:0,2193:0,2195:0,2196:0,2197:0,2198:0,2200:0,2201:0,2202:0,2203:0,2204:3,2205:0,2206:0,2207:0,2208:0,2209:0,2210:0,2211:0,2212:0,2213:0,2214:0,2215:0,2216:0,2217:0,2219:0,2220:0,2222:4,2223:4,2224:4,2225:3,2226:3,2227:3,2228:3,2229:3,2230:3,2231:3,2232:3,2233:3,2234:3,2235:3,2236:3,2237:3,2238:3,2239:3,2240:3,2241:3,2242:3,2243:3,2244:3,2245:3,2246:3,2247:3,2248:3,2249:3,2250:3,2251:4,2252:4,2253:4,2254:3,2255:3,2256:4,2257:3,2258:3,2259:3,2260:3,2261:3,2262:3,2263:3,2264:3,2265:4,2266:4,2267:3,2268:3,2269:4,2270:4,2271:3,2272:3,2273:4,2274:3,2275:3,2276:3,2277:3,2278:3,2279:3,2280:4,2281:4,2282:4,2283:3,2284:3,2285:3,2286:3,2287:3,2288:3,2289:3,2290:0,2291:0,2292:0,2294:0,2295:0,2308:0,2309:0,2310:0,2311:0,2312:0,2313:0,2314:5,2315:0,2316:0,2317:0,2318:0,2319:0,2320:0,2321:0,2322:0,2323:0,2324:0,2325:0,2326:0,2327:0,2328:0,2329:0,2330:0,2331:0,2332:0,2333:0,2334:0,2335:0,2336:0,2337:0,2338:0,2339:0,2340:0,2341:0,2342:0,2343:0,2344:0,2345:0,2346:0,2347:0,2348:0,2349:0,2350:0,2351:0,2352:0,2353:0,2354:0,2355:0,2356:0,2357:0,2358:0,2359:0,2360:0,2361:0,2362:0,2363:0,2364:0,2365:0,2366:0,2367:0,2368:0,2369:0,2370:0,2371:0,2372:0,2373:0,2374:0,2375:0,2376:0,2377:0,2378:0,2379:0,2380:0,2381:0,2382:0,2383:0,2384:0,2385:0,2386:0,2387:0,2388:0,2389:0,2390:0,2391:0,2392:0,2393:0,2394:0,2395:0,2396:0,2397:0,2398:0,2399:0,2400:0,2401:0,2402:0,2403:0,2404:0,2405:0,2406:0,2407:0,2408:0,2409:0,2410:0,2411:0,2412:0,2413:0,2414:0,2415:0,2416:0,2417:0,2418:0,2419:0,2420:0,2421:0,2422:0,2423:0,2424:0,2425:0,2426:0,2427:0,2428:0,2429:0,2430:0,2431:0,2432:0,2433:0,2434:0,2435:0,2436:0,2437:0,2438:0,2439:0,2440:0,2441:0,2442:0,2443:0,2444:0,2445:0,2446:0,2447:0,2448:0,2449:0,2450:0,2451:0,2452:0,2453:0,2454:0,2455:0,2456:0,2457:0,2458:0,2459:0,2460:0,2461:0,2462:0,2523:0,2524:0,2525:0,2526:0,2527:0,2528:0,2529:0,2530:0,2531:0,2532:0,2533:0,2534:0,2535:0,2536:0,2537:0,2538:0,2539:0,2540:0,2541:0,2542:0,2543:0,2544:0,2545:0,2546:0,2547:0,2548:0,2549:0,2550:0,2551:0,2552:0,2553:0,2554:0,2555:0,2556:0,2557:0,2558:0,2559:0,2560:0,2561:0,2562:0,2563:0,2564:0,2565:0,2566:0,2567:0,2568:0,2569:0,2570:0,2571:0,2572:0,2573:0,2574:0,2575:0,2576:0,2577:0,2578:0,2579:0,2580:0,2581:0,2582:0,2583:0,2584:0,2585:0,2586:0,2587:0,2588:0,2589:0,2590:0,2591:0,2592:0,2593:0,2594:0,2595:0,2596:0,2597:0,2598:0,2599:0,2600:0,2601:0,2602:0,2603:0,2604:0,2605:0,2606:0,2607:0,2608:0,2609:0,2610:0,2611:0,2612:0,2613:0,2614:0,2615:0,2616:0,2617:0,2618:0,2619:0,2620:0,2621:0,2622:0,2623:0,2624:0,2625:0,2626:0,2627:0,2628:0,2629:0,2630:0,2631:0,2632:0,2633:0,2634:0,2635:0,2636:0,2637:0,2638:0,2639:0,2640:0,2641:0,2642:0,2643:0,2644:0,2645:0,2646:0,2647:0,2648:0,2649:0,2650:0,2651:0,2652:0,2653:0,2654:0,2655:0,2656:0,2657:0,2658:0,2659:0,2660:0,2661:0,2662:0,2663:0,2664:0,2665:0,2666:0,2667:0,2668:0,2669:0,2670:0,2671:0,2672:0,2673:0,2674:0,2675:0,2676:0,2677:0,2678:0,2679:0,2680:0,2681:0,2682:0,2683:0,2684:0,2685:0,2686:0,2687:0,2688:0,2689:0,2690:0,2691:0,2692:0,2693:0,2694:0,2695:0,2696:0,2697:0,2698:0,2699:0,2700:0,2701:0,2702:0,2703:0,2704:0,2705:0,2706:0,2707:0,2708:0,2709:0,2710:0,2711:0,2712:0,2713:0,2714:0,2715:0,2716:0,2717:0,2718:0,2719:0,2720:0,2721:0,2722:0,2723:0,2724:0,2725:0,2726:0,2727:0,2728:0,2729:0,2730:0,2731:0,2732:0,2733:0,2734:0,2735:0,2736:0,2737:0,2738:0,2739:0,2740:0,2741:0,2742:0,2743:0,2744:0,2745:0,2746:0,2747:0,2748:0,2749:0,2750:0,2751:0,2752:0,2753:0,2754:0,2755:0,2756:0,2757:0,2758:0,2759:0,2760:0,2761:0,2762:0,2763:0,2764:0,2765:0,2766:0,2767:0,2768:0,2769:0,2770:0,2771:0,2772:0,2773:0,2774:0,2775:0,2776:0,2777:0,2778:0,2779:0,2780:0,2781:0,2782:0,2783:0,2784:0,2785:0,2786:0,2787:0,2788:0,2789:0,2790:0,2791:0,2792:0,2793:0,2794:0,2795:0,2796:0,2797:0,2798:0,2799:0,2800:0,2801:0,2802:0,2803:0,2804:0,2805:0,2806:0,2807:0,2808:0,2809:0,2810:0,2811:0,2812:0,2813:0,2814:0,2815:0,2816:0,2817:0,2818:0,2819:0,2820:0,2821:0,2822:0,2823:0,2824:0,2825:0,2826:0,2827:0,2828:0,2829:0,2830:0,2831:0,2832:0,2833:0,2834:0,2835:0,2836:0,2837:0,2838:0,2839:0,2840:0,2841:0,2842:0,2843:0,2844:0,2845:0,2846:0,2847:0,2848:0,2849:0,2850:0,2851:0,2852:0,2853:0,2854:0,2855:0,2856:0,2857:0,2858:0,2859:0,2860:0,2861:0,2862:0,2863:0,2864:0,2865:0,2866:0,2867:4,2868:4,2869:4,2870:3,2871:3,2872:3,2873:3,2874:3,2875:3,2876:3,2877:3,2878:3,2879:3,2880:3,2881:3,2882:3,2883:3,2884:3,2885:3,2886:3,2887:3,2888:3,2891:3,2892:3,2893:3,2894:3,2895:3,2896:4,2897:4,2898:4,2899:3,2900:3,2901:4,2902:3,2903:3,2904:3,2905:3,2906:3,2907:3,2908:3,2909:4,2910:4,2911:3,2912:3,2913:4,2914:4,2915:3,2916:3,2917:3,2918:3,2919:3,2920:3,2921:4,2922:4,2923:4,2924:3,2925:3,2926:3,2927:3,2928:3,2929:3,2930:3,2931:0,2932:0,2933:0,2935:0,2936:0,2937:0,2938:0,2939:0,2940:0,2941:0,2942:0,2943:0,2944:0,2945:0,2946:0,2947:0,2948:0,2949:0,2950:0,2951:0,2952:0,2953:0,2954:0,2955:0,2956:0,2957:0,2958:0,2959:0,2960:0,2961:0,2962:0,2964:3,2965:3,2966:3,2967:3,2968:3,2969:0,2970:0,2971:0,2972:0,2973:0,2975:0,2976:0,2977:0,2978:0,2979:0,2980:0,2981:0,2982:0,2984:0,2985:0,2986:0,2987:0,2988:0,2989:0,2991:0,2992:4,2993:0,2994:4,2995:0,2996:0,2997:0,2998:0,2999:0,3000:0,3001:0,3002:0,3003:0,3004:0,3005:0,3006:0,3007:0,3008:0,3009:0,3010:0,3011:0,3012:0,3013:0,3014:0,3015:0,3016:0,3017:0,3018:0,3019:0,3020:0,3021:0,3022:0,3023:0,3024:0,3025:0,3026:0,3027:0,3028:0,3029:0,3030:0,3031:0,3032:0,3033:0,3034:0,3035:0,3036:0,3037:0,3054:0,3055:0,3056:0,3057:0,3058:0,3059:0,3060:0,3061:0,3062:0,3063:0,3064:0,3065:0,3066:0,3067:0,3068:0,3069:0,3070:0,3071:0,3072:0,3073:0,3074:0,3075:0,3076:0,3077:0,3078:0,3079:0,3080:4,3081:0,3082:0,3083:0,3084:0,3085:0,3086:0,3087:0,3088:0,3089:3,3090:0,3091:3,3092:0,3093:0,3094:0,3095:0,3096:0,3097:0,3098:0,3099:0,3100:0,3101:0,3102:3,3106:0,3107:0,3108:0,3109:0,3110:0,3111:0,3112:0,3113:0,3114:0,3115:0,3116:0,3117:0,3118:0,3119:0,3120:0,3121:0,3122:0,3123:0,3124:0,3125:0,3126:0,3127:0,3128:0,3129:0,3130:0,3131:0,3132:0,3133:0,3134:0,3135:0,3136:0,3137:0,3138:0,3141:0,3142:0,3148:0,3149:0,3153:0,3154:0,3155:0,3156:0,3157:0,3158:0,3159:0,3160:0,3161:0,3162:0,3163:0,3164:0,3165:0,3166:0,3169:0,3170:0,3171:0,3172:0,3174:0,3175:0,3176:0,3177:0,3178:0,3179:0,3180:0,3181:0,3182:0,3183:0,3184:0,3185:0,3186:0,3187:0,3188:0,3189:0,3190:0,3191:0,3192:0,3193:0,3194:0,3195:0,3196:0,3197:0,3198:0,3199:0,3200:0,3201:0,3202:0,3203:0,3294:0,3296:0,3297:0,3298:0,3299:0,3300:0,3301:0,3302:0,3303:0,3304:0,3305:0,3306:0,3307:0,3308:0,3309:0,3310:0,3311:0,3312:0,3313:0,3314:0,3315:0,3316:0,3317:0,3318:0,3319:0,3320:0,3321:0,3322:0,3323:0,3324:0,3325:0,3326:0,3327:0,3328:0,3329:0,3330:0,3331:0,3332:0,3333:0,3334:0,3335:0,3336:0,3337:0,3338:0,3339:0,3340:0,3341:0,3342:0,3343:0,3344:0,3345:0,3346:0,3347:0,3348:0,3349:0,3350:0,3351:0,3352:0,3353:0,3354:0,3355:0,3356:0,3357:0,3358:0,3359:3,3360:0,3361:4,3362:0,3363:3,3364:0,3365:3,3366:5,3367:0,3368:0,3369:0,3370:0,3371:0,3372:0,3373:0,3374:0,3375:0,3376:0,3377:0,3378:0,3379:0,3380:0,3381:0,3382:0,3383:0,3384:0,3385:0,3386:0,3387:0,3388:0,3391:0,3392:0,3393:0,3394:0,3395:0,3396:0,3397:0,3398:0,3399:0,3400:0,3401:0,3402:0,3403:0,3404:3,3405:0,3406:0,3407:5,3408:0,3409:0,3410:0,3411:0,3412:0,3413:0,3414:0,3415:0,3416:0,3417:3,3418:3,3419:3,3420:3,3421:3,3422:3,3423:3,3424:3,3425:3,3426:3,3427:3,3428:3,3429:3,3430:3,3431:3,3432:3,3433:3,3434:3,3435:3,3436:3,3437:3,3438:3,3439:0,3440:0,3441:3,3442:3,3443:3,3444:3,3445:3,3446:3,3447:0,3448:0,3449:0,3450:0,3453:3,3456:3,3457:3,3458:3,3459:3,3460:0,3461:0,3462:0,3463:0,3464:0,3560:3,3561:3,3562:3,3563:3,3564:3,3565:3,3566:3,3567:3,3568:3,3569:3,3570:3,3571:0,3572:0,3573:0,3574:0,3575:0,3576:0,3577:0,3578:0,3579:0,3580:0,3581:0,3582:3,3583:0,3584:3,3585:0,3586:3,3587:0,3588:4,3589:0,3590:4,3591:0,3592:0,3593:4,3594:0,3595:0,3596:0,3597:0,3598:3,3599:0,3600:3,3601:0,3602:0,3603:0,3604:0,3605:4,3606:0,3607:0,3608:3,3609:0,3610:3,3611:0,3612:3,3613:0,3614:3,3615:0,3616:3,3617:0,3618:3,3619:0,3620:3,3621:0,3622:3,3623:0,3624:3,3625:0,3626:3,3627:0,3628:3,3629:0,3630:3,3631:0,3632:3,3633:0,3634:4,3635:0,3636:4,3637:0,3638:0,3639:0,3640:3,3641:0,3642:3,3643:0,3644:4,3645:0,3646:4,3647:0,3648:4,3649:0,3650:3,3651:0,3652:3,3653:0,3654:3,3655:0,3656:4,3657:0,3658:3,3659:0,3660:3,3661:0,3662:3,3663:0,3664:3,3665:0,3666:0,3667:0,3668:3,3669:0,3670:3,3671:0,3672:3,3673:0,3674:3,3675:0,3676:4,3677:3,3678:0,3679:4,3680:3,3681:0,3682:4,3683:3,3684:0,3685:0,3686:3,3687:0,3688:3,3689:0,3690:3,3691:0,3692:3,3693:0,3694:0,3695:0,3696:3,3697:0,3698:3,3699:0,3700:3,3701:0,3702:0,3703:0,3704:0,3705:0,3706:0,3707:0,3708:0,3709:0,3710:0,3711:0,3712:0,3713:0,3714:0,3715:0,3716:0,3717:0,3718:0,3719:0,3720:0,3721:0,3722:0,3723:0,3724:0,3725:0,3726:0,3727:0,3728:3,3729:3,3730:3,3731:3,3732:3,3733:3,3734:3,3735:3,3736:3,3737:3,3738:3,3739:3,3753:3,3754:3,3755:3,3756:3,3757:3,3758:3,3759:3,3760:3,3761:0,3762:0,3763:0,3764:0,3765:0,3766:0,3767:0,3768:0,3769:0,3770:0,3771:0,3772:0,3773:0,3775:0,3776:0,3777:0,3779:0,3780:0,3781:0,3783:0,3784:0,3788:0,3789:0,3790:0,3791:0,3793:0,3794:0,3797:0,3798:0,3799:0,3800:0,3801:0,3802:0,3812:0,3814:0,3815:0,3816:0,3832:0,3833:0,3834:0,3835:0,3836:0,3837:0,3838:0,3839:0,3840:0,3841:0,3851:0,3852:0,3857:0,3890:0,3891:0,3892:0,3893:0,3912:0,3920:0,3942:0,3943:0,3944:0,3945:0,3946:0,3947:0,3948:0,3949:0,3950:0,3968:0,3969:0,3670:0,3973:0,3974:0,3975:0,3976:0,3978:0,3979:0,3986:0,3987:0,3988:0,3989:0,3991:3,3992:3,3994:0,3995:0,3996:0,3997:0,20002:0,20003:0,20004:0,20005:0,20006:0,20007:0,20008:0,20009:0,20010:0,20011:0,20012:0,20013:0,20014:0,20015:0,20016:0,20017:0,20018:0,20019:0,20020:0,20021:0,20022:0,20023:0,20024:0,20025:0,20026:0,20027:0,20028:0,20029:0,20030:0,20031:0,20032:0,20062:0,20063:0,20064:0,20065:0,20066:0,20067:0,20068:0,20069:0,20070:0,20071:0,20072:0,20073:0,20074:0,20075:0,20076:0,20077:0,20078:0,20079:0,20080:0,20081:0,20082:0,20083:0,20084:0,20085:0,20086:0,20087:0,20088:0,20089:0,20090:0,20091:0,20092:0,20135:0,20136:0,20137:0,20138:0,20248:0,20249:0,20250:0,20251:0,20252:0,20253:0,20254:0,20255:0,20256:0,20257:0,20258:0,20348:0,20349:0,20350:0,20351:0,20352:0,20353:0,20354:0,20355:0,20356:0,20357:0,20358:0,20436:0,20437:0,20438:0,20439:0,20440:0,20499:0,20538:0,20539:0,20790:0,20822:0,20823:0,20824:0,20934:0,20935:0,20936:0,21035:0,21036:0,21037:0,21095:0,21096:0,21097:0,21148:0,21149:0,21150:0,21291:0,21292:0,21413:0,21414:0,21415:0,21416:0,21417:0,21418:0,21419:0,21420:0,21421:0,21422:0,21423:0,21473:0,21474:0,21475:0,21476:0,21477:0,21478:0,21479:0,21480:0,21481:0,21482:0,21483:0,21500:0,21780:0,21781:0,21817:0,21818:0,21891:0,21892:0,21893:0,21894:0,21896:0,21897:0,21898:0,21899:0,22032:0,22033:0,22091:0,22092:0,22171:0,22172:0,22173:0,22174:0,22175:0,22176:0,22177:0,22181:0,22182:0,22183:0,22184:0,22185:0,22186:0,22187:0,22191:0,22192:0,22193:0,22194:0,22195:0,22196:0,22197:0,22234:0,22235:0,22236:0,22332:0,22391:0,22392:0,22521:0,22522:0,22523:0,22524:0,22525:0,22700:0,22770:0,22780:0,22832:0,22991:0,22992:0,22993:0,22994:0,23028:0,23029:0,23030:0,23031:0,23032:0,23033:0,23034:0,23035:0,23036:0,23037:0,23038:0,23090:0,23095:0,23239:0,23240:0,23433:0,23700:0,23830:0,23831:0,23832:0,23833:0,23834:0,23835:0,23836:0,23837:0,23838:0,23839:0,23840:0,23841:0,23842:0,23843:0,23844:0,23845:0,23846:0,23847:0,23848:0,23849:0,23850:0,23851:0,23852:0,23853:0,23866:0,23867:0,23868:0,23869:0,23870:0,23871:0,23872:0,23877:0,23878:0,23879:0,23880:0,23881:0,23882:0,23883:0,23884:0,23886:0,23887:0,23888:0,23889:0,23890:0,23891:0,23892:0,23893:0,23894:0,23946:0,23947:0,23948:0,24047:0,24048:0,24100:0,24200:0,24305:0,24306:0,24311:0,24312:0,24313:0,24342:0,24343:0,24344:0,24345:0,24346:0,24347:0,24370:6,24371:6,24372:6,24373:6,24374:6,24375:0,24376:0,24377:0,24378:0,24379:0,24380:0,24381:0,24382:6,24383:0,24500:0,24547:0,24548:0,24571:7,24600:0,24718:0,24719:0,24720:0,24721:0,24817:0,24818:0,24819:0,24820:0,24821:0,24877:0,24878:0,24879:0,24880:0,24881:0,24882:0,24891:0,24892:0,24893:0,25000:0,25231:0,25391:0,25392:0,25393:0,25394:0,25395:0,25828:0,25829:0,25830:0,25831:0,25832:0,25833:0,25834:0,25835:0,25836:0,25837:0,25838:0,25884:0,25932:0,26191:0,26192:0,26193:0,26194:0,26195:0,26237:0,26331:0,26332:0,26391:0,26392:0,26393:0,26432:0,26591:0,26592:0,26632:0,26692:0,26701:0,26702:0,26703:0,26704:0,26705:0,26706:0,26707:0,26708:0,26709:0,26710:0,26711:0,26712:0,26713:0,26714:0,26715:0,26716:0,26717:0,26718:0,26719:0,26720:0,26721:0,26722:0,26729:3,26730:3,26731:3,26732:3,26733:3,26734:3,26735:3,26736:3,26737:3,26738:3,26739:3,26740:3,26741:3,26742:3,26743:3,26744:3,26745:3,26746:3,26747:3,26748:3,26749:3,26750:3,26751:3,26752:3,26753:3,26754:3,26755:3,26756:3,26757:3,26758:3,26759:3,26760:3,26761:3,26762:3,26763:3,26764:3,26765:3,26766:3,26767:3,26768:3,26769:3,26770:3,26771:3,26772:3,26773:3,26774:3,26775:3,26776:3,26777:3,26778:3,26779:3,26780:3,26781:3,26782:3,26783:3,26784:3,26785:3,26786:3,26787:3,26788:3,26789:3,26790:3,26791:3,26792:3,26793:3,26794:3,26795:3,26796:3,26797:3,26798:3,26799:3,26801:3,26802:3,26803:3,26811:3,26812:3,26813:3,26901:0,26902:0,26903:0,26904:0,26905:0,26906:0,26907:0,26908:0,26909:0,26910:0,26911:0,26912:0,26913:0,26914:0,26915:0,26916:0,26917:0,26918:0,26919:0,26920:0,26921:0,26922:0,26923:0,26929:0,26930:0,26931:0,26932:0,26933:0,26934:0,26935:0,26936:0,26937:0,26938:0,26939:0,26940:0,26941:0,26942:0,26943:0,26944:0,26945:0,26946:0,26948:0,26949:0,26950:0,26951:0,26952:0,26953:0,26954:0,26955:0,26956:0,26957:0,26958:0,26959:0,26960:0,26961:0,26962:0,26963:0,26964:0,26965:0,26966:0,26967:0,26968:0,26969:0,26970:0,26971:0,26972:0,26973:0,26974:0,26975:0,26976:0,26977:0,26978:0,26979:0,26980:0,26981:0,26982:0,26983:0,26984:0,26985:0,26986:0,26987:0,26988:0,26989:0,26990:0,26991:0,26992:0,26993:0,26994:0,26995:0,26996:0,26997:0,26998:0,27037:0,27038:0,27039:0,27040:0,27120:0,27200:0,27205:0,27206:0,27207:0,27208:0,27209:0,27210:0,27211:0,27212:0,27213:0,27214:0,27215:0,27216:0,27217:0,27218:0,27219:0,27220:0,27221:0,27222:0,27223:0,27224:0,27225:0,27226:0,27227:0,27228:0,27229:0,27230:0,27231:0,27232:0,27258:0,27259:0,27260:0,27291:8,27292:8,27391:0,27392:0,27393:0,27394:0,27395:0,27396:0,27397:0,27398:0,27429:0,27492:0,27500:0,27561:0,27562:0,27563:0,27564:0,27571:0,27572:0,27573:0,27574:0,27581:0,27582:0,27583:0,27584:0,27591:0,27592:0,27593:0,27594:0,27700:0,28191:0,28192:0,28193:0,28232:0,28348:0,28349:0,28350:0,28351:0,28352:0,28353:0,28354:0,28355:0,28356:0,28357:0,28358:0,28402:0,28403:0,28404:0,28405:0,28406:0,28407:0,28408:0,28409:0,28410:0,28411:0,28412:0,28413:0,28414:0,28415:0,28416:0,28417:0,28418:0,28419:0,28420:0,28421:0,28422:0,28423:0,28424:0,28425:0,28426:0,28427:0,28428:0,28429:0,28430:0,28431:0,28432:0,28462:0,28463:0,28464:0,28465:0,28466:0,28467:0,28468:0,28469:0,28470:0,28471:0,28472:0,28473:0,28474:0,28475:0,28476:0,28477:0,28478:0,28479:0,28480:0,28481:0,28482:0,28483:0,28484:0,28485:0,28486:0,28487:0,28488:0,28489:0,28490:0,28491:0,28492:0,28600:0,28991:0,28992:0,29100:0,29101:0,29118:0,29119:0,29120:0,29121:0,29122:0,29168:0,29169:0,29170:0,29171:0,29172:0,29177:0,29178:0,29179:0,29180:0,29181:0,29182:0,29183:0,29184:0,29185:0,29187:0,29188:0,29189:0,29190:0,29191:0,29192:0,29193:0,29194:0,29195:0,29220:0,29221:0,29333:0,29635:0,29636:0,29738:0,29739:0,29849:0,29850:0,29871:9,29872:10,29873:0,29900:0,29901:0,29902:0,29903:0,30161:0,30162:0,30163:0,30164:0,30165:0,30166:0,30167:0,30168:0,30169:0,30170:0,30171:0,30172:0,30173:0,30174:0,30175:0,30176:0,30177:0,30178:0,30179:0,30200:1,30339:0,30340:0,30491:0,30492:0,30493:0,30494:0,30591:0,30592:0,30729:0,30730:0,30731:0,30732:0,30791:0,30792:0,30800:0,31028:0,31121:0,31154:0,31170:0,31171:0,31251:0,31252:0,31253:0,31254:0,31255:0,31256:0,31257:0,31258:0,31259:0,31265:0,31266:0,31267:0,31268:0,31275:0,31276:0,31277:0,31278:0,31279:0,31281:0,31282:0,31283:0,31284:0,31285:0,31286:0,31287:0,31288:0,31289:0,31290:0,31291:0,31292:0,31293:0,31294:0,31295:0,31296:0,31297:0,31370:0,31461:0,31462:0,31463:0,31464:0,31465:0,31466:0,31467:0,31468:0,31469:0,31491:0,31492:0,31493:0,31494:0,31495:0,31528:0,31529:0,31600:0,31700:0,31838:0,31839:0,31901:0,31917:0,31918:0,31919:0,31920:0,31921:0,31922:0,31971:0,31972:0,31973:0,31974:0,31975:0,31976:0,31977:0,31978:0,31979:0,31980:0,31981:0,31982:0,31983:0,31984:0,31985:0,31986:0,31987:0,31988:0,31989:0,31990:0,31991:0,31992:0,31993:0,31994:0,31995:0,31996:0,31997:0,31998:0,31999:0,32000:0,32001:3,32002:3,32003:3,32005:3,32006:3,32007:3,32008:3,32009:3,32010:3,32011:3,32012:3,32013:3,32014:3,32015:3,32016:3,32017:3,32018:3,32019:3,32020:3,32021:3,32022:3,32023:3,32024:3,32025:3,32026:3,32027:3,32028:3,32029:3,32030:3,32031:3,32033:3,32034:3,32035:3,32036:3,32037:3,32038:3,32039:3,32040:3,32041:3,32042:3,32043:3,32044:3,32045:3,32046:3,32047:3,32048:3,32049:3,32050:3,32051:3,32052:3,32053:3,32054:3,32055:3,32056:3,32057:3,32058:3,32059:3,32060:3,32061:0,32062:0,32064:3,32065:3,32066:3,32067:3,32074:3,32075:3,32076:3,32077:3,32081:0,32082:0,32083:0,32084:0,32085:0,32086:0,32098:0,32099:3,32100:0,32104:0,32107:0,32108:0,32109:0,32110:0,32111:0,32112:0,32113:0,32114:0,32115:0,32116:0,32117:0,32118:0,32119:0,32120:0,32121:0,32122:0,32123:0,32124:0,32125:0,32126:0,32127:0,32128:0,32129:0,32130:0,32133:0,32134:0,32135:0,32136:0,32137:0,32138:0,32139:0,32140:0,32141:0,32142:0,32143:0,32144:0,32145:0,32146:0,32147:0,32148:0,32149:0,32150:0,32151:0,32152:0,32153:0,32154:0,32155:0,32156:0,32157:0,32158:0,32161:0,32164:3,32165:3,32166:3,32167:3,32180:0,32181:0,32182:0,32183:0,32184:0,32185:0,32186:0,32187:0,32188:0,32189:0,32190:0,32191:0,32192:0,32193:0,32194:0,32195:0,32196:0,32197:0,32198:0,32199:0,32201:0,32202:0,32203:0,32204:0,32205:0,32206:0,32207:0,32208:0,32209:0,32210:0,32211:0,32212:0,32213:0,32214:0,32215:0,32216:0,32217:0,32218:0,32219:0,32220:0,32221:0,32222:0,32223:0,32224:0,32225:0,32226:0,32227:0,32228:0,32229:0,32230:0,32231:0,32232:0,32233:0,32234:0,32235:0,32236:0,32237:0,32238:0,32239:0,32240:0,32241:0,32242:0,32243:0,32244:0,32245:0,32246:0,32247:0,32248:0,32249:0,32250:0,32251:0,32252:0,32253:0,32254:0,32255:0,32256:0,32257:0,32258:0,32259:0,32260:0,32301:0,32302:0,32303:0,32304:0,32305:0,32306:0,32307:0,32308:0,32309:0,32310:0,32311:0,32312:0,32313:0,32314:0,32315:0,32316:0,32317:0,32318:0,32319:0,32320:0,32321:0,32322:0,32323:0,32324:0,32325:0,32326:0,32327:0,32328:0,32329:0,32330:0,32331:0,32332:0,32333:0,32334:0,32335:0,32336:0,32337:0,32338:0,32339:0,32340:0,32341:0,32342:0,32343:0,32344:0,32345:0,32346:0,32347:0,32348:0,32349:0,32350:0,32351:0,32352:0,32353:0,32354:0,32355:0,32356:0,32357:0,32358:0,32359:0,32360:0,32601:0,32602:0,32603:0,32604:0,32605:0,32606:0,32607:0,32608:0,32609:0,32610:0,32611:0,32612:0,32613:0,32614:0,32615:0,32616:0,32617:0,32618:0,32619:0,32620:0,32621:0,32622:0,32623:0,32624:0,32625:0,32626:0,32627:0,32628:0,32629:0,32630:0,32631:0,32632:0,32633:0,32634:0,32635:0,32636:0,32637:0,32638:0,32639:0,32640:0,32641:0,32642:0,32643:0,32644:0,32645:0,32646:0,32647:0,32648:0,32649:0,32650:0,32651:0,32652:0,32653:0,32654:0,32655:0,32656:0,32657:0,32658:0,32659:0,32660:0,32661:0,32662:0,32664:3,32665:3,32666:3,32667:3,32701:0,32702:0,32703:0,32704:0,32705:0,32706:0,32707:0,32708:0,32709:0,32710:0,32711:0,32712:0,32713:0,32714:0,32715:0,32716:0,32717:0,32718:0,32719:0,32720:0,32721:0,32722:0,32723:0,32724:0,32725:0,32726:0,32727:0,32728:0,32729:0,32730:0,32731:0,32732:0,32733:0,32734:0,32735:0,32736:0,32737:0,32738:0,32739:0,32740:0,32741:0,32742:0,32743:0,32744:0,32745:0,32746:0,32747:0,32748:0,32749:0,32750:0,32751:0,32752:0,32753:0,32754:0,32755:0,32756:0,32757:0,32758:0,32759:0,32760:0,32761:0,32766:0,53001:0,53002:0,53003:0,53004:0,53008:0,53009:0,53010:0,53011:0,53012:0,53013:0,53014:0,53015:0,53016:0,53017:0,53018:0,53019:0,53021:0,53022:0,53023:0,53024:0,53025:0,53026:0,53027:0,53028:0,53029:0,53030:0,53031:0,53032:0,53034:0,53042:0,53043:0,53044:0,53045:0,53046:0,53048:0,53049:0,54001:0,54002:0,54003:0,54004:0,54008:0,54009:0,54010:0,54011:0,54012:0,54013:0,54014:0,54015:0,54016:0,54017:0,54018:0,54019:0,54021:0,54022:0,54023:0,54024:0,54025:0,54026:0,54027:0,54028:0,54029:0,54030:0,54031:0,54032:0,54034:0,54042:0,54043:0,54044:0,54045:0,54046:0,54048:0,54049:0,54050:0,54051:0,54052:0,54053:0,65061:3,65062:3,65161:0,65163:0,102001:0,102002:0,102003:0,102004:0,102005:0,102006:0,102007:0,102008:0,102009:0,102010:0,102011:0,102012:0,102013:0,102014:0,102015:0,102016:0,102017:0,102018:0,102019:0,102020:0,102021:0,102022:0,102023:0,102024:0,102025:0,102026:0,102027:0,102028:0,102029:0,102030:0,102031:0,102032:0,102033:0,102034:0,102035:0,102036:0,102037:0,102038:0,102039:0,102060:0,102061:0,102062:0,102063:0,102064:11,102065:0,102066:0,102067:0,102068:12,102069:13,102070:0,102071:0,102072:0,102073:0,102074:0,102075:0,102076:0,102077:0,102078:0,102079:0,102090:0,102091:0,102092:0,102093:0,102094:0,102095:0,102096:0,102097:0,102098:0,102099:0,102100:0,102101:0,102102:0,102103:0,102104:0,102105:0,102106:0,102107:0,102108:0,102109:0,102110:0,102111:0,102112:0,102113:0,102114:0,102115:0,102116:0,102117:0,102118:3,102119:4,102120:3,102121:3,102122:0,102123:0,102124:0,102125:0,102126:0,102127:0,102128:0,102129:0,102130:0,102131:0,102132:0,102133:0,102134:0,102135:0,102136:0,102137:0,102138:0,102139:0,102140:0,102141:0,102142:0,102143:0,102144:0,102145:0,102146:0,102147:0,102148:0,102149:0,102150:0,102151:0,102152:0,102153:0,102154:0,102155:0,102156:0,102157:0,102158:0,102159:0,102160:0,102161:0,102162:0,102163:0,102164:0,102165:0,102166:0,102167:0,102168:0,102169:0,102170:0,102171:0,102172:0,102173:0,102174:0,102175:0,102176:0,102177:0,102178:0,102179:0,102180:0,102181:0,102182:0,102183:0,102184:0,102185:0,102186:0,102187:0,102188:0,102189:0,102190:0,102191:0,102192:0,102193:0,102194:0,102195:0,102196:0,102197:0,102198:0,102199:0,102200:0,102201:0,102202:0,102203:0,102205:0,102206:0,102207:0,102208:0,102209:0,102210:0,102211:0,102218:0,102219:3,102220:3,102221:0,102222:0,102223:0,102224:0,102225:0,102226:0,102227:0,102228:0,102229:0,102230:0,102231:0,102232:0,102233:0,102234:0,102235:0,102236:0,102237:0,102238:0,102239:0,102240:0,102241:0,102242:0,102243:0,102244:0,102245:0,102246:0,102248:0,102249:0,102250:0,102251:0,102252:0,102253:0,102254:0,102255:0,102256:0,102257:0,102258:0,102259:0,102260:0,102261:0,102262:0,102263:0,102264:0,102265:0,102266:0,102267:0,102268:0,102269:0,102270:0,102271:0,102272:0,102273:0,102274:0,102275:0,102276:0,102277:0,102278:0,102279:0,102280:0,102281:0,102282:0,102283:0,102284:0,102285:0,102286:0,102287:0,102288:0,102289:0,102290:0,102291:0,102292:0,102293:0,102294:0,102295:0,102296:0,102297:0,102298:0,102300:0,102304:0,102307:0,102308:0,102309:0,102310:0,102311:0,102312:0,102313:0,102314:0,102315:0,102316:0,102317:0,102318:0,102320:0,102321:0,102322:0,102323:0,102324:0,102325:0,102326:0,102327:0,102330:0,102334:0,102335:0,102336:0,102337:0,102338:0,102339:0,102340:0,102341:0,102342:0,102343:0,102344:0,102345:0,102346:0,102347:0,102348:0,102349:0,102350:0,102351:0,102352:0,102353:0,102354:0,102355:0,102356:0,102357:0,102358:0,102361:0,102363:0,102421:0,102422:0,102423:0,102424:0,102425:0,102426:0,102427:0,102428:0,102429:0,102430:0,102431:0,102432:0,102433:0,102434:0,102435:0,102436:0,102437:0,102438:0,102440:0,102441:0,102442:0,102443:0,102444:0,102461:3,102462:3,102463:3,102464:3,102465:3,102466:3,102467:3,102468:3,102469:0,102491:0,102492:0,102570:0,102571:0,102572:0,102573:0,102574:0,102575:0,102576:0,102577:0,102578:0,102579:0,102580:0,102581:0,102582:0,102583:0,102584:0,102591:0,102592:0,102601:0,102602:0,102603:0,102604:3,102605:0,102606:0,102607:0,102608:0,102609:0,102629:3,102630:3,102631:3,102632:3,102633:3,102634:3,102635:3,102636:3,102637:3,102638:3,102639:3,102640:3,102641:3,102642:3,102643:3,102644:3,102645:3,102646:3,102648:3,102649:3,102650:3,102651:3,102652:3,102653:3,102654:3,102655:3,102656:3,102657:3,102658:3,102659:3,102660:3,102661:3,102662:3,102663:3,102664:3,102665:3,102666:3,102667:3,102668:3,102669:3,102670:3,102671:3,102672:3,102673:3,102674:3,102675:3,102676:3,102677:3,102678:3,102679:3,102680:3,102681:3,102682:3,102683:3,102684:3,102685:3,102686:3,102687:3,102688:3,102689:3,102690:3,102691:3,102692:3,102693:3,102694:3,102695:3,102696:3,102697:3,102698:3,102700:3,102704:3,102707:3,102708:3,102709:3,102710:3,102711:3,102712:3,102713:3,102714:3,102715:3,102716:3,102717:3,102718:3,102719:3,102720:3,102721:3,102722:3,102723:3,102724:3,102725:3,102726:3,102727:3,102728:3,102729:3,102730:3,102733:3,102734:3,102735:3,102736:3,102737:3,102738:3,102739:3,102740:3,102741:3,102742:3,102743:3,102744:3,102745:3,102746:3,102747:3,102748:3,102749:3,102750:3,102751:3,102752:3,102753:3,102754:3,102755:3,102756:3,102757:3,102758:3,102761:3,102763:3,102766:3,103300:0,103301:0,103302:0,103303:0,103304:0,103305:0,103306:0,103307:0,103308:0,103309:0,103310:0,103311:0,103312:0,103313:0,103314:0,103315:0,103316:0,103317:0,103318:0,103319:0,103320:0,103321:0,103322:0,103323:0,103324:0,103325:0,103326:0,103327:0,103328:0,103329:0,103330:0,103331:0,103332:0,103333:0,103334:0,103335:0,103336:0,103337:0,103338:0,103339:0,103340:0,103341:0,103342:0,103343:0,103344:0,103345:0,103346:0,103347:0,103348:0,103349:0,103350:0,103351:0,103352:0,103353:0,103354:0,103355:0,103356:0,103357:0,103358:0,103359:0,103360:0,103361:0,103362:0,103363:0,103364:0,103365:0,103366:0,103367:0,103368:0,103369:0,103370:0,103371:0,103400:3,103401:3,103402:3,103403:3,103404:3,103405:3,103406:3,103407:3,103408:3,103409:3,103410:3,103411:3,103412:3,103413:3,103414:3,103415:3,103416:3,103417:3,103418:3,103419:3,103420:3,103421:3,103422:3,103423:3,103424:3,103425:3,103426:3,103427:3,103428:3,103429:3,103430:3,103431:3,103432:3,103433:3,103434:3,103435:3,103436:3,103437:3,103438:3,103439:3,103440:3,103441:3,103442:3,103443:3,103444:3,103445:3,103446:3,103447:3,103448:3,103449:3,103450:3,103451:3,103452:3,103453:3,103454:3,103455:3,103456:3,103457:3,103458:3,103459:3,103460:3,103461:3,103462:3,103463:3,103464:3,103465:3,103466:3,103467:3,103468:3,103469:3,103470:3,103471:3,103528:0,103529:0,103530:0,103531:0,103532:0,103533:0,103534:0,103535:0,103536:0,103537:0,103538:0,103584:0,103600:0,103601:0,103602:0,103603:0,103604:0,103605:0,103606:0,103607:0,103608:0,103609:0,103610:0,103611:0,103612:0,103613:0,103614:0,103615:0,103616:0,103617:0,103618:0,103619:0,103620:0,103621:0,103622:0,103623:0,103624:0,103625:0,103626:0,103627:0,103628:0,103629:0,103630:0,103631:0,103632:0,103633:0,103634:0,103635:0,103636:0,103637:0,103638:0,103639:0,103640:0,103641:0,103642:0,103643:0,103644:0,103645:0,103646:0,103647:0,103648:0,103649:0,103650:0,103651:0,103652:0,103653:0,103654:0,103655:0,103656:0,103657:0,103658:0,103659:0,103660:0,103661:0,103662:0,103663:0,103664:0,103665:0,103666:0,103667:0,103668:0,103669:0,103670:0,103671:0,103672:0,103673:0,103674:0,103675:0,103676:0,103677:0,103678:0,103679:0,103680:0,103681:0,103682:0,103683:0,103684:0,103685:0,103686:0,103687:0,103688:0,103689:0,103690:0,103691:0,103692:0,103693:0,103700:3,103701:3,103702:3,103703:3,103704:3,103705:3,103706:3,103707:3,103708:3,103709:3,103710:3,103711:3,103712:3,103713:3,103714:3,103715:3,103716:3,103717:3,103718:3,103719:3,103720:3,103721:3,103722:3,103723:3,103724:3,103725:3,103726:3,103727:3,103728:3,103729:3,103730:3,103731:3,103732:3,103733:3,103734:3,103735:3,103736:3,103737:3,103738:3,103739:3,103740:3,103741:3,103742:3,103743:3,103744:3,103745:3,103746:3,103747:3,103748:3,103749:3,103750:3,103751:3,103752:3,103753:3,103754:3,103755:3,103756:3,103757:3,103758:3,103759:3,103760:3,103761:3,103762:3,103763:3,103764:3,103765:3,103766:3,103767:3,103768:3,103769:3,103770:3,103771:3,103772:3,103773:3,103774:3,103775:3,103776:3,103777:3,103778:3,103779:3,103780:3,103781:3,103782:3,103783:3,103784:3,103785:3,103786:3,103787:3,103788:3,103789:3,103790:3,103791:3,103792:3,103793:3,103800:0,103801:0,103802:0,103803:0,103804:0,103805:0,103806:0,103807:0,103808:0,103809:0,103810:0,103811:0,103812:0,103813:0,103814:0,103815:0,103816:0,103817:0,103818:0,103819:0,103820:0,103821:0,103822:0,103823:0,103824:0,103825:0,103826:0,103827:0,103828:0,103829:0,103830:0,103831:0,103832:0,103833:0,103834:0,103835:0,103836:0,103837:0,103838:0,103839:0,103840:0,103841:0,103842:0,103843:0,103844:0,103845:0,103846:0,103847:0,103848:0,103849:0,103850:0,103851:0,103852:0,103853:0,103854:0,103855:0,103856:0,103857:0,103858:0,103859:0,103860:0,103861:0,103862:0,103863:0,103864:0,103865:0,103866:0,103867:0,103868:0,103869:0,103870:0,103871:0,103900:3,103901:3,103902:3,103903:3,103904:3,103905:3,103906:3,103907:3,103908:3,103909:3,103910:3,103911:3,103912:3,103913:3,103914:3,103915:3,103916:3,103917:3,103918:3,103919:3,103920:3,103921:3,103922:3,103923:3,103924:3,103925:3,103926:3,103927:3,103928:3,103929:3,103930:3,103931:3,103932:3,103933:3,103934:3,103935:3,103936:3,103937:3,103938:3,103939:3,103940:3,103941:3,103942:3,103943:3,103944:3,103945:3,103946:3,103947:3,103948:3,103949:3,103950:3,103951:3,103952:3,103953:3,103954:3,103955:3,103956:3,103957:3,103958:3,103959:3,103960:3,103961:3,103962:3,103963:3,103964:3,103965:3,103966:3,103967:3,103968:3,103969:3,103970:3,103971:3};});},"dojo/cldr/supplemental":function(){define(["../_base/lang","../i18n"],function(lang,i18n){var _9fa={};lang.setObject("dojo.cldr.supplemental",_9fa);_9fa.getFirstDayOfWeek=function(_9fb){var _9fc={bd:5,mv:5,ae:6,af:6,bh:6,dj:6,dz:6,eg:6,iq:6,ir:6,jo:6,kw:6,ly:6,ma:6,om:6,qa:6,sa:6,sd:6,sy:6,ye:6,ag:0,ar:0,as:0,au:0,br:0,bs:0,bt:0,bw:0,by:0,bz:0,ca:0,cn:0,co:0,dm:0,"do":0,et:0,gt:0,gu:0,hk:0,hn:0,id:0,ie:0,il:0,"in":0,jm:0,jp:0,ke:0,kh:0,kr:0,la:0,mh:0,mm:0,mo:0,mt:0,mx:0,mz:0,ni:0,np:0,nz:0,pa:0,pe:0,ph:0,pk:0,pr:0,py:0,sg:0,sv:0,th:0,tn:0,tt:0,tw:0,um:0,us:0,ve:0,vi:0,ws:0,za:0,zw:0};var _9fd=_9fa._region(_9fb);var dow=_9fc[_9fd];return (dow===undefined)?1:dow;};_9fa._region=function(_9fe){_9fe=i18n.normalizeLocale(_9fe);var tags=_9fe.split("-");var _9ff=tags[1];if(!_9ff){_9ff={de:"de",en:"us",es:"es",fi:"fi",fr:"fr",he:"il",hu:"hu",it:"it",ja:"jp",ko:"kr",nl:"nl",pt:"br",sv:"se",zh:"cn"}[tags[0]];}else{if(_9ff.length==4){_9ff=tags[2];}}return _9ff;};_9fa.getWeekend=function(_a00){var _a01={"in":0,af:4,dz:4,ir:4,om:4,sa:4,ye:4,ae:5,bh:5,eg:5,il:5,iq:5,jo:5,kw:5,ly:5,ma:5,qa:5,sd:5,sy:5,tn:5},_a02={af:5,dz:5,ir:5,om:5,sa:5,ye:5,ae:6,bh:5,eg:6,il:6,iq:6,jo:6,kw:6,ly:6,ma:6,qa:6,sd:6,sy:6,tn:6},_a03=_9fa._region(_a00),_a04=_a01[_a03],end=_a02[_a03];if(_a04===undefined){_a04=6;}if(end===undefined){end=0;}return {start:_a04,end:end};};return _9fa;});},"dojo/request/script":function(){define(["module","./watch","./util","../_base/array","../_base/lang","../on","../dom","../dom-construct","../has","../_base/window"],function(_a05,_a06,util,_a07,lang,on,dom,_a08,has,win){has.add("script-readystatechange",function(_a09,_a0a){var _a0b=_a0a.createElement("script");return typeof _a0b["onreadystatechange"]!=="undefined"&&(typeof _a09["opera"]==="undefined"||_a09["opera"].toString()!=="[object Opera]");});var mid=_a05.id.replace(/[\/\.\-]/g,"_"),_a0c=0,_a0d=has("script-readystatechange")?"readystatechange":"load",_a0e=/complete|loaded/,_a0f=this[mid+"_callbacks"]={},_a10=[];function _a11(id,url,_a12){var doc=(_a12||win.doc),_a13=doc.createElement("script");_a13.type="text/javascript";_a13.src=url;_a13.id=id;_a13.async=true;_a13.charset="utf-8";return doc.getElementsByTagName("head")[0].appendChild(_a13);};function _a14(id,_a15,_a16){_a08.destroy(dom.byId(id,_a15));if(_a0f[id]){if(_a16){_a0f[id]=function(){delete _a0f[id];};}else{delete _a0f[id];}}};function _a17(dfd){var _a18=dfd.response;_a10.push({id:dfd.id,frameDoc:_a18.options.frameDoc});_a18.options.frameDoc=null;};function _a19(dfd,_a1a){if(dfd.canDelete){_a1b._remove(dfd.id,_a1a.options.frameDoc,true);}};function _a1c(_a1d){if(_a10&&_a10.length){_a07.forEach(_a10,function(_a1e){_a1b._remove(_a1e.id,_a1e.frameDoc);_a1e.frameDoc=null;});_a10=[];}return _a1d.options.jsonp?!_a1d.data:true;};function _a1f(_a20){return !!this.scriptLoaded;};function _a21(_a22){var _a23=_a22.options.checkString;return _a23&&eval("typeof("+_a23+") !== \"undefined\"");};function _a24(_a25,_a26){if(this.canDelete){_a17(this);}if(_a26){this.reject(_a26);}else{this.resolve(_a25);}};function _a1b(url,_a27,_a28){var _a29=util.parseArgs(url,util.deepCopy({},_a27));url=_a29.url;_a27=_a29.options;var dfd=util.deferred(_a29,_a19,_a1c,_a27.jsonp?null:(_a27.checkString?_a21:_a1f),_a24);lang.mixin(dfd,{id:mid+(_a0c++),canDelete:false});if(_a27.jsonp){var _a2a=new RegExp("[?&]"+_a27.jsonp+"=");if(!_a2a.test(url)){url+=_a2a+(_a27.frameDoc?"parent.":"")+mid+"_callbacks."+dfd.id;}dfd.canDelete=true;_a0f[dfd.id]=function(json){_a29.data=json;dfd.handleResponse(_a29);};}if(util.notify){util.notify.emit("send",_a29,dfd.promise.cancel);}if(!_a27.canAttach||_a27.canAttach(dfd)){var node=_a1b._attach(dfd.id,url,_a27.frameDoc);if(!_a27.jsonp&&!_a27.checkString){var _a2b=on(node,_a0d,function(evt){if(evt.type==="load"||_a0e.test(node.readyState)){_a2b.remove();dfd.scriptLoaded=evt;}});}}_a06(dfd);return _a28?dfd:dfd.promise;};_a1b.get=_a1b;_a1b._attach=_a11;_a1b._remove=_a14;_a1b._callbacksProperty=mid+"_callbacks";return _a1b;});},"dijit/_base/manager":function(){define("dijit/_base/manager",["dojo/_base/array","dojo/_base/config","dojo/_base/lang","../registry","../main"],function(_a2c,_a2d,lang,_a2e,_a2f){var _a30={};_a2c.forEach(["byId","getUniqueId","findWidgets","_destroyAll","byNode","getEnclosingWidget"],function(name){_a30[name]=_a2e[name];});lang.mixin(_a30,{defaultDuration:_a2d["defaultDuration"]||200});lang.mixin(_a2f,_a30);return _a2f;});},"dijit/popup":function(){define("dijit/popup",["dojo/_base/array","dojo/aspect","dojo/_base/connect","dojo/_base/declare","dojo/dom","dojo/dom-attr","dojo/dom-construct","dojo/dom-geometry","dojo/dom-style","dojo/_base/event","dojo/keys","dojo/_base/lang","dojo/on","dojo/sniff","./place","./BackgroundIframe","./main"],function(_a31,_a32,_a33,_a34,dom,_a35,_a36,_a37,_a38,_a39,keys,lang,on,has,_a3a,_a3b,_a3c){function _a3d(){if(this._popupWrapper){_a36.destroy(this._popupWrapper);delete this._popupWrapper;}};var _a3e=_a34(null,{_stack:[],_beginZIndex:1000,_idGen:1,_createWrapper:function(_a3f){var _a40=_a3f._popupWrapper,node=_a3f.domNode;if(!_a40){_a40=_a36.create("div",{"class":"dijitPopup",style:{display:"none"},role:"presentation"},_a3f.ownerDocumentBody);_a40.appendChild(node);var s=node.style;s.display="";s.visibility="";s.position="";s.top="0px";_a3f._popupWrapper=_a40;_a32.after(_a3f,"destroy",_a3d,true);}return _a40;},moveOffScreen:function(_a41){var _a42=this._createWrapper(_a41);_a38.set(_a42,{visibility:"hidden",top:"-9999px",display:""});},hide:function(_a43){var _a44=this._createWrapper(_a43);_a38.set(_a44,"display","none");},getTopPopup:function(){var _a45=this._stack;for(var pi=_a45.length-1;pi>0&&_a45[pi].parent===_a45[pi-1].widget;pi--){}return _a45[pi];},open:function(args){var _a46=this._stack,_a47=args.popup,_a48=args.orient||["below","below-alt","above","above-alt"],ltr=args.parent?args.parent.isLeftToRight():_a37.isBodyLtr(_a47.ownerDocument),_a49=args.around,id=(args.around&&args.around.id)?(args.around.id+"_dropdown"):("popup_"+this._idGen++);while(_a46.length&&(!args.parent||!dom.isDescendant(args.parent.domNode,_a46[_a46.length-1].widget.domNode))){this.close(_a46[_a46.length-1].widget);}var _a4a=this._createWrapper(_a47);_a35.set(_a4a,{id:id,style:{zIndex:this._beginZIndex+_a46.length},"class":"dijitPopup "+(_a47.baseClass||_a47["class"]||"").split(" ")[0]+"Popup",dijitPopupParent:args.parent?args.parent.id:""});if(has("ie")||has("mozilla")){if(!_a47.bgIframe){_a47.bgIframe=new _a3b(_a4a);}}var best=_a49?_a3a.around(_a4a,_a49,_a48,ltr,_a47.orient?lang.hitch(_a47,"orient"):null):_a3a.at(_a4a,args,_a48=="R"?["TR","BR","TL","BL"]:["TL","BL","TR","BR"],args.padding);_a4a.style.display="";_a4a.style.visibility="visible";_a47.domNode.style.visibility="visible";var _a4b=[];_a4b.push(on(_a4a,_a33._keypress,lang.hitch(this,function(evt){if(evt.charOrCode==keys.ESCAPE&&args.onCancel){_a39.stop(evt);args.onCancel();}else{if(evt.charOrCode===keys.TAB){_a39.stop(evt);var _a4c=this.getTopPopup();if(_a4c&&_a4c.onCancel){_a4c.onCancel();}}}})));if(_a47.onCancel&&args.onCancel){_a4b.push(_a47.on("cancel",args.onCancel));}_a4b.push(_a47.on(_a47.onExecute?"execute":"change",lang.hitch(this,function(){var _a4d=this.getTopPopup();if(_a4d&&_a4d.onExecute){_a4d.onExecute();}})));_a46.push({widget:_a47,parent:args.parent,onExecute:args.onExecute,onCancel:args.onCancel,onClose:args.onClose,handlers:_a4b});if(_a47.onOpen){_a47.onOpen(best);}return best;},close:function(_a4e){var _a4f=this._stack;while((_a4e&&_a31.some(_a4f,function(elem){return elem.widget==_a4e;}))||(!_a4e&&_a4f.length)){var top=_a4f.pop(),_a50=top.widget,_a51=top.onClose;if(_a50.onClose){_a50.onClose();}var h;while(h=top.handlers.pop()){h.remove();}if(_a50&&_a50.domNode){this.hide(_a50);}if(_a51){_a51();}}}});return (_a3c.popup=new _a3e());});},"dojo/dnd/Mover":function(){define(["../_base/array","../_base/declare","../_base/event","../_base/lang","../sniff","../_base/window","../dom","../dom-geometry","../dom-style","../Evented","../on","../touch","./common","./autoscroll"],function(_a52,_a53,_a54,lang,has,win,dom,_a55,_a56,_a57,on,_a58,dnd,_a59){return _a53("dojo.dnd.Mover",[_a57],{constructor:function(node,e,host){this.node=dom.byId(node);this.marginBox={l:e.pageX,t:e.pageY};this.mouseButton=e.button;var h=(this.host=host),d=node.ownerDocument;this.events=[on(d,_a58.move,lang.hitch(this,"onFirstMove")),on(d,_a58.move,lang.hitch(this,"onMouseMove")),on(d,_a58.release,lang.hitch(this,"onMouseUp")),on(d,"dragstart",_a54.stop),on(d.body,"selectstart",_a54.stop)];_a59.autoScrollStart(d);if(h&&h.onMoveStart){h.onMoveStart(this);}},onMouseMove:function(e){_a59.autoScroll(e);var m=this.marginBox;this.host.onMove(this,{l:m.l+e.pageX,t:m.t+e.pageY},e);_a54.stop(e);},onMouseUp:function(e){if(has("webkit")&&has("mac")&&this.mouseButton==2?e.button==0:this.mouseButton==e.button){this.destroy();}_a54.stop(e);},onFirstMove:function(e){var s=this.node.style,l,t,h=this.host;switch(s.position){case "relative":case "absolute":l=Math.round(parseFloat(s.left))||0;t=Math.round(parseFloat(s.top))||0;break;default:s.position="absolute";var m=_a55.getMarginBox(this.node);var b=win.doc.body;var bs=_a56.getComputedStyle(b);var bm=_a55.getMarginBox(b,bs);var bc=_a55.getContentBox(b,bs);l=m.l-(bc.l-bm.l);t=m.t-(bc.t-bm.t);break;}this.marginBox.l=l-this.marginBox.l;this.marginBox.t=t-this.marginBox.t;if(h&&h.onFirstMove){h.onFirstMove(this,e);}this.events.shift().remove();},destroy:function(){_a52.forEach(this.events,function(_a5a){_a5a.remove();});var h=this.host;if(h&&h.onMoveStop){h.onMoveStop(this);}this.events=this.node=this.host=null;}});});},"dijit/form/HorizontalRule":function(){define("dijit/form/HorizontalRule",["dojo/_base/declare","../_Widget","../_TemplatedMixin"],function(_a5b,_a5c,_a5d){return _a5b("dijit.form.HorizontalRule",[_a5c,_a5d],{templateString:"<div class=\"dijitRuleContainer dijitRuleContainerH\"></div>",count:3,container:"containerNode",ruleStyle:"",_positionPrefix:"<div class=\"dijitRuleMark dijitRuleMarkH\" style=\"left:",_positionSuffix:"%;",_suffix:"\"></div>",_genHTML:function(pos){return this._positionPrefix+pos+this._positionSuffix+this.ruleStyle+this._suffix;},_isHorizontal:true,buildRendering:function(){this.inherited(arguments);var _a5e;if(this.count==1){_a5e=this._genHTML(50,0);}else{var i;var _a5f=100/(this.count-1);if(!this._isHorizontal||this.isLeftToRight()){_a5e=this._genHTML(0,0);for(i=1;i<this.count-1;i++){_a5e+=this._genHTML(_a5f*i,i);}_a5e+=this._genHTML(100,this.count-1);}else{_a5e=this._genHTML(100,0);for(i=1;i<this.count-1;i++){_a5e+=this._genHTML(100-_a5f*i,i);}_a5e+=this._genHTML(0,this.count-1);}}this.domNode.innerHTML=_a5e;}});});},"esri/fx":function(){define(["dijit","dojo","dojox","dojo/require!dojo/fx"],function(_a60,dojo,_a61){dojo.provide("esri.fx");dojo.require("dojo.fx");esri.fx.animateRange=function(args){var _a62=args.range;return new dojo._Animation(dojo.mixin({curve:new dojo._Line(_a62.start,_a62.end)},args));};esri.fx.resize=function(args){var node=(args.node=dojo.byId(args.node)),_a63=args.start,end=args.end;if(!_a63){var mb=dojo._getMarginBox(node),pb=dojo._getPadBorderExtents(node);_a63=(args.start={left:mb.l+pb.l,top:mb.t+pb.t,width:mb.w-pb.w,height:mb.h-pb.h});}if(!end){var _a64=args.anchor?args.anchor:{x:_a63.left,y:_a63.top},size=args.size;end=args.end={left:(_a63.left-((size.width-_a63.width)*(_a64.x-_a63.left)/_a63.width)),top:(_a63.top-((size.height-_a63.height)*(_a64.y-_a63.top)/_a63.height)),width:size.width,height:size.height};}return dojo.animateProperty(dojo.mixin({properties:{left:{start:_a63.left,end:end.left},top:{start:_a63.top,end:end.top},width:{start:_a63.width,end:end.width},height:{start:_a63.height,end:end.height}}},args));};esri.fx.slideTo=function(args){var node=(args.node=dojo.byId(args.node)),_a65=dojo.getComputedStyle,top=null,left=null,init=(function(){var _a66=node;return function(){var pos=_a66.style.position=="absolute"?"absolute":"relative";top=(pos=="absolute"?node.offsetTop:parseInt(_a65(node).top)||0);left=(pos=="absolute"?node.offsetLeft:parseInt(_a65(node).left)||0);if(pos!="absolute"&&pos!="relative"){var ret=dojo.coords(_a66,true);top=ret.y;left=ret.x;_a66.style.position="absolute";_a66.style.top=top+"px";_a66.style.left=left+"px";}};})();init();var anim=dojo.animateProperty(dojo.mixin({properties:{top:{start:top,end:args.top||0},left:{start:left,end:args.left||0}}},args));dojo.connect(anim,"beforeBegin",anim,init);return anim;};esri.fx.flash=function(args){args=dojo.mixin({end:"#f00",duration:500,count:1},args);args.duration/=args.count*2;var node=dojo.byId(args.node),_a67=args.start;if(!_a67){_a67=dojo.getComputedStyle(node).backgroundColor;}var end=args.end,_a68=args.duration,_a69=[],base={node:node,duration:_a68};for(var i=0,il=args.count;i<il;i++){_a69.push(dojo.animateProperty(dojo.mixin({properties:{backgroundColor:{start:_a67,end:end}}},base)));_a69.push(dojo.animateProperty(dojo.mixin({properties:{backgroundColor:{start:end,end:_a67}}},base)));}return dojo.fx.chain(_a69);};});},"esri/renderer":function(){define(["dijit","dojo","dojox","dojo/require!esri/graphic,dojo/date"],function(_a6a,dojo,_a6b){dojo.provide("esri.renderer");dojo.require("esri.graphic");dojo.require("dojo.date");esri.renderer.fromJson=function(json){var type=json.type||"",_a6c;switch(type){case "simple":_a6c=new esri.renderer.SimpleRenderer(json);break;case "uniqueValue":_a6c=new esri.renderer.UniqueValueRenderer(json);break;case "classBreaks":_a6c=new esri.renderer.ClassBreaksRenderer(json);break;}return _a6c;};dojo.declare("esri.renderer.Renderer",null,{constructor:function(){this.getSymbol=dojo.hitch(this,this.getSymbol);},getSymbol:function(_a6d){},toJson:function(){}});dojo.declare("esri.renderer.SimpleRenderer",esri.renderer.Renderer,{constructor:function(sym){if(sym&&!sym.declaredClass){var json=sym;sym=json.symbol;if(sym){this.symbol=esri.symbol.fromJson(sym);}this.label=json.label;this.description=json.description;}else{this.symbol=sym;}},getSymbol:function(_a6e){return this.symbol;},toJson:function(){return esri._sanitize({type:"simple",label:this.label,description:this.description,symbol:this.symbol&&this.symbol.toJson()});}});dojo.declare("esri.renderer.UniqueValueRenderer",esri.renderer.Renderer,{constructor:function(sym,attr,_a6f,_a70,_a71){this.values=[];this._symbols={};this.infos=[];if(sym&&!sym.declaredClass){var json=sym;sym=json.defaultSymbol;if(sym){this.defaultSymbol=esri.symbol.fromJson(sym);}this.attributeField=json.field1;this.attributeField2=json.field2;this.attributeField3=json.field3;this.fieldDelimiter=json.fieldDelimiter;this.defaultLabel=json.defaultLabel;dojo.forEach(json.uniqueValueInfos,this._addValueInfo,this);}else{this.defaultSymbol=sym;this.attributeField=attr;this.attributeField2=_a6f;this.attributeField3=_a70;this.fieldDelimiter=_a71;}this._multiple=!!this.attributeField2;},addValue:function(_a72,_a73){var info=dojo.isObject(_a72)?_a72:{value:_a72,symbol:_a73};this._addValueInfo(info);},removeValue:function(_a74){var i=dojo.indexOf(this.values,_a74);if(i===-1){return;}this.values.splice(i,1);delete this._symbols[_a74];this.infos.splice(i,1);},getSymbol:function(_a75){var _a76=this.attributeField,_a77=_a75.attributes,_a78,_a79,_a7a;if(this._multiple){_a78=this.attributeField2;_a79=this.attributeField3;_a7a=[];if(_a76){_a7a.push(_a77[_a76]);}if(_a78){_a7a.push(_a77[_a78]);}if(_a79){_a7a.push(_a77[_a79]);}return this._symbols[_a7a.join(this.fieldDelimiter||"")]||this.defaultSymbol;}else{_a76=dojo.isFunction(_a76)?_a76(_a75):_a77[_a76];return this._symbols[_a76]||this.defaultSymbol;}},_addValueInfo:function(info){var _a7b=info.value;this.values.push(_a7b);this.infos.push(info);var _a7c=info.symbol;if(_a7c){if(!_a7c.declaredClass){info.symbol=esri.symbol.fromJson(_a7c);}}this._symbols[_a7b]=info.symbol;},toJson:function(){var _a7d=esri._sanitize;return _a7d({type:"uniqueValue",field1:this.attributeField,field2:this.attributeField2,field3:this.attributeField3,fieldDelimiter:this.fieldDelimiter,defaultSymbol:this.defaultSymbol&&this.defaultSymbol.toJson(),defaultLabel:this.defaultLabel,uniqueValueInfos:dojo.map(this.infos||[],function(info){info=dojo.mixin({},info);info.symbol=info.symbol&&info.symbol.toJson();info.value=info.value+"";return _a7d(info);})});}});dojo.declare("esri.renderer.ClassBreaksRenderer",esri.renderer.Renderer,{constructor:function(sym,attr){this.breaks=[];this._symbols={};this.infos=[];if(sym&&!sym.declaredClass){var json=sym;this.attributeField=json.field;sym=json.defaultSymbol;if(sym){this.defaultSymbol=esri.symbol.fromJson(sym);}this.defaultLabel=json.defaultLabel;var min=json.minValue,_a7e=json.classBreakInfos;if(_a7e&&_a7e[0]&&esri._isDefined(_a7e[0].classMaxValue)){dojo.forEach(_a7e,function(info){var _a7f=info.classMaxValue;info.minValue=min;info.maxValue=_a7f;min=_a7f;},this);}dojo.forEach(_a7e,this._addBreakInfo,this);}else{this.defaultSymbol=sym;this.attributeField=attr;}},addBreak:function(min,max,_a80){var info=dojo.isObject(min)?min:{minValue:min,maxValue:max,symbol:_a80};this._addBreakInfo(info);},removeBreak:function(min,max){var _a81,_a82=this.breaks,i,il=_a82.length,_a83=this._symbols;for(i=0;i<il;i++){_a81=_a82[i];if(_a81[0]==min&&_a81[1]==max){_a82.splice(i,1);delete _a83[min+"-"+max];this.infos.splice(i,1);break;}}},clearBreaks:function(){this.breaks=[];this._symbols={};this.infos=[];},getSymbol:function(_a84){var attr=this.attributeField,val=dojo.isFunction(attr)?attr(_a84):parseFloat(_a84.attributes[attr]),rs=this.breaks,i,il=rs.length,_a85=this._symbols,_a86,incl=this.isMaxInclusive;for(i=0;i<il;i++){_a86=rs[i];if(_a86[0]<=val&&(incl?(val<=_a86[1]):(val<_a86[1]))){return _a85[_a86[0]+"-"+_a86[1]];}}return this.defaultSymbol;},setMaxInclusive:function(_a87){this.isMaxInclusive=_a87;},_addBreakInfo:function(info){var min=info.minValue,max=info.maxValue;this.breaks.push([min,max]);this.infos.push(info);var _a88=info.symbol;if(_a88){if(!_a88.declaredClass){info.symbol=esri.symbol.fromJson(_a88);}}this._symbols[min+"-"+max]=info.symbol;},toJson:function(){var _a89=this.infos||[],_a8a=esri._sanitize;var _a8b=_a89[0]&&_a89[0].minValue;return _a8a({type:"classBreaks",field:this.attributeField,defaultSymbol:this.defaultSymbol&&this.defaultSymbol.toJson(),defaultLabel:this.defaultLabel,minValue:(_a8b===-Infinity)?-Number.MAX_VALUE:_a8b,classBreakInfos:dojo.map(_a89,function(info){info=dojo.mixin({},info);info.symbol=info.symbol&&info.symbol.toJson();info.classMaxValue=(info.maxValue===Infinity)?Number.MAX_VALUE:info.maxValue;delete info.minValue;delete info.maxValue;return _a8a(info);})});}});dojo.declare("esri.renderer.TemporalRenderer",esri.renderer.Renderer,{constructor:function(_a8c,_a8d,_a8e,_a8f){this.observationRenderer=_a8c;this.latestObservationRenderer=_a8d;this.trackRenderer=_a8e;this.observationAger=_a8f;},getSymbol:function(_a90){var _a91=_a90.getLayer();var kind=_a91._getKind(_a90);var _a92=(kind===0)?this.observationRenderer:(this.latestObservationRenderer||this.observationRenderer);var _a93=(_a92&&_a92.getSymbol(_a90));var ager=this.observationAger;if(_a91.timeInfo&&_a91._map.timeExtent&&(_a92===this.observationRenderer)&&ager&&_a93){_a93=ager.getAgedSymbol(_a93,_a90);}return _a93;}});dojo.declare("esri.renderer.SymbolAger",null,{getAgedSymbol:function(_a94,_a95){},_setSymbolSize:function(_a96,size){switch(_a96.type){case "simplemarkersymbol":_a96.setSize(size);break;case "picturemarkersymbol":_a96.setWidth(size);_a96.setHeight(size);break;case "simplelinesymbol":case "cartographiclinesymbol":_a96.setWidth(size);break;case "simplefillsymbol":case "picturefillsymbol":if(_a96.outline){_a96.outline.setWidth(size);}break;}}});dojo.declare("esri.renderer.TimeClassBreaksAger",esri.renderer.SymbolAger,{constructor:function(_a97,_a98){this.infos=_a97;this.timeUnits=_a98||"day";_a97.sort(function(a,b){if(a.minAge<b.minAge){return -1;}if(a.minAge>b.minAge){return 1;}return 0;});},getAgedSymbol:function(_a99,_a9a){var _a9b=_a9a.getLayer(),_a9c=_a9a.attributes,_a9d=esri._isDefined;_a99=esri.symbol.fromJson(_a99.toJson());var _a9e=_a9b._map.timeExtent;var _a9f=_a9e.endTime;if(!_a9f){return _a99;}var _aa0=new Date(_a9c[_a9b._startTimeField]);var diff=dojo.date.difference(_aa0,_a9f,this.timeUnits);dojo.some(this.infos,function(info){if(diff>=info.minAge&&diff<=info.maxAge){var _aa1=info.color,size=info.size,_aa2=info.alpha;if(_aa1){_a99.setColor(_aa1);}if(_a9d(size)){this._setSymbolSize(_a99,size);}if(_a9d(_aa2)&&_a99.color){_a99.color.a=_aa2;}return true;}},this);return _a99;}});dojo.mixin(esri.renderer.TimeClassBreaksAger,{UNIT_DAYS:"day",UNIT_HOURS:"hour",UNIT_MILLISECONDS:"millisecond",UNIT_MINUTES:"minute",UNIT_MONTHS:"month",UNIT_SECONDS:"second",UNIT_WEEKS:"week",UNIT_YEARS:"year"});dojo.declare("esri.renderer.TimeRampAger",esri.renderer.SymbolAger,{constructor:function(_aa3,_aa4,_aa5){this.colorRange=_aa3;this.sizeRange=_aa4;this.alphaRange=_aa5;},getAgedSymbol:function(_aa6,_aa7){var _aa8=_aa7.getLayer(),_aa9=_aa7.attributes;_aa6=esri.symbol.fromJson(_aa6.toJson());var _aaa=_aa8._map.timeExtent;var _aab=_aaa.startTime,_aac=_aaa.endTime;if(!_aab||!_aac){return _aa6;}_aab=_aab.getTime();_aac=_aac.getTime();var _aad=new Date(_aa9[_aa8._startTimeField]);_aad=_aad.getTime();if(_aad<_aab){_aad=_aab;}var _aae=(_aac===_aab)?1:(_aad-_aab)/(_aac-_aab);var _aaf=this.sizeRange,_ab0,_ab1;if(_aaf){var from=_aaf[0],to=_aaf[1];_ab1=Math.abs(to-from)*_aae;this._setSymbolSize(_aa6,(from<to)?(from+_ab1):(from-_ab1));}_aaf=this.colorRange;if(_aaf){var _ab2=_aaf[0],_ab3=_aaf[1],_ab4=Math.round;_ab0=new dojo.Color();var _ab5=_ab2.r,toR=_ab3.r;_ab1=Math.abs(toR-_ab5)*_aae;_ab0.r=_ab4((_ab5<toR)?(_ab5+_ab1):(_ab5-_ab1));var _ab6=_ab2.g,toG=_ab3.g;_ab1=Math.abs(toG-_ab6)*_aae;_ab0.g=_ab4((_ab6<toG)?(_ab6+_ab1):(_ab6-_ab1));var _ab7=_ab2.b,toB=_ab3.b;_ab1=Math.abs(toB-_ab7)*_aae;_ab0.b=_ab4((_ab7<toB)?(_ab7+_ab1):(_ab7-_ab1));var _ab8=_ab2.a,toA=_ab3.a;_ab1=Math.abs(toA-_ab8)*_aae;_ab0.a=(_ab8<toA)?(_ab8+_ab1):(_ab8-_ab1);_aa6.setColor(_ab0);}_ab0=_aa6.color;_aaf=this.alphaRange;if(_aaf&&_ab0){var _ab9=_aaf[0],_aba=_aaf[1];_ab1=Math.abs(_aba-_ab9)*_aae;_ab0.a=(_ab9<_aba)?(_ab9+_ab1):(_ab9-_ab1);}return _aa6;}});});},"dijit/BackgroundIframe":function(){define("dijit/BackgroundIframe",["require","./main","dojo/_base/config","dojo/dom-construct","dojo/dom-style","dojo/_base/lang","dojo/on","dojo/sniff","dojo/_base/window"],function(_abb,_abc,_abd,_abe,_abf,lang,on,has,win){var _ac0=new function(){var _ac1=[];this.pop=function(){var _ac2;if(_ac1.length){_ac2=_ac1.pop();_ac2.style.display="";}else{if(has("ie")<9){var burl=_abd["dojoBlankHtmlUrl"]||_abb.toUrl("dojo/resources/blank.html")||"javascript:\"\"";var html="<iframe src='"+burl+"' role='presentation'"+" style='position: absolute; left: 0px; top: 0px;"+"z-index: -1; filter:Alpha(Opacity=\"0\");'>";_ac2=win.doc.createElement(html);}else{_ac2=_abe.create("iframe");_ac2.src="javascript:\"\"";_ac2.className="dijitBackgroundIframe";_ac2.setAttribute("role","presentation");_abf.set(_ac2,"opacity",0.1);}_ac2.tabIndex=-1;}return _ac2;};this.push=function(_ac3){_ac3.style.display="none";_ac1.push(_ac3);};}();_abc.BackgroundIframe=function(node){if(!node.id){throw new Error("no id");}if(has("ie")||has("mozilla")){var _ac4=(this.iframe=_ac0.pop());node.appendChild(_ac4);if(has("ie")<7||has("quirks")){this.resize(node);this._conn=on(node,"resize",lang.hitch(this,function(){this.resize(node);}));}else{_abf.set(_ac4,{width:"100%",height:"100%"});}}};lang.extend(_abc.BackgroundIframe,{resize:function(node){if(this.iframe){_abf.set(this.iframe,{width:node.offsetWidth+"px",height:node.offsetHeight+"px"});}},destroy:function(){if(this._conn){this._conn.remove();this._conn=null;}if(this.iframe){_ac0.push(this.iframe);delete this.iframe;}}});return _abc.BackgroundIframe;});},"esri/tasks/gp":function(){define(["dijit","dojo","dojox","dojo/require!esri/tasks/_task,esri/layers/agsdynamic,dojo/date/locale"],function(_ac5,dojo,_ac6){dojo.provide("esri.tasks.gp");dojo.require("esri.tasks._task");dojo.require("esri.layers.agsdynamic");dojo.require("dojo.date.locale");dojo.declare("esri.tasks.Geoprocessor",esri.tasks._Task,{constructor:function(url){this._jobUpdateHandler=dojo.hitch(this,this._jobUpdateHandler);this._getJobStatus=dojo.hitch(this,this._getJobStatus);this._getResultDataHandler=dojo.hitch(this,this._getResultDataHandler);this._getResultImageHandler=dojo.hitch(this,this._getResultImageHandler);this._executeHandler=dojo.hitch(this,this._executeHandler);this._updateTimers=[];},updateDelay:1000,processSpatialReference:null,outputSpatialReference:null,outSpatialReference:null,setUpdateDelay:function(_ac7){this.updateDelay=_ac7;},setProcessSpatialReference:function(sr){this.processSpatialReference=sr;},setOutputSpatialReference:function(sr){this._setOutSR(sr);},setOutSpatialReference:function(sr){this._setOutSR(sr);},__msigns:[{n:"execute",c:3,a:[{i:0,p:["*"]}],e:2,f:1},{n:"submitJob",c:4,a:[{i:0,p:["*"]}],e:3}],_setOutSR:function(sr){this.outSpatialReference=this.outputSpatialReference=sr;},_getOutSR:function(){return this.outSpatialReference||this.outputSpatialReference;},_gpEncode:function(_ac8,_ac9,_aca){for(var i in _ac8){var _acb=_ac8[i];if(dojo.isArray(_acb)){_ac8[i]=dojo.toJson(dojo.map(_acb,function(item){return this._gpEncode({item:item},true).item;},this));}else{if(_acb instanceof Date){_ac8[i]=_acb.getTime();}}}return this._encode(_ac8,_ac9,_aca);},_decode:function(_acc){var _acd=_acc.dataType,_ace,_acf=new esri.tasks.ParameterValue(_acc);if(dojo.indexOf(["GPBoolean","GPDouble","GPLong","GPString"],_acd)!==-1){return _acf;}if(_acd==="GPLinearUnit"){_acf.value=new esri.tasks.LinearUnit(_acf.value);}else{if(_acd==="GPFeatureRecordSetLayer"||_acd==="GPRecordSet"){_acf.value=new esri.tasks.FeatureSet(_acf.value);}else{if(_acd==="GPDataFile"){_acf.value=new esri.tasks.DataFile(_acf.value);}else{if(_acd==="GPDate"){_ace=_acf.value;if(dojo.isString(_ace)){_acf.value=new esri.tasks.Date({date:_ace});}else{_acf.value=new Date(_ace);}}else{if(_acd==="GPRasterData"||_acd==="GPRasterDataLayer"){var _ad0=_acc.value.mapImage;if(_ad0){_acf.value=new esri.layers.MapImage(_ad0);}else{_acf.value=new esri.tasks.RasterData(_acf.value);}}else{if(_acd.indexOf("GPMultiValue:")!==-1){var type=_acd.split(":")[1];_ace=_acf.value;_acf.value=dojo.map(_ace,function(item){return this._decode({paramName:"_name",dataType:type,value:item}).value;},this);}else{console.log(this.declaredClass+" : "+esri.bundle.tasks.gp.gpDataTypeNotHandled+" : "+_acf.dataType);_acf=null;}}}}}}return _acf;},submitJob:function(_ad1,_ad2,_ad3,_ad4,_ad5){var _ad6=this._getOutSR();var _ad7=_ad5.assembly,_ad8=this._gpEncode(dojo.mixin({},this._url.query,{f:"json","env:outSR":(_ad6?(_ad6.wkid||dojo.toJson(_ad6.toJson())):null),"env:processSR":(this.processSpatialReference?(this.processSpatialReference.wkid||dojo.toJson(this.processSpatialReference.toJson())):null)},_ad1),null,_ad7&&_ad7[0]),_ad9=this._jobUpdateHandler,_ada=this._errorHandler;return esri.request({url:this._url.path+"/submitJob",content:_ad8,callbackParamName:"callback",load:function(r,i){_ad9(r,i,false,_ad2,_ad3,_ad5.dfd);},error:function(r){_ada(r,_ad4,_ad5.dfd);}});},_jobUpdateHandler:function(_adb,io,_adc,_add,_ade,dfd){var _adf=_adb.jobId,_ae0=new esri.tasks.JobInfo(_adb);this._successHandler([_ae0],"onStatusUpdate",_ade,_adc&&dfd);if(!_adc){clearTimeout(this._updateTimers[_adf]);this._updateTimers[_adf]=null;if(dfd){dfd.progress(_ae0);}switch(_adb.jobStatus){case esri.tasks.JobInfo.STATUS_SUBMITTED:case esri.tasks.JobInfo.STATUS_EXECUTING:case esri.tasks.JobInfo.STATUS_WAITING:case esri.tasks.JobInfo.STATUS_NEW:var _ae1=this._getJobStatus;this._updateTimers[_adf]=setTimeout(function(){_ae1(_adf,_adc,_add,_ade,dfd);},this.updateDelay);break;default:this._successHandler([_ae0],"onJobComplete",_add,dfd);}}},_getJobStatus:function(_ae2,_ae3,_ae4,_ae5,dfd){var _ae6=this._jobUpdateHandler;esri.request({url:this._url.path+"/jobs/"+_ae2,content:dojo.mixin({},this._url.query,{f:"json"}),callbackParamName:"callback",load:function(){_ae6(arguments[0],arguments[1],_ae3,_ae4,_ae5,dfd);},error:this._errorHandler});},_getResultDataHandler:function(_ae7,io,_ae8,_ae9,dfd){try{var _aea=this._decode(_ae7);this._successHandler([_aea],"onGetResultDataComplete",_ae8,dfd);}catch(err){this._errorHandler(err,_ae9,dfd);}},getResultData:function(_aeb,_aec,_aed,_aee){var _aef=this._getResultDataHandler,_af0=this._errorHandler;var dfd=new dojo.Deferred(esri._dfdCanceller);dfd._pendingDfd=esri.request({url:this._url.path+"/jobs/"+_aeb+"/results/"+_aec,content:dojo.mixin({},this._url.query,{f:"json",returnType:"data"}),callbackParamName:"callback",load:function(r,i){_aef(r,i,_aed,_aee,dfd);},error:function(r){_af0(r,_aee,dfd);}});return dfd;},checkJobStatus:function(_af1,_af2,_af3){var _af4=this._jobUpdateHandler,_af5=this._errorHandler;var dfd=new dojo.Deferred(esri._dfdCanceller);dfd._pendingDfd=esri.request({url:this._url.path+"/jobs/"+_af1,content:dojo.mixin({},this._url.query,{f:"json"}),callbackParamName:"callback",load:function(r,i){_af4(r,i,true,null,_af2,dfd);},error:function(r){_af5(r,_af3,dfd);}});return dfd;},cancelJob:function(_af6,_af7,_af8){var _af9=this._errorHandler;var dfd=new dojo.Deferred(esri._dfdCanceller);dfd._pendingDfd=esri.request({url:this._url.path+"/jobs/"+_af6+"/cancel",content:dojo.mixin({},this._url.query,{f:"json"}),callbackParamName:"callback",load:dojo.hitch(this,function(r,i){this._successHandler([r],"onJobCancel",_af7,dfd);}),error:function(r){_af9(r,_af8,dfd);}});return dfd;},execute:function(_afa,_afb,_afc,_afd){var _afe=this._getOutSR();var _aff=_afd.assembly,_b00=this._gpEncode(dojo.mixin({},this._url.query,{f:"json","env:outSR":(_afe?(_afe.wkid||dojo.toJson(_afe.toJson())):null),"env:processSR":(this.processSpatialReference?(this.processSpatialReference.wkid||dojo.toJson(this.processSpatialReference.toJson())):null)},_afa),null,_aff&&_aff[0]),_b01=this._executeHandler,_b02=this._errorHandler;return esri.request({url:this._url.path+"/execute",content:_b00,callbackParamName:"callback",load:function(r,i){_b01(r,i,_afb,_afc,_afd.dfd);},error:function(r){_b02(r,_afc,_afd.dfd);}});},_executeHandler:function(_b03,io,_b04,_b05,dfd){try{var _b06=_b03.results,i,il,_b07=_b03.messages;for(i=0,il=_b06.length;i<il;i++){_b06[i]=this._decode(_b06[i]);}for(i=0,il=_b07.length;i<il;i++){_b07[i]=new esri.tasks.GPMessage(_b07[i]);}this._successHandler([_b06,_b07],"onExecuteComplete",_b04,dfd);}catch(err){this._errorHandler(err,_b05,dfd);}},_getResultImageHandler:function(_b08,io,_b09,_b0a,dfd){try{var _b0b=this._decode(_b08);this._successHandler([_b0b],"onGetResultImageComplete",_b09,dfd);}catch(err){this._errorHandler(err,_b0a,dfd);}},getResultImage:function(_b0c,_b0d,_b0e,_b0f,_b10){var _b11=this._getResultImageHandler,_b12=this._errorHandler,_b13=this._gpEncode(dojo.mixin({},this._url.query,{f:"json"},_b0e.toJson()));var dfd=new dojo.Deferred(esri._dfdCanceller);dfd._pendingDfd=esri.request({url:this._url.path+"/jobs/"+_b0c+"/results/"+_b0d,content:_b13,callbackParamName:"callback",load:function(r,i){_b11(r,i,_b0f,_b10,dfd);},error:function(r){_b12(r,_b10,dfd);}});return dfd;},cancelJobStatusUpdates:function(_b14){clearTimeout(this._updateTimers[_b14]);this._updateTimers[_b14]=null;},getResultImageLayer:function(_b15,_b16,_b17,_b18){var url=this._url.path+"/jobs/"+_b15+"/results/"+_b16;if(this._url.query){url+="?"+dojo.objectToQuery(this._url.query);}var _b19=new esri.tasks._GPResultImageLayer(url,{imageParameters:_b17},true);this.onGetResultImageLayerComplete(_b19);if(_b18){_b18(_b19);}return _b19;},onStatusUpdate:function(){},onJobComplete:function(){},onExecuteComplete:function(){},onGetResultDataComplete:function(){},onGetResultImageComplete:function(){},onGetResultImageLayerComplete:function(){},onJobCancel:function(){}});esri._createWrappers("esri.tasks.Geoprocessor");dojo.declare("esri.tasks.JobInfo",null,{constructor:function(_b1a){this.messages=[];dojo.mixin(this,_b1a);var _b1b=this.messages;for(var i=0,il=_b1b.length;i<il;i++){_b1b[i]=new esri.tasks.GPMessage(_b1b[i]);}},jobId:"",jobStatus:""});dojo.mixin(esri.tasks.JobInfo,{STATUS_CANCELLED:"esriJobCancelled",STATUS_CANCELLING:"esriJobCancelling",STATUS_DELETED:"esriJobDeleted",STATUS_DELETING:"esriJobDeleting",STATUS_EXECUTING:"esriJobExecuting",STATUS_FAILED:"esriJobFailed",STATUS_NEW:"esriJobNew",STATUS_SUBMITTED:"esriJobSubmitted",STATUS_SUCCEEDED:"esriJobSucceeded",STATUS_TIMED_OUT:"esriJobTimedOut",STATUS_WAITING:"esriJobWaiting"});dojo.declare("esri.tasks.GPMessage",null,{constructor:function(_b1c){dojo.mixin(this,_b1c);}});dojo.mixin(esri.tasks.GPMessage,{TYPE_INFORMATIVE:"esriJobMessageTypeInformative",TYPE_PROCESS_DEFINITION:"esriJobMessageTypeProcessDefinition",TYPE_PROCESS_START:"esriJobMessageTypeProcessStart",TYPE_PROCESS_STOP:"esriJobMessageTypeProcessStop",TYPE_WARNING:"esriJobMessageTypeWarning",TYPE_ERROR:"esriJobMessageTypeError",TYPE_EMPTY:"esriJobMessageTypeEmpty",TYPE_ABORT:"esriJobMessageTypeAbort"});dojo.declare("esri.tasks.LinearUnit",null,{constructor:function(json){if(json){dojo.mixin(this,json);}},distance:0,units:null,toJson:function(){var json={};if(this.distance){json.distance=this.distance;}if(this.units){json.units=this.units;}return json;}});dojo.declare("esri.tasks.DataFile",null,{constructor:function(json){if(json){dojo.mixin(this,json);}},url:null,itemID:null,toJson:function(){var json={};if(this.url){json.url=this.url;}if(this.itemID){json.itemID=this.itemID;}return json;}});dojo.declare("esri.tasks.RasterData",null,{constructor:function(json){if(json){dojo.mixin(this,json);}},url:null,format:null,itemID:null,toJson:function(){var json={};if(this.url){json.url=this.url;}if(this.format){json.format=this.format;}if(this.itemID){json.itemID=this.itemID;}return json;}});dojo.declare("esri.tasks.Date",null,{constructor:function(json){if(json){if(json.format){this.format=json.format;}this.date=dojo.date.locale.parse(json.date,{selector:"date",datePattern:this.format});}},date:new Date(),format:"EEE MMM dd HH:mm:ss zzz yyyy",toJson:function(){return {date:dojo.date.locale.format(this.date,{selector:"date",datePattern:this.format}),format:this.format};}});dojo.declare("esri.tasks.ParameterValue",null,{constructor:function(json){dojo.mixin(this,json);}});dojo.declare("esri.tasks._GPResultImageLayer",esri.layers.ArcGISDynamicMapServiceLayer,{constructor:function(url,_b1d){if(_b1d&&_b1d.imageParameters&&_b1d.imageParameters.extent){this.initialExtent=(this.fullExtent=_b1d.imageParameters.extent);this.spatialReference=this.initialExtent.spatialReference;}this.getImageUrl=dojo.hitch(this,this.getImageUrl);this.loaded=true;this.onLoad(this);},getImageUrl:function(_b1e,_b1f,_b20,_b21){var path=this._url.path+"?",_b22=this._params,sr=_b1e.spatialReference.wkid;_b21(path+dojo.objectToQuery(dojo.mixin(_b22,{f:"image",bbox:dojo.toJson(_b1e.toJson()),bboxSR:sr,imageSR:sr,size:_b1f+","+_b20})));}});});},"dijit/form/Button":function(){require({cache:{"url:dijit/form/templates/Button.html":"<span class=\"dijit dijitReset dijitInline\" role=\"presentation\"\n\t><span class=\"dijitReset dijitInline dijitButtonNode\"\n\t\tdata-dojo-attach-event=\"ondijitclick:_onClick\" role=\"presentation\"\n\t\t><span class=\"dijitReset dijitStretch dijitButtonContents\"\n\t\t\tdata-dojo-attach-point=\"titleNode,focusNode\"\n\t\t\trole=\"button\" aria-labelledby=\"${id}_label\"\n\t\t\t><span class=\"dijitReset dijitInline dijitIcon\" data-dojo-attach-point=\"iconNode\"></span\n\t\t\t><span class=\"dijitReset dijitToggleButtonIconChar\">&#x25CF;</span\n\t\t\t><span class=\"dijitReset dijitInline dijitButtonText\"\n\t\t\t\tid=\"${id}_label\"\n\t\t\t\tdata-dojo-attach-point=\"containerNode\"\n\t\t\t></span\n\t\t></span\n\t></span\n\t><input ${!nameAttrSetting} type=\"${type}\" value=\"${value}\" class=\"dijitOffScreen\"\n\t\ttabIndex=\"-1\" role=\"presentation\" data-dojo-attach-point=\"valueNode\"\n/></span>\n"}});define("dijit/form/Button",["require","dojo/_base/declare","dojo/dom-class","dojo/has","dojo/_base/kernel","dojo/_base/lang","dojo/ready","./_FormWidget","./_ButtonMixin","dojo/text!./templates/Button.html"],function(_b23,_b24,_b25,has,_b26,lang,_b27,_b28,_b29,_b2a){if(has("dijit-legacy-requires")){_b27(0,function(){var _b2b=["dijit/form/DropDownButton","dijit/form/ComboButton","dijit/form/ToggleButton"];_b23(_b2b);});}return _b24("dijit.form.Button",[_b28,_b29],{showLabel:true,iconClass:"dijitNoIcon",_setIconClassAttr:{node:"iconNode",type:"class"},baseClass:"dijitButton",templateString:_b2a,_setValueAttr:"valueNode",_onClick:function(e){var ok=this.inherited(arguments);if(ok){if(this.valueNode){this.valueNode.click();e.preventDefault();e.stopPropagation();}}return ok;},_fillContent:function(_b2c){if(_b2c&&(!this.params||!("label" in this.params))){var _b2d=lang.trim(_b2c.innerHTML);if(_b2d){this.label=_b2d;}}},_setShowLabelAttr:function(val){if(this.containerNode){_b25.toggle(this.containerNode,"dijitDisplayNone",!val);}this._set("showLabel",val);},setLabel:function(_b2e){_b26.deprecated("dijit.form.Button.setLabel() is deprecated.  Use set('label', ...) instead.","","2.0");this.set("label",_b2e);},_setLabelAttr:function(_b2f){this.inherited(arguments);if(!this.showLabel&&!("title" in this.params)){this.titleNode.title=lang.trim(this.containerNode.innerText||this.containerNode.textContent||"");}}});});},"dojo/dnd/move":function(){define(["../_base/declare","../dom-geometry","../dom-style","./common","./Mover","./Moveable"],function(_b30,_b31,_b32,dnd,_b33,_b34){var _b35=_b30("dojo.dnd.move.constrainedMoveable",_b34,{constraints:function(){},within:false,constructor:function(node,_b36){if(!_b36){_b36={};}this.constraints=_b36.constraints;this.within=_b36.within;},onFirstMove:function(_b37){var c=this.constraintBox=this.constraints.call(this,_b37);c.r=c.l+c.w;c.b=c.t+c.h;if(this.within){var mb=_b31.getMarginSize(_b37.node);c.r-=mb.w;c.b-=mb.h;}},onMove:function(_b38,_b39){var c=this.constraintBox,s=_b38.node.style;this.onMoving(_b38,_b39);_b39.l=_b39.l<c.l?c.l:c.r<_b39.l?c.r:_b39.l;_b39.t=_b39.t<c.t?c.t:c.b<_b39.t?c.b:_b39.t;s.left=_b39.l+"px";s.top=_b39.t+"px";this.onMoved(_b38,_b39);}});var _b3a=_b30("dojo.dnd.move.boxConstrainedMoveable",_b35,{box:{},constructor:function(node,_b3b){var box=_b3b&&_b3b.box;this.constraints=function(){return box;};}});var _b3c=_b30("dnd.move.parentConstrainedMoveable",_b35,{area:"content",constructor:function(node,_b3d){var area=_b3d&&_b3d.area;this.constraints=function(){var n=this.node.parentNode,s=_b32.getComputedStyle(n),mb=_b31.getMarginBox(n,s);if(area=="margin"){return mb;}var t=_b31.getMarginExtents(n,s);mb.l+=t.l,mb.t+=t.t,mb.w-=t.w,mb.h-=t.h;if(area=="border"){return mb;}t=_b31.getBorderExtents(n,s);mb.l+=t.l,mb.t+=t.t,mb.w-=t.w,mb.h-=t.h;if(area=="padding"){return mb;}t=_b31.getPadExtents(n,s);mb.l+=t.l,mb.t+=t.t,mb.w-=t.w,mb.h-=t.h;return mb;};}});return {constrainedMoveable:_b35,boxConstrainedMoveable:_b3a,parentConstrainedMoveable:_b3c};});},"dijit/_WidgetBase":function(){define("dijit/_WidgetBase",["require","dojo/_base/array","dojo/aspect","dojo/_base/config","dojo/_base/connect","dojo/_base/declare","dojo/dom","dojo/dom-attr","dojo/dom-class","dojo/dom-construct","dojo/dom-geometry","dojo/dom-style","dojo/has","dojo/_base/kernel","dojo/_base/lang","dojo/on","dojo/ready","dojo/Stateful","dojo/topic","dojo/_base/window","./Destroyable","./registry"],function(_b3e,_b3f,_b40,_b41,_b42,_b43,dom,_b44,_b45,_b46,_b47,_b48,has,_b49,lang,on,_b4a,_b4b,_b4c,win,_b4d,_b4e){has.add("dijit-legacy-requires",!_b49.isAsync);if(has("dijit-legacy-requires")){_b4a(0,function(){var _b4f=["dijit/_base/manager"];_b3e(_b4f);});}var _b50={};function _b51(obj){var ret={};for(var attr in obj){ret[attr.toLowerCase()]=true;}return ret;};function _b52(attr){return function(val){_b44[val?"set":"remove"](this.domNode,attr,val);this._set(attr,val);};};return _b43("dijit._WidgetBase",[_b4b,_b4d],{id:"",_setIdAttr:"domNode",lang:"",_setLangAttr:_b52("lang"),dir:"",_setDirAttr:_b52("dir"),textDir:"","class":"",_setClassAttr:{node:"domNode",type:"class"},style:"",title:"",tooltip:"",baseClass:"",srcNodeRef:null,domNode:null,containerNode:null,ownerDocument:null,_setOwnerDocumentAttr:function(val){this._set("ownerDocument",val);},attributeMap:{},_blankGif:_b41.blankGif||_b3e.toUrl("dojo/resources/blank.gif"),postscript:function(_b53,_b54){this.create(_b53,_b54);},create:function(_b55,_b56){this.srcNodeRef=dom.byId(_b56);this._connects=[];this._supportingWidgets=[];if(this.srcNodeRef&&(typeof this.srcNodeRef.id=="string")){this.id=this.srcNodeRef.id;}if(_b55){this.params=_b55;lang.mixin(this,_b55);}this.postMixInProperties();if(!this.id){this.id=_b4e.getUniqueId(this.declaredClass.replace(/\./g,"_"));if(this.params){delete this.params.id;}}this.ownerDocument=this.ownerDocument||(this.srcNodeRef?this.srcNodeRef.ownerDocument:win.doc);this.ownerDocumentBody=win.body(this.ownerDocument);_b4e.add(this);this.buildRendering();var _b57;if(this.domNode){this._applyAttributes();var _b58=this.srcNodeRef;if(_b58&&_b58.parentNode&&this.domNode!==_b58){_b58.parentNode.replaceChild(this.domNode,_b58);_b57=true;}this.domNode.setAttribute("widgetId",this.id);}this.postCreate();if(_b57){delete this.srcNodeRef;}this._created=true;},_applyAttributes:function(){var ctor=this.constructor,list=ctor._setterAttrs;if(!list){list=(ctor._setterAttrs=[]);for(var attr in this.attributeMap){list.push(attr);}var _b59=ctor.prototype;for(var _b5a in _b59){if(_b5a in this.attributeMap){continue;}var _b5b="_set"+_b5a.replace(/^[a-z]|-[a-zA-Z]/g,function(c){return c.charAt(c.length-1).toUpperCase();})+"Attr";if(_b5b in _b59){list.push(_b5a);}}}_b3f.forEach(list,function(attr){if(this.params&&attr in this.params){}else{if(this[attr]){this.set(attr,this[attr]);}}},this);for(var _b5c in this.params){this.set(_b5c,this.params[_b5c]);}},postMixInProperties:function(){},buildRendering:function(){if(!this.domNode){this.domNode=this.srcNodeRef||this.ownerDocument.createElement("div");}if(this.baseClass){var _b5d=this.baseClass.split(" ");if(!this.isLeftToRight()){_b5d=_b5d.concat(_b3f.map(_b5d,function(name){return name+"Rtl";}));}_b45.add(this.domNode,_b5d);}},postCreate:function(){},startup:function(){if(this._started){return;}this._started=true;_b3f.forEach(this.getChildren(),function(obj){if(!obj._started&&!obj._destroyed&&lang.isFunction(obj.startup)){obj.startup();obj._started=true;}});},destroyRecursive:function(_b5e){this._beingDestroyed=true;this.destroyDescendants(_b5e);this.destroy(_b5e);},destroy:function(_b5f){this._beingDestroyed=true;this.uninitialize();function _b60(w){if(w.destroyRecursive){w.destroyRecursive(_b5f);}else{if(w.destroy){w.destroy(_b5f);}}};_b3f.forEach(this._connects,lang.hitch(this,"disconnect"));_b3f.forEach(this._supportingWidgets,_b60);if(this.domNode){_b3f.forEach(_b4e.findWidgets(this.domNode,this.containerNode),_b60);}this.destroyRendering(_b5f);_b4e.remove(this.id);this._destroyed=true;},destroyRendering:function(_b61){if(this.bgIframe){this.bgIframe.destroy(_b61);delete this.bgIframe;}if(this.domNode){if(_b61){_b44.remove(this.domNode,"widgetId");}else{_b46.destroy(this.domNode);}delete this.domNode;}if(this.srcNodeRef){if(!_b61){_b46.destroy(this.srcNodeRef);}delete this.srcNodeRef;}},destroyDescendants:function(_b62){_b3f.forEach(this.getChildren(),function(_b63){if(_b63.destroyRecursive){_b63.destroyRecursive(_b62);}});},uninitialize:function(){return false;},_setStyleAttr:function(_b64){var _b65=this.domNode;if(lang.isObject(_b64)){_b48.set(_b65,_b64);}else{if(_b65.style.cssText){_b65.style.cssText+="; "+_b64;}else{_b65.style.cssText=_b64;}}this._set("style",_b64);},_attrToDom:function(attr,_b66,_b67){_b67=arguments.length>=3?_b67:this.attributeMap[attr];_b3f.forEach(lang.isArray(_b67)?_b67:[_b67],function(_b68){var _b69=this[_b68.node||_b68||"domNode"];var type=_b68.type||"attribute";switch(type){case "attribute":if(lang.isFunction(_b66)){_b66=lang.hitch(this,_b66);}var _b6a=_b68.attribute?_b68.attribute:(/^on[A-Z][a-zA-Z]*$/.test(attr)?attr.toLowerCase():attr);if(_b69.tagName){_b44.set(_b69,_b6a,_b66);}else{_b69.set(_b6a,_b66);}break;case "innerText":_b69.innerHTML="";_b69.appendChild(this.ownerDocument.createTextNode(_b66));break;case "innerHTML":_b69.innerHTML=_b66;break;case "class":_b45.replace(_b69,_b66,this[attr]);break;}},this);},get:function(name){var _b6b=this._getAttrNames(name);return this[_b6b.g]?this[_b6b.g]():this[name];},set:function(name,_b6c){if(typeof name==="object"){for(var x in name){this.set(x,name[x]);}return this;}var _b6d=this._getAttrNames(name),_b6e=this[_b6d.s];if(lang.isFunction(_b6e)){var _b6f=_b6e.apply(this,Array.prototype.slice.call(arguments,1));}else{var _b70=this.focusNode&&!lang.isFunction(this.focusNode)?"focusNode":"domNode",tag=this[_b70].tagName,_b71=_b50[tag]||(_b50[tag]=_b51(this[_b70])),map=name in this.attributeMap?this.attributeMap[name]:_b6d.s in this?this[_b6d.s]:((_b6d.l in _b71&&typeof _b6c!="function")||/^aria-|^data-|^role$/.test(name))?_b70:null;if(map!=null){this._attrToDom(name,_b6c,map);}this._set(name,_b6c);}return _b6f||this;},_attrPairNames:{},_getAttrNames:function(name){var apn=this._attrPairNames;if(apn[name]){return apn[name];}var uc=name.replace(/^[a-z]|-[a-zA-Z]/g,function(c){return c.charAt(c.length-1).toUpperCase();});return (apn[name]={n:name+"Node",s:"_set"+uc+"Attr",g:"_get"+uc+"Attr",l:uc.toLowerCase()});},_set:function(name,_b72){var _b73=this[name];this[name]=_b72;if(this._created&&_b72!==_b73){if(this._watchCallbacks){this._watchCallbacks(name,_b73,_b72);}this.emit("attrmodified-"+name,{detail:{prevValue:_b73,newValue:_b72}});}},emit:function(type,_b74,_b75){_b74=_b74||{};if(_b74.bubbles===undefined){_b74.bubbles=true;}if(_b74.cancelable===undefined){_b74.cancelable=true;}if(!_b74.detail){_b74.detail={};}_b74.detail.widget=this;var ret,_b76=this["on"+type];if(_b76){ret=_b76.apply(this,_b75?_b75:[_b74]);}if(this._started&&!this._beingDestroyed){on.emit(this.domNode,type.toLowerCase(),_b74);}return ret;},on:function(type,func){var _b77=this._onMap(type);if(_b77){return _b40.after(this,_b77,func,true);}return this.own(on(this.domNode,type,func))[0];},_onMap:function(type){var ctor=this.constructor,map=ctor._onMap;if(!map){map=(ctor._onMap={});for(var attr in ctor.prototype){if(/^on/.test(attr)){map[attr.replace(/^on/,"").toLowerCase()]=attr;}}}return map[typeof type=="string"&&type.toLowerCase()];},toString:function(){return "[Widget "+this.declaredClass+", "+(this.id||"NO ID")+"]";},getChildren:function(){return this.containerNode?_b4e.findWidgets(this.containerNode):[];},getParent:function(){return _b4e.getEnclosingWidget(this.domNode.parentNode);},connect:function(obj,_b78,_b79){return this.own(_b42.connect(obj,_b78,this,_b79))[0];},disconnect:function(_b7a){_b7a.remove();},subscribe:function(t,_b7b){return this.own(_b4c.subscribe(t,lang.hitch(this,_b7b)))[0];},unsubscribe:function(_b7c){_b7c.remove();},isLeftToRight:function(){return this.dir?(this.dir=="ltr"):_b47.isBodyLtr(this.ownerDocument);},isFocusable:function(){return this.focus&&(_b48.get(this.domNode,"display")!="none");},placeAt:function(_b7d,_b7e){var _b7f=!_b7d.tagName&&_b4e.byId(_b7d);if(_b7f&&_b7f.addChild&&(!_b7e||typeof _b7e==="number")){_b7f.addChild(this,_b7e);}else{var ref=_b7f?(_b7f.containerNode&&!/after|before|replace/.test(_b7e||"")?_b7f.containerNode:_b7f.domNode):dom.byId(_b7d,this.ownerDocument);_b46.place(this.domNode,ref,_b7e);if(!this._started&&(this.getParent()||{})._started){this.startup();}}return this;},getTextDir:function(text,_b80){return _b80;},applyTextDir:function(){},defer:function(fcn,_b81){var _b82=setTimeout(lang.hitch(this,function(){_b82=null;if(!this._destroyed){lang.hitch(this,fcn)();}}),_b81||0);return {remove:function(){if(_b82){clearTimeout(_b82);_b82=null;}return null;}};}});});},"esri/tasks/locator":function(){define(["dijit","dojo","dojox","dojo/require!esri/tasks/_task"],function(_b83,dojo,_b84){dojo.provide("esri.tasks.locator");dojo.require("esri.tasks._task");dojo.declare("esri.tasks.Locator",esri.tasks._Task,{constructor:function(url){this._geocodeHandler=dojo.hitch(this,this._geocodeHandler);this._geocodeAddressesHandler=dojo.hitch(this,this._geocodeAddressesHandler);this._reverseGeocodeHandler=dojo.hitch(this,this._reverseGeocodeHandler);},outSpatialReference:null,setOutSpatialReference:function(sr){this.outSpatialReference=sr;},_geocodeHandler:function(_b85,io,_b86,_b87,dfd){try{var _b88=_b85.candidates,_b89,out=[],i,il=_b88.length,sr=_b85.spatialReference,_b8a;for(i=0;i<il;i++){_b89=_b88[i];_b8a=_b89.location;if(_b8a){_b8a.spatialReference=sr;}out[i]=new esri.tasks.AddressCandidate(_b89);}this._successHandler([out],"onAddressToLocationsComplete",_b86,dfd);}catch(err){this._errorHandler(err,_b87,dfd);}},_geocodeAddressesHandler:function(_b8b,io,_b8c,_b8d,dfd){try{var _b8e=_b8b.locations,out=[],i,il=_b8e.length,sr=_b8b.spatialReference,_b8f;for(i=0;i<il;i++){_b8f=_b8e[i].location;if(_b8f){_b8f.spatialReference=sr;}out[i]=new esri.tasks.AddressCandidate(_b8e[i]);}this._successHandler([out],"onAddressesToLocationsComplete",_b8c,dfd);}catch(err){this._errorHandler(err,_b8d,dfd);}},addressToLocations:function(_b90,_b91,_b92,_b93,_b94){if(_b90.address){_b93=_b92;_b92=_b91;_b91=_b90.outFields;_b94=_b90.searchExtent;_b90=_b90.address;}if(_b94){_b94=_b94._normalize(true);}var _b95=this.outSpatialReference,_b96=this._encode(dojo.mixin({},this._url.query,_b90,{f:"json",outSR:_b95&&dojo.toJson(_b95.toJson()),outFields:(_b91&&_b91.join(","))||null,searchExtent:_b94&&dojo.toJson(_b94.toJson())})),_b97=this._geocodeHandler,_b98=this._errorHandler,dfd=new dojo.Deferred(esri._dfdCanceller);dfd._pendingDfd=esri.request({url:this._url.path+"/findAddressCandidates",content:_b96,callbackParamName:"callback",load:function(r,i){_b97(r,i,_b92,_b93,dfd);},error:function(r){_b98(r,_b93,dfd);}});return dfd;},addressesToLocations:function(_b99,_b9a,_b9b){var _b9c=this.outSpatialReference,_b9d=[],_b9e=_b99.addresses;dojo.forEach(_b9e,function(_b9f,idx){_b9d.push({attributes:_b9f});});var _ba0=this._encode(dojo.mixin({},this._url.query,{addresses:dojo.toJson({records:_b9d})},{f:"json",outSR:_b9c&&dojo.toJson(_b9c.toJson())})),_ba1=this._geocodeAddressesHandler,_ba2=this._errorHandler,dfd=new dojo.Deferred(esri._dfdCanceller);dfd._pendingDfd=esri.request({url:this._url.path+"/geocodeAddresses",content:_ba0,callbackParamName:"callback",load:function(r,i){_ba1(r,i,_b9a,_b9b,dfd);},error:function(r){_ba2(r,_b9b,dfd);}});return dfd;},_reverseGeocodeHandler:function(_ba3,io,_ba4,_ba5,dfd){try{var _ba6=new esri.tasks.AddressCandidate({address:_ba3.address,location:_ba3.location,score:100});this._successHandler([_ba6],"onLocationToAddressComplete",_ba4,dfd);}catch(err){this._errorHandler(err,_ba5,dfd);}},locationToAddress:function(_ba7,_ba8,_ba9,_baa){if(_ba7&&this.normalization){_ba7=_ba7.normalize();}var _bab=this.outSpatialReference,_bac=this._encode(dojo.mixin({},this._url.query,{outSR:_bab&&dojo.toJson(_bab.toJson()),location:_ba7&&dojo.toJson(_ba7.toJson()),distance:_ba8,f:"json"})),_bad=this._reverseGeocodeHandler,_bae=this._errorHandler,dfd=new dojo.Deferred(esri._dfdCanceller);dfd._pendingDfd=esri.request({url:this._url.path+"/reverseGeocode",content:_bac,callbackParamName:"callback",load:function(r,i){_bad(r,i,_ba9,_baa,dfd);},error:function(r){_bae(r,_baa,dfd);}});return dfd;},onAddressToLocationsComplete:function(){},onAddressesToLocationsComplete:function(){},onLocationToAddressComplete:function(){}});dojo.declare("esri.tasks.AddressCandidate",null,{constructor:function(json){dojo.mixin(this,json);this.location=new esri.geometry.Point(this.location);}});});},"url:dijit/templates/Tooltip.html":"<div class=\"dijitTooltip dijitTooltipLeft\" id=\"dojoTooltip\"\n\t><div class=\"dijitTooltipContainer dijitTooltipContents\" data-dojo-attach-point=\"containerNode\" role='alert'></div\n\t><div class=\"dijitTooltipConnector\" data-dojo-attach-point=\"connectorNode\"></div\n></div>\n","dijit/_base/sniff":function(){define("dijit/_base/sniff",["dojo/uacss"],function(){});},"dojox/collections/_base":function(){define("dojox/collections/_base",["dojo/_base/kernel","dojo/_base/lang","dojo/_base/array"],function(dojo,lang,arr){var _baf=lang.getObject("dojox.collections",true);_baf.DictionaryEntry=function(k,v){this.key=k;this.value=v;this.valueOf=function(){return this.value;};this.toString=function(){return String(this.value);};};_baf.Iterator=function(a){var _bb0=0;this.element=a[_bb0]||null;this.atEnd=function(){return (_bb0>=a.length);};this.get=function(){if(this.atEnd()){return null;}this.element=a[_bb0++];return this.element;};this.map=function(fn,_bb1){return arr.map(a,fn,_bb1);};this.reset=function(){_bb0=0;this.element=a[_bb0];};};_baf.DictionaryIterator=function(obj){var a=[];var _bb2={};for(var p in obj){if(!_bb2[p]){a.push(obj[p]);}}var _bb3=0;this.element=a[_bb3]||null;this.atEnd=function(){return (_bb3>=a.length);};this.get=function(){if(this.atEnd()){return null;}this.element=a[_bb3++];return this.element;};this.map=function(fn,_bb4){return arr.map(a,fn,_bb4);};this.reset=function(){_bb3=0;this.element=a[_bb3];};};return _baf;});},"dojo/regexp":function(){define(["./_base/kernel","./_base/lang"],function(dojo,lang){var _bb5={};lang.setObject("dojo.regexp",_bb5);_bb5.escapeString=function(str,_bb6){return str.replace(/([\.$?*|{}\(\)\[\]\\\/\+^])/g,function(ch){if(_bb6&&_bb6.indexOf(ch)!=-1){return ch;}return "\\"+ch;});};_bb5.buildGroupRE=function(arr,re,_bb7){if(!(arr instanceof Array)){return re(arr);}var b=[];for(var i=0;i<arr.length;i++){b.push(re(arr[i]));}return _bb5.group(b.join("|"),_bb7);};_bb5.group=function(_bb8,_bb9){return "("+(_bb9?"?:":"")+_bb8+")";};return _bb5;});},"esri/_time":function(){define("esri/_time",["dijit","dojo","dojox"],function(_bba,dojo,_bbb){dojo.provide("esri._time");dojo.declare("esri.TimeExtent",null,{constructor:function(json){if(arguments.length>1){this._create(arguments[0],arguments[1]);}else{if(json){if(dojo.isArray(json)){var _bbc=json[0],end=json[1];this.startTime=(_bbc===null||_bbc==="null")?null:new Date(_bbc);this.endTime=(end===null||end==="null")?null:new Date(end);}else{if(json instanceof Date){this._create(json,null);}}}}},offset:function(_bbd,_bbe){var _bbf=new esri.TimeExtent();var _bc0=this.startTime,end=this.endTime;if(_bc0){_bbf.startTime=this._getOffsettedDate(_bc0,_bbd,_bbe);}if(end){_bbf.endTime=this._getOffsettedDate(end,_bbd,_bbe);}return _bbf;},intersection:function(_bc1){return this._intersection(this,_bc1);},toJson:function(){var _bc2=[];var _bc3=this.startTime;_bc2.push(_bc3?_bc3.getTime():"null");var end=this.endTime;_bc2.push(end?end.getTime():"null");return _bc2;},_create:function(_bc4,end){this.startTime=_bc4?new Date(_bc4.getTime()):null;this.endTime=end?new Date(end.getTime()):null;},_refData:{"esriTimeUnitsMilliseconds":{getter:"getUTCMilliseconds",setter:"setUTCMilliseconds",multiplier:1},"esriTimeUnitsSeconds":{getter:"getUTCSeconds",setter:"setUTCSeconds",multiplier:1},"esriTimeUnitsMinutes":{getter:"getUTCMinutes",setter:"setUTCMinutes",multiplier:1},"esriTimeUnitsHours":{getter:"getUTCHours",setter:"setUTCHours",multiplier:1},"esriTimeUnitsDays":{getter:"getUTCDate",setter:"setUTCDate",multiplier:1},"esriTimeUnitsWeeks":{getter:"getUTCDate",setter:"setUTCDate",multiplier:7},"esriTimeUnitsMonths":{getter:"getUTCMonth",setter:"setUTCMonth",multiplier:1},"esriTimeUnitsYears":{getter:"getUTCFullYear",setter:"setUTCFullYear",multiplier:1},"esriTimeUnitsDecades":{getter:"getUTCFullYear",setter:"setUTCFullYear",multiplier:10},"esriTimeUnitsCenturies":{getter:"getUTCFullYear",setter:"setUTCFullYear",multiplier:100}},_intersection:function(_bc5,_bc6){if(_bc5&&_bc6){var _bc7=_bc5.startTime,end1=_bc5.endTime;var _bc8=_bc6.startTime,end2=_bc6.endTime;_bc7=_bc7?_bc7.getTime():-Infinity;_bc8=_bc8?_bc8.getTime():-Infinity;end1=end1?end1.getTime():Infinity;end2=end2?end2.getTime():Infinity;var _bc9,end;if(_bc8>=_bc7&&_bc8<=end1){_bc9=_bc8;}else{if(_bc7>=_bc8&&_bc7<=end2){_bc9=_bc7;}}if(end1>=_bc8&&end1<=end2){end=end1;}else{if(end2>=_bc7&&end2<=end1){end=end2;}}if(!isNaN(_bc9)&&!isNaN(end)){var _bca=new esri.TimeExtent();_bca.startTime=(_bc9===-Infinity)?null:new Date(_bc9);_bca.endTime=(end===Infinity)?null:new Date(end);return _bca;}else{return null;}}else{return null;}},_getOffsettedDate:function(_bcb,_bcc,_bcd){var data=this._refData;var _bce=new Date(_bcb.getTime());if(_bcc&&_bcd){data=data[_bcd];_bce[data.setter](_bce[data.getter]()+(_bcc*data.multiplier));}return _bce;}});dojo.declare("esri.TimeReference",null,{constructor:function(json){if(json){dojo.mixin(this,json);}}});});},"dijit/form/_FormMixin":function(){define("dijit/form/_FormMixin",["dojo/_base/array","dojo/_base/declare","dojo/_base/kernel","dojo/_base/lang","dojo/on","dojo/window"],function(_bcf,_bd0,_bd1,lang,on,_bd2){return _bd0("dijit.form._FormMixin",null,{state:"",_getDescendantFormWidgets:function(_bd3){var res=[];_bcf.forEach(_bd3||this.getChildren(),function(_bd4){if("value" in _bd4){res.push(_bd4);}else{res=res.concat(this._getDescendantFormWidgets(_bd4.getChildren()));}},this);return res;},reset:function(){_bcf.forEach(this._getDescendantFormWidgets(),function(_bd5){if(_bd5.reset){_bd5.reset();}});},validate:function(){var _bd6=false;return _bcf.every(_bcf.map(this._getDescendantFormWidgets(),function(_bd7){_bd7._hasBeenBlurred=true;var _bd8=_bd7.disabled||!_bd7.validate||_bd7.validate();if(!_bd8&&!_bd6){_bd2.scrollIntoView(_bd7.containerNode||_bd7.domNode);_bd7.focus();_bd6=true;}return _bd8;}),function(item){return item;});},setValues:function(val){_bd1.deprecated(this.declaredClass+"::setValues() is deprecated. Use set('value', val) instead.","","2.0");return this.set("value",val);},_setValueAttr:function(obj){var map={};_bcf.forEach(this._getDescendantFormWidgets(),function(_bd9){if(!_bd9.name){return;}var _bda=map[_bd9.name]||(map[_bd9.name]=[]);_bda.push(_bd9);});for(var name in map){if(!map.hasOwnProperty(name)){continue;}var _bdb=map[name],_bdc=lang.getObject(name,false,obj);if(_bdc===undefined){continue;}if(!lang.isArray(_bdc)){_bdc=[_bdc];}if(typeof _bdb[0].checked=="boolean"){_bcf.forEach(_bdb,function(w){w.set("value",_bcf.indexOf(_bdc,w.value)!=-1);});}else{if(_bdb[0].multiple){_bdb[0].set("value",_bdc);}else{_bcf.forEach(_bdb,function(w,i){w.set("value",_bdc[i]);});}}}},getValues:function(){_bd1.deprecated(this.declaredClass+"::getValues() is deprecated. Use get('value') instead.","","2.0");return this.get("value");},_getValueAttr:function(){var obj={};_bcf.forEach(this._getDescendantFormWidgets(),function(_bdd){var name=_bdd.name;if(!name||_bdd.disabled){return;}var _bde=_bdd.get("value");if(typeof _bdd.checked=="boolean"){if(/Radio/.test(_bdd.declaredClass)){if(_bde!==false){lang.setObject(name,_bde,obj);}else{_bde=lang.getObject(name,false,obj);if(_bde===undefined){lang.setObject(name,null,obj);}}}else{var ary=lang.getObject(name,false,obj);if(!ary){ary=[];lang.setObject(name,ary,obj);}if(_bde!==false){ary.push(_bde);}}}else{var prev=lang.getObject(name,false,obj);if(typeof prev!="undefined"){if(lang.isArray(prev)){prev.push(_bde);}else{lang.setObject(name,[prev,_bde],obj);}}else{lang.setObject(name,_bde,obj);}}});return obj;},isValid:function(){return this.state=="";},onValidStateChange:function(){},_getState:function(){var _bdf=_bcf.map(this._descendants,function(w){return w.get("state")||"";});return _bcf.indexOf(_bdf,"Error")>=0?"Error":_bcf.indexOf(_bdf,"Incomplete")>=0?"Incomplete":"";},disconnectChildren:function(){},connectChildren:function(_be0){this._descendants=this._getDescendantFormWidgets();_bcf.forEach(this._descendants,function(_be1){if(!_be1._started){_be1.startup();}});if(!_be0){this._onChildChange();}},_onChildChange:function(attr){if(!attr||attr=="state"||attr=="disabled"){this._set("state",this._getState());}if(!attr||attr=="value"||attr=="disabled"||attr=="checked"){if(this._onChangeDelayTimer){this._onChangeDelayTimer.remove();}this._onChangeDelayTimer=this.defer(function(){delete this._onChangeDelayTimer;this._set("value",this.get("value"));},10);}},startup:function(){this.inherited(arguments);this._descendants=this._getDescendantFormWidgets();this.value=this.get("value");this.state=this._getState();var self=this;this.own(on(this.containerNode,"attrmodified-state, attrmodified-disabled, attrmodified-value, attrmodified-checked",function(evt){if(evt.target==self.domNode){return;}self._onChildChange(evt.type.replace("attrmodified-",""));}));this.watch("state",function(attr,_be2,_be3){this.onValidStateChange(_be3=="");});},destroy:function(){this.inherited(arguments);}});});},"esri/Evented":function(){define(["dojo/_base/declare","dojo/Evented","dojo/has","esri"],function(_be4,_be5,has,esri){var _be6=_be4([_be5],{registerConnectEvents:function(_be7,_be8){if(!_be7){return;}var _be9,dict=this.constructor.connectEvents,_bea=(_be8&&_be8.normalized);if(!dict){dict=(this.constructor.connectEvents={});}for(_be9 in _be7){if(_be7.hasOwnProperty(_be9)){dict[_be9]=_be7[_be9];if(_bea){dict[_be9].normalized=true;}}}},on:function(type,_beb){var _bec=this.constructor.connectEvents,_bed=_bec&&_bec[type];if(_bed){var _bee=function(){var evt,i,_bef;if(_bed.normalized){evt=arguments[0];}else{_bef=_bed.length-1;evt={};for(i=1;i<=_bef;i++){evt[_bed[i]]=arguments[i-1];}}_beb.call(this,evt);};return _be5.prototype.on.apply(this,[_bed[0],_bee]);}else{return this.inherited(arguments);}}});if(has("extend-esri")){esri.Evented=_be6;}return _be6;});},"esri/toolbars/_toolbar":function(){define(["dijit","dojo","dojox"],function(_bf0,dojo,_bf1){dojo.provide("esri.toolbars._toolbar");dojo.declare("esri.toolbars._Toolbar",null,{constructor:function(map){this.map=map;},_cursors:{"move":"pointer","move-v":"pointer","move-gv":"pointer","box0":"nw-resize","box1":"n-resize","box2":"ne-resize","box3":"e-resize","box4":"se-resize","box5":"s-resize","box6":"sw-resize","box7":"w-resize","box8":"pointer"},_deactivateMapTools:function(nav,_bf2,_bf3,_bf4){var map=this.map;if(nav){this._mapNavState={isDoubleClickZoom:map.isDoubleClickZoom,isClickRecenter:map.isClickRecenter,isPan:map.isPan,isRubberBandZoom:map.isRubberBandZoom,isKeyboardNavigation:map.isKeyboardNavigation,isScrollWheelZoom:map.isScrollWheelZoom};map.disableDoubleClickZoom();map.disableClickRecenter();map.disablePan();map.disableRubberBandZoom();map.disableKeyboardNavigation();}if(_bf2){map.hideZoomSlider();}if(_bf3){map.hidePanArrows();}if(_bf4){map.graphics.disableMouseEvents();}},_activateMapTools:function(nav,_bf5,_bf6,_bf7){var map=this.map,_bf8=this._mapNavState;if(nav&&_bf8){if(_bf8.isDoubleClickZoom){map.enableDoubleClickZoom();}if(_bf8.isClickRecenter){map.enableClickRecenter();}if(_bf8.isPan){map.enablePan();}if(_bf8.isRubberBandZoom){map.enableRubberBandZoom();}if(_bf8.isKeyboardNavigation){map.enableKeyboardNavigation();}if(_bf8.isScrollWheelZoom){map.enableScrollWheelZoom();}}if(_bf5){map.showZoomSlider();}if(_bf6){map.showPanArrows();}if(_bf7){map.graphics.enableMouseEvents();}}});});},"dijit/layout/ContentPane":function(){define("dijit/layout/ContentPane",["dojo/_base/kernel","dojo/_base/lang","../_Widget","../_Container","./_ContentPaneResizeMixin","dojo/string","dojo/html","dojo/i18n!../nls/loading","dojo/_base/array","dojo/_base/declare","dojo/_base/Deferred","dojo/dom","dojo/dom-attr","dojo/_base/xhr","dojo/i18n","dojo/when"],function(_bf9,lang,_bfa,_bfb,_bfc,_bfd,html,_bfe,_bff,_c00,_c01,dom,_c02,xhr,i18n,when){return _c00("dijit.layout.ContentPane",[_bfa,_bfb,_bfc],{href:"",content:"",extractContent:false,parseOnLoad:true,parserScope:_bf9._scopeName,preventCache:false,preload:false,refreshOnShow:false,loadingMessage:"<span class='dijitContentPaneLoading'><span class='dijitInline dijitIconLoading'></span>${loadingState}</span>",errorMessage:"<span class='dijitContentPaneError'><span class='dijitInline dijitIconError'></span>${errorState}</span>",isLoaded:false,baseClass:"dijitContentPane",ioArgs:{},onLoadDeferred:null,_setTitleAttr:null,stopParser:true,template:false,create:function(_c03,_c04){if((!_c03||!_c03.template)&&_c04&&!("href" in _c03)&&!("content" in _c03)){_c04=dom.byId(_c04);var df=_c04.ownerDocument.createDocumentFragment();while(_c04.firstChild){df.appendChild(_c04.firstChild);}_c03=lang.delegate(_c03,{content:df});}this.inherited(arguments,[_c03,_c04]);},postMixInProperties:function(){this.inherited(arguments);var _c05=i18n.getLocalization("dijit","loading",this.lang);this.loadingMessage=_bfd.substitute(this.loadingMessage,_c05);this.errorMessage=_bfd.substitute(this.errorMessage,_c05);},buildRendering:function(){this.inherited(arguments);if(!this.containerNode){this.containerNode=this.domNode;}this.domNode.title="";if(!_c02.get(this.domNode,"role")){this.domNode.setAttribute("role","group");}},startup:function(){this.inherited(arguments);if(this._contentSetter){_bff.forEach(this._contentSetter.parseResults,function(obj){if(!obj._started&&!obj._destroyed&&lang.isFunction(obj.startup)){obj.startup();obj._started=true;}},this);}},_startChildren:function(){_bff.forEach(this.getChildren(),function(obj){if(!obj._started&&!obj._destroyed&&lang.isFunction(obj.startup)){obj.startup();obj._started=true;}});if(this._contentSetter){_bff.forEach(this._contentSetter.parseResults,function(obj){if(!obj._started&&!obj._destroyed&&lang.isFunction(obj.startup)){obj.startup();obj._started=true;}},this);}},setHref:function(href){_bf9.deprecated("dijit.layout.ContentPane.setHref() is deprecated. Use set('href', ...) instead.","","2.0");return this.set("href",href);},_setHrefAttr:function(href){this.cancel();this.onLoadDeferred=new _c01(lang.hitch(this,"cancel"));this.onLoadDeferred.then(lang.hitch(this,"onLoad"));this._set("href",href);if(this.preload||(this._created&&this._isShown())){this._load();}else{this._hrefChanged=true;}return this.onLoadDeferred;},setContent:function(data){_bf9.deprecated("dijit.layout.ContentPane.setContent() is deprecated.  Use set('content', ...) instead.","","2.0");this.set("content",data);},_setContentAttr:function(data){this._set("href","");this.cancel();this.onLoadDeferred=new _c01(lang.hitch(this,"cancel"));if(this._created){this.onLoadDeferred.then(lang.hitch(this,"onLoad"));}this._setContent(data||"");this._isDownloaded=false;return this.onLoadDeferred;},_getContentAttr:function(){return this.containerNode.innerHTML;},cancel:function(){if(this._xhrDfd&&(this._xhrDfd.fired==-1)){this._xhrDfd.cancel();}delete this._xhrDfd;this.onLoadDeferred=null;},destroy:function(){this.cancel();this.inherited(arguments);},destroyRecursive:function(_c06){if(this._beingDestroyed){return;}this.inherited(arguments);},_onShow:function(){this.inherited(arguments);if(this.href){if(!this._xhrDfd&&(!this.isLoaded||this._hrefChanged||this.refreshOnShow)){return this.refresh();}}},refresh:function(){this.cancel();this.onLoadDeferred=new _c01(lang.hitch(this,"cancel"));this.onLoadDeferred.then(lang.hitch(this,"onLoad"));this._load();return this.onLoadDeferred;},_load:function(){this._setContent(this.onDownloadStart(),true);var self=this;var _c07={preventCache:(this.preventCache||this.refreshOnShow),url:this.href,handleAs:"text"};if(lang.isObject(this.ioArgs)){lang.mixin(_c07,this.ioArgs);}var hand=(this._xhrDfd=(this.ioMethod||xhr.get)(_c07)),_c08;hand.then(function(html){_c08=html;try{self._isDownloaded=true;return self._setContent(html,false);}catch(err){self._onError("Content",err);}},function(err){if(!hand.canceled){self._onError("Download",err);}delete self._xhrDfd;return err;}).then(function(){self.onDownloadEnd();delete self._xhrDfd;return _c08;});delete this._hrefChanged;},_onLoadHandler:function(data){this._set("isLoaded",true);try{this.onLoadDeferred.resolve(data);}catch(e){console.error("Error "+this.widgetId+" running custom onLoad code: "+e.message);}},_onUnloadHandler:function(){this._set("isLoaded",false);try{this.onUnload();}catch(e){console.error("Error "+this.widgetId+" running custom onUnload code: "+e.message);}},destroyDescendants:function(_c09){if(this.isLoaded){this._onUnloadHandler();}var _c0a=this._contentSetter;_bff.forEach(this.getChildren(),function(_c0b){if(_c0b.destroyRecursive){_c0b.destroyRecursive(_c09);}else{if(_c0b.destroy){_c0b.destroy(_c09);}}_c0b._destroyed=true;});if(_c0a){_bff.forEach(_c0a.parseResults,function(_c0c){if(!_c0c._destroyed){if(_c0c.destroyRecursive){_c0c.destroyRecursive(_c09);}else{if(_c0c.destroy){_c0c.destroy(_c09);}}_c0c._destroyed=true;}});delete _c0a.parseResults;}if(!_c09){html._emptyNode(this.containerNode);}delete this._singleChild;},_setContent:function(cont,_c0d){this.destroyDescendants();var _c0e=this._contentSetter;if(!(_c0e&&_c0e instanceof html._ContentSetter)){_c0e=this._contentSetter=new html._ContentSetter({node:this.containerNode,_onError:lang.hitch(this,this._onError),onContentError:lang.hitch(this,function(e){var _c0f=this.onContentError(e);try{this.containerNode.innerHTML=_c0f;}catch(e){console.error("Fatal "+this.id+" could not change content due to "+e.message,e);}})});}var _c10=lang.mixin({cleanContent:this.cleanContent,extractContent:this.extractContent,parseContent:!cont.domNode&&this.parseOnLoad,parserScope:this.parserScope,startup:false,dir:this.dir,lang:this.lang,textDir:this.textDir},this._contentSetterParams||{});var p=_c0e.set((lang.isObject(cont)&&cont.domNode)?cont.domNode:cont,_c10);var self=this;return when(p&&p.then?p:_c0e.parseDeferred,function(){delete self._contentSetterParams;if(!_c0d){if(self._started){self._startChildren();self._scheduleLayout();}self._onLoadHandler(cont);}});},_onError:function(type,err,_c11){this.onLoadDeferred.reject(err);var _c12=this["on"+type+"Error"].call(this,err);if(_c11){console.error(_c11,err);}else{if(_c12){this._setContent(_c12,true);}}},onLoad:function(){},onUnload:function(){},onDownloadStart:function(){return this.loadingMessage;},onContentError:function(){},onDownloadError:function(){return this.errorMessage;},onDownloadEnd:function(){}});});},"esri/TouchEvents":function(){define(["dojo/_base/declare","dojo/_base/html","dojo/_base/lang","dojo/_base/sniff","dojo/dom","esri","esri/Evented","esri/utils","esri/geometry"],function(_c13,html,lang,has,dom,esri,_c14){var _c15=esri.geometry;var _c16=_c13([_c14],{tapRadius:8,doubleTapRadius:10,tapStartTolerance:50,doubleTapDuration:300,map:null,constructor:function(node,_c17){this.registerConnectEvents({"basic-tap":["BasicTap"],"click":["Click"],"double-click":["DblClick"],"double-tap":["DoubleTap"],"mouse-down":["MouseDown"],"mouse-out":["MouseOut"],"mouse-over":["MouseOver"],"mouse-up":["MouseUp"],"pinch-end":["PinchEnd"],"pinch-move":["PinchMove"],"pinch-start":["PinchStart"],"processed-double-tap":["ProcessedDoubleTap"],"processed-tap":["ProcessedTap"],"swipe-end":["SwipeEnd"],"swipe-move":["SwipeMove"],"swipe-start":["SwipeStart"],"tap":["Tap"],"two-finger-tap":["TwoFingerTap"]},{normalized:true});this.node=node;lang.mixin(this,_c17);html.setSelectable(node,false);this._touchStart=lang.hitch(this,this._touchStart);this._touchMove=lang.hitch(this,this._touchMove);this._touchEnd=lang.hitch(this,this._touchEnd);this._touchCancel=lang.hitch(this,this._touchCancel);node.addEventListener("touchstart",this._touchStart,false);node.addEventListener("touchmove",this._touchMove,false);node.addEventListener("touchend",this._touchEnd,false);node.addEventListener("touchcancel",this._touchCancel,false);if(this.map){this._mouseOver=lang.hitch(this,this._mouseOver);this._mouseOut=lang.hitch(this,this._mouseOut);this._mouseDown=lang.hitch(this,this._mouseDown);this._mouseUp=lang.hitch(this,this._mouseUp);this._mouseClick=lang.hitch(this,this._mouseClick);node.addEventListener("mouseover",this._mouseOver,false);node.addEventListener("mouseout",this._mouseOut,false);node.addEventListener("mousedown",this._mouseDown,false);node.addEventListener("mouseup",this._mouseUp,false);node.addEventListener("click",this._mouseClick,false);}this._numTouches=0;this._nodeTouches=[];this._touches={};this._touchIds=[];this._taps=[];this._immediate=false;},_touchStart:function(_c18){var _c19=this._touches,i,len=_c18.changedTouches.length,_c1a,info,_c1b,_c1c,ts=(new Date()).getTime();if(has("android")&&has("safari")&&_c18.targetTouches.length===1&&_c18.touches.length===_c18.targetTouches.length&&_c18.targetTouches.length===_c18.changedTouches.length&&_c18.changedTouches[0].identifier===0&&_c19[_c18.changedTouches[0].identifier]){return;}this._addTouch(_c18);for(i=0;i<len;i++){_c1a=_c18.changedTouches[i];info=(_c19[_c1a.identifier]={});info.startX=_c1a.pageX;info.startY=_c1a.pageY;info.startTS=ts;if(this._touchIds.indexOf(_c1a.identifier)===-1){this._touchIds.push(_c1a.identifier);}}if(this._swipeActive){_c1b=this._nodeTouches[0];}if(this._pinchActive){_c1c=this._nodeTouches[1];}if(this._numTouches===1){if(this._swipeActive){this._swipeActive=false;this._fire("onSwipeEnd",this._processTouchEvent(_c18,_c1b));}else{if(this._pinchActive){this._pinchActive=false;this._fire("onPinchEnd",this._processTouchEvent(_c18,[_c1b,_c1c]));}}}else{if(this._numTouches===2){if(this._swipeActive){if(_c1b){info=_c19[this._touchIds[0]];info.startX=_c1b.pageX;info.startY=_c1b.pageY;info.moved=false;}this._swipeActive=false;this._fire("onSwipeEnd",this._processTouchEvent(_c18,_c1b));}}else{if(this._swipeActive){this._swipeActive=false;this._fire("onSwipeEnd",this._processTouchEvent(_c18,_c1b));}else{if(this._pinchActive){this._pinchActive=false;this._fire("onPinchEnd",this._processTouchEvent(_c18,[_c1b,_c1c]));}}}}},_touchMove:function(_c1d){_c1d.preventDefault();this._updateTouch(_c1d);var _c1e=this._touches,i,len=_c1d.changedTouches.length,_c1f,info,dx,dy,_c20;if(has("android")&&has("safari")&&_c1d.targetTouches.length===1&&_c1d.touches.length===_c1d.targetTouches.length&&_c1d.targetTouches.length===_c1d.changedTouches.length&&_c1d.changedTouches[0].identifier===0&&_c1e[_c1d.changedTouches[0].identifier]&&this._touchIds.length>1){return;}for(i=0;i<len;i++){_c1f=_c1d.changedTouches[i];info=_c1e[_c1f.identifier];if(!info){continue;}dx=Math.abs(_c1f.pageX-info.startX);dy=Math.abs(_c1f.pageY-info.startY);if(!info.moved&&((dx>=this.tapRadius)||(dy>=this.tapRadius))){info.moved=info.absMoved=true;}_c20=_c20?_c20:info.moved;}if(this._numTouches===1){var _c21=_c1d.changedTouches[0];if(!this._swipeActive){if(_c20){this._swipeActive=true;this._fire("onSwipeStart",this._processTouchEvent(_c1d,_c21));}}else{this._fire("onSwipeMove",this._processTouchEvent(_c1d,_c21));}}else{if(this._numTouches===2){var _c22=this._nodeTouches[0],_c23=this._nodeTouches[1];if(!this._pinchActive){if(_c20){var _c24=_c1e[_c22.identifier],_c25=_c1e[_c23.identifier],_c26=Math.abs(_c24.startX-_c25.startX),_c27=Math.abs(_c24.startY-_c25.startY),_c28=Math.sqrt((_c26*_c26)+(_c27*_c27)),_c29=Math.abs(_c22.pageX-_c23.pageX),_c2a=Math.abs(_c22.pageY-_c23.pageY),_c2b=Math.sqrt((_c29*_c29)+(_c2a*_c2a));if(Math.abs(_c2b-_c28)>=(2*this.tapRadius)){this._pinchActive=true;this._fire("onPinchStart",this._processTouchEvent(_c1d,[_c22,_c23]));}}}else{this._fire("onPinchMove",this._processTouchEvent(_c1d,[_c22,_c23]));}}}},_touchEnd:function(_c2c){this._removeTouch(_c2c);var _c2d=this._touches,_c2e=_c2c.changedTouches,i,len=_c2e.length,_c2f,info,ts=(new Date()).getTime(),ids=this._touchIds;for(i=0;i<len;i++){info=_c2d[_c2e[i].identifier];if(!info){continue;}if(info.absMoved){_c2f=true;}info.pageX=_c2e[i].pageX;info.pageY=_c2e[i].pageY;info.endTS=ts;}if(this._numTouches===0){this._touches={};this._touchIds=[];if(this._swipeActive){this._swipeActive=false;this._fire("onSwipeEnd",this._processTouchEvent(_c2c,_c2e[0]));}else{if(this._pinchActive){this._pinchActive=false;this._fire("onPinchEnd",this._processTouchEvent(_c2c,_c2e));}else{if(!_c2f){var _c30=Infinity,_c31=-Infinity,_c32=Infinity,_c33=-Infinity,_c34=this.tapStartTolerance,_c35=[],_c36=true;for(i=0;i<ids.length;i++){info=_c2d[ids[i]];_c35.push(info);if(info.startTS<_c30){_c30=info.startTS;}if(info.startTS>_c31){_c31=info.startTS;}if(info.endTS<_c32){_c32=info.endTS;}if(info.endTS>_c33){_c33=info.endTS;}delete _c2d[ids[i]];}if(_c35.length===1&&_c2e[0]){var dx=Math.abs(_c2e[0].pageX-_c35[0].startX),dy=Math.abs(_c2e[0].pageY-_c35[0].startY);if((dx>=this.tapRadius)||(dy>=this.tapRadius)){_c36=false;}}if(_c36&&Math.abs(_c31-_c30)<=_c34&&Math.abs(_c33-_c32)<=_c34){this._basicTap(_c2c,_c35);}}}}}else{if(this._numTouches===1){if(this._pinchActive){var _c37=this._nodeTouches[0];info=_c2d[_c37.identifier];info.startX=_c37.pageX;info.startY=_c37.pageY;info.moved=false;this._pinchActive=false;this._fire("onPinchEnd",this._processTouchEvent(_c2c,[_c2e[0],_c37]));}}}},_touchCancel:function(_c38){if(this._numTouches){this._touchEnd(_c38);}},_basicTap:function(_c39,_c3a){var ts=(new Date()).getTime(),self=this;_c39=this._processTouchEvent(_c39,_c3a);this._taps.push({touchInfos:_c3a,ts:ts,event:_c39});if(this._taps.length>2){this._taps.shift();}this._fire("onBasicTap",_c39);clearTimeout(this._tapTimer);if(this._immediate){this._analyzeTap(true);}else{var _c3b=(this._taps.length===2)?(this.doubleTapDuration/2):this.doubleTapDuration;this._tapTimer=setTimeout(function(){var that=self;self=null;clearTimeout(that._tapTimer);that._analyzeTap();},_c3b);}},_analyzeTap:function(_c3c){var taps=this._taps,_c3d=taps[0],_c3e=taps[1],_c3f=_c3d.touchInfos,_c40=_c3e&&_c3e.touchInfos;if(!taps.length){return;}if(!_c3c){this._taps=[];}if(_c3d&&_c3e){if(_c3f.length===_c40.length){if((_c3e.ts-_c3d.ts)<=this.doubleTapDuration){var _c41,dx,dy;if(_c3f.length===1){dx=Math.abs(_c3f[0].startX-_c40[0].startX);dy=Math.abs(_c3f[0].startY-_c40[0].startY);_c41=(dx<=this.doubleTapRadius)&&(dy<=this.doubleTapRadius);}else{_c41=true;}if(_c41){this._processedDoubleTap(taps);}else{this._processedTap(_c3e);}}else{this._processedTap(_c3e);}}else{this._processedTap(_c3e);}}else{this._processedTap(_c3d||_c3e);}},_processedTap:function(tap){var _c42=tap.event;this._fire("onProcessedTap",_c42);if(tap.touchInfos.length===1){this._fire("onTap",this._fixEvent(_c42));}else{if(tap.touchInfos.length===2){this._fire("onTwoFingerTap",_c42);}}},_processedDoubleTap:function(taps){var _c43=(taps[1].touchInfos.length===1),_c44,evts;if(_c43){_c44=[this._fixEvent(taps[0].event),this._fixEvent(taps[1].event)];_c44[1].relatedEvents=_c44;}evts=[taps[0].event,taps[1].event];evts[1].relatedEvents=evts;this._fire("onProcessedDoubleTap",evts[1]);if(_c43){this._fire("onDoubleTap",_c44[1]);this._fire("onDblClick",_c44[1]);}},_addTouch:function(_c45){var i,_c46=_c45.changedTouches,_c47=this._nodeTouches;this._numTouches+=_c46.length;for(i=0;i<_c46.length;i++){_c47.push(_c46[i]);}for(i=_c47.length-1;i>=0;i--){if(!dom.isDescendant(_c47[i].target,document.body)){_c47.splice(i,1);this._numTouches--;}}if(this._numTouches<0){this._numTouches=0;}},_removeTouch:function(_c48){var i,_c49=[],_c4a=[],_c4b=_c48.changedTouches,_c4c=this._nodeTouches;this._numTouches-=_c4b.length;if(this._numTouches<0){this._numTouches=0;}for(i=0;i<_c4b.length;i++){_c49.push(_c4b[i].identifier);}for(i=_c4c.length-1;i>=0;i--){if(_c49.indexOf(_c4c[i].identifier)!==-1){_c4a.push(_c4c.splice(i,1)[0]);}}return _c4a;},_updateTouch:function(_c4d){var i,ids=[],idx,_c4e=_c4d.changedTouches,_c4f=this._nodeTouches;for(i=0;i<_c4e.length;i++){ids.push(_c4e[i].identifier);}for(i=0;i<_c4f.length;i++){idx=ids.indexOf(_c4f[i].identifier);if(idx!==-1){_c4f.splice(i,1,_c4e[idx]);}}},_mouseOver:function(_c50){this._fire("onMouseOver",this._processMouseEvent(_c50));},_mouseOut:function(_c51){this._fire("onMouseOut",this._processMouseEvent(_c51));},_mouseDown:function(_c52){this._fire("onMouseDown",this._processMouseEvent(_c52));},_mouseUp:function(_c53){this._fire("onMouseUp",this._processMouseEvent(_c53));},_mouseClick:function(_c54){this._fire("onClick",this._processMouseEvent(_c54));},_fire:function(_c55,evt){if(this[_c55]){this[_c55](evt);}if(this.map){if(this.map[_c55]){this.map[_c55](evt);}}},_fixEvent:function(_c56){var _c57={},i;for(i in _c56){_c57[i]=_c56[i];}if(this.map){_c57.screenPoint=_c57.screenPoints[0];_c57.mapPoint=_c57.mapPoints[0];}return _c57;},_processTouchEvent:function(evt,_c58){var map=this.map,pos=map&&map.position,_c59=0;if(pos&&_c58){if(lang.isArray(_c58)){var i,_c5a;evt.screenPoints=[];evt.mapPoints=[];for(i=0;i<_c58.length;i++){if(_c58[i]){_c5a=new _c15.ScreenPoint(_c58[i].pageX-pos.x,_c58[i].pageY-pos.y);evt.screenPoints.push(_c5a);evt.mapPoints.push(map.extent?map.toMap(_c5a):new _c15.Point());}else{_c59++;}}}else{evt.screenPoint=new _c15.ScreenPoint(_c58.pageX-pos.x,_c58.pageY-pos.y);evt.mapPoint=map.extent?map.toMap(evt.screenPoint):new _c15.Point();}}evt.numPoints=_c58?(lang.isArray(_c58)?(_c58.length-_c59):1):0;return evt;},_processMouseEvent:function(evt){var map=this.map,pos=map&&map.position;if(pos){evt.screenPoint=new _c15.ScreenPoint(evt.pageX-pos.x,evt.pageY-pos.y);evt.mapPoint=map.extent?map.toMap(evt.screenPoint):new _c15.Point();}return evt;},setImmediateTap:function(_c5b){this._immediate=_c5b;},destroy:function(){var node=this.node;node.removeEventListener("touchstart",this._touchStart,false);node.removeEventListener("touchmove",this._touchMove,false);node.removeEventListener("touchend",this._touchEnd,false);node.removeEventListener("touchcancel",this._touchCancel,false);if(this.map){node.removeEventListener("mouseover",this._mouseOver,false);node.removeEventListener("mouseout",this._mouseOut,false);node.removeEventListener("mousedown",this._mouseDown,false);node.removeEventListener("mouseup",this._mouseUp,false);node.removeEventListener("click",this._mouseClick,false);}html.setSelectable(node,true);clearTimeout(this._tapTimer);this.node=this.map=this._numTouches=this._nodeTouches=this._touches=this._touchIds=this._taps=null;}});if(has("extend-esri")){esri.TouchEvents=_c16;}return _c16;});},"url:dijit/form/templates/ValidationTextBox.html":"<div class=\"dijit dijitReset dijitInline dijitLeft\"\n\tid=\"widget_${id}\" role=\"presentation\"\n\t><div class='dijitReset dijitValidationContainer'\n\t\t><input class=\"dijitReset dijitInputField dijitValidationIcon dijitValidationInner\" value=\"&#935; \" type=\"text\" tabIndex=\"-1\" readonly=\"readonly\" role=\"presentation\"\n\t/></div\n\t><div class=\"dijitReset dijitInputField dijitInputContainer\"\n\t\t><input class=\"dijitReset dijitInputInner\" data-dojo-attach-point='textbox,focusNode' autocomplete=\"off\"\n\t\t\t${!nameAttrSetting} type='${type}'\n\t/></div\n></div>\n","dijit/layout/utils":function(){define("dijit/layout/utils",["dojo/_base/array","dojo/dom-class","dojo/dom-geometry","dojo/dom-style","dojo/_base/lang","../main"],function(_c5c,_c5d,_c5e,_c5f,lang,_c60){var _c61=lang.getObject("layout",true,_c60);_c61.marginBox2contentBox=function(node,mb){var cs=_c5f.getComputedStyle(node);var me=_c5e.getMarginExtents(node,cs);var pb=_c5e.getPadBorderExtents(node,cs);return {l:_c5f.toPixelValue(node,cs.paddingLeft),t:_c5f.toPixelValue(node,cs.paddingTop),w:mb.w-(me.w+pb.w),h:mb.h-(me.h+pb.h)};};function _c62(word){return word.substring(0,1).toUpperCase()+word.substring(1);};function size(_c63,dim){var _c64=_c63.resize?_c63.resize(dim):_c5e.setMarginBox(_c63.domNode,dim);if(_c64){lang.mixin(_c63,_c64);}else{lang.mixin(_c63,_c5e.getMarginBox(_c63.domNode));lang.mixin(_c63,dim);}};_c61.layoutChildren=function(_c65,dim,_c66,_c67,_c68){dim=lang.mixin({},dim);_c5d.add(_c65,"dijitLayoutContainer");_c66=_c5c.filter(_c66,function(item){return item.region!="center"&&item.layoutAlign!="client";}).concat(_c5c.filter(_c66,function(item){return item.region=="center"||item.layoutAlign=="client";}));_c5c.forEach(_c66,function(_c69){var elm=_c69.domNode,pos=(_c69.region||_c69.layoutAlign);if(!pos){throw new Error("No region setting for "+_c69.id);}var _c6a=elm.style;_c6a.left=dim.l+"px";_c6a.top=dim.t+"px";_c6a.position="absolute";_c5d.add(elm,"dijitAlign"+_c62(pos));var _c6b={};if(_c67&&_c67==_c69.id){_c6b[_c69.region=="top"||_c69.region=="bottom"?"h":"w"]=_c68;}if(pos=="top"||pos=="bottom"){_c6b.w=dim.w;size(_c69,_c6b);dim.h-=_c69.h;if(pos=="top"){dim.t+=_c69.h;}else{_c6a.top=dim.t+dim.h+"px";}}else{if(pos=="left"||pos=="right"){_c6b.h=dim.h;size(_c69,_c6b);dim.w-=_c69.w;if(pos=="left"){dim.l+=_c69.w;}else{_c6a.left=dim.l+dim.w+"px";}}else{if(pos=="client"||pos=="center"){size(_c69,dim);}}}});};return {marginBox2contentBox:_c61.marginBox2contentBox,layoutChildren:_c61.layoutChildren};});},"url:dijit/form/templates/TextBox.html":"<div class=\"dijit dijitReset dijitInline dijitLeft\" id=\"widget_${id}\" role=\"presentation\"\n\t><div class=\"dijitReset dijitInputField dijitInputContainer\"\n\t\t><input class=\"dijitReset dijitInputInner\" data-dojo-attach-point='textbox,focusNode' autocomplete=\"off\"\n\t\t\t${!nameAttrSetting} type='${type}'\n\t/></div\n></div>\n","esri/IdentityManager":function(){define(["dijit","dojo","dojox","dojo/require!dijit/Dialog,dijit/form/Button,dijit/form/ValidationTextBox,esri/utils,esri/IdentityManagerBase"],function(_c6c,dojo,_c6d){dojo.provide("esri.IdentityManager");dojo.require("dijit.Dialog");dojo.require("dijit.form.Button");dojo.require("dijit.form.ValidationTextBox");dojo.require("esri.utils");dojo.require("esri.IdentityManagerBase");dojo.declare("esri.IdentityManager",[esri.IdentityManagerBase],{constructor:function(_c6e){dojo.mixin(this,_c6e);},_dialogContent:"<div class='dijitDialogPaneContentArea'>"+"<div style='padding-bottom: 5px; word-wrap: break-word;'>${info}</div>"+"<div style='margin: 0px; padding: 0px; height: 10px;'></div>"+"<div class='esriErrorMsg' style='display: none; color: white; background-color: #D46464; text-align: center; padding-top: 3px; padding-bottom: 3px;'>${invalidUser}</div>"+"<div style='margin: 0px; padding: 0px; height: 10px;'></div>"+"<table style='width: 100%;'>"+"<tr>"+"<td><label>${lblUser}</label><br/>"+"<input data-dojo-type='dijit.form.ValidationTextBox' data-dojo-props='type:\"text\", \"class\":\"esriIdUser\", required:true, trim:true, style:\"width: 100%;\"' /></td>"+"</tr>"+"<tr>"+"<td><label>${lblPwd}</label><br/>"+"<input data-dojo-type='dijit.form.ValidationTextBox' data-dojo-props='type:\"password\", \"class\":\"esriIdPwd\", required:true, style:\"width: 100%;\"' /></td>"+"</tr>"+"</table>"+"</div>"+"<div class='dijitDialogPaneActionBar'>"+"<button data-dojo-type='dijit.form.Button' data-dojo-props='type:\"button\", \"class\":\"esriIdSubmit\"'>${lblOk}</button>"+"<button data-dojo-type='dijit.form.Button' data-dojo-props='type:\"button\", \"class\":\"esriIdCancel\"'>${lblCancel}</button>"+"</div>",onDialogCreate:function(){},onDialogCancel:function(){},signIn:function(_c6f,_c70,_c71){if(!this._nls){this._nls=esri.bundle.identity;}if(!this._loginDialog){this._loginDialog=(this.dialog=this._createLoginDialog());this.onDialogCreate();}var dlg=this._loginDialog,_c72=_c71&&_c71.error,_c73=_c71&&_c71.token,dfd=new dojo.Deferred(function(){dlg.onCancel();});if(dlg.open){var err=new Error("BUSY");err.code="IdentityManager."+1;err.log=dojo.config.isDebug;dfd.errback(err);return dfd;}esri.hide(dlg.errMsg_);if(_c72){if(_c72.code==403&&_c73){dojo.attr(dlg.errMsg_,"innerHTML",this._nls.forbidden);esri.show(dlg.errMsg_);}}dlg.dfd_=dfd;dlg.serverInfo_=_c70;dlg.resUrl_=_c6f;dlg.admin_=_c71&&_c71.isAdmin;dojo.attr(dlg.resLink_,{"title":_c6f,"innerHTML":"("+(this.getResourceName(_c6f)||this._nls.lblItem)+")"});dojo.attr(dlg.serverLink_,{"title":_c70.server,"innerHTML":(_c70.server.toLowerCase().indexOf("arcgis.com")!==-1?"ArcGIS Online":_c70.server)+" "});dlg.txtPwd_.set("value","");dlg.show();return dfd;},_createLoginDialog:function(){var nls=this._nls,_c74=esri.substitute(nls,this._dialogContent);_c74=esri.substitute({resource:"<span class='resLink' style='word-wrap: break-word;'></span>",server:"<span class='serverLink' style='word-wrap: break-word;'></span>"},_c74);var dlg=new _c6c.Dialog({title:nls.title,content:_c74,"class":"esriSignInDialog",style:"width: 18em;",esriIdMgr_:this,keypressed_:function(evt){if(evt.charOrCode===dojo.keys.ENTER){this.execute_();}},execute_:function(){var usr=this.txtUser_.get("value"),pwd=this.txtPwd_.get("value"),dfd=this.dfd_,dlg=this;if(!usr||!pwd){return;}this.btnSubmit_.set("label",nls.lblSigning);var _c75=esri.id.findCredential(dlg.serverInfo_.server,usr),_c76=function(_c77){dlg.btnSubmit_.set("label",nls.lblOk);dlg.btnSubmit_.set("disabled",false);esri.hide(dlg.errMsg_);dlg.hide();_c6c.Dialog._DialogLevelManager.hide(dlg);var _c78=dlg.serverInfo_;dlg.dfd_=dlg.serverInfo_=dlg.generateDfd_=dlg.resUrl_=null;var _c79,_c7a,cred=_c75,ssl;if(_c77){_c79=_c77.token;_c7a=esri._isDefined(_c77.expires)?Number(_c77.expires):null;ssl=!!_c77.ssl;if(cred){cred.userId=usr;cred.token=_c79;cred.expires=_c7a;cred.validity=_c78.shortLivedTokenValidity;cred.ssl=ssl;}else{cred=new esri.Credential({userId:usr,server:_c78.server,token:_c79,expires:_c7a,ssl:ssl,isAdmin:dlg.admin_,validity:_c78.shortLivedTokenValidity});}}dfd.callback(cred);};if(_c75&&!_c75._enqueued){_c76();return;}dlg.btnSubmit_.set("disabled",true);dlg.generateDfd_=esri.id.generateToken(this.serverInfo_,{username:usr,password:pwd},{isAdmin:this.admin_}).addCallback(_c76).addErrback(function(_c7b){dlg.btnSubmit_.set("disabled",false);dlg.generateDfd_=null;dlg.btnSubmit_.set("label",nls.lblOk);dojo.attr(dlg.errMsg_,"innerHTML",(_c7b&&_c7b.code)?nls.invalidUser:nls.noAuthService);esri.show(dlg.errMsg_);});},cancel_:function(){if(dlg.generateDfd_){dlg.generateDfd_.cancel();}var dfd=dlg.dfd_,_c7c=dlg.resUrl_,_c7d=dlg.serverInfo_;dlg.btnSubmit_.set("disabled",false);dlg.dfd_=dlg.serverInfo_=dlg.generateDfd_=dlg.resUrl_=null;esri.hide(dlg.errMsg_);_c6c.Dialog._DialogLevelManager.hide(dlg);dlg.esriIdMgr_.onDialogCancel({resourceUrl:_c7c,serverInfo:_c7d});var err=new Error("ABORTED");err.code="IdentityManager."+2;err.log=dojo.config.isDebug;dfd.errback(err);}});var _c7e=dlg.domNode;dlg.txtUser_=_c6c.byNode(dojo.query(".esriIdUser",_c7e)[0]);dlg.txtPwd_=_c6c.byNode(dojo.query(".esriIdPwd",_c7e)[0]);dlg.btnSubmit_=_c6c.byNode(dojo.query(".esriIdSubmit",_c7e)[0]);dlg.btnCancel_=_c6c.byNode(dojo.query(".esriIdCancel",_c7e)[0]);dlg.resLink_=dojo.query(".resLink",_c7e)[0];dlg.serverLink_=dojo.query(".serverLink",_c7e)[0];dlg.errMsg_=dojo.query(".esriErrorMsg",_c7e)[0];dlg.connect(dlg.txtUser_,"onKeyPress",dlg.keypressed_);dlg.connect(dlg.txtPwd_,"onKeyPress",dlg.keypressed_);dlg.connect(dlg.btnSubmit_,"onClick",dlg.execute_);dlg.connect(dlg.btnCancel_,"onClick",dlg.onCancel);dlg.connect(dlg,"onCancel",dlg.cancel_);return dlg;}});esri.id=new esri.IdentityManager();});},"url:dijit/templates/Dialog.html":"<div class=\"dijitDialog\" role=\"dialog\" aria-labelledby=\"${id}_title\">\n\t<div data-dojo-attach-point=\"titleBar\" class=\"dijitDialogTitleBar\">\n\t\t<span data-dojo-attach-point=\"titleNode\" class=\"dijitDialogTitle\" id=\"${id}_title\"\n\t\t\t\trole=\"header\" level=\"1\"></span>\n\t\t<span data-dojo-attach-point=\"closeButtonNode\" class=\"dijitDialogCloseIcon\" data-dojo-attach-event=\"ondijitclick: onCancel\" title=\"${buttonCancel}\" role=\"button\" tabIndex=\"-1\">\n\t\t\t<span data-dojo-attach-point=\"closeText\" class=\"closeText\" title=\"${buttonCancel}\">x</span>\n\t\t</span>\n\t</div>\n\t<div data-dojo-attach-point=\"containerNode\" class=\"dijitDialogPaneContent\"></div>\n</div>\n","dojox/gfx/matrix":function(){define("dojox/gfx/matrix",["./_base","dojo/_base/lang"],function(g,lang){var m=g.matrix={};var _c7f={};m._degToRad=function(_c80){return _c7f[_c80]||(_c7f[_c80]=(Math.PI*_c80/180));};m._radToDeg=function(_c81){return _c81/Math.PI*180;};m.Matrix2D=function(arg){if(arg){if(typeof arg=="number"){this.xx=this.yy=arg;}else{if(arg instanceof Array){if(arg.length>0){var _c82=m.normalize(arg[0]);for(var i=1;i<arg.length;++i){var l=_c82,r=m.normalize(arg[i]);_c82=new m.Matrix2D();_c82.xx=l.xx*r.xx+l.xy*r.yx;_c82.xy=l.xx*r.xy+l.xy*r.yy;_c82.yx=l.yx*r.xx+l.yy*r.yx;_c82.yy=l.yx*r.xy+l.yy*r.yy;_c82.dx=l.xx*r.dx+l.xy*r.dy+l.dx;_c82.dy=l.yx*r.dx+l.yy*r.dy+l.dy;}lang.mixin(this,_c82);}}else{lang.mixin(this,arg);}}}};lang.extend(m.Matrix2D,{xx:1,xy:0,yx:0,yy:1,dx:0,dy:0});lang.mixin(m,{identity:new m.Matrix2D(),flipX:new m.Matrix2D({xx:-1}),flipY:new m.Matrix2D({yy:-1}),flipXY:new m.Matrix2D({xx:-1,yy:-1}),translate:function(a,b){if(arguments.length>1){return new m.Matrix2D({dx:a,dy:b});}return new m.Matrix2D({dx:a.x,dy:a.y});},scale:function(a,b){if(arguments.length>1){return new m.Matrix2D({xx:a,yy:b});}if(typeof a=="number"){return new m.Matrix2D({xx:a,yy:a});}return new m.Matrix2D({xx:a.x,yy:a.y});},rotate:function(_c83){var c=Math.cos(_c83);var s=Math.sin(_c83);return new m.Matrix2D({xx:c,xy:-s,yx:s,yy:c});},rotateg:function(_c84){return m.rotate(m._degToRad(_c84));},skewX:function(_c85){return new m.Matrix2D({xy:Math.tan(_c85)});},skewXg:function(_c86){return m.skewX(m._degToRad(_c86));},skewY:function(_c87){return new m.Matrix2D({yx:Math.tan(_c87)});},skewYg:function(_c88){return m.skewY(m._degToRad(_c88));},reflect:function(a,b){if(arguments.length==1){b=a.y;a=a.x;}var a2=a*a,b2=b*b,n2=a2+b2,xy=2*a*b/n2;return new m.Matrix2D({xx:2*a2/n2-1,xy:xy,yx:xy,yy:2*b2/n2-1});},project:function(a,b){if(arguments.length==1){b=a.y;a=a.x;}var a2=a*a,b2=b*b,n2=a2+b2,xy=a*b/n2;return new m.Matrix2D({xx:a2/n2,xy:xy,yx:xy,yy:b2/n2});},normalize:function(_c89){return (_c89 instanceof m.Matrix2D)?_c89:new m.Matrix2D(_c89);},isIdentity:function(_c8a){return _c8a.xx==1&&_c8a.xy==0&&_c8a.yx==0&&_c8a.yy==1&&_c8a.dx==0&&_c8a.dy==0;},clone:function(_c8b){var obj=new m.Matrix2D();for(var i in _c8b){if(typeof (_c8b[i])=="number"&&typeof (obj[i])=="number"&&obj[i]!=_c8b[i]){obj[i]=_c8b[i];}}return obj;},invert:function(_c8c){var M=m.normalize(_c8c),D=M.xx*M.yy-M.xy*M.yx;M=new m.Matrix2D({xx:M.yy/D,xy:-M.xy/D,yx:-M.yx/D,yy:M.xx/D,dx:(M.xy*M.dy-M.yy*M.dx)/D,dy:(M.yx*M.dx-M.xx*M.dy)/D});return M;},_multiplyPoint:function(_c8d,x,y){return {x:_c8d.xx*x+_c8d.xy*y+_c8d.dx,y:_c8d.yx*x+_c8d.yy*y+_c8d.dy};},multiplyPoint:function(_c8e,a,b){var M=m.normalize(_c8e);if(typeof a=="number"&&typeof b=="number"){return m._multiplyPoint(M,a,b);}return m._multiplyPoint(M,a.x,a.y);},multiplyRectangle:function(_c8f,rect){var M=m.normalize(_c8f);rect=rect||{x:0,y:0,width:0,height:0};if(m.isIdentity(M)){return {x:rect.x,y:rect.y,width:rect.width,height:rect.height};}var p0=m.multiplyPoint(M,rect.x,rect.y),p1=m.multiplyPoint(M,rect.x,rect.y+rect.height),p2=m.multiplyPoint(M,rect.x+rect.width,rect.y),p3=m.multiplyPoint(M,rect.x+rect.width,rect.y+rect.height),minx=Math.min(p0.x,p1.x,p2.x,p3.x),miny=Math.min(p0.y,p1.y,p2.y,p3.y),maxx=Math.max(p0.x,p1.x,p2.x,p3.x),maxy=Math.max(p0.y,p1.y,p2.y,p3.y);return {x:minx,y:miny,width:maxx-minx,height:maxy-miny};},multiply:function(_c90){var M=m.normalize(_c90);for(var i=1;i<arguments.length;++i){var l=M,r=m.normalize(arguments[i]);M=new m.Matrix2D();M.xx=l.xx*r.xx+l.xy*r.yx;M.xy=l.xx*r.xy+l.xy*r.yy;M.yx=l.yx*r.xx+l.yy*r.yx;M.yy=l.yx*r.xy+l.yy*r.yy;M.dx=l.xx*r.dx+l.xy*r.dy+l.dx;M.dy=l.yx*r.dx+l.yy*r.dy+l.dy;}return M;},_sandwich:function(_c91,x,y){return m.multiply(m.translate(x,y),_c91,m.translate(-x,-y));},scaleAt:function(a,b,c,d){switch(arguments.length){case 4:return m._sandwich(m.scale(a,b),c,d);case 3:if(typeof c=="number"){return m._sandwich(m.scale(a),b,c);}return m._sandwich(m.scale(a,b),c.x,c.y);}return m._sandwich(m.scale(a),b.x,b.y);},rotateAt:function(_c92,a,b){if(arguments.length>2){return m._sandwich(m.rotate(_c92),a,b);}return m._sandwich(m.rotate(_c92),a.x,a.y);},rotategAt:function(_c93,a,b){if(arguments.length>2){return m._sandwich(m.rotateg(_c93),a,b);}return m._sandwich(m.rotateg(_c93),a.x,a.y);},skewXAt:function(_c94,a,b){if(arguments.length>2){return m._sandwich(m.skewX(_c94),a,b);}return m._sandwich(m.skewX(_c94),a.x,a.y);},skewXgAt:function(_c95,a,b){if(arguments.length>2){return m._sandwich(m.skewXg(_c95),a,b);}return m._sandwich(m.skewXg(_c95),a.x,a.y);},skewYAt:function(_c96,a,b){if(arguments.length>2){return m._sandwich(m.skewY(_c96),a,b);}return m._sandwich(m.skewY(_c96),a.x,a.y);},skewYgAt:function(_c97,a,b){if(arguments.length>2){return m._sandwich(m.skewYg(_c97),a,b);}return m._sandwich(m.skewYg(_c97),a.x,a.y);}});g.Matrix2D=m.Matrix2D;return m;});},"dijit/_Container":function(){define("dijit/_Container",["dojo/_base/array","dojo/_base/declare","dojo/dom-construct"],function(_c98,_c99,_c9a){return _c99("dijit._Container",null,{buildRendering:function(){this.inherited(arguments);if(!this.containerNode){this.containerNode=this.domNode;}},addChild:function(_c9b,_c9c){var _c9d=this.containerNode;if(_c9c&&typeof _c9c=="number"){var _c9e=this.getChildren();if(_c9e&&_c9e.length>=_c9c){_c9d=_c9e[_c9c-1].domNode;_c9c="after";}}_c9a.place(_c9b.domNode,_c9d,_c9c);if(this._started&&!_c9b._started){_c9b.startup();}},removeChild:function(_c9f){if(typeof _c9f=="number"){_c9f=this.getChildren()[_c9f];}if(_c9f){var node=_c9f.domNode;if(node&&node.parentNode){node.parentNode.removeChild(node);}}},hasChildren:function(){return this.getChildren().length>0;},_getSiblingOfChild:function(_ca0,dir){var _ca1=this.getChildren(),idx=_c98.indexOf(this.getChildren(),_ca0);return _ca1[idx+dir];},getIndexOfChild:function(_ca2){return _c98.indexOf(this.getChildren(),_ca2);}});});},"dojo/html":function(){define(["./_base/kernel","./_base/lang","./_base/array","./_base/declare","./dom","./dom-construct","./parser"],function(_ca3,lang,_ca4,_ca5,dom,_ca6,_ca7){var html={};lang.setObject("dojo.html",html);var _ca8=0;html._secureForInnerHtml=function(cont){return cont.replace(/(?:\s*<!DOCTYPE\s[^>]+>|<title[^>]*>[\s\S]*?<\/title>)/ig,"");};html._emptyNode=_ca6.empty;html._setNodeContent=function(node,cont){_ca6.empty(node);if(cont){if(typeof cont=="string"){cont=_ca6.toDom(cont,node.ownerDocument);}if(!cont.nodeType&&lang.isArrayLike(cont)){for(var _ca9=cont.length,i=0;i<cont.length;i=_ca9==cont.length?i+1:0){_ca6.place(cont[i],node,"last");}}else{_ca6.place(cont,node,"last");}}return node;};html._ContentSetter=_ca5("dojo.html._ContentSetter",null,{node:"",content:"",id:"",cleanContent:false,extractContent:false,parseContent:false,parserScope:_ca3._scopeName,startup:true,constructor:function(_caa,node){lang.mixin(this,_caa||{});node=this.node=dom.byId(this.node||node);if(!this.id){this.id=["Setter",(node)?node.id||node.tagName:"",_ca8++].join("_");}},set:function(cont,_cab){if(undefined!==cont){this.content=cont;}if(_cab){this._mixin(_cab);}this.onBegin();this.setContent();var ret=this.onEnd();if(ret&&ret.then){return ret;}else{return this.node;}},setContent:function(){var node=this.node;if(!node){throw new Error(this.declaredClass+": setContent given no node");}try{node=html._setNodeContent(node,this.content);}catch(e){var _cac=this.onContentError(e);try{node.innerHTML=_cac;}catch(e){console.error("Fatal "+this.declaredClass+".setContent could not change content due to "+e.message,e);}}this.node=node;},empty:function(){if(this.parseDeferred){if(!this.parseDeferred.isResolved()){this.parseDeferred.cancel();}delete this.parseDeferred;}if(this.parseResults&&this.parseResults.length){_ca4.forEach(this.parseResults,function(w){if(w.destroy){w.destroy();}});delete this.parseResults;}html._emptyNode(this.node);},onBegin:function(){var cont=this.content;if(lang.isString(cont)){if(this.cleanContent){cont=html._secureForInnerHtml(cont);}if(this.extractContent){var _cad=cont.match(/<body[^>]*>\s*([\s\S]+)\s*<\/body>/im);if(_cad){cont=_cad[1];}}}this.empty();this.content=cont;return this.node;},onEnd:function(){if(this.parseContent){this._parse();}return this.node;},tearDown:function(){delete this.parseResults;delete this.parseDeferred;delete this.node;delete this.content;},onContentError:function(err){return "Error occurred setting content: "+err;},onExecError:function(err){return "Error occurred executing scripts: "+err;},_mixin:function(_cae){var _caf={},key;for(key in _cae){if(key in _caf){continue;}this[key]=_cae[key];}},_parse:function(){var _cb0=this.node;try{var _cb1={};_ca4.forEach(["dir","lang","textDir"],function(name){if(this[name]){_cb1[name]=this[name];}},this);var self=this;this.parseDeferred=_ca7.parse({rootNode:_cb0,noStart:!this.startup,inherited:_cb1,scope:this.parserScope}).then(function(_cb2){return self.parseResults=_cb2;});}catch(e){this._onError("Content",e,"Error parsing in _ContentSetter#"+this.id);}},_onError:function(type,err,_cb3){var _cb4=this["on"+type+"Error"].call(this,err);if(_cb3){console.error(_cb3,err);}else{if(_cb4){html._setNodeContent(this.node,_cb4,true);}}}});html.set=function(node,cont,_cb5){if(undefined==cont){console.warn("dojo.html.set: no cont argument provided, using empty string");cont="";}if(!_cb5){return html._setNodeContent(node,cont,true);}else{var op=new html._ContentSetter(lang.mixin(_cb5,{content:cont,node:node}));return op.set();}};return html;});},"dijit/form/ValidationTextBox":function(){require({cache:{"url:dijit/form/templates/ValidationTextBox.html":"<div class=\"dijit dijitReset dijitInline dijitLeft\"\n\tid=\"widget_${id}\" role=\"presentation\"\n\t><div class='dijitReset dijitValidationContainer'\n\t\t><input class=\"dijitReset dijitInputField dijitValidationIcon dijitValidationInner\" value=\"&#935; \" type=\"text\" tabIndex=\"-1\" readonly=\"readonly\" role=\"presentation\"\n\t/></div\n\t><div class=\"dijitReset dijitInputField dijitInputContainer\"\n\t\t><input class=\"dijitReset dijitInputInner\" data-dojo-attach-point='textbox,focusNode' autocomplete=\"off\"\n\t\t\t${!nameAttrSetting} type='${type}'\n\t/></div\n></div>\n"}});define("dijit/form/ValidationTextBox",["dojo/_base/declare","dojo/_base/kernel","dojo/i18n","./TextBox","../Tooltip","dojo/text!./templates/ValidationTextBox.html","dojo/i18n!./nls/validate"],function(_cb6,_cb7,i18n,_cb8,_cb9,_cba){var _cbb;return _cbb=_cb6("dijit.form.ValidationTextBox",_cb8,{templateString:_cba,required:false,promptMessage:"",invalidMessage:"$_unset_$",missingMessage:"$_unset_$",message:"",constraints:{},pattern:".*",regExp:"",regExpGen:function(){},state:"",tooltipPosition:[],_deprecateRegExp:function(attr,_cbc){if(_cbc!=_cbb.prototype[attr]){_cb7.deprecated("ValidationTextBox id="+this.id+", set('"+attr+"', ...) is deprecated.  Use set('pattern', ...) instead.","","2.0");this.set("pattern",_cbc);}},_setRegExpGenAttr:function(_cbd){this._deprecateRegExp("regExpGen",_cbd);this.regExpGen=this._getPatternAttr;},_setRegExpAttr:function(_cbe){this._deprecateRegExp("regExp",_cbe);},_setValueAttr:function(){this.inherited(arguments);this.validate(this.focused);},validator:function(_cbf,_cc0){return (new RegExp("^(?:"+this._getPatternAttr(_cc0)+")"+(this.required?"":"?")+"$")).test(_cbf)&&(!this.required||!this._isEmpty(_cbf))&&(this._isEmpty(_cbf)||this.parse(_cbf,_cc0)!==undefined);},_isValidSubset:function(){return this.textbox.value.search(this._partialre)==0;},isValid:function(){return this.validator(this.textbox.value,this.constraints);},_isEmpty:function(_cc1){return (this.trim?/^\s*$/:/^$/).test(_cc1);},getErrorMessage:function(){var _cc2=this.invalidMessage=="$_unset_$"?this.messages.invalidMessage:!this.invalidMessage?this.promptMessage:this.invalidMessage;var _cc3=this.missingMessage=="$_unset_$"?this.messages.missingMessage:!this.missingMessage?_cc2:this.missingMessage;return (this.required&&this._isEmpty(this.textbox.value))?_cc3:_cc2;},getPromptMessage:function(){return this.promptMessage;},_maskValidSubsetError:true,validate:function(_cc4){var _cc5="";var _cc6=this.disabled||this.isValid(_cc4);if(_cc6){this._maskValidSubsetError=true;}var _cc7=this._isEmpty(this.textbox.value);var _cc8=!_cc6&&_cc4&&this._isValidSubset();this._set("state",_cc6?"":(((((!this._hasBeenBlurred||_cc4)&&_cc7)||_cc8)&&this._maskValidSubsetError)?"Incomplete":"Error"));this.focusNode.setAttribute("aria-invalid",_cc6?"false":"true");if(this.state=="Error"){this._maskValidSubsetError=_cc4&&_cc8;_cc5=this.getErrorMessage(_cc4);}else{if(this.state=="Incomplete"){_cc5=this.getPromptMessage(_cc4);this._maskValidSubsetError=!this._hasBeenBlurred||_cc4;}else{if(_cc7){_cc5=this.getPromptMessage(_cc4);}}}this.set("message",_cc5);return _cc6;},displayMessage:function(_cc9){if(_cc9&&this.focused){_cb9.show(_cc9,this.domNode,this.tooltipPosition,!this.isLeftToRight());}else{_cb9.hide(this.domNode);}},_refreshState:function(){if(this._created){this.validate(this.focused);}this.inherited(arguments);},constructor:function(_cca){this.constraints={};this.baseClass+=" dijitValidationTextBox";},startup:function(){this.inherited(arguments);this._refreshState();},_setConstraintsAttr:function(_ccb){if(!_ccb.locale&&this.lang){_ccb.locale=this.lang;}this._set("constraints",_ccb);this._refreshState();},_getPatternAttr:function(_ccc){var p=this.pattern;var type=(typeof p).toLowerCase();if(type=="function"){p=this.pattern(_ccc||this.constraints);}if(p!=this._lastRegExp){var _ccd="";this._lastRegExp=p;if(p!=".*"){p.replace(/\\.|\[\]|\[.*?[^\\]{1}\]|\{.*?\}|\(\?[=:!]|./g,function(re){switch(re.charAt(0)){case "{":case "+":case "?":case "*":case "^":case "$":case "|":case "(":_ccd+=re;break;case ")":_ccd+="|$)";break;default:_ccd+="(?:"+re+"|$)";break;}});}try{"".search(_ccd);}catch(e){_ccd=this.pattern;console.warn("RegExp error in "+this.declaredClass+": "+this.pattern);}this._partialre="^(?:"+_ccd+")$";}return p;},postMixInProperties:function(){this.inherited(arguments);this.messages=i18n.getLocalization("dijit.form","validate",this.lang);this._setConstraintsAttr(this.constraints);},_setDisabledAttr:function(_cce){this.inherited(arguments);this._refreshState();},_setRequiredAttr:function(_ccf){this._set("required",_ccf);this.focusNode.setAttribute("aria-required",_ccf);this._refreshState();},_setMessageAttr:function(_cd0){this._set("message",_cd0);this.displayMessage(_cd0);},reset:function(){this._maskValidSubsetError=true;this.inherited(arguments);},_onBlur:function(){this.displayMessage("");this.inherited(arguments);}});});},"dijit/_base":function(){define("dijit/_base",["./main","./a11y","./WidgetSet","./_base/focus","./_base/manager","./_base/place","./_base/popup","./_base/scroll","./_base/sniff","./_base/typematic","./_base/wai","./_base/window"],function(_cd1){return _cd1._base;});},"dijit/_base/typematic":function(){define("dijit/_base/typematic",["../typematic"],function(){});},"dojo/window":function(){define(["./_base/lang","./sniff","./_base/window","./dom","./dom-geometry","./dom-style"],function(lang,has,_cd2,dom,geom,_cd3){var _cd4={getBox:function(doc){doc=doc||_cd2.doc;var _cd5=(doc.compatMode=="BackCompat")?_cd2.body(doc):doc.documentElement,_cd6=geom.docScroll(doc),w,h;if(has("touch")){var _cd7=_cd4.get(doc);w=_cd7.innerWidth||_cd5.clientWidth;h=_cd7.innerHeight||_cd5.clientHeight;}else{w=_cd5.clientWidth;h=_cd5.clientHeight;}return {l:_cd6.x,t:_cd6.y,w:w,h:h};},get:function(doc){if(has("ie")&&_cd4!==document.parentWindow){doc.parentWindow.execScript("document._parentWindow = window;","Javascript");var win=doc._parentWindow;doc._parentWindow=null;return win;}return doc.parentWindow||doc.defaultView;},scrollIntoView:function(node,pos){try{node=dom.byId(node);var doc=node.ownerDocument||_cd2.doc,body=_cd2.body(doc),html=doc.documentElement||body.parentNode,isIE=has("ie"),isWK=has("webkit");if((!(has("mozilla")||isIE||isWK||has("opera"))||node==body||node==html)&&(typeof node.scrollIntoView!="undefined")){node.scrollIntoView(false);return;}var _cd8=doc.compatMode=="BackCompat",_cd9=(isIE>=9&&"frameElement" in node.ownerDocument.parentWindow)?((html.clientHeight>0&&html.clientWidth>0&&(body.clientHeight==0||body.clientWidth==0||body.clientHeight>html.clientHeight||body.clientWidth>html.clientWidth))?html:body):(_cd8?body:html),_cda=isWK?body:_cd9,_cdb=_cd9.clientWidth,_cdc=_cd9.clientHeight,rtl=!geom.isBodyLtr(doc),_cdd=pos||geom.position(node),el=node.parentNode,_cde=function(el){return ((isIE<=6||(isIE&&_cd8))?false:(_cd3.get(el,"position").toLowerCase()=="fixed"));};if(_cde(node)){return;}while(el){if(el==body){el=_cda;}var _cdf=geom.position(el),_ce0=_cde(el);if(el==_cda){_cdf.w=_cdb;_cdf.h=_cdc;if(_cda==html&&isIE&&rtl){_cdf.x+=_cda.offsetWidth-_cdf.w;}if(_cdf.x<0||!isIE){_cdf.x=0;}if(_cdf.y<0||!isIE){_cdf.y=0;}}else{var pb=geom.getPadBorderExtents(el);_cdf.w-=pb.w;_cdf.h-=pb.h;_cdf.x+=pb.l;_cdf.y+=pb.t;var _ce1=el.clientWidth,_ce2=_cdf.w-_ce1;if(_ce1>0&&_ce2>0){_cdf.w=_ce1;_cdf.x+=(rtl&&(isIE||el.clientLeft>pb.l))?_ce2:0;}_ce1=el.clientHeight;_ce2=_cdf.h-_ce1;if(_ce1>0&&_ce2>0){_cdf.h=_ce1;}}if(_ce0){if(_cdf.y<0){_cdf.h+=_cdf.y;_cdf.y=0;}if(_cdf.x<0){_cdf.w+=_cdf.x;_cdf.x=0;}if(_cdf.y+_cdf.h>_cdc){_cdf.h=_cdc-_cdf.y;}if(_cdf.x+_cdf.w>_cdb){_cdf.w=_cdb-_cdf.x;}}var l=_cdd.x-_cdf.x,t=_cdd.y-Math.max(_cdf.y,0),r=l+_cdd.w-_cdf.w,bot=t+_cdd.h-_cdf.h;if(r*l>0){var s=Math[l<0?"max":"min"](l,r);if(rtl&&((isIE==8&&!_cd8)||isIE>=9)){s=-s;}_cdd.x+=el.scrollLeft;el.scrollLeft+=s;_cdd.x-=el.scrollLeft;}if(bot*t>0){_cdd.y+=el.scrollTop;el.scrollTop+=Math[t<0?"max":"min"](t,bot);_cdd.y-=el.scrollTop;}el=(el!=_cda)&&!_ce0&&el.parentNode;}}catch(error){console.error("scrollIntoView: "+error);node.scrollIntoView(false);}}};1&&lang.setObject("dojo.window",_cd4);return _cd4;});},"dojo/number":function(){define(["./_base/lang","./i18n","./i18n!./cldr/nls/number","./string","./regexp"],function(lang,i18n,_ce3,_ce4,_ce5){var _ce6={};lang.setObject("dojo.number",_ce6);_ce6.format=function(_ce7,_ce8){_ce8=lang.mixin({},_ce8||{});var _ce9=i18n.normalizeLocale(_ce8.locale),_cea=i18n.getLocalization("dojo.cldr","number",_ce9);_ce8.customs=_cea;var _ceb=_ce8.pattern||_cea[(_ce8.type||"decimal")+"Format"];if(isNaN(_ce7)||Math.abs(_ce7)==Infinity){return null;}return _ce6._applyPattern(_ce7,_ceb,_ce8);};_ce6._numberPatternRE=/[#0,]*[#0](?:\.0*#*)?/;_ce6._applyPattern=function(_cec,_ced,_cee){_cee=_cee||{};var _cef=_cee.customs.group,_cf0=_cee.customs.decimal,_cf1=_ced.split(";"),_cf2=_cf1[0];_ced=_cf1[(_cec<0)?1:0]||("-"+_cf2);if(_ced.indexOf("%")!=-1){_cec*=100;}else{if(_ced.indexOf("‰")!=-1){_cec*=1000;}else{if(_ced.indexOf("¤")!=-1){_cef=_cee.customs.currencyGroup||_cef;_cf0=_cee.customs.currencyDecimal||_cf0;_ced=_ced.replace(/\u00a4{1,3}/,function(_cf3){var prop=["symbol","currency","displayName"][_cf3.length-1];return _cee[prop]||_cee.currency||"";});}else{if(_ced.indexOf("E")!=-1){throw new Error("exponential notation not supported");}}}}var _cf4=_ce6._numberPatternRE;var _cf5=_cf2.match(_cf4);if(!_cf5){throw new Error("unable to find a number expression in pattern: "+_ced);}if(_cee.fractional===false){_cee.places=0;}return _ced.replace(_cf4,_ce6._formatAbsolute(_cec,_cf5[0],{decimal:_cf0,group:_cef,places:_cee.places,round:_cee.round}));};_ce6.round=function(_cf6,_cf7,_cf8){var _cf9=10/(_cf8||10);return (_cf9*+_cf6).toFixed(_cf7)/_cf9;};if((0.9).toFixed()==0){var _cfa=_ce6.round;_ce6.round=function(v,p,m){var d=Math.pow(10,-p||0),a=Math.abs(v);if(!v||a>=d||a*Math.pow(10,p+1)<5){d=0;}return _cfa(v,p,m)+(v>0?d:-d);};}_ce6._formatAbsolute=function(_cfb,_cfc,_cfd){_cfd=_cfd||{};if(_cfd.places===true){_cfd.places=0;}if(_cfd.places===Infinity){_cfd.places=6;}var _cfe=_cfc.split("."),_cff=typeof _cfd.places=="string"&&_cfd.places.indexOf(","),_d00=_cfd.places;if(_cff){_d00=_cfd.places.substring(_cff+1);}else{if(!(_d00>=0)){_d00=(_cfe[1]||[]).length;}}if(!(_cfd.round<0)){_cfb=_ce6.round(_cfb,_d00,_cfd.round);}var _d01=String(Math.abs(_cfb)).split("."),_d02=_d01[1]||"";if(_cfe[1]||_cfd.places){if(_cff){_cfd.places=_cfd.places.substring(0,_cff);}var pad=_cfd.places!==undefined?_cfd.places:(_cfe[1]&&_cfe[1].lastIndexOf("0")+1);if(pad>_d02.length){_d01[1]=_ce4.pad(_d02,pad,"0",true);}if(_d00<_d02.length){_d01[1]=_d02.substr(0,_d00);}}else{if(_d01[1]){_d01.pop();}}var _d03=_cfe[0].replace(",","");pad=_d03.indexOf("0");if(pad!=-1){pad=_d03.length-pad;if(pad>_d01[0].length){_d01[0]=_ce4.pad(_d01[0],pad);}if(_d03.indexOf("#")==-1){_d01[0]=_d01[0].substr(_d01[0].length-pad);}}var _d04=_cfe[0].lastIndexOf(","),_d05,_d06;if(_d04!=-1){_d05=_cfe[0].length-_d04-1;var _d07=_cfe[0].substr(0,_d04);_d04=_d07.lastIndexOf(",");if(_d04!=-1){_d06=_d07.length-_d04-1;}}var _d08=[];for(var _d09=_d01[0];_d09;){var off=_d09.length-_d05;_d08.push((off>0)?_d09.substr(off):_d09);_d09=(off>0)?_d09.slice(0,off):"";if(_d06){_d05=_d06;delete _d06;}}_d01[0]=_d08.reverse().join(_cfd.group||",");return _d01.join(_cfd.decimal||".");};_ce6.regexp=function(_d0a){return _ce6._parseInfo(_d0a).regexp;};_ce6._parseInfo=function(_d0b){_d0b=_d0b||{};var _d0c=i18n.normalizeLocale(_d0b.locale),_d0d=i18n.getLocalization("dojo.cldr","number",_d0c),_d0e=_d0b.pattern||_d0d[(_d0b.type||"decimal")+"Format"],_d0f=_d0d.group,_d10=_d0d.decimal,_d11=1;if(_d0e.indexOf("%")!=-1){_d11/=100;}else{if(_d0e.indexOf("‰")!=-1){_d11/=1000;}else{var _d12=_d0e.indexOf("¤")!=-1;if(_d12){_d0f=_d0d.currencyGroup||_d0f;_d10=_d0d.currencyDecimal||_d10;}}}var _d13=_d0e.split(";");if(_d13.length==1){_d13.push("-"+_d13[0]);}var re=_ce5.buildGroupRE(_d13,function(_d14){_d14="(?:"+_ce5.escapeString(_d14,".")+")";return _d14.replace(_ce6._numberPatternRE,function(_d15){var _d16={signed:false,separator:_d0b.strict?_d0f:[_d0f,""],fractional:_d0b.fractional,decimal:_d10,exponent:false},_d17=_d15.split("."),_d18=_d0b.places;if(_d17.length==1&&_d11!=1){_d17[1]="###";}if(_d17.length==1||_d18===0){_d16.fractional=false;}else{if(_d18===undefined){_d18=_d0b.pattern?_d17[1].lastIndexOf("0")+1:Infinity;}if(_d18&&_d0b.fractional==undefined){_d16.fractional=true;}if(!_d0b.places&&(_d18<_d17[1].length)){_d18+=","+_d17[1].length;}_d16.places=_d18;}var _d19=_d17[0].split(",");if(_d19.length>1){_d16.groupSize=_d19.pop().length;if(_d19.length>1){_d16.groupSize2=_d19.pop().length;}}return "("+_ce6._realNumberRegexp(_d16)+")";});},true);if(_d12){re=re.replace(/([\s\xa0]*)(\u00a4{1,3})([\s\xa0]*)/g,function(_d1a,_d1b,_d1c,_d1d){var prop=["symbol","currency","displayName"][_d1c.length-1],_d1e=_ce5.escapeString(_d0b[prop]||_d0b.currency||"");_d1b=_d1b?"[\\s\\xa0]":"";_d1d=_d1d?"[\\s\\xa0]":"";if(!_d0b.strict){if(_d1b){_d1b+="*";}if(_d1d){_d1d+="*";}return "(?:"+_d1b+_d1e+_d1d+")?";}return _d1b+_d1e+_d1d;});}return {regexp:re.replace(/[\xa0 ]/g,"[\\s\\xa0]"),group:_d0f,decimal:_d10,factor:_d11};};_ce6.parse=function(_d1f,_d20){var info=_ce6._parseInfo(_d20),_d21=(new RegExp("^"+info.regexp+"$")).exec(_d1f);if(!_d21){return NaN;}var _d22=_d21[1];if(!_d21[1]){if(!_d21[2]){return NaN;}_d22=_d21[2];info.factor*=-1;}_d22=_d22.replace(new RegExp("["+info.group+"\\s\\xa0"+"]","g"),"").replace(info.decimal,".");return _d22*info.factor;};_ce6._realNumberRegexp=function(_d23){_d23=_d23||{};if(!("places" in _d23)){_d23.places=Infinity;}if(typeof _d23.decimal!="string"){_d23.decimal=".";}if(!("fractional" in _d23)||/^0/.test(_d23.places)){_d23.fractional=[true,false];}if(!("exponent" in _d23)){_d23.exponent=[true,false];}if(!("eSigned" in _d23)){_d23.eSigned=[true,false];}var _d24=_ce6._integerRegexp(_d23),_d25=_ce5.buildGroupRE(_d23.fractional,function(q){var re="";if(q&&(_d23.places!==0)){re="\\"+_d23.decimal;if(_d23.places==Infinity){re="(?:"+re+"\\d+)?";}else{re+="\\d{"+_d23.places+"}";}}return re;},true);var _d26=_ce5.buildGroupRE(_d23.exponent,function(q){if(q){return "([eE]"+_ce6._integerRegexp({signed:_d23.eSigned})+")";}return "";});var _d27=_d24+_d25;if(_d25){_d27="(?:(?:"+_d27+")|(?:"+_d25+"))";}return _d27+_d26;};_ce6._integerRegexp=function(_d28){_d28=_d28||{};if(!("signed" in _d28)){_d28.signed=[true,false];}if(!("separator" in _d28)){_d28.separator="";}else{if(!("groupSize" in _d28)){_d28.groupSize=3;}}var _d29=_ce5.buildGroupRE(_d28.signed,function(q){return q?"[-+]":"";},true);var _d2a=_ce5.buildGroupRE(_d28.separator,function(sep){if(!sep){return "(?:\\d+)";}sep=_ce5.escapeString(sep);if(sep==" "){sep="\\s";}else{if(sep==" "){sep="\\s\\xa0";}}var grp=_d28.groupSize,grp2=_d28.groupSize2;if(grp2){var _d2b="(?:0|[1-9]\\d{0,"+(grp2-1)+"}(?:["+sep+"]\\d{"+grp2+"})*["+sep+"]\\d{"+grp+"})";return ((grp-grp2)>0)?"(?:"+_d2b+"|(?:0|[1-9]\\d{0,"+(grp-1)+"}))":_d2b;}return "(?:0|[1-9]\\d{0,"+(grp-1)+"}(?:["+sep+"]\\d{"+grp+"})*)";},true);return _d29+_d2a;};return _ce6;});},"dijit/_FocusMixin":function(){define("dijit/_FocusMixin",["./focus","./_WidgetBase","dojo/_base/declare","dojo/_base/lang"],function(_d2c,_d2d,_d2e,lang){lang.extend(_d2d,{focused:false,onFocus:function(){},onBlur:function(){},_onFocus:function(){this.onFocus();},_onBlur:function(){this.onBlur();}});return _d2e("dijit._FocusMixin",null,{_focusManager:_d2c});});},"dijit/_WidgetsInTemplateMixin":function(){define("dijit/_WidgetsInTemplateMixin",["dojo/_base/array","dojo/_base/declare","dojo/parser"],function(_d2f,_d30,_d31){return _d30("dijit._WidgetsInTemplateMixin",null,{_earlyTemplatedStartup:false,widgetsInTemplate:true,_beforeFillContent:function(){if(this.widgetsInTemplate){var node=this.domNode;var cw=(this._startupWidgets=_d31.parse(node,{noStart:!this._earlyTemplatedStartup,template:true,inherited:{dir:this.dir,lang:this.lang,textDir:this.textDir},propsThis:this,scope:"dojo"}));if(!cw.isFulfilled()){throw new Error(this.declaredClass+": parser returned unfilled promise (probably waiting for module auto-load), "+"unsupported by _WidgetsInTemplateMixin.   Must pre-load all supporting widgets before instantiation.");}this._attachTemplateNodes(cw,function(n,p){return n[p];});}},startup:function(){_d2f.forEach(this._startupWidgets,function(w){if(w&&!w._started&&w.startup){w.startup();}});this.inherited(arguments);}});});},"esri/InfoWindowBase":function(){define(["dijit","dojo","dojox","dojo/require!dijit/_base/manager"],function(_d32,dojo,_d33){dojo.provide("esri.InfoWindowBase");dojo.require("dijit._base.manager");dojo.declare("esri.InfoWindowBase",null,{constructor:function(){var _d34=dojo.hitch;this.__set_title=_d34(this,this.__set_title);this.__err_title=_d34(this,this.__err_title);this.__set_content=_d34(this,this.__set_content);this.__err_content=_d34(this,this.__err_content);},setMap:function(map){this.map=map;},unsetMap:function(map){delete this.map;},setTitle:function(){},setContent:function(){},show:function(){},hide:function(){},resize:function(){},onShow:function(){},onHide:function(){},place:function(_d35,_d36){if(esri._isDefined(_d35)){if(dojo.isObject(_d35)){dojo.place(_d35,_d36,"only");}else{_d36.innerHTML=_d35;}}else{_d36.innerHTML="";}},startupDijits:function(node){this._processDijits(node);},destroyDijits:function(node){this._processDijits(node,true);},_processDijits:function(node,_d37){if(node&&node.children.length===1){var _d38=node.children[0];if(_d38){var _d39=_d32.byNode(_d38);var _d3a=_d39?[_d39]:_d32.findWidgets(_d38);dojo.forEach(_d3a,function(_d3b){if(_d37){if(_d3b._started&&!_d3b._destroyed){try{if(_d3b.destroyRecursive){_d3b.destroyRecursive();}else{if(_d3b.destroy){_d3b.destroy();}}}catch(ex){console.debug("An error occurred when destroying a widget embedded within InfoWindow: "+ex.message);}}}else{if(!_d3b._started){try{_d3b.startup();}catch(ex2){console.debug("An error occurred when starting a widget embedded within InfoWindow: "+ex2.message);}}}});}}},__registerMapListeners:function(){this.__unregisterMapListeners();var map=this.map;this.__handles=[dojo.connect(map,"onPan",this,this.__onMapPan),dojo.connect(map,"onZoomStart",this,this.__onMapZmStart),dojo.connect(map,"onExtentChange",this,this.__onMapExtChg)];},__unregisterMapListeners:function(){var _d3c=this.__handles;if(_d3c){dojo.forEach(_d3c,dojo.disconnect,dojo);this.__handles=null;}},__onMapPan:function(_d3d,_d3e){this.move(_d3e,true);},__onMapZmStart:function(){this.__mcoords=this.mapCoords||this.map.toMap(new esri.geometry.ScreenPoint(this.coords));this.hide(null,true);},__onMapExtChg:function(_d3f,_d40,_d41){var map=this.map,_d42=this.mapCoords;if(_d42){this.show(_d42,null,true);}else{var _d43;if(_d41){_d43=map.toScreen(this.__mcoords);}else{_d43=this.coords.offset((_d40&&_d40.x)||0,(_d40&&_d40.y)||0);}this.show(_d43,null,true);}},__setValue:function(_d44,_d45){this[_d44].innerHTML="";var dfd="_dfd"+_d44,_d46=this[dfd];if(_d46&&_d46.fired===-1){_d46.cancel();this[dfd]=null;}if(esri._isDefined(_d45)){if(_d45 instanceof dojo.Deferred){this[dfd]=_d45;_d45.addCallbacks(this["__set"+_d44],this["__err"+_d44]);}else{this.__render(_d44,_d45);}}},__set_title:function(_d47){this._dfd_title=null;this.__render("_title",_d47);},__err_title:function(_d48){this._dfd_title=null;},__set_content:function(_d49){this._dfd_content=null;this.__render("_content",_d49);},__err_content:function(_d4a){this._dfd_content=null;},__render:function(_d4b,_d4c){var node=this[_d4b];this.place(_d4c,node);if(this.isShowing){this.startupDijits(node);if(_d4b==="_title"&&this._adjustContentArea){this._adjustContentArea();}}}});});},"dojox/collections/ArrayList":function(){define("dojox/collections/ArrayList",["dojo/_base/kernel","dojo/_base/array","./_base"],function(dojo,_d4d,dxc){dxc.ArrayList=function(arr){var _d4e=[];if(arr){_d4e=_d4e.concat(arr);}this.count=_d4e.length;this.add=function(obj){_d4e.push(obj);this.count=_d4e.length;};this.addRange=function(a){if(a.getIterator){var e=a.getIterator();while(!e.atEnd()){this.add(e.get());}this.count=_d4e.length;}else{for(var i=0;i<a.length;i++){_d4e.push(a[i]);}this.count=_d4e.length;}};this.clear=function(){_d4e.splice(0,_d4e.length);this.count=0;};this.clone=function(){return new dxc.ArrayList(_d4e);};this.contains=function(obj){for(var i=0;i<_d4e.length;i++){if(_d4e[i]==obj){return true;}}return false;};this.forEach=function(fn,_d4f){dojo.forEach(_d4e,fn,_d4f);};this.getIterator=function(){return new dxc.Iterator(_d4e);};this.indexOf=function(obj){for(var i=0;i<_d4e.length;i++){if(_d4e[i]==obj){return i;}}return -1;};this.insert=function(i,obj){_d4e.splice(i,0,obj);this.count=_d4e.length;};this.item=function(i){return _d4e[i];};this.remove=function(obj){var i=this.indexOf(obj);if(i>=0){_d4e.splice(i,1);}this.count=_d4e.length;};this.removeAt=function(i){_d4e.splice(i,1);this.count=_d4e.length;};this.reverse=function(){_d4e.reverse();};this.sort=function(fn){if(fn){_d4e.sort(fn);}else{_d4e.sort();}};this.setByIndex=function(i,obj){_d4e[i]=obj;this.count=_d4e.length;};this.toArray=function(){return [].concat(_d4e);};this.toString=function(_d50){return _d4e.join((_d50||","));};};return dxc.ArrayList;});},"dojo/fx/Toggler":function(){define(["../_base/lang","../_base/declare","../_base/fx","../_base/connect"],function(lang,_d51,_d52,_d53){return _d51("dojo.fx.Toggler",null,{node:null,showFunc:_d52.fadeIn,hideFunc:_d52.fadeOut,showDuration:200,hideDuration:200,constructor:function(args){var _d54=this;lang.mixin(_d54,args);_d54.node=args.node;_d54._showArgs=lang.mixin({},args);_d54._showArgs.node=_d54.node;_d54._showArgs.duration=_d54.showDuration;_d54.showAnim=_d54.showFunc(_d54._showArgs);_d54._hideArgs=lang.mixin({},args);_d54._hideArgs.node=_d54.node;_d54._hideArgs.duration=_d54.hideDuration;_d54.hideAnim=_d54.hideFunc(_d54._hideArgs);_d53.connect(_d54.showAnim,"beforeBegin",lang.hitch(_d54.hideAnim,"stop",true));_d53.connect(_d54.hideAnim,"beforeBegin",lang.hitch(_d54.showAnim,"stop",true));},show:function(_d55){return this.showAnim.play(_d55||0);},hide:function(_d56){return this.hideAnim.play(_d56||0);}});});},"dijit/form/HorizontalRuleLabels":function(){define("dijit/form/HorizontalRuleLabels",["dojo/_base/declare","dojo/number","dojo/query","./HorizontalRule"],function(_d57,_d58,_d59,_d5a){return _d57("dijit.form.HorizontalRuleLabels",_d5a,{templateString:"<div class=\"dijitRuleContainer dijitRuleContainerH dijitRuleLabelsContainer dijitRuleLabelsContainerH\"></div>",labelStyle:"",labels:[],numericMargin:0,minimum:0,maximum:1,constraints:{pattern:"#%"},_positionPrefix:"<div class=\"dijitRuleLabelContainer dijitRuleLabelContainerH\" style=\"left:",_labelPrefix:"\"><div class=\"dijitRuleLabel dijitRuleLabelH\">",_suffix:"</div></div>",_calcPosition:function(pos){return pos;},_genHTML:function(pos,ndx){return this._positionPrefix+this._calcPosition(pos)+this._positionSuffix+this.labelStyle+this._labelPrefix+this.labels[ndx]+this._suffix;},getLabels:function(){var _d5b=this.labels;if(!_d5b.length&&this.srcNodeRef){_d5b=_d59("> li",this.srcNodeRef).map(function(node){return String(node.innerHTML);});}if(!_d5b.length&&this.count>1){var _d5c=this.minimum;var inc=(this.maximum-_d5c)/(this.count-1);for(var i=0;i<this.count;i++){_d5b.push((i<this.numericMargin||i>=(this.count-this.numericMargin))?"":_d58.format(_d5c,this.constraints));_d5c+=inc;}}return _d5b;},postMixInProperties:function(){this.inherited(arguments);this.labels=this.getLabels();this.count=this.labels.length;}});});},"dojox/gfx/renderer":function(){define("dojox/gfx/renderer",["./_base","dojo/_base/lang","dojo/_base/sniff","dojo/_base/window","dojo/_base/config"],function(g,lang,has,win,_d5d){var _d5e=null;return {load:function(id,_d5f,load){if(_d5e&&id!="force"){load(_d5e);return;}var _d60=_d5d.forceGfxRenderer,_d61=!_d60&&(lang.isString(_d5d.gfxRenderer)?_d5d.gfxRenderer:"svg,vml,canvas,silverlight").split(","),_d62,_d63;while(!_d60&&_d61.length){switch(_d61.shift()){case "svg":if("SVGAngle" in win.global){_d60="svg";}break;case "vml":if(has("ie")){_d60="vml";}break;case "silverlight":try{if(has("ie")){_d62=new ActiveXObject("AgControl.AgControl");if(_d62&&_d62.IsVersionSupported("1.0")){_d63=true;}}else{if(navigator.plugins["Silverlight Plug-In"]){_d63=true;}}}catch(e){_d63=false;}finally{_d62=null;}if(_d63){_d60="silverlight";}break;case "canvas":if(win.global.CanvasRenderingContext2D){_d60="canvas";}break;}}if(_d60==="canvas"&&_d5d.canvasEvents!==false){_d60="canvasWithEvents";}if(_d5d.isDebug){console.log("gfx renderer = "+_d60);}function _d64(){_d5f(["dojox/gfx/"+_d60],function(_d65){g.renderer=_d60;_d5e=_d65;load(_d65);});};if(_d60=="svg"&&typeof window.svgweb!="undefined"){window.svgweb.addOnLoad(_d64);}else{_d64();}}};});},"dijit/form/_ButtonMixin":function(){define("dijit/form/_ButtonMixin",["dojo/_base/declare","dojo/dom","dojo/_base/event","../registry"],function(_d66,dom,_d67,_d68){return _d66("dijit.form._ButtonMixin",null,{label:"",type:"button",_onClick:function(e){if(this.disabled){_d67.stop(e);return false;}var _d69=this.onClick(e)===false;if(!_d69&&this.type=="submit"&&!(this.valueNode||this.focusNode).form){for(var node=this.domNode;node.parentNode;node=node.parentNode){var _d6a=_d68.byNode(node);if(_d6a&&typeof _d6a._onSubmit=="function"){_d6a._onSubmit(e);_d69=true;break;}}}if(_d69){e.preventDefault();}return !_d69;},postCreate:function(){this.inherited(arguments);dom.setSelectable(this.focusNode,false);},onClick:function(){return true;},_setLabelAttr:function(_d6b){this._set("label",_d6b);(this.containerNode||this.focusNode).innerHTML=_d6b;}});});},"dijit/registry":function(){define("dijit/registry",["dojo/_base/array","dojo/sniff","dojo/_base/unload","dojo/_base/window","./main"],function(_d6c,has,_d6d,win,_d6e){var _d6f={},hash={};var _d70={length:0,add:function(_d71){if(hash[_d71.id]){throw new Error("Tried to register widget with id=="+_d71.id+" but that id is already registered");}hash[_d71.id]=_d71;this.length++;},remove:function(id){if(hash[id]){delete hash[id];this.length--;}},byId:function(id){return typeof id=="string"?hash[id]:id;},byNode:function(node){return hash[node.getAttribute("widgetId")];},toArray:function(){var ar=[];for(var id in hash){ar.push(hash[id]);}return ar;},getUniqueId:function(_d72){var id;do{id=_d72+"_"+(_d72 in _d6f?++_d6f[_d72]:_d6f[_d72]=0);}while(hash[id]);return _d6e._scopeName=="dijit"?id:_d6e._scopeName+"_"+id;},findWidgets:function(root,_d73){var _d74=[];function _d75(root){for(var node=root.firstChild;node;node=node.nextSibling){if(node.nodeType==1){var _d76=node.getAttribute("widgetId");if(_d76){var _d77=hash[_d76];if(_d77){_d74.push(_d77);}}else{if(node!==_d73){_d75(node);}}}}};_d75(root);return _d74;},_destroyAll:function(){_d6e._curFocus=null;_d6e._prevFocus=null;_d6e._activeStack=[];_d6c.forEach(_d70.findWidgets(win.body()),function(_d78){if(!_d78._destroyed){if(_d78.destroyRecursive){_d78.destroyRecursive();}else{if(_d78.destroy){_d78.destroy();}}}});},getEnclosingWidget:function(node){while(node){var id=node.getAttribute&&node.getAttribute("widgetId");if(id){return hash[id];}node=node.parentNode;}return null;},_hash:hash};_d6e.registry=_d70;return _d70;});},"esri/main":function(){define(["dojo","dojo/_base/lang","dojo/_base/sniff","dojo/_base/config","dojo/topic","dojo/i18n!esri/nls/jsapi"],function(dojo,lang,has,_d79,_d7a,_d7b){var esri={},isFF=has("ff"),isIE=has("ie"),_d7c=has("webkit"),_d7d=has("opera"),_d7e=has("chrome"),_d7f=has("safari");if(!_d79.noGlobals){window.esri=esri;}has.add("extend-esri",1);lang.mixin(esri,{version:3.3,_appBaseUrl:window.location.protocol+"//"+window.location.host+window.location.pathname.substring(0,window.location.pathname.lastIndexOf(window.location.pathname.split("/")[window.location.pathname.split("/").length-1])),config:{defaults:{screenDPI:96,geometryService:null,kmlService:null,map:{width:400,height:400,layerNamePrefix:"layer",graphicsLayerNamePrefix:"graphicsLayer",slider:{left:"30px",top:"30px",width:null,height:"200px"},sliderLabel:{tick:5,labels:null,style:"width:2em; font-family:Verdana; font-size:75%;"},sliderChangeImmediate:true,zoomSymbol:{color:[0,0,0,64],outline:{color:[255,0,0,255],width:1.25,style:"esriSLSSolid"},style:"esriSFSSolid"},zoomDuration:500,zoomRate:25,panDuration:350,panRate:25,logoLink:"http://www.esri.com",basemaps:{"streets":{title:"Streets",baseMapLayers:[{url:"http://services.arcgisonline.com/ArcGIS/rest/services/World_Street_Map/MapServer"}]},"satellite":{title:"Satellite",baseMapLayers:[{url:"http://services.arcgisonline.com/ArcGIS/rest/services/World_Imagery/MapServer"}]},"hybrid":{title:"Imagery with Labels",baseMapLayers:[{url:"http://services.arcgisonline.com/ArcGIS/rest/services/World_Imagery/MapServer"},{url:"http://services.arcgisonline.com/ArcGIS/rest/services/Reference/World_Boundaries_and_Places/MapServer",isReference:true}]},"topo":{title:"Topographic",baseMapLayers:[{url:"http://services.arcgisonline.com/ArcGIS/rest/services/World_Topo_Map/MapServer"}]},"gray":{title:"Light Gray Canvas",baseMapLayers:[{url:"http://services.arcgisonline.com/ArcGIS/rest/services/Canvas/World_Light_Gray_Base/MapServer"},{url:"http://services.arcgisonline.com/ArcGIS/rest/services/Canvas/World_Light_Gray_Reference/MapServer",isReference:true}]},"oceans":{title:"Oceans",baseMapLayers:[{url:"http://services.arcgisonline.com/ArcGIS/rest/services/Ocean_Basemap/MapServer"}]},"national-geographic":{title:"National Geographic",baseMapLayers:[{url:"http://services.arcgisonline.com/ArcGIS/rest/services/NatGeo_World_Map/MapServer"}]},"osm":{title:"OpenStreetMap",baseMapLayers:[{type:"OpenStreetMap"}]}}},io:{errorHandler:function(_d80,io){_d7a.publish("esri.Error",[_d80]);},proxyUrl:null,alwaysUseProxy:false,corsEnabledServers:["www.arcgis.com","tiles.arcgis.com","services.arcgis.com","services1.arcgis.com","services2.arcgis.com","services3.arcgis.com","static.arcgis.com","utility.arcgisonline.com","geocode.arcgis.com","qaext.arcgis.com","tilesqa.arcgis.com","servicesqa.arcgis.com","servicesqa1.arcgis.com","servicesqa2.arcgis.com","servicesqa3.arcgis.com","geocodeqa.arcgis.com","dev.arcgis.com","devext.arcgis.com","tilesdevext.arcgis.com","servicesdev.arcgis.com","servicesdev1.arcgis.com","servicesdev2.arcgis.com","servicesdev3.arcgis.com","geocodedev.arcgis.com"],corsDetection:true,_processedCorsServers:{},postLength:2000,timeout:60000}}}});var nua=navigator.userAgent,_d81;_d81=nua.match(/(iPhone|iPad|CPU)\s+OS\s+(\d+\_\d+)/i);if(_d81){esri.isiPhone=parseFloat(_d81[2].replace("_","."));}_d81=nua.match(/Android\s+(\d+\.\d+)/i);if(_d81){esri.isAndroid=parseFloat(_d81[1]);}_d81=nua.match(/Fennec\/(\d+\.\d+)/i);if(_d81){esri.isFennec=parseFloat(_d81[1]);}if(nua.indexOf("BlackBerry")>=0){if(nua.indexOf("WebKit")>=0){esri.isBlackBerry=1;}}esri.isTouchEnabled=(esri.isiPhone||esri.isAndroid||esri.isBlackBerry||(esri.isFennec>=6)||(isFF&&document.createTouch))?true:false;esri._getDOMAccessor=function(_d82){var _d83="";if(isFF){_d83="Moz";}else{if(_d7c){_d83="Webkit";}else{if(isIE){_d83="ms";}else{if(_d7d){_d83="O";}}}}return _d83+_d82.charAt(0).toUpperCase()+_d82.substr(1);};esri._hasCors=_d7e>=4||isFF>=3.5||_d7f>=4||isIE>=10;esri._hasFileUpload=window.FormData&&window.FileList;esri._hasTransforms=isIE>=9||isFF>=3.5||_d7e>=4||_d7f>=3.1||_d7d>=10.5||esri.isiPhone>=3.2||esri.isAndroid>=2.1;esri._hasTransitions=isIE>=10||isFF>=4||_d7e>=4||_d7f>=3.1||_d7d>=10.5||esri.isiPhone>=3.2||esri.isAndroid>=2.1;esri._has3DTransforms=isIE>=11||isFF>=10||_d7e>=12||_d7f>=4||esri.isiPhone>=3.2||esri.isAndroid>=3;if(esri.isAndroid<3){esri._hasTransforms=esri._hasTransitions=esri._has3DTransforms=false;}esri._css=function(_d84){var _d85=esri._has3DTransforms;if(esri._isDefined(_d84)){_d85=_d84;}else{if(_d85){if((_d7e)||(_d7f&&!esri.isiPhone)){_d85=false;}}}var _d86=_d85?"translate3d(":"translate(",_d87=_d85?(_d7e?",-1px)":",0px)"):")",_d88=_d85?"scale3d(":"scale(",_d89=_d85?",1)":")",_d8a=_d85?"rotate3d(0,0,1,":"rotate(",_d8b=_d85?"matrix3d(":"matrix(",_d8c=_d85?",0,0,":",",_d8d=_d85?",0,0,0,0,1,0,":",",_d8e=_d85?",0,1)":")";return {names:{transition:(_d7c&&"-webkit-transition")||(isFF&&"MozTransition")||(_d7d&&"OTransition")||(isIE&&"msTransition"),transform:(_d7c&&"-webkit-transform")||(isFF&&"MozTransform")||(_d7d&&"OTransform")||(isIE&&"msTransform"),transformName:(_d7c&&"-webkit-transform")||(isFF&&"-moz-transform")||(_d7d&&"-o-transform")||(isIE&&"-ms-transform"),origin:(_d7c&&"-webkit-transform-origin")||(isFF&&"MozTransformOrigin")||(_d7d&&"OTransformOrigin")||(isIE&&"msTransformOrigin"),endEvent:(_d7c&&"webkitTransitionEnd")||(isFF&&"transitionend")||(_d7d&&"oTransitionEnd")||(isIE&&"MSTransitionEnd")},translate:function(x,y){return _d86+x+"px,"+y+"px"+_d87;},scale:function(_d8f){return _d88+_d8f+","+_d8f+_d89;},rotate:function(_d90){return _d8a+_d90+"deg)";},matrix:function(m){return _d8b+m.xx+","+m.xy+_d8c+m.yx+","+m.yy+_d8d+m.dx.toFixed(10)+(isFF?"px,":",")+m.dy.toFixed(10)+(isFF?"px":"")+_d8e;}};};if(!_d79.noGlobals){window.esriConfig=esri.config;}esri.bundle=_d7b;return esri;});},"dojo/io/script":function(){define(["../_base/connect","../_base/kernel","../_base/lang","../sniff","../_base/window","../_base/xhr","../dom","../dom-construct","../request/script"],function(_d91,_d92,lang,has,win,xhr,dom,_d93,_d94){function _d95(_d96,id){var dfd=_d96["jsonp_"+id];if(dfd){delete _d96["jsonp_"+id];if(dfd.canceled){_d92.global[_d94._callbacksProperty][dfd.ioArgs.requestId]();}}};dojo.deprecated("dojo/io/script","Use dojo/request/script.","2.0");var _d97={get:function(args){var rDfd,self=this;var dfd=this._makeScriptDeferred(args,function(dfd){rDfd&&rDfd.cancel();});var _d98=dfd.ioArgs;xhr._ioAddQueryToUrl(_d98);xhr._ioNotifyStart(dfd);rDfd=_d94.get(_d98.url,{timeout:args.timeout,jsonp:_d98.jsonp,checkString:args.checkString,ioArgs:_d98,frameDoc:args.frameDoc,canAttach:function(rDfd){_d98.requestId=rDfd.id;_d98.scriptId=rDfd.scriptId;_d98.canDelete=rDfd.canDelete;return _d97._canAttach(_d98);}},true);rDfd.then(function(){_d95(self,_d98.id);dfd.resolve(dfd);}).otherwise(function(_d99){_d95(self,_d98.id);dfd.ioArgs.error=_d99;dfd.reject(_d99);});return dfd;},attach:_d94._attach,remove:_d94._remove,_makeScriptDeferred:function(args,_d9a){var dfd=xhr._ioSetArgs(args,_d9a||this._deferredCancel,this._deferredOk,this._deferredError);var _d9b=dfd.ioArgs;_d9b.id=_d92._scopeName+"IoScript"+(args.callbackSuffix||(this._counter++));_d9b.canDelete=false;_d9b.jsonp=args.callbackParamName||args.jsonp;if(_d9b.jsonp){_d9b.query=_d9b.query||"";if(_d9b.query.length>0){_d9b.query+="&";}_d9b.query+=_d9b.jsonp+"="+(args.frameDoc?"parent.":"")+_d92._scopeName+".io.script.jsonp_"+_d9b.id+"._jsonpCallback";_d9b.frameDoc=args.frameDoc;_d9b.canDelete=true;dfd._jsonpCallback=this._jsonpCallback;this["jsonp_"+_d9b.id]=dfd;}return dfd;},_deferredCancel:function(dfd){dfd.canceled=true;},_deferredOk:function(dfd){var _d9c=dfd.ioArgs;return _d9c.json||_d9c.scriptLoaded||_d9c;},_deferredError:function(_d9d,dfd){console.log("dojo.io.script error",_d9d);return _d9d;},_deadScripts:[],_counter:1,_addDeadScript:function(_d9e){_d97._deadScripts.push({id:_d9e.id,frameDoc:_d9e.frameDoc});_d9e.frameDoc=null;},_validCheck:function(dfd){var _d9f=_d97._deadScripts;if(_d9f&&_d9f.length>0){for(var i=0;i<_d9f.length;i++){_d97.remove(_d9f[i].id,_d9f[i].frameDoc);_d9f[i].frameDoc=null;}_d97._deadScripts=[];}return true;},_ioCheck:function(dfd){var _da0=dfd.ioArgs;if(_da0.json||(_da0.scriptLoaded&&!_da0.args.checkString)){return true;}var _da1=_da0.args.checkString;return _da1&&eval("typeof("+_da1+") != 'undefined'");},_resHandle:function(dfd){if(_d97._ioCheck(dfd)){dfd.callback(dfd);}else{dfd.errback(new Error("inconceivable dojo.io.script._resHandle error"));}},_canAttach:function(){return true;},_jsonpCallback:function(json){this.ioArgs.json=json;_d92.global[_d94._callbacksProperty][this.ioArgs.requestId](json);}};lang.setObject("dojo.io.script",_d97);return _d97;});},"dojo/date/locale":function(){define(["../_base/lang","../_base/array","../date","../cldr/supplemental","../i18n","../regexp","../string","../i18n!../cldr/nls/gregorian","module"],function(lang,_da2,date,_da3,i18n,_da4,_da5,_da6,_da7){var _da8={};lang.setObject(_da7.id.replace(/\//g,"."),_da8);function _da9(_daa,_dab,_dac,_dad){return _dad.replace(/([a-z])\1*/ig,function(_dae){var s,pad,c=_dae.charAt(0),l=_dae.length,_daf=["abbr","wide","narrow"];switch(c){case "G":s=_dab[(l<4)?"eraAbbr":"eraNames"][_daa.getFullYear()<0?0:1];break;case "y":s=_daa.getFullYear();switch(l){case 1:break;case 2:if(!_dac.fullYear){s=String(s);s=s.substr(s.length-2);break;}default:pad=true;}break;case "Q":case "q":s=Math.ceil((_daa.getMonth()+1)/3);pad=true;break;case "M":case "L":var m=_daa.getMonth();if(l<3){s=m+1;pad=true;}else{var _db0=["months",c=="L"?"standAlone":"format",_daf[l-3]].join("-");s=_dab[_db0][m];}break;case "w":var _db1=0;s=_da8._getWeekOfYear(_daa,_db1);pad=true;break;case "d":s=_daa.getDate();pad=true;break;case "D":s=_da8._getDayOfYear(_daa);pad=true;break;case "e":case "c":var d=_daa.getDay();if(l<2){s=(d-_da3.getFirstDayOfWeek(_dac.locale)+8)%7;break;}case "E":d=_daa.getDay();if(l<3){s=d+1;pad=true;}else{var _db2=["days",c=="c"?"standAlone":"format",_daf[l-3]].join("-");s=_dab[_db2][d];}break;case "a":var _db3=_daa.getHours()<12?"am":"pm";s=_dac[_db3]||_dab["dayPeriods-format-wide-"+_db3];break;case "h":case "H":case "K":case "k":var h=_daa.getHours();switch(c){case "h":s=(h%12)||12;break;case "H":s=h;break;case "K":s=(h%12);break;case "k":s=h||24;break;}pad=true;break;case "m":s=_daa.getMinutes();pad=true;break;case "s":s=_daa.getSeconds();pad=true;break;case "S":s=Math.round(_daa.getMilliseconds()*Math.pow(10,l-3));pad=true;break;case "v":case "z":s=_da8._getZone(_daa,true,_dac);if(s){break;}l=4;case "Z":var _db4=_da8._getZone(_daa,false,_dac);var tz=[(_db4<=0?"+":"-"),_da5.pad(Math.floor(Math.abs(_db4)/60),2),_da5.pad(Math.abs(_db4)%60,2)];if(l==4){tz.splice(0,0,"GMT");tz.splice(3,0,":");}s=tz.join("");break;default:throw new Error("dojo.date.locale.format: invalid pattern char: "+_dad);}if(pad){s=_da5.pad(s,l);}return s;});};_da8._getZone=function(_db5,_db6,_db7){if(_db6){return date.getTimezoneName(_db5);}else{return _db5.getTimezoneOffset();}};_da8.format=function(_db8,_db9){_db9=_db9||{};var _dba=i18n.normalizeLocale(_db9.locale),_dbb=_db9.formatLength||"short",_dbc=_da8._getGregorianBundle(_dba),str=[],_dbd=lang.hitch(this,_da9,_db8,_dbc,_db9);if(_db9.selector=="year"){return _dbe(_dbc["dateFormatItem-yyyy"]||"yyyy",_dbd);}var _dbf;if(_db9.selector!="date"){_dbf=_db9.timePattern||_dbc["timeFormat-"+_dbb];if(_dbf){str.push(_dbe(_dbf,_dbd));}}if(_db9.selector!="time"){_dbf=_db9.datePattern||_dbc["dateFormat-"+_dbb];if(_dbf){str.push(_dbe(_dbf,_dbd));}}return str.length==1?str[0]:_dbc["dateTimeFormat-"+_dbb].replace(/\{(\d+)\}/g,function(_dc0,key){return str[key];});};_da8.regexp=function(_dc1){return _da8._parseInfo(_dc1).regexp;};_da8._parseInfo=function(_dc2){_dc2=_dc2||{};var _dc3=i18n.normalizeLocale(_dc2.locale),_dc4=_da8._getGregorianBundle(_dc3),_dc5=_dc2.formatLength||"short",_dc6=_dc2.datePattern||_dc4["dateFormat-"+_dc5],_dc7=_dc2.timePattern||_dc4["timeFormat-"+_dc5],_dc8;if(_dc2.selector=="date"){_dc8=_dc6;}else{if(_dc2.selector=="time"){_dc8=_dc7;}else{_dc8=_dc4["dateTimeFormat-"+_dc5].replace(/\{(\d+)\}/g,function(_dc9,key){return [_dc7,_dc6][key];});}}var _dca=[],re=_dbe(_dc8,lang.hitch(this,_dcb,_dca,_dc4,_dc2));return {regexp:re,tokens:_dca,bundle:_dc4};};_da8.parse=function(_dcc,_dcd){var _dce=/[\u200E\u200F\u202A\u202E]/g,info=_da8._parseInfo(_dcd),_dcf=info.tokens,_dd0=info.bundle,re=new RegExp("^"+info.regexp.replace(_dce,"")+"$",info.strict?"":"i"),_dd1=re.exec(_dcc&&_dcc.replace(_dce,""));if(!_dd1){return null;}var _dd2=["abbr","wide","narrow"],_dd3=[1970,0,1,0,0,0,0],amPm="",_dd4=_da2.every(_dd1,function(v,i){if(!i){return true;}var _dd5=_dcf[i-1],l=_dd5.length,c=_dd5.charAt(0);switch(c){case "y":if(l!=2&&_dcd.strict){_dd3[0]=v;}else{if(v<100){v=Number(v);var year=""+new Date().getFullYear(),_dd6=year.substring(0,2)*100,_dd7=Math.min(Number(year.substring(2,4))+20,99);_dd3[0]=(v<_dd7)?_dd6+v:_dd6-100+v;}else{if(_dcd.strict){return false;}_dd3[0]=v;}}break;case "M":case "L":if(l>2){var _dd8=_dd0["months-"+(c=="L"?"standAlone":"format")+"-"+_dd2[l-3]].concat();if(!_dcd.strict){v=v.replace(".","").toLowerCase();_dd8=_da2.map(_dd8,function(s){return s.replace(".","").toLowerCase();});}v=_da2.indexOf(_dd8,v);if(v==-1){return false;}}else{v--;}_dd3[1]=v;break;case "E":case "e":case "c":var days=_dd0["days-"+(c=="c"?"standAlone":"format")+"-"+_dd2[l-3]].concat();if(!_dcd.strict){v=v.toLowerCase();days=_da2.map(days,function(d){return d.toLowerCase();});}v=_da2.indexOf(days,v);if(v==-1){return false;}break;case "D":_dd3[1]=0;case "d":_dd3[2]=v;break;case "a":var am=_dcd.am||_dd0["dayPeriods-format-wide-am"],pm=_dcd.pm||_dd0["dayPeriods-format-wide-pm"];if(!_dcd.strict){var _dd9=/\./g;v=v.replace(_dd9,"").toLowerCase();am=am.replace(_dd9,"").toLowerCase();pm=pm.replace(_dd9,"").toLowerCase();}if(_dcd.strict&&v!=am&&v!=pm){return false;}amPm=(v==pm)?"p":(v==am)?"a":"";break;case "K":if(v==24){v=0;}case "h":case "H":case "k":if(v>23){return false;}_dd3[3]=v;break;case "m":_dd3[4]=v;break;case "s":_dd3[5]=v;break;case "S":_dd3[6]=v;}return true;});var _dda=+_dd3[3];if(amPm==="p"&&_dda<12){_dd3[3]=_dda+12;}else{if(amPm==="a"&&_dda==12){_dd3[3]=0;}}var _ddb=new Date(_dd3[0],_dd3[1],_dd3[2],_dd3[3],_dd3[4],_dd3[5],_dd3[6]);if(_dcd.strict){_ddb.setFullYear(_dd3[0]);}var _ddc=_dcf.join(""),_ddd=_ddc.indexOf("d")!=-1,_dde=_ddc.indexOf("M")!=-1;if(!_dd4||(_dde&&_ddb.getMonth()>_dd3[1])||(_ddd&&_ddb.getDate()>_dd3[2])){return null;}if((_dde&&_ddb.getMonth()<_dd3[1])||(_ddd&&_ddb.getDate()<_dd3[2])){_ddb=date.add(_ddb,"hour",1);}return _ddb;};function _dbe(_ddf,_de0,_de1,_de2){var _de3=function(x){return x;};_de0=_de0||_de3;_de1=_de1||_de3;_de2=_de2||_de3;var _de4=_ddf.match(/(''|[^'])+/g),_de5=_ddf.charAt(0)=="'";_da2.forEach(_de4,function(_de6,i){if(!_de6){_de4[i]="";}else{_de4[i]=(_de5?_de1:_de0)(_de6.replace(/''/g,"'"));_de5=!_de5;}});return _de2(_de4.join(""));};function _dcb(_de7,_de8,_de9,_dea){_dea=_da4.escapeString(_dea);if(!_de9.strict){_dea=_dea.replace(" a"," ?a");}return _dea.replace(/([a-z])\1*/ig,function(_deb){var s,c=_deb.charAt(0),l=_deb.length,p2="",p3="";if(_de9.strict){if(l>1){p2="0"+"{"+(l-1)+"}";}if(l>2){p3="0"+"{"+(l-2)+"}";}}else{p2="0?";p3="0{0,2}";}switch(c){case "y":s="\\d{2,4}";break;case "M":case "L":s=(l>2)?"\\S+?":"1[0-2]|"+p2+"[1-9]";break;case "D":s="[12][0-9][0-9]|3[0-5][0-9]|36[0-6]|"+p2+"[1-9][0-9]|"+p3+"[1-9]";break;case "d":s="3[01]|[12]\\d|"+p2+"[1-9]";break;case "w":s="[1-4][0-9]|5[0-3]|"+p2+"[1-9]";break;case "E":case "e":case "c":s="\\S+";break;case "h":s="1[0-2]|"+p2+"[1-9]";break;case "k":s="1[01]|"+p2+"\\d";break;case "H":s="1\\d|2[0-3]|"+p2+"\\d";break;case "K":s="1\\d|2[0-4]|"+p2+"[1-9]";break;case "m":case "s":s="[0-5]\\d";break;case "S":s="\\d{"+l+"}";break;case "a":var am=_de9.am||_de8["dayPeriods-format-wide-am"],pm=_de9.pm||_de8["dayPeriods-format-wide-pm"];s=am+"|"+pm;if(!_de9.strict){if(am!=am.toLowerCase()){s+="|"+am.toLowerCase();}if(pm!=pm.toLowerCase()){s+="|"+pm.toLowerCase();}if(s.indexOf(".")!=-1){s+="|"+s.replace(/\./g,"");}}s=s.replace(/\./g,"\\.");break;default:s=".*";}if(_de7){_de7.push(_deb);}return "("+s+")";}).replace(/[\xa0 ]/g,"[\\s\\xa0]");};var _dec=[];_da8.addCustomFormats=function(_ded,_dee){_dec.push({pkg:_ded,name:_dee});};_da8._getGregorianBundle=function(_def){var _df0={};_da2.forEach(_dec,function(desc){var _df1=i18n.getLocalization(desc.pkg,desc.name,_def);_df0=lang.mixin(_df0,_df1);},this);return _df0;};_da8.addCustomFormats(_da7.id.replace(/\/date\/locale$/,".cldr"),"gregorian");_da8.getNames=function(item,type,_df2,_df3){var _df4,_df5=_da8._getGregorianBundle(_df3),_df6=[item,_df2,type];if(_df2=="standAlone"){var key=_df6.join("-");_df4=_df5[key];if(_df4[0]==1){_df4=undefined;}}_df6[1]="format";return (_df4||_df5[_df6.join("-")]).concat();};_da8.isWeekend=function(_df7,_df8){var _df9=_da3.getWeekend(_df8),day=(_df7||new Date()).getDay();if(_df9.end<_df9.start){_df9.end+=7;if(day<_df9.start){day+=7;}}return day>=_df9.start&&day<=_df9.end;};_da8._getDayOfYear=function(_dfa){return date.difference(new Date(_dfa.getFullYear(),0,1,_dfa.getHours()),_dfa)+1;};_da8._getWeekOfYear=function(_dfb,_dfc){if(arguments.length==1){_dfc=0;}var _dfd=new Date(_dfb.getFullYear(),0,1).getDay(),adj=(_dfd-_dfc+7)%7,week=Math.floor((_da8._getDayOfYear(_dfb)+adj-1)/7);if(_dfd==_dfc){week++;}return week;};return _da8;});},"dijit/form/VerticalRule":function(){define("dijit/form/VerticalRule",["dojo/_base/declare","./HorizontalRule"],function(_dfe,_dff){return _dfe("dijit.form.VerticalRule",_dff,{templateString:"<div class=\"dijitRuleContainer dijitRuleContainerV\"></div>",_positionPrefix:"<div class=\"dijitRuleMark dijitRuleMarkV\" style=\"top:",_isHorizontal:false});});},"dijit/_base/wai":function(){define("dijit/_base/wai",["dojo/dom-attr","dojo/_base/lang","../main","../hccss"],function(_e00,lang,_e01){var _e02={hasWaiRole:function(elem,role){var _e03=this.getWaiRole(elem);return role?(_e03.indexOf(role)>-1):(_e03.length>0);},getWaiRole:function(elem){return lang.trim((_e00.get(elem,"role")||"").replace("wairole:",""));},setWaiRole:function(elem,role){_e00.set(elem,"role",role);},removeWaiRole:function(elem,role){var _e04=_e00.get(elem,"role");if(!_e04){return;}if(role){var t=lang.trim((" "+_e04+" ").replace(" "+role+" "," "));_e00.set(elem,"role",t);}else{elem.removeAttribute("role");}},hasWaiState:function(elem,_e05){return elem.hasAttribute?elem.hasAttribute("aria-"+_e05):!!elem.getAttribute("aria-"+_e05);},getWaiState:function(elem,_e06){return elem.getAttribute("aria-"+_e06)||"";},setWaiState:function(elem,_e07,_e08){elem.setAttribute("aria-"+_e07,_e08);},removeWaiState:function(elem,_e09){elem.removeAttribute("aria-"+_e09);}};lang.mixin(_e01,_e02);return _e01;});},"esri/utils":function(){define(["dijit","dojo","dojox","dojo/require!dojo/io/script,esri/graphic,dojo/_base/url"],function(_e0a,dojo,_e0b){dojo.provide("esri.utils");dojo.require("dojo.io.script");dojo.require("esri.graphic");dojo.require("dojo._base.url");esri.show=function(node){if(node){node.style.display="block";}};esri.hide=function(node){if(node){node.style.display="none";}};esri.toggle=function(node){node.style.display=node.style.display==="none"?"block":"none";};esri.valueOf=function(_e0c,_e0d){var i;for(i in _e0c){if(_e0c[i]==_e0d){return i;}}return null;};esri.substitute=(function(){var _e0e="${*}",_e0f=["NumberFormat","DateString","DateFormat"];function _e10(_e11){return esri._isDefined(_e11)?_e11:"";};function exec(key,data,_e12){var _e13=_e12.match(/([^\(]+)(\([^\)]+\))?/i);var _e14=dojo.trim(_e13[1]);var args=dojo.fromJson((_e13[2]?dojo.trim(_e13[2]):"()").replace(/^\(/,"({").replace(/\)$/,"})"));var _e15=data[key];if(dojo.indexOf(_e0f,_e14)===-1){var ref=dojo.getObject(_e14);if(dojo.isFunction(ref)){_e15=ref(_e15,key,data);}}else{if(typeof _e15==="number"||(typeof _e15==="string"&&_e15&&!isNaN(Number(_e15)))){_e15=Number(_e15);switch(_e14){case "NumberFormat":if(dojo.getObject("dojo.number.format")){return dojo.number.format(_e15,args);}break;case "DateString":var _e16=new Date(_e15);if(args.local||args.systemLocale){if(args.systemLocale){return _e16.toLocaleDateString()+(args.hideTime?"":(" "+_e16.toLocaleTimeString()));}else{return _e16.toDateString()+(args.hideTime?"":(" "+_e16.toTimeString()));}}else{_e16=_e16.toUTCString();if(args.hideTime){_e16=_e16.replace(/\s+\d\d\:\d\d\:\d\d\s+(utc|gmt)/i,"");}return _e16;}break;case "DateFormat":if(dojo.getObject("dojo.date.locale.format")){return dojo.date.locale.format(new Date(_e15),args);}break;}}}return _e10(_e15);};return function(data,_e17,_e18){var _e19,_e1a,_e1b;if(esri._isDefined(_e18)){if(dojo.isObject(_e18)){_e19=_e18.first;_e1a=_e18.dateFormat;_e1b=_e18.numberFormat;}else{_e19=_e18;}}if(!_e17||_e17===_e0e){var s=[],val,i;for(i in data){val=data[i];if(_e1a&&dojo.indexOf(_e1a.properties||"",i)!==-1){val=exec(i,data,_e1a.formatter||"DateString");}else{if(_e1b&&dojo.indexOf(_e1b.properties||"",i)!==-1){val=exec(i,data,_e1b.formatter||"NumberFormat");}}s.push(i+" = "+_e10(val)+"<br/>");if(_e19){break;}}return s.join("");}else{return dojo.replace(_e17,dojo.hitch({obj:data},function(_e1c,key){var _e1d=key.split(":");if(_e1d.length>1){key=_e1d[0];_e1d.shift();return exec(key,this.obj,_e1d.join(":"));}else{if(_e1a&&dojo.indexOf(_e1a.properties||"",key)!==-1){return exec(key,this.obj,_e1a.formatter||"DateString");}if(_e1b&&dojo.indexOf(_e1b.properties||"",key)!==-1){return exec(key,this.obj,_e1b.formatter||"NumberFormat");}}return _e10(this.obj[key]);}),/\$\{([^\}]+)\}/g);}};}());esri.documentBox=dojo.isIE?{w:document.documentElement.clientWidth,h:document.documentElement.clientHeight}:{w:window.innerWidth,h:window.innerHeight};esri.urlToObject=function(url){var iq=url.indexOf("?");if(iq===-1){return {path:url,query:null};}else{return {path:url.substring(0,iq),query:dojo.queryToObject(url.substring(iq+1))};}};esri._getProxyUrl=function(_e1e){var _e1f=esri.config.defaults.io.proxyUrl,_e20,_e21,_e22;if(!_e1f){console.log(esri.bundle.io.proxyNotSet);throw new Error(esri.bundle.io.proxyNotSet);}if(_e1e&&window.location.href.toLowerCase().indexOf("https:")!==0){_e21=_e1f;if(_e21.toLowerCase().indexOf("http")!==0){_e21=esri._getAbsoluteUrl(_e21);}_e21=_e21.replace(/^http:/i,"https:");if(esri._canDoXOXHR(_e21)){_e1f=_e21;_e22=1;}}_e20=esri.urlToObject(_e1f);_e20._xo=_e22;return _e20;};esri._getProxiedUrl=function(url){if(esri.config.defaults.io.alwaysUseProxy){var _e23=esri._getProxyUrl(),_e24=esri.urlToObject(url);url=_e23.path+"?"+_e24.path;var _e25=dojo.objectToQuery(dojo.mixin(_e23.query||{},_e24.query));if(_e25){url+=("?"+_e25);}}return url;};esri._hasSameOrigin=function(url1,url2,_e26){url1=url1.toLowerCase();url2=url2.toLowerCase();var _e27=window.location.href.toLowerCase();url1=url1.indexOf("http")===0?new dojo._Url(url1):(_e27=new dojo._Url(_e27));url2=url2.indexOf("http")===0?new dojo._Url(url2):(dojo.isString(_e27)?new dojo._Url(_e27):_e27);return ((_e26||(url1.scheme===url2.scheme))&&url1.host===url2.host&&url1.port===url2.port);};esri._canDoXOXHR=function(url,_e28){var _e29=false,_e2a=esri._hasSameOrigin,_e2b=esri.config.defaults.io.corsEnabledServers,_e2c,_e2d=-1;if(esri._hasCors&&_e2b&&_e2b.length){_e29=dojo.some(_e2b,function(_e2e,idx){_e2c=(dojo.trim(_e2e).toLowerCase().indexOf("http")!==0);if(_e2a(url,_e2c?("http://"+_e2e):_e2e)||(_e2c&&_e2a(url,"https://"+_e2e))){_e2d=idx;return true;}return false;});}return _e28?_e2d:_e29;};esri.request=function(req,_e2f){var dfd,form=req.form,_e30=_e2f&&_e2f.disableIdentityLookup,_e31=_e2f&&_e2f._preLookup,_e32=form&&form.append,_e33=form&&(form.elements?dojo.some(form.elements,function(el){return el.type==="file";}):_e32),_e34=(req.url.toLowerCase().indexOf("token=")!==-1||(req.content&&req.content.token)||(_e33&&dojo.some(form.elements,function(el){return el.name==="token";})))?1:0;esri._detectCors(req.url);if(req._usrDfd){dfd=req._usrDfd;}else{dfd=new dojo.Deferred(esri._dfdCanceller);dfd.addBoth(function(_e35){if(_e35&&(!dojo.isIE||!_e35.nodeType)){_e35._ssl=req._ssl;}});var ld=req.load,_e36=req.error;if(ld){dfd.addCallback(function(_e37){var _e38=dfd._pendingDfd,_e39=_e38&&_e38.ioArgs,args=_e39&&_e39.args;return ld.call(args,_e37,_e39);});}if(_e36){dfd.addErrback(function(_e3a){var _e3b=dfd._pendingDfd,_e3c=_e3b&&_e3b.ioArgs,args=_e3c&&_e3c.args;return _e36.call(args,_e3a,_e3c);});}}if(esri.id&&!_e34&&!req._token&&!esri.id._isPublic(req.url)&&(!_e30||_e31)){var _e3d=esri.id.findCredential(req.url);if(_e3d){req._token=_e3d.token;req._ssl=_e3d.ssl;}}dfd._pendingDfd=esri._request(req,_e2f,_e33,_e32);if(!dfd._pendingDfd){dfd.ioArgs=dfd._pendingDfd&&dfd._pendingDfd.ioArgs;var err=new Error("Deferred object is missing");err.log=dojo.config.isDebug;req._usrDfd=null;dfd.errback(err);dfd._pendingDfd=null;return dfd;}dfd._pendingDfd.addCallback(function(_e3e){dfd.ioArgs=dfd._pendingDfd&&dfd._pendingDfd.ioArgs;req._usrDfd=null;dfd.callback(_e3e);dfd._pendingDfd=null;}).addErrback(function(_e3f){if(_e3f&&_e3f.code==403&&_e3f.message&&_e3f.message.toLowerCase().indexOf("ssl")>-1&&_e3f.message.toLowerCase().indexOf("permission")===-1){if(!req._ssl){req._ssl=req._sslFromServer=true;req._usrDfd=dfd;esri.request(req,_e2f);return;}}else{if(_e3f&&_e3f.status==415){var _e40=esri._disableCors(req.url);if(!req._err415){req._err415=1;req._usrDfd=dfd;esri.request(req,_e2f);return;}}else{if(esri.id&&dojo.indexOf(esri.id._errorCodes,_e3f.code)!==-1&&!esri.id._isPublic(req.url)&&!_e30){dfd._pendingDfd=esri.id.getCredential(req.url,{token:req._token,error:_e3f});dfd._pendingDfd.addCallback(function(_e41){req._token=_e41.token;req._usrDfd=dfd;req._ssl=req._sslFromServer||_e41.ssl;esri.request(req,_e2f);}).addErrback(function(_e42){req._usrDfd=null;dfd.errback(_e42);dfd._pendingDfd=null;});return;}}}dfd.ioArgs=dfd._pendingDfd&&dfd._pendingDfd.ioArgs;req._usrDfd=null;dfd.errback(_e3f);dfd._pendingDfd=null;});return dfd;};esri._request=function(req,_e43,_e44,_e45){var _e46=false,_e47=false;if(esri._isDefined(_e43)){if(dojo.isObject(_e43)){_e46=!!_e43.useProxy;_e47=!!_e43.usePost;}else{_e46=!!_e43;}}req=dojo.mixin({},req);if(req._ssl){req.url=req.url.replace(/^http:/i,"https:");}var _e48=req.content,path=req.url,form=_e44&&req.form,_e49=esri.config.defaults.io;req.load=function(_e4a){var err;if(_e4a){if(_e4a.error){err=dojo.mixin(new Error(),_e4a.error);err.log=dojo.config.isDebug;}else{if(_e4a.status==="error"){err=dojo.mixin(new Error(),{code:_e4a.code,message:_e4a.messages&&_e4a.messages.join&&_e4a.messages.join(".")});err.log=dojo.config.isDebug;}}}return err||_e4a;};req.error=function(_e4b,io){if(io&&io.xhr){io.xhr.abort();}if(!(_e4b instanceof Error)){_e4b=dojo.mixin(new Error(),_e4b);}_e4b.log=dojo.config.isDebug;_e49.errorHandler(_e4b,io);return _e4b;};if(req._token){req.content=req.content||{};req.content.token=req._token;}var len=0;if(_e48&&path){len=dojo.objectToQuery(_e48).length+path.length+1;}req.timeout=esri._isDefined(req.timeout)?req.timeout:_e49.timeout;req.handleAs=req.handleAs||"json";try{var _e4c,_e4d,_e4e=esri._reqPreCallback,_e4f=esri._canDoXOXHR(req.url)&&!(/https?:\/\/[^\/]+\/[^\/]+\/admin\/?(\/.*)?$/i.test(req.url)),_e50=(esri._hasSameOrigin(req.url,window.location.href)||_e4f),_e51=(_e47||_e44||len>_e49.postLength)?true:false,_e52=(!_e50&&req.handleAs.indexOf("json")!==-1&&req.callbackParamName&&!_e44)?true:false,_e53=(_e49.alwaysUseProxy||_e46||((!_e52||_e51)&&!_e50))?true:false;if(_e44&&!esri._hasFileUpload&&!_e53&&_e4f){_e53=true;}if(_e53){_e4c=esri._getProxyUrl(dojo.trim(path).toLowerCase().indexOf("https:")===0);_e4d=_e4c.path;if(_e4c._xo){_e4f=true;}if(!_e51&&(_e4d.length+1+len)>_e49.postLength){_e51=true;}req.url=_e4d+"?"+path;if(_e51){req.content=dojo.mixin(_e4c.query||{},_e48);}else{var _e54=dojo.objectToQuery(dojo.mixin(_e4c.query||{},_e48));if(_e54){req.url+=("?"+_e54);}req.content=null;}}if(_e52&&!_e51){if(!esri._isDefined(req.isAsync)&&dojo.isFF<4){req.isAsync=true;}return dojo.io.script.get(_e4e?_e4e(req):req);}else{var hdrs=req.headers;if(_e4f&&(!hdrs||!hdrs.hasOwnProperty("X-Requested-With"))){hdrs=req.headers=(hdrs||{});hdrs["X-Requested-With"]=null;}if(_e44){var _e55=req.callbackParamName||"callback.html",_e56=req.callbackElementName||"textarea",_e57,_e58,_e59,i,il=form.elements?form.elements.length:0,el;_e48=req.content;if(_e48){for(_e57 in _e48){_e59=_e48[_e57];if(esri._isDefined(_e59)){_e58=null;for(i=0;i<il;i++){el=form.elements[i];if(el.name===_e57){_e58=el;break;}}if(_e58){_e58.value=_e59;}else{if(_e45){form.append(_e57,_e59);}else{form.appendChild(dojo.create("input",{type:"hidden",name:_e57,value:_e59}));}}}}}if(esri._hasFileUpload){dojo.forEach(form.elements,function(el){if(el.name===_e55){form.removeChild(el);}});req.contentType=false;req.postData=_e45?form:new FormData(form);delete req.form;}else{form.enctype="multipart/form-data";if(dojo.isIE<9){form.encoding="multipart/form-data";}form.method="post";if(!dojo.some(form.elements,function(el){return el.name===_e55;})){form.appendChild(dojo.create("input",{type:"hidden",name:_e55,value:_e56}));}if(path.toLowerCase().indexOf("addattachment")!==-1||path.toLowerCase().indexOf("updateattachment")!==-1){req.url=path+((path.indexOf("?")===-1)?"?":"&")+_e55+"="+_e56;if(_e53){req.url=_e4d+"?"+req.url;}}delete req.content;}}req=_e4e?_e4e(req):req;if(_e51){if(_e44&&!esri._hasFileUpload){return dojo.io.iframe.send(req);}else{return dojo.rawXhrPost(req);}}else{return dojo.xhrGet(req);}}}catch(e){var dfd=new dojo.Deferred();dfd.errback(req.error(e));return dfd;}};esri._disableCors=function(url){var _e5a=esri.config.defaults.io,_e5b=_e5a._processedCorsServers,_e5c=new dojo._Url(url),_e5d=-1;_e5c=(_e5c.host+(_e5c.port?(":"+_e5c.port):"")).toLowerCase();_e5d=esri._canDoXOXHR(url,true);if(_e5d>-1){_e5a.corsEnabledServers.splice(_e5d,1);}_e5b[_e5c]=1;return _e5d;};esri._detectCors=function(url){var _e5e=esri.config.defaults.io,_e5f=_e5e._processedCorsServers;if(!_e5e.corsDetection){return;}try{var _e60=new dojo._Url(url);_e60=(_e60.host+(_e60.port?(":"+_e60.port):"")).toLowerCase();if(esri._hasCors&&(url&&url.toLowerCase().indexOf("/rest/services")!==-1)&&(!esri._hasSameOrigin(url,window.location.href)&&!esri._canDoXOXHR(url))&&!_e5f[_e60]){_e5f[_e60]=-1;dojo.xhrGet({url:url.substring(0,url.toLowerCase().indexOf("/rest/")+"/rest/".length)+"info",content:{f:"json"},failOk:true,handleAs:"json",headers:{"X-Requested-With":null}}).then(function(_e61){if(_e61){_e5f[_e60]=2;if(!esri._canDoXOXHR(url)){_e5e.corsEnabledServers.push(_e60);}}else{_e5f[_e60]=1;}},function(_e62){_e5f[_e60]=1;});}}catch(e){console.log("esri._detectCors: an unknown error occurred while detecting CORS support");}};esri.setRequestPreCallback=function(_e63){esri._reqPreCallback=_e63;};esri._getParts=function(arr,obj,cb){return [dojo.isString(arr)?arr.split(""):arr,obj||dojo.global,dojo.isString(cb)?new Function("item","index","array",cb):cb];};esri.filter=function(arr,_e64,_e65){var _e66=esri._getParts(arr,_e65,_e64),_e67={},i;arr=_e66[0];for(i in arr){if(_e66[2].call(_e66[i],arr[i],i,arr)){_e67[i]=arr[i];}}return _e67;};esri.TileUtils=(function(){function _e68(map,ti,_e69){var wd=map.width,ht=map.height,ew=_e69.xmax-_e69.xmin,eh=_e69.ymax-_e69.ymin,_e6a=map.getMinZoom(),_e6b=map.getMaxZoom(),ed=-1,lods=ti.lods,i,abs=Math.abs,lod,cl,ced;_e6a=(_e6a>-1)?_e6a:0;_e6b=(_e6b>-1)?_e6b:(lods.length-1);for(i=_e6a;i<=_e6b;i++){cl=lods[i];if(!cl){continue;}ced=ew>eh?abs(eh-(ht*cl.resolution)):abs(ew-(wd*cl.resolution));if(ed<0||ced<=ed){lod=cl;ed=ced;}else{break;}}return lod;};function _e6c(map,_e6d,lod){var res=lod.resolution,cx=(_e6d.xmin+_e6d.xmax)/2,cy=(_e6d.ymin+_e6d.ymax)/2,_e6e=(map.width/2)*res,_e6f=(map.height/2)*res;return new esri.geometry.Extent(cx-_e6e,cy-_e6f,cx+_e6e,cy+_e6f,_e6d.spatialReference);};function _e70(map,ti,_e71,lod){var res=lod.resolution,tw=ti.width,th=ti.height,to=ti.origin,mv=map.__visibleDelta,_e72=Math.floor,tmw=tw*res,tmh=th*res,tr=_e72((to.y-_e71.y)/tmh),tc=_e72((_e71.x-to.x)/tmw),tmox=to.x+(tc*tmw),tmoy=to.y-(tr*tmh),oX=_e72(Math.abs((_e71.x-tmox)*tw/tmw))+mv.x,oY=_e72(Math.abs((_e71.y-tmoy)*th/tmh))+mv.y;return {point:_e71,coords:{row:tr,col:tc},offsets:{x:oX,y:oY}};};return {_addFrameInfo:function(_e73,_e74){var _e75,_e76,_e77=2*_e74.origin[1],m180=_e74.origin[0],_e78=_e73.origin.x,_e79=_e73.width,_e7a;dojo.forEach(_e73.lods,function(lod){_e75=Math.round(_e77/lod.resolution);_e76=Math.ceil(_e75/_e79);_e7a=Math.floor((m180-_e78)/(_e79*lod.resolution));if(!lod._frameInfo){lod._frameInfo=[_e76,_e7a,_e7a+_e76-1,_e75];}});},getContainingTileCoords:function(ti,_e7b,lod){var to=ti.origin,res=lod.resolution,tmw=ti.width*res,tmh=ti.height*res,tc=Math.floor((_e7b.x-to.x)/tmw),tr=Math.floor((to.y-_e7b.y)/tmh);return {row:tr,col:tc};},getCandidateTileInfo:function(map,ti,_e7c){var lod=_e68(map,ti,_e7c),adj=_e6c(map,_e7c,lod),ct=_e70(map,ti,new esri.geometry.Point(adj.xmin,adj.ymax,_e7c.spatialReference),lod);return {tile:ct,lod:lod,extent:adj};},getTileExtent:function(ti,_e7d,row,col){var to=ti.origin,lod=ti.lods[_e7d],res=lod.resolution,tw=ti.width,th=ti.height;return new esri.geometry.Extent(((col*res)*tw)+to.x,to.y-((row+1)*res)*th,(((col+1)*res)*tw)+to.x,to.y-((row*res)*th),ti.spatialReference);}};}());esri.graphicsExtent=function(_e7e){var g=_e7e[0].geometry,_e7f=g.getExtent(),ext,i,il=_e7e.length;if(_e7f===null){_e7f=new esri.geometry.Extent(g.x,g.y,g.x,g.y,g.spatialReference);}for(i=1;i<il;i++){ext=(g=_e7e[i].geometry).getExtent();if(ext===null){ext=new esri.geometry.Extent(g.x,g.y,g.x,g.y,g.spatialReference);}_e7f=_e7f.union(ext);}if(_e7f.getWidth()<=0&&_e7f.getHeight()<=0){return null;}return _e7f;};esri.getGeometries=function(_e80){return dojo.map(_e80,function(_e81){return _e81.geometry;});};esri._encodeGraphics=function(_e82,_e83){var _e84=[],json,enc,norm;dojo.forEach(_e82,function(g,i){json=g.toJson();enc={};if(json.geometry){norm=_e83&&_e83[i];enc.geometry=norm&&norm.toJson()||json.geometry;}if(json.attributes){enc.attributes=json.attributes;}_e84[i]=enc;});return _e84;};esri._serializeLayerDefinitions=function(_e85){var defs=[],_e86=false,re=/[:;]/;if(_e85){dojo.forEach(_e85,function(defn,i){if(defn){defs.push([i,defn]);if(!_e86&&re.test(defn)){_e86=true;}}});if(defs.length>0){var _e87;if(_e86){_e87={};dojo.forEach(defs,function(defn){_e87[defn[0]]=defn[1];});_e87=dojo.toJson(_e87);}else{_e87=[];dojo.forEach(defs,function(defn){_e87.push(defn[0]+":"+defn[1]);});_e87=_e87.join(";");}return _e87;}}return null;};esri._serializeTimeOptions=function(_e88,ids){if(!_e88){return;}var _e89=[];dojo.forEach(_e88,function(_e8a,i){if(_e8a){var json=_e8a.toJson();if(ids&&dojo.indexOf(ids,i)!==-1){json.useTime=false;}_e89.push("\""+i+"\":"+dojo.toJson(json));}});if(_e89.length){return "{"+_e89.join(",")+"}";}};esri.isDefined=esri._isDefined=function(_e8b){return (_e8b!==undefined)&&(_e8b!==null);};esri._sanitize=function(obj,_e8c){var prop;if(_e8c){for(prop in obj){if(obj.hasOwnProperty(prop)){if(obj[prop]===undefined||obj[prop]===null){delete obj[prop];}else{if(obj[prop] instanceof Object){esri._sanitize(obj[prop],true);}}}}}else{for(prop in obj){if(obj.hasOwnProperty(prop)){if(obj[prop]===undefined){delete obj[prop];}}}}return obj;};esri._dfdCanceller=function(dfd){dfd.canceled=true;var _e8d=dfd._pendingDfd;if(dfd.fired===-1&&_e8d&&_e8d.fired===-1){_e8d.cancel();}dfd._pendingDfd=null;};esri._fixDfd=function(dfd){var _e8e=dfd.then;dfd.then=function(_e8f,b,c){if(_e8f){var _e90=_e8f;_e8f=function(_e91){if(_e91&&_e91._argsArray){return _e90.apply(null,_e91);}return _e90(_e91);};}return _e8e.call(this,_e8f,b,c);};return dfd;};esri._resDfd=function(dfd,args,_e92){var _e93=args.length;if(_e93===1){if(_e92){dfd.errback(args[0]);}else{dfd.callback(args[0]);}}else{if(_e93>1){args._argsArray=true;dfd.callback(args);}else{dfd.callback();}}};esri._createWrappers=function(_e94){var _e95=dojo.getObject(_e94+".prototype");dojo.forEach(_e95.__msigns,function(sig){var _e96=_e95[sig.n];_e95[sig.n]=function(){var self=this,_e97=[],i,_e98=new dojo.Deferred(esri._dfdCanceller);if(sig.f){esri._fixDfd(_e98);}for(i=0;i<sig.c;i++){_e97[i]=arguments[i];}var _e99={dfd:_e98};_e97.push(_e99);var _e9a,_e9b=[],_e9c;if(self.normalization&&!self._isTable){_e9a=esri._disassemble(_e97,sig.a);dojo.forEach(_e9a,function(comp){_e9b=_e9b.concat(comp.value);});if(_e9b.length){_e9c=esri.geometry.normalizeCentralMeridian(_e9b,esri.config.defaults.geometryService);}}if(_e9c){_e98._pendingDfd=_e9c;_e9c.addCallbacks(function(_e9d){if(_e98.canceled){return;}_e99.assembly=esri._reassemble(_e9d,_e9a);_e98._pendingDfd=_e96.apply(self,_e97);},function(err){var _e9e=self.declaredClass;if(_e9e&&_e9e.indexOf("FeatureLayer")!==-1){self._resolve([err],null,_e97[sig.e],_e98,true);}else{self._errorHandler(err,_e97[sig.e],_e98);}});}else{_e98._pendingDfd=_e96.apply(self,_e97);}return _e98;};});};esri._disassemble=function(_e9f,_ea0){var _ea1=[];dojo.forEach(_ea0,function(_ea2){var _ea3=_ea2.i,arg=_e9f[_ea3],_ea4=_ea2.p,prop;if(!dojo.isObject(arg)||!arg){return;}if(_ea4){if(_ea4[0]==="*"){for(prop in arg){if(arg.hasOwnProperty(prop)){esri._addToBucket(arg[prop],_ea1,_ea3,prop);}}}else{dojo.forEach(_ea4,function(prop){esri._addToBucket(dojo.getObject(prop,false,arg),_ea1,_ea3,prop);});}}else{esri._addToBucket(arg,_ea1,_ea3);}});return _ea1;};esri._addToBucket=function(_ea5,_ea6,_ea7,_ea8){var flag=false,_ea9;if(dojo.isObject(_ea5)&&_ea5){if(dojo.isArray(_ea5)){if(_ea5.length){_ea9=_ea5[0]&&_ea5[0].declaredClass;if(_ea9&&_ea9.indexOf("Graphic")!==-1){_ea5=dojo.map(_ea5,function(_eaa){return _eaa.geometry;});flag=_ea5.length?true:false;}else{if(_ea9&&_ea9.indexOf("esri.geometry.")!==-1){flag=true;}}}}else{_ea9=_ea5.declaredClass;if(_ea9&&_ea9.indexOf("FeatureSet")!==-1){_ea5=dojo.map(_ea5.features||[],function(_eab){return _eab.geometry;});flag=_ea5.length?true:false;}else{if(_ea9&&_ea9.indexOf("esri.geometry.")!==-1){flag=true;}}}}if(flag){_ea6.push({index:_ea7,property:_ea8,value:_ea5});}};esri._reassemble=function(_eac,_ead){var idx=0,_eae={};dojo.forEach(_ead,function(comp){var _eaf=comp.index,_eb0=comp.property,_eb1=comp.value,len=_eb1.length||1;var _eb2=_eac.slice(idx,idx+len);if(!dojo.isArray(_eb1)){_eb2=_eb2[0];}idx+=len;delete comp.value;if(_eb0){_eae[_eaf]=_eae[_eaf]||{};_eae[_eaf][_eb0]=_eb2;}else{_eae[_eaf]=_eb2;}});return _eae;};esri.setScrollable=function(node){var _eb3=0,_eb4=0,_eb5=0,_eb6=0,_eb7=0,_eb8=0;return [dojo.connect(node,"ontouchstart",function(evt){_eb3=evt.touches[0].screenX;_eb4=evt.touches[0].screenY;_eb5=node.scrollWidth;_eb6=node.scrollHeight;_eb7=node.clientWidth;_eb8=node.clientHeight;}),dojo.connect(node,"ontouchmove",function(evt){evt.preventDefault();var _eb9=node.firstChild;if(_eb9 instanceof Text){_eb9=node.childNodes[1];}var _eba=_eb9._currentX||0,_ebb=_eb9._currentY||0;_eba+=(evt.touches[0].screenX-_eb3);if(_eba>0){_eba=0;}else{if(_eba<0&&(Math.abs(_eba)+_eb7)>_eb5){_eba=-1*(_eb5-_eb7);}}_eb9._currentX=_eba;_ebb+=(evt.touches[0].screenY-_eb4);if(_ebb>0){_ebb=0;}else{if(_ebb<0&&(Math.abs(_ebb)+_eb8)>_eb6){_ebb=-1*(_eb6-_eb8);}}_eb9._currentY=_ebb;dojo.style(_eb9,{"-webkit-transition-property":"-webkit-transform","-webkit-transform":"translate("+_eba+"px, "+_ebb+"px)"});_eb3=evt.touches[0].screenX;_eb4=evt.touches[0].screenY;})];};esri._getAbsoluteUrl=function(url){if(dojo.isString(url)&&url.indexOf("http://")===-1&&url.indexOf("https://")===-1){if(url.indexOf("//")===0){return window.location.protocol+url;}else{if(url.indexOf("/")===0){return window.location.protocol+"//"+window.location.host+url;}else{return esri._appBaseUrl+url;}}}return url;};esri._getDefaultVisibleLayers=function(_ebc){var _ebd=[],i;if(!_ebc){return _ebd;}for(i=0;i<_ebc.length;i++){if(_ebc[i].parentLayerId>=0&&dojo.indexOf(_ebd,_ebc[i].parentLayerId)===-1){continue;}if(_ebc[i].defaultVisibility){_ebd.push(_ebc[i].id);}}return _ebd;};esri._getLayersForScale=function(_ebe,_ebf){var _ec0=[];if(_ebe>0&&_ebf){var i;for(i=0;i<_ebf.length;i++){if(_ebf[i].parentLayerId>=0&&dojo.indexOf(_ec0,_ebf[i].parentLayerId)===-1){continue;}if(_ebf[i].id>=0){var _ec1=true,_ec2=_ebf[i].maxScale,_ec3=_ebf[i].minScale;if(_ec2>0||_ec3>0){if(_ec2>0&&_ec3>0){_ec1=_ec2<=_ebe&&_ebe<=_ec3;}else{if(_ec2>0){_ec1=_ec2<=_ebe;}else{if(_ec3>0){_ec1=_ebe<=_ec3;}}}}if(_ec1){_ec0.push(_ebf[i].id);}}}}return _ec0;};});},"dijit/form/_FormWidget":function(){define("dijit/form/_FormWidget",["dojo/_base/declare","dojo/has","dojo/_base/kernel","dojo/ready","../_Widget","../_CssStateMixin","../_TemplatedMixin","./_FormWidgetMixin"],function(_ec4,has,_ec5,_ec6,_ec7,_ec8,_ec9,_eca){if(has("dijit-legacy-requires")){_ec6(0,function(){var _ecb=["dijit/form/_FormValueWidget"];require(_ecb);});}return _ec4("dijit.form._FormWidget",[_ec7,_ec9,_ec8,_eca],{setDisabled:function(_ecc){_ec5.deprecated("setDisabled("+_ecc+") is deprecated. Use set('disabled',"+_ecc+") instead.","","2.0");this.set("disabled",_ecc);},setValue:function(_ecd){_ec5.deprecated("dijit.form._FormWidget:setValue("+_ecd+") is deprecated.  Use set('value',"+_ecd+") instead.","","2.0");this.set("value",_ecd);},getValue:function(){_ec5.deprecated(this.declaredClass+"::getValue() is deprecated. Use get('value') instead.","","2.0");return this.get("value");},postMixInProperties:function(){this.nameAttrSetting=this.name?("name=\""+this.name.replace(/"/g,"&quot;")+"\""):"";this.inherited(arguments);},_setTypeAttr:null});});},"dojo/dnd/common":function(){define(["../_base/connect","../_base/kernel","../_base/lang","../dom"],function(_ece,_ecf,lang,dom){var _ed0={};_ed0.getCopyKeyState=_ece.isCopyKey;_ed0._uniqueId=0;_ed0.getUniqueId=function(){var id;do{id=_ecf._scopeName+"Unique"+(++_ed0._uniqueId);}while(dom.byId(id));return id;};_ed0._empty={};_ed0.isFormElement=function(e){var t=e.target;if(t.nodeType==3){t=t.parentNode;}return " button textarea input select option ".indexOf(" "+t.tagName.toLowerCase()+" ")>=0;};lang.mixin(lang.getObject("dojo.dnd",true),_ed0);return _ed0;});},"esri/layers/tiled":function(){define(["dijit","dojo","dojox","dojo/require!dojox/collections/ArrayList,esri/layers/layer,esri/geometry,dojox/gfx/matrix"],function(_ed1,dojo,_ed2){dojo.provide("esri.layers.tiled");dojo.require("dojox.collections.ArrayList");dojo.require("esri.layers.layer");dojo.require("esri.geometry");dojo.require("dojox.gfx.matrix");dojo.declare("esri.layers.TiledMapServiceLayer",esri.layers.Layer,{constructor:function(url,_ed3){dojo.connect(this,"onLoad",this,"_initTiledLayer");this._displayLevels=_ed3?_ed3.displayLevels:null;var dh=dojo.hitch;this._addImage=dh(this,this._addImage);this._tileLoadHandler=dh(this,this._tileLoadHandler);this._tileErrorHandler=dh(this,this._tileErrorHandler);this._tilePopPop=dh(this,this._tilePopPop);this._cleanUpRemovedImages=dh(this,this._cleanUpRemovedImages);this._fireOnUpdateEvent=dh(this,this._fireOnUpdateEvent);this._transitionEnd=dh(this,this._transitionEnd);},opacity:1,isPNG32:false,_initTiledLayer:function(){var ti=this.tileInfo,lods=ti.lods;this._tileW=ti.width;this._tileH=ti.height;var _ed4=(this.scales=[]),dl=this._displayLevels,_ed5=(this.declaredClass==="esri.layers.WMTSLayer"&&ti.dpi!=96),_ed6=-Infinity,_ed7=Infinity,fe=this.fullExtent,ul=new esri.geometry.Point(fe.xmin,fe.ymax),lr=new esri.geometry.Point(fe.xmax,fe.ymin),gctc=esri.TileUtils.getContainingTileCoords,_ed8,lod,i,len=lods.length;for(i=0;i<len;i++){lod=lods[i];if(_ed5){lod.scale=lod.scale*96/ti.dpi;}_ed8=gctc(ti,ul,lod);lod.startTileRow=_ed8.row<0?0:_ed8.row;lod.startTileCol=_ed8.col<0?0:_ed8.col;_ed8=gctc(ti,lr,lod);lod.endTileRow=_ed8.row;lod.endTileCol=_ed8.col;if(!dl||dojo.indexOf(dl,lod.level)!==-1){_ed4[i]=lod.scale;_ed6=(lod.scale>_ed6)?lod.scale:_ed6;_ed7=(lod.scale<_ed7)?lod.scale:_ed7;}}if(_ed5){ti.dpi=96;}if(_ed6!==-Infinity&&!this._hasMin){this.setMinScale(_ed6);}if(_ed7!==Infinity&&!this._hasMax){this.setMaxScale(_ed7);}this._patchIE=dojo.isIE>=6&&dojo.isIE<7&&(this.isPNG32||ti.format==="Mixed");},_isMapAtVisibleScale:function(){var _ed9=this.inherited(arguments);if(_ed9){var i,map=this._map,_eda=this.scales,_edb=map.getScale(),_edc=false,_edd=(map.width>map.height)?map.width:map.height;for(i=0;i<_eda.length;i++){if((Math.abs(_eda[i]-_edb)/_eda[i])<(1/_edd)){_edc=true;break;}}_ed9=_edc;}return _ed9;},_setMap:function(map,_ede,_edf,lod){this.inherited(arguments);this._map=map;var d=(this._div=dojo.create("div",null,_ede)),_ee0=map.__visibleDelta,dc=dojo.connect,_ee1=esri._css.names,css={position:"absolute",width:map.width+"px",height:map.height+"px",overflow:"visible"};if(map.navigationMode==="css-transforms"){css[_ee1.transform]=esri._css.translate(-_ee0.x,-_ee0.y);dojo.style(d,css);delete css[_ee1.transform];css[_ee1.transition]=_ee1.transformName+" "+esri.config.defaults.map.zoomDuration+"ms ease";dojo.style((this._active=dojo.create("div",null,d)),css);this._active._remove=0;this._passives=[];}else{css.left=-_ee0.x+"px";css.top=-_ee0.y+"px";dojo.style(d,css);}this._onResizeHandler_connect=dc(map,"onResize",this,"_onResizeHandler");this._opacityChangeHandler_connect=dc(this,"onOpacityChange",this,"_opacityChangeHandler");var _ee2=this.tileInfo,sr=_ee2.spatialReference,info=sr._getInfo();this._wrap=map.wrapAround180&&sr._isWrappable()&&Math.abs(info.origin[0]-_ee2.origin.x)<=info.dx;if(this._wrap){esri.TileUtils._addFrameInfo(_ee2,info);}this.evaluateSuspension();if(this.suspended&&!map.loaded){var _ee3=dojo.connect(map,"onLoad",this,function(){dojo.disconnect(_ee3);_ee3=null;this.evaluateSuspension();});}return d;},_unsetMap:function(map,_ee4){if(!this.suspended){this._suspendImpl();}dojo.destroy(this._div);this._map=this._div=null;var dd=dojo.disconnect;dd(this._onResizeHandler_connect);dd(this._opacityChangeHandler_connect);this.inherited(arguments);},onSuspend:function(){this.inherited(arguments);this._suspendImpl();},_suspendImpl:function(){esri.hide(this._div);clearTimeout(this._wakeTimer);this._wakeTimer=null;this._disableDrawConnectors();var _ee5=this._tiles,_ee6=this._tileIds,_ee7=this._loadingList,img,i,id,_ee8=dojo.disconnect,_ee9=dojo.destroy;if(_ee7&&_ee7.count>0){_ee7.forEach(function(_eea){img=_ee5[_eea];if(img){_ee8(img._onload_connect);_ee8(img._onerror_connect);_ee8(img._onabort_connect);img._onload_connect=img._onerror_connect=img._onabort_connect=null;}});_ee7.clear();this._fireUpdateEnd();}this._removeList.clear();for(i=_ee6.length-1;i>=0;i--){id=_ee6[i];img=id&&_ee5[id];if(img){_ee9(img);}}if(this._map.navigationMode==="css-transforms"){var _eeb=this._active,_eec=this._passives,_eed;this._noDom=0;for(i=_eec.length-1;i>=0;i--){_eed=_eec[i];if(_eed._endHandle){_ee8(_eed._endHandle);}_eed._matrix=_eed._multiply=_eed._endHandle=null;_eed._marked=_eed._remove=0;_eec.splice(i,1);_ee9(_eed);}_eeb._matrix=_eeb._multiply=null;_eeb._marked=_eeb._remove=0;}this._tileIds=this._tiles=this._tileBounds=this._ct=this._loadingList=this._removeList=this._standby=null;},onResume:function(){this.inherited(arguments);this._tileIds=[];this._tiles=[];this._tileBounds=[];this._ct=null;this._removeList=new _ed2.collections.ArrayList();this._loadingList=new _ed2.collections.ArrayList();esri.show(this._div);this._enableDrawConnectors();this._wakeTimer=this._wakeTimer||setTimeout(dojo.hitch(this,function(){if(!this.suspended){this._onExtentChangeHandler(this._map.extent,null,true,this._map.__LOD);}}),0);},_enableDrawConnectors:function(){var map=this._map,_eee=dojo.connect;if(map.navigationMode==="css-transforms"){this._onScaleHandler_connect=_eee(map,"onScale",this,this._onScaleHandler);if(esri.isTouchEnabled){this._standby=[];var self=this,_eef=function(){self._noDom=1;};this._onPanStartHandler_connect=_eee(map,"onPanStart",_eef);this._onZoomStartHandler_connect=_eee(map,"onZoomStart",_eef);}}else{this._onZoomHandler_connect=_eee(map,"onZoom",this,"_onZoomHandler");}this._onPanHandler_connect=_eee(map,"onPan",this,"_onPanHandler");this._onExtentChangeHandler_connect=_eee(map,"onExtentChange",this,"_onExtentChangeHandler");},_disableDrawConnectors:function(){var _ef0=dojo.disconnect;_ef0(this._onPanHandler_connect);_ef0(this._onZoomHandler_connect);_ef0(this._onScaleHandler_connect);_ef0(this._onExtentChangeHandler_connect);_ef0(this._onPanStartHandler_connect);_ef0(this._onZoomStartHandler_connect);this._onPanHandler_connect=this._onZoomHandler_connect=this._onScaleHandler_connect=this._onExtentChangeHandler_connect=this._onPanStartHandler_connect=this._onZoomStartHandler_connect=null;},_onResizeHandler:function(_ef1,_ef2,_ef3){var css={width:_ef2+"px",height:_ef3+"px"},ds=dojo.style,i;ds(this._div,css);if(this._map.navigationMode==="css-transforms"){if(this._active){ds(this._active,css);}for(i=this._passives.length-1;i>=0;i--){ds(this._passives[i],css);}}},_onExtentChangeHandler:function(_ef4,_ef5,_ef6,lod){var map=this._map,i,_ef7=this._standby,img,_ef8;clearTimeout(this._wakeTimer);this._wakeTimer=null;if(map._isPanningOrZooming()){return;}if(map.navigationMode==="css-transforms"){if(_ef6){for(i=this._passives.length-1;i>=0;i--){_ef8=this._passives[i];dojo.style(_ef8,esri._css.names.transition,"none");if(_ef8._marked){this._passives.splice(i,1);if(_ef8.parentNode){_ef8.parentNode.removeChild(_ef8);}dojo.destroy(_ef8);}else{if(_ef8.childNodes.length>0){_ef8._multiply=_ef8._multiply?_ed2.gfx.matrix.multiply(_ef8._matrix,_ef8._multiply):_ef8._matrix;}}}}this._noDom=0;if(_ef7&&_ef7.length){for(i=_ef7.length-1;i>=0;i--){img=_ef7[i];dojo.style(img,"visibility","visible");this._tilePopPop(img);_ef7.splice(i,1);}}}this._fireUpdateStart();this._rrIndex=0;var ct=esri.TileUtils.getCandidateTileInfo(map,this.tileInfo,_ef4),mv=map.__visibleDelta,id;if(!this._ct||ct.lod.level!==this._ct.lod.level||_ef6){var _ef9=(ct&&this._ct&&ct.lod.level!==this._ct.lod.level);this._ct=ct;var _efa=this._tiles,_efb=this._tileIds,_efc=this._tileBounds,_efd=this._removeList,tile,il=_efb.length;this._cleanUpRemovedImages();for(i=0;i<il;i++){id=_efb[i];tile=_efa[id];_efc[id]=_efb[i]=null;if((map.navigationMode==="css-transforms")&&_ef9&&tile.parentNode&&map.fadeOnZoom){tile._fadeOut=_ef9;tile.parentNode._remove++;}_efd.add(tile);}if(_ef6){this._tileIds=[];this._tiles=[];this._tileBounds=[];}}var mx=mv.x,my=mv.y;if(map.navigationMode==="css-transforms"){var css={};css[esri._css.names.transform]=esri._css.translate(mx,my);dojo.style(this._div,css);}else{dojo.style(this._div,{left:mx+"px",top:my+"px"});}this.__coords_dx=mx;this.__coords_dy=my;this._updateImages(new esri.geometry.Rect(0,0,mv.width,mv.height));if(this._loadingList.count===0){this.onUpdate();this._fireUpdateEnd();}else{this._fireOnUpdate=true;}var _efe,rect,_eff=this._tileW,_f00=this._tileH;mv=new esri.geometry.Rect(-mv.x,-mv.y,mv.width,mv.height);for(i=this._tileIds.length-1;i>=0;i--){id=this._tileIds[i];if(id){img=this._tiles[id];_efe=dojo.coords(img);rect=new esri.geometry.Rect(_efe.l,_efe.t,_eff,_f00);if(map.navigationMode==="css-transforms"){rect.x=img._left;rect.y=img._top;}if(mv.intersects(rect)){this._tileBounds[id]=rect;}else{if(this._loadingList.contains(id)){this._tilePopPop(img);}dojo.destroy(img);this._tileIds.splice(i,1);delete this._tileBounds[id];delete this._tiles[id];}}else{this._tileIds.splice(i,1);delete this._tileBounds[id];delete this._tiles[id];}}},_onPanHandler:function(_f01,_f02){var map=this._map,mv=map.__visibleDelta.offset(_f02.x,_f02.y);this.__coords_dx=this.__coords_dy=0;if(map.navigationMode==="css-transforms"){var css={};css[esri._css.names.transform]=esri._css.translate(mv.x,mv.y);dojo.style(this._div,css);if(!esri.isTouchEnabled){this._updateImages({x:-mv.x,y:-mv.y,width:mv.width,height:mv.height});}}else{dojo.style(this._div,{left:mv.x+"px",top:mv.y+"px"});this._updateImages({x:-mv.x,y:-mv.y,width:mv.width,height:mv.height});}if(this._loadingList.count>0){this._fireUpdateStart();this._fireOnUpdate=true;}},_onScaleHandler:function(mtx,_f03){var i,css={},_f04=esri._css.names,map=this._map;for(i=this._passives.length-1;i>=0;i--){var _f05=this._passives[i];if(_f05.childNodes.length===0){this._passives.splice(i,1);dojo.destroy(_f05);}else{if(_f05.style[_f04.transition]==="none"){dojo.style(_f05,_f04.transition,_f04.transformName+" "+esri.config.defaults.map.zoomDuration+"ms ease");}dojo.style(_f05,_f04.transition,_f03?"none":(_f04.transformName+" "+esri.config.defaults.map.zoomDuration+"ms ease"));_f05._matrix=mtx;css[_f04.transform]=esri._css.matrix(_f05._multiply?_ed2.gfx.matrix.multiply(mtx,_f05._multiply):mtx);dojo.style(_f05,css);}}if(this._active&&this._active.childNodes.length===0){return;}dojo.style(this._active,_f04.transition,_f03?"none":(_f04.transformName+" "+esri.config.defaults.map.zoomDuration+"ms ease"));this._active._matrix=mtx;css[_f04.transform]=esri._css.matrix(this._active._matrix);dojo.style(this._active,css);this._passives.push(this._active);css={position:"absolute",width:map.width+"px",height:map.height+"px",overflow:"visible"};css[_f04.transition]=_f04.transformName+" "+esri.config.defaults.map.zoomDuration+"ms ease";dojo.style((this._active=dojo.create("div",null,this._div)),css);this._active._remove=0;if(map.fadeOnZoom){dojo.place(this._active,this._div,"first");}},_onZoomHandler:function(_f06,_f07,_f08){var _f09=dojo.coords(this._div);_f08=_f08.offset(-_f09.l,-_f09.t);var _f0a,_f0b=this._tileW*_f07,_f0c=this._tileH*_f07,_f0d=this._tileBounds,_f0e=this._tiles,es=dojo.style;var isIE=dojo.isIE;if(isIE&&isIE<8){dojo.forEach(this._tileIds,function(id){_f0a=_f0d[id];es(_f0e[id],{left:(_f0a.x-((_f0b-_f0a.width)*(_f08.x-_f0a.x)/_f0a.width))+"px",top:(_f0a.y-((_f0c-_f0a.height)*(_f08.y-_f0a.y)/_f0a.height))+"px",zoom:_f07});});}else{dojo.forEach(this._tileIds,function(id){_f0a=_f0d[id];es(_f0e[id],{left:(_f0a.x-((_f0b-_f0a.width)*(_f08.x-_f0a.x)/_f0a.width))+"px",top:(_f0a.y-((_f0c-_f0a.height)*(_f08.y-_f0a.y)/_f0a.height))+"px",width:_f0b+"px",height:_f0c+"px"});});}},_updateImages:function(rect){if(!this._ct){return;}var id,_f0f=this._tileW,_f10=this._tileH,_f11=this._ct,lod=_f11.lod,tile=_f11.tile,off=tile.offsets,_f12=tile.coords,cr=_f12.row,cc=_f12.col,_f13=lod.level,_f14=this.opacity,_f15=this._tileIds,_f16=this._loadingList,_f17=this._addImage,mId=this._map.id,tId=this.id,rx=rect.x,ry=rect.y,str=lod.startTileRow,etr=lod.endTileRow,stc=lod.startTileCol,etc=lod.endTileCol,_f18=dojo.indexOf,r,c,mvx=-rect.x,mvy=-rect.y,_f19=off.x-this.__coords_dx,_f1a=off.y-this.__coords_dy,vx=((_f0f-_f19)+mvx),vy=((_f10-_f1a)+mvy),ceil=Math.ceil,_f1b=(vx>0)?(vx%_f0f):((_f0f-(Math.abs(vx)%_f0f))),_f1c=(vy>0)?(vy%_f10):((_f10-(Math.abs(vy)%_f10))),_f1d=(rx>0)?Math.floor((rx+_f19)/_f0f):ceil((rx-(_f0f-_f19))/_f0f),_f1e=(ry>0)?Math.floor((ry+_f1a)/_f10):ceil((ry-(_f10-_f1a))/_f10),_f1f=_f1d+ceil((rect.width-_f1b)/_f0f),_f20=_f1e+ceil((rect.height-_f1c)/_f10),_f21,_f22,m180,p180,col,row;if(this._wrap){_f21=lod._frameInfo;_f22=_f21[0];m180=_f21[1];p180=_f21[2];}for(col=_f1d;col<=_f1f;col++){for(row=_f1e;row<=_f20;row++){r=cr+row;c=cc+col;if(this._wrap){if(c<m180){c=c%_f22;c=c<m180?c+_f22:c;}else{if(c>p180){c=c%_f22;}}}if(r>=str&&r<=etr&&c>=stc&&c<=etc){id=mId+"_"+tId+"_tile_"+_f13+"_"+row+"_"+col;if(_f18(_f15,id)===-1){_f16.add(id);_f15.push(id);_f17(_f13,row,r,col,c,id,_f0f,_f10,_f14,tile,off);}}}}},_cleanUpRemovedImages:function(){var list=this._removeList,dd=dojo.destroy,i,_f23=esri._css.names;list.forEach(function(img){if(!img._fadeOut){img.style.filter="";img.style.zoom=1;dd(img);}});if(this._map.navigationMode==="css-transforms"){for(i=this._passives.length-1;i>=0;i--){var _f24=this._passives[i];if(_f24.childNodes.length===0){this._passives.splice(i,1);dd(_f24);}else{if(this._map.fadeOnZoom&&!_f24._marked&&(_f24._remove===_f24.childNodes.length)){dojo.style(_f24,_f23.transition,"opacity 0.65s");dojo.style(_f24,"opacity",0);_f24._marked=1;if(dojo.isIE>=10){_f24.addEventListener(_f23.endEvent,this._transitionEnd,false);}else{_f24._endHandle=dojo.connect(_f24,_f23.endEvent,this._transitionEnd);}}}}}list.clear();},_transitionEnd:function(evt){var _f25=evt.target,idx;if(evt.propertyName!=="opacity"){return;}if(dojo.isIE>=10){_f25.removeEventListener(esri._css.names.endEvent,this._transitionEnd,false);}else{dojo.disconnect(_f25._endHandle);_f25._endHandle=null;}idx=dojo.indexOf(this._passives,_f25);if(idx>-1){this._passives.splice(idx,1);}if(_f25.parentNode){_f25.parentNode.removeChild(_f25);}dojo.destroy(_f25);},_addImage:function(_f26,row,r,col,c,id,_f27,_f28,_f29,tile,_f2a){if(this._patchIE){var div=(this._tiles[id]=dojo.create("div"));div.id=id;dojo.addClass(div,"layerTile");dojo.style(div,{left:((_f27*col)-_f2a.x)+"px",top:((_f28*row)-_f2a.y)+"px",width:_f27+"px",height:_f28+"px",filter:"progid:DXImageTransform.Microsoft.AlphaImageLoader(src='"+this.getTileUrl(_f26,r,c)+"', sizingMethod='scale')"});if(_f29<1){dojo.style(div,"opacity",_f29);}var _f2b=div.appendChild(dojo.create("div"));dojo.style(_f2b,{opacity:0,width:_f27+"px",height:_f28+"px"});this._div.appendChild(div);div=null;this._loadingList.remove(id);this._fireOnUpdateEvent();}else{var img=(this._tiles[id]=dojo.create("img")),dc=dojo.connect;img.id=id;dojo.addClass(img,"layerTile");var left=(_f27*col)-_f2a.x,top=(_f28*row)-_f2a.y,map=this._map,_f2c=esri._css.names,css={width:_f27+"px",height:_f28+"px",visibility:"hidden"};if(map.navigationMode==="css-transforms"){css[_f2c.transform]=esri._css.translate(left,top);dojo.style(img,css);img._left=left;img._top=top;}else{css.left=left+"px";css.top=top+"px";dojo.style(img,css);}if(_f29<1){dojo.style(img,"opacity",_f29);}img._onload_connect=dc(img,"onload",this,"_tileLoadHandler");img._onerror_connect=dc(img,"onerror",this,"_tileErrorHandler");img._onabort_connect=dc(img,"onabort",this,"_tileErrorHandler");var url=this.getTileUrl(_f26,r,c,img);if(url){img.src=url;}if(map.navigationMode==="css-transforms"){this._active.appendChild(img);}else{this._div.appendChild(img);}img=null;}},getTileUrl:function(_f2d,row,col){},refresh:function(){if(!this.suspended){this._onExtentChangeHandler(this._map.extent,null,true,this._map.__LOD);}},_tilePopPop:function(img){var dd=dojo.disconnect;dd(img._onload_connect);dd(img._onerror_connect);dd(img._onabort_connect);img._onload_connect=img._onerror_connect=img._onabort_connect=null;this._loadingList.remove(img.id);this._fireOnUpdateEvent();},_tileLoadHandler:function(evt){var img=evt.currentTarget;if(this._noDom){this._standby.push(img);return;}dojo.style(img,"visibility","visible");this._tilePopPop(img);},_tileErrorHandler:function(evt){var img=evt.currentTarget;this.onError(new Error(esri.bundle.layers.tiled.tileError+": "+img.src));dojo.style(img,"visibility","hidden");this._tilePopPop(img);},_fireOnUpdateEvent:function(){if(this._loadingList.count===0){this._cleanUpRemovedImages();if(this._fireOnUpdate){this._fireOnUpdate=false;this.onUpdate();this._fireUpdateEnd();}}},setOpacity:function(o){if(this.opacity!=o){this.onOpacityChange(this.opacity=o);}},onOpacityChange:function(){},_opacityChangeHandler:function(_f2e){var djs=dojo.style,i,j,_f2f;if(this._map.navigationMode==="css-transforms"){if(this._active){_f2f=this._active.childNodes;for(i=_f2f.length-1;i>=0;i--){djs(_f2f[i],"opacity",_f2e);}}for(i=this._passives.length-1;i>=0;i--){_f2f=this._passives[i].childNodes;for(j=_f2f.length-1;j>=0;j--){djs(_f2f[j],"opacity",_f2e);}}return;}_f2f=this._div.childNodes;for(i=_f2f.length-1;i>=0;i--){djs(_f2f[i],"opacity",_f2e);}}});dojo.declare("esri.layers.TileInfo",null,{constructor:function(json){this.width=json.cols||json.width;this.height=json.rows||json.height;this.dpi=json.dpi;this.format=json.format;var sr=json.spatialReference,ori=json.origin;if(sr){sr=(this.spatialReference=new esri.SpatialReference(sr.declaredClass?sr.toJson():sr));}if(ori){ori=(this.origin=new esri.geometry.Point(ori.declaredClass?ori.toJson():ori));if(!ori.spatialReference&&sr){ori.setSpatialReference(new esri.SpatialReference(sr.toJson()));}}var lods=(this.lods=[]);dojo.forEach(json.lods,function(lod,i){lods[i]=new esri.layers.LOD(lod);});}});dojo.declare("esri.layers.LOD",null,{constructor:function(json){dojo.mixin(this,json);}});});},"esri/tasks/geometry":function(){define(["dijit","dojo","dojox","dojo/require!esri/tasks/_task"],function(_f30,dojo,_f31){dojo.provide("esri.tasks.geometry");dojo.require("esri.tasks._task");dojo.declare("esri.tasks.GeometryService",esri.tasks._Task,{constructor:function(url){var _f32=dojo.hitch;this._projectHandler=_f32(this,this._projectHandler);this._simplifyHandler=_f32(this,this._simplifyHandler);this._bufferHandler=_f32(this,this._bufferHandler);this._areasAndLengthsHandler=_f32(this,this._areasAndLengthsHandler);this._lengthsHandler=_f32(this,this._lengthsHandler);this._labelPointsHandler=_f32(this,this._labelPointsHandler);this._relationHandler=_f32(this,this._relationHandler);this._convexHullHandler=_f32(this,this._convexHullHandler);this._unionHandler=_f32(this,this._unionHandler);this._autoCompleteHandler=_f32(this,this._autoCompleteHandler);this._reshapeHandler=_f32(this,this._reshapeHandler);this._cutHandler=_f32(this,this._cutHandler);this._intersectHandler=_f32(this,this._intersectHandler);this._differenceHandler=_f32(this,this._differenceHandler);this._trimExtendHandler=_f32(this,this._trimExtendHandler);this._densifyHandler=_f32(this,this._densifyHandler);this._generalizeHandler=_f32(this,this._densifyHandler);this._offsetHandler=_f32(this,this._offsetHandler);this._distanceHandler=_f32(this,this._distanceHandler);},_encodeGeometries:function(_f33){var gs=[];for(var i=0,il=_f33.length;i<il;i++){gs.push(_f33[i].toJson());}return {geometryType:esri.geometry.getJsonType(_f33[0]),geometries:gs};},_decodeGeometries:function(_f34,_f35,sr){var _f36=esri.geometry.getGeometryType(_f35),_f37=_f34.geometries,fs=[],_f38={spatialReference:sr.toJson()},_f39=dojo.mixin;dojo.forEach(_f37,function(g,i){fs[i]=new _f36(_f39(g,_f38));});return fs;},_toProjectGeometry:function(_f3a){var sr=_f3a.spatialReference.toJson();if(_f3a instanceof esri.geometry.Extent){return new esri.geometry.Polygon({rings:[[[_f3a.xmin,_f3a.ymin],[_f3a.xmin,_f3a.ymax],[_f3a.xmax,_f3a.ymax],[_f3a.xmax,_f3a.ymin],[_f3a.xmin,_f3a.ymin]]],spatialReference:sr});}else{return new esri.geometry.Polyline({paths:[[].concat(_f3a.points)],spatialReference:sr});}},_fromProjectedGeometry:function(_f3b,_f3c,_f3d){if(_f3c==="esriGeometryEnvelope"){var ring=_f3b.rings[0];return new esri.geometry.Extent(ring[0][0],ring[0][1],ring[2][0],ring[2][1],_f3d);}else{return new esri.geometry.Multipoint({points:_f3b.paths[0],spatialReference:_f3d.toJson()});}},project:function(_f3e,_f3f,_f40,_f41){var _f42=dojo.mixin({},this._url.query,{f:"json"}),_f43;if(!_f3e.geometries){_f43=_f3e[0];_f42=dojo.mixin(_f42,{outSR:_f3f.wkid||dojo.toJson(_f3f.toJson()),inSR:_f43.spatialReference.wkid||dojo.toJson(_f43.spatialReference.toJson()),geometries:dojo.toJson(this._encodeGeometries(_f3e))});}else{_f41=_f40;_f40=_f3f;_f3f=_f3e.outSR;_f43=_f3e.geometries[0];_f42=dojo.mixin(_f42,_f3e.toJson());}var _f44=esri.geometry.getJsonType(_f43),_f45=this._projectHandler,_f46=this._errorHandler,dfd=new dojo.Deferred(esri._dfdCanceller);dfd._pendingDfd=esri.request({url:this._url.path+"/project",content:_f42,callbackParamName:"callback",load:(function(r,i){_f45(r,i,_f44,_f3f,_f40,_f41,dfd);}),error:(function(r){_f46(r,_f41,dfd);})});return dfd;},_projectHandler:function(_f47,io,_f48,_f49,_f4a,_f4b,dfd){try{var fs=this._decodeGeometries(_f47,_f48,_f49);this._successHandler([fs],"onProjectComplete",_f4a,dfd);}catch(err){this._errorHandler(err,_f4b,dfd);}},onProjectComplete:function(){},simplify:function(_f4c,_f4d,_f4e){var _f4f=_f4c[0].spatialReference;var _f50=dojo.mixin({},this._url.query,{f:"json",sr:_f4f.wkid?_f4f.wkid:dojo.toJson(_f4f.toJson()),geometries:dojo.toJson(this._encodeGeometries(_f4c))}),_f51=esri.geometry.getJsonType(_f4c[0]),_f52=this._simplifyHandler,_f53=this._errorHandler,dfd=new dojo.Deferred(esri._dfdCanceller);dfd._pendingDfd=esri.request({url:this._url.path+"/simplify",content:_f50,callbackParamName:"callback",load:(function(r,i){_f52(r,i,_f51,_f4f,_f4d,_f4e,dfd);}),error:(function(r){_f53(r,_f4e,dfd);})});return dfd;},_simplifyHandler:function(_f54,io,_f55,sr,_f56,_f57,dfd){try{var fs=this._decodeGeometries(_f54,_f55,sr);this._successHandler([fs],"onSimplifyComplete",_f56,dfd);}catch(err){this._errorHandler(err,_f57,dfd);}},onSimplifyComplete:function(){},convexHull:function(_f58,_f59,_f5a){var _f5b=_f58[0].spatialReference;var _f5c=dojo.mixin({},this._url.query,{f:"json",sr:dojo.toJson(_f5b.toJson()),geometries:dojo.toJson(this._encodeGeometries(_f58))}),_f5d=this._convexHullHandler,_f5e=this._errorHandler,dfd=new dojo.Deferred(esri._dfdCanceller);dfd._pendingDfd=esri.request({url:this._url.path+"/convexHull",content:_f5c,callbackParamName:"callback",load:(function(r,i){_f5d(r,i,_f5b,_f59,_f5a,dfd);}),error:(function(r){_f5e(r,_f5a,dfd);})});return dfd;},_convexHullHandler:function(_f5f,io,_f60,_f61,_f62,dfd){try{var geom=esri.geometry.fromJson(_f5f.geometry).setSpatialReference(_f60);this._successHandler([geom],"onConvexHullComplete",_f61,dfd);}catch(err){this._errorHandler(err,_f62,dfd);}},onConvexHullComplete:function(){},union:function(_f63,_f64,_f65){var _f66=_f63[0].spatialReference;var _f67=dojo.mixin({},this._url.query,{f:"json",sr:dojo.toJson(_f66.toJson()),geometries:dojo.toJson(this._encodeGeometries(_f63))}),_f68=this._unionHandler,_f69=this._errorHandler,dfd=new dojo.Deferred(esri._dfdCanceller);dfd._pendingDfd=esri.request({url:this._url.path+"/union",content:_f67,callbackParamName:"callback",load:(function(r,i){_f68(r,i,_f66,_f64,_f65,dfd);}),error:(function(r){_f69(r,_f65,dfd);})});return dfd;},_unionHandler:function(_f6a,io,_f6b,_f6c,_f6d,dfd){try{var geom=esri.geometry.fromJson(_f6a.geometry).setSpatialReference(_f6b);this._successHandler([geom],"onUnionComplete",_f6c,dfd);}catch(err){this._errorHandler(err,_f6d,dfd);}},onUnionComplete:function(){},autoComplete:function(_f6e,_f6f,_f70,_f71){var _f72=_f6e[0].spatialReference;var _f73=dojo.mixin({},this._url.query,{f:"json",sr:dojo.toJson(_f72.toJson()),polygons:dojo.toJson(this._encodeGeometries(_f6e).geometries),polylines:dojo.toJson(this._encodeGeometries(_f6f).geometries)}),_f74=this._autoCompleteHandler,_f75=this._errorHandler,dfd=new dojo.Deferred(esri._dfdCanceller);dfd._pendingDfd=esri.request({url:this._url.path+"/autoComplete",content:_f73,callbackParamName:"callback",load:(function(r,i){_f74(r,i,_f72,_f70,_f71,dfd);}),error:(function(r){_f75(r,_f71,dfd);})});return dfd;},_autoCompleteHandler:function(_f76,io,_f77,_f78,_f79,dfd){try{var Pgon=esri.geometry.Polygon,_f7a=_f76.geometries,_f7b=[];for(var i=0,il=_f7a.length;i<il;i++){_f7b[i]=new Pgon({spatialReference:_f77,rings:_f7a[i].rings});}this._successHandler([_f7b],"onAutoCompleteComplete",_f78,dfd);}catch(err){this._errorHandler(err,_f79,dfd);}},onAutoCompleteComplete:function(){},reshape:function(_f7c,_f7d,_f7e,_f7f){var _f80=_f7c.spatialReference;var _f81=dojo.mixin({},this._url.query,{f:"json",sr:dojo.toJson(_f80.toJson()),target:dojo.toJson({geometryType:esri.geometry.getJsonType(_f7c),geometry:_f7c.toJson()}),reshaper:dojo.toJson(_f7d.toJson())}),_f82=this._reshapeHandler,_f83=this._errorHandler,dfd=new dojo.Deferred(esri._dfdCanceller);dfd._pendingDfd=esri.request({url:this._url.path+"/reshape",content:_f81,callbackParamName:"callback",load:(function(r,i){_f82(r,i,_f80,_f7e,_f7f,dfd);}),error:(function(r){_f83(r,_f7f,dfd);})});return dfd;},_reshapeHandler:function(_f84,io,_f85,_f86,_f87,dfd){try{var geom=esri.geometry.fromJson(_f84.geometry).setSpatialReference(_f85);this._successHandler([geom],"onReshapeComplete",_f86,dfd);}catch(err){this._errorHandler(err,_f87,dfd);}},onReshapeComplete:function(){},cut:function(_f88,_f89,_f8a,_f8b){var _f8c=_f88[0].spatialReference;var _f8d=dojo.map(_f88,function(_f8e){return _f8e.toJson();});var _f8f=dojo.mixin({},this._url.query,{f:"json",sr:dojo.toJson(_f8c.toJson()),target:dojo.toJson({geometryType:esri.geometry.getJsonType(_f88[0]),geometries:_f8d}),cutter:dojo.toJson(_f89.toJson())}),_f90=this._cutHandler,_f91=this._errorHandler,dfd=new dojo.Deferred(esri._dfdCanceller);dfd._pendingDfd=esri.request({url:this._url.path+"/cut",content:_f8f,callbackParamName:"callback",load:(function(r,i){_f90(r,i,_f8c,_f8a,_f8b,dfd);}),error:(function(r){_f91(r,_f8b,dfd);})});return dfd;},_cutHandler:function(_f92,io,_f93,_f94,_f95,dfd){try{var _f96=_f92.geometries;var _f97={};_f97.cutIndexes=_f92.cutIndexes;_f97.geometries=[];dojo.forEach(_f96,function(geom){_f97.geometries.push(esri.geometry.fromJson(geom).setSpatialReference(_f93));});this._successHandler([_f97],"onCutComplete",_f94,dfd);}catch(err){this._errorHandler(err,_f95,dfd);}},onCutComplete:function(){},intersect:function(_f98,_f99,_f9a,_f9b){var _f9c=_f98[0].spatialReference;var _f9d=dojo.mixin({},this._url.query,{f:"json",sr:dojo.toJson(_f9c.toJson()),geometries:dojo.toJson(this._encodeGeometries(_f98)),geometry:dojo.toJson({geometryType:esri.geometry.getJsonType(_f99),geometry:_f99.toJson()})}),_f9e=this._intersectHandler,_f9f=this._errorHandler,dfd=new dojo.Deferred(esri._dfdCanceller);dfd._pendingDfd=esri.request({url:this._url.path+"/intersect",content:_f9d,callbackParamName:"callback",load:(function(r,i){_f9e(r,i,_f9c,_f9a,_f9b,dfd);}),error:(function(r){_f9f(r,_f9b,dfd);})});return dfd;},_intersectHandler:function(_fa0,io,_fa1,_fa2,_fa3,dfd){try{var _fa4=_fa0.geometries,_fa5=[];dojo.forEach(_fa4,function(geom){_fa5.push(esri.geometry.fromJson(geom).setSpatialReference(_fa1));});this._successHandler([_fa5],"onIntersectComplete",_fa2,dfd);}catch(err){this._errorHandler(err,_fa3,dfd);}},onIntersectComplete:function(){},difference:function(_fa6,_fa7,_fa8,_fa9){var _faa=_fa6[0].spatialReference;var _fab=dojo.mixin({},this._url.query,{f:"json",sr:dojo.toJson(_faa.toJson()),geometries:dojo.toJson(this._encodeGeometries(_fa6)),geometry:dojo.toJson({geometryType:esri.geometry.getJsonType(_fa7),geometry:_fa7.toJson()})}),_fac=this._differenceHandler,_fad=this._errorHandler,dfd=new dojo.Deferred(esri._dfdCanceller);dfd._pendingDfd=esri.request({url:this._url.path+"/difference",content:_fab,callbackParamName:"callback",load:(function(r,i){_fac(r,i,_faa,_fa8,_fa9,dfd);}),error:(function(r){_fad(r,_fa9,dfd);})});return dfd;},_differenceHandler:function(_fae,io,_faf,_fb0,_fb1,dfd){try{var _fb2=_fae.geometries,_fb3=[];dojo.forEach(_fb2,function(geom){_fb3.push(esri.geometry.fromJson(geom).setSpatialReference(_faf));});this._successHandler([_fb3],"onDifferenceComplete",_fb0,dfd);}catch(err){this._errorHandler(err,_fb1,dfd);}},onDifferenceComplete:function(){},buffer:function(_fb4,_fb5,_fb6){var _fb7=dojo.mixin({},this._url.query,{f:"json"},_fb4.toJson()),sr=_fb4.outSpatialReference||_fb4.geometries[0].spatialReference,_fb8=this._bufferHandler,_fb9=this._errorHandler,dfd=new dojo.Deferred(esri._dfdCanceller);dfd._pendingDfd=esri.request({url:this._url.path+"/buffer",content:_fb7,callbackParamName:"callback",load:(function(r,i){_fb8(r,i,sr,_fb5,_fb6,dfd);}),error:(function(r){_fb9(r,_fb6,dfd);})});return dfd;},_bufferHandler:function(_fba,io,sr,_fbb,_fbc,dfd){try{var Pgon=esri.geometry.Polygon,_fbd=_fba.geometries,_fbe=[];for(var i=0,il=_fbd.length;i<il;i++){_fbe[i]=new Pgon({spatialReference:sr,rings:_fbd[i].rings});}this._successHandler([_fbe],"onBufferComplete",_fbb,dfd);}catch(err){this._errorHandler(err,_fbc,dfd);}},onBufferComplete:function(){},areasAndLengths:function(_fbf,_fc0,_fc1){var _fc2=dojo.mixin({},this._url.query,{f:"json"},_fbf.toJson()),_fc3=this._areasAndLengthsHandler,_fc4=this._errorHandler,dfd=new dojo.Deferred(esri._dfdCanceller);dfd._pendingDfd=esri.request({url:this._url.path+"/areasAndLengths",content:_fc2,callbackParamName:"callback",load:(function(r,i){_fc3(r,i,_fc0,_fc1,dfd);}),error:(function(r){_fc4(r,_fc1,dfd);})});return dfd;},_areasAndLengthsHandler:function(_fc5,io,_fc6,_fc7,dfd){try{this._successHandler([_fc5],"onAreasAndLengthsComplete",_fc6,dfd);}catch(err){this._errorHandler(err,_fc7,dfd);}},onAreasAndLengthsComplete:function(){},lengths:function(_fc8,_fc9,_fca){var _fcb=dojo.mixin({},this._url.query,{f:"json"},_fc8.toJson()),_fcc=this._lengthsHandler,_fcd=this._errorHandler,dfd=new dojo.Deferred(esri._dfdCanceller);dfd._pendingDfd=esri.request({url:this._url.path+"/lengths",content:_fcb,callbackParamName:"callback",load:(function(r,i){_fcc(r,i,_fc9,_fca,dfd);}),error:(function(r){_fcd(r,_fca,dfd);})});return dfd;},_lengthsHandler:function(_fce,io,_fcf,_fd0,dfd){try{this._successHandler([_fce],"onLengthsComplete",_fcf,dfd);}catch(err){this._errorHandler(err,_fd0,dfd);}},onLengthsComplete:function(){},labelPoints:function(_fd1,_fd2,_fd3){var _fd4=dojo.map(_fd1,function(geom){return geom.toJson();});var sr=_fd1[0].spatialReference,_fd5=dojo.mixin({},this._url.query,{f:"json",sr:sr.wkid?sr.wkid:dojo.toJson(sr.toJson()),polygons:dojo.toJson(_fd4)}),_fd6=this._labelPointsHandler,_fd7=this._errorHandler,dfd=new dojo.Deferred(esri._dfdCanceller);dfd._pendingDfd=esri.request({url:this._url.path+"/labelPoints",content:_fd5,callbackParamName:"callback",load:(function(r,i){_fd6(r,i,_fd1,sr,_fd2,_fd3,dfd);}),error:(function(r){_fd7(r,_fd3,dfd);})});return dfd;},_labelPointsHandler:function(_fd8,io,_fd9,sr,_fda,_fdb,dfd){try{var _fdc=_fd8.labelPoints,_fdd=[];dojo.forEach(_fdc,function(geom){_fdd.push(esri.geometry.fromJson(geom).setSpatialReference(sr));});this._successHandler([_fdd],"onLabelPointsComplete",_fda,dfd);}catch(err){this._errorHandler(err,_fdb,dfd);}},onLabelPointsComplete:function(){},relation:function(_fde,_fdf,_fe0){var _fe1=dojo.mixin({},this._url.query,{f:"json"},_fde.toJson()),_fe2=this._relationHandler,_fe3=this._errorHandler,dfd=new dojo.Deferred(esri._dfdCanceller);dfd._pendingDfd=esri.request({url:this._url.path+"/relation",content:_fe1,callbackParamName:"callback",load:(function(r,i){_fe2(r,i,_fdf,_fe0,dfd);}),error:(function(r){_fe3(r,_fe0,dfd);})});return dfd;},_relationHandler:function(_fe4,io,_fe5,_fe6,dfd){try{var _fe7=_fe4.relations;this._successHandler([_fe7],"onRelationComplete",_fe5,dfd);}catch(err){this._errorHandler(err,_fe6,dfd);}},onRelationComplete:function(){},trimExtend:function(_fe8,_fe9,_fea){var _feb=dojo.mixin({},this._url.query,{f:"json"},_fe8.toJson()),_fec=_fe8.sr,_fed=this._trimExtendHandler,_fee=this._errorHandler,dfd=new dojo.Deferred(esri._dfdCanceller);dfd._pendingDfd=esri.request({url:this._url.path+"/trimExtend",content:_feb,callbackParamName:"callback",load:(function(r,i){_fed(r,i,_fec,_fe9,_fea,dfd);}),error:(function(r){_fee(r,_fea,dfd);})});return dfd;},_trimExtendHandler:function(_fef,io,_ff0,_ff1,_ff2,dfd){try{var _ff3=esri.geometry.Polyline,_ff4=_fef.geometries,_ff5=[];for(var i=0,il=_ff4.length;i<il;i++){_ff5[i]=new _ff3({spatialReference:_ff0,paths:_ff4[i].paths});}this._successHandler([_ff5],"onTrimExtendComplete",_ff1,dfd);}catch(err){this._errorHandler(err,_ff2,dfd);}},onTrimExtendComplete:function(){},densify:function(_ff6,_ff7,_ff8){var _ff9=dojo.mixin({},this._url.query,{f:"json"},_ff6.toJson()),_ffa=_ff6.geometries[0].spatialReference,_ffb=this._densifyHandler,_ffc=this._errorHandler,dfd=new dojo.Deferred(esri._dfdCanceller);dfd._pendingDfd=esri.request({url:this._url.path+"/densify",content:_ff9,callbackParamName:"callback",load:(function(r,i){_ffb(r,i,_ffa,_ff7,_ff8,dfd);}),error:(function(r){_ffc(r,_ff8,dfd);})});return dfd;},_densifyHandler:function(_ffd,io,_ffe,_fff,_1000,dfd){try{var geoms=_ffd.geometries,_1001=[];dojo.forEach(geoms,function(geom){_1001.push(esri.geometry.fromJson(geom).setSpatialReference(_ffe));});this._successHandler([_1001],"onDensifyComplete",_fff,dfd);}catch(err){this._errorHandler(err,_1000,dfd);}},onDensifyComplete:function(){},generalize:function(_1002,_1003,_1004){var _1005=dojo.mixin({},this._url.query,{f:"json"},_1002.toJson()),outSR=_1002.geometries[0].spatialReference,_1006=this._generalizeHandler,_1007=this._errorHandler,dfd=new dojo.Deferred(esri._dfdCanceller);dfd._pendingDfd=esri.request({url:this._url.path+"/generalize",content:_1005,callbackParamName:"callback",load:(function(r,i){_1006(r,i,outSR,_1003,_1004,dfd);}),error:(function(r){_1007(r,_1004,dfd);})});return dfd;},_generalizeHandler:function(_1008,io,outSR,_1009,_100a,dfd){try{var geoms=_1008.geometries,_100b=[];dojo.forEach(geoms,function(geom){_100b.push(esri.geometry.fromJson(geom).setSpatialReference(outSR));});this._successHandler([_100b],"onGeneralizeComplete",_1009,dfd);}catch(err){this._errorHandler(err,_100a,dfd);}},onGeneralizeComplete:function(){},offset:function(_100c,_100d,_100e){var _100f=dojo.mixin({},this._url.query,{f:"json"},_100c.toJson()),outSR=_100c.geometries[0].spatialReference,_1010=this._offsetHandler,_1011=this._errorHandler,dfd=new dojo.Deferred(esri._dfdCanceller);dfd._pendingDfd=esri.request({url:this._url.path+"/offset",content:_100f,callbackParamName:"callback",load:(function(r,i){_1010(r,i,outSR,_100d,_100e,dfd);}),error:(function(r){_1011(r,_100e,dfd);})});return dfd;},_offsetHandler:function(_1012,io,outSR,_1013,_1014,dfd){try{var geoms=_1012.geometries,_1015=[];dojo.forEach(geoms,function(geom){_1015.push(esri.geometry.fromJson(geom).setSpatialReference(outSR));});this._successHandler([_1015],"onOffsetComplete",_1013,dfd);}catch(err){this._errorHandler(err,_1014,dfd);}},onOffsetComplete:function(){},distance:function(_1016,_1017,_1018){var _1019=dojo.mixin({},this._url.query,{f:"json"},_1016.toJson()),outSR=_1016.geometry1.spatialReference,_101a=this._distanceHandler,_101b=this._errorHandler,dfd=new dojo.Deferred(esri._dfdCanceller);dfd._pendingDfd=esri.request({url:this._url.path+"/distance",content:_1019,callbackParamName:"callback",load:(function(r,i){_101a(r,i,outSR,_1017,_1018,dfd);}),error:(function(r){_101b(r,_1018,dfd);})});return dfd;},_distanceHandler:function(_101c,io,outSR,_101d,_101e,dfd){try{_101c=_101c&&_101c.distance;this._successHandler([_101c],"onDistanceComplete",_101d,dfd);}catch(err){this._errorHandler(err,_101e,dfd);}},onDistanceComplete:function(){}});dojo.declare("esri.tasks.TrimExtendParameters",null,{polylines:null,trimExtendTo:null,extendHow:null,toJson:function(){var geoms=dojo.map(this.polylines,function(geom){return geom.toJson();});var json={};json.polylines=dojo.toJson(geoms);json.trimExtendTo=dojo.toJson(this.trimExtendTo.toJson());json.sr=dojo.toJson(this.polylines[0].spatialReference.toJson());json.extendHow=this.extendHow||0;return json;}});dojo.mixin(esri.tasks.TrimExtendParameters,{DEFAULT_CURVE_EXTENSION:0,RELOCATE_ENDS:1,KEEP_END_ATTRIBUTES:2,NO_END_ATTRIBUTES:4,NO_EXTEND_AT_FROM:8,NO_EXTEND_AT_TO:16});dojo.declare("esri.tasks.BufferParameters",null,{geometries:null,outSpatialReference:null,bufferSpatialReference:null,distances:null,unit:null,unionResults:false,geodesic:false,toJson:function(){var json={unit:this.unit,unionResults:this.unionResults,geodesic:this.geodesic},dt=this.distances,outsr=this.outSpatialReference,bufsr=this.bufferSpatialReference;var geoms=dojo.map(this.geometries,function(geom){geom=(geom.type==="extent")?this._extentToPolygon(geom):geom;return geom.toJson();},this);var _101f=this.geometries;if(_101f&&_101f.length>0){var _1020=_101f[0].type==="extent"?"esriGeometryPolygon":esri.geometry.getJsonType(_101f[0]);json.geometries=dojo.toJson({geometryType:_1020,geometries:geoms});json.inSR=_101f[0].spatialReference.wkid?_101f[0].spatialReference.wkid:dojo.toJson(_101f[0].spatialReference.toJson());}if(dt){json.distances=dt.join(",");}if(outsr){json.outSR=outsr.wkid?outsr.wkid:dojo.toJson(outsr.toJson());}if(bufsr){json.bufferSR=bufsr.wkid?bufsr.wkid:dojo.toJson(bufsr.toJson());}return json;},_extentToPolygon:function(_1021){var xmin=_1021.xmin,ymin=_1021.ymin,xmax=_1021.xmax,ymax=_1021.ymax;return new esri.geometry.Polygon({"rings":[[[xmin,ymin],[xmin,ymax],[xmax,ymax],[xmax,ymin],[xmin,ymin]]],"spatialReference":_1021.spatialReference.toJson()});}});dojo.mixin(esri.tasks.GeometryService,{UNIT_METER:9001,UNIT_GERMAN_METER:9031,UNIT_FOOT:9002,UNIT_SURVEY_FOOT:9003,UNIT_CLARKE_FOOT:9005,UNIT_FATHOM:9014,UNIT_NAUTICAL_MILE:9030,UNIT_SURVEY_CHAIN:9033,UNIT_SURVEY_LINK:9034,UNIT_SURVEY_MILE:9035,UNIT_KILOMETER:9036,UNIT_CLARKE_YARD:9037,UNIT_CLARKE_CHAIN:9038,UNIT_CLARKE_LINK:9039,UNIT_SEARS_YARD:9040,UNIT_SEARS_FOOT:9041,UNIT_SEARS_CHAIN:9042,UNIT_SEARS_LINK:9043,UNIT_BENOIT_1895A_YARD:9050,UNIT_BENOIT_1895A_FOOT:9051,UNIT_BENOIT_1895A_CHAIN:9052,UNIT_BENOIT_1895A_LINK:9053,UNIT_BENOIT_1895B_YARD:9060,UNIT_BENOIT_1895B_FOOT:9061,UNIT_BENOIT_1895B_CHAIN:9062,UNIT_BENOIT_1895B_LINK:9063,UNIT_INDIAN_FOOT:9080,UNIT_INDIAN_1937_FOOT:9081,UNIT_INDIAN_1962_FOOT:9082,UNIT_INDIAN_1975_FOOT:9083,UNIT_INDIAN_YARD:9084,UNIT_INDIAN_1937_YARD:9085,UNIT_INDIAN_1962_YARD:9086,UNIT_INDIAN_1975_YARD:9087,UNIT_FOOT_1865:9070,UNIT_RADIAN:9101,UNIT_DEGREE:9102,UNIT_ARCMINUTE:9103,UNIT_ARCSECOND:9104,UNIT_GRAD:9105,UNIT_GON:9106,UNIT_MICRORADIAN:9109,UNIT_ARCMINUTE_CENTESIMAL:9112,UNIT_ARCSECOND_CENTESIMAL:9113,UNIT_MIL6400:9114,UNIT_BRITISH_1936_FOOT:9095,UNIT_GOLDCOAST_FOOT:9094,UNIT_INTERNATIONAL_CHAIN:109003,UNIT_INTERNATIONAL_LINK:109004,UNIT_INTERNATIONAL_YARD:109001,UNIT_STATUTE_MILE:9093,UNIT_SURVEY_YARD:109002,UNIT_50KILOMETER_LENGTH:109030,UNIT_150KILOMETER_LENGTH:109031,UNIT_DECIMETER:109005,UNIT_CENTIMETER:109006,UNIT_MILLIMETER:109007,UNIT_INTERNATIONAL_INCH:109008,UNIT_US_SURVEY_INCH:109009,UNIT_INTERNATIONAL_ROD:109010,UNIT_US_SURVEY_ROD:109011,UNIT_US_NAUTICAL_MILE:109012,UNIT_UK_NAUTICAL_MILE:109013,UNIT_SQUARE_INCHES:"esriSquareInches",UNIT_SQUARE_FEET:"esriSquareFeet",UNIT_SQUARE_YARDS:"esriSquareYards",UNIT_ACRES:"esriAcres",UNIT_SQUARE_MILES:"esriSquareMiles",UNIT_SQUARE_MILLIMETERS:"esriSquareMillimeters",UNIT_SQUARE_CENTIMETERS:"esriSquareCentimeters",UNIT_SQUARE_DECIMETERS:"esriSquareDecimeters",UNIT_SQUARE_METERS:"esriSquareMeters",UNIT_ARES:"esriAres",UNIT_HECTARES:"esriHectares",UNIT_SQUARE_KILOMETERS:"esriSquareKilometers"});dojo.declare("esri.tasks.AreasAndLengthsParameters",null,{polygons:null,lengthUnit:null,areaUnit:null,calculationType:null,toJson:function(){var geoms=dojo.map(this.polygons,function(geom){return geom.toJson();});var json={};json.polygons=dojo.toJson(geoms);var outSr=this.polygons[0].spatialReference;json.sr=outSr.wkid?outSr.wkid:dojo.toJson(outSr.toJson());if(this.lengthUnit){json.lengthUnit=this.lengthUnit;}if(this.areaUnit){if(dojo.isString(this.areaUnit)){json.areaUnit=dojo.toJson({"areaUnit":this.areaUnit});}else{json.areaUnit=this.areaUnit;}}if(this.calculationType){json.calculationType=this.calculationType;}return json;}});dojo.declare("esri.tasks.LengthsParameters",null,{polylines:null,lengthUnit:null,geodesic:null,calculationType:null,toJson:function(){var geoms=dojo.map(this.polylines,function(geom){return geom.toJson();});var json={};json.polylines=dojo.toJson(geoms);var outSr=this.polylines[0].spatialReference;json.sr=outSr.wkid?outSr.wkid:dojo.toJson(outSr.toJson());if(this.lengthUnit){json.lengthUnit=this.lengthUnit;}if(this.geodesic){json.geodesic=this.geodesic;}if(this.calculationType){json.calculationType=this.calculationType;}return json;}});dojo.declare("esri.tasks.RelationParameters",null,{geometries1:null,geometries2:null,relation:null,relationParam:null,toJson:function(){var _1022=dojo.map(this.geometries1,function(geom){return geom.toJson();});var _1023=dojo.map(this.geometries2,function(geom){return geom.toJson();});var json={};var _1024=this.geometries1;if(_1024&&_1024.length>0){json.geometries1=dojo.toJson({geometryType:esri.geometry.getJsonType(_1024[0]),geometries:_1022});var outSr=this.geometries1[0].spatialReference;json.sr=outSr.wkid?outSr.wkid:dojo.toJson(outSr.toJson());}var _1025=this.geometries2;if(_1025&&_1025.length>0){json.geometries2=dojo.toJson({geometryType:esri.geometry.getJsonType(_1025[0]),geometries:_1023});}if(this.relation){json.relation=this.relation;}if(this.relationParam){json.relationParam=dojo.toJson(this.relationParam);}return json;}});dojo.mixin(esri.tasks.RelationParameters,{SPATIAL_REL_CROSS:"esriGeometryRelationCross",SPATIAL_REL_DISJOINT:"esriGeometryRelationDisjoint",SPATIAL_REL_IN:"esriGeometryRelationIn",SPATIAL_REL_INTERIORINTERSECTION:"esriGeometryRelationInteriorIntersection",SPATIAL_REL_INTERSECTION:"esriGeometryRelationIntersection",SPATIAL_REL_COINCIDENCE:"esriGeometryRelationLineCoincidence",SPATIAL_REL_LINETOUCH:"esriGeometryRelationLineTouch",SPATIAL_REL_OVERLAP:"esriGeometryRelationOverlap",SPATIAL_REL_POINTTOUCH:"esriGeometryRelationPointTouch",SPATIAL_REL_TOUCH:"esriGeometryRelationTouch",SPATIAL_REL_WITHIN:"esriGeometryRelationWithin",SPATIAL_REL_RELATION:"esriGeometryRelationRelation"});dojo.declare("esri.tasks.DensifyParameters",null,{geometries:null,geodesic:null,lengthUnit:null,maxSegmentLength:null,toJson:function(){var geoms=dojo.map(this.geometries,function(geom){return geom.toJson();});var json={};if(this.geometries&&this.geometries.length>0){json.geometries=dojo.toJson({geometryType:esri.geometry.getJsonType(this.geometries[0]),geometries:geoms});json.sr=dojo.toJson(this.geometries[0].spatialReference.toJson());}if(this.geodesic){json.geodesic=this.geodesic;}if(this.lengthUnit){json.lengthUnit=this.lengthUnit;}if(this.maxSegmentLength){json.maxSegmentLength=this.maxSegmentLength;}return json;}});dojo.declare("esri.tasks.GeneralizeParameters",null,{geometries:null,deviationUnit:null,maxDeviation:null,toJson:function(){var geoms=dojo.map(this.geometries,function(geom){return geom.toJson();});var json={};if(this.geometries&&this.geometries.length>0){json.geometries=dojo.toJson({geometryType:esri.geometry.getJsonType(this.geometries[0]),geometries:geoms});json.sr=dojo.toJson(this.geometries[0].spatialReference.toJson());}if(this.deviationUnit){json.deviationUnit=this.deviationUnit;}if(this.maxDeviation){json.maxDeviation=this.maxDeviation;}return json;}});dojo.declare("esri.tasks.OffsetParameters",null,{geometries:null,bevelRatio:null,offsetDistance:null,offsetHow:null,offsetUnit:null,toJson:function(){var geoms=dojo.map(this.geometries,function(geom){return geom.toJson();});var json={};if(this.geometries&&this.geometries.length>0){json.geometries=dojo.toJson({geometryType:esri.geometry.getJsonType(this.geometries[0]),geometries:geoms});json.sr=dojo.toJson(this.geometries[0].spatialReference.toJson());}if(this.bevelRatio){json.bevelRatio=this.bevelRatio;}if(this.offsetDistance){json.offsetDistance=this.offsetDistance;}if(this.offsetHow){json.offsetHow=this.offsetHow;}if(this.offsetUnit){json.offsetUnit=this.offsetUnit;}return json;}});dojo.mixin(esri.tasks.OffsetParameters,{OFFSET_BEVELLED:"esriGeometryOffsetBevelled",OFFSET_MITERED:"esriGeometryOffsetMitered",OFFSET_ROUNDED:"esriGeometryOffsetRounded"});dojo.declare("esri.tasks.DistanceParameters",null,{geometry1:null,geometry2:null,distanceUnit:null,geodesic:null,toJson:function(){var json={};var _1026=this.geometry1;if(_1026){json.geometry1=dojo.toJson({geometryType:esri.geometry.getJsonType(_1026),geometry:_1026});}var _1027=this.geometry2;if(_1027){json.geometry2=dojo.toJson({geometryType:esri.geometry.getJsonType(_1027),geometry:_1027});}json.sr=dojo.toJson(this.geometry1.spatialReference.toJson());if(this.distanceUnit){json.distanceUnit=this.distanceUnit;}if(this.geodesic){json.geodesic=this.geodesic;}return json;}});dojo.declare("esri.tasks.ProjectParameters",null,{geometries:null,outSR:null,transformation:null,transformForward:null,toJson:function(){var geoms=dojo.map(this.geometries,function(geom){return geom.toJson();});var json={};json.outSR=this.outSR.wkid||dojo.toJson(this.outSR.toJson());json.inSR=this.geometries[0].spatialReference.wkid||dojo.toJson(this.geometries[0].spatialReference.toJson());json.geometries=dojo.toJson({geometryType:esri.geometry.getJsonType(this.geometries[0]),geometries:geoms});if(this.transformation){json.transformation=this.transformation.wkid||dojo.toJson(this.transformation);}if(esri._isDefined(this.transformForward)){json.transformForward=this.transformForward;}return json;}});});},"dijit/Viewport":function(){define("dijit/Viewport",["dojo/Evented","dojo/on","dojo/ready","dojo/sniff","dojo/_base/window","dojo/window"],function(_1028,on,ready,has,win,_1029){var _102a=new _1028();ready(200,function(){var _102b=_1029.getBox();_102a._rlh=on(win.global,"resize",function(){var _102c=_1029.getBox();if(_102b.h==_102c.h&&_102b.w==_102c.w){return;}_102b=_102c;_102a.emit("resize");});if(has("ie")==8){var _102d=screen.deviceXDPI;setInterval(function(){if(screen.deviceXDPI!=_102d){_102d=screen.deviceXDPI;_102a.emit("resize");}},500);}});return _102a;});},"dijit/form/VerticalRuleLabels":function(){define("dijit/form/VerticalRuleLabels",["dojo/_base/declare","./HorizontalRuleLabels"],function(_102e,_102f){return _102e("dijit.form.VerticalRuleLabels",_102f,{templateString:"<div class=\"dijitRuleContainer dijitRuleContainerV dijitRuleLabelsContainer dijitRuleLabelsContainerV\"></div>",_positionPrefix:"<div class=\"dijitRuleLabelContainer dijitRuleLabelContainerV\" style=\"top:",_labelPrefix:"\"><span class=\"dijitRuleLabel dijitRuleLabelV\">",_calcPosition:function(pos){return 100-pos;},_isHorizontal:false});});},"dijit/_base/place":function(){define("dijit/_base/place",["dojo/_base/array","dojo/_base/lang","dojo/window","../place","../main"],function(array,lang,_1030,place,dijit){var _1031={};_1031.getViewport=function(){return _1030.getBox();};_1031.placeOnScreen=place.at;_1031.placeOnScreenAroundElement=function(node,_1032,_1033,_1034){var _1035;if(lang.isArray(_1033)){_1035=_1033;}else{_1035=[];for(var key in _1033){_1035.push({aroundCorner:key,corner:_1033[key]});}}return place.around(node,_1032,_1035,true,_1034);};_1031.placeOnScreenAroundNode=_1031.placeOnScreenAroundElement;_1031.placeOnScreenAroundRectangle=_1031.placeOnScreenAroundElement;_1031.getPopupAroundAlignment=function(_1036,_1037){var align={};array.forEach(_1036,function(pos){var ltr=_1037;switch(pos){case "after":align[_1037?"BR":"BL"]=_1037?"BL":"BR";break;case "before":align[_1037?"BL":"BR"]=_1037?"BR":"BL";break;case "below-alt":ltr=!ltr;case "below":align[ltr?"BL":"BR"]=ltr?"TL":"TR";align[ltr?"BR":"BL"]=ltr?"TR":"TL";break;case "above-alt":ltr=!ltr;case "above":default:align[ltr?"TL":"TR"]=ltr?"BL":"BR";align[ltr?"TR":"TL"]=ltr?"BR":"BL";break;}});return align;};lang.mixin(dijit,_1031);return dijit;});},"dijit/Dialog":function(){require({cache:{"url:dijit/templates/Dialog.html":"<div class=\"dijitDialog\" role=\"dialog\" aria-labelledby=\"${id}_title\">\n\t<div data-dojo-attach-point=\"titleBar\" class=\"dijitDialogTitleBar\">\n\t\t<span data-dojo-attach-point=\"titleNode\" class=\"dijitDialogTitle\" id=\"${id}_title\"\n\t\t\t\trole=\"header\" level=\"1\"></span>\n\t\t<span data-dojo-attach-point=\"closeButtonNode\" class=\"dijitDialogCloseIcon\" data-dojo-attach-event=\"ondijitclick: onCancel\" title=\"${buttonCancel}\" role=\"button\" tabIndex=\"-1\">\n\t\t\t<span data-dojo-attach-point=\"closeText\" class=\"closeText\" title=\"${buttonCancel}\">x</span>\n\t\t</span>\n\t</div>\n\t<div data-dojo-attach-point=\"containerNode\" class=\"dijitDialogPaneContent\"></div>\n</div>\n"}});define("dijit/Dialog",["require","dojo/_base/array","dojo/_base/connect","dojo/_base/declare","dojo/_base/Deferred","dojo/dom","dojo/dom-class","dojo/dom-geometry","dojo/dom-style","dojo/_base/event","dojo/_base/fx","dojo/i18n","dojo/keys","dojo/_base/lang","dojo/on","dojo/ready","dojo/sniff","dojo/window","dojo/dnd/Moveable","dojo/dnd/TimedMoveable","./focus","./_base/manager","./_Widget","./_TemplatedMixin","./_CssStateMixin","./form/_FormMixin","./_DialogMixin","./DialogUnderlay","./layout/ContentPane","dojo/text!./templates/Dialog.html","./main","dojo/i18n!./nls/common"],function(_1038,array,_1039,_103a,_103b,dom,_103c,_103d,_103e,event,fx,i18n,keys,lang,on,ready,has,_103f,_1040,_1041,focus,_1042,_1043,_1044,_1045,_1046,_1047,_1048,_1049,_104a,dijit){var _104b=_103a("dijit._DialogBase",[_1044,_1046,_1047,_1045],{templateString:_104a,baseClass:"dijitDialog",cssStateNodes:{closeButtonNode:"dijitDialogCloseIcon"},_setTitleAttr:[{node:"titleNode",type:"innerHTML"},{node:"titleBar",type:"attribute"}],open:false,duration:_1042.defaultDuration,refocus:true,autofocus:true,_firstFocusItem:null,_lastFocusItem:null,doLayout:false,draggable:true,_setDraggableAttr:function(val){this._set("draggable",val);},"aria-describedby":"",maxRatio:0.9,postMixInProperties:function(){var _104c=i18n.getLocalization("dijit","common");lang.mixin(this,_104c);this.inherited(arguments);},postCreate:function(){_103e.set(this.domNode,{display:"none",position:"absolute"});this.ownerDocumentBody.appendChild(this.domNode);this.inherited(arguments);this.connect(this,"onExecute","hide");this.connect(this,"onCancel","hide");this._modalconnects=[];},onLoad:function(){this._position();if(this.autofocus&&_104d.isTop(this)){this._getFocusItems(this.domNode);focus.focus(this._firstFocusItem);}this.inherited(arguments);},_endDrag:function(){var _104e=_103d.position(this.domNode),_104f=_103f.getBox(this.ownerDocument);_104e.y=Math.min(Math.max(_104e.y,0),(_104f.h-_104e.h));_104e.x=Math.min(Math.max(_104e.x,0),(_104f.w-_104e.w));this._relativePosition=_104e;this._position();},_setup:function(){var node=this.domNode;if(this.titleBar&&this.draggable){this._moveable=new ((has("ie")==6)?_1041:_1040)(node,{handle:this.titleBar});this.connect(this._moveable,"onMoveStop","_endDrag");}else{_103c.add(node,"dijitDialogFixed");}this.underlayAttrs={dialogId:this.id,"class":array.map(this["class"].split(/\s/),function(s){return s+"_underlay";}).join(" "),ownerDocument:this.ownerDocument};},_size:function(){this._checkIfSingleChild();if(this._singleChild){if(typeof this._singleChildOriginalStyle!="undefined"){this._singleChild.domNode.style.cssText=this._singleChildOriginalStyle;delete this._singleChildOriginalStyle;}}else{_103e.set(this.containerNode,{width:"auto",height:"auto"});}var bb=_103d.position(this.domNode);var _1050=_103f.getBox(this.ownerDocument);_1050.w*=this.maxRatio;_1050.h*=this.maxRatio;if(bb.w>=_1050.w||bb.h>=_1050.h){var _1051=_103d.position(this.containerNode),w=Math.min(bb.w,_1050.w)-(bb.w-_1051.w),h=Math.min(bb.h,_1050.h)-(bb.h-_1051.h);if(this._singleChild&&this._singleChild.resize){if(typeof this._singleChildOriginalStyle=="undefined"){this._singleChildOriginalStyle=this._singleChild.domNode.style.cssText;}this._singleChild.resize({w:w,h:h});}else{_103e.set(this.containerNode,{width:w+"px",height:h+"px",overflow:"auto",position:"relative"});}}else{if(this._singleChild&&this._singleChild.resize){this._singleChild.resize();}}},_position:function(){if(!_103c.contains(this.ownerDocumentBody,"dojoMove")){var node=this.domNode,_1052=_103f.getBox(this.ownerDocument),p=this._relativePosition,bb=p?null:_103d.position(node),l=Math.floor(_1052.l+(p?p.x:(_1052.w-bb.w)/2)),t=Math.floor(_1052.t+(p?p.y:(_1052.h-bb.h)/2));_103e.set(node,{left:l+"px",top:t+"px"});}},_onKey:function(evt){if(evt.charOrCode){var node=evt.target;if(evt.charOrCode===keys.TAB){this._getFocusItems(this.domNode);}var _1053=(this._firstFocusItem==this._lastFocusItem);if(node==this._firstFocusItem&&evt.shiftKey&&evt.charOrCode===keys.TAB){if(!_1053){focus.focus(this._lastFocusItem);}event.stop(evt);}else{if(node==this._lastFocusItem&&evt.charOrCode===keys.TAB&&!evt.shiftKey){if(!_1053){focus.focus(this._firstFocusItem);}event.stop(evt);}else{while(node){if(node==this.domNode||_103c.contains(node,"dijitPopup")){if(evt.charOrCode==keys.ESCAPE){this.onCancel();}else{return;}}node=node.parentNode;}if(evt.charOrCode!==keys.TAB){event.stop(evt);}else{if(!has("opera")){try{this._firstFocusItem.focus();}catch(e){}}}}}}},show:function(){if(this.open){return;}if(!this._started){this.startup();}if(!this._alreadyInitialized){this._setup();this._alreadyInitialized=true;}if(this._fadeOutDeferred){this._fadeOutDeferred.cancel();}var win=_103f.get(this.ownerDocument);this._modalconnects.push(on(win,"scroll",lang.hitch(this,"resize")));this._modalconnects.push(on(this.domNode,_1039._keypress,lang.hitch(this,"_onKey")));_103e.set(this.domNode,{opacity:0,display:""});this._set("open",true);this._onShow();this._size();this._position();var _1054;this._fadeInDeferred=new _103b(lang.hitch(this,function(){_1054.stop();delete this._fadeInDeferred;}));_1054=fx.fadeIn({node:this.domNode,duration:this.duration,beforeBegin:lang.hitch(this,function(){_104d.show(this,this.underlayAttrs);}),onEnd:lang.hitch(this,function(){if(this.autofocus&&_104d.isTop(this)){this._getFocusItems(this.domNode);focus.focus(this._firstFocusItem);}this._fadeInDeferred.resolve(true);delete this._fadeInDeferred;})}).play();return this._fadeInDeferred;},hide:function(){if(!this._alreadyInitialized||!this.open){return;}if(this._fadeInDeferred){this._fadeInDeferred.cancel();}var _1055;this._fadeOutDeferred=new _103b(lang.hitch(this,function(){_1055.stop();delete this._fadeOutDeferred;}));this._fadeOutDeferred.then(lang.hitch(this,"onHide"));_1055=fx.fadeOut({node:this.domNode,duration:this.duration,onEnd:lang.hitch(this,function(){this.domNode.style.display="none";_104d.hide(this);this._fadeOutDeferred.resolve(true);delete this._fadeOutDeferred;})}).play();if(this._scrollConnected){this._scrollConnected=false;}var h;while(h=this._modalconnects.pop()){h.remove();}if(this._relativePosition){delete this._relativePosition;}this._set("open",false);return this._fadeOutDeferred;},resize:function(){if(this.domNode.style.display!="none"){if(_1048._singleton){_1048._singleton.layout();}this._position();this._size();}},destroy:function(){if(this._fadeInDeferred){this._fadeInDeferred.cancel();}if(this._fadeOutDeferred){this._fadeOutDeferred.cancel();}if(this._moveable){this._moveable.destroy();}var h;while(h=this._modalconnects.pop()){h.remove();}_104d.hide(this);this.inherited(arguments);}});var _1056=_103a("dijit.Dialog",[_1049,_104b],{});_1056._DialogBase=_104b;var _104d=_1056._DialogLevelManager={_beginZIndex:950,show:function(_1057,_1058){ds[ds.length-1].focus=focus.curNode;var _1059=_1048._singleton;if(!_1059||_1059._destroyed){_1059=dijit._underlay=_1048._singleton=new _1048(_1058);}else{_1059.set(_1057.underlayAttrs);}var _105a=ds[ds.length-1].dialog?ds[ds.length-1].zIndex+2:_1056._DialogLevelManager._beginZIndex;if(ds.length==1){_1059.show();}_103e.set(_1048._singleton.domNode,"zIndex",_105a-1);_103e.set(_1057.domNode,"zIndex",_105a);ds.push({dialog:_1057,underlayAttrs:_1058,zIndex:_105a});},hide:function(_105b){if(ds[ds.length-1].dialog==_105b){ds.pop();var pd=ds[ds.length-1];if(!_1048._singleton._destroyed){if(ds.length==1){_1048._singleton.hide();}else{_103e.set(_1048._singleton.domNode,"zIndex",pd.zIndex-1);_1048._singleton.set(pd.underlayAttrs);}}if(_105b.refocus){var focus=pd.focus;if(pd.dialog&&(!focus||!dom.isDescendant(focus,pd.dialog.domNode))){pd.dialog._getFocusItems(pd.dialog.domNode);focus=pd.dialog._firstFocusItem;}if(focus){try{focus.focus();}catch(e){}}}}else{var idx=array.indexOf(array.map(ds,function(elem){return elem.dialog;}),_105b);if(idx!=-1){ds.splice(idx,1);}}},isTop:function(_105c){return ds[ds.length-1].dialog==_105c;}};var ds=_1056._dialogStack=[{dialog:null,focus:null,underlayAttrs:null}];if(has("dijit-legacy-requires")){ready(0,function(){var _105d=["dijit/TooltipDialog"];_1038(_105d);});}return _1056;});},"dijit/_base/focus":function(){define("dijit/_base/focus",["dojo/_base/array","dojo/dom","dojo/_base/lang","dojo/topic","dojo/_base/window","../focus","../main"],function(array,dom,lang,topic,win,focus,dijit){var _105e={_curFocus:null,_prevFocus:null,isCollapsed:function(){return dijit.getBookmark().isCollapsed;},getBookmark:function(){var bm,rg,tg,sel=win.doc.selection,cf=focus.curNode;if(win.global.getSelection){sel=win.global.getSelection();if(sel){if(sel.isCollapsed){tg=cf?cf.tagName:"";if(tg){tg=tg.toLowerCase();if(tg=="textarea"||(tg=="input"&&(!cf.type||cf.type.toLowerCase()=="text"))){sel={start:cf.selectionStart,end:cf.selectionEnd,node:cf,pRange:true};return {isCollapsed:(sel.end<=sel.start),mark:sel};}}bm={isCollapsed:true};if(sel.rangeCount){bm.mark=sel.getRangeAt(0).cloneRange();}}else{rg=sel.getRangeAt(0);bm={isCollapsed:false,mark:rg.cloneRange()};}}}else{if(sel){tg=cf?cf.tagName:"";tg=tg.toLowerCase();if(cf&&tg&&(tg=="button"||tg=="textarea"||tg=="input")){if(sel.type&&sel.type.toLowerCase()=="none"){return {isCollapsed:true,mark:null};}else{rg=sel.createRange();return {isCollapsed:rg.text&&rg.text.length?false:true,mark:{range:rg,pRange:true}};}}bm={};try{rg=sel.createRange();bm.isCollapsed=!(sel.type=="Text"?rg.htmlText.length:rg.length);}catch(e){bm.isCollapsed=true;return bm;}if(sel.type.toUpperCase()=="CONTROL"){if(rg.length){bm.mark=[];var i=0,len=rg.length;while(i<len){bm.mark.push(rg.item(i++));}}else{bm.isCollapsed=true;bm.mark=null;}}else{bm.mark=rg.getBookmark();}}else{console.warn("No idea how to store the current selection for this browser!");}}return bm;},moveToBookmark:function(_105f){var _1060=win.doc,mark=_105f.mark;if(mark){if(win.global.getSelection){var sel=win.global.getSelection();if(sel&&sel.removeAllRanges){if(mark.pRange){var n=mark.node;n.selectionStart=mark.start;n.selectionEnd=mark.end;}else{sel.removeAllRanges();sel.addRange(mark);}}else{console.warn("No idea how to restore selection for this browser!");}}else{if(_1060.selection&&mark){var rg;if(mark.pRange){rg=mark.range;}else{if(lang.isArray(mark)){rg=_1060.body.createControlRange();array.forEach(mark,function(n){rg.addElement(n);});}else{rg=_1060.body.createTextRange();rg.moveToBookmark(mark);}}rg.select();}}}},getFocus:function(menu,_1061){var node=!focus.curNode||(menu&&dom.isDescendant(focus.curNode,menu.domNode))?dijit._prevFocus:focus.curNode;return {node:node,bookmark:node&&(node==focus.curNode)&&win.withGlobal(_1061||win.global,dijit.getBookmark),openedForWindow:_1061};},_activeStack:[],registerIframe:function(_1062){return focus.registerIframe(_1062);},unregisterIframe:function(_1063){_1063&&_1063.remove();},registerWin:function(_1064,_1065){return focus.registerWin(_1064,_1065);},unregisterWin:function(_1066){_1066&&_1066.remove();}};focus.focus=function(_1067){if(!_1067){return;}var node="node" in _1067?_1067.node:_1067,_1068=_1067.bookmark,_1069=_1067.openedForWindow,_106a=_1068?_1068.isCollapsed:false;if(node){var _106b=(node.tagName.toLowerCase()=="iframe")?node.contentWindow:node;if(_106b&&_106b.focus){try{_106b.focus();}catch(e){}}focus._onFocusNode(node);}if(_1068&&win.withGlobal(_1069||win.global,dijit.isCollapsed)&&!_106a){if(_1069){_1069.focus();}try{win.withGlobal(_1069||win.global,dijit.moveToBookmark,null,[_1068]);}catch(e2){}}};focus.watch("curNode",function(name,_106c,_106d){dijit._curFocus=_106d;dijit._prevFocus=_106c;if(_106d){topic.publish("focusNode",_106d);}});focus.watch("activeStack",function(name,_106e,_106f){dijit._activeStack=_106f;});focus.on("widget-blur",function(_1070,by){topic.publish("widgetBlur",_1070,by);});focus.on("widget-focus",function(_1071,by){topic.publish("widgetFocus",_1071,by);});lang.mixin(dijit,_105e);return dijit;});},"dijit/a11y":function(){define("dijit/a11y",["dojo/_base/array","dojo/_base/config","dojo/_base/declare","dojo/dom","dojo/dom-attr","dojo/dom-style","dojo/sniff","./main"],function(array,_1072,_1073,dom,_1074,_1075,has,dijit){var shown=(dijit._isElementShown=function(elem){var s=_1075.get(elem);return (s.visibility!="hidden")&&(s.visibility!="collapsed")&&(s.display!="none")&&(_1074.get(elem,"type")!="hidden");});dijit.hasDefaultTabStop=function(elem){switch(elem.nodeName.toLowerCase()){case "a":return _1074.has(elem,"href");case "area":case "button":case "input":case "object":case "select":case "textarea":return true;case "iframe":var body;try{var _1076=elem.contentDocument;if("designMode" in _1076&&_1076.designMode=="on"){return true;}body=_1076.body;}catch(e1){try{body=elem.contentWindow.document.body;}catch(e2){return false;}}return body&&(body.contentEditable=="true"||(body.firstChild&&body.firstChild.contentEditable=="true"));default:return elem.contentEditable=="true";}};var _1077=(dijit.isTabNavigable=function(elem){if(_1074.get(elem,"disabled")){return false;}else{if(_1074.has(elem,"tabIndex")){return _1074.get(elem,"tabIndex")>=0;}else{return dijit.hasDefaultTabStop(elem);}}});dijit._getTabNavigable=function(root){var first,last,_1078,_1079,_107a,_107b,_107c={};function _107d(node){return node&&node.tagName.toLowerCase()=="input"&&node.type&&node.type.toLowerCase()=="radio"&&node.name&&node.name.toLowerCase();};var _107e=function(_107f){for(var child=_107f.firstChild;child;child=child.nextSibling){if(child.nodeType!=1||(has("ie")&&child.scopeName!=="HTML")||!shown(child)){continue;}if(_1077(child)){var _1080=+_1074.get(child,"tabIndex");if(!_1074.has(child,"tabIndex")||_1080==0){if(!first){first=child;}last=child;}else{if(_1080>0){if(!_1078||_1080<_1079){_1079=_1080;_1078=child;}if(!_107a||_1080>=_107b){_107b=_1080;_107a=child;}}}var rn=_107d(child);if(_1074.get(child,"checked")&&rn){_107c[rn]=child;}}if(child.nodeName.toUpperCase()!="SELECT"){_107e(child);}}};if(shown(root)){_107e(root);}function rs(node){return _107c[_107d(node)]||node;};return {first:rs(first),last:rs(last),lowest:rs(_1078),highest:rs(_107a)};};dijit.getFirstInTabbingOrder=function(root,doc){var elems=dijit._getTabNavigable(dom.byId(root,doc));return elems.lowest?elems.lowest:elems.first;};dijit.getLastInTabbingOrder=function(root,doc){var elems=dijit._getTabNavigable(dom.byId(root,doc));return elems.last?elems.last:elems.highest;};return {hasDefaultTabStop:dijit.hasDefaultTabStop,isTabNavigable:dijit.isTabNavigable,_getTabNavigable:dijit._getTabNavigable,getFirstInTabbingOrder:dijit.getFirstInTabbingOrder,getLastInTabbingOrder:dijit.getLastInTabbingOrder};});},"esri/map":function(){define(["dijit","dojo","dojox","dojo/require!esri/main,esri/_coremap,esri/MapNavigationManager,esri/layers/agsdynamic,esri/layers/agstiled,dojo/_base/html,dijit/_base/manager,esri/layers/agsimageservice,dijit/form/HorizontalSlider,dijit/form/VerticalSlider,dijit/form/HorizontalRule,dijit/form/VerticalRule,dijit/form/HorizontalRuleLabels,dijit/form/VerticalRuleLabels"],function(dijit,dojo,dojox){dojo.provide("esri.map");dojo.require("esri.main");dojo.require("esri._coremap");dojo.require("esri.MapNavigationManager");dojo.require("esri.layers.agsdynamic");dojo.require("esri.layers.agstiled");dojo.require("dojo._base.html");dojo.require("dijit._base.manager");dojo.require("esri.layers.agsimageservice");dojo.require("dijit.form.HorizontalSlider");dojo.require("dijit.form.VerticalSlider");dojo.require("dijit.form.HorizontalRule");dojo.require("dijit.form.VerticalRule");dojo.require("dijit.form.HorizontalRuleLabels");dojo.require("dijit.form.VerticalRuleLabels");dojo.declare("esri.Map",esri._CoreMap,(function(){var _1081=30,_1082=30,_1083={up:"panUp",right:"panRight",down:"panDown",left:"panLeft"},_1084={upperRight:"panUpperRight",lowerRight:"panLowerRight",lowerLeft:"panLowerLeft",upperLeft:"panUpperLeft"};var dc=dojo.connect,ddc=dojo.disconnect,dcr=dojo.create,ds=dojo.style,dh=dojo.hitch,_1085=dojo.coords,_1086=dojo.deprecated,mixin=dojo.mixin;return {constructor:function(_1087,_1088){mixin(this,{_slider:null,_navDiv:null,_mapParams:mixin({attributionWidth:0.45,slider:true,nav:false,logo:true,sliderStyle:"small",sliderPosition:"top-left",sliderOrientation:"vertical",autoResize:true},_1088||{})});mixin(this,{isDoubleClickZoom:false,isShiftDoubleClickZoom:false,isClickRecenter:false,isScrollWheelZoom:false,isPan:false,isRubberBandZoom:false,isKeyboardNavigation:false,isPanArrows:false,isZoomSlider:false});if(dojo.isFunction(esri._css)){esri._css=esri._css(this._mapParams.force3DTransforms);this.force3DTransforms=this._mapParams.force3DTransforms;}var _1089=(esri._hasTransforms&&esri._hasTransitions);this.navigationMode=this._mapParams.navigationMode||(_1089&&"css-transforms")||"classic";if(this.navigationMode==="css-transforms"&&!_1089){this.navigationMode="classic";}this.fadeOnZoom=esri._isDefined(this._mapParams.fadeOnZoom)?this._mapParams.fadeOnZoom:(this.navigationMode==="css-transforms");if(this.navigationMode!=="css-transforms"){this.fadeOnZoom=false;}this.setMapCursor("default");this.smartNavigation=_1088&&_1088.smartNavigation;if(!esri._isDefined(this.smartNavigation)&&dojo.isMac&&!esri.isTouchEnabled&&!(dojo.isFF<=3.5)){var parts=navigator.userAgent.match(/Mac\s+OS\s+X\s+([\d]+)(\.|\_)([\d]+)\D/i);if(parts&&esri._isDefined(parts[1])&&esri._isDefined(parts[3])){var _108a=parseInt(parts[1],10),_108b=parseInt(parts[3],10);this.smartNavigation=((_108a>10)||(_108a===10&&_108b>=6));}}var _108c=true;this.showAttribution=esri._isDefined(this._mapParams.showAttribution)?this._mapParams.showAttribution:_108c;this._onLoadHandler_connect=dc(this,"onLoad",this,"_onLoadInitNavsHandler");var _108d=dcr("div",{"class":"esriControlsBR"+(this._mapParams.nav?" withPanArrows":"")},this.root),_108e;if(this.showAttribution){if(dojo.getObject("esri.dijit.Attribution",false)){_108e=dcr("span",{"class":"esriAttribution"},_108d);dojo.style(_108e,"width",Math.floor(this.width*this._mapParams.attributionWidth)+"px");this._connects.push(dc(_108e,"onclick",function(){var _108f="esriAttributionOpen";if(dojo.hasClass(this,_108f)){dojo.removeClass(this,_108f);}else{if(this.scrollWidth>this.clientWidth){dojo.addClass(this,_108f);}}}));this.attribution=new esri.dijit.Attribution({map:this},_108e);}else{console.log("Unable to show map attribution. Did you forget to require 'esri.dijit.Attribution'?");}}if(this._mapParams.logo){var style={};if(dojo.isIE===6){style.filter="progid:DXImageTransform.Microsoft.AlphaImageLoader(enabled='true', sizingMethod='crop', src='"+dojo.moduleUrl("esri")+"images/map/logo-med.png"+"')";}var logo=this._ogol=dcr("div",{style:style},_108d);if((this.root.clientWidth*this.root.clientHeight)<250000){dojo.addClass(logo,"logo-sm");}else{dojo.addClass(logo,"logo-med");}if(!esri.isTouchEnabled){this._ogol_connect=dc(logo,"onclick",this,"_openLogoLink");}}var _1090=(this.navigationManager=new esri.MapNavigationManager(this)),_1091=_1090.mouseEvents,_1092=_1090.touchEvents;if(_1091){this.registerConnectEvents(_1091.constructor.connectEvents);}if(_1092){this.registerConnectEvents(_1092.constructor.connectEvents);}if(_1088&&_1088.basemap){this.setBasemap(_1088.basemap);}this.autoResize=this._mapParams.autoResize;if(this.autoResize){var _1093=dijit.getEnclosingWidget(this.container);this._connects.push(dc((_1093&&_1093.resize)?_1093:window,"resize",this,this.resize));this._connects.push(dc(window,"orientationchange",this,this.resize));}},_cleanUp:function(){this.disableMapNavigation();this.navigationManager.destroy();var i;for(i=this._connects.length;i>=0;i--){ddc(this._connects[i]);delete this._connects[i];}ddc(this._slider_connect);ddc(this._ogol_connect);var _1094=this._slider;if(_1094&&_1094.destroy&&!_1094._destroyed){_1094.destroy();}var _1095=this._navDiv,_1096=this.attribution;if(_1095){dojo.destroy(_1095);}if(_1096){_1096.destroy();}this.attribution=this.navigationManager=null;this.inherited("_cleanUp",arguments);},_isPanningOrZooming:function(){return this.__panning||this.__zooming;},_canZoom:function(value){var level=this.getLevel();return !this.__tileInfo||!((level===this.getMinZoom()&&value<0)||(level===this.getMaxZoom()&&value>0));},_onLoadInitNavsHandler:function(){this.enableMapNavigation();this._createNav();if(this._mapParams.sliderStyle==="small"||!this._createSlider){this._createSimpleSlider();}else{this._createSlider();}ddc(this._onLoadHandler_connect);},_createNav:function(){if(this._mapParams.nav){var div,v,i,_1097=dojo.addClass,id=this.id;this._navDiv=dcr("div",{id:id+"_navdiv"},this.root);_1097(this._navDiv,"navDiv");var w2=this.width/2,h2=this.height/2,wh;for(i in _1083){v=_1083[i];div=dcr("div",{id:id+"_pan_"+i},this._navDiv);_1097(div,"fixedPan "+v);if(i==="up"||i==="down"){wh=parseInt(_1085(div).w,10)/2;ds(div,{left:(w2-wh)+"px",zIndex:_1081});}else{wh=parseInt(_1085(div).h,10)/2;ds(div,{top:(h2-wh)+"px",zIndex:_1081});}this._connects.push(dc(div,"onclick",dh(this,this[v])));}this._onMapResizeNavHandler_connect=dc(this,"onResize",this,"_onMapResizeNavHandler");for(i in _1084){v=_1084[i];div=dcr("div",{id:id+"_pan_"+i,style:{zIndex:_1081}},this._navDiv);_1097(div,"fixedPan "+v);this._connects.push(dc(div,"onclick",dh(this,this[v])));}this.isPanArrows=true;}},_onMapResizeNavHandler:function(_1098,wd,ht){var id=this.id,w2=wd/2,h2=ht/2,byId=dojo.byId,i,div,wh;for(i in _1083){div=byId(id+"_pan_"+i);if(i==="up"||i==="down"){wh=parseInt(_1085(div).w,10)/2;ds(div,"left",(w2-wh)+"px");}else{wh=parseInt(_1085(div).h,10)/2;ds(div,"top",(h2-wh)+"px");}}},_createSimpleSlider:function(){if(this._mapParams.slider){var _1099=(this._slider=dcr("div",{id:this.id+"_zoom_slider","class":this._getSliderClass(),style:{zIndex:_1082}})),_109a=(esri.isTouchEnabled&&!dojo.isFF)?"touchstart":"onclick",_109b=dcr("div",{"class":"esriSimpleSliderIncrementButton"},_1099),_109c=dcr("div",{"class":"esriSimpleSliderDecrementButton"},_1099);_109b.innerHTML="+";_109c.innerHTML="&ndash;";if(dojo.isIE<8){dojo.addClass(_109c,"dj_ie67Fix");}this._connects.push(dc(_109b,_109a,this,this._simpleSliderChangeHandler));this._connects.push(dc(_109c,_109a,this,this._simpleSliderChangeHandler));if(dojo.isIE<10){dojo.setSelectable(_1099,false);}this.root.appendChild(_1099);this.isZoomSlider=true;}},_simpleSliderChangeHandler:function(evt){var _109d=(evt.currentTarget.className.indexOf("IncrementButton")!==-1)?true:false;this._extentUtil({numLevels:_109d?1:-1});},_getSliderClass:function(large){var _109e="",type=(large?"Large":"Simple"),_109f=this._mapParams.sliderOrientation,_10a0=this._mapParams.sliderPosition||"";_109f=(_109f&&_109f.toLowerCase()==="horizontal")?"esri"+type+"SliderHorizontal":"esri"+type+"SliderVertical";if(_10a0){switch(_10a0.toLowerCase()){case "top-left":_10a0="esri"+type+"SliderTL";break;case "top-right":_10a0="esri"+type+"SliderTR";break;case "bottom-left":_10a0="esri"+type+"SliderBL";break;case "bottom-right":_10a0="esri"+type+"SliderBR";break;default:break;}}return "esri"+type+"Slider"+" "+_109f+" "+_10a0;},_createSlider:function(){if(this._mapParams.slider){var div=dcr("div",{id:this.id+"_zoom_slider"},this.root),_10a1=esri.config.defaults.map,_10a2=this._getSliderClass(true),_10a3=(_10a2.indexOf("Horizontal")!==-1),_10a4=(_10a2.indexOf("SliderTL")!==-1||_10a2.indexOf("SliderBL")!==-1),isTop=(_10a2.indexOf("SliderTL")!==-1||_10a2.indexOf("SliderTR")!==-1),_10a5=_10a3?dijit.form.HorizontalSlider:dijit.form.VerticalSlider,_10a6=this.getNumLevels(),dform=dijit.form,i,il,_10a7;if(_10a6>0){var _10a8,_10a9,_10aa=this._mapParams.sliderLabels,_10ab=!!_10aa,_10ac=(_10aa!==false);if(_10ac){var _10ad=_10a3?dform.HorizontalRule:dform.VerticalRule,_10ae=_10a3?dform.HorizontalRuleLabels:dform.VerticalRuleLabels,_10af,_10b0=_10a3?"bottomDecoration":"rightDecoration";if(!_10aa){_10aa=[];for(i=0,il=_10a6;i<il;i++){_10aa[i]="";}}_10af=[{"class":"esriLargeSliderTicks",container:_10b0,count:_10a6,dijitClass:_10ad},{"class":_10ab&&"esriLargeSliderLabels",container:_10b0,count:_10a6,labels:_10aa,dijitClass:_10ae}];dojo.forEach(_10af,function(_10b1){var _10b2=dcr("div"),_10b3=_10b1.dijitClass;delete _10b1.dijitClass;div.appendChild(_10b2);if(_10b3===_10ad){_10a8=new _10b3(_10b1,_10b2);}else{_10a9=new _10b3(_10b1,_10b2);}});}_10a7=(this._slider=new _10a5({id:div.id,"class":_10a2,minimum:this.getMinZoom(),maximum:this.getMaxZoom(),discreteValues:_10a6,value:this.getLevel(),clickSelect:true,intermediateChanges:true,style:"z-index:"+_1082+";"},div));_10a7.startup();if(_10ac){_10a8.startup();_10a9.startup();}this._slider_connect=dc(_10a7,"onChange",this,"_onSliderChangeHandler");this._connects.push(dc(this,"onExtentChange",this,"_onExtentChangeSliderHandler"));this._connects.push(dc(_10a7._movable,"onFirstMove",this,"_onSliderMoveStartHandler"));}else{_10a7=(this._slider=new _10a5({id:div.id,"class":_10a2,minimum:0,maximum:2,discreteValues:3,value:1,clickSelect:true,intermediateChanges:_10a1.sliderChangeImmediate,style:"height:50px; z-index:"+_1082+";"},div));var _10b4=_10a7.domNode.firstChild.childNodes;for(i=1;i<=3;i++){ds(_10b4[i],"visibility","hidden");}_10a7.startup();this._slider_connect=dc(_10a7,"onChange",this,"_onDynSliderChangeHandler");this._connects.push(dc(this,"onExtentChange",this,"_onExtentChangeDynSliderHandler"));}var _10b5=_10a7.incrementButton,_10b6=_10a7.decrementButton;_10b5.style.outline="none";_10b6.style.outline="none";_10a7.sliderHandle.style.outline="none";_10a7._onKeyPress=function(){};var _10b7=_10a7._movable;if(_10b7){var saved=_10b7.onMouseDown;_10b7.onMouseDown=function(e){if(dojo.isIE<9&&e.button!==1){return;}saved.apply(this,arguments);};}this.isZoomSlider=true;}},_onSliderMoveStartHandler:function(){ddc(this._slider_connect);ddc(this._slidermovestop_connect);this._slider_connect=dc(this._slider,"onChange",this,"_onSliderChangeDragHandler");this._slidermovestop_connect=dc(this._slider._movable,"onMoveStop",this,"_onSliderMoveEndHandler");},_onSliderChangeDragHandler:function(value){this._extentUtil({targetLevel:value});},_onSliderMoveEndHandler:function(){ddc(this._slider_connect);ddc(this._slidermovestop_connect);},_onSliderChangeHandler:function(value){this.setLevel(value);},_updateSliderValue:function(_10b8,_10b9){ddc(this._slider_connect);var _10ba=this._slider;var saved=_10ba._onChangeActive;_10ba._onChangeActive=false;_10ba.set("value",_10b8);_10ba._onChangeActive=saved;this._slider_connect=dc(_10ba,"onChange",this,_10b9);},_onExtentChangeSliderHandler:function(_10bb,_10bc,_10bd,lod){ddc(this._slidermovestop_connect);this._updateSliderValue(lod.level,"_onSliderChangeHandler");},_onDynSliderChangeHandler:function(value){this._extentUtil({numLevels:value>0?1:-1});},_onExtentChangeDynSliderHandler:function(){this._updateSliderValue(1,"_onDynSliderChangeHandler");},_openLogoLink:function(evt){window.open(esri.config.defaults.map.logoLink,"_blank");dojo.stopEvent(evt);},enableMapNavigation:function(){this.navigationManager.enableNavigation();},disableMapNavigation:function(){this.navigationManager.disableNavigation();},enableDoubleClickZoom:function(){if(!this.isDoubleClickZoom){this.navigationManager.enableDoubleClickZoom();this.isDoubleClickZoom=true;}},disableDoubleClickZoom:function(){if(this.isDoubleClickZoom){this.navigationManager.disableDoubleClickZoom();this.isDoubleClickZoom=false;}},enableShiftDoubleClickZoom:function(){if(!this.isShiftDoubleClickZoom){_1086(this.declaredClass+": "+esri.bundle.map.deprecateShiftDblClickZoom,null,"v2.0");this.navigationManager.enableShiftDoubleClickZoom();this.isShiftDoubleClickZoom=true;}},disableShiftDoubleClickZoom:function(){if(this.isShiftDoubleClickZoom){_1086(this.declaredClass+": "+esri.bundle.map.deprecateShiftDblClickZoom,null,"v2.0");this.navigationManager.disableShiftDoubleClickZoom();this.isShiftDoubleClickZoom=false;}},enableClickRecenter:function(){if(!this.isClickRecenter){this.navigationManager.enableClickRecenter();this.isClickRecenter=true;}},disableClickRecenter:function(){if(this.isClickRecenter){this.navigationManager.disableClickRecenter();this.isClickRecenter=false;}},enablePan:function(){if(!this.isPan){this.navigationManager.enablePan();this.isPan=true;}},disablePan:function(){if(this.isPan){this.navigationManager.disablePan();this.isPan=false;}},enableRubberBandZoom:function(){if(!this.isRubberBandZoom){this.navigationManager.enableRubberBandZoom();this.isRubberBandZoom=true;}},disableRubberBandZoom:function(){if(this.isRubberBandZoom){this.navigationManager.disableRubberBandZoom();this.isRubberBandZoom=false;}},enableKeyboardNavigation:function(){if(!this.isKeyboardNavigation){this.navigationManager.enableKeyboardNavigation();this.isKeyboardNavigation=true;}},disableKeyboardNavigation:function(){if(this.isKeyboardNavigation){this.navigationManager.disableKeyboardNavigation();this.isKeyboardNavigation=false;}},enableScrollWheelZoom:function(){if(!this.isScrollWheelZoom){this.navigationManager.enableScrollWheelZoom();this.isScrollWheelZoom=true;}},disableScrollWheelZoom:function(){if(this.isScrollWheelZoom){this.navigationManager.disableScrollWheelZoom();this.isScrollWheelZoom=false;}},showPanArrows:function(){if(this._navDiv){esri.show(this._navDiv);this.isPanArrows=true;}},hidePanArrows:function(){if(this._navDiv){esri.hide(this._navDiv);this.isPanArrows=false;}},showZoomSlider:function(){if(this._slider){ds(this._slider.domNode||this._slider,"visibility","visible");this.isZoomSlider=true;}},hideZoomSlider:function(){if(this._slider){ds(this._slider.domNode||this._slider,"visibility","hidden");this.isZoomSlider=false;}}};}()));});},"dijit/form/_ToggleButtonMixin":function(){define("dijit/form/_ToggleButtonMixin",["dojo/_base/declare","dojo/dom-attr"],function(_10be,_10bf){return _10be("dijit.form._ToggleButtonMixin",null,{checked:false,_aria_attr:"aria-pressed",_onClick:function(evt){var _10c0=this.checked;this._set("checked",!_10c0);var ret=this.inherited(arguments);this.set("checked",ret?this.checked:_10c0);return ret;},_setCheckedAttr:function(value,_10c1){this._set("checked",value);_10bf.set(this.focusNode||this.domNode,"checked",value);(this.focusNode||this.domNode).setAttribute(this._aria_attr,value?"true":"false");this._handleOnChange(value,_10c1);},reset:function(){this._hasBeenBlurred=false;this.set("checked",this.params.checked||false);}});});},"dijit/_Widget":function(){define("dijit/_Widget",["dojo/aspect","dojo/_base/config","dojo/_base/connect","dojo/_base/declare","dojo/has","dojo/_base/kernel","dojo/_base/lang","dojo/query","dojo/ready","./registry","./_WidgetBase","./_OnDijitClickMixin","./_FocusMixin","dojo/uacss","./hccss"],function(_10c2,_10c3,_10c4,_10c5,has,_10c6,lang,query,ready,_10c7,_10c8,_10c9,_10ca){function _10cb(){};function _10cc(_10cd){return function(obj,event,scope,_10ce){if(obj&&typeof event=="string"&&obj[event]==_10cb){return obj.on(event.substring(2).toLowerCase(),lang.hitch(scope,_10ce));}return _10cd.apply(_10c4,arguments);};};_10c2.around(_10c4,"connect",_10cc);if(_10c6.connect){_10c2.around(_10c6,"connect",_10cc);}var _10cf=_10c5("dijit._Widget",[_10c8,_10c9,_10ca],{onClick:_10cb,onDblClick:_10cb,onKeyDown:_10cb,onKeyPress:_10cb,onKeyUp:_10cb,onMouseDown:_10cb,onMouseMove:_10cb,onMouseOut:_10cb,onMouseOver:_10cb,onMouseLeave:_10cb,onMouseEnter:_10cb,onMouseUp:_10cb,constructor:function(_10d0){this._toConnect={};for(var name in _10d0){if(this[name]===_10cb){this._toConnect[name.replace(/^on/,"").toLowerCase()]=_10d0[name];delete _10d0[name];}}},postCreate:function(){this.inherited(arguments);for(var name in this._toConnect){this.on(name,this._toConnect[name]);}delete this._toConnect;},on:function(type,func){if(this[this._onMap(type)]===_10cb){return _10c4.connect(this.domNode,type.toLowerCase(),this,func);}return this.inherited(arguments);},_setFocusedAttr:function(val){this._focused=val;this._set("focused",val);},setAttribute:function(attr,value){_10c6.deprecated(this.declaredClass+"::setAttribute(attr, value) is deprecated. Use set() instead.","","2.0");this.set(attr,value);},attr:function(name,value){if(_10c3.isDebug){var _10d1=arguments.callee._ach||(arguments.callee._ach={}),_10d2=(arguments.callee.caller||"unknown caller").toString();if(!_10d1[_10d2]){_10c6.deprecated(this.declaredClass+"::attr() is deprecated. Use get() or set() instead, called from "+_10d2,"","2.0");_10d1[_10d2]=true;}}var args=arguments.length;if(args>=2||typeof name==="object"){return this.set.apply(this,arguments);}else{return this.get(name);}},getDescendants:function(){_10c6.deprecated(this.declaredClass+"::getDescendants() is deprecated. Use getChildren() instead.","","2.0");return this.containerNode?query("[widgetId]",this.containerNode).map(_10c7.byNode):[];},_onShow:function(){this.onShow();},onShow:function(){},onHide:function(){},onClose:function(){return true;}});if(has("dijit-legacy-requires")){ready(0,function(){var _10d3=["dijit/_base"];require(_10d3);});}return _10cf;});},"dojo/touch":function(){define(["./_base/kernel","./_base/lang","./aspect","./dom","./on","./has","./mouse","./ready","./_base/window"],function(dojo,lang,_10d4,dom,on,has,mouse,ready,win){var _10d5=has("touch");var _10d6,_10d7;if(_10d5){ready(function(){_10d7=win.body();win.doc.addEventListener("touchstart",function(evt){var _10d8=_10d7;_10d7=evt.target;on.emit(_10d8,"dojotouchout",{target:_10d8,relatedTarget:_10d7,bubbles:true});on.emit(_10d7,"dojotouchover",{target:_10d7,relatedTarget:_10d8,bubbles:true});},true);on(win.doc,"touchmove",function(evt){var _10d9=win.doc.elementFromPoint(evt.pageX-win.global.pageXOffset,evt.pageY-win.global.pageYOffset);if(_10d9&&_10d7!==_10d9){on.emit(_10d7,"dojotouchout",{target:_10d7,relatedTarget:_10d9,bubbles:true});on.emit(_10d9,"dojotouchover",{target:_10d9,relatedTarget:_10d7,bubbles:true});_10d7=_10d9;}});});_10d6=function(node,_10da){return on(win.doc,"touchmove",function(evt){if(node===win.doc||dom.isDescendant(_10d7,node)){_10da.call(this,lang.mixin({},evt,{target:_10d7}));}});};}function _10db(type){return function(node,_10dc){return on(node,type,_10dc);};};var touch={press:_10db(_10d5?"touchstart":"mousedown"),move:_10d5?_10d6:_10db("mousemove"),release:_10db(_10d5?"touchend":"mouseup"),cancel:_10d5?_10db("touchcancel"):mouse.leave,over:_10db(_10d5?"dojotouchover":"mouseover"),out:_10db(_10d5?"dojotouchout":"mouseout"),enter:mouse._eventHandler(_10d5?"dojotouchover":"mouseover"),leave:mouse._eventHandler(_10d5?"dojotouchout":"mouseout")};1&&(dojo.touch=touch);return touch;});},"esri/layers/agstiled":function(){define(["dijit","dojo","dojox","dojo/require!esri/layers/tiled,esri/layers/agscommon"],function(dijit,dojo,dojox){dojo.provide("esri.layers.agstiled");dojo.require("esri.layers.tiled");dojo.require("esri.layers.agscommon");dojo.declare("esri.layers.ArcGISTiledMapServiceLayer",[esri.layers.TiledMapServiceLayer,esri.layers.ArcGISMapServiceLayer],{constructor:function(url,_10dd){if(_10dd){if(_10dd.roundrobin){dojo.deprecated(this.declaredClass+" : "+esri.bundle.layers.agstiled.deprecateRoundrobin);_10dd.tileServers=_10dd.roundrobin;}this._setTileServers(_10dd.tileServers);this._loadCallback=_10dd.loadCallback;}this._params=dojo.mixin({},this._url.query);this._initLayer=dojo.hitch(this,this._initLayer);var _10de=_10dd&&_10dd.resourceInfo;if(_10de){this._initLayer(_10de);}else{this._load=dojo.hitch(this,this._load);this._load();}},_TILE_FORMATS:{PNG:"png",PNG8:"png",PNG24:"png",PNG32:"png",JPG:"jpg",JPEG:"jpg",GIF:"gif"},_setTileServers:function(list){if(list&&list.length>0){this.tileServers=list;var i,il=list.length;for(i=0;i<il;i++){list[i]=esri.urlToObject(list[i]).path;}}},_initLayer:function(_10df,io){this.inherited(arguments);this.resourceInfo=dojo.toJson(_10df);this.tileInfo=new esri.layers.TileInfo(_10df.tileInfo);if(!this.spatialReference&&this.tileInfo.spatialReference){this.spatialReference=new esri.SpatialReference(this.tileInfo.spatialReference.toJson());}this.isPNG32=this.tileInfo.format==="PNG24"||this.tileInfo.format==="PNG32";if(_10df.timeInfo){this.timeInfo=new esri.layers.TimeInfo(_10df.timeInfo);}var path=this._url.path;if(!this.tileServers){if(_10df.tileServers){this._setTileServers(_10df.tileServers);}else{var _10e0=(path.search(/^https?\:\/\/server\.arcgisonline\.com/i)!==-1),_10e1=(path.search(/^https?\:\/\/services\.arcgisonline\.com/i)!==-1);if(_10e0||_10e1){this._setTileServers([path,path.replace((_10e0?/server\.arcgisonline/i:/services\.arcgisonline/i),(_10e0?"services.arcgisonline":"server.arcgisonline"))]);}}}if(path.search(/^https?\:\/\/(server|services)\.arcgisonline\.com\/arcgis\/rest\/services\/world_topo_map\/mapserver/i)!==-1){this.hasAttributionData=true;var _10e2=(window.location.protocol==="file:")?"http:":window.location.protocol;this.attributionDataUrl=this.attributionDataUrl||(_10e2+"//static.arcgis.com/attribution/World_Topo_Map");}this.loaded=true;this.onLoad(this);var _10e3=this._loadCallback;if(_10e3){delete this._loadCallback;_10e3(this);}},getTileUrl:function(level,row,col){var ts=this.tileServers,query=this._url.query,iurl=(ts?ts[row%ts.length]:this._url.path)+"/tile/"+level+"/"+row+"/"+col;if(query){iurl+=("?"+dojo.objectToQuery(query));}var token=this._getToken();if(token&&(!query||!query.token)){iurl+=(iurl.indexOf("?")===-1?"?":"&")+"token="+token;}return esri._getProxiedUrl(iurl);}});});},"dojo/fx":function(){define(["./_base/lang","./Evented","./_base/kernel","./_base/array","./_base/connect","./_base/fx","./dom","./dom-style","./dom-geometry","./ready","require"],function(lang,_10e4,dojo,_10e5,_10e6,_10e7,dom,_10e8,geom,ready,_10e9){if(!dojo.isAsync){ready(0,function(){var _10ea=["./fx/Toggler"];_10e9(_10ea);});}var _10eb=dojo.fx={};var _10ec={_fire:function(evt,args){if(this[evt]){this[evt].apply(this,args||[]);}return this;}};var _10ed=function(_10ee){this._index=-1;this._animations=_10ee||[];this._current=this._onAnimateCtx=this._onEndCtx=null;this.duration=0;_10e5.forEach(this._animations,function(a){this.duration+=a.duration;if(a.delay){this.duration+=a.delay;}},this);};_10ed.prototype=new _10e4();lang.extend(_10ed,{_onAnimate:function(){this._fire("onAnimate",arguments);},_onEnd:function(){_10e6.disconnect(this._onAnimateCtx);_10e6.disconnect(this._onEndCtx);this._onAnimateCtx=this._onEndCtx=null;if(this._index+1==this._animations.length){this._fire("onEnd");}else{this._current=this._animations[++this._index];this._onAnimateCtx=_10e6.connect(this._current,"onAnimate",this,"_onAnimate");this._onEndCtx=_10e6.connect(this._current,"onEnd",this,"_onEnd");this._current.play(0,true);}},play:function(delay,_10ef){if(!this._current){this._current=this._animations[this._index=0];}if(!_10ef&&this._current.status()=="playing"){return this;}var _10f0=_10e6.connect(this._current,"beforeBegin",this,function(){this._fire("beforeBegin");}),_10f1=_10e6.connect(this._current,"onBegin",this,function(arg){this._fire("onBegin",arguments);}),_10f2=_10e6.connect(this._current,"onPlay",this,function(arg){this._fire("onPlay",arguments);_10e6.disconnect(_10f0);_10e6.disconnect(_10f1);_10e6.disconnect(_10f2);});if(this._onAnimateCtx){_10e6.disconnect(this._onAnimateCtx);}this._onAnimateCtx=_10e6.connect(this._current,"onAnimate",this,"_onAnimate");if(this._onEndCtx){_10e6.disconnect(this._onEndCtx);}this._onEndCtx=_10e6.connect(this._current,"onEnd",this,"_onEnd");this._current.play.apply(this._current,arguments);return this;},pause:function(){if(this._current){var e=_10e6.connect(this._current,"onPause",this,function(arg){this._fire("onPause",arguments);_10e6.disconnect(e);});this._current.pause();}return this;},gotoPercent:function(_10f3,_10f4){this.pause();var _10f5=this.duration*_10f3;this._current=null;_10e5.some(this._animations,function(a){if(a.duration<=_10f5){this._current=a;return true;}_10f5-=a.duration;return false;});if(this._current){this._current.gotoPercent(_10f5/this._current.duration,_10f4);}return this;},stop:function(_10f6){if(this._current){if(_10f6){for(;this._index+1<this._animations.length;++this._index){this._animations[this._index].stop(true);}this._current=this._animations[this._index];}var e=_10e6.connect(this._current,"onStop",this,function(arg){this._fire("onStop",arguments);_10e6.disconnect(e);});this._current.stop();}return this;},status:function(){return this._current?this._current.status():"stopped";},destroy:function(){if(this._onAnimateCtx){_10e6.disconnect(this._onAnimateCtx);}if(this._onEndCtx){_10e6.disconnect(this._onEndCtx);}}});lang.extend(_10ed,_10ec);_10eb.chain=function(_10f7){return new _10ed(_10f7);};var _10f8=function(_10f9){this._animations=_10f9||[];this._connects=[];this._finished=0;this.duration=0;_10e5.forEach(_10f9,function(a){var _10fa=a.duration;if(a.delay){_10fa+=a.delay;}if(this.duration<_10fa){this.duration=_10fa;}this._connects.push(_10e6.connect(a,"onEnd",this,"_onEnd"));},this);this._pseudoAnimation=new _10e7.Animation({curve:[0,1],duration:this.duration});var self=this;_10e5.forEach(["beforeBegin","onBegin","onPlay","onAnimate","onPause","onStop","onEnd"],function(evt){self._connects.push(_10e6.connect(self._pseudoAnimation,evt,function(){self._fire(evt,arguments);}));});};lang.extend(_10f8,{_doAction:function(_10fb,args){_10e5.forEach(this._animations,function(a){a[_10fb].apply(a,args);});return this;},_onEnd:function(){if(++this._finished>this._animations.length){this._fire("onEnd");}},_call:function(_10fc,args){var t=this._pseudoAnimation;t[_10fc].apply(t,args);},play:function(delay,_10fd){this._finished=0;this._doAction("play",arguments);this._call("play",arguments);return this;},pause:function(){this._doAction("pause",arguments);this._call("pause",arguments);return this;},gotoPercent:function(_10fe,_10ff){var ms=this.duration*_10fe;_10e5.forEach(this._animations,function(a){a.gotoPercent(a.duration<ms?1:(ms/a.duration),_10ff);});this._call("gotoPercent",arguments);return this;},stop:function(_1100){this._doAction("stop",arguments);this._call("stop",arguments);return this;},status:function(){return this._pseudoAnimation.status();},destroy:function(){_10e5.forEach(this._connects,_10e6.disconnect);}});lang.extend(_10f8,_10ec);_10eb.combine=function(_1101){return new _10f8(_1101);};_10eb.wipeIn=function(args){var node=args.node=dom.byId(args.node),s=node.style,o;var anim=_10e7.animateProperty(lang.mixin({properties:{height:{start:function(){o=s.overflow;s.overflow="hidden";if(s.visibility=="hidden"||s.display=="none"){s.height="1px";s.display="";s.visibility="";return 1;}else{var _1102=_10e8.get(node,"height");return Math.max(_1102,1);}},end:function(){return node.scrollHeight;}}}},args));var fini=function(){s.height="auto";s.overflow=o;};_10e6.connect(anim,"onStop",fini);_10e6.connect(anim,"onEnd",fini);return anim;};_10eb.wipeOut=function(args){var node=args.node=dom.byId(args.node),s=node.style,o;var anim=_10e7.animateProperty(lang.mixin({properties:{height:{end:1}}},args));_10e6.connect(anim,"beforeBegin",function(){o=s.overflow;s.overflow="hidden";s.display="";});var fini=function(){s.overflow=o;s.height="auto";s.display="none";};_10e6.connect(anim,"onStop",fini);_10e6.connect(anim,"onEnd",fini);return anim;};_10eb.slideTo=function(args){var node=args.node=dom.byId(args.node),top=null,left=null;var init=(function(n){return function(){var cs=_10e8.getComputedStyle(n);var pos=cs.position;top=(pos=="absolute"?n.offsetTop:parseInt(cs.top)||0);left=(pos=="absolute"?n.offsetLeft:parseInt(cs.left)||0);if(pos!="absolute"&&pos!="relative"){var ret=geom.position(n,true);top=ret.y;left=ret.x;n.style.position="absolute";n.style.top=top+"px";n.style.left=left+"px";}};})(node);init();var anim=_10e7.animateProperty(lang.mixin({properties:{top:args.top||0,left:args.left||0}},args));_10e6.connect(anim,"beforeBegin",anim,init);return anim;};return _10eb;});},"dijit/_DialogMixin":function(){define("dijit/_DialogMixin",["dojo/_base/declare","./a11y"],function(_1103,a11y){return _1103("dijit._DialogMixin",null,{execute:function(){},onCancel:function(){},onExecute:function(){},_onSubmit:function(){this.onExecute();this.execute(this.get("value"));},_getFocusItems:function(){var elems=a11y._getTabNavigable(this.containerNode);this._firstFocusItem=elems.lowest||elems.first||this.closeButtonNode||this.domNode;this._lastFocusItem=elems.last||elems.highest||this._firstFocusItem;}});});},"esri/tasks/route":function(){define(["dijit","dojo","dojox","dojo/require!esri/tasks/na,esri/tasks/gp,esri/utils"],function(dijit,dojo,dojox){dojo.provide("esri.tasks.route");dojo.require("esri.tasks.na");dojo.require("esri.tasks.gp");dojo.require("esri.utils");dojo.declare("esri.tasks.RouteTask",esri.tasks._Task,{constructor:function(url){this._url.path+="/solve";this._handler=dojo.hitch(this,this._handler);},__msigns:[{n:"solve",c:3,a:[{i:0,p:["stops.features","barriers.features","polylineBarriers.features","polygonBarriers.features"]}],e:2}],_handler:function(_1104,io,_1105,_1106,dfd){try{var _1107=[],_1108=[],dirs=_1104.directions||[],_1109=_1104.routes?_1104.routes.features:[],stops=_1104.stops?_1104.stops.features:[],_110a=_1104.barriers?_1104.barriers.features:[],_110b=_1104.polygonBarriers?_1104.polygonBarriers.features:[],_110c=_1104.polylineBarriers?_1104.polylineBarriers.features:[],_110d=_1104.messages,_110e="esri.tasks.RouteTask.NULL_ROUTE_NAME",_110f=dojo.forEach,_1110=dojo.indexOf,_1111=true,_1112,_1113,sr=((_1104.routes&&_1104.routes.spatialReference)||(_1104.stops&&_1104.stops.spatialReference)||(_1104.barriers&&_1104.barriers.spatialReference)||(_1104.polygonBarriers&&_1104.polygonBarriers.spatialReference)||(_1104.polylineBarriers&&_1104.polylineBarriers.spatialReference));_110f(dirs,function(dir){_1107.push(_1112=dir.routeName);_1108[_1112]={directions:dir};});_110f(_1109,function(route){if(_1110(_1107,(_1112=route.attributes.Name))===-1){_1107.push(_1112);_1108[_1112]={};}_1108[_1112].route=route;});_110f(stops,function(stop){_1113=stop.attributes;if(_1110(_1107,(_1112=_1113.RouteName||_110e))===-1){_1107.push(_1112);_1108[_1112]={};}if(_1112!==_110e){_1111=false;}if(_1108[_1112].stops===undefined){_1108[_1112].stops=[];}_1108[_1112].stops.push(stop);});if(stops.length>0&&_1111===true){_1108[_1107[0]].stops=_1108[_110e].stops;delete _1108[_110e];_1107.splice(dojo.indexOf(_1107,_110e),1);}var _1114=[];_110f(_1107,function(_1115,i){_1108[_1115].routeName=_1115===_110e?null:_1115;_1108[_1115].spatialReference=sr;_1114.push(new esri.tasks.RouteResult(_1108[_1115]));});var _1116=function(barrs){_110f(barrs,function(barr,i){if(barr.geometry){barr.geometry.spatialReference=sr;}barrs[i]=new esri.Graphic(barr);});return barrs;};_110f(_110d,function(_1117,i){_110d[i]=new esri.tasks.NAMessage(_1117);});var _1118={routeResults:_1114,barriers:_1116(_110a),polygonBarriers:_1116(_110b),polylineBarriers:_1116(_110c),messages:_110d};this._successHandler([_1118],"onSolveComplete",_1105,dfd);}catch(err){this._errorHandler(err,_1106,dfd);}},solve:function(_1119,_111a,_111b,_111c){var stops=_1119.stops;if(stops&&stops instanceof esri.tasks.FeatureSet){var _111d=[],error=false,attr;dojo.forEach(stops.features,function(stop){attr=stop.attributes;if((!attr||!attr.RouteName)&&!error){error=true;}else{if(dojo.indexOf(_111d,attr?attr.RouteName:"")===-1){_111d.push(attr?attr.RouteName:"");}}});if(_111d.length>1&&error){error=new Error(esri.bundle.tasks.na.route.routeNameNotSpecified);this.onError(error);if(_111b){_111b(error);}throw error;}}var _111e=_111c.assembly,_111f=this._encode(dojo.mixin({},this._url.query,{f:"json"},_1119.toJson(_111e&&_111e[0]))),_1120=this._handler,_1121=this._errorHandler;return esri.request({url:this._url.path,content:_111f,callbackParamName:"callback",load:function(r,i){_1120(r,i,_111a,_111b,_111c.dfd);},error:function(r){_1121(r,_111b,_111c.dfd);}});},onSolveComplete:function(){}});esri._createWrappers("esri.tasks.RouteTask");dojo.declare("esri.tasks.RouteParameters",null,{accumulateAttributes:null,attributeParameterValues:null,barriers:null,directionsLanguage:null,directionsLengthUnits:null,directionsOutputType:null,directionsStyleName:null,directionsTimeAttribute:null,doNotLocateOnRestrictedElements:false,findBestSequence:null,ignoreInvalidLocations:null,impedanceAttribute:null,outputLines:null,outputGeometryPrecision:null,outputGeometryPrecisionUnits:null,outSpatialReference:null,polygonBarriers:null,polylineBarriers:null,preserveFirstStop:null,preserveLastStop:null,restrictionAttributes:null,restrictUTurns:null,returnBarriers:false,returnDirections:false,returnPolygonBarriers:false,returnPolylineBarriers:false,returnRoutes:true,returnStops:false,startTime:null,stops:null,useHierarchy:null,useTimeWindows:null,toJson:function(_1122){var json={returnDirections:this.returnDirections,returnRoutes:this.returnRoutes,returnStops:this.returnStops,returnBarriers:this.returnBarriers,returnPolygonBarriers:this.returnPolygonBarriers,returnPolylineBarriers:this.returnPolylineBarriers,attributeParameterValues:this.attributeParameterValues&&dojo.toJson(this.attributeParameterValues),outSR:this.outSpatialReference?(this.outSpatialReference.wkid||dojo.toJson(this.outSpatialReference.toJson())):null,outputLines:this.outputLines,findBestSequence:this.findBestSequence,preserveFirstStop:this.preserveFirstStop,preserveLastStop:this.preserveLastStop,useTimeWindows:this.useTimeWindows,startTime:this.startTime?this.startTime.getTime():null,accumulateAttributeNames:this.accumulateAttributes?this.accumulateAttributes.join(","):null,ignoreInvalidLocations:this.ignoreInvalidLocations,impedanceAttributeName:this.impedanceAttribute,restrictionAttributeNames:this.restrictionAttributes?this.restrictionAttributes.join(","):null,restrictUTurns:this.restrictUTurns,useHierarchy:this.useHierarchy,directionsLanguage:this.directionsLanguage,outputGeometryPrecision:this.outputGeometryPrecision,outputGeometryPrecisionUnits:this.outputGeometryPrecisionUnits,directionsLengthUnits:esri.tasks._NALengthUnit[this.directionsLengthUnits],directionsTimeAttributeName:this.directionsTimeAttribute,directionsStyleName:this.directionsStyleName},stops=this.stops;if(stops instanceof esri.tasks.FeatureSet&&stops.features.length>0){json.stops=dojo.toJson({type:"features",features:esri._encodeGraphics(stops.features,_1122&&_1122["stops.features"]),doNotLocateOnRestrictedElements:this.doNotLocateOnRestrictedElements});}else{if(stops instanceof esri.tasks.DataLayer){json.stops=stops;}else{if(stops instanceof esri.tasks.DataFile){json.stops=dojo.toJson({type:"features",url:stops.url,doNotLocateOnRestrictedElements:this.doNotLocateOnRestrictedElements});}}}if(this.directionsOutputType){switch(this.directionsOutputType.toLowerCase()){case "complete":json.directionsOutputType="esriDOTComplete";break;case "complete-no-events":json.directionsOutputType="esriDOTCompleteNoEvents";break;case "instructions-only":json.directionsOutputType="esriDOTInstructionsOnly";break;case "standard":json.directionsOutputType="esriDOTStandard";break;case "summary-only":json.directionsOutputType="esriDOTSummaryOnly";break;default:json.directionsOutputType=this.directionsOutputType;}}var _1123=function(barrs,_1124){if(!barrs){return null;}if(barrs instanceof esri.tasks.FeatureSet){if(barrs.features.length>0){return dojo.toJson({type:"features",features:esri._encodeGraphics(barrs.features,_1122&&_1122[_1124])});}else{return null;}}else{if(barrs instanceof esri.tasks.DataLayer){return barrs;}else{if(barrs instanceof esri.tasks.DataFile){return dojo.toJson({type:"features",url:barrs.url});}}}return dojo.toJson(barrs);};if(this.barriers){json.barriers=_1123(this.barriers,"barriers.features");}if(this.polygonBarriers){json.polygonBarriers=_1123(this.polygonBarriers,"polygonBarriers.features");}if(this.polylineBarriers){json.polylineBarriers=_1123(this.polylineBarriers,"polylineBarriers.features");}return esri.filter(json,function(value){if(value!==null){return true;}});}});dojo.declare("esri.tasks.RouteResult",null,{constructor:function(json){var sr=json.spatialReference,route=json.route;if(json.directions){var _1125=[],cgs=[];dojo.forEach(json.directions.features,function(f,i){cgs[i]=f.compressedGeometry;_1125[i]=f.strings;});json.directions.strings=_1125;this.directions=new esri.tasks.DirectionsFeatureSet(json.directions,cgs);}this.routeName=json.routeName;if(route){if(route.geometry){route.geometry.spatialReference=sr;}this.route=new esri.Graphic(route);}if(json.stops){var ss=(this.stops=[]);dojo.forEach(json.stops,function(stop,i){if(stop.geometry){stop.geometry.spatialReference=sr;}ss[stop.attributes.Sequence-1]=new esri.Graphic(stop);});}},routeName:null,directions:null,route:null,stops:null});});},"esri/virtualearth/VETiledLayer":function(){define(["dijit","dojo","dojox","dojo/require!esri/utils,esri/layers/tiled,esri/geometry,dojo/string"],function(dijit,dojo,dojox){dojo.provide("esri.virtualearth.VETiledLayer");dojo.require("esri.utils");dojo.require("esri.layers.tiled");dojo.require("esri.geometry");dojo.require("dojo.string");dojo.declare("esri.virtualearth.VETiledLayer",esri.layers.TiledMapServiceLayer,{constructor:function(_1126){try{_1126=dojo.mixin({bingMapsKey:null,culture:"en-US"},_1126||{});var _1127=window.location.protocol;if(_1127==="file:"){_1127="http:";}this.url=_1127+"//dev.virtualearth.net/REST/v1";this._url=esri.urlToObject(this.url);this.spatialReference=new esri.SpatialReference({wkid:102100});this.tileInfo=new esri.layers.TileInfo({rows:256,cols:256,dpi:96,origin:{x:-20037508.342787,y:20037508.342787},spatialReference:{wkid:102100},lods:[{level:1,resolution:78271.5169639999,scale:295828763.795777},{level:2,resolution:39135.7584820001,scale:147914381.897889},{level:3,resolution:19567.8792409999,scale:73957190.948944},{level:4,resolution:9783.93962049996,scale:36978595.474472},{level:5,resolution:4891.96981024998,scale:18489297.737236},{level:6,resolution:2445.98490512499,scale:9244648.868618},{level:7,resolution:1222.99245256249,scale:4622324.434309},{level:8,resolution:611.49622628138,scale:2311162.217155},{level:9,resolution:305.748113140558,scale:1155581.108577},{level:10,resolution:152.874056570411,scale:577790.554289},{level:11,resolution:76.4370282850732,scale:288895.277144},{level:12,resolution:38.2185141425366,scale:144447.638572},{level:13,resolution:19.1092570712683,scale:72223.819286},{level:14,resolution:9.55462853563415,scale:36111.909643},{level:15,resolution:4.77731426794937,scale:18055.954822},{level:16,resolution:2.38865713397468,scale:9027.977411},{level:17,resolution:1.19432856685505,scale:4513.988705},{level:18,resolution:0.597164283559817,scale:2256.994353},{level:19,resolution:0.298582141647617,scale:1128.497176}]});this.initialExtent=(this.fullExtent=new esri.geometry.Extent(-20037508.342787,-20037508.34278,20037508.34278,20037508.342787,new esri.SpatialReference({wkid:102100})));dojo.mixin(this,_1126);this.hasAttributionData=this.showAttribution;this._initLayer=dojo.hitch(this,this._initLayer);this._errorHandler=dojo.hitch(this,this._errorHandler);this._getTileInfo=dojo.hitch(this,this._getTileInfo);if(this.bingMapsKey){this._getTileInfo();}else{throw new Error(esri.bundle.virtualearth.vetiledlayer.bingMapsKeyNotSpecified);}}catch(e){this.onError(e);throw e;}},_unsetMap:function(map,_1128){this.inherited("_unsetMap",arguments);},_getTileInfo:function(){if(!this.mapStyle){return;}var url=this._url.path+"/Imagery/Metadata/"+this.mapStyle;if(this.bingMapsKey){var info=this.resourceInfo;if(!this.loaded&&info){this._initLayer(info);}else{esri.request({url:url,content:dojo.mixin({},{key:this.bingMapsKey,ss:true,c:this.culture,include:this.hasAttributionData?"imageryProviders":null}),callbackParamName:"jsonp",load:this._initLayer,error:this._errorHandler});}}},_initLayer:function(_1129,io){try{this.resourceInfo=dojo.toJson(_1129);var _112a=_1129.resourceSets[0].resources[0];var _112b=_112a.imageUrl.replace("{","${");this.tileServers=dojo.map(_112a.imageUrlSubdomains,function(_112c){var _112d=window.location.protocol;if(_112d==="file:"){_112d="http:";}return dojo.string.substitute(_112b,{subdomain:_112c}).replace("http:",_112d);});this._tsLength=this.tileServers.length;if(!this.loaded){this.copyright=this.copyright||"&copy; 2012 Microsoft Corporation and its data suppliers";this.loaded=true;this.onLoad(this);var _112e=this.loadCallback;if(_112e){delete this.loadCallback;_112e(this);}}else{this.refresh();this.onMapStyleChange();}}catch(e){this.onError(e);}},getAttributionData:function(){var dfd=new dojo.Deferred(),_112f=dojo.fromJson(this.resourceInfo),_1130;if(this.hasAttributionData&&_112f){_1130=dojo.getObject("resourceSets.0.resources.0.imageryProviders",false,_112f);}if(_1130){dfd.callback({contributors:_1130});}else{var err=new Error("Layer does not have attribution data");err.log=dojo.config.isDebug;dfd.errback(err);}return dfd;},getTileUrl:function(level,row,col){var _1131=this.tileServers[row%this._tsLength],_1132=_1131.replace(/\{/g,"${");return dojo.string.substitute(_1132,{quadkey:this._getQuadKey(level,row,col),culture:this.culture,token:this.bingMapsKey});},_getQuadKey:function(level,row,col){var _1133="",digit,mask,i;for(i=level;i>0;i--){digit="0";mask=1<<(i-1);if((col&mask)!=0){digit++;}if((row&mask)!=0){digit++;digit++;}_1133=_1133+digit;}return _1133;},setMapStyle:function(style){this.mapStyle=style;this._getTileInfo();},setCulture:function(_1134){this.culture=_1134;this._getTileInfo();},setBingMapsKey:function(_1135){this.bingMapsKey=_1135;},onMapStyleChange:function(){}});dojo.mixin(esri.virtualearth.VETiledLayer,{MAP_STYLE_AERIAL:"aerial",MAP_STYLE_AERIAL_WITH_LABELS:"aerialWithLabels",MAP_STYLE_ROAD:"road"});});},"esri/layers/layer":function(){define(["dijit","dojo","dojox","dojo/require!esri/utils,esri/geometry"],function(dijit,dojo,dojox){dojo.provide("esri.layers.layer");dojo.require("esri.utils");dojo.require("esri.geometry");dojo.declare("esri.layers.Layer",null,{constructor:function(url,_1136){if(url&&dojo.isString(url)){this._url=esri.urlToObject(this.url=url);}else{this.url=(this._url=null);_1136=_1136||url;if(_1136&&_1136.layerDefinition){_1136=null;}}this.spatialReference=new esri.SpatialReference(4326);this.initialExtent=new esri.geometry.Extent(-180,-90,180,90,new esri.SpatialReference(4326));this._map=this._div=null;this.normalization=true;if(_1136){if(_1136.id){this.id=_1136.id;}if(_1136.visible===false){this.visible=false;}if(esri.isDefined(_1136.opacity)){this.opacity=_1136.opacity;}if(esri.isDefined(_1136.minScale)){this.setMinScale(_1136.minScale);}if(esri.isDefined(_1136.maxScale)){this.setMaxScale(_1136.maxScale);}this.attributionDataUrl=_1136.attributionDataUrl||"";this.hasAttributionData=!!this.attributionDataUrl;if(esri.isDefined(_1136.showAttribution)){this.showAttribution=_1136.showAttribution;}}this._errorHandler=dojo.hitch(this,this._errorHandler);},id:null,visible:true,loaded:false,minScale:0,maxScale:0,visibleAtMapScale:false,suspended:true,attributionDataUrl:"",hasAttributionData:false,showAttribution:true,_errorHandler:function(err){this.onError(err);},_setMap:function(map,_1137,index,lod){this._map=map;this._lyrZEHandle=dojo.connect(map,"onZoomEnd",this,this._processMapScale);if(map.loaded){this.visibleAtMapScale=this._isMapAtVisibleScale();}else{var _1138=dojo.connect(map,"onLoad",this,function(){dojo.disconnect(_1138);_1138=null;this._processMapScale();});}},_unsetMap:function(map,_1139){dojo.disconnect(this._lyrZEHandle);this._lyrZEHandle=null;this._map=null;this.suspended=true;},_cleanUp:function(){this._map=this._div=null;},_fireUpdateStart:function(){if(this.updating){return;}this.updating=true;this.onUpdateStart();if(this._map){this._map._incr();}},_fireUpdateEnd:function(error,info){this.updating=false;this.onUpdateEnd(error,info);if(this._map){this._map._decr();}},_getToken:function(){var url=this._url,crd=this.credential;return (url&&url.query&&url.query.token)||(crd&&crd.token)||undefined;},_findCredential:function(){this.credential=esri.id&&this._url&&esri.id.findCredential(this._url.path);},_useSSL:function(){var _113a=this._url,re=/^http:/i,rep="https:";if(this.url){this.url=this.url.replace(re,rep);}if(_113a&&_113a.path){_113a.path=_113a.path.replace(re,rep);}},refresh:function(){},show:function(){this.setVisibility(true);},hide:function(){this.setVisibility(false);},setMinScale:function(_113b){this.setScaleRange(_113b);},setMaxScale:function(_113c){this.setScaleRange(null,_113c);},setScaleRange:function(_113d,_113e){var _113f=esri.isDefined(_113d),_1140=esri.isDefined(_113e);if(!this.loaded){this._hasMin=this._hasMin||_113f;this._hasMax=this._hasMax||_1140;}var _1141=this.minScale,_1142=this.maxScale;this.minScale=(_113f?_113d:this.minScale)||0;this.maxScale=(_1140?_113e:this.maxScale)||0;if((_1141!==this.minScale)||(_1142!==this.maxScale)){this.onScaleRangeChange();this._processMapScale();}},suspend:function(){this._suspended=true;this.evaluateSuspension();},resume:function(){this._suspended=false;this.evaluateSuspension();},canResume:function(){return this.loaded&&this._map&&this._map.loaded&&this.visible&&this.visibleAtMapScale&&!this._suspended;},evaluateSuspension:function(){if(this.canResume()){if(this.suspended){this._resume();}}else{if(!this.suspended){this._suspend();}}},_suspend:function(){this.suspended=true;this.onSuspend();if(this._map){this._map.onLayerSuspend(this);}},_resume:function(){this.suspended=false;var first=(this._resumedOnce===undefined);if(first){this._resumedOnce=true;}this.onResume({firstOccurrence:first});if(this._map){this._map.onLayerResume(this);}},_processMapScale:function(){var _1143=this.visibleAtMapScale;this.visibleAtMapScale=this._isMapAtVisibleScale();if(_1143!==this.visibleAtMapScale){this.onScaleVisibilityChange();this.evaluateSuspension();}},isVisibleAtScale:function(scale){return (scale?esri.layers.Layer.prototype._isMapAtVisibleScale.apply(this,arguments):false);},_isMapAtVisibleScale:function(scale){if(!scale&&(!this._map||!this._map.loaded)){return false;}scale=scale||this._map.getScale();var _1144=this.minScale,_1145=this.maxScale,_1146=!_1144,_1147=!_1145;if(!_1146&&scale<=_1144){_1146=true;}if(!_1147&&scale>=_1145){_1147=true;}return (_1146&&_1147)?true:false;},getAttributionData:function(){var url=this.attributionDataUrl,dfd=new dojo.Deferred(esri._dfdCanceller);if(this.hasAttributionData&&url){dfd._pendingDfd=esri.request({url:url,content:{f:"json"},handleAs:"json",callbackParamName:"callback"});dfd._pendingDfd.then(function(_1148){dfd.callback(_1148);},function(error){dfd.errback(error);});}else{var err=new Error("Layer does not have attribution data");err.log=dojo.config.isDebug;dfd.errback(err);}return dfd;},getResourceInfo:function(){var info=this.resourceInfo;return dojo.isString(info)?dojo.fromJson(info):dojo.clone(info);},setNormalization:function(_1149){this.normalization=_1149;},setVisibility:function(v){if(this.visible!==v){this.visible=v;this.onVisibilityChange(this.visible);this.evaluateSuspension();}},onLoad:function(){},onVisibilityChange:function(){},onScaleRangeChange:function(){},onScaleVisibilityChange:function(){},onSuspend:function(){},onResume:function(){},onUpdate:function(){},onUpdateStart:function(){},onUpdateEnd:function(){},onError:function(){}});});},"dijit/form/HorizontalSlider":function(){require({cache:{"url:dijit/form/templates/HorizontalSlider.html":"<table class=\"dijit dijitReset dijitSlider dijitSliderH\" cellspacing=\"0\" cellpadding=\"0\" border=\"0\" rules=\"none\" data-dojo-attach-event=\"onkeypress:_onKeyPress,onkeyup:_onKeyUp\"\n\trole=\"presentation\"\n\t><tr class=\"dijitReset\"\n\t\t><td class=\"dijitReset\" colspan=\"2\"></td\n\t\t><td data-dojo-attach-point=\"topDecoration\" class=\"dijitReset dijitSliderDecoration dijitSliderDecorationT dijitSliderDecorationH\"></td\n\t\t><td class=\"dijitReset\" colspan=\"2\"></td\n\t></tr\n\t><tr class=\"dijitReset\"\n\t\t><td class=\"dijitReset dijitSliderButtonContainer dijitSliderButtonContainerH\"\n\t\t\t><div class=\"dijitSliderDecrementIconH\" style=\"display:none\" data-dojo-attach-point=\"decrementButton\"><span class=\"dijitSliderButtonInner\">-</span></div\n\t\t></td\n\t\t><td class=\"dijitReset\"\n\t\t\t><div class=\"dijitSliderBar dijitSliderBumper dijitSliderBumperH dijitSliderLeftBumper\" data-dojo-attach-event=\"press:_onClkDecBumper\"></div\n\t\t></td\n\t\t><td class=\"dijitReset\"\n\t\t\t><input data-dojo-attach-point=\"valueNode\" type=\"hidden\" ${!nameAttrSetting}\n\t\t\t/><div class=\"dijitReset dijitSliderBarContainerH\" role=\"presentation\" data-dojo-attach-point=\"sliderBarContainer\"\n\t\t\t\t><div role=\"presentation\" data-dojo-attach-point=\"progressBar\" class=\"dijitSliderBar dijitSliderBarH dijitSliderProgressBar dijitSliderProgressBarH\" data-dojo-attach-event=\"press:_onBarClick\"\n\t\t\t\t\t><div class=\"dijitSliderMoveable dijitSliderMoveableH\"\n\t\t\t\t\t\t><div data-dojo-attach-point=\"sliderHandle,focusNode\" class=\"dijitSliderImageHandle dijitSliderImageHandleH\" data-dojo-attach-event=\"press:_onHandleClick\" role=\"slider\"></div\n\t\t\t\t\t></div\n\t\t\t\t></div\n\t\t\t\t><div role=\"presentation\" data-dojo-attach-point=\"remainingBar\" class=\"dijitSliderBar dijitSliderBarH dijitSliderRemainingBar dijitSliderRemainingBarH\" data-dojo-attach-event=\"press:_onBarClick\"></div\n\t\t\t></div\n\t\t></td\n\t\t><td class=\"dijitReset\"\n\t\t\t><div class=\"dijitSliderBar dijitSliderBumper dijitSliderBumperH dijitSliderRightBumper\" data-dojo-attach-event=\"press:_onClkIncBumper\"></div\n\t\t></td\n\t\t><td class=\"dijitReset dijitSliderButtonContainer dijitSliderButtonContainerH\"\n\t\t\t><div class=\"dijitSliderIncrementIconH\" style=\"display:none\" data-dojo-attach-point=\"incrementButton\"><span class=\"dijitSliderButtonInner\">+</span></div\n\t\t></td\n\t></tr\n\t><tr class=\"dijitReset\"\n\t\t><td class=\"dijitReset\" colspan=\"2\"></td\n\t\t><td data-dojo-attach-point=\"containerNode,bottomDecoration\" class=\"dijitReset dijitSliderDecoration dijitSliderDecorationB dijitSliderDecorationH\"></td\n\t\t><td class=\"dijitReset\" colspan=\"2\"></td\n\t></tr\n></table>\n"}});define("dijit/form/HorizontalSlider",["dojo/_base/array","dojo/_base/declare","dojo/dnd/move","dojo/_base/event","dojo/_base/fx","dojo/dom-geometry","dojo/dom-style","dojo/keys","dojo/_base/lang","dojo/sniff","dojo/dnd/Moveable","dojo/dnd/Mover","dojo/query","dojo/mouse","../registry","../focus","../typematic","./Button","./_FormValueWidget","../_Container","dojo/text!./templates/HorizontalSlider.html"],function(array,_114a,move,event,fx,_114b,_114c,keys,lang,has,_114d,Mover,query,mouse,_114e,focus,_114f,_1150,_1151,_1152,_1153){var _1154=_114a("dijit.form._SliderMover",Mover,{onMouseMove:function(e){var _1155=this.widget;var _1156=_1155._abspos;if(!_1156){_1156=_1155._abspos=_114b.position(_1155.sliderBarContainer,true);_1155._setPixelValue_=lang.hitch(_1155,"_setPixelValue");_1155._isReversed_=_1155._isReversed();}var _1157=e[_1155._mousePixelCoord]-_1156[_1155._startingPixelCoord];_1155._setPixelValue_(_1155._isReversed_?(_1156[_1155._pixelCount]-_1157):_1157,_1156[_1155._pixelCount],false);},destroy:function(e){Mover.prototype.destroy.apply(this,arguments);var _1158=this.widget;_1158._abspos=null;_1158._setValueAttr(_1158.value,true);}});var _1159=_114a("dijit.form.HorizontalSlider",[_1151,_1152],{templateString:_1153,value:0,showButtons:true,minimum:0,maximum:100,discreteValues:Infinity,pageIncrement:2,clickSelect:true,slideDuration:_114e.defaultDuration,_setIdAttr:"",baseClass:"dijitSlider",cssStateNodes:{incrementButton:"dijitSliderIncrementButton",decrementButton:"dijitSliderDecrementButton",focusNode:"dijitSliderThumb"},_mousePixelCoord:"pageX",_pixelCount:"w",_startingPixelCoord:"x",_handleOffsetCoord:"left",_progressPixelSize:"width",_onKeyUp:function(e){if(this.disabled||this.readOnly||e.altKey||e.ctrlKey||e.metaKey){return;}this._setValueAttr(this.value,true);},_onKeyPress:function(e){if(this.disabled||this.readOnly||e.altKey||e.ctrlKey||e.metaKey){return;}switch(e.charOrCode){case keys.HOME:this._setValueAttr(this.minimum,false);break;case keys.END:this._setValueAttr(this.maximum,false);break;case ((this._descending||this.isLeftToRight())?keys.RIGHT_ARROW:keys.LEFT_ARROW):case (this._descending===false?keys.DOWN_ARROW:keys.UP_ARROW):case (this._descending===false?keys.PAGE_DOWN:keys.PAGE_UP):this.increment(e);break;case ((this._descending||this.isLeftToRight())?keys.LEFT_ARROW:keys.RIGHT_ARROW):case (this._descending===false?keys.UP_ARROW:keys.DOWN_ARROW):case (this._descending===false?keys.PAGE_UP:keys.PAGE_DOWN):this.decrement(e);break;default:return;}event.stop(e);},_onHandleClick:function(e){if(this.disabled||this.readOnly){return;}if(!has("ie")){focus.focus(this.sliderHandle);}event.stop(e);},_isReversed:function(){return !this.isLeftToRight();},_onBarClick:function(e){if(this.disabled||this.readOnly||!this.clickSelect){return;}focus.focus(this.sliderHandle);event.stop(e);var _115a=_114b.position(this.sliderBarContainer,true);var _115b=e[this._mousePixelCoord]-_115a[this._startingPixelCoord];this._setPixelValue(this._isReversed()?(_115a[this._pixelCount]-_115b):_115b,_115a[this._pixelCount],true);this._movable.onMouseDown(e);},_setPixelValue:function(_115c,_115d,_115e){if(this.disabled||this.readOnly){return;}var count=this.discreteValues;if(count<=1||count==Infinity){count=_115d;}count--;var _115f=_115d/count;var _1160=Math.round(_115c/_115f);this._setValueAttr(Math.max(Math.min((this.maximum-this.minimum)*_1160/count+this.minimum,this.maximum),this.minimum),_115e);},_setValueAttr:function(value,_1161){this._set("value",value);this.valueNode.value=value;this.focusNode.setAttribute("aria-valuenow",value);this.inherited(arguments);var _1162=(value-this.minimum)/(this.maximum-this.minimum);var _1163=(this._descending===false)?this.remainingBar:this.progressBar;var _1164=(this._descending===false)?this.progressBar:this.remainingBar;if(this._inProgressAnim&&this._inProgressAnim.status!="stopped"){this._inProgressAnim.stop(true);}if(_1161&&this.slideDuration>0&&_1163.style[this._progressPixelSize]){var _1165=this;var props={};var start=parseFloat(_1163.style[this._progressPixelSize]);var _1166=this.slideDuration*(_1162-start/100);if(_1166==0){return;}if(_1166<0){_1166=0-_1166;}props[this._progressPixelSize]={start:start,end:_1162*100,units:"%"};this._inProgressAnim=fx.animateProperty({node:_1163,duration:_1166,onAnimate:function(v){_1164.style[_1165._progressPixelSize]=(100-parseFloat(v[_1165._progressPixelSize]))+"%";},onEnd:function(){delete _1165._inProgressAnim;},properties:props});this._inProgressAnim.play();}else{_1163.style[this._progressPixelSize]=(_1162*100)+"%";_1164.style[this._progressPixelSize]=((1-_1162)*100)+"%";}},_bumpValue:function(_1167,_1168){if(this.disabled||this.readOnly){return;}var s=_114c.getComputedStyle(this.sliderBarContainer);var c=_114b.getContentBox(this.sliderBarContainer,s);var count=this.discreteValues;if(count<=1||count==Infinity){count=c[this._pixelCount];}count--;var value=(this.value-this.minimum)*count/(this.maximum-this.minimum)+_1167;if(value<0){value=0;}if(value>count){value=count;}value=value*(this.maximum-this.minimum)/count+this.minimum;this._setValueAttr(value,_1168);},_onClkBumper:function(val){if(this.disabled||this.readOnly||!this.clickSelect){return;}this._setValueAttr(val,true);},_onClkIncBumper:function(){this._onClkBumper(this._descending===false?this.minimum:this.maximum);},_onClkDecBumper:function(){this._onClkBumper(this._descending===false?this.maximum:this.minimum);},decrement:function(e){this._bumpValue(e.charOrCode==keys.PAGE_DOWN?-this.pageIncrement:-1);},increment:function(e){this._bumpValue(e.charOrCode==keys.PAGE_UP?this.pageIncrement:1);},_mouseWheeled:function(evt){event.stop(evt);this._bumpValue(evt.wheelDelta<0?-1:1,true);},startup:function(){if(this._started){return;}array.forEach(this.getChildren(),function(child){if(this[child.container]!=this.containerNode){this[child.container].appendChild(child.domNode);}},this);this.inherited(arguments);},_typematicCallback:function(count,_1169,e){if(count==-1){this._setValueAttr(this.value,true);}else{this[(_1169==(this._descending?this.incrementButton:this.decrementButton))?"decrement":"increment"](e);}},buildRendering:function(){this.inherited(arguments);if(this.showButtons){this.incrementButton.style.display="";this.decrementButton.style.display="";}var label=query("label[for=\""+this.id+"\"]");if(label.length){if(!label[0].id){label[0].id=this.id+"_label";}this.focusNode.setAttribute("aria-labelledby",label[0].id);}this.focusNode.setAttribute("aria-valuemin",this.minimum);this.focusNode.setAttribute("aria-valuemax",this.maximum);},postCreate:function(){this.inherited(arguments);if(this.showButtons){this.own(_114f.addMouseListener(this.decrementButton,this,"_typematicCallback",25,500),_114f.addMouseListener(this.incrementButton,this,"_typematicCallback",25,500));}this.connect(this.domNode,mouse.wheel,"_mouseWheeled");var mover=_114a(_1154,{widget:this});this._movable=new _114d(this.sliderHandle,{mover:mover});this._layoutHackIE7();},destroy:function(){this._movable.destroy();if(this._inProgressAnim&&this._inProgressAnim.status!="stopped"){this._inProgressAnim.stop(true);}this.inherited(arguments);}});_1159._Mover=_1154;return _1159;});},"dijit/form/_FormValueWidget":function(){define("dijit/form/_FormValueWidget",["dojo/_base/declare","dojo/sniff","./_FormWidget","./_FormValueMixin"],function(_116a,has,_116b,_116c){return _116a("dijit.form._FormValueWidget",[_116b,_116c],{_layoutHackIE7:function(){if(has("ie")==7){var _116d=this.domNode;var _116e=_116d.parentNode;var _116f=_116d.firstChild||_116d;var _1170=_116f.style.filter;var _1171=this;while(_116e&&_116e.clientHeight==0){(function ping(){var _1172=_1171.connect(_116e,"onscroll",function(){_1171.disconnect(_1172);_116f.style.filter=(new Date()).getMilliseconds();_1171.defer(function(){_116f.style.filter=_1170;});});})();_116e=_116e.parentNode;}}}});});},"*now":function(r){r(["dojo/i18n!*preload*esri/nls/jsapi*[\"ar\",\"az\",\"ca\",\"cs\",\"da\",\"de-de\",\"el\",\"en-gb\",\"en-us\",\"es-es\",\"fi-fi\",\"fr-fr\",\"he-il\",\"hu\",\"it-it\",\"ja-jp\",\"ko-kr\",\"nl-nl\",\"nb\",\"pl\",\"pt-br\",\"pt-pt\",\"ro\",\"ru\",\"sk\",\"sl\",\"sv\",\"th\",\"tr\",\"zh-tw\",\"zh-cn\",\"ROOT\"]"]);},"*noref":1}});define("esri/jsapi",["dijit","dojo","dojox","dojo/require!esri/main,dojo/fx/Toggler,esri/map,esri/layers/graphics,esri/layers/agstiled,esri/layers/agsdynamic,dijit/_base,dijit/form/DropDownButton,dijit/form/ComboButton,dijit/form/ToggleButton,esri/dijit/InfoWindow,esri/dijit/Attribution,esri/layers/agsimageservice,esri/tasks/find,esri/tasks/geometry,esri/tasks/gp,esri/tasks/identify,esri/tasks/locator,esri/tasks/query,esri/toolbars/draw,esri/toolbars/navigation,esri/tasks/route,esri/virtualearth/VETiledLayer,esri/virtualearth/VEGeocoder,esri/IdentityManager"],function(dijit,dojo,dojox){dojo.provide("esri.jsapi");dojo.require("esri.main");dojo.require("dojo.fx.Toggler");dojo.require("esri.map");dojo.require("esri.layers.graphics");dojo.require("esri.layers.agstiled");dojo.require("esri.layers.agsdynamic");dojo.require("dijit._base");dojo.require("dijit.form.DropDownButton");dojo.require("dijit.form.ComboButton");dojo.require("dijit.form.ToggleButton");dojo.require("esri.dijit.InfoWindow");dojo.require("esri.dijit.Attribution");dojo.require("esri.layers.agsimageservice");dojo.require("esri.tasks.find");dojo.require("esri.tasks.geometry");dojo.require("esri.tasks.gp");dojo.require("esri.tasks.identify");dojo.require("esri.tasks.locator");dojo.require("esri.tasks.query");dojo.require("esri.toolbars.draw");dojo.require("esri.toolbars.navigation");dojo.require("esri.tasks.route");dojo.require("esri.virtualearth.VETiledLayer");dojo.require("esri.virtualearth.VEGeocoder");dojo.require("esri.IdentityManager");});